{"version":3,"file":"worker.js","mappings":"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,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;;EAE/L;EACA,IAAIC,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EACxgD,IAAIC,EAAE,GAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;;EAExgD;EACA,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;;EAEzgG;EACA,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;;EAEzgG;EACA,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU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C;MACDtsG,GAAGA,CAACo3B,GAAG,EAAE;QACP,IAAI,CAACk1E,WAAW,EACdA,WAAW,GAAGl1E,GAAG;MACrB;IACF;EACF,CAAC,CAAC;EAEF6kC,OAAO,CAACgkC,KAAK,GAAGA,KAAK;EACrBhkC,OAAO,CAAC0kC,aAAa,GAAGA,aAAa;EACrC1kC,OAAO,CAAC6kC,KAAK,GAAGA,KAAK;EACrB7kC,OAAO,CAACspC,cAAc,GAAGA,cAAc;EACvCtpC,OAAO,CAAC6sC,SAAS,GAAGA,SAAS;EAC7B7sC,OAAO,CAACuxC,UAAU,GAAGA,UAAU;EAC/BvxC,OAAO,CAACywC,YAAY,GAAGA,YAAY;EACnCzwC,OAAO,CAAC9+B,eAAe,GAAGA,eAAe;EACzC8+B,OAAO,CAACvuD,IAAI,GAAGA,IAAI;EACnBuuD,OAAO,CAACsxC,IAAI,GAAGA,IAAI;EACnBtxC,OAAO,CAACr9C,KAAK,GAAGA,KAAK;EACrBq9C,OAAO,CAACoxC,MAAM,GAAGA,MAAM;EAEvBvqG,MAAM,CAACo2D,cAAc,CAAC+C,OAAO,EAAE,YAAY,EAAE;IAAExqE,KAAK,EAAE;EAAK,CAAC,CAAC;AAE/D,CAAE,CAAC;;;;;;;ACn5BH;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;;;;WClCA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;;;;WCAA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA;;;;;WCpCA;WACA;WACA;WACA;;;;;UEHA;UACA","sources":["webpack://api/webpack/universalModuleDefinition","webpack://api/./src/config.ts","webpack://api/./src/lib/big.js/index.js","webpack://api/./src/util/decimals.ts","webpack://api/./src/util/random.ts","webpack://api/./src/util/bigint.ts","webpack://api/./src/util/logs.ts","webpack://api/./src/util/createPostMessageInterface.ts","webpack://api/./src/util/bigintPatch.ts","webpack://api/./src/api/types/misc.ts","webpack://api/./src/api/types/errors.ts","webpack://api/./src/api/types/index.ts","webpack://api/./src/util/account.ts","webpack://api/./src/util/isMnemonicPrivateKey.ts","webpack://api/./src/api/storages/types.ts","webpack://api/./src/util/generateUniqueId.ts","webpack://api/./src/util/PostMessageConnector.ts","webpack://api/./src/util/capacitorStorageProxy/connector.ts","webpack://api/./src/api/storages/capacitorStorage.ts","webpack://api/./src/api/storages/extension.ts","webpack://api/./src/util/iteratees.ts","webpack://api/./src/api/storages/idb.ts","webpack://api/./src/api/storages/localStorage.ts","webpack://api/./src/api/storages/index.ts","webpack://api/./src/api/common/accounts.ts","webpack://api/./src/api/common/utils.ts","webpack://api/./src/api/blockchains/ton/auth.ts","webpack://api/./src/api/blockchains/ton/util/index.ts","webpack://api/./src/util/metadata.ts","webpack://api/./src/lib/confusables/util.ts","webpack://api/./src/lib/confusables/characters.ts","webpack://api/./src/lib/confusables/index.ts","webpack://api/./src/api/errors.ts","webpack://api/./src/util/schedulers.ts","webpack://api/./src/util/fetch.ts","webpack://api/./src/api/common/backend.ts","webpack://api/./src/api/common/addresses.ts","webpack://api/./src/api/blockchains/ton/constants.ts","webpack://api/./src/api/environment.ts","webpack://api/./src/lib/axios-fetch-adapter/index.js","webpack://api/./src/util/withCacheAsync.ts","webpack://api/./src/api/blockchains/ton/contracts/DnsItem.ts","webpack://api/./src/api/blockchains/ton/contracts/JettonConstants.ts","webpack://api/./src/api/blockchains/ton/contracts/JettonMaster.ts","webpack://api/./src/api/blockchains/ton/contracts/JettonWallet.ts","webpack://api/./src/api/blockchains/ton/util/TonClient.ts","webpack://api/./src/api/blockchains/ton/util/tonCore.ts","webpack://api/./src/api/blockchains/ton/util/apiV3.ts","webpack://api/./src/api/blockchains/ton/util/tonapiio.ts","webpack://api/./src/api/blockchains/ton/util/metadata.ts","webpack://api/./src/util/compareActivities.ts","webpack://api/./src/api/blockchains/ton/util/encryption.ts","webpack://api/./src/api/blockchains/ton/util/diesel.ts","webpack://api/./src/api/blockchains/ton/util/sendExternal.ts","webpack://api/./src/util/areDeepEqual.ts","webpack://api/./src/util/assert.ts","webpack://api/./src/api/common/helpers.ts","webpack://api/./src/util/dns.ts","webpack://api/./src/api/blockchains/ton/util/dns.ts","webpack://api/./src/api/blockchains/ton/address.ts","webpack://api/./src/api/blockchains/ton/tokens.ts","webpack://api/./src/api/blockchains/ton/wallet.ts","webpack://api/./src/api/blockchains/ton/transactions.ts","webpack://api/./src/api/blockchains/ton/nfts.ts","webpack://api/./src/api/blockchains/ton/contracts/NominatorPool.ts","webpack://api/./src/api/common/cache.ts","webpack://api/./src/api/db.ts","webpack://api/./src/api/blockchains/ton/staking.ts","webpack://api/./src/api/blockchains/ton/other.ts","webpack://api/./src/api/blockchains/ton/swap.ts","webpack://api/./src/api/blockchains/ton/index.ts","webpack://api/./src/api/blockchains/index.ts","webpack://api/./src/api/hooks.ts","webpack://api/./src/api/methods/dapps.ts","webpack://api/./src/util/Deferred.ts","webpack://api/./src/util/pauseOrFocus.ts","webpack://api/./src/util/callbacks.ts","webpack://api/./src/api/common/txCallbacks.ts","webpack://api/./src/util/swap/buildSwapId.ts","webpack://api/./src/api/methods/other.ts","webpack://api/./src/api/methods/tokens.ts","webpack://api/./src/api/methods/swap.ts","webpack://api/./src/api/methods/transactions.ts","webpack://api/./src/api/methods/nfts.ts","webpack://api/./src/api/methods/preload.ts","webpack://api/./src/api/methods/prices.ts","webpack://api/./src/api/methods/staking.ts","webpack://api/./src/api/methods/vesting.ts","webpack://api/./src/api/methods/polling.ts","webpack://api/./src/api/methods/accounts.ts","webpack://api/./src/api/methods/auth.ts","webpack://api/./src/api/common/dappPromises.ts","webpack://api/./src/api/methods/wallet.ts","webpack://api/./src/util/handleError.ts","webpack://api/./src/util/safeExec.ts","webpack://api/./src/api/tonConnect/types/index.ts","webpack://api/./src/api/tonConnect/errors.ts","webpack://api/./src/api/tonConnect/utils.ts","webpack://api/./src/api/tonConnect/index.ts","webpack://api/./src/api/tonConnect/sse.ts","webpack://api/./src/api/methods/index.ts","webpack://api/./src/api/methods/init.ts","webpack://api/./src/api/providers/worker/provider.ts","webpack://api/./src/lib/aes-js/index.js","webpack://api/./src/lib/axios-retry/index.js","webpack://api/./src/lib/dexie/dexie.js","webpack://api/./src/lib/is-retry-allowed/index.js","webpack://api/./src/lib/noble-ed25519/index.js","webpack://api/ignored|/media/hdd/Projects/Pet/Android/mytonwallet/node_modules/tweetnacl-util|buffer","webpack://api/ignored|/media/hdd/Projects/Pet/Android/mytonwallet/node_modules/tweetnacl|crypto","webpack://api/webpack/bootstrap","webpack://api/webpack/runtime/chunk loaded","webpack://api/webpack/runtime/compat get default export","webpack://api/webpack/runtime/define property getters","webpack://api/webpack/runtime/ensure chunk","webpack://api/webpack/runtime/get javascript chunk filename","webpack://api/webpack/runtime/global","webpack://api/webpack/runtime/hasOwnProperty shorthand","webpack://api/webpack/runtime/make namespace object","webpack://api/webpack/runtime/publicPath","webpack://api/webpack/runtime/importScripts chunk loading","webpack://api/webpack/runtime/startup chunk dependencies","webpack://api/webpack/before-startup","webpack://api/webpack/startup","webpack://api/webpack/after-startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"api\"] = factory();\n\telse\n\t\troot[\"api\"] = factory();\n})(this, () => {\nreturn ","import type { ApiBaseCurrency, ApiSwapAsset, ApiWalletVersion } from './api/types';\nimport type { LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const APP_NAME = process.env.APP_NAME || 'MyTonWallet';\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = 'https://mytonwallet.app';\nexport const BETA_URL = 'https://beta.mytonwallet.app';\nexport const APP_REPO_URL = 'https://github.com/mytonwalletorg/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = 'https://mytonwallet.app';\n\nexport const MNEMONIC_COUNT = 24;\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const TON_SYMBOL = 'TON';\n\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\n\nexport const DEFAULT_DECIMAL_PLACES = 9;\nexport const WHOLE_PART_DELIMITER = ' '; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONHTTPAPI_MAINNET_URL = process.env.TONHTTPAPI_MAINNET_URL\n  || 'https://tonhttpapi.mytonwallet.org/api/v2/jsonRPC';\nexport const TONHTTPAPI_MAINNET_API_KEY = process.env.TONHTTPAPI_MAINNET_API_KEY;\nexport const ELECTRON_TONHTTPAPI_MAINNET_API_KEY = process.env.ELECTRON_TONHTTPAPI_MAINNET_API_KEY;\nexport const TONHTTPAPI_V3_MAINNET_API_URL = process.env.TONHTTPAPI_V3_MAINNET_API_KEY\n  || 'https://tonhttpapi-v3.mytonwallet.org/api/v3';\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONHTTPAPI_TESTNET_URL = process.env.TONHTTPAPI_TESTNET_URL\n  || 'https://tonhttpapi-testnet.mytonwallet.org/api/v2/jsonRPC';\nexport const TONHTTPAPI_TESTNET_API_KEY = process.env.TONHTTPAPI_TESTNET_API_KEY;\nexport const ELECTRON_TONHTTPAPI_TESTNET_API_KEY = process.env.ELECTRON_TONHTTPAPI_TESTNET_API_KEY;\nexport const TONHTTPAPI_V3_TESTNET_API_URL = process.env.TONHTTPAPI_V3_TESTNET_API_KEY\n  || 'https://tonhttpapi-v3-testnet.mytonwallet.org/api/v3';\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const SUPPORT_USERNAME = 'MyTonWalletSupport';\nexport const MY_TON_WALLET_PROMO_URL = 'https://mytonwallet.io';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const TON_EXPLORER_BASE_MAINNET_URL = 'https://tonviewer.com/';\nexport const TON_EXPLORER_BASE_TESTNET_URL = 'https://testnet.tonviewer.com/';\nexport const TON_EXPLORER_NAME = 'Tonviewer';\nexport const TOKEN_EXPLORER_MAINNET_URL = 'https://tonviewer.com/{address}?section=jetton';\nexport const TOKEN_EXPLORER_TESTNET_URL = 'https://testnet.tonviewer.com/{address}?section=jetton';\nexport const TOKEN_EXPLORER_NAME = 'TonViewer';\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hour\n\nexport const TONCOIN_SLUG = 'toncoin';\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = 'ton-eqcxe6mutq'; // USD₮\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = 'usdtrx';\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const LANG_CACHE_NAME = 'mtw-lang-125';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Español',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: 'Русский',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '简体',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '繁體',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Türkçe',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: 'ไทย',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: 'Українська',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const STAKING_CYCLE_DURATION_MS = 131072000; // 36.4 hours\nexport const VALIDATION_PERIOD_MS = 65536000; // 18.2 h.\nexport const ONE_TON = 1000000000n;\nexport const MIN_BALANCE_FOR_UNSTAKE = 1020000000n; // 1.02 TON\nexport const STAKING_FORWARD_AMOUNT = ONE_TON;\nexport const DEFAULT_FEE = 15000000n; // 0.015 TON\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = ONE_TON * 10001n;\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = 'mytonwallet';\n\nexport const NFT_FRAGMENT_COLLECTIONS = new Set([\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n]);\n\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\nexport const MYCOIN_TOKEN = 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w';\nexport const MYCOIN_SLUG = 'ton-eqcfvnlrbn';\nexport const MYCOIN_TOKEN_TESTNET = 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ';\nexport const MYCOIN_SLUG_TESTNET = 'ton-kqawlxpebw';\n\nexport const TOKEN_INFO = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TON_SYMBOL,\n    slug: TONCOIN_SLUG,\n    cmcSlug: TONCOIN_SLUG,\n    quote: {\n      slug: TONCOIN_SLUG,\n      price: 1.95,\n      priceUsd: 1.95,\n      percentChange24h: 0,\n    },\n    decimals: DEFAULT_DECIMAL_PLACES,\n  },\n};\n\nexport const TON_BLOCKCHAIN = 'ton';\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TON_SYMBOL,\n    blockchain: TON_BLOCKCHAIN,\n    slug: TONCOIN_SLUG,\n    decimals: DEFAULT_DECIMAL_PLACES,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  'ton-eqcxe6mutq': {\n    name: 'Tether USD',\n    symbol: 'USD₮',\n    blockchain: TON_BLOCKCHAIN,\n    slug: 'ton-eqcxe6mutq',\n    decimals: 9,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    contract: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\n\nexport const MIN_ASSETS_TAB_VIEW = 5;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const SHORT_CURRENCY_SYMBOL_MAP = {\n  USD: '$',\n  EUR: '€',\n  RUB: '₽',\n  CNY: '¥',\n};\nexport const CURRENCY_LIST: { value: ApiBaseCurrency; name: string }[] = [\n  {\n    value: 'USD',\n    name: 'US Dollar',\n  }, {\n    value: 'EUR',\n    name: 'Euro',\n  }, {\n    value: 'RUB',\n    name: 'Ruble',\n  }, {\n    value: 'CNY',\n    name: 'Yuan',\n  }, {\n    value: 'BTC',\n    name: 'Bitcoin',\n  }, {\n    value: TON_SYMBOL,\n    name: 'Toncoin',\n  },\n];\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\n// eslint-disable-next-line max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'EQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0D5s';\nexport const DIESEL_TOKENS = new Set([\n  'ton-eqcxe6mutq', // USDT\n  'ton-eqavlwfdxg', // Notcoin\n  'ton-eqcvxjy4eg', // DOGS\n]);\n","/*\n *  big.js v6.2.1\n *  A small, fast, easy-to-use library for arbitrary-precision decimal arithmetic.\n *  Copyright (c) 2022 Michael Mclaughlin\n *  https://github.com/MikeMcl/big.js/LICENCE.md\n */\n\n\n/************************************** EDITABLE DEFAULTS *****************************************/\n\n\n  // The default values below must be integers within the stated ranges.\n\n  /*\n   * The maximum number of decimal places (DP) of the results of operations involving division:\n   * div and sqrt, and pow with negative exponents.\n   */\nvar DP = 20,          // 0 to MAX_DP\n\n  /*\n   * The rounding mode (RM) used when rounding to the above decimal places.\n   *\n   *  0  Towards zero (i.e. truncate, no rounding).       (ROUND_DOWN)\n   *  1  To nearest neighbour. If equidistant, round up.  (ROUND_HALF_UP)\n   *  2  To nearest neighbour. If equidistant, to even.   (ROUND_HALF_EVEN)\n   *  3  Away from zero.                                  (ROUND_UP)\n   */\n  RM = 1,             // 0, 1, 2 or 3\n\n  // The maximum value of DP and Big.DP.\n  MAX_DP = 1E6,       // 0 to 1000000\n\n  // The maximum magnitude of the exponent argument to the pow method.\n  MAX_POWER = 1E6,    // 1 to 1000000\n\n  /*\n   * The negative exponent (NE) at and beneath which toString returns exponential notation.\n   * (JavaScript numbers: -7)\n   * -1000000 is the minimum recommended exponent value of a Big.\n   */\n  NE = -7,            // 0 to -1000000\n\n  /*\n   * The positive exponent (PE) at and above which toString returns exponential notation.\n   * (JavaScript numbers: 21)\n   * 1000000 is the maximum recommended exponent value of a Big, but this limit is not enforced.\n   */\n  PE = 21,            // 0 to 1000000\n\n  /*\n   * When true, an error will be thrown if a primitive number is passed to the Big constructor,\n   * or if valueOf is called, or if toNumber is called on a Big which cannot be converted to a\n   * primitive number without a loss of precision.\n   */\n  STRICT = false,     // true or false\n\n\n/**************************************************************************************************/\n\n\n  // Error messages.\n  NAME = '[big.js] ',\n  INVALID = NAME + 'Invalid ',\n  INVALID_DP = INVALID + 'decimal places',\n  INVALID_RM = INVALID + 'rounding mode',\n  DIV_BY_ZERO = NAME + 'Division by zero',\n\n  // The shared prototype object.\n  P = {},\n  UNDEFINED = void 0,\n  NUMERIC = /^-?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i;\n\n\n/*\n * Create and return a Big constructor.\n */\nfunction _Big_() {\n\n  /*\n   * The Big constructor and exported function.\n   * Create and return a new instance of a Big number object.\n   *\n   * n {number|string|Big} A numeric value.\n   */\n  function Big(n) {\n    var x = this;\n\n    // Enable constructor usage without new.\n    if (!(x instanceof Big)) return n === UNDEFINED ? _Big_() : new Big(n);\n\n    // Duplicate.\n    if (n instanceof Big) {\n      x.s = n.s;\n      x.e = n.e;\n      x.c = n.c.slice();\n    } else {\n      if (typeof n !== 'string') {\n        if (Big.strict === true && typeof n !== 'bigint') {\n          throw TypeError(INVALID + 'value');\n        }\n\n        // Minus zero?\n        n = n === 0 && 1 / n < 0 ? '-0' : String(n);\n      }\n\n      parse(x, n);\n    }\n\n    // Retain a reference to this Big constructor.\n    // Shadow Big.prototype.constructor which points to Object.\n    x.constructor = Big;\n  }\n\n  Big.prototype = P;\n  Big.DP = DP;\n  Big.RM = RM;\n  Big.NE = NE;\n  Big.PE = PE;\n  Big.strict = STRICT;\n  Big.roundDown = 0;\n  Big.roundHalfUp = 1;\n  Big.roundHalfEven = 2;\n  Big.roundUp = 3;\n\n  return Big;\n}\n\n\n/*\n * Parse the number or string value passed to a Big constructor.\n *\n * x {Big} A Big number instance.\n * n {number|string} A numeric value.\n */\nfunction parse(x, n) {\n  var e, i, nl;\n\n  if (!NUMERIC.test(n)) {\n    throw Error(INVALID + 'number');\n  }\n\n  // Determine sign.\n  x.s = n.charAt(0) == '-' ? (n = n.slice(1), -1) : 1;\n\n  // Decimal point?\n  if ((e = n.indexOf('.')) > -1) n = n.replace('.', '');\n\n  // Exponential form?\n  if ((i = n.search(/e/i)) > 0) {\n\n    // Determine exponent.\n    if (e < 0) e = i;\n    e += +n.slice(i + 1);\n    n = n.substring(0, i);\n  } else if (e < 0) {\n\n    // Integer.\n    e = n.length;\n  }\n\n  nl = n.length;\n\n  // Determine leading zeros.\n  for (i = 0; i < nl && n.charAt(i) == '0';) ++i;\n\n  if (i == nl) {\n\n    // Zero.\n    x.c = [x.e = 0];\n  } else {\n\n    // Determine trailing zeros.\n    for (; nl > 0 && n.charAt(--nl) == '0';);\n    x.e = e - i - 1;\n    x.c = [];\n\n    // Convert string to array of digits without leading/trailing zeros.\n    for (e = 0; i <= nl;) x.c[e++] = +n.charAt(i++);\n  }\n\n  return x;\n}\n\n\n/*\n * Round Big x to a maximum of sd significant digits using rounding mode rm.\n *\n * x {Big} The Big to round.\n * sd {number} Significant digits: integer, 0 to MAX_DP inclusive.\n * rm {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n * [more] {boolean} Whether the result of division was truncated.\n */\nfunction round(x, sd, rm, more) {\n  var xc = x.c;\n\n  if (rm === UNDEFINED) rm = x.constructor.RM;\n  if (rm !== 0 && rm !== 1 && rm !== 2 && rm !== 3) {\n    throw Error(INVALID_RM);\n  }\n\n  if (sd < 1) {\n    more =\n      rm === 3 && (more || !!xc[0]) || sd === 0 && (\n      rm === 1 && xc[0] >= 5 ||\n      rm === 2 && (xc[0] > 5 || xc[0] === 5 && (more || xc[1] !== UNDEFINED))\n    );\n\n    xc.length = 1;\n\n    if (more) {\n\n      // 1, 0.1, 0.01, 0.001, 0.0001 etc.\n      x.e = x.e - sd + 1;\n      xc[0] = 1;\n    } else {\n\n      // Zero.\n      xc[0] = x.e = 0;\n    }\n  } else if (sd < xc.length) {\n\n    // xc[sd] is the digit after the digit that may be rounded up.\n    more =\n      rm === 1 && xc[sd] >= 5 ||\n      rm === 2 && (xc[sd] > 5 || xc[sd] === 5 &&\n        (more || xc[sd + 1] !== UNDEFINED || xc[sd - 1] & 1)) ||\n      rm === 3 && (more || !!xc[0]);\n\n    // Remove any digits after the required precision.\n    xc.length = sd;\n\n    // Round up?\n    if (more) {\n\n      // Rounding up may mean the previous digit has to be rounded up.\n      for (; ++xc[--sd] > 9;) {\n        xc[sd] = 0;\n        if (sd === 0) {\n          ++x.e;\n          xc.unshift(1);\n          break;\n        }\n      }\n    }\n\n    // Remove trailing zeros.\n    for (sd = xc.length; !xc[--sd];) xc.pop();\n  }\n\n  return x;\n}\n\n\n/*\n * Return a string representing the value of Big x in normal or exponential notation.\n * Handles P.toExponential, P.toFixed, P.toJSON, P.toPrecision, P.toString and P.valueOf.\n */\nfunction stringify(x, doExponential, isNonzero) {\n  var e = x.e,\n    s = x.c.join(''),\n    n = s.length;\n\n  // Exponential notation?\n  if (doExponential) {\n    s = s.charAt(0) + (n > 1 ? '.' + s.slice(1) : '') + (e < 0 ? 'e' : 'e+') + e;\n\n  // Normal notation.\n  } else if (e < 0) {\n    for (; ++e;) s = '0' + s;\n    s = '0.' + s;\n  } else if (e > 0) {\n    if (++e > n) {\n      for (e -= n; e--;) s += '0';\n    } else if (e < n) {\n      s = s.slice(0, e) + '.' + s.slice(e);\n    }\n  } else if (n > 1) {\n    s = s.charAt(0) + '.' + s.slice(1);\n  }\n\n  return x.s < 0 && isNonzero ? '-' + s : s;\n}\n\n\n// Prototype/instance methods\n\n\n/*\n * Return a new Big whose value is the absolute value of this Big.\n */\nP.abs = function () {\n  var x = new this.constructor(this);\n  x.s = 1;\n  return x;\n};\n\n\n/*\n * Return 1 if the value of this Big is greater than the value of Big y,\n *       -1 if the value of this Big is less than the value of Big y, or\n *        0 if they have the same value.\n */\nP.cmp = function (y) {\n  var isneg,\n    x = this,\n    xc = x.c,\n    yc = (y = new x.constructor(y)).c,\n    i = x.s,\n    j = y.s,\n    k = x.e,\n    l = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) return !xc[0] ? !yc[0] ? 0 : -j : i;\n\n  // Signs differ?\n  if (i != j) return i;\n\n  isneg = i < 0;\n\n  // Compare exponents.\n  if (k != l) return k > l ^ isneg ? 1 : -1;\n\n  j = (k = xc.length) < (l = yc.length) ? k : l;\n\n  // Compare digit by digit.\n  for (i = -1; ++i < j;) {\n    if (xc[i] != yc[i]) return xc[i] > yc[i] ^ isneg ? 1 : -1;\n  }\n\n  // Compare lengths.\n  return k == l ? 0 : k > l ^ isneg ? 1 : -1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big divided by the value of Big y, rounded,\n * if necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.div = function (y) {\n  var x = this,\n    Big = x.constructor,\n    a = x.c,                  // dividend\n    b = (y = new Big(y)).c,   // divisor\n    k = x.s == y.s ? 1 : -1,\n    dp = Big.DP;\n\n  if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n\n  // Divisor is zero?\n  if (!b[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  // Dividend is 0? Return +-0.\n  if (!a[0]) {\n    y.s = k;\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  var bl, bt, n, cmp, ri,\n    bz = b.slice(),\n    ai = bl = b.length,\n    al = a.length,\n    r = a.slice(0, bl),   // remainder\n    rl = r.length,\n    q = y,                // quotient\n    qc = q.c = [],\n    qi = 0,\n    p = dp + (q.e = x.e - y.e) + 1;    // precision of the result\n\n  q.s = k;\n  k = p < 0 ? 0 : p;\n\n  // Create version of divisor with leading zero.\n  bz.unshift(0);\n\n  // Add zeros to make remainder as long as divisor.\n  for (; rl++ < bl;) r.push(0);\n\n  do {\n\n    // n is how many times the divisor goes into current remainder.\n    for (n = 0; n < 10; n++) {\n\n      // Compare divisor and remainder.\n      if (bl != (rl = r.length)) {\n        cmp = bl > rl ? 1 : -1;\n      } else {\n        for (ri = -1, cmp = 0; ++ri < bl;) {\n          if (b[ri] != r[ri]) {\n            cmp = b[ri] > r[ri] ? 1 : -1;\n            break;\n          }\n        }\n      }\n\n      // If divisor < remainder, subtract divisor from remainder.\n      if (cmp < 0) {\n\n        // Remainder can't be more than 1 digit longer than divisor.\n        // Equalise lengths using divisor with extra leading zero?\n        for (bt = rl == bl ? b : bz; rl;) {\n          if (r[--rl] < bt[rl]) {\n            ri = rl;\n            for (; ri && !r[--ri];) r[ri] = 9;\n            --r[ri];\n            r[rl] += 10;\n          }\n          r[rl] -= bt[rl];\n        }\n\n        for (; !r[0];) r.shift();\n      } else {\n        break;\n      }\n    }\n\n    // Add the digit n to the result array.\n    qc[qi++] = cmp ? n : ++n;\n\n    // Update the remainder.\n    if (r[0] && cmp) r[rl] = a[ai] || 0;\n    else r = [a[ai]];\n\n  } while ((ai++ < al || r[0] !== UNDEFINED) && k--);\n\n  // Leading zero? Do not remove if result is simply zero (qi == 1).\n  if (!qc[0] && qi != 1) {\n\n    // There can't be more than one zero.\n    qc.shift();\n    q.e--;\n    p--;\n  }\n\n  // Round?\n  if (qi > p) round(q, p, Big.RM, r[0] !== UNDEFINED);\n\n  return q;\n};\n\n\n/*\n * Return true if the value of this Big is equal to the value of Big y, otherwise return false.\n */\nP.eq = function (y) {\n  return this.cmp(y) === 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than the value of Big y, otherwise return\n * false.\n */\nP.gt = function (y) {\n  return this.cmp(y) > 0;\n};\n\n\n/*\n * Return true if the value of this Big is greater than or equal to the value of Big y, otherwise\n * return false.\n */\nP.gte = function (y) {\n  return this.cmp(y) > -1;\n};\n\n\n/*\n * Return true if the value of this Big is less than the value of Big y, otherwise return false.\n */\nP.lt = function (y) {\n  return this.cmp(y) < 0;\n};\n\n\n/*\n * Return true if the value of this Big is less than or equal to the value of Big y, otherwise\n * return false.\n */\nP.lte = function (y) {\n  return this.cmp(y) < 1;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big minus the value of Big y.\n */\nP.minus = P.sub = function (y) {\n  var i, j, t, xlty,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  // Signs differ?\n  if (a != b) {\n    y.s = -b;\n    return x.plus(y);\n  }\n\n  var xc = x.c.slice(),\n    xe = x.e,\n    yc = y.c,\n    ye = y.e;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (yc[0]) {\n      y.s = -b;\n    } else if (xc[0]) {\n      y = new Big(x);\n    } else {\n      y.s = 1;\n    }\n    return y;\n  }\n\n  // Determine which is the bigger number. Prepend zeros to equalise exponents.\n  if (a = xe - ye) {\n\n    if (xlty = a < 0) {\n      a = -a;\n      t = xc;\n    } else {\n      ye = xe;\n      t = yc;\n    }\n\n    t.reverse();\n    for (b = a; b--;) t.push(0);\n    t.reverse();\n  } else {\n\n    // Exponents equal. Check digit by digit.\n    j = ((xlty = xc.length < yc.length) ? xc : yc).length;\n\n    for (a = b = 0; b < j; b++) {\n      if (xc[b] != yc[b]) {\n        xlty = xc[b] < yc[b];\n        break;\n      }\n    }\n  }\n\n  // x < y? Point xc to the array of the bigger number.\n  if (xlty) {\n    t = xc;\n    xc = yc;\n    yc = t;\n    y.s = -y.s;\n  }\n\n  /*\n   * Append zeros to xc if shorter. No need to add zeros to yc if shorter as subtraction only\n   * needs to start at yc.length.\n   */\n  if ((b = (j = yc.length) - (i = xc.length)) > 0) for (; b--;) xc[i++] = 0;\n\n  // Subtract yc from xc.\n  for (b = i; j > a;) {\n    if (xc[--j] < yc[j]) {\n      for (i = j; i && !xc[--i];) xc[i] = 9;\n      --xc[i];\n      xc[j] += 10;\n    }\n\n    xc[j] -= yc[j];\n  }\n\n  // Remove trailing zeros.\n  for (; xc[--b] === 0;) xc.pop();\n\n  // Remove leading zeros and adjust exponent accordingly.\n  for (; xc[0] === 0;) {\n    xc.shift();\n    --ye;\n  }\n\n  if (!xc[0]) {\n\n    // n - n = +0\n    y.s = 1;\n\n    // Result must be zero.\n    xc = [ye = 0];\n  }\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big modulo the value of Big y.\n */\nP.mod = function (y) {\n  var ygtx,\n    x = this,\n    Big = x.constructor,\n    a = x.s,\n    b = (y = new Big(y)).s;\n\n  if (!y.c[0]) {\n    throw Error(DIV_BY_ZERO);\n  }\n\n  x.s = y.s = 1;\n  ygtx = y.cmp(x) == 1;\n  x.s = a;\n  y.s = b;\n\n  if (ygtx) return new Big(x);\n\n  a = Big.DP;\n  b = Big.RM;\n  Big.DP = Big.RM = 0;\n  x = x.div(y);\n  Big.DP = a;\n  Big.RM = b;\n\n  return this.minus(x.times(y));\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big negated.\n */\nP.neg = function () {\n  var x = new this.constructor(this);\n  x.s = -x.s;\n  return x;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big plus the value of Big y.\n */\nP.plus = P.add = function (y) {\n  var e, k, t,\n    x = this,\n    Big = x.constructor;\n\n  y = new Big(y);\n\n  // Signs differ?\n  if (x.s != y.s) {\n    y.s = -y.s;\n    return x.minus(y);\n  }\n\n  var xe = x.e,\n    xc = x.c,\n    ye = y.e,\n    yc = y.c;\n\n  // Either zero?\n  if (!xc[0] || !yc[0]) {\n    if (!yc[0]) {\n      if (xc[0]) {\n        y = new Big(x);\n      } else {\n        y.s = x.s;\n      }\n    }\n    return y;\n  }\n\n  xc = xc.slice();\n\n  // Prepend zeros to equalise exponents.\n  // Note: reverse faster than unshifts.\n  if (e = xe - ye) {\n    if (e > 0) {\n      ye = xe;\n      t = yc;\n    } else {\n      e = -e;\n      t = xc;\n    }\n\n    t.reverse();\n    for (; e--;) t.push(0);\n    t.reverse();\n  }\n\n  // Point xc to the longer array.\n  if (xc.length - yc.length < 0) {\n    t = yc;\n    yc = xc;\n    xc = t;\n  }\n\n  e = yc.length;\n\n  // Only start adding at yc.length - 1 as the further digits of xc can be left as they are.\n  for (k = 0; e; xc[e] %= 10) k = (xc[--e] = xc[e] + yc[e] + k) / 10 | 0;\n\n  // No need to check for zero, as +x + +y != 0 && -x + -y != 0\n\n  if (k) {\n    xc.unshift(k);\n    ++ye;\n  }\n\n  // Remove trailing zeros.\n  for (e = xc.length; xc[--e] === 0;) xc.pop();\n\n  y.c = xc;\n  y.e = ye;\n\n  return y;\n};\n\n\n/*\n * Return a Big whose value is the value of this Big raised to the power n.\n * If n is negative, round to a maximum of Big.DP decimal places using rounding\n * mode Big.RM.\n *\n * n {number} Integer, -MAX_POWER to MAX_POWER inclusive.\n */\nP.pow = function (n) {\n  var x = this,\n    one = new x.constructor('1'),\n    y = one,\n    isneg = n < 0;\n\n  if (n !== ~~n || n < -MAX_POWER || n > MAX_POWER) {\n    throw Error(INVALID + 'exponent');\n  }\n\n  if (isneg) n = -n;\n\n  for (;;) {\n    if (n & 1) y = y.times(x);\n    n >>= 1;\n    if (!n) break;\n    x = x.times(x);\n  }\n\n  return isneg ? one.div(y) : y;\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum precision of sd\n * significant digits using rounding mode rm, or Big.RM if rm is not specified.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.prec = function (sd, rm) {\n  if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n    throw Error(INVALID + 'precision');\n  }\n  return round(new this.constructor(this), sd, rm);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big rounded to a maximum of dp decimal places\n * using rounding mode rm, or Big.RM if rm is not specified.\n * If dp is negative, round to an integer which is a multiple of 10**-dp.\n * If dp is not specified, round to 0 decimal places.\n *\n * dp? {number} Integer, -MAX_DP to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.round = function (dp, rm) {\n  if (dp === UNDEFINED) dp = 0;\n  else if (dp !== ~~dp || dp < -MAX_DP || dp > MAX_DP) {\n    throw Error(INVALID_DP);\n  }\n  return round(new this.constructor(this), dp + this.e + 1, rm);\n};\n\n\n/*\n * Return a new Big whose value is the square root of the value of this Big, rounded, if\n * necessary, to a maximum of Big.DP decimal places using rounding mode Big.RM.\n */\nP.sqrt = function () {\n  var r, c, t,\n    x = this,\n    Big = x.constructor,\n    s = x.s,\n    e = x.e,\n    half = new Big('0.5');\n\n  // Zero?\n  if (!x.c[0]) return new Big(x);\n\n  // Negative?\n  if (s < 0) {\n    throw Error(NAME + 'No square root');\n  }\n\n  // Estimate.\n  s = Math.sqrt(x + '');\n\n  // Math.sqrt underflow/overflow?\n  // Re-estimate: pass x coefficient to Math.sqrt as integer, then adjust the result exponent.\n  if (s === 0 || s === 1 / 0) {\n    c = x.c.join('');\n    if (!(c.length + e & 1)) c += '0';\n    s = Math.sqrt(c);\n    e = ((e + 1) / 2 | 0) - (e < 0 || e & 1);\n    r = new Big((s == 1 / 0 ? '5e' : (s = s.toExponential()).slice(0, s.indexOf('e') + 1)) + e);\n  } else {\n    r = new Big(s + '');\n  }\n\n  e = r.e + (Big.DP += 4);\n\n  // Newton-Raphson iteration.\n  do {\n    t = r;\n    r = half.times(t.plus(x.div(t)));\n  } while (t.c.slice(0, e).join('') !== r.c.slice(0, e).join(''));\n\n  return round(r, (Big.DP -= 4) + r.e + 1, Big.RM);\n};\n\n\n/*\n * Return a new Big whose value is the value of this Big times the value of Big y.\n */\nP.times = P.mul = function (y) {\n  var c,\n    x = this,\n    Big = x.constructor,\n    xc = x.c,\n    yc = (y = new Big(y)).c,\n    a = xc.length,\n    b = yc.length,\n    i = x.e,\n    j = y.e;\n\n  // Determine sign of result.\n  y.s = x.s == y.s ? 1 : -1;\n\n  // Return signed 0 if either 0.\n  if (!xc[0] || !yc[0]) {\n    y.c = [y.e = 0];\n    return y;\n  }\n\n  // Initialise exponent of result as x.e + y.e.\n  y.e = i + j;\n\n  // If array xc has fewer digits than yc, swap xc and yc, and lengths.\n  if (a < b) {\n    c = xc;\n    xc = yc;\n    yc = c;\n    j = a;\n    a = b;\n    b = j;\n  }\n\n  // Initialise coefficient array of result with zeros.\n  for (c = new Array(j = a + b); j--;) c[j] = 0;\n\n  // Multiply.\n\n  // i is initially xc.length.\n  for (i = b; i--;) {\n    b = 0;\n\n    // a is yc.length.\n    for (j = a + i; j > i;) {\n\n      // Current sum of products at this digit position, plus carry.\n      b = c[j] + yc[i] * xc[j - i - 1] + b;\n      c[j--] = b % 10;\n\n      // carry\n      b = b / 10 | 0;\n    }\n\n    c[j] = b;\n  }\n\n  // Increment result exponent if there is a final carry, otherwise remove leading zero.\n  if (b) ++y.e;\n  else c.shift();\n\n  // Remove trailing zeros.\n  for (i = c.length; !c[--i];) c.pop();\n  y.c = c;\n\n  return y;\n};\n\n\n/*\n * Return a string representing the value of this Big in exponential notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toExponential = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), ++dp, rm);\n    for (; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, true, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big in normal notation rounded to dp fixed\n * decimal places using rounding mode rm, or Big.RM if rm is not specified.\n *\n * dp? {number} Decimal places: integer, 0 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n *\n * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.\n * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.\n */\nP.toFixed = function (dp, rm) {\n  var x = this,\n    n = x.c[0];\n\n  if (dp !== UNDEFINED) {\n    if (dp !== ~~dp || dp < 0 || dp > MAX_DP) {\n      throw Error(INVALID_DP);\n    }\n    x = round(new x.constructor(x), dp + x.e + 1, rm);\n\n    // x.e may have changed if the value is rounded up.\n    for (dp = dp + x.e + 1; x.c.length < dp;) x.c.push(0);\n  }\n\n  return stringify(x, false, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Omit the sign for negative zero.\n */\nP[Symbol.for('nodejs.util.inspect.custom')] = P.toJSON = P.toString = function () {\n  var x = this,\n    Big = x.constructor;\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, !!x.c[0]);\n};\n\n\n/*\n * Return the value of this Big as a primitve number.\n */\nP.toNumber = function () {\n  var n = Number(stringify(this, true, true));\n  if (this.constructor.strict === true && !this.eq(n.toString())) {\n    throw Error(NAME + 'Imprecise conversion');\n  }\n  return n;\n};\n\n\n/*\n * Return a string representing the value of this Big rounded to sd significant digits using\n * rounding mode rm, or Big.RM if rm is not specified.\n * Use exponential notation if sd is less than the number of digits necessary to represent\n * the integer part of the value in normal notation.\n *\n * sd {number} Significant digits: integer, 1 to MAX_DP inclusive.\n * rm? {number} Rounding mode: 0 (down), 1 (half-up), 2 (half-even) or 3 (up).\n */\nP.toPrecision = function (sd, rm) {\n  var x = this,\n    Big = x.constructor,\n    n = x.c[0];\n\n  if (sd !== UNDEFINED) {\n    if (sd !== ~~sd || sd < 1 || sd > MAX_DP) {\n      throw Error(INVALID + 'precision');\n    }\n    x = round(new Big(x), sd, rm);\n    for (; x.c.length < sd;) x.c.push(0);\n  }\n\n  return stringify(x, sd <= x.e || x.e <= Big.NE || x.e >= Big.PE, !!n);\n};\n\n\n/*\n * Return a string representing the value of this Big.\n * Return exponential notation if this Big has a positive exponent equal to or greater than\n * Big.PE, or a negative exponent equal to or less than Big.NE.\n * Include the sign for negative zero.\n */\nP.valueOf = function () {\n  var x = this,\n    Big = x.constructor;\n  if (Big.strict === true) {\n    throw Error(NAME + 'valueOf disallowed');\n  }\n  return stringify(x, x.e <= Big.NE || x.e >= Big.PE, true);\n};\n\n\n// Export\n\n\nexport var Big = _Big_();\n\n/// <reference types=\"https://raw.githubusercontent.com/DefinitelyTyped/DefinitelyTyped/master/types/big.js/index.d.ts\" />\nexport default Big;\n","import { DEFAULT_DECIMAL_PLACES } from '../config';\nimport { Big } from '../lib/big.js';\n\nBig.RM = 0; // RoundDown\nBig.NE = -100000; // Disable exponential form\nBig.PE = 100000; // Disable exponential form\n\nconst ten = Big(10);\n\nexport function fromDecimal(value: string | number, decimals?: number) {\n  return BigInt(Big(value).mul(ten.pow(decimals ?? DEFAULT_DECIMAL_PLACES)).round().toString());\n}\n\nexport function toDecimal(value: bigint | number, decimals?: number, noFloor = false) {\n  return toBig(value, decimals ?? DEFAULT_DECIMAL_PLACES, noFloor).toString();\n}\n\nexport function toBig(value: bigint | number, decimals = DEFAULT_DECIMAL_PLACES, noFloor = false) {\n  return Big(value.toString()).div(ten.pow(decimals)).round(decimals, noFloor ? Big.roundHalfUp : undefined);\n}\n\nexport function roundDecimal(value: string, decimals: number) {\n  return Big(value).round(decimals).toString();\n}\n\nexport function getIsPositiveDecimal(value: string) {\n  return !value.startsWith('-');\n}\n","export function random(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nexport function sample<T extends any>(arr: T[]) {\n  return arr[random(0, arr.length - 1)];\n}\n\nexport function randomBytes(size: number) {\n  // eslint-disable-next-line no-restricted-globals\n  return self.crypto.getRandomValues(new Uint8Array(size));\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    // eslint-disable-next-line no-bitwise\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n","import { DEBUG } from '../config';\n\nexport function logDebugError(message: string, ...args: any[]) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n","import type {\n  ApiUpdate,\n  CancellableCallback, OriginMessageData, OriginMessageEvent, WorkerMessageData,\n} from './PostMessageConnector';\n\nimport { DETACHED_TAB_URL } from './ledger/tab';\nimport { bigintReviver } from './bigint';\nimport { logDebugError } from './logs';\n\ndeclare const self: WorkerGlobalScope;\n\nconst callbackState = new Map<string, CancellableCallback>();\n\ntype ApiConfig =\n  ((name: string, ...args: any[]) => any | [any, ArrayBuffer[]])\n  | Record<string, Function>;\ntype SendToOrigin = (data: WorkerMessageData, transferables?: Transferable[]) => void;\n\nexport function createPostMessageInterface(\n  api: ApiConfig,\n  channel?: string,\n  target: DedicatedWorkerGlobalScope | Worker = self as DedicatedWorkerGlobalScope,\n  shouldIgnoreErrors?: boolean,\n) {\n  function sendToOrigin(data: WorkerMessageData, transferables?: Transferable[]) {\n    data.channel = channel;\n\n    if (transferables) {\n      target.postMessage(data, transferables);\n    } else {\n      target.postMessage(data);\n    }\n  }\n\n  if (!shouldIgnoreErrors) {\n    handleErrors(sendToOrigin);\n  }\n\n  target.onmessage = (message: OriginMessageEvent) => {\n    if (message.data?.channel === channel) {\n      onMessage(api, message.data, sendToOrigin);\n    }\n  };\n}\n\nexport function createExtensionInterface(\n  portName: string,\n  api: ApiConfig,\n  channel?: string,\n  cleanUpdater?: (onUpdate: (update: ApiUpdate) => void) => void,\n  withAutoInit = false,\n) {\n  chrome.runtime.onConnect.addListener((port) => {\n    if (port.name !== portName) {\n      return;\n    }\n\n    /**\n     * If the sender's URL includes the DETACHED_TAB_URL, we skip further processing\n     * This condition ensures that we don't interact with tabs that have already been closed.\n     */\n    const url = port.sender?.url;\n    if (url?.includes(DETACHED_TAB_URL)) {\n      return;\n    }\n\n    const origin = url ? new URL(url).origin : undefined;\n\n    const dAppUpdater = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n\n    function sendToOrigin(data: WorkerMessageData) {\n      data.channel = channel;\n      const json = JSON.stringify(data);\n      port.postMessage(json);\n    }\n\n    handleErrors(sendToOrigin);\n\n    port.onMessage.addListener((data: OriginMessageData | string) => {\n      if (typeof data === 'string') {\n        data = JSON.parse(data, bigintReviver) as OriginMessageData;\n      }\n      if (data.channel === channel) {\n        onMessage(api, data, sendToOrigin, dAppUpdater, origin);\n      }\n    });\n\n    port.onDisconnect.addListener(() => {\n      cleanUpdater?.(dAppUpdater);\n    });\n\n    if (withAutoInit) {\n      onMessage(api, { type: 'init', name: 'init', args: [] }, sendToOrigin, dAppUpdater);\n    }\n  });\n}\n\nasync function onMessage(\n  api: ApiConfig,\n  data: OriginMessageData,\n  sendToOrigin: SendToOrigin,\n  onUpdate?: (update: ApiUpdate) => void,\n  origin?: string,\n) {\n  if (!onUpdate) {\n    onUpdate = (update: ApiUpdate) => {\n      sendToOrigin({\n        type: 'update',\n        update,\n      });\n    };\n  }\n\n  switch (data.type) {\n    case 'init': {\n      const { args } = data;\n      const promise = typeof api === 'function'\n        ? api('init', origin, onUpdate, ...args)\n        : api.init?.(onUpdate, ...args);\n      await promise;\n\n      break;\n    }\n    case 'callMethod': {\n      const {\n        messageId, name, args, withCallback,\n      } = data;\n      try {\n        if (messageId && withCallback) {\n          const callback = (...callbackArgs: any[]) => {\n            const lastArg = callbackArgs[callbackArgs.length - 1];\n\n            sendToOrigin({\n              type: 'methodCallback',\n              messageId,\n              callbackArgs,\n            }, isTransferable(lastArg) ? [lastArg] : undefined);\n          };\n\n          callbackState.set(messageId, callback);\n\n          args.push(callback as never);\n        }\n\n        const response = typeof api === 'function'\n          ? await api(name, origin, ...args)\n          : await api[name](...args);\n        const { arrayBuffer } = (typeof response === 'object' && 'arrayBuffer' in response && response) || {};\n\n        if (messageId) {\n          sendToOrigin(\n            {\n              type: 'methodResponse',\n              messageId,\n              response,\n            },\n            arrayBuffer ? [arrayBuffer] : undefined,\n          );\n        }\n      } catch (err: any) {\n        logDebugError(name, err);\n\n        if (messageId) {\n          sendToOrigin({\n            type: 'methodResponse',\n            messageId,\n            error: { message: err.message },\n          });\n        }\n      }\n\n      if (messageId) {\n        callbackState.delete(messageId);\n      }\n\n      break;\n    }\n    case 'cancelProgress': {\n      const callback = callbackState.get(data.messageId);\n      if (callback) {\n        callback.isCanceled = true;\n      }\n\n      break;\n    }\n  }\n}\n\nfunction isTransferable(obj: any) {\n  return obj instanceof ArrayBuffer || obj instanceof ImageBitmap;\n}\n\nfunction handleErrors(sendToOrigin: SendToOrigin) {\n  self.onerror = (e) => {\n    // eslint-disable-next-line no-console\n    console.error(e);\n    sendToOrigin({ type: 'unhandledError', error: { message: e.error?.message || 'Uncaught exception in worker' } });\n  };\n\n  self.addEventListener('unhandledrejection', (e) => {\n    // eslint-disable-next-line no-console\n    console.error(e);\n    sendToOrigin({ type: 'unhandledError', error: { message: e.reason?.message || 'Uncaught rejection in worker' } });\n  });\n}\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this}`;\n};\n","import type { DNS_ZONES_MAP } from '../blockchains/ton/constants';\nimport type { ApiParsedPayload } from './payload';\nimport type { ApiSseOptions } from './storage';\n\nexport type ApiWalletVersion = 'simpleR1'\n| 'simpleR2'\n| 'simpleR3'\n| 'v2R1'\n| 'v2R2'\n| 'v3R1'\n| 'v3R2'\n| 'v4R2'\n| 'W5';\n\nexport type ApiBlockchainKey = 'ton';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\n\nexport interface AccountIdParsed {\n  id: number;\n  blockchain: ApiBlockchainKey;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  isElectron: boolean;\n  isNativeBottomSheet: boolean;\n  isIosApp: boolean;\n  isAndroidApp: boolean;\n}\n\nexport interface ApiBaseToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  minterAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  color?: string;\n}\n\nexport interface ApiToken extends ApiBaseToken {\n  quote: ApiTokenPrice;\n}\n\nexport interface ApiTokenPrice {\n  slug: string;\n  price: number;\n  priceUsd: number;\n  percentChange24h: number;\n}\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n  isMemoRequired?: boolean;\n}\n\nexport type ApiTxIdBySlug = Record<string, string | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest' | 'swap'\n| 'nftTransferred' | 'nftReceived' | undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  amount: bigint;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  fee: bigint;\n  slug: string;\n  isIncoming: boolean;\n  normalizedAddress: string;\n  inMsgHash: string;\n  shouldHide?: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n  nft?: ApiNft;\n}\n\nexport interface ApiTransactionMetadata extends ApiAddressInfo {\n}\n\nexport interface ApiNft {\n  index: number;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  description?: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n  isHidden?: boolean;\n  isOnFragment?: boolean;\n  isScam?: boolean;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\nexport type ApiTokenSimple = Omit<ApiToken, 'quote'>;\n\nexport type ApiStakingType = 'nominators' | 'liquid';\n\nexport type ApiStakingState = {\n  type: 'nominators';\n  amount: bigint;\n  pendingDepositAmount: bigint;\n  isUnstakeRequested: boolean;\n} | {\n  type: 'liquid';\n  tokenAmount: bigint;\n  amount: bigint;\n  unstakeRequestAmount: bigint;\n  apy: number;\n  instantAvailable: bigint;\n};\n\nexport interface ApiNominatorsPool {\n  address: string;\n  apy: number;\n  start: number;\n  end: number;\n}\n\nexport interface ApiBackendStakingState {\n  balance: bigint;\n  totalProfit: bigint;\n  type?: ApiStakingType;\n  nominatorsPool: ApiNominatorsPool;\n  loyaltyType?: ApiLoyaltyType;\n  shouldUseNominators?: boolean;\n  stakedAt?: number;\n}\n\nexport type ApiStakingHistory = {\n  timestamp: number;\n  profit: string;\n}[];\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  origin?: string;\n  accountId?: string;\n  sseOptions?: ApiSseOptions;\n} | {\n  origin: string;\n  accountId: string;\n};\n\nexport interface ApiDappTransfer {\n  toAddress: string;\n  amount: bigint;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n  isScam?: boolean;\n}\n\nexport interface ApiSubmitTransferOptions {\n  accountId: string;\n  password: string;\n  toAddress: string;\n  amount: bigint;\n  comment?: string;\n  tokenAddress?: string;\n  fee?: bigint;\n  shouldEncrypt?: boolean;\n  isBase64Data?: boolean;\n  withDiesel?: boolean;\n  dieselAmount?: bigint;\n}\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  params: Omit<ApiLocalTransactionParams, 'inMsgHash'>;\n}\n\nexport type ApiLocalTransactionParams = Omit<\nApiTransaction, 'txId' | 'timestamp' | 'isIncoming' | 'normalizedAddress'\n> & {\n  normalizedAddress?: string;\n};\n\nexport type ApiBaseCurrency = 'USD' | 'EUR' | 'RUB' | 'CNY' | 'BTC' | 'TON';\n\nexport enum ApiLiquidUnstakeMode {\n  Default,\n  Instant,\n  BestRate,\n}\n\nexport type ApiLoyaltyType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\n\nexport type ApiBalanceBySlug = Record<string, bigint>;\n\nexport type ApiWalletInfo = {\n  address: string;\n  version: ApiWalletVersion;\n  balance: bigint;\n  isInitialized: boolean;\n  lastTxId?: string;\n};\n\nexport type ApiDnsZone = keyof typeof DNS_ZONES_MAP;\n\n// Country codes from ISO-3166-1 spec\nexport type ApiCountryCode = 'AF' | 'AX' | 'AL' | 'DZ' | 'AS' | 'AD' | 'AO' | 'AI' | 'AQ' | 'AG' | 'AR'\n| 'AM' | 'AW' | 'AU' | 'AT' | 'AZ' | 'BS' | 'BH' | 'BD' | 'BB' | 'BY' | 'BE' | 'BZ' | 'BJ' | 'BM'\n| 'BT' | 'BO' | 'BQ' | 'BA' | 'BW' | 'BV' | 'BR' | 'IO' | 'BN' | 'BG' | 'BF' | 'BI' | 'CV' | 'KH'\n| 'CM' | 'CA' | 'KY' | 'CF' | 'TD' | 'CL' | 'CN' | 'CX' | 'CC' | 'CO' | 'KM' | 'CG' | 'CD' | 'CK'\n| 'CR' | 'CI' | 'HR' | 'CU' | 'CW' | 'CY' | 'CZ' | 'DK' | 'DJ' | 'DM' | 'DO' | 'EC' | 'EG' | 'SV'\n| 'GQ' | 'ER' | 'EE' | 'SZ' | 'ET' | 'FK' | 'FO' | 'FJ' | 'FI' | 'FR' | 'GF' | 'PF' | 'TF' | 'GA'\n| 'GM' | 'GE' | 'DE' | 'GH' | 'GI' | 'GR' | 'GL' | 'GD' | 'GP' | 'GU' | 'GT' | 'GG' | 'GN' | 'GW'\n| 'GY' | 'HT' | 'HM' | 'VA' | 'HN' | 'HK' | 'HU' | 'IS' | 'IN' | 'ID' | 'IR' | 'IQ' | 'IE' | 'IM'\n| 'IL' | 'IT' | 'JM' | 'JP' | 'JE' | 'JO' | 'KZ' | 'KE' | 'KI' | 'KP' | 'KR' | 'KW' | 'KG' | 'LA'\n| 'LV' | 'LB' | 'LS' | 'LR' | 'LY' | 'LI' | 'LT' | 'LU' | 'MO' | 'MG' | 'MW' | 'MY' | 'MV' | 'ML'\n| 'MT' | 'MH' | 'MQ' | 'MR' | 'MU' | 'YT' | 'MX' | 'FM' | 'MD' | 'MC' | 'MN' | 'ME' | 'MS' | 'MA'\n| 'MZ' | 'MM' | 'NA' | 'NR' | 'NP' | 'NL' | 'NC' | 'NZ' | 'NI' | 'NE' | 'NG' | 'NU' | 'NF' | 'MP'\n| 'NO' | 'OM' | 'PK' | 'PW' | 'PS' | 'PA' | 'PG' | 'PY' | 'PE' | 'PH' | 'PN' | 'PL' | 'PT' | 'PR'\n| 'QA' | 'MK' | 'RO' | 'RU' | 'RW' | 'RE' | 'BL' | 'SH' | 'KN' | 'LC' | 'MF' | 'PM' | 'VC' | 'WS'\n| 'SM' | 'ST' | 'SA' | 'SN' | 'RS' | 'SC' | 'SL' | 'SG' | 'SX' | 'SK' | 'SI' | 'SB' | 'SO' | 'ZA'\n| 'GS' | 'SS' | 'ES' | 'LK' | 'SD' | 'SR' | 'SJ' | 'SE' | 'CH' | 'SY' | 'TW' | 'TJ' | 'TZ' | 'TH'\n| 'TL' | 'TG' | 'TK' | 'TO' | 'TT' | 'TN' | 'TR' | 'TM' | 'TC' | 'TV' | 'UG' | 'UA' | 'AE' | 'GB'\n| 'US' | 'UM' | 'UY' | 'UZ' | 'VU' | 'VE' | 'VN' | 'VG' | 'VI' | 'WF' | 'EH' | 'YE' | 'ZM' | 'ZW';\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  NotSupportedHardwareOperation = 'NotSupportedHardwareOperation',\n  HardwareBlindSigningNotEnabled = 'HardwareBlindSigningNotEnabled',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n}\n\nexport type ApiAnyDisplayError = ApiCommonError | ApiTransactionDraftError | ApiTransactionError;\n","export * from './updates';\nexport * from './misc';\nexport * from './payload';\nexport * from './errors';\nexport * from './backend';\nexport * from './storage';\nexport * from './activity';\n","import type { AccountIdParsed, ApiBlockchainKey, ApiNetwork } from '../api/types';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const [\n    id,\n    blockchain = 'ton', // Handle deprecated case when `accountId = '0'`\n    network = 'mainnet',\n  ] = accountId.split('-');\n  return {\n    id: Number(id),\n    blockchain: blockchain as ApiBlockchainKey,\n    network: network as ApiNetwork,\n  };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network, blockchain } = account;\n  return `${id}-${blockchain}-${network}`;\n}\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","export enum StorageType {\n  IndexedDb,\n  LocalStorage,\n  ExtensionLocal,\n  CapacitorStorage,\n}\n\nexport interface Storage {\n  getItem(name: StorageKey, force?: boolean): Promise<any>;\n\n  setItem(name: StorageKey, value: any): Promise<void>;\n\n  removeItem(name: StorageKey): Promise<void>;\n\n  clear(): Promise<void>;\n\n  getAll?(): Promise<AnyLiteral>;\n\n  setMany?(items: AnyLiteral): Promise<void>;\n\n  getMany?(keys: string[]): Promise<AnyLiteral>;\n}\n\nexport type StorageKey = 'mnemonicsEncrypted'\n| 'accounts'\n| 'stateVersion'\n| 'currentAccountId'\n| 'clientId'\n| 'baseCurrency'\n// For extension\n| 'dapps'\n| 'dappMethods:lastAccountId'\n| 'windowId'\n| 'windowState'\n| 'isTonMagicEnabled'\n| 'isTonProxyEnabled'\n| 'isDeeplinkHookEnabled'\n// For TonConnect SSE\n| 'sseLastEventId';\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","import { bigintReviver } from './bigint';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  messageId?: string;\n  name: 'init';\n  args: any;\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent {\n  data: OriginMessageData;\n}\n\nexport type ApiUpdate =\n  { type: string }\n  & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: Function;\n  reject: Function;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise: Promise<any> = new Promise((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data, bigintReviver) as WorkerMessageData;\n      } catch (err: any) {\n        logDebugError('PostMessageConnector: Failed to parse message', err);\n        return;\n      }\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      throw new Error(data.error?.message);\n    }\n  }\n\n  private postMessage(data: AnyLiteral) {\n    data.channel = this.channel;\n\n    let rawData: AnyLiteral | string = data;\n    if (this.shouldUseJson) {\n      rawData = JSON.stringify(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    // eslint-disable-next-line no-restricted-globals\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","import type { Connector } from '../PostMessageConnector';\nimport type { WindowMethodArgs, WindowMethodResponse, WindowMethods } from './types';\n\nimport { WINDOW_PROVIDER_CHANNEL } from '../../config';\nimport { logDebugError } from '../logs';\n\nimport { createConnector } from '../PostMessageConnector';\n\nlet connector: Connector;\n\nexport function initWindowConnector() {\n  if (!connector) {\n    // eslint-disable-next-line no-restricted-globals\n    connector = createConnector(self as DedicatedWorkerGlobalScope, undefined, WINDOW_PROVIDER_CHANNEL);\n    connector.init();\n  }\n}\n\nexport async function callWindow<T extends keyof WindowMethods>(methodName: T, ...args: WindowMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized');\n    return undefined;\n  }\n\n  return (connector.request({\n    name: methodName,\n    args,\n  }) as WindowMethodResponse<T>);\n}\n","import type { Storage, StorageKey } from './types';\n\nimport { bigintReviver } from '../../util/bigint';\nimport { callWindow } from '../../util/capacitorStorageProxy/connector';\n\nconst storage: Storage & {\n  getKeys: () => Promise<string[] | undefined>;\n} = {\n  async getItem(key: StorageKey) {\n    const result = await callWindow('getItem', key);\n    return result ? JSON.parse(result, bigintReviver) : undefined;\n  },\n\n  async setItem(key: StorageKey, value: any) {\n    await callWindow('setItem', key, JSON.stringify(value));\n  },\n\n  async removeItem(key: StorageKey) {\n    await callWindow('removeItem', key);\n  },\n\n  async clear() {\n    await callWindow('clear');\n  },\n\n  async getKeys() {\n    const result = await callWindow('keys');\n\n    return result?.value;\n  },\n};\n\nexport default storage;\n","import type { Storage } from './types';\n\nimport { IS_EXTENSION } from '../../config';\n\n// eslint-disable-next-line no-restricted-globals\nconst storage = IS_EXTENSION ? self.chrome.storage.local : undefined;\n\nexport default ((storage && {\n  getItem: async (key) => (await storage.get(key))?.[key],\n  setItem: (key, value) => storage.set({ [key]: value }),\n  removeItem: storage.remove.bind(storage),\n  clear: storage.clear.bind(storage),\n  getAll: storage.get.bind(storage),\n  setMany: storage.set.bind(storage),\n  getMany: storage.get.bind(storage),\n}) || {}) as Storage;\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey]!.push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R extends any, M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key as keyof T] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T extends any>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T extends any>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: T[], array2: T[]): T[] {\n  const set2 = new Set(array2);\n\n  return array1.filter((element) => !set2.has(element));\n}\n","import * as idb from 'idb-keyval';\n\nimport type { Storage, StorageKey } from './types';\n\nimport { INDEXED_DB_NAME, INDEXED_DB_STORE_NAME } from '../../config';\nimport { fromKeyValueArrays } from '../../util/iteratees';\n\nconst store = idb.createStore(INDEXED_DB_NAME, INDEXED_DB_STORE_NAME);\n\nexport default {\n  getItem: (name: StorageKey) => idb.get(name, store),\n  setItem: (name: StorageKey, value: any) => idb.set(name, value, store),\n  removeItem: (name: StorageKey) => idb.del(name, store),\n  clear: () => idb.clear(store),\n  getAll: async () => {\n    const keys = await idb.keys(store) as string[];\n    const values = await idb.getMany(keys, store);\n    return fromKeyValueArrays(keys, values);\n  },\n  getMany: async (keys) => {\n    const values = await idb.getMany(keys, store);\n    return fromKeyValueArrays(keys, values);\n  },\n  setMany: (items) => {\n    return idb.setMany(Object.entries(items), store);\n  },\n} as Storage;\n","import type { Storage } from './types';\n\nimport { pick } from '../../util/iteratees';\n\nfunction withPromise(fn: AnyFunction) {\n  return (...args: any) => Promise.resolve(fn(...args));\n}\n\nexport default (typeof localStorage === 'object' ? {\n  getItem: withPromise(localStorage.getItem),\n  setItem: localStorage.setItem,\n  removeItem: localStorage.removeItem,\n  clear: localStorage.clear,\n  getAll: withPromise(() => ({ ...localStorage })),\n  getMany: withPromise((keys: string[]) => pick(localStorage, keys)),\n  setMany: (items: AnyLiteral) => {\n    Object.assign(localStorage, items);\n  },\n} : {}) as Storage;\n","import { StorageType } from './types';\n\nimport { IS_CAPACITOR, IS_EXTENSION } from '../../config';\nimport capacitorStorage from './capacitorStorage';\nimport extensionStorage from './extension';\nimport idb from './idb';\nimport localStorage from './localStorage';\n\nexport const storage = IS_EXTENSION ? extensionStorage : IS_CAPACITOR ? capacitorStorage : idb;\n\nexport default {\n  [StorageType.IndexedDb]: idb,\n  [StorageType.LocalStorage]: localStorage,\n  [StorageType.ExtensionLocal]: extensionStorage,\n  [StorageType.CapacitorStorage]: capacitorStorage,\n};\n","import type { StorageKey } from '../storages/types';\nimport type { ApiAccount, ApiNetwork } from '../types';\n\nimport { buildAccountId, parseAccountId } from '../../util/account';\nimport { storage } from '../storages';\n\nconst MIN_ACCOUNT_NUMBER = 0;\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let loginResolve: AnyFunction;\nconst loginPromise = new Promise<void>((resolve) => {\n  loginResolve = resolve;\n});\n\nexport async function getAccountIds(): Promise<string[]> {\n  return Object.keys(await storage.getItem('accounts') || {});\n}\n\nexport async function getAccountIdWithMnemonic() {\n  const byId = await fetchStoredAccounts();\n\n  return Object.entries(byId).find(([,account]) => !account.ledger)?.[0];\n}\n\nexport async function getNewAccountId(network: ApiNetwork) {\n  const ids = (await getAccountIds()).map((accountId) => parseAccountId(accountId).id);\n  const id = ids.length === 0 ? MIN_ACCOUNT_NUMBER : Math.max(...ids) + 1;\n  return buildAccountId({\n    id,\n    network,\n    blockchain: 'ton',\n  });\n}\n\nexport async function fetchStoredPublicKey(accountId: string): Promise<string> {\n  return (await fetchStoredAccount(accountId)).publicKey;\n}\n\nexport async function fetchStoredAddress(accountId: string): Promise<string> {\n  return (await fetchStoredAccount(accountId)).address;\n}\n\nexport function fetchStoredAccount(accountId: string): Promise<ApiAccount> {\n  return getAccountValue(accountId, 'accounts');\n}\n\nexport function fetchStoredAccounts(): Promise<Record<string, ApiAccount>> {\n  return storage.getItem('accounts');\n}\n\nexport async function updateStoredAccount(accountId: string, partial: Partial<ApiAccount>): Promise<void> {\n  const account = await fetchStoredAccount(accountId);\n  return setAccountValue(accountId, 'accounts', {\n    ...account,\n    ...partial,\n  });\n}\n\nexport async function getAccountValue(accountId: string, key: StorageKey) {\n  return (await storage.getItem(key))?.[accountId];\n}\n\nexport async function removeAccountValue(accountId: string, key: StorageKey) {\n  const data = await storage.getItem(key);\n  if (!data) return;\n\n  const { [accountId]: removedValue, ...restData } = data;\n  await storage.setItem(key, restData);\n}\n\nexport async function setAccountValue(accountId: string, key: StorageKey, value: any) {\n  const data = await storage.getItem(key);\n  await storage.setItem(key, { ...data, [accountId]: value });\n}\n\nexport async function removeNetworkAccountsValue(network: string, key: StorageKey) {\n  const data = await storage.getItem(key);\n  if (!data) return;\n\n  for (const accountId of Object.keys(data)) {\n    if (parseAccountId(accountId).network === network) {\n      delete data[accountId];\n    }\n  }\n\n  await storage.setItem(key, data);\n}\n\nexport async function getCurrentNetwork() {\n  const accountId = await getCurrentAccountId();\n  if (!accountId) return undefined;\n  return parseAccountId(accountId).network;\n}\n\nexport async function getCurrentAccountIdOrFail() {\n  const accountId = await getCurrentAccountId();\n  if (!accountId) {\n    throw new Error('The user is not authorized in the wallet');\n  }\n  return accountId;\n}\n\nexport function getCurrentAccountId(): Promise<string | undefined> {\n  return storage.getItem('currentAccountId');\n}\n\nexport function waitLogin() {\n  return loginPromise;\n}\n","import { STAKING_POOLS } from '../../config';\n\nexport function sha256(bytes: Uint8Array) {\n  return crypto.subtle.digest('SHA-256', bytes);\n}\n\nexport function bytesToHex(bytes: Uint8Array) {\n  return Buffer.from(bytes).toString('hex');\n}\n\nexport function hexToBytes(hex: string) {\n  return Uint8Array.from(Buffer.from(hex, 'hex'));\n}\n\nexport function bytesToBase64(bytes: Uint8Array) {\n  return Buffer.from(bytes).toString('base64');\n}\n\nexport function base64ToBytes(base64: string) {\n  return Uint8Array.from(Buffer.from(base64, 'base64'));\n}\n\nexport function base64ToString(base64: string) {\n  return Buffer.from(base64, 'base64').toString('utf-8');\n}\n\nexport function isKnownStakingPool(address: string) {\n  return STAKING_POOLS.some((poolPart) => address.endsWith(poolPart));\n}\n","import * as tonWebMnemonic from 'tonweb-mnemonic';\nimport nacl from 'tweetnacl';\n\nimport { ApiCommonError } from '../../types';\n\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { logDebugError } from '../../../util/logs';\nimport { getAccountValue, setAccountValue } from '../../common/accounts';\nimport { bytesToHex, hexToBytes } from '../../common/utils';\n\nconst PBKDF2_IMPORT_KEY_ARGS = [\n  { name: 'PBKDF2' },\n  false,\n  ['deriveBits', 'deriveKey'],\n] as const;\n\nconst PBKDF2_DERIVE_KEY_ARGS = {\n  name: 'PBKDF2',\n  iterations: 100000, // Higher is more secure but slower\n  hash: 'SHA-256',\n};\n\nconst PBKDF2_DERIVE_KEY_TYPE = { name: 'AES-GCM', length: 256 };\n\nexport function generateMnemonic() {\n  return tonWebMnemonic.generateMnemonic();\n}\n\nexport function validateMnemonic(mnemonic: string[]) {\n  return tonWebMnemonic.validateMnemonic(mnemonic);\n}\n\nexport function privateKeyHexToKeyPair(privateKeyHex: string) {\n  return nacl.sign.keyPair.fromSeed(hexToBytes(privateKeyHex));\n}\n\nexport function mnemonicToKeyPair(mnemonic: string[]) {\n  return tonWebMnemonic.mnemonicToKeyPair(mnemonic);\n}\n\nexport async function encryptMnemonic(mnemonic: string[], password: string) {\n  const plaintext = mnemonic.join(',');\n  const salt = crypto.getRandomValues(new Uint8Array(16)); // generate a 128-bit salt\n  const keyMaterial = await crypto.subtle.importKey(\n    'raw',\n    new TextEncoder().encode(password),\n    ...PBKDF2_IMPORT_KEY_ARGS,\n  );\n  const key = await crypto.subtle.deriveKey(\n    {\n      salt,\n      ...PBKDF2_DERIVE_KEY_ARGS,\n    },\n    keyMaterial,\n    PBKDF2_DERIVE_KEY_TYPE,\n    false,\n    ['encrypt'],\n  );\n  const iv = crypto.getRandomValues(new Uint8Array(12)); // get 96-bit random iv\n  const ptUint8 = new TextEncoder().encode(plaintext); // encode plaintext as UTF-8\n  const ctBuffer = await crypto.subtle.encrypt({ name: 'AES-GCM', iv }, key, ptUint8); // encrypt plaintext using key\n  const ctArray = Array.from(new Uint8Array(ctBuffer)); // ciphertext as byte array\n  const ctBase64 = btoa(String.fromCharCode(...ctArray)); // encode ciphertext as base64\n  const ivHex = Array.from(iv).map((b) => (`00${b.toString(16)}`).slice(-2)).join(''); // iv as hex string\n  const saltHex = Array.from(salt).map((b) => (`00${b.toString(16)}`).slice(-2)).join(''); // salt as hex string\n\n  return `${saltHex}:${ivHex}:${ctBase64}`;\n}\n\nexport async function decryptMnemonic(encrypted: string, password: string) {\n  if (!encrypted.includes(':')) {\n    return decryptMnemonicLegacy(encrypted, password);\n  }\n\n  const [saltHex, ivHex, encryptedData] = encrypted.split(':');\n  const salt = new Uint8Array(saltHex.match(/.{2}/g)!.map((b) => parseInt(b, 16)));\n  const iv = new Uint8Array(ivHex.match(/.{2}/g)!.map((b) => parseInt(b, 16)));\n  const keyMaterial = await crypto.subtle.importKey(\n    'raw',\n    new TextEncoder().encode(password),\n    ...PBKDF2_IMPORT_KEY_ARGS,\n  );\n  const key = await crypto.subtle.deriveKey(\n    { salt, ...PBKDF2_DERIVE_KEY_ARGS },\n    keyMaterial,\n    PBKDF2_DERIVE_KEY_TYPE,\n    false,\n    ['decrypt'],\n  );\n  const ctStr = atob(encryptedData); // decode base64 ciphertext\n  const ctUint8 = new Uint8Array(ctStr.match(/[\\s\\S]/g)!.map((ch) => ch.charCodeAt(0))); // ciphertext as Uint8Array\n  const plainBuffer = await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ctUint8); // decrypt ciphertext using key\n  const plaintext = new TextDecoder().decode(plainBuffer); // decode password from UTF-8\n\n  return plaintext.split(',');\n}\n\nasync function decryptMnemonicLegacy(encrypted: string, password: string) {\n  const pwUtf8 = new TextEncoder().encode(password); // encode password as UTF-8\n  const pwHash = await crypto.subtle.digest('SHA-256', pwUtf8); // hash the password\n  const iv = encrypted.slice(0, 24).match(/.{2}/g)!.map((byte) => parseInt(byte, 16)); // get iv from ciphertext\n  const alg = { name: 'AES-GCM', iv: new Uint8Array(iv) }; // specify algorithm to use\n  const key = await crypto.subtle.importKey('raw', pwHash, alg, false, ['decrypt']); // use pw to generate key\n  const ctStr = atob(encrypted.slice(24)); // decode base64 ciphertext\n  const ctUint8 = new Uint8Array(ctStr.match(/[\\s\\S]/g)!.map((ch) => ch.charCodeAt(0))); // ciphertext as Uint8Array\n  const plainBuffer = await crypto.subtle.decrypt(alg, key, ctUint8); // decrypt ciphertext using key\n  const plaintext = new TextDecoder().decode(plainBuffer); // decode password from UTF-8\n\n  return plaintext.split(',');\n}\n\nexport async function fetchMnemonic(accountId: string, password: string) {\n  try {\n    const mnemonicEncrypted = await getAccountValue(accountId, 'mnemonicsEncrypted') as string;\n    const mnemonic = await decryptMnemonic(mnemonicEncrypted, password);\n\n    if (!mnemonicEncrypted.includes(':')) {\n      await tryMigratingMnemonicEncryption(accountId, mnemonic, password);\n    }\n\n    return mnemonic;\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n\n    return undefined;\n  }\n}\n\nasync function tryMigratingMnemonicEncryption(accountId: string, mnemonic: string[], password: string) {\n  try {\n    const mnemonicEncrypted = await encryptMnemonic(mnemonic, password);\n\n    // This is a defensive approach against potential corrupted encryption reported by some users\n    const decryptedMnemonic = await decryptMnemonic(mnemonicEncrypted, password)\n      .catch(() => undefined);\n\n    if (!password || !decryptedMnemonic) {\n      return { error: ApiCommonError.DebugError };\n    }\n\n    await Promise.all([\n      setAccountValue(accountId, 'mnemonicsEncrypted', mnemonicEncrypted),\n    ]);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n\n  return undefined;\n}\n\nexport async function fetchPrivateKey(accountId: string, password: string) {\n  try {\n    const { secretKey: privateKey } = await fetchKeyPair(accountId, password) || {};\n\n    return privateKey;\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n\n    return undefined;\n  }\n}\n\nexport async function fetchKeyPair(accountId: string, password: string) {\n  try {\n    const mnemonic = await fetchMnemonic(accountId, password);\n    if (!mnemonic) {\n      return undefined;\n    }\n\n    return isMnemonicPrivateKey(mnemonic) ? privateKeyHexToKeyPair(mnemonic[0]) : await mnemonicToKeyPair(mnemonic);\n  } catch (err) {\n    logDebugError('fetchKeyPair', err);\n\n    return undefined;\n  }\n}\n\nexport async function rawSign(accountId: string, password: string, dataHex: string) {\n  const privateKey = await fetchPrivateKey(accountId, password);\n  if (!privateKey) {\n    return undefined;\n  }\n\n  const signature = nacl.sign.detached(hexToBytes(dataHex), privateKey);\n\n  return bytesToHex(signature);\n}\n\nexport async function verifyPassword(accountId: string, password: string) {\n  return Boolean(await fetchMnemonic(accountId, password));\n}\n","import { bigintRandom, bigintReviver } from '../../../../util/bigint';\n\nexport function cloneDeep<T>(value: T): T {\n  return JSON.parse(JSON.stringify(value), bigintReviver);\n}\n\nexport function stringifyTxId({ lt, hash }: { lt: number | string; hash: string }) {\n  return `${lt}:${hash}`;\n}\n\nexport function parseTxId(txId: string): { lt: number; hash: string } {\n  const [lt, hash] = txId.split(':');\n  return { lt: Number(lt), hash };\n}\n\nexport function buildTokenSlug(minterAddress: string) {\n  const addressPart = minterAddress.replace(/[^a-z\\d]/gi, '').slice(0, 10);\n  return `ton-${addressPart}`.toLowerCase();\n}\n\nexport function generateQueryId() {\n  return bigintRandom(8);\n}\n","import { BRILLIANT_API_BASE_URL, IS_CAPACITOR } from '../config';\n\nconst IPFS_GATEWAY_BASE_URL: string = 'https://ipfs.io/ipfs/';\n\nexport function fetchJsonMetadata(url: string) {\n  url = fixIpfsUrl(url);\n\n  const reserveUrl = `${BRILLIANT_API_BASE_URL}/utils/download-json?url=${url}`;\n\n  if (IS_CAPACITOR) {\n    return fetchJson(reserveUrl);\n  }\n\n  return fetchJson(url).catch(() => {\n    return fetchJson(reserveUrl);\n  });\n}\n\nexport function fixIpfsUrl(url: string) {\n  return url.replace('ipfs://', IPFS_GATEWAY_BASE_URL);\n}\n\nasync function fetchJson(url: string) {\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw Error(`Http error ${response.status}`);\n  }\n  return response.json();\n}\n","/* eslint-disable max-len, no-misleading-character-class, no-control-regex, operator-linebreak */\n/** @copyright Mathias Bynens <https://mathiasbynens.be/>. MIT license. */\nconst RE_SYMBOL_WITH_COMBINING_MARKS =\n  /([\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])([\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F]+)/g;\n/** @copyright Mathias Bynens <https://mathiasbynens.be/>. MIT license. */\nconst RE_LINEBREAK_COMBINING_MARKS =\n  /[\\0-\\x08\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\u0300-\\u034E\\u0350-\\u035B\\u0363-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u061C\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D4-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFB-\\u1DFF\\u200C\\u200E\\u200F\\u202A-\\u202E\\u2066-\\u206F\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3035\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFFF9-\\uFFFB]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDDCA-\\uDDCC\\uDE2C-\\uDE37\\uDE3E\\uDEDF-\\uDEEA\\uDF00-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC35-\\uDC46\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDDDC\\uDDDD\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD807[\\uDC2F-\\uDC36\\uDC38-\\uDC3F\\uDC92-\\uDCA7\\uDCA9-\\uDCB6]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E\\uDCA0-\\uDCA3]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uDB40[\\uDC01\\uDC20-\\uDC7F\\uDD00-\\uDDEF]/g;\nconst RE_SPACE_CHARS = /[\\n\\r]/g;\nconst RE_FAKE_DOTS = /[\\u0702\\u0701\\u2024\\u00B7\\u02D9\\u0971\\u1427\\u18DF\\u22C5\\u2027]/g;\nconst RE_EMPTY_CHARS = /[\\u200B-\\u200D\\uFEFF\\u2063]/g;\n/* eslint-enable max-len, no-misleading-character-class, no-control-regex, operator-linebreak */\n\n/** Skippable characters that are not confusables */\nexport const checkLNPRegex = /^(?:[~`!@#%^&*(){}[\\];:\"'<,.>?/\\\\|_+=-]|[a-zA-Z0-9\\s])+$/;\n\nexport function checkLNP(str: string) {\n  return checkLNPRegex.test(str);\n}\n\n/**\n * Utility function to call 2 other functions which remove Combining Marks/Invisible characters\n * @param str The text to clean.\n */\nexport function clean(str: string) {\n  return str\n    .replace(RE_LINEBREAK_COMBINING_MARKS, '')\n    .replace(RE_SYMBOL_WITH_COMBINING_MARKS, '$1')\n    .replace(RE_SPACE_CHARS, ' ')\n    .replace(RE_FAKE_DOTS, '.')\n    .replace(RE_EMPTY_CHARS, '');\n}\n","export const characters = new Map<string, string>([\n  [' ', ' '],\n  ['0', '⓿'],\n  ['1', '11⓵➊⑴¹𝟏𝟙１𝟷𝟣⒈𝟭1➀₁①❶⥠'],\n  ['2', '⓶⒉⑵➋ƻ²ᒿ𝟚２𝟮𝟤ᒾ𝟸Ƨ𝟐②ᴤ₂➁❷ᘝƨ'],\n  ['3', '³ȝჳⳌꞫ𝟑ℨ𝟛𝟯𝟥Ꝫ➌ЗȜ⓷ӠƷ３𝟹⑶⒊ʒʓǯǮƺ𝕴ᶾзᦡ➂③₃ᶚᴣᴟ❸ҘҙӬӡӭӟӞ'],\n  ['4', '𝟰𝟺𝟦𝟒➍ҶᏎ𝟜ҷ⓸ҸҹӴӵᶣ４чㄩ⁴➃₄④❹Ӌ⑷⒋'],\n  ['5', '𝟱⓹➎Ƽ𝟓𝟻𝟝𝟧５➄₅⑤⁵❺ƽ⑸⒌'],\n  ['6', 'Ⳓ🄇𝟼Ꮾ𝟲𝟞𝟨𝟔➏⓺Ϭϭ⁶б６ᧈ⑥➅₆❻⑹⒍'],\n  ['7', '𝟕𝟟𝟩𝟳𝟽🄈⓻𐓒➐７⁷⑦₇❼➆⑺⒎'],\n  ['8', '𐌚🄉➑⓼８𝟠𝟪৪⁸₈𝟴➇⑧❽𝟾𝟖⑻⒏'],\n  ['9', '൭Ꝯ𝝑𝞋𝟅🄊𝟡𝟵Ⳋ⓽➒੧৭୨９𝟫𝟿𝟗⁹₉Գ➈⑨❾⑼⒐'],\n  ['10', '⓾❿➉➓🔟⑩⑽⒑'],\n  ['11', '⑪⑾⒒⓫'],\n  ['12', '⑫⑿⒓⓬'],\n  ['13', '⑬⒀⒔⓭'],\n  ['14', '⑭⒁⒕⓮'],\n  ['15', '⑮⒂⒖⓯'],\n  ['16', '⑯⒃⒗⓰'],\n  ['17', '⑰⒄⒘⓱'],\n  ['18', '⑱⒅⒙⓲'],\n  ['19', '⑲⒆⒚⓳'],\n  ['20', '⑳⒇⒛⓴'],\n  ['ae', 'æ'],\n  ['OE', 'Œ'],\n  ['oe', 'œ'],\n  ['pi', 'ᒆ'],\n  ['Nj', 'ǋ'],\n  ['AE', 'ᴁ'],\n  ['A', '𝑨𝔄ᗄ𝖠𝗔ꓯ𝞐🄐🄰Ꭿ𐊠𝕬𝜜𝐴ꓮᎪ𝚨ꭺ𝝖🅐Å∀🇦₳🅰𝒜𝘈𝐀𝔸дǺᗅⒶＡΑᾋᗩĂÃÅǍȀȂĀȺĄʌΛλƛᴀᴬДАልÄₐᕱªǞӒΆẠẢẦẨẬẮẰẲẴẶᾸᾹᾺΆᾼᾈᾉᾊᾌᾍᾎᾏἈἉἊἋἌἍἎἏḀȦǠӐÀÁÂẤẪ𝛢𝓐𝙰𝘼ᗩ'],\n  ['a', '∂⍺ⓐձǟᵃᶏ⒜аɒａαȃȁคǎმäɑāɐąᾄẚạảǡầẵḁȧӑӓãåάὰάăẩằẳặᾀᾁᾂᾃᾅᾆᾰᾱᾲᾳᾴᶐᾶᾷἀἁἂἃἄἅἆἇᾇậắàáâấẫǻⱥ𝐚𝑎𝒂𝒶𝓪𝔞𝕒𝖆𝖺𝗮𝘢𝙖𝚊𝛂𝛼𝜶𝝰𝞪⍶'],\n  ['B', '🄑𝔙𝖁ꞵ𝛃𝛽𝜷𝝱𝞫Ᏸ𐌁𝑩𝕭🄱𐊡𝖡𝘽ꓐ𝗕𝘉𝜝𐊂𝚩𝐁𝛣𝝗𝐵𝙱𝔹Ᏼᏼ𝞑Ꞵ𝔅🅑฿𝓑ᗿᗾᗽ🅱ⒷＢвϐᗷƁ乃ßცჩ๖βɮБՅ๒ᙖʙᴮᵇጌḄℬΒВẞḂḆɃദᗹᗸᵝᙞᙟᙝᛒᙗᙘᴃ🇧'],\n  ['b', 'ꮟᏏ𝐛𝘣𝒷𝔟𝓫𝖇𝖻𝑏𝙗𝕓𝒃𝗯𝚋♭ᑳᒈｂᖚᕹᕺⓑḃḅҍъḇƃɓƅᖯƄЬᑲþƂ⒝ЪᶀᑿᒀᒂᒁᑾьƀҌѢѣᔎ'],\n  ['C', 'ꞆႠ℃🄒ᏟⲤ🄲ꓚ𐊢𐌂🅲𐐕🅒☾ČÇⒸＣↃƇᑕㄈ¢८↻ĈϾՇȻᙅᶜ⒞ĆҀĊ©टƆℂℭϹС匚ḈҪʗᑖᑡᑢᑣᑤᑥⅭ𝐂𝐶𝑪𝒞𝓒𝕮𝖢𝗖𝘊𝘾ᔍ'],\n  ['c', '🝌ｃⅽ𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌ᴄϲⲥсꮯ𐐽ⲥ𐐽ꮯĉｃⓒćčċçҁƈḉȼↄсርᴄϲҫ꒝ςɽϛ𝙲ᑦ᧚𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌₵🇨ᥴᒼⅽ'],\n  ['D', '🄓Ꭰ🄳𝔡𝖉𝔻𝗗𝘋𝙳𝐷𝓓𝐃𝑫𝕯𝖣𝔇𝘿ꭰⅅ𝒟ꓓ🅳🅓ⒹＤƉᗪƊÐԺᴅᴰↁḊĐÞⅮᗞᑯĎḌḐḒḎᗫᗬᗟᗠᶛᴆ🇩'],\n  ['d', 'Ꮷ𝔡𝖉ᑯꓒ𝓭ᵭ₫ԃⓓｄḋďḍḑḓḏđƌɖɗᵈ⒟ԁⅾᶁԀᑺᑻᑼᑽᒄᑰᑱᶑ𝕕𝖽𝑑𝘥𝒅𝙙𝐝𝗱𝚍ⅆ𝒹ʠժ'],\n  ['E', '£ᙓ⋿∃ⴺꓱ𝐄𝐸𝔈𝕰𝖤𝘌𝙴𝛦𝜠ꭼ🄔🄴𝙀𝔼𐊆𝚬ꓰ𝝚𝞔𝓔𝑬𝗘🅴🅔ⒺΈＥƎἝᕮƐモЄᴇᴱᵉÉ乇ЁɆꂅ€ÈℰΕЕⴹᎬĒĔĖĘĚÊËԐỀẾỄỂẼḔḖẺȄȆẸỆȨḜḘḚἘἙἚἛἜῈΈӖὲέЀϵ🇪'],\n  ['e', 'əәⅇꬲꞓ⋴𝛆𝛜𝜀𝜖𝜺𝝐𝝴𝞊𝞮𝟄ⲉꮛ𐐩ꞒⲈ⍷𝑒𝓮𝕖𝖊𝘦𝗲𝚎𝙚𝒆𝔢𝖾𝐞Ҿҿⓔｅ⒠èᧉéᶒêɘἔềếễ૯ǝєεēҽɛểẽḕḗĕėëẻěȅȇẹệȩɇₑęḝḙḛ℮еԑѐӗᥱёἐἑἒἓἕℯ'],\n  ['F', 'ᖵꘘꓞꟻᖷ𝐅𝐹𝑭𝔽𝕱𝖥𝗙𝙁𝙵𝟊℉🄕🄵𐊇𝔉𝘍𐊥ꓝꞘ🅵🅕𝓕ⒻＦғҒᖴƑԲϝቻḞℱϜ₣🇫Ⅎ'],\n  ['f', '𝐟ᵮ𝑓𝒇𝒻𝓯𝔣𝕗𝖿𝗳𝙛𝚏ꬵꞙẝ𝖋ⓕｆƒḟʃբᶠ⒡ſꊰʄ∱ᶂ𝘧'],\n  ['G', '𝗚𝘎🄖ꓖᏳ🄶Ꮐᏻ𝔾𝓖𝑮𝕲ꮐ𝒢𝙂𝖦𝙶𝔊𝐺𝐆🅶🅖ⒼＧɢƓʛĢᘜᴳǴĠԌĜḠĞǦǤԍ₲🇬⅁'],\n  ['g', 'ᶃᶢⓖｇǵĝḡğġǧģց૭ǥɠﻭﻮᵍ⒢ℊɡᧁ𝐠𝑔𝒈𝓰𝔤𝕘𝖌𝗀𝗴𝘨𝙜𝚐'],\n  ['H', 'Ἤ🄗𝆦🄷𝜢ꓧ𝘏𝐻𝝜𝖧𐋏𝗛ꮋℍᎻℌⲎ𝑯𝞖🅷🅗ዞǶԋⒽＨĤᚺḢḦȞḤḨḪĦⱧҢңҤῊΉῌἨἩἪἫἭἮἯᾘᾙᾚᾛᾜᾝᾞᾟӉӈҥΉн卄♓𝓗ℋН𝐇𝙃𝙷ʜ𝛨Η𝚮ᕼӇᴴᵸ🇭'],\n  ['h', 'ꞕ৸𝕳ꚕᏲℏӊԊꜧᏂҺ⒣ђⓗｈĥḣḧȟḥḩḫẖħⱨհһከኩኪካɦℎ𝐡𝒉𝒽𝓱𝔥𝕙𝖍𝗁𝗵𝘩𝙝𝚑իʰᑋᗁɧんɥ'],\n  ['I', 'ⲒἿ🄘🄸ЇꀤᏆ🅸🅘إﺇٳأﺃٲٵⒾＩ៸ÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗェエῘῙῚΊἸἹἺἻἼἽἾⅠΪΊɪᶦᑊᥣ𝛪𝐈𝙄𝙸𝓵𝙡𝐼ᴵ𝚰𝑰🇮'],\n  ['i', '⍳ℹⅈ𝑖𝒊𝒾ı𝚤ɩιιͺ𝛊𝜄𝜾𝞲ꙇӏꭵᎥⓘｉìíîĩīĭïḯỉǐȉȋịḭῐῑῒΐῖῗἰἱἲⅰⅼ∣ⵏ￨׀ا١۱ߊᛁἳἴἵɨіὶίᶖ𝔦𝚒𝝸𝗂𝐢𝕚𝖎𝗶𝘪𝙞ίⁱᵢ𝓲⒤'],\n  ['J', '𝐉𝐽𝑱𝒥𝓙𝔍𝕁𝕵𝖩𝗝𝘑𝙅𝙹ꞲͿꓙ🄙🄹🅹🅙ⒿＪЈʝᒍנﾌĴʆวلյʖᴊᴶﻝጋɈⱼՂๅႱįᎫȷ丿ℐℑᒘᒙᒚᒛᒴᒵᒎᒏ🇯'],\n  ['j', '𝚥ꭻⅉⓙｊϳʲ⒥ɉĵǰјڶᶨ𝒿𝘫𝗷𝑗𝙟𝔧𝒋𝗃𝓳𝕛𝚓𝖏𝐣'],\n  ['K', '𝐊ꝄꝀ𝐾𝑲𝓚𝕶𝖪𝙺𝚱𝝟🄚𝗞🄺𝜥𝘒ꓗ𝙆𝕂Ⲕ𝔎𝛫Ꮶ𝞙𝒦🅺🅚₭ⓀＫĸḰќƘкҠκқҟӄʞҚКҡᴋᴷᵏ⒦ᛕЌጕḲΚKҜҝҞĶḴǨⱩϗӃ🇰'],\n  ['k', 'ⓚꝁｋḱǩḳķḵƙⱪᶄ𝐤𝘬𝗄𝕜𝜅𝜘𝜿𝝒𝝹𝞌𝞳𝙠𝚔𝑘𝒌ϰ𝛋𝛞𝟆𝗸𝓴𝓀'],\n  ['L', '𝐋𝐿𝔏𝕃𝕷𝖫𝗟𝘓𝙇ﴼ🄛🄻𐐛Ⳑ𝑳𝙻𐑃𝓛ⳑꮮᏞꓡ🅻🅛ﺈ└ⓁւＬĿᒪ乚ՆʟꓶιԼᴸˡĹረḶₗΓլĻᄂⅬℒⱢᥧᥨᒻᒶᒷᶫﺎᒺᒹᒸᒫ⎳ㄥŁⱠﺄȽ🇱'],\n  ['l', 'ⓛｌŀĺľḷḹļӀℓḽḻłﾚɭƚɫⱡ|Ɩ⒧ʅǀוןΙІ｜ᶩӏ𝓘𝕀𝖨𝗜𝘐𝐥𝑙𝒍𝓁𝔩𝕝𝖑𝗅𝗹𝘭𝚕𝜤𝝞ı𝚤ɩι𝛊𝜄𝜾𝞲'],\n  ['M', 'ꮇ🄜🄼𐌑𐊰ꓟⲘᎷ🅼🅜ⓂＭмṂ൱ᗰ州ᘻო๓♏ʍᙏᴍᴹᵐ⒨ḾМṀ௱ⅯℳΜϺᛖӍӎ𝐌𝑀𝑴𝓜𝔐𝕄𝕸𝖬𝗠𝘔𝙈𝙼𝚳𝛭𝜧𝝡𝞛🇲'],\n  ['m', '₥ᵯ𝖒𝐦𝗆𝔪𝕞𝓂ⓜｍനᙢ൩ḿṁⅿϻṃጠɱ៳ᶆ𝙢𝓶𝚖𝑚𝗺᧕᧗'],\n  ['N', '𝇙𝇚𝇜🄝𝆧𝙉🄽ℕꓠ𝛮𝝢𝙽𝚴𝑵𝑁Ⲛ𝐍𝒩𝞜𝗡𝘕𝜨𝓝𝖭🅽₦🅝ЙЍⓃҋ៷ＮᴎɴƝᑎ几иՈռИהЛπᴺᶰŃ刀ክṄⁿÑПΝᴨոϖǸŇṆŅṊṈทŊӢӣӤӥћѝйᥢҊᴻ🇳'],\n  ['n', 'ոռח𝒏𝓷𝙣𝑛𝖓𝔫𝗇𝚗𝗻ᥒⓝήｎǹᴒńñᾗηṅňṇɲņṋṉղຖՌƞŋ⒩ภกɳпŉлԉȠἠἡῃդᾐᾑᾒᾓᾔᾕᾖῄῆῇῂἢἣἤἥἦἧὴήበቡቢባቤብቦȵ𝛈𝜂𝜼𝝶𝞰𝕟𝘯𝐧𝓃ᶇᵰᥥ∩'],\n  [\n    'O',\n    // eslint-disable-next-line max-len\n    '𝜽⭘🔿ꭴ⭕⏺🄁🄀Ꭴ𝚯𝚹𝛩𝛳𝜣𝜭𝝝𝝧𝞗𝞡ⴱᎾᏫ⍬𝞱𝝷𝛉𝟎𝜃θ𝟘𝑂𝑶𝓞𝔒𝕆𝕺𝗢𝘖𝙊𝛰㈇ꄲ🄞🔾🄾𐊒𝟬ꓳⲞ𐐄𐊫𐓂𝞞🅞⍥◯ⵁ⊖０⊝𝝤Ѳϴ𝚶𝜪ѺӦӨӪΌʘ𝐎ǑÒŎÓÔÕȌȎㇿ❍ⓄＯὋロ❤૦⊕ØФԾΘƠᴼᵒ⒪ŐÖₒ¤◊Φ〇ΟОՕଠഠ௦סỒỐỖỔṌȬṎŌṐṒȮȰȪỎỜỚỠỞỢỌỘǪǬǾƟⵔ߀៰⍜⎔⎕⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧀⧁⧂⧃ὈὉὊὌὍ',\n  ],\n  [\n    'o',\n    // eslint-disable-next-line max-len\n    'ంಂംං૦௦۵ℴ𝑜𝒐𝖔ꬽ𝝄𝛔𝜎𝝈𝞂ჿ𝚘০୦ዐ𝛐𝗈𝞼ဝⲟ𝙤၀𐐬𝔬𐓪𝓸🇴⍤○ϙ🅾𝒪𝖮𝟢𝟶𝙾𝘰𝗼𝕠𝜊𝐨𝝾𝞸ᐤⓞѳ᧐ᥲðｏఠᦞՓòөӧóºōôǒȏŏồốȍỗổõσṍȭṏὄṑṓȯȫ๏ᴏőöѻоዐǭȱ০୦٥౦೦൦๐໐οօᴑ०੦ỏơờớỡởợọộǫøǿɵծὀὁόὸόὂὃὅ',\n  ],\n  ['P', '🄟🄿ꓑ𝚸𝙿𝞠𝙋ꮲⲢ𝒫𝝦𝑃𝑷𝗣𝐏𐊕𝜬𝘗𝓟𝖯𝛲Ꮲ🅟Ҏ🅿ⓅＰƤᑭ尸Ṗրφքᴘᴾᵖ⒫ṔｱקРየᴩⱣℙΡῬᑸᑶᑷᑹᑬᑮ🇵₱'],\n  ['p', 'ⲣҏ℗ⓟｐṕṗƥᵽῥρрƿǷῤ⍴𝓹𝓅𝐩𝑝𝒑𝔭𝕡𝖕𝗉𝗽𝘱𝙥𝚙𝛒𝝆𝞺𝜌𝞀'],\n  ['Q', '🅀🄠Ꝗ🆀🅠ⓆＱℚⵕԚ𝐐𝑄𝑸𝒬𝓠𝚀𝘘𝙌𝖰𝕼𝔔𝗤🇶'],\n  ['q', '𝓆ꝗ𝗾ⓠｑգ⒬۹զᑫɋɊԛ𝗊𝑞𝘲𝕢𝚚𝒒𝖖𝐪𝔮𝓺𝙦'],\n  ['R', '℞🄡℟ꭱᏒ𐒴ꮢᎡꓣ🆁🅡ⓇＲᴙȒʀᖇя尺ŔЯરƦᴿዪṚɌʁℛℜℝṘŘȐṜŖṞⱤ𝐑𝑅𝑹𝓡𝕽𝖱𝗥𝘙𝙍𝚁ᚱ🇷ᴚ'],\n  ['r', '𝚛ꭇᣴℾ𝚪𝛤𝜞𝝘𝞒ⲄГᎱᒥꭈⲅꮁⓡｒŕṙřȑȓṛṝŗгՐɾᥬṟɍʳ⒭ɼѓᴦᶉ𝐫𝑟𝒓𝓇𝓻𝔯𝕣𝖗𝗋𝗿𝘳𝙧ᵲґᵣ'],\n  ['S', '🅂🄪🄢ꇙ𝓢𝗦Ꮪ𝒮Ꮥ𝚂𝐒ꓢ𝖲𝔖𝙎𐊖𝕾𐐠𝘚𝕊𝑆𝑺🆂🅢ⓈＳṨŞֆՏȘˢ⒮ЅṠŠŚṤŜṦṢടᔕᔖᔢᔡᔣᔤ'],\n  ['s', 'ᣵⓢꜱ𐑈ꮪｓśṥŝṡšṧʂṣṩѕşșȿᶊక𝐬𝑠𝒔𝓈𝓼𝔰𝕤𝖘𝗌𝘀𝘴𝙨𝚜ގ🇸'],\n  ['T', '🅃🄣七ፒ𝜯🆃𐌕𝚻𝛵𝕋𝕿𝑻𐊱𐊗𝖳𝙏🝨𝝩𝞣𝚃𝘛𝑇ꓔ⟙𝐓Ⲧ𝗧⊤𝔗Ꭲꭲ𝒯🅣⏇⏉ⓉＴтҬҭƬイŦԵτᴛᵀｲፕϮŤ⊥ƮΤТ下ṪṬȚŢṰṮ丅丁ᐪ𝛕𝜏𝝉𝞃𝞽𝓣ㄒ🇹ጥ'],\n  ['t', 'ⓣｔṫẗťṭțȶ੮էʇ†ţṱṯƭŧᵗ⒯ʈեƫ𝐭𝑡𝒕𝓉𝓽𝔱𝕥𝖙𝗍𝘁𝘵𝙩𝚝ナ'],\n  ['U', '🅄Џ🄤ሀꓴ𐓎꒤🆄🅤ŨŬŮᑗᑘǓǕǗǙⓊＵȖᑌ凵ƱմԱꓵЦŪՄƲᙀᵁᵘ⒰ŰપÜՍÙÚÛṸṺǛỦȔƯỪỨỮỬỰỤṲŲṶṴɄᥩᑧ∪ᘮ⋃𝐔𝑈𝑼𝒰𝓤𝔘𝕌𝖀𝖴𝗨𝘜𝙐𝚄🇺'],\n  ['u', '𝘂𝘶𝙪𝚞ꞟꭎꭒ𝛖𝜐𝝊𝞄𝞾𐓶ὺύⓤｕùũūừṷṹŭǖữᥙǚǜὗυΰนսʊǘǔúůᴜűųยûṻцሁüᵾᵤµʋủȕȗưứửựụṳṵʉῠῡῢΰῦῧὐὑϋύὒὓὔὕὖᥔ𝐮𝑢𝒖𝓊𝓾𝔲𝕦𝖚𝗎ᶙ'],\n  ['V', '𝑉𝒱𝕍𝗩🄥🅅ꓦ𝑽𝖵𝘝Ꮩ𝚅𝙑𝐕🆅🅥ⓋＶᐯѴᵛ⒱۷ṾⅴⅤṼ٧ⴸѶᐺᐻ🇻𝓥'],\n  ['v', '∨⌄⋁ⅴ𝐯𝑣𝒗𝓋𝔳𝕧𝖛𝗏ꮩሀⓥｖ𝜐𝝊ṽṿ౮งѵעᴠνטᵥѷ៴ᘁ𝙫𝚟𝛎𝜈𝝂𝝼𝞶𝘷𝘃𝓿'],\n  ['W', '𝐖𝑊𝓦𝔚𝕎𝖂𝖶𝗪𝙒𝚆🄦🅆ᏔᎳ𝑾ꓪ𝒲𝘞🆆Ⓦ🅦ｗＷẂᾧᗯᥕ山ѠຟచաЩШώщฬшᙎᵂʷ⒲ฝሠẄԜẀŴẆẈധᘺѿᙡƜ₩🇼'],\n  ['w', '𝐰ꝡ𝑤𝒘𝓌𝔀𝔴𝕨𝖜𝗐𝘄𝘸𝙬𝚠աẁꮃẃⓦ⍵ŵẇẅẘẉⱳὼὠὡὢὣωὤὥὦὧῲῳῴῶῷⱲѡԝᴡώᾠᾡᾢᾣᾤᾥᾦɯ𝝕𝟉𝞏'],\n  ['X', 'ꭓꭕ𝛘𝜒𝝌𝞆𝟀ⲭ🞨𝑿𝛸🄧🞩🞪🅇🞫🞬𐌗Ⲭꓫ𝖃𝞦𝘟𐊐𝚾𝝬𝜲Ꭓ𐌢𝖷𝑋𝕏𝔛𐊴𝗫🆇🅧❌Ⓧ𝓧ＸẊ᙭χㄨ𝒳ӾჯӼҳЖΧҲᵡˣ⒳אሸẌꊼⅩХ╳᙮ᕁᕽⅹᚷⵝ𝙓𝚇乂𝐗🇽'],\n  ['x', '᙮ⅹ𝑥𝒙𝓍𝔵𝕩𝖝𝗑𝘅ᕁᕽⓧｘхẋ×ₓ⤫⤬⨯ẍᶍ𝙭ӽ𝘹𝐱𝚡⨰ﾒ𝔁'],\n  ['Y', '𝒴🄨𝓨𝔜𝖄𝖸𝘠𝙔𝚼𝛶𝝪𝞤УᎩᎽⲨ𝚈𝑌𝗬𝐘ꓬ𝒀𝜰𐊲🆈🅨ⓎＹὛƳㄚʏ⅄ϔ￥¥ՎϓγץӲЧЎሃŸɎϤΥϒҮỲÝŶỸȲẎỶỴῨῩῪΎὙὝὟΫΎӮӰҰұ𝕐🇾'],\n  ['y', '𝐲𝑦𝒚𝓎𝔂𝔶𝕪𝖞𝗒𝘆𝘺𝙮𝚢ʏỿꭚγℽ𝛄𝛾𝜸𝝲𝞬🅈ᎽᎩⓨｙỳýŷỹȳẏÿỷуყẙỵƴɏᵞɣʸᶌү⒴ӳӱӯўУʎ'],\n  ['Z', '🄩🅉ꓜ𝗭𝐙☡Ꮓ𝘡🆉🅩ⓏＺẔƵ乙ẐȤᶻ⒵ŹℤΖŻŽẒⱫ🇿'],\n  ['z', '𝑍𝒁𝒵𝓩𝖹𝙕𝚉𝚭𝛧𝜡𝝛𝞕ᵶꮓ𝐳𝑧𝒛𝓏𝔃𝔷𝕫𝖟𝗓𝘇𝘻𝙯𝚣ⓩｚźẑżžẓẕƶȥɀᴢጊʐⱬᶎʑᙆ'],\n]);\n","// Original repo: https://github.com/gc/confusables\n\nimport { checkLNP, clean } from './util';\nimport { characters } from './characters';\n\nconst alphabetMap = new Map<string, string[]>();\nconst confusablesMap = new Map<string, string>();\n\nfor (const [base, alts] of characters.entries()) {\n  alphabetMap.set(base, [...alts]);\n\n  for (const char of alts) {\n    confusablesMap.set(char, base);\n  }\n}\n\nexport function cleanText(str: string) {\n  if (checkLNP(str)) return str;\n\n  let newStr = '';\n\n  for (const char of clean(str)) {\n    newStr += confusablesMap.get(char) || char;\n  }\n\n  return newStr;\n}\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from './types';\nimport { ApiCommonError, ApiTransactionError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n\nexport class ApiServerError extends ApiBaseError {\n  constructor(message: string, public statusCode?: number) {\n    super(message, ApiCommonError.ServerError);\n  }\n}\n\nexport class ApiUnsupportedVersionError extends ApiBaseError {\n  constructor(message: string) {\n    super(message, ApiCommonError.UnsupportedVersion);\n  }\n}\n\nexport class ApiHardwareBlindSigningNotEnabled extends ApiBaseError {\n  constructor(message: string = 'Blind signing not enabled') {\n    super(message, ApiTransactionError.HardwareBlindSigningNotEnabled);\n  }\n}\n\nexport class AbortOperationError extends ApiBaseError {\n  constructor(message: string = 'Abort operation') {\n    super(message);\n  }\n}\n\nexport function maybeApiErrors(fn: AnyAsyncFunction) {\n  return async (...args: any) => {\n    try {\n      return await fn(...args);\n    } catch (err) {\n      return handleServerError(err);\n    }\n  };\n}\n\nexport function handleServerError(err: any) {\n  if (err instanceof ApiServerError) {\n    return { error: err.displayError! };\n  }\n  throw err;\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n","import { DEFAULT_ERROR_PAUSE, DEFAULT_RETRIES, DEFAULT_TIMEOUT } from '../config';\nimport { ApiServerError } from '../api/errors';\nimport { logDebug } from './logs';\nimport { pause } from './schedulers';\n\ntype QueryParams = Record<string, string | number | boolean | string[]>;\n\nconst MAX_TIMEOUT = 30000; // 30 sec\n\nexport async function fetchJson(url: string | URL, data?: QueryParams, init?: RequestInit) {\n  const urlObject = new URL(url);\n  if (data) {\n    Object.entries(data).forEach(([key, value]) => {\n      if (value === undefined) {\n        return;\n      }\n\n      if (Array.isArray(value)) {\n        value.forEach((item) => {\n          urlObject.searchParams.append(key, item.toString());\n        });\n      } else {\n        urlObject.searchParams.set(key, value.toString());\n      }\n    });\n  }\n\n  const response = await fetchWithRetry(urlObject, init);\n\n  return response.json();\n}\n\nexport async function fetchWithRetry(url: string | URL, init?: RequestInit, options?: {\n  retries?: number;\n  timeouts?: number | number[];\n  shouldSkipRetryFn?: (message?: string, statusCode?: number) => boolean;\n}) {\n  const {\n    retries = DEFAULT_RETRIES,\n    timeouts = DEFAULT_TIMEOUT,\n    shouldSkipRetryFn = isNotTemporaryError,\n  } = options ?? {};\n\n  let message = 'Unknown error.';\n  let statusCode: number | undefined;\n\n  for (let i = 1; i <= retries; i++) {\n    try {\n      if (i > 1) {\n        logDebug(`Retry request #${i}:`, url.toString(), statusCode);\n      }\n\n      const timeout = Array.isArray(timeouts)\n        ? timeouts[i - 1] ?? timeouts[timeouts.length - 1]\n        : Math.min(timeouts * i, MAX_TIMEOUT);\n      const response = await fetchWithTimeout(url, init, timeout);\n      statusCode = response.status;\n\n      if (statusCode >= 400) {\n        const { error } = await response.json().catch(() => undefined);\n        throw new Error(error ?? `HTTP Error ${statusCode}`);\n      }\n\n      return response;\n    } catch (err: any) {\n      message = typeof err === 'string' ? err : err.message ?? message;\n\n      const shouldSkipRetry = shouldSkipRetryFn(message, statusCode);\n\n      if (shouldSkipRetry) {\n        throw new ApiServerError(message, statusCode);\n      }\n\n      if (i < retries) {\n        await pause(DEFAULT_ERROR_PAUSE * i);\n      }\n    }\n  }\n\n  throw new ApiServerError(message);\n}\n\nexport async function fetchWithTimeout(url: string | URL, init?: RequestInit, timeout = DEFAULT_TIMEOUT) {\n  const controller = new AbortController();\n  const id = setTimeout(() => {\n    controller.abort();\n  }, timeout);\n\n  try {\n    return await fetch(url, {\n      ...init,\n      signal: controller.signal,\n      cache: 'no-cache', // TODO Remove it after a few releases\n    });\n  } finally {\n    clearTimeout(id);\n  }\n}\n\nexport async function handleFetchErrors(response: Response, ignoreHttpCodes?: number[]) {\n  if (!response.ok && (!ignoreHttpCodes?.includes(response.status))) {\n    // eslint-disable-next-line prefer-const\n    let { error, errors } = await response.json().catch(() => undefined);\n    if (!error && errors && errors.length) {\n      error = errors[0]?.msg;\n    }\n\n    throw new ApiServerError(error ?? `HTTP Error ${response.status}`, response.status);\n  }\n  return response;\n}\n\nfunction isNotTemporaryError(message?: string, statusCode?: number) {\n  return statusCode && [400, 404].includes(statusCode);\n}\n","import { BRILLIANT_API_BASE_URL } from '../../config';\nimport { fetchJson, handleFetchErrors } from '../../util/fetch';\n\nconst BAD_REQUEST_CODE = 400;\n\nexport async function callBackendPost<T>(path: string, data: AnyLiteral, options?: {\n  authToken?: string;\n  isAllowBadRequest?: boolean;\n  method?: string;\n}): Promise<T> {\n  const { authToken, isAllowBadRequest, method } = options ?? {};\n\n  const response = await fetch(`${BRILLIANT_API_BASE_URL}${path}`, {\n    method: method ?? 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      ...(authToken && { 'X-Auth-Token': authToken }),\n    },\n    body: JSON.stringify(data),\n  });\n\n  await handleFetchErrors(response, isAllowBadRequest ? [BAD_REQUEST_CODE] : undefined);\n\n  return response.json();\n}\n\nexport function callBackendGet<T = any>(path: string, data?: AnyLiteral, headers?: HeadersInit): Promise<T> {\n  const url = new URL(`${BRILLIANT_API_BASE_URL}${path}`);\n\n  return fetchJson(url, data, { headers });\n}\n","import type { ApiAddressInfo, ApiKnownAddresses } from '../types';\n\nimport { RE_LINK_TEMPLATE, RE_TG_BOT_MENTION } from '../../config';\nimport { cleanText } from '../../lib/confusables';\nimport { logDebugError } from '../../util/logs';\nimport { callBackendGet } from './backend';\n\nlet knownAddresses: ApiKnownAddresses = {};\nlet scamMarkers: RegExp[] = [];\nlet trustedSites: Set<string> = new Set();\nlet trustedCollections: Set<string> = new Set();\n\nexport async function tryUpdateKnownAddresses() {\n  try {\n    const data = await callBackendGet<{\n      knownAddresses: Record<string, ApiKnownAddresses>;\n      scamMarkers: string[];\n      trustedSites: string[];\n      trustedCollections: string[];\n    }>('/known-addresses');\n\n    knownAddresses = data.knownAddresses;\n    scamMarkers = data.scamMarkers.map((x) => new RegExp(x, 'i'));\n    trustedSites = new Set(data.trustedSites);\n    trustedCollections = new Set(data.trustedCollections);\n  } catch (err) {\n    logDebugError('tryUpdateKnownAddresses', err);\n  }\n}\n\nexport function getKnownAddresses() {\n  return knownAddresses;\n}\n\nexport function getScamMarkers() {\n  return scamMarkers;\n}\n\nexport function getKnownAddressInfo(address: string): ApiAddressInfo | undefined {\n  return knownAddresses[address];\n}\n\nexport function checkIsTrustedSite(domain: string) {\n  return trustedSites.has(domain.toLowerCase());\n}\n\nexport function checkIsTrustedCollection(address: string) {\n  return trustedCollections.has(address);\n}\n\nexport function checkHasScamLink(text: string) {\n  const matches = cleanText(text).matchAll(RE_LINK_TEMPLATE);\n\n  for (const match of matches) {\n    const host = match.groups?.host;\n    if (host && !checkIsTrustedSite(host)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function checkHasTelegramBotMention(text: string) {\n  return RE_TG_BOT_MENTION.test(cleanText(text));\n}\n","import type { ApiWalletVersion } from '../../types';\nimport type { ContractInfo, ContractName } from './types';\nimport { Workchain } from '../../types';\n\nexport const TOKEN_TRANSFER_TONCOIN_AMOUNT = 100000000n; // 0.1 TON\nexport const TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const NFT_TRANSFER_TONCOIN_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const DNS_ZONES_MAP = {\n  '.t.me': 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n  '.ton': 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n  '.vip': 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n  '.gram': 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  megatonWtonMaster: {\n    name: 'megatonWtonMaster',\n    hash: '4c9790d808ea4470614e021f76c40529efe2fbce8138da4284a29b5f1943ef19',\n    isSwapAllowed: true,\n  },\n  megatonRouter: {\n    name: 'megatonRouter',\n    hash: '5d5f0e3ed9602d1ba96006ead98cb5e9b53f49ce4a5cf675e06e4d440b7d267c',\n    isSwapAllowed: true,\n  },\n};\n","/*\n * This module is to be used instead of /src/util/environment.ts\n * when `window` is not available (e.g. in a web worker).\n */\nimport type { ApiInitArgs } from './types';\n\nimport {\n  ELECTRON_TONHTTPAPI_MAINNET_API_KEY,\n  ELECTRON_TONHTTPAPI_TESTNET_API_KEY,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  TONHTTPAPI_MAINNET_API_KEY,\n  TONHTTPAPI_TESTNET_API_KEY,\n} from '../config';\n\nconst ELECTRON_ORIGIN = 'file://';\n\nlet environment: ApiInitArgs & {\n  isDappSupported: boolean;\n  isSseSupported: boolean;\n  apiHeaders?: AnyLiteral;\n  tonhttpapiMainnetKey?: string;\n  tonhttpapiTestnetKey?: string;\n};\n\nexport function setEnvironment(args: ApiInitArgs) {\n  environment = {\n    ...args,\n    isDappSupported: IS_EXTENSION || IS_CAPACITOR || args.isElectron,\n    isSseSupported: args.isElectron || (IS_CAPACITOR && !args.isNativeBottomSheet),\n    // eslint-disable-next-line no-restricted-globals\n    apiHeaders: { 'X-App-Origin': args.isElectron ? ELECTRON_ORIGIN : self?.origin },\n    tonhttpapiMainnetKey: args.isElectron ? ELECTRON_TONHTTPAPI_MAINNET_API_KEY : TONHTTPAPI_MAINNET_API_KEY,\n    tonhttpapiTestnetKey: args.isElectron ? ELECTRON_TONHTTPAPI_TESTNET_API_KEY : TONHTTPAPI_TESTNET_API_KEY,\n  };\n  return environment;\n}\n\nexport function getEnvironment() {\n  return environment;\n}\n","import axios from 'axios';\nimport buildFullPath from 'axios/unsafe/core/buildFullPath';\nimport settle from 'axios/unsafe/core/settle';\nimport buildURL from 'axios/unsafe/helpers/buildURL';\nimport utils from 'axios/unsafe/utils';\n\nconst { isFormData, isStandardBrowserEnv, isUndefined } = utils;\n\n/**\n * - Create a request object\n * - Get response body\n * - Check if timeout\n */\nexport default async function fetchAdapter(config) {\n  const request = createRequest(config);\n  const promiseChain = [getResponse(request, config)];\n\n  if (config.timeout && config.timeout > 0) {\n    promiseChain.push(\n      new Promise((res) => {\n        setTimeout(() => {\n          const message = config.timeoutErrorMessage\n            ? config.timeoutErrorMessage\n            : `timeout of ${config.timeout}ms exceeded`;\n          res(createError(message, config, 'ECONNABORTED', request));\n        }, config.timeout);\n      }),\n    );\n  }\n\n  const data = await Promise.race(promiseChain);\n  return new Promise((resolve, reject) => {\n    if (data instanceof Error) {\n      reject(data);\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      Object.prototype.toString.call(config.settle) === '[object Function]'\n        ? config.settle(resolve, reject, data)\n        : settle(resolve, reject, data);\n    }\n  });\n}\n\n/**\n * Fetch API stage two is to get response body. This funtion tries to retrieve\n * response body based on response's type\n */\nasync function getResponse(request, config) {\n  let stageOne;\n  try {\n    stageOne = await fetch(request);\n  } catch (e) {\n    return createError('Network Error', config, 'ERR_NETWORK', request);\n  }\n\n  const response = {\n    ok: stageOne.ok,\n    status: stageOne.status,\n    statusText: stageOne.statusText,\n    headers: new Headers(stageOne.headers), // Make a copy of headers\n    config,\n    request,\n  };\n\n  if (stageOne.status >= 200 && stageOne.status !== 204) {\n    switch (config.responseType) {\n      case 'arraybuffer':\n        response.data = await stageOne.arrayBuffer();\n        break;\n      case 'blob':\n        response.data = await stageOne.blob();\n        break;\n      case 'json':\n        response.data = await stageOne.json();\n        break;\n      case 'formData':\n        response.data = await stageOne.formData();\n        break;\n      default:\n        response.data = await stageOne.text();\n        break;\n    }\n  }\n\n  return response;\n}\n\n/**\n * This function will create a Request object based on configuration's axios\n */\nfunction createRequest(config) {\n  const headers = new Headers(config.headers);\n\n  // HTTP basic authentication\n  if (config.auth) {\n    const username = config.auth.username || '';\n    const password = config.auth.password ? decodeURI(encodeURIComponent(config.auth.password)) : '';\n    headers.set('Authorization', `Basic ${btoa(`${username}:${password}`)}`);\n  }\n\n  const method = config.method.toUpperCase();\n  const options = {\n    headers,\n    method,\n  };\n  if (method !== 'GET' && method !== 'HEAD') {\n    options.body = config.data;\n\n    // In these cases the browser will automatically set the correct Content-Type,\n    // but only if that header hasn't been set yet. So that's why we're deleting it.\n    if (isFormData(options.body) && isStandardBrowserEnv()) {\n      headers.delete('Content-Type');\n    }\n  }\n  if (config.mode) {\n    options.mode = config.mode;\n  }\n  if (config.cache) {\n    options.cache = config.cache;\n  }\n  if (config.integrity) {\n    options.integrity = config.integrity;\n  }\n  if (config.redirect) {\n    options.redirect = config.redirect;\n  }\n  if (config.referrer) {\n    options.referrer = config.referrer;\n  }\n  // This config is similar to XHR’s withCredentials flag, but with three available values instead of two.\n  // So if withCredentials is not set, default value 'same-origin' will be used\n  if (!isUndefined(config.withCredentials)) {\n    options.credentials = config.withCredentials ? 'include' : 'omit';\n  }\n\n  const fullPath = buildFullPath(config.baseURL, config.url);\n  const url = buildURL(fullPath, config.params, config.paramsSerializer);\n\n  // Expected browser to throw error if there is any wrong configuration value\n  return new Request(url, options);\n}\n\n/**\n * Note:\n *\n *   From version >= 0.27.0, createError function is replaced by AxiosError class.\n *   So I copy the old createError function here for backward compatible.\n *\n *\n *\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nfunction createError(message, config, code, request, response) {\n  if (axios.AxiosError && typeof axios.AxiosError === 'function') {\n    return new axios.AxiosError(message, axios.AxiosError[code], config, request, response);\n  }\n\n  const error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n}\n\n/**\n *\n * Note:\n *\n *   This function is for backward compatible.\n *\n *\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nfunction enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code,\n      // eslint-disable-next-line no-null/no-null\n      status: this.response && this.response.status ? this.response.status : null,\n    };\n  };\n  return error;\n}\n","const cache = new WeakMap<AnyFunction, Map<string, any>>();\n\nexport default function withCacheAsync<T extends AnyAsyncFunction>(\n  fn: T, canBeCached: (value: Awaited<ReturnType<T>>) => boolean = (value) => !!value,\n) {\n  return async (...args: Parameters<T>): Promise<Awaited<ReturnType<T>>> => {\n    let fnCache = cache.get(fn);\n    const cacheKey = buildCacheKey(args);\n\n    if (fnCache) {\n      const cached = fnCache.get(cacheKey);\n      if (cached) {\n        return cached;\n      }\n    } else {\n      fnCache = new Map();\n      cache.set(fn, fnCache);\n    }\n\n    const newValue = await fn(...args);\n\n    if (canBeCached(newValue)) {\n      fnCache.set(cacheKey, newValue);\n    }\n\n    return newValue;\n  };\n}\n\nfunction buildCacheKey(args: any[]) {\n  return args.reduce((cacheKey, arg) => {\n    return `${cacheKey}_${typeof arg === 'object' ? JSON.stringify(args) : arg}`;\n  }, '');\n}\n","import type {\n  Address, Cell, Contract, ContractProvider,\n} from '@ton/core';\nimport {\n  beginCell, contractAddress,\n} from '@ton/core';\n\nexport type DnsItemConfig = {};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function dnsItemConfigToCell(config: DnsItemConfig): Cell {\n  return beginCell().endCell();\n}\n\nexport class DnsItem implements Contract {\n  constructor(\n    readonly address: Address,\n    readonly init?: { code: Cell; data: Cell },\n  ) {}\n\n  static createFromAddress(address: Address) {\n    return new DnsItem(address);\n  }\n\n  static createFromConfig(config: DnsItemConfig, code: Cell, workchain = 0) {\n    const data = dnsItemConfigToCell(config);\n    const init = { code, data };\n    return new DnsItem(contractAddress(workchain, init), init);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getDomain(provider: ContractProvider) {\n    const res = await provider.get('get_domain', []);\n    const domain = res.stack.readString();\n    return domain;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getTelemintDomain(provider: ContractProvider) {\n    const res = await provider.get('get_domain_full', []);\n    const domain = res.stack.readString();\n    const parts = domain.replace(/\\\\u0000/g, '.').replace(/\\.$/, '').split('.');\n    parts.reverse();\n    return parts.join('.');\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getNftData(provider: ContractProvider) {\n    const res = await provider.get('get_nft_data', []);\n    const index = res.stack.readBigNumber();\n    const collectionAddress = res.stack.readAddress();\n    const owner = res.stack.readAddressOpt();\n\n    return {\n      index,\n      collectionAddress,\n      owner,\n    };\n  }\n}\n","// eslint-disable-next-line max-classes-per-file\nexport abstract class Op {\n  static transfer = 0xf8a7ea5;\n\n  static transfer_notification = 0x7362d09c;\n\n  static internal_transfer = 0x178d4519;\n\n  static excesses = 0xd53276db;\n\n  static burn = 0x595f07bc;\n\n  static burn_notification = 0x7bdd97de;\n\n  static provide_wallet_address = 0x2c76b973;\n\n  static take_wallet_address = 0xd1735400;\n\n  static mint = 21;\n\n  static change_admin = 3;\n\n  static change_content = 4;\n}\n\nexport abstract class Errors {\n  static invalid_op = 709;\n\n  static not_admin = 73;\n\n  static unouthorized_burn = 74;\n\n  static discovery_fee_not_matched = 75;\n\n  static wrong_op = 0xffff;\n\n  static not_owner = 705;\n\n  static not_enough_ton = 709;\n\n  static not_enough_gas = 707;\n\n  static not_valid_wallet = 707;\n\n  static wrong_workchain = 333;\n\n  static balance_error = 706;\n}\n","import type {\n  Address, Cell, Contract, ContractProvider, Sender,\n} from '@ton/core';\nimport {\n  beginCell, contractAddress, SendMode, toNano,\n} from '@ton/core';\n\nimport { Op } from './JettonConstants';\n\nexport type JettonMinterContent = {\n  type:0 | 1;\n  uri:string;\n};\n\nexport type JettonMinterConfig = { admin: Address; content: Cell; wallet_code: Cell };\n\nexport function jettonMinterConfigToCell(config: JettonMinterConfig): Cell {\n  return beginCell()\n    .storeCoins(0)\n    .storeAddress(config.admin)\n    .storeRef(config.content)\n    .storeRef(config.wallet_code)\n    .endCell();\n}\n\nexport function jettonContentToCell(content:JettonMinterContent) {\n  return beginCell()\n    .storeUint(content.type, 8)\n    .storeStringTail(content.uri) // Snake logic under the hood\n    .endCell();\n}\n\nexport class JettonMinter implements Contract {\n  constructor(readonly address: Address, readonly init?: { code: Cell; data: Cell }) {}\n\n  static createFromAddress(address: Address) {\n    return new JettonMinter(address);\n  }\n\n  static createFromConfig(config: JettonMinterConfig, code: Cell, workchain = 0) {\n    const data = jettonMinterConfigToCell(config);\n    const init = { code, data };\n    return new JettonMinter(contractAddress(workchain, init), init);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  protected static jettonInternalTransfer(jetton_amount: bigint,\n    forward_ton_amount: bigint,\n    response_addr?: Address,\n    query_id: number | bigint = 0) {\n    return beginCell()\n      .storeUint(Op.internal_transfer, 32)\n      .storeUint(query_id, 64)\n      .storeCoins(jetton_amount)\n      .storeAddress(undefined)\n      .storeAddress(response_addr)\n      .storeCoins(forward_ton_amount)\n      .storeBit(false)\n      .endCell();\n  }\n\n  static mintMessage(\n    from: Address,\n    to: Address,\n    jetton_amount: bigint,\n    forward_ton_amount: bigint,\n    total_ton_amount: bigint,\n    query_id: number | bigint = 0,\n  ) {\n    const mintMsg = beginCell().storeUint(Op.internal_transfer, 32)\n      .storeUint(0, 64)\n      .storeCoins(jetton_amount)\n      .storeAddress(undefined)\n      .storeAddress(from) // Response addr\n      .storeCoins(forward_ton_amount)\n      .storeMaybeRef(undefined)\n      .endCell();\n\n    return beginCell().storeUint(Op.mint, 32).storeUint(query_id, 64) // op, queryId\n      .storeAddress(to)\n      .storeCoins(total_ton_amount)\n      .storeCoins(jetton_amount)\n      .storeRef(mintMsg)\n      .endCell();\n  }\n\n  async sendMint(\n    provider: ContractProvider,\n    via: Sender,\n    to: Address,\n    jetton_amount: bigint,\n    forward_ton_amount: bigint,\n    total_ton_amount: bigint,\n  ) {\n    if (total_ton_amount <= forward_ton_amount) {\n      throw new Error('Total ton amount should be > forward amount');\n    }\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.mintMessage(this.address, to, jetton_amount, forward_ton_amount, total_ton_amount),\n      value: total_ton_amount + toNano('0.015'),\n    });\n  }\n\n  /* provide_wallet_address#2c76b973 query_id:uint64 owner_address:MsgAddress include_address:Bool = InternalMsgBody;\n  */\n  static discoveryMessage(owner: Address, include_address: boolean) {\n    return beginCell().storeUint(0x2c76b973, 32).storeUint(0, 64) // op, queryId\n      .storeAddress(owner)\n      .storeBit(include_address)\n      .endCell();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendDiscovery(\n    provider: ContractProvider,\n    via: Sender,\n    owner: Address,\n    include_address: boolean,\n    value:bigint = toNano('0.1'),\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.discoveryMessage(owner, include_address),\n      value,\n    });\n  }\n\n  static changeAdminMessage(newOwner: Address) {\n    return beginCell().storeUint(Op.change_admin, 32).storeUint(0, 64) // op, queryId\n      .storeAddress(newOwner)\n      .endCell();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendChangeAdmin(provider: ContractProvider, via: Sender, newOwner: Address) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.changeAdminMessage(newOwner),\n      value: toNano('0.05'),\n    });\n  }\n\n  static changeContentMessage(content: Cell) {\n    return beginCell().storeUint(Op.change_content, 32).storeUint(0, 64) // op, queryId\n      .storeRef(content)\n      .endCell();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendChangeContent(provider: ContractProvider, via: Sender, content: Cell) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonMinter.changeContentMessage(content),\n      value: toNano('0.05'),\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getWalletAddress(provider: ContractProvider, owner: Address): Promise<Address> {\n    const res = await provider.get('get_wallet_address', [{\n      type: 'slice', cell: beginCell().storeAddress(owner).endCell(),\n    }]);\n    return res.stack.readAddress();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getJettonData(provider: ContractProvider) {\n    const res = await provider.get('get_jetton_data', []);\n    const totalSupply = res.stack.readBigNumber();\n    const mintable = res.stack.readBoolean();\n    const adminAddress = res.stack.readAddress();\n    const content = res.stack.readCell();\n    const walletCode = res.stack.readCell();\n    return {\n      totalSupply,\n      mintable,\n      adminAddress,\n      content,\n      walletCode,\n    };\n  }\n\n  async getTotalSupply(provider: ContractProvider) {\n    const res = await this.getJettonData(provider);\n    return res.totalSupply;\n  }\n\n  async getAdminAddress(provider: ContractProvider) {\n    const res = await this.getJettonData(provider);\n    return res.adminAddress;\n  }\n\n  async getContent(provider: ContractProvider) {\n    const res = await this.getJettonData(provider);\n    return res.content;\n  }\n}\n","import type {\n  Address, Cell, Contract, ContractProvider, Sender,\n} from '@ton/core';\nimport {\n  beginCell, contractAddress, SendMode, toNano,\n} from '@ton/core';\n\nexport type JettonWalletConfig = {};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function jettonWalletConfigToCell(config: JettonWalletConfig): Cell {\n  return beginCell().endCell();\n}\n\nexport class JettonWallet implements Contract {\n  constructor(readonly address: Address, readonly init?: { code: Cell; data: Cell }) {}\n\n  static createFromAddress(address: Address) {\n    return new JettonWallet(address);\n  }\n\n  static createFromConfig(config: JettonWalletConfig, code: Cell, workchain = 0) {\n    const data = jettonWalletConfigToCell(config);\n    const init = { code, data };\n    return new JettonWallet(contractAddress(workchain, init), init);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendDeploy(provider: ContractProvider, via: Sender, value: bigint) {\n    await provider.internal(via, {\n      value,\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: beginCell().endCell(),\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getJettonBalance(provider: ContractProvider) {\n    const state = await provider.getState();\n    if (state.state.type !== 'active') {\n      return 0n;\n    }\n    const res = await provider.get('get_wallet_data', []);\n    return res.stack.readBigNumber();\n  }\n\n  static transferMessage(\n    jetton_amount: bigint,\n    to: Address,\n    responseAddress:Address,\n    customPayload: Cell | null,\n    forward_ton_amount: bigint,\n    forwardPayload: Cell | null,\n  ) {\n    return beginCell().storeUint(0xf8a7ea5, 32).storeUint(0, 64) // op, queryId\n      .storeCoins(jetton_amount)\n      .storeAddress(to)\n      .storeAddress(responseAddress)\n      .storeMaybeRef(customPayload)\n      .storeCoins(forward_ton_amount)\n      .storeMaybeRef(forwardPayload)\n      .endCell();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendTransfer(\n    provider: ContractProvider,\n    via: Sender,\n    value: bigint,\n    jetton_amount: bigint, to: Address,\n    responseAddress:Address,\n    customPayload: Cell,\n    forward_ton_amount: bigint,\n    forwardPayload: Cell,\n  ) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.transferMessage(\n        jetton_amount, to, responseAddress, customPayload, forward_ton_amount, forwardPayload,\n      ),\n      value,\n    });\n  }\n\n  /*\n    burn#595f07bc query_id:uint64 amount:(VarUInteger 16)\n                  response_destination:MsgAddress custom_payload:(Maybe ^Cell)\n                  = InternalMsgBody;\n  */\n  static burnMessage(jetton_amount: bigint,\n    responseAddress:Address,\n    customPayload: Cell | null) {\n    return beginCell().storeUint(0x595f07bc, 32).storeUint(0, 64) // op, queryId\n      .storeCoins(jetton_amount)\n      .storeAddress(responseAddress)\n      .storeMaybeRef(customPayload)\n      .endCell();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendBurn(provider: ContractProvider, via: Sender, value: bigint,\n    jetton_amount: bigint,\n    responseAddress:Address,\n    customPayload: Cell) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.burnMessage(jetton_amount, responseAddress, customPayload),\n      value,\n    });\n  }\n\n  /*\n    withdraw_tons#107c49ef query_id:uint64 = InternalMsgBody;\n  */\n  static withdrawTonsMessage() {\n    return beginCell().storeUint(0x6d8e5e3c, 32).storeUint(0, 64) // op, queryId\n      .endCell();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendWithdrawTons(provider: ContractProvider, via: Sender) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.withdrawTonsMessage(),\n      value: toNano('0.1'),\n    });\n  }\n\n  /*\n    withdraw_jettons#10 query_id:uint64 wallet:MsgAddressInt amount:Coins = InternalMsgBody;\n  */\n  static withdrawJettonsMessage(from:Address, amount:bigint) {\n    return beginCell().storeUint(0x768a50b2, 32).storeUint(0, 64) // op, queryId\n      .storeAddress(from)\n      .storeCoins(amount)\n      .storeMaybeRef(undefined)\n      .endCell();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async sendWithdrawJettons(provider: ContractProvider, via: Sender, from:Address, amount:bigint) {\n    await provider.internal(via, {\n      sendMode: SendMode.PAY_GAS_SEPARATELY,\n      body: JettonWallet.withdrawJettonsMessage(from, amount),\n      value: toNano('0.1'),\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getWalletData(provider: ContractProvider) {\n    const res = await provider.get('get_wallet_data', []);\n    const balance = res.stack.readBigNumber();\n    const owner = res.stack.readAddress();\n    const minter = res.stack.readAddress();\n    const code = res.stack.readCell();\n\n    return {\n      balance, owner, minter, code,\n    };\n  }\n}\n","import axios from 'axios';\nimport type { TonClientParameters } from '@ton/ton/dist/client/TonClient';\nimport { TonClient as TonCoreClient } from '@ton/ton/dist/client/TonClient';\n\nimport type { GetAddressInfoResponse } from '../types';\n\nimport { DEFAULT_ERROR_PAUSE, DEFAULT_RETRIES } from '../../../../config';\nimport axiosRetry from '../../../../lib/axios-retry';\nimport { fetchWithRetry } from '../../../../util/fetch';\nimport { logDebug } from '../../../../util/logs';\n\naxiosRetry(axios, {\n  retries: DEFAULT_RETRIES,\n  shouldResetTimeout: true,\n  retryDelay: (retryCount) => {\n    return retryCount * DEFAULT_ERROR_PAUSE;\n  },\n  onRetry: (retryNumber, error, requestConfig) => {\n    logDebug(`Retry request #${retryNumber}:`, requestConfig.url, error.response?.status);\n  },\n});\n\ntype Parameters = TonClientParameters & {\n  headers?: AnyLiteral;\n};\n\nexport class TonClient extends TonCoreClient {\n  private initParameters: Parameters;\n\n  constructor(parameters: Parameters) {\n    super(parameters);\n    this.initParameters = parameters;\n  }\n\n  getWalletInfo(address: string) {\n    return this.callRpc('getWalletInformation', { address });\n  }\n\n  getAddressInfo(address: string): Promise<GetAddressInfoResponse> {\n    return this.callRpc('getAddressInformation', { address });\n  }\n\n  callRpc(method: string, params: any): Promise<any> {\n    return this.sendRequest(this.parameters.endpoint, {\n      id: 1, jsonrpc: '2.0', method, params,\n    });\n  }\n\n  async sendFile(src: Buffer | string): Promise<void> {\n    const boc = typeof src === 'object' ? src.toString('base64') : src;\n    await this.callRpc('sendBocReturnHashNoError', { boc });\n  }\n\n  async sendRequest(apiUrl: string, request: any) {\n    const method: string = request.method;\n\n    const headers: AnyLiteral = {\n      ...this.initParameters.headers,\n      'Content-Type': 'application/json',\n    };\n    if (this.parameters.apiKey) {\n      headers['X-API-Key'] = this.parameters.apiKey;\n    }\n    const body = JSON.stringify(request);\n\n    const response = await fetchWithRetry(apiUrl, {\n      method: 'POST',\n      body,\n      headers,\n    }, {\n      shouldSkipRetryFn: (message, statusCode) => isNotTemporaryError(method, message, statusCode),\n    });\n\n    const data = await response.json();\n\n    return data.result;\n  }\n}\n\nfunction isNotTemporaryError(method: string, message?: string, statusCode?: number) {\n  return Boolean(statusCode === 422 || message?.match(/(exit code|exitcode=|duplicate message)/));\n}\n","import type { OpenedContract } from '@ton/core';\nimport { Address, Builder, Cell } from '@ton/core';\nimport axios from 'axios';\nimport { WalletContractV1R1 } from '@ton/ton/dist/wallets/WalletContractV1R1';\nimport { WalletContractV1R2 } from '@ton/ton/dist/wallets/WalletContractV1R2';\nimport { WalletContractV1R3 } from '@ton/ton/dist/wallets/WalletContractV1R3';\nimport { WalletContractV2R1 } from '@ton/ton/dist/wallets/WalletContractV2R1';\nimport { WalletContractV2R2 } from '@ton/ton/dist/wallets/WalletContractV2R2';\nimport { WalletContractV3R1 } from '@ton/ton/dist/wallets/WalletContractV3R1';\nimport { WalletContractV3R2 } from '@ton/ton/dist/wallets/WalletContractV3R2';\nimport { WalletContractV4 } from '@ton/ton/dist/wallets/WalletContractV4';\nimport { WalletContractV5R1 } from '@ton/ton/dist/wallets/WalletContractV5R1';\n\nimport type { ApiDnsZone, ApiNetwork, ApiWalletVersion } from '../../../types';\nimport type { TokenTransferBodyParams } from '../types';\n\nimport {\n  DEFAULT_TIMEOUT,\n  TONHTTPAPI_MAINNET_API_KEY,\n  TONHTTPAPI_MAINNET_URL,\n  TONHTTPAPI_TESTNET_API_KEY,\n  TONHTTPAPI_TESTNET_URL,\n} from '../../../../config';\nimport axiosFetchAdapter from '../../../../lib/axios-fetch-adapter';\nimport { logDebugError } from '../../../../util/logs';\nimport withCacheAsync from '../../../../util/withCacheAsync';\nimport { DnsItem } from '../contracts/DnsItem';\nimport { JettonMinter } from '../contracts/JettonMaster';\nimport { JettonWallet } from '../contracts/JettonWallet';\nimport { hexToBytes } from '../../../common/utils';\nimport { getEnvironment } from '../../../environment';\nimport {\n  DEFAULT_IS_BOUNCEABLE,\n  DNS_ZONES_MAP,\n  JettonOpCode,\n  LiquidStakingOpCode,\n  OpCode,\n  WORKCHAIN,\n} from '../constants';\nimport { generateQueryId } from './index';\n\nimport { TonClient } from './TonClient';\n\nexport type TonWalletType = typeof WalletContractV1R1\n| typeof WalletContractV1R2\n| typeof WalletContractV1R3\n| typeof WalletContractV2R1\n| typeof WalletContractV2R2\n| typeof WalletContractV3R1\n| typeof WalletContractV3R2\n| typeof WalletContractV4\n| typeof WalletContractV5R1;\n\nexport type TonWallet = OpenedContract<WalletContractV1R1\n| WalletContractV1R2\n| WalletContractV1R3\n| WalletContractV2R1\n| WalletContractV2R2\n| WalletContractV3R1\n| WalletContractV3R2\n| WalletContractV4\n| WalletContractV5R1>;\n\naxios.defaults.adapter = axiosFetchAdapter;\n\nconst TON_MAX_COMMENT_BYTES = 127;\n\nlet clientByNetwork: Record<ApiNetwork, TonClient> | undefined;\n\nexport const walletClassMap: Record<ApiWalletVersion, TonWalletType> = {\n  simpleR1: WalletContractV1R1,\n  simpleR2: WalletContractV1R2,\n  simpleR3: WalletContractV1R3,\n  v2R1: WalletContractV2R1,\n  v2R2: WalletContractV2R2,\n  v3R1: WalletContractV3R1,\n  v3R2: WalletContractV3R2,\n  v4R2: WalletContractV4,\n  W5: WalletContractV5R1,\n};\n\nexport function getTonClient(network: ApiNetwork = 'mainnet') {\n  if (!clientByNetwork) {\n    clientByNetwork = {\n      mainnet: new TonClient({\n        endpoint: TONHTTPAPI_MAINNET_URL,\n        timeout: DEFAULT_TIMEOUT,\n        apiKey: TONHTTPAPI_MAINNET_API_KEY,\n        headers: getEnvironment().apiHeaders,\n      }),\n      testnet: new TonClient({\n        endpoint: TONHTTPAPI_TESTNET_URL,\n        timeout: DEFAULT_TIMEOUT,\n        apiKey: TONHTTPAPI_TESTNET_API_KEY,\n        headers: getEnvironment().apiHeaders,\n      }),\n    };\n  }\n\n  return clientByNetwork[network];\n}\n\nexport function getTonWalletContract(publicKeyHex: string, version: ApiWalletVersion) {\n  const walletClass = walletClassMap[version];\n  if (!walletClass) {\n    throw new Error('Unsupported wallet contract version');\n  }\n\n  const publicKey = Buffer.from(hexToBytes(publicKeyHex));\n  return walletClass.create({ workchain: WORKCHAIN, publicKey });\n}\n\nexport const resolveTokenWalletAddress = withCacheAsync(\n  async (network: ApiNetwork, address: string, minterAddress: string) => {\n    const minter = getTonClient(network).open(new JettonMinter(Address.parse(minterAddress)));\n    const walletAddress = await minter.getWalletAddress(Address.parse(address));\n    return toBase64Address(walletAddress, true, network);\n  },\n);\n\nexport const resolveTokenMinterAddress = withCacheAsync(async (network: ApiNetwork, tokenWalletAddress: string) => {\n  const tokenWallet = getTonClient(network).open(new JettonWallet(Address.parse(tokenWalletAddress)));\n  const data = await tokenWallet.getWalletData();\n  return toBase64Address(data.minter, true, network);\n});\n\nexport const getWalletPublicKey = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  try {\n    const res = await getTonClient(network).callGetMethod(Address.parse(address), 'get_public_key');\n    const bigintKey = res.stack.readBigNumber();\n    const hex = bigintKey.toString(16).padStart(64, '0');\n    return hexToBytes(hex);\n  } catch (err) {\n    logDebugError('getWalletPublicKey', err);\n    return undefined;\n  }\n});\n\nexport function getJettonMinterData(network: ApiNetwork, address: string) {\n  const contract = getTonClient(network).open(new JettonMinter(Address.parse(address)));\n  return contract.getJettonData();\n}\n\nexport function oneCellFromBoc(bytes: Uint8Array) {\n  return Cell.fromBoc(Buffer.from(bytes));\n}\n\nexport function toBase64Address(address: Address | string, isBounceable = DEFAULT_IS_BOUNCEABLE, network?: ApiNetwork) {\n  if (typeof address === 'string') {\n    address = Address.parse(address);\n  }\n  return address.toString({\n    urlSafe: true,\n    bounceable: isBounceable,\n    testOnly: network === 'testnet',\n  });\n}\n\nexport function toRawAddress(address: Address | string) {\n  if (typeof address === 'string') {\n    address = Address.parse(address);\n  }\n  return address.toRawString();\n}\n\nexport function buildTokenTransferBody(params: TokenTransferBodyParams) {\n  const {\n    queryId, tokenAmount, toAddress, responseAddress, forwardAmount,\n  } = params;\n  let forwardPayload = params.forwardPayload;\n\n  let builder = new Builder()\n    .storeUint(JettonOpCode.Transfer, 32)\n    .storeUint(queryId || generateQueryId(), 64)\n    .storeCoins(tokenAmount)\n    .storeAddress(Address.parse(toAddress))\n    .storeAddress(Address.parse(responseAddress))\n    .storeBit(false)\n    .storeCoins(forwardAmount ?? 0n);\n\n  if (forwardPayload instanceof Uint8Array) {\n    const freeBytes = Math.round(builder.availableBits / 8);\n    forwardPayload = packBytesAsSnake(forwardPayload, freeBytes);\n  }\n\n  if (!forwardPayload) {\n    builder.storeBit(false);\n  } else if (typeof forwardPayload === 'string') {\n    builder = builder.storeBit(false)\n      .storeUint(0, 32)\n      .storeBuffer(Buffer.from(forwardPayload));\n  } else if (forwardPayload instanceof Uint8Array) {\n    builder = builder.storeBit(false)\n      .storeBuffer(Buffer.from(forwardPayload));\n  } else {\n    builder = builder.storeBit(true)\n      .storeRef(forwardPayload);\n  }\n\n  return builder.endCell();\n}\n\nexport function parseBase64(base64: string) {\n  try {\n    return Cell.fromBase64(base64);\n  } catch (err) {\n    logDebugError('parseBase64', err);\n    return Uint8Array.from(Buffer.from(base64, 'base64'));\n  }\n}\n\nexport function commentToBytes(comment: string): Uint8Array {\n  const buffer = Buffer.from(comment);\n  const bytes = new Uint8Array(buffer.length + 4);\n\n  const startBuffer = Buffer.alloc(4);\n  startBuffer.writeUInt32BE(OpCode.Comment);\n  bytes.set(startBuffer, 0);\n  bytes.set(buffer, 4);\n\n  return bytes;\n}\n\nexport function packBytesAsSnake(bytes: Uint8Array, maxBytes = TON_MAX_COMMENT_BYTES): Uint8Array | Cell {\n  const buffer = Buffer.from(bytes);\n  if (buffer.length <= maxBytes) {\n    return bytes;\n  }\n\n  return packBytesAsSnakeCell(bytes);\n}\n\nexport function packBytesAsSnakeCell(bytes: Uint8Array): Cell {\n  const buffer = Buffer.from(bytes);\n\n  const mainBuilder = new Builder();\n  let prevBuilder: Builder | undefined;\n  let currentBuilder = mainBuilder;\n\n  for (const [i, byte] of buffer.entries()) {\n    if (currentBuilder.availableBits < 8) {\n      prevBuilder?.storeRef(currentBuilder);\n\n      prevBuilder = currentBuilder;\n      currentBuilder = new Builder();\n    }\n\n    currentBuilder = currentBuilder.storeUint(byte, 8);\n\n    if (i === buffer.length - 1) {\n      prevBuilder?.storeRef(currentBuilder);\n    }\n  }\n\n  return mainBuilder.asCell();\n}\n\nfunction createNestedCell(data: Uint8Array, maxCellSize: number): Cell {\n  const builder = new Builder();\n  const dataSlice = Buffer.from(data.slice(0, maxCellSize));\n\n  builder.storeBuffer(dataSlice);\n\n  if (data.length > maxCellSize) {\n    const remainingData = data.slice(maxCellSize);\n    builder.storeRef(createNestedCell(remainingData, maxCellSize));\n  }\n\n  return builder.endCell();\n}\n\nexport function packBytesAsSnakeForEncryptedData(data: Uint8Array): Uint8Array | Cell {\n  const ROOT_BUILDER_BYTES = 39;\n  const MAX_CELLS_AMOUNT = 16;\n\n  const rootBuilder = new Builder();\n  rootBuilder.storeBuffer(Buffer.from(data.slice(0, Math.min(data.length, ROOT_BUILDER_BYTES))));\n\n  if (data.length > ROOT_BUILDER_BYTES + MAX_CELLS_AMOUNT * TON_MAX_COMMENT_BYTES) {\n    throw new Error('Input text is too long');\n  }\n\n  rootBuilder.storeRef(createNestedCell(Buffer.from(data.slice(ROOT_BUILDER_BYTES)), TON_MAX_COMMENT_BYTES));\n\n  return rootBuilder.endCell();\n}\n\nexport function buildLiquidStakingDepositBody(queryId?: number) {\n  return new Builder()\n    .storeUint(LiquidStakingOpCode.Deposit, 32)\n    .storeUint(queryId || 0, 64)\n    .asCell();\n}\n\nexport function buildLiquidStakingWithdrawBody(options: {\n  queryId?: number;\n  amount: bigint;\n  responseAddress: string;\n  waitTillRoundEnd?: boolean; // opposite of request_immediate_withdrawal\n  fillOrKill?: boolean;\n}) {\n  const {\n    queryId, amount, responseAddress, waitTillRoundEnd, fillOrKill,\n  } = options;\n\n  const customPayload = buildLiquidStakingWithdrawCustomPayload(waitTillRoundEnd, fillOrKill);\n\n  return new Builder()\n    .storeUint(JettonOpCode.Burn, 32)\n    .storeUint(queryId ?? 0, 64)\n    .storeCoins(amount)\n    .storeAddress(Address.parse(responseAddress))\n    .storeBit(1)\n    .storeRef(customPayload)\n    .asCell();\n}\n\nexport function buildLiquidStakingWithdrawCustomPayload(waitTillRoundEnd?: boolean, fillOrKill?: boolean) {\n  return new Builder()\n    .storeUint(Number(waitTillRoundEnd), 1)\n    .storeUint(Number(fillOrKill), 1)\n    .asCell();\n}\n\nexport function getTokenBalance(network: ApiNetwork, walletAddress: string) {\n  const tokenWallet = getTonClient(network).open(new JettonWallet(Address.parse(walletAddress)));\n  return tokenWallet.getJettonBalance();\n}\n\nexport function parseAddress(address: string): {\n  isValid: boolean;\n  isRaw?: boolean;\n  isUserFriendly?: boolean;\n  isBounceable?: boolean;\n  isTestOnly?: boolean;\n  address?: Address;\n} {\n  try {\n    if (Address.isRaw(address)) {\n      return {\n        address: Address.parseRaw(address),\n        isRaw: true,\n        isValid: true,\n      };\n    } else if (Address.isFriendly(address)) {\n      return {\n        ...Address.parseFriendly(address),\n        isUserFriendly: true,\n        isValid: true,\n      };\n    }\n  } catch (err) {\n    // Do nothing\n  }\n\n  return { isValid: false };\n}\n\nexport function getIsRawAddress(address: string) {\n  return Boolean(parseAddress(address).isRaw);\n}\n\nexport async function getDnsItemDomain(network: ApiNetwork, address: Address | string) {\n  if (typeof address === 'string') address = Address.parse(address);\n\n  const contract = getTonClient(network)\n    .open(new DnsItem(address));\n  const nftData = await contract.getNftData();\n  const collectionAddress = toBase64Address(nftData.collectionAddress, true);\n\n  const zone = Object.entries(DNS_ZONES_MAP)\n    .find(([, collection]) => collection === collectionAddress)?.[0] as ApiDnsZone | undefined;\n\n  const base = zone === '.t.me'\n    ? await contract.getTelemintDomain()\n    : await contract.getDomain();\n\n  return `${base}${zone}`;\n}\n","import type { ApiNetwork } from '../../../types';\nimport type { ApiTransactionExtra } from '../types';\n\nimport {\n  TONCOIN_SLUG,\n  TONHTTPAPI_V3_MAINNET_API_URL,\n  TONHTTPAPI_V3_TESTNET_API_URL,\n} from '../../../../config';\nimport { fetchJson } from '../../../../util/fetch';\nimport { omitUndefined, split } from '../../../../util/iteratees';\nimport { getEnvironment } from '../../../environment';\nimport { parseTxId, stringifyTxId } from './index';\nimport { toBase64Address } from './tonCore';\n\ntype AddressBook = Record<string, { user_friendly: string }>;\n\nconst ADDRESS_BOOK_CHUNK_SIZE = 128;\n\nexport async function fetchTransactions(\n  network: ApiNetwork,\n  address: string,\n  limit: number,\n  toTxId?: string,\n  fromTxId?: string,\n): Promise<ApiTransactionExtra[]> {\n  const fromLt = fromTxId ? parseTxId(fromTxId).lt.toString() : undefined;\n  const toLt = toTxId ? parseTxId(toTxId).lt.toString() : undefined;\n\n  const data: {\n    transactions: any[];\n    address_book: AddressBook;\n  } = await callApiV3(network, '/transactions', {\n    account: address,\n    limit,\n    start_lt: fromLt,\n    end_lt: toLt,\n    sort: 'desc',\n  });\n\n  let { transactions: rawTransactions } = data;\n  const { address_book: addressBook } = data;\n\n  if (!rawTransactions.length) {\n    return [];\n  }\n\n  if (limit > 1) {\n    if (fromLt && rawTransactions[rawTransactions.length - 1].lt === fromLt) {\n      rawTransactions.pop();\n    }\n\n    if (toLt && rawTransactions[0]?.lt === toLt) {\n      rawTransactions = rawTransactions.slice(1);\n    }\n  }\n\n  return rawTransactions\n    .map((rawTx) => parseRawTransaction(network, rawTx, addressBook))\n    .flat();\n}\n\nfunction parseRawTransaction(network: ApiNetwork, rawTx: any, addressBook: AddressBook): ApiTransactionExtra[] {\n  const {\n    now,\n    lt,\n    hash,\n    total_fees: fee,\n    description: {\n      compute_ph: {\n        exit_code: exitCode,\n      },\n    },\n  } = rawTx;\n\n  const txId = stringifyTxId({ lt, hash });\n  const timestamp = now as number * 1000;\n  const isIncoming = !!rawTx.in_msg.source;\n  const inMsgHash = rawTx.in_msg.hash;\n  const msgs: any[] = isIncoming ? [rawTx.in_msg] : rawTx.out_msgs;\n\n  if (!msgs.length) return [];\n\n  return msgs.map((msg, i) => {\n    const { source, destination, value } = msg;\n    const fromAddress = addressBook[source].user_friendly;\n    const toAddress = addressBook[destination].user_friendly;\n    const normalizedAddress = toBase64Address(isIncoming ? source : destination, true, network);\n\n    return omitUndefined({\n      txId: msgs.length > 1 ? `${txId}:${i + 1}` : txId,\n      timestamp,\n      isIncoming,\n      fromAddress,\n      toAddress,\n      amount: isIncoming ? BigInt(value) : -BigInt(value),\n      slug: TONCOIN_SLUG,\n      fee: BigInt(fee),\n      inMsgHash,\n      normalizedAddress,\n      shouldHide: exitCode ? true : undefined,\n      extraData: {\n        body: getRawBody(msg),\n      },\n    });\n  });\n}\n\nexport async function fetchLatestTxId(network: ApiNetwork, address: string): Promise<string | undefined> {\n  const { transactions }: { transactions: any[] } = await callApiV3(network, '/transactions', {\n    account: address,\n    limit: 1,\n    sort: 'desc',\n  });\n\n  if (!transactions.length) {\n    return undefined;\n  }\n\n  const { lt, hash } = transactions[0];\n\n  return stringifyTxId({ lt, hash });\n}\n\nfunction getRawBody(msg: any) {\n  if (!msg.message_content) return undefined;\n  return msg.message_content.body;\n}\n\nexport async function fetchAddressBook(network: ApiNetwork, addresses: string[]): Promise<AddressBook> {\n  const chunks = split(addresses, ADDRESS_BOOK_CHUNK_SIZE);\n\n  const results = await Promise.all(chunks.map((chunk) => {\n    return callApiV3(network, '/addressBook', {\n      address: chunk,\n    });\n  }));\n\n  return results.reduce((acc, value) => {\n    return Object.assign(acc, value);\n  }, {} as AddressBook);\n}\n\nexport async function fixAddressFormat(network: ApiNetwork, address: string): Promise<string> {\n  const result: { address_book: Record<string, string> } = await callApiV3(network, '/addressBook', { address });\n  return result.address_book[address];\n}\n\nfunction callApiV3(network: ApiNetwork, path: string, data?: AnyLiteral) {\n  const { apiHeaders, tonhttpapiMainnetKey, tonhttpapiTestnetKey } = getEnvironment();\n  const baseUrl = network === 'testnet' ? TONHTTPAPI_V3_TESTNET_API_URL : TONHTTPAPI_V3_MAINNET_API_URL;\n  const apiKey = network === 'testnet' ? tonhttpapiTestnetKey : tonhttpapiMainnetKey;\n\n  return fetchJson(`${baseUrl}${path}`, data, {\n    headers: {\n      ...(apiKey && { 'X-Api-Key': apiKey }),\n      ...apiHeaders,\n    },\n  });\n}\n","import { Api, HttpClient } from 'tonapi-sdk-js';\n\nimport type { ApiNetwork } from '../../../types';\n\nimport { TONAPIIO_MAINNET_URL, TONAPIIO_TESTNET_URL } from '../../../../config';\nimport { fetchWithRetry } from '../../../../util/fetch';\nimport { getEnvironment } from '../../../environment';\n\nconst MAX_LIMIT = 500;\nconst EVENTS_LIMIT = 100;\n\nlet apiByNetwork: Record<ApiNetwork, Api<unknown>> | undefined;\n\nfunction getApi(network: ApiNetwork) {\n  if (!apiByNetwork) {\n    const headers = {\n      ...getEnvironment().apiHeaders,\n      'Content-Type': 'application/json',\n    };\n\n    apiByNetwork = {\n      mainnet: new Api(new HttpClient({\n        baseUrl: TONAPIIO_MAINNET_URL,\n        baseApiParams: { headers },\n        customFetch: fetchWithRetry as typeof fetch,\n      })),\n      testnet: new Api(new HttpClient({\n        baseUrl: TONAPIIO_TESTNET_URL,\n        baseApiParams: { headers },\n        customFetch: fetchWithRetry as typeof fetch,\n      })),\n    };\n  }\n\n  return apiByNetwork[network];\n}\n\nexport async function fetchJettonBalances(network: ApiNetwork, account: string) {\n  return (await getApi(network).accounts.getAccountJettonsBalances(account)).balances;\n}\n\nexport async function fetchNftItems(network: ApiNetwork, addresses: string[]) {\n  return (await getApi(network).nft.getNftItemsByAddresses({\n    account_ids: addresses,\n  })).nft_items;\n}\n\nexport async function fetchAccountNfts(network: ApiNetwork, address: string, options?: {\n  collection?: string;\n  offset?: number;\n  limit?: number;\n}) {\n  const { collection, offset, limit } = options ?? {};\n\n  return (await getApi(network).accounts.getAccountNftItems(\n    address,\n    {\n      offset: offset ?? 0,\n      limit: limit ?? MAX_LIMIT,\n      indirect_ownership: true,\n      collection,\n    },\n  )).nft_items;\n}\n\nexport async function fetchAccountEvents(network: ApiNetwork, address: string, fromSec: number, limit?: number) {\n  return (await getApi(network).accounts.getAccountEvents(address, {\n    limit: limit ?? EVENTS_LIMIT,\n    start_date: fromSec,\n  })).events;\n}\n","import type { NftItem } from 'tonapi-sdk-js';\nimport type { DictionaryValue } from '@ton/core';\nimport { BitReader } from '@ton/core/dist/boc/BitReader';\nimport { BitString } from '@ton/core/dist/boc/BitString';\nimport { Builder } from '@ton/core/dist/boc/Builder';\nimport { Cell } from '@ton/core/dist/boc/Cell';\nimport { Slice } from '@ton/core/dist/boc/Slice';\nimport { Dictionary } from '@ton/core/dist/dict/Dictionary';\n\nimport type { ApiNetwork, ApiNft, ApiParsedPayload } from '../../../types';\nimport type { DnsCategory } from '../constants';\nimport type { ApiTransactionExtra, JettonMetadata } from '../types';\n\nimport {\n  DEBUG,\n  LIQUID_JETTON,\n  NFT_FRAGMENT_COLLECTIONS,\n} from '../../../../config';\nimport { pick, range } from '../../../../util/iteratees';\nimport { logDebugError } from '../../../../util/logs';\nimport { fetchJsonMetadata, fixIpfsUrl } from '../../../../util/metadata';\nimport { checkHasScamLink, checkIsTrustedCollection } from '../../../common/addresses';\nimport { base64ToString, sha256 } from '../../../common/utils';\nimport {\n  DNS_CATEGORY_HASH_MAP,\n  DnsOpCode,\n  JettonOpCode,\n  LiquidStakingOpCode,\n  NftOpCode,\n  OpCode,\n  OtherOpCode,\n  SingleNominatorOpCode,\n  VestingV1OpCode,\n} from '../constants';\nimport { fixAddressFormat } from './apiV3';\nimport { buildTokenSlug } from './index';\nimport { fetchNftItems } from './tonapiio';\nimport {\n  getDnsItemDomain, getJettonMinterData, resolveTokenMinterAddress, toBase64Address,\n} from './tonCore';\n\nconst OFFCHAIN_CONTENT_PREFIX = 0x01;\nconst SNAKE_PREFIX = 0x00;\n\nexport function parseJettonWalletMsgBody(network: ApiNetwork, body?: string) {\n  if (!body) return undefined;\n\n  try {\n    let slice = Cell.fromBase64(body).beginParse();\n    const opCode = slice.loadUint(32);\n    const queryId = slice.loadUint(64);\n\n    if (opCode !== JettonOpCode.Transfer && opCode !== JettonOpCode.InternalTransfer) {\n      return undefined;\n    }\n\n    const jettonAmount = slice.loadCoins();\n    const address = slice.loadMaybeAddress();\n    const responseAddress = slice.loadMaybeAddress();\n    let forwardAmount: bigint | undefined;\n    let comment: string | undefined;\n    let encryptedComment: string | undefined;\n\n    if (responseAddress) {\n      if (opCode === JettonOpCode.Transfer) {\n        slice.loadBit();\n      }\n      forwardAmount = slice.loadCoins();\n      const isSeparateCell = slice.remainingBits && slice.loadBit();\n      if (isSeparateCell && slice.remainingRefs) {\n        slice = slice.loadRef().beginParse();\n      }\n      if (slice.remainingBits > 32) {\n        const forwardOpCode = slice.loadUint(32);\n        if (forwardOpCode === OpCode.Comment) {\n          const buffer = readSnakeBytes(slice);\n          comment = buffer.toString('utf-8');\n        } else if (forwardOpCode === OpCode.Encrypted) {\n          const buffer = readSnakeBytes(slice);\n          encryptedComment = buffer.toString('base64');\n        }\n      }\n    }\n\n    return {\n      operation: JettonOpCode[opCode] as keyof typeof JettonOpCode,\n      queryId,\n      jettonAmount,\n      responseAddress,\n      address: address ? toBase64Address(address, undefined, network) : undefined,\n      forwardAmount,\n      comment,\n      encryptedComment,\n    };\n  } catch (err) {\n    logDebugError('parseJettonWalletMsgBody', err);\n  }\n\n  return undefined;\n}\n\nexport function fixBase64ImageData(data: string) {\n  const decodedData = base64ToString(data);\n  if (decodedData.includes('<svg')) {\n    return `data:image/svg+xml;base64,${data}`;\n  }\n  return `data:image/png;base64,${data}`;\n}\n\nconst dictSnakeBufferValue: DictionaryValue<Buffer> = {\n  parse: (slice) => {\n    const buffer = Buffer.from('');\n\n    const sliceToVal = (s: Slice, v: Buffer, isFirst: boolean) => {\n      if (isFirst && s.loadUint(8) !== SNAKE_PREFIX) {\n        throw new Error('Only snake format is supported');\n      }\n\n      v = Buffer.concat([v, s.loadBuffer(s.remainingBits / 8)]);\n      if (s.remainingRefs === 1) {\n        v = sliceToVal(s.loadRef().beginParse(), v, false);\n      }\n\n      return v;\n    };\n\n    return sliceToVal(slice.loadRef().beginParse() as any, buffer, true);\n  },\n  serialize: () => {\n    // pass\n  },\n};\n\nconst jettonOnChainMetadataSpec: {\n  [key in keyof JettonMetadata]: 'utf8' | 'ascii' | undefined;\n} = {\n  uri: 'ascii',\n  name: 'utf8',\n  description: 'utf8',\n  image: 'ascii',\n  symbol: 'utf8',\n  decimals: 'utf8',\n};\n\nexport async function fetchJettonMetadata(network: ApiNetwork, address: string) {\n  const { content } = await getJettonMinterData(network, address);\n\n  let metadata: JettonMetadata;\n\n  const slice = content.asSlice();\n  const prefix = slice.loadUint(8);\n\n  if (prefix === OFFCHAIN_CONTENT_PREFIX) {\n    const bytes = readSnakeBytes(slice);\n    const contentUri = bytes.toString('utf-8');\n    metadata = await fetchJettonOffchainMetadata(contentUri);\n  } else {\n    // On-chain content\n    metadata = await parseJettonOnchainMetadata(slice);\n    if (metadata.uri) {\n      // Semi-chain content\n      const offchainMetadata = await fetchJettonOffchainMetadata(metadata.uri);\n      metadata = { ...offchainMetadata, ...metadata };\n    }\n  }\n\n  return metadata;\n}\n\nexport async function parseJettonOnchainMetadata(slice: Slice): Promise<JettonMetadata> {\n  const dict = slice.loadDict(Dictionary.Keys.Buffer(32), dictSnakeBufferValue);\n\n  const res: { [s in keyof JettonMetadata]?: string } = {};\n\n  for (const [key, value] of Object.entries(jettonOnChainMetadataSpec)) {\n    const sha256Key = Buffer.from(await sha256(Buffer.from(key, 'ascii')));\n    const val = dict.get(sha256Key)?.toString(value);\n\n    if (val) {\n      res[key as keyof JettonMetadata] = val;\n    }\n  }\n\n  return res as JettonMetadata;\n}\n\nexport async function fetchJettonOffchainMetadata(uri: string): Promise<JettonMetadata> {\n  const metadata = await fetchJsonMetadata(uri);\n  return pick(metadata, ['name', 'description', 'symbol', 'decimals', 'image', 'image_data']);\n}\n\nexport async function parseWalletTransactionBody(\n  network: ApiNetwork, transaction: ApiTransactionExtra,\n): Promise<ApiTransactionExtra> {\n  const body = transaction.extraData?.body;\n  if (!body || transaction.comment || transaction.encryptedComment) {\n    return transaction;\n  }\n\n  try {\n    const slice = dataToSlice(body);\n\n    if (slice.remainingBits > 32) {\n      const address = transaction.isIncoming ? transaction.fromAddress : transaction.toAddress;\n\n      const parsedPayload = await parsePayloadSlice(\n        network, address, slice, false, transaction,\n      );\n      transaction.extraData!.parsedPayload = parsedPayload;\n\n      if (parsedPayload?.type === 'comment') {\n        transaction = {\n          ...transaction,\n          comment: parsedPayload.comment,\n        };\n      } else if (parsedPayload?.type === 'encrypted-comment') {\n        transaction = {\n          ...transaction,\n          encryptedComment: parsedPayload.encryptedComment,\n        };\n      }\n    }\n  } catch (err) {\n    logDebugError('parseTransactionBody', err);\n  }\n\n  return transaction;\n}\n\nexport async function parsePayloadBase64(\n  network: ApiNetwork,\n  address: string,\n  base64: string,\n): Promise<ApiParsedPayload> {\n  const slice = dataToSlice(base64);\n  const result: ApiParsedPayload = { type: 'unknown', base64 };\n\n  if (!slice) return result;\n\n  return await parsePayloadSlice(network, address, slice, true) ?? result;\n}\n\nexport async function parsePayloadSlice(\n  network: ApiNetwork,\n  address: string,\n  slice: Slice,\n  shouldLoadItems?: boolean,\n  transactionDebug?: ApiTransactionExtra,\n): Promise<ApiParsedPayload | undefined> {\n  let opCode: number | undefined;\n  try {\n    opCode = slice.loadUint(32);\n\n    if (opCode === OpCode.Comment) {\n      const buffer = readSnakeBytes(slice);\n      const comment = buffer.toString('utf-8');\n      return { type: 'comment', comment };\n    } else if (opCode === OpCode.Encrypted) {\n      const buffer = readSnakeBytes(slice);\n      const encryptedComment = buffer.toString('base64');\n      return { type: 'encrypted-comment', encryptedComment };\n    } else if (slice.remainingBits < 64) {\n      return undefined;\n    }\n\n    const queryId = slice.loadUintBig(64);\n\n    switch (opCode) {\n      case JettonOpCode.Transfer: {\n        const minterAddress = await resolveTokenMinterAddress(network, address);\n        const slug = buildTokenSlug(minterAddress);\n\n        const amount = slice.loadCoins();\n        const destination = slice.loadAddress();\n        const responseDestination = slice.loadMaybeAddress();\n\n        if (!responseDestination) {\n          return {\n            type: 'tokens:transfer-non-standard',\n            queryId,\n            destination: toBase64Address(destination, undefined, network),\n            amount,\n            slug,\n          };\n        }\n\n        const customPayload = slice.loadMaybeRef();\n        const forwardAmount = slice.loadCoins();\n        let forwardPayload = slice.loadMaybeRef();\n        if (!forwardPayload && slice.remainingBits) {\n          const builder = new Builder().storeBits(slice.loadBits(slice.remainingBits));\n          range(0, slice.remainingRefs).forEach(() => {\n            builder.storeRef(slice.loadRef());\n          });\n          forwardPayload = builder.endCell();\n        }\n\n        return {\n          type: 'tokens:transfer',\n          queryId,\n          amount,\n          destination: toBase64Address(destination, undefined, network),\n          responseDestination: toBase64Address(responseDestination, undefined, network),\n          customPayload: customPayload?.toBoc().toString('base64'),\n          forwardAmount,\n          forwardPayload: forwardPayload?.toBoc().toString('base64'),\n          slug,\n        };\n      }\n      case NftOpCode.TransferOwnership: {\n        const newOwner = slice.loadAddress();\n        const responseDestination = slice.loadAddress();\n        const customPayload = slice.loadMaybeRef();\n        const forwardAmount = slice.loadCoins();\n        const forwardPayload = readForwardPayloadCell(slice);\n        const comment = forwardPayload ? readComment(forwardPayload.asSlice()) : undefined;\n\n        let nft: ApiNft | undefined;\n        if (shouldLoadItems) {\n          const [rawNft] = await fetchNftItems(network, [address]);\n          if (rawNft) {\n            nft = buildNft(network, rawNft);\n          }\n        }\n\n        return {\n          type: 'nft:transfer',\n          queryId,\n          newOwner: toBase64Address(newOwner, undefined, network),\n          responseDestination: toBase64Address(responseDestination, undefined, network),\n          customPayload: customPayload?.toBoc().toString('base64'),\n          forwardAmount,\n          forwardPayload: forwardPayload?.toBoc().toString('base64'),\n          nftAddress: address,\n          nftName: nft?.name,\n          nft,\n          comment,\n        };\n      }\n      case NftOpCode.OwnershipAssigned: {\n        const prevOwner = slice.loadAddress();\n        const forwardPayload = readForwardPayloadCell(slice);\n        const comment = forwardPayload ? readComment(forwardPayload.asSlice()) : undefined;\n\n        let nft: ApiNft | undefined;\n        if (shouldLoadItems) {\n          const [rawNft] = await fetchNftItems(network, [address]);\n          if (rawNft) {\n            nft = buildNft(network, rawNft);\n          }\n        }\n\n        return {\n          type: 'nft:ownership-assigned',\n          queryId,\n          prevOwner: toBase64Address(prevOwner, undefined, network),\n          comment,\n          nftAddress: address,\n          nft,\n        };\n      }\n      case JettonOpCode.Burn: {\n        const minterAddress = await resolveTokenMinterAddress(network, address);\n        const slug = buildTokenSlug(minterAddress);\n\n        const amount = slice.loadCoins();\n        const addressObj = slice.loadAddress();\n        const customPayload = slice.loadMaybeRef();\n        const isLiquidUnstakeRequest = minterAddress === LIQUID_JETTON;\n\n        return {\n          type: 'tokens:burn',\n          queryId,\n          amount,\n          address: toBase64Address(addressObj, undefined, network),\n          customPayload: customPayload?.toBoc().toString('base64'),\n          slug,\n          isLiquidUnstakeRequest,\n        };\n      }\n      case LiquidStakingOpCode.DistributedAsset: {\n        return {\n          type: 'liquid-staking:withdrawal-nft',\n          queryId,\n        };\n      }\n      case LiquidStakingOpCode.Withdrawal: {\n        return {\n          type: 'liquid-staking:withdrawal',\n          queryId,\n        };\n      }\n      case LiquidStakingOpCode.Deposit: {\n        let appId: bigint | undefined;\n        if (slice.remainingBits > 0) {\n          appId = slice.loadUintBig(64);\n        }\n        return {\n          type: 'liquid-staking:deposit',\n          queryId,\n          appId,\n        };\n      }\n      case VestingV1OpCode.AddWhitelist: {\n        const toAddress = slice.loadAddress();\n        const addressString = shouldLoadItems\n          ? await fixAddressFormat(network, toAddress.toRawString())\n          : '';\n\n        return {\n          type: 'vesting:add-whitelist',\n          queryId,\n          address: addressString,\n        };\n      }\n      case SingleNominatorOpCode.Withdraw: {\n        const amount = slice.loadCoins();\n        return {\n          type: 'single-nominator:withdraw',\n          queryId,\n          amount,\n        };\n      }\n      case SingleNominatorOpCode.ChangeValidator: {\n        const toAddress = slice.loadAddress();\n        const addressString = shouldLoadItems\n          ? await fixAddressFormat(network, toAddress.toRawString())\n          : '';\n\n        return {\n          type: 'single-nominator:change-validator',\n          queryId,\n          address: addressString,\n        };\n      }\n      case LiquidStakingOpCode.Vote: {\n        const votingAddress = slice.loadAddress();\n        const expirationDate = slice.loadUint(48);\n        const vote = slice.loadBit();\n        const needConfirmation = slice.loadBit();\n\n        return {\n          type: 'liquid-staking:vote',\n          queryId,\n          votingAddress: toBase64Address(votingAddress, true),\n          expirationDate,\n          vote,\n          needConfirmation,\n        };\n      }\n      case DnsOpCode.ChangeRecord: {\n        const hash = slice.loadBuffer(32).toString('hex');\n        const category = Object.entries(DNS_CATEGORY_HASH_MAP)\n          .find(([, value]) => hash === value)?.[0] as DnsCategory ?? 'unknown';\n        const toAddress = slice.loadAddress();\n        const domain = shouldLoadItems\n          ? await getDnsItemDomain(network, toAddress)\n          : '';\n\n        if (category === 'wallet') {\n          if (slice.remainingRefs > 0) {\n            const dataSlice = slice.loadRef().beginParse();\n            slice.endParse();\n\n            const dataAddress = dataSlice.loadAddress();\n            const flags = dataSlice.loadUint(8);\n\n            const addressString = shouldLoadItems\n              ? await fixAddressFormat(network, dataAddress.toRawString())\n              : '';\n\n            return {\n              type: 'dns:change-record',\n              queryId,\n              record: {\n                type: 'wallet',\n                value: addressString,\n                flags,\n              },\n              domain,\n            };\n          } else {\n            return {\n              type: 'dns:change-record',\n              queryId,\n              record: {\n                type: 'wallet',\n                value: undefined,\n              },\n              domain,\n            };\n          }\n        } else if (slice.remainingRefs > 0) {\n          const value = slice.loadRef();\n          return {\n            type: 'dns:change-record',\n            queryId,\n            record: category === 'unknown' ? {\n              type: 'unknown',\n              key: hash,\n              value: value.toBoc().toString('base64'),\n            } : {\n              type: category,\n              value: value.toBoc().toString('base64'),\n            },\n            domain,\n          };\n        } else {\n          return {\n            type: 'dns:change-record',\n            queryId,\n            record: category === 'unknown' ? {\n              type: 'unknown',\n              key: hash,\n            } : {\n              type: category,\n            },\n            domain,\n          };\n        }\n      }\n      case OtherOpCode.TokenBridgePaySwap: {\n        const swapId = slice.loadBuffer(32).toString('hex');\n        return {\n          type: 'token-bridge:pay-swap',\n          queryId,\n          swapId,\n        };\n      }\n    }\n  } catch (err) {\n    if (DEBUG) {\n      const debugTxString = transactionDebug\n        && `${transactionDebug.txId} ${new Date(transactionDebug.timestamp)}`;\n      const opCodeHex = `0x${opCode?.toString(16).padStart(8, '0')}`;\n      logDebugError('parsePayload', opCodeHex, debugTxString, '\\n', err);\n    }\n  }\n\n  return undefined;\n}\n\nfunction dataToSlice(data: string | Buffer | Uint8Array): Slice {\n  let buffer: Buffer;\n  if (typeof data === 'string') {\n    buffer = Buffer.from(data, 'base64');\n  } else if (data instanceof Buffer) {\n    buffer = data;\n  } else {\n    buffer = Buffer.from(data);\n  }\n\n  try {\n    return Cell.fromBoc(buffer)[0].beginParse();\n  } catch (err: any) {\n    if (err?.message !== 'Invalid magic') {\n      throw err;\n    }\n  }\n\n  return new Slice(new BitReader(new BitString(buffer, 0, buffer.length * 8)), []);\n}\n\nfunction readComment(slice: Slice) {\n  if (slice.remainingBits < 32) {\n    return undefined;\n  }\n\n  const opCode = slice.loadUint(32);\n  if (opCode !== OpCode.Comment || (!slice.remainingBits && !slice.remainingRefs)) {\n    return undefined;\n  }\n\n  const buffer = readSnakeBytes(slice);\n  return buffer.toString('utf-8');\n}\n\nfunction readForwardPayloadCell(slice: Slice) {\n  let forwardPayload = slice.loadBit() && slice.remainingRefs ? slice.loadRef() : undefined;\n\n  if (!forwardPayload && slice.remainingBits) {\n    const builder = new Builder().storeBits(slice.loadBits(slice.remainingBits));\n    range(0, slice.remainingRefs).forEach(() => {\n      builder.storeRef(slice.loadRef());\n    });\n    forwardPayload = builder.endCell();\n  }\n\n  return forwardPayload ?? undefined;\n}\n\nexport function readSnakeBytes(slice: Slice) {\n  let buffer = Buffer.alloc(0);\n\n  while (slice.remainingBits >= 8) {\n    buffer = Buffer.concat([buffer, slice.loadBuffer(slice.remainingBits / 8)]);\n    if (slice.remainingRefs) {\n      slice = slice.loadRef().beginParse();\n    } else {\n      break;\n    }\n  }\n\n  return buffer;\n}\n\nexport function buildNft(network: ApiNetwork, rawNft: NftItem): ApiNft | undefined {\n  if (!rawNft.metadata) {\n    return undefined;\n  }\n\n  try {\n    const {\n      address,\n      index,\n      collection,\n      metadata,\n      previews,\n      sale,\n      trust,\n    } = rawNft;\n\n    const {\n      name, image, description, render_type: renderType,\n    } = metadata as {\n      name?: string;\n      image?: string;\n      description?: string;\n      render_type?: string;\n    };\n\n    const collectionAddress = collection && toBase64Address(collection.address, true, network);\n    let hasScamLink = false;\n\n    if (!collectionAddress || !checkIsTrustedCollection(collectionAddress)) {\n      for (const text of [name, description].filter(Boolean)) {\n        if (checkHasScamLink(text)) {\n          hasScamLink = true;\n        }\n      }\n    }\n\n    const isScam = hasScamLink || description === 'SCAM' || trust === 'blacklist';\n    const isHidden = renderType === 'hidden' || isScam;\n    const imageFromPreview = previews!.find((x) => x.resolution === '1500x1500')!.url;\n\n    return {\n      index,\n      name,\n      address: toBase64Address(address, true, network),\n      image: fixIpfsUrl(imageFromPreview || image || ''),\n      thumbnail: previews!.find((x) => x.resolution === '500x500')!.url,\n      isOnSale: Boolean(sale),\n      isHidden,\n      isScam,\n      description,\n      ...(collection && {\n        collectionAddress: toBase64Address(collection.address, true, network),\n        collectionName: collection.name,\n        isOnFragment: NFT_FRAGMENT_COLLECTIONS.has(collection.address),\n      }),\n    };\n  } catch (err) {\n    logDebugError('buildNft', err);\n    return undefined;\n  }\n}\n","import type { ApiActivity } from '../api/types';\n\nexport function compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  let value = a.timestamp - b.timestamp;\n  if (value === 0) {\n    value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n  }\n  return isAsc ? value : -value;\n}\n","// This JS library implements TON message comment encryption and decryption for Web\n// Reference C++ code - SimpleEncryptionV2 - https://github.com/ton-blockchain/ton/blob/cc0eb453cb3bf69f92693160103d33112856c056/tonlib/tonlib/keys/SimpleEncryption.cpp#L110\n// Dependencies:\n// - TonWeb 0.0.60\n// - aes-js - 3.1.2 - https://github.com/ricmoo/aes-js/releases/tag/v3.1.2 - for aes-cbc without padding\n// - noble-ed25519 - 1.7.3 - // https://github.com/paulmillr/noble-ed25519/releases/tag/1.7.3 - for getSharedKey\n\nimport type { Address } from '@ton/core';\n\nimport { OpCode } from '../constants';\nimport { toBase64Address } from './tonCore';\n\nconst ed25519 = require('../../../../lib/noble-ed25519');\nconst aesjs = require('../../../../lib/aes-js');\n\nasync function hmacSha512(key: Uint8Array, data: Uint8Array): Promise<Uint8Array> {\n  const hmacAlgo = { name: 'HMAC', hash: 'SHA-512' };\n  const hmacKey = await crypto.subtle.importKey('raw', key, hmacAlgo, false, ['sign']);\n  const signature = await crypto.subtle.sign(hmacAlgo, hmacKey, data);\n  const result = new Uint8Array(signature);\n  if (result.length !== 512 / 8) throw new Error();\n  return result;\n}\n\nfunction getAesCbcState(hash: Uint8Array): Promise<any> {\n  if (hash.length < 48) throw new Error();\n  const key = hash.slice(0, 32);\n  const iv = hash.slice(32, 32 + 16);\n\n  // Note that native crypto.subtle AES-CBC not suitable here because\n  // even if the data IS a multiple of 16 bytes, padding will still be added\n  // So we use aes-js\n\n  // eslint-disable-next-line new-cap\n  return new aesjs.ModeOfOperation.cbc(key, iv);\n}\n\nfunction getRandomPrefix(dataLength: number, minPadding: number): Uint8Array {\n  // eslint-disable-next-line no-bitwise\n  const prefixLength = ((minPadding + 15 + dataLength) & -16) - dataLength;\n  const prefix = crypto.getRandomValues(new Uint8Array(prefixLength));\n  prefix[0] = prefixLength;\n  if ((prefixLength + dataLength) % 16 !== 0) throw new Error();\n  return prefix;\n}\n\nfunction combineSecrets(a: Uint8Array, b: Uint8Array) {\n  return hmacSha512(a, b);\n}\n\nasync function encryptDataWithPrefix(data: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array) {\n  if (data.length % 16 !== 0) throw new Error();\n  const dataHash = await combineSecrets(salt, data);\n  const msgKey = dataHash.slice(0, 16);\n\n  const res = new Uint8Array(data.length + 16);\n  res.set(msgKey, 0);\n\n  const cbcStateSecret = await combineSecrets(sharedSecret, msgKey);\n  const encrypted = (await getAesCbcState(cbcStateSecret)).encrypt(data);\n  res.set(encrypted, 16);\n\n  return res;\n}\n\nasync function encryptDataImpl(data: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array) {\n  const prefix = await getRandomPrefix(data.length, 16);\n  const combined = new Uint8Array(prefix.length + data.length);\n  combined.set(prefix, 0);\n  combined.set(data, prefix.length);\n  return encryptDataWithPrefix(combined, sharedSecret, salt);\n}\n\nexport async function encryptData(\n  data: Uint8Array, myPublicKey: Uint8Array, theirPublicKey: Uint8Array, privateKey: Uint8Array, salt: Uint8Array,\n) {\n  const sharedSecret = await ed25519.getSharedSecret(privateKey, theirPublicKey);\n\n  const encrypted = await encryptDataImpl(data, sharedSecret, salt);\n  const prefixedEncrypted = new Uint8Array(myPublicKey.length + encrypted.length);\n  for (let i = 0; i < myPublicKey.length; i++) {\n    // eslint-disable-next-line no-bitwise\n    prefixedEncrypted[i] = theirPublicKey[i] ^ myPublicKey[i];\n  }\n  prefixedEncrypted.set(encrypted, myPublicKey.length);\n  return prefixedEncrypted;\n}\n\nexport async function encryptMessageComment(\n  comment: string,\n  myPublicKey: Uint8Array,\n  theirPublicKey: Uint8Array,\n  myPrivateKey: Uint8Array,\n  senderAddress: Address | string,\n) {\n  if (!comment || !comment.length) throw new Error('empty comment');\n\n  if (myPrivateKey.length === 64) {\n    myPrivateKey = myPrivateKey.slice(0, 32); // convert nacl private key\n  }\n\n  const commentBytes = new TextEncoder().encode(comment);\n\n  const salt = new TextEncoder().encode(toBase64Address(senderAddress, true));\n\n  const encryptedBytes = await encryptData(commentBytes, myPublicKey, theirPublicKey, myPrivateKey, salt);\n\n  const payload = new Uint8Array(encryptedBytes.length + 4);\n\n  const buffer = Buffer.alloc(4);\n  buffer.writeUInt32BE(OpCode.Encrypted);\n\n  payload.set(buffer, 0);\n  payload.set(encryptedBytes, 4);\n\n  return payload;\n}\n\nasync function doDecrypt(\n  cbcStateSecret: Uint8Array, msgKey: Uint8Array, encryptedData: Uint8Array, salt: Uint8Array,\n): Promise<Uint8Array> {\n  const decryptedData = (await getAesCbcState(cbcStateSecret)).decrypt(encryptedData);\n  const dataHash = await combineSecrets(salt, decryptedData);\n  const gotMsgKey = dataHash.slice(0, 16);\n  if (msgKey.join(',') !== gotMsgKey.join(',')) {\n    throw new Error('Failed to decrypt: hash mismatch');\n  }\n  const prefixLength = decryptedData[0];\n  if (prefixLength > decryptedData.length || prefixLength < 16) {\n    throw new Error('Failed to decrypt: invalid prefix size');\n  }\n  return decryptedData.slice(prefixLength);\n}\n\nasync function decryptDataImpl(\n  encryptedData: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array,\n): Promise<Uint8Array> {\n  if (encryptedData.length < 16) throw new Error('Failed to decrypt: data is too small');\n  if (encryptedData.length % 16 !== 0) throw new Error('Failed to decrypt: data size is not divisible by 16');\n  const msgKey = encryptedData.slice(0, 16);\n  const data = encryptedData.slice(16);\n  const cbcStateSecret = await combineSecrets(sharedSecret, msgKey);\n  const res = await doDecrypt(cbcStateSecret, msgKey, data, salt);\n  return res;\n}\n\nexport async function decryptData(data: Uint8Array, publicKey: Uint8Array, privateKey: Uint8Array, salt: Uint8Array) {\n  if (data.length < publicKey.length) {\n    throw new Error('Failed to decrypt: data is too small');\n  }\n  const theirPublicKey = new Uint8Array(publicKey.length);\n  for (let i = 0; i < publicKey.length; i++) {\n    // eslint-disable-next-line no-bitwise\n    theirPublicKey[i] = data[i] ^ publicKey[i];\n  }\n  const sharedSecret = await ed25519.getSharedSecret(privateKey, theirPublicKey);\n\n  const decrypted = await decryptDataImpl(data.slice(publicKey.length), sharedSecret, salt);\n  return decrypted;\n}\n\nexport async function decryptMessageComment(\n  encryptedData: Uint8Array, myPublicKey: Uint8Array, myPrivateKey: Uint8Array, senderAddress: Address | string,\n) {\n  if (myPrivateKey.length === 64) {\n    myPrivateKey = myPrivateKey.slice(0, 32); // convert nacl private key\n  }\n\n  const salt = new TextEncoder().encode(toBase64Address(senderAddress, true));\n\n  const decryptedBytes = await decryptData(encryptedData, myPublicKey, myPrivateKey, salt);\n  return new TextDecoder().decode(decryptedBytes);\n}\n","import { callBackendPost } from '../../../common/backend';\n\nconst DIESEL_URL = '/diesel';\n\nexport function dieselSendBoc(boc: string) {\n  return callBackendPost(`${DIESEL_URL}/sendBoc`, { boc });\n}\n","import type { Cell } from '@ton/core';\nimport { beginCell, external, storeMessage } from '@ton/core';\n\nimport type { TonClient } from './TonClient';\nimport type { TonWallet } from './tonCore';\n\nimport { dieselSendBoc } from './diesel';\n\nexport async function sendExternal(\n  client: TonClient,\n  wallet: TonWallet,\n  message: Cell,\n  withDiesel?: boolean,\n) {\n  const {\n    address,\n    init,\n  } = wallet;\n\n  let neededInit: { data: Cell; code: Cell } | undefined;\n  if (init && !await client.isContractDeployed(address)) {\n    neededInit = init;\n  }\n\n  const ext = external({\n    to: address,\n    init: neededInit ? {\n      code: neededInit.code,\n      data: neededInit.data,\n    } : undefined,\n    body: message,\n  });\n\n  const cell = beginCell()\n    .store(storeMessage(ext))\n    .endCell();\n\n  const msgHash = cell.hash().toString('base64');\n  const boc = cell.toBoc().toString('base64');\n\n  if (withDiesel) {\n    await dieselSendBoc(boc);\n  } else {\n    await client.sendFile(boc);\n  }\n\n  return {\n    boc,\n    msgHash,\n  };\n}\n","export function areDeepEqual<T extends any>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","export function assert(condition: boolean, message?: string) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n","import type blockchains from '../blockchains';\nimport type { ApiTransactionExtra } from '../blockchains/ton/types';\nimport type { ApiDbSseConnection } from '../db';\nimport type { StorageKey } from '../storages/types';\nimport type {\n  AccountIdParsed,\n  ApiAccount,\n  ApiLocalTransactionParams,\n  ApiTransaction,\n  ApiTransactionActivity,\n  OnApiUpdate,\n} from '../types';\n\nimport { IS_CAPACITOR, IS_EXTENSION, MAIN_ACCOUNT_ID } from '../../config';\nimport { buildAccountId, parseAccountId } from '../../util/account';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { assert } from '../../util/assert';\nimport { logDebugError } from '../../util/logs';\nimport { toBase64Address } from '../blockchains/ton/util/tonCore';\nimport { getEnvironment } from '../environment';\nimport { storage } from '../storages';\nimport capacitorStorage from '../storages/capacitorStorage';\nimport idbStorage from '../storages/idb';\nimport {\n  checkHasScamLink, checkHasTelegramBotMention, getKnownAddresses, getScamMarkers,\n} from './addresses';\nimport { hexToBytes } from './utils';\n\nlet localCounter = 0;\nconst getNextLocalId = () => `${Date.now()}|${localCounter++}`;\n\nconst actualStateVersion = 16;\nlet migrationEnsurePromise: Promise<void>;\n\nexport function resolveBlockchainKey(accountId: string) {\n  return parseAccountId(accountId).blockchain;\n}\n\nexport function toInternalAccountId(accountId: string) {\n  return buildInternalAccountId(parseAccountId(accountId));\n}\n\nexport function buildInternalAccountId(account: Omit<AccountIdParsed, 'network'>) {\n  const { id, blockchain } = account;\n  return `${id}-${blockchain}`;\n}\n\nexport function buildLocalTransaction(\n  params: ApiLocalTransactionParams,\n  normalizedAddress: string,\n): ApiTransactionActivity {\n  const { amount, ...restParams } = params;\n\n  const transaction: ApiTransaction = updateTransactionMetadata({\n    ...restParams,\n    txId: getNextLocalId(),\n    timestamp: Date.now(),\n    isIncoming: false,\n    amount: -amount,\n    normalizedAddress,\n    extraData: {},\n  });\n\n  return {\n    ...transaction,\n    id: transaction.txId,\n    kind: 'transaction',\n  };\n}\n\nexport function updateTransactionMetadata(transaction: ApiTransactionExtra): ApiTransactionExtra {\n  const {\n    normalizedAddress, comment, type, isIncoming, nft,\n  } = transaction;\n  let { metadata = {} } = transaction;\n\n  const isNftTransfer = type === 'nftTransferred' || type === 'nftReceived' || Boolean(nft);\n  const knownAddresses = getKnownAddresses();\n  const hasScamMarkers = comment ? getScamMarkers().some((sm) => sm.test(comment)) : false;\n  const shouldCheckComment = !hasScamMarkers && comment && isIncoming\n    && (isNftTransfer || comment.toLowerCase().includes('claim'));\n  const hasScamInComment = shouldCheckComment\n    ? (checkHasScamLink(comment) || checkHasTelegramBotMention(comment))\n    : false;\n\n  if (normalizedAddress in knownAddresses) {\n    metadata = { ...metadata, ...knownAddresses[normalizedAddress] };\n  }\n\n  if (hasScamMarkers || hasScamInComment) {\n    metadata.isScam = true;\n  }\n\n  return { ...transaction, metadata };\n}\n\nlet currentOnUpdate: OnApiUpdate | undefined;\n\nexport function connectUpdater(onUpdate: OnApiUpdate) {\n  currentOnUpdate = onUpdate;\n}\n\nexport function disconnectUpdater() {\n  currentOnUpdate = undefined;\n}\n\nexport function isUpdaterAlive(onUpdate: OnApiUpdate) {\n  return currentOnUpdate === onUpdate;\n}\n\nexport function startStorageMigration(onUpdate: OnApiUpdate, ton: typeof blockchains.ton) {\n  migrationEnsurePromise = migrateStorage(onUpdate, ton)\n    .catch((err) => {\n      logDebugError('Migration error', err);\n      currentOnUpdate?.({\n        type: 'showError',\n        error: 'Migration error',\n      });\n    });\n  return migrationEnsurePromise;\n}\n\nexport function waitStorageMigration() {\n  return migrationEnsurePromise;\n}\n\nexport async function migrateStorage(onUpdate: OnApiUpdate, ton: typeof blockchains.ton) {\n  let version = Number(await storage.getItem('stateVersion', true));\n\n  if (version === actualStateVersion) {\n    return;\n  }\n\n  if (IS_CAPACITOR && !version) {\n    if (await storage.getItem('accounts' as StorageKey, true)) {\n      // Fix broken version\n      version = 10;\n    } else {\n      // Prepare for migration to secure storage\n      const idbVersion = await idbStorage.getItem('stateVersion');\n      if (idbVersion) {\n        version = Number(idbVersion);\n      }\n    }\n  }\n\n  // Migration to chrome.storage\n  if (IS_EXTENSION && !version && !(await storage.getItem('addresses' as StorageKey))) {\n    version = await idbStorage.getItem('stateVersion');\n\n    if (version) {\n      // Switching from IndexedDB to `chrome.storage.local`\n      const idbData = await idbStorage.getAll!();\n      await storage.setMany!(idbData);\n    }\n  }\n\n  if (!version) {\n    await storage.setItem('stateVersion', actualStateVersion);\n    return;\n  }\n\n  // First version (v1)\n  if (!version) {\n    // Support multi-accounts\n    const mnemonicEncrypted = await storage.getItem('mnemonicEncrypted' as StorageKey);\n    if (mnemonicEncrypted) {\n      await storage.setItem('mnemonicsEncrypted', JSON.stringify({\n        [MAIN_ACCOUNT_ID]: mnemonicEncrypted,\n      }));\n      await storage.removeItem('mnemonicEncrypted' as StorageKey);\n    }\n\n    // Change accountId format ('0' -> '0-ton', '1-ton-mainnet' -> '1-ton')\n    if (!mnemonicEncrypted) {\n      for (const field of ['mnemonicsEncrypted', 'addresses', 'publicKeys'] as StorageKey[]) {\n        const raw = await storage.getItem(field);\n        if (!raw) continue;\n\n        const oldItem = JSON.parse(raw);\n        const newItem = Object.entries(oldItem).reduce((prevValue, [accountId, data]) => {\n          prevValue[toInternalAccountId(accountId)] = data;\n          return prevValue;\n        }, {} as any);\n\n        await storage.setItem(field, JSON.stringify(newItem));\n      }\n    }\n\n    version = 1;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 1) {\n    const addresses = await storage.getItem('addresses' as StorageKey) as string | undefined;\n    if (addresses && addresses.includes('-undefined')) {\n      for (const field of ['mnemonicsEncrypted', 'addresses', 'publicKeys'] as StorageKey[]) {\n        const newValue = (await storage.getItem(field) as string).replace('-undefined', '-ton');\n        await storage.setItem(field, newValue);\n      }\n    }\n\n    version = 2;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version >= 2 && version <= 4) {\n    for (const key of ['addresses', 'mnemonicsEncrypted', 'publicKeys', 'dapps'] as StorageKey[]) {\n      const rawData = await storage.getItem(key);\n      if (typeof rawData === 'string') {\n        await storage.setItem(key, JSON.parse(rawData));\n      }\n    }\n\n    version = 5;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 5) {\n    const dapps = await storage.getItem('dapps');\n    if (dapps) {\n      for (const accountDapps of Object.values(dapps) as any[]) {\n        for (const dapp of Object.values(accountDapps) as any[]) {\n          dapp.connectedAt = 1;\n        }\n      }\n      await storage.setItem('dapps', dapps);\n    }\n\n    version = 6;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 6) {\n    for (const key of ['addresses', 'mnemonicsEncrypted', 'publicKeys', 'accounts', 'dapps'] as StorageKey[]) {\n      let data = await storage.getItem(key) as AnyLiteral;\n      if (!data) continue;\n\n      data = Object.entries(data).reduce((byAccountId, [internalAccountId, accountData]) => {\n        const parsed = parseAccountId(internalAccountId);\n        const mainnetAccountId = buildAccountId({ ...parsed, network: 'mainnet' });\n        const testnetAccountId = buildAccountId({ ...parsed, network: 'testnet' });\n        return {\n          ...byAccountId,\n          [mainnetAccountId]: accountData,\n          [testnetAccountId]: accountData,\n        };\n      }, {} as AnyLiteral);\n\n      await storage.setItem(key, data);\n    }\n\n    version = 7;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 7) {\n    const addresses = (await storage.getItem('addresses' as StorageKey)) as Record<string, string> | undefined;\n\n    if (addresses) {\n      const publicKeys = (await storage.getItem('publicKeys' as StorageKey)) as Record<string, string>;\n      const accounts = (await storage.getItem('accounts') ?? {}) as Record<string, ApiAccount>;\n\n      for (const [accountId, oldAddress] of Object.entries(addresses)) {\n        const newAddress = toBase64Address(oldAddress, false);\n\n        accounts[accountId] = {\n          ...accounts[accountId],\n          address: newAddress,\n          publicKey: publicKeys[accountId],\n        };\n\n        onUpdate({\n          type: 'updateAccount',\n          accountId,\n          partial: {\n            address: newAddress,\n          },\n        });\n      }\n\n      await storage.setItem('accounts', accounts);\n\n      await storage.removeItem('addresses' as StorageKey);\n      await storage.removeItem('publicKeys' as StorageKey);\n    }\n\n    version = 8;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 8) {\n    if (getEnvironment().isSseSupported) {\n      const dapps = await storage.getItem('dapps');\n\n      if (dapps) {\n        const items: ApiDbSseConnection[] = [];\n\n        for (const accountDapps of Object.values(dapps) as any[]) {\n          for (const dapp of Object.values(accountDapps) as any[]) {\n            if (dapp.sse?.appClientId) {\n              items.push({ clientId: dapp.sse?.appClientId });\n            }\n          }\n        }\n      }\n    }\n\n    version = 9;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 9) {\n    if (IS_CAPACITOR) {\n      const data = await idbStorage.getAll!();\n\n      for (const [key, value] of Object.entries(data)) {\n        await capacitorStorage.setItem(key as StorageKey, value);\n        const newValue = await capacitorStorage.getItem(key as StorageKey, true);\n\n        if (!areDeepEqual(value, newValue)) {\n          throw new Error('Migration error!');\n        }\n      }\n      await idbStorage.clear();\n    }\n\n    version = 10;\n    await storage.setItem('stateVersion', version);\n  }\n\n  let isIosKeychainModeMigrated = false;\n  if (getEnvironment().isIosApp && version >= 10 && version <= 13) {\n    await iosBackupAndMigrateKeychainMode();\n    isIosKeychainModeMigrated = true;\n  }\n\n  if (version === 10 || version === 11 || version === 12) {\n    const accounts: Record<string, {\n      publicKey: string;\n      address: string;\n      version?: string;\n    }> | undefined = await storage.getItem('accounts', true);\n\n    if (accounts) {\n      for (const account of Object.values(accounts)) {\n        const { publicKey, address, version: walletVersion } = account;\n\n        if (walletVersion || !publicKey) continue;\n\n        const publicKeyBytes = hexToBytes(publicKey);\n        const walletInfo = ton.pickWalletByAddress('mainnet', publicKeyBytes, address);\n\n        account.version = walletInfo.version;\n      }\n\n      await storage.setItem('accounts', accounts);\n    }\n\n    version = 13;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 13) {\n    const accounts: Record<string, {\n      publicKey: string;\n      address: string;\n      version?: string;\n    }> | undefined = await storage.getItem('accounts', true);\n\n    if (accounts) {\n      for (const [accountId, account] of Object.entries(accounts)) {\n        const { network } = parseAccountId(accountId);\n        if (network === 'testnet') {\n          account.address = toBase64Address(account.address, false, network);\n\n          onUpdate({\n            type: 'updateAccount',\n            accountId,\n            partial: {\n              address: account.address,\n            },\n          });\n        }\n      }\n\n      await storage.setItem('accounts', accounts);\n    }\n  }\n\n  if (version === 14 || version === 15) {\n    if (getEnvironment().isIosApp && !isIosKeychainModeMigrated) {\n      await iosBackupAndMigrateKeychainMode();\n    }\n\n    version = 16;\n    await storage.setItem('stateVersion', version);\n  }\n}\n\nasync function iosBackupAndMigrateKeychainMode() {\n  const keys = await capacitorStorage.getKeys();\n\n  if (keys?.length) {\n    const items: [string, any][] = [];\n\n    for (const key of keys) {\n      if (key.startsWith('backup_')) {\n        continue;\n      }\n\n      const backupKey = `backup_${key}` as StorageKey;\n      const value = await capacitorStorage.getItem(key as StorageKey, true);\n\n      assert(value !== undefined, 'Empty value!');\n      await capacitorStorage.setItem(backupKey, value);\n      const backupValue = await capacitorStorage.getItem(backupKey);\n      assert(areDeepEqual(value, backupValue), 'Data has not been saved!');\n\n      items.push([key, value]);\n    }\n\n    for (const [key, value] of items) {\n      let shouldRewrite = false;\n      await capacitorStorage.setItem(key as StorageKey, value).catch(() => {\n        shouldRewrite = true;\n      });\n\n      if (shouldRewrite) {\n        await capacitorStorage.removeItem(key as StorageKey);\n        await capacitorStorage.setItem(key as StorageKey, value);\n      }\n    }\n  }\n}\n","const zonesRegex = {\n  ton: /^([-\\da-z]+\\.){0,2}([-\\da-z]{4,126})\\.ton$/i,\n  't.me': /^([-\\da-z]+\\.){0,2}([-_\\da-z]{4,126})\\.t\\.me$/i,\n  vip: /^(?<base>([-\\da-z]+\\.){0,2}([\\da-z]{1,24}))\\.(ton\\.vip|vip\\.ton|vip)$/i,\n  gram: /^(?<base>([-\\da-z]+\\.){0,2}([\\da-z]{1,24}))\\.(gram)$/i,\n};\n\nfunction isDnsDomain(value: string) {\n  return Object.values(zonesRegex).some((zone) => zone.test(value));\n}\n\nfunction isVipDnsDomain(value: string) {\n  return zonesRegex.vip.test(value);\n}\n\nfunction isGramDnsDomain(value: string) {\n  return zonesRegex.gram.test(value);\n}\n\nfunction removeVipZone(value: string) {\n  value = value.replace(/\\.ton\\.vip$/i, '.vip').replace(/\\.vip\\.ton$/i, '.vip');\n  return value.match(zonesRegex.vip)?.groups?.base;\n}\n\nfunction removeGramZone(value: string) {\n  return value.match(zonesRegex.gram)?.groups?.base;\n}\n\nfunction removeTonZone(value: string) {\n  return value.replace(/\\.ton$/i, '');\n}\n\nexport default {\n  isDnsDomain,\n  isVipDnsDomain,\n  isGramDnsDomain,\n  removeVipZone,\n  removeGramZone,\n  removeTonZone,\n};\n","/* Source https://github.com/toncenter/tonweb/blob/master/src/contract/dns/DnsUtils.js */\nimport type { Cell, Slice } from '@ton/core';\nimport { Address, Builder } from '@ton/core';\n\nimport type { TonClient } from './TonClient';\n\nimport { sha256 } from '../../../common/utils';\nimport { DnsCategory } from '../constants';\n\nexport type DnsResult = Cell | Address | string | undefined;\n\nasync function categoryToBigInt(category?: string) {\n  if (!category) return 0n; // all categories\n  const categoryBytes = new TextEncoder().encode(category);\n  const categoryHashHex = Buffer.from(await sha256(categoryBytes)).toString('hex');\n  return BigInt(`0x${categoryHashHex}`);\n}\n\nfunction parseSmartContractAddressImpl(cell: Cell, prefix0: number, prefix1: number): Address | undefined {\n  const slice = cell.asSlice();\n\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 !== prefix0 || byte1 !== prefix1) {\n    throw new Error('Invalid dns record value prefix');\n  }\n\n  return parseAddress(slice);\n}\n\nfunction parseSmartContractAddressRecord(cell: Cell): Address | undefined {\n  return parseSmartContractAddressImpl(cell, 0x9f, 0xd3);\n}\n\nfunction parseNextResolverRecord(cell: Cell): Address | undefined {\n  return parseSmartContractAddressImpl(cell, 0xba, 0x93);\n}\n\nfunction parseStorageBagIdRecord(cell: Cell): string {\n  const slice = cell.asSlice();\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 !== 0x74 || byte1 !== 0x73) {\n    throw new Error('Invalid dns record value prefix');\n  }\n\n  const buffer = slice.loadBuffer(4);\n  return buffer.toString('hex');\n}\n\nfunction parseSiteRecord(cell: Cell): string {\n  const slice = cell.asSlice();\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 === 0xad || byte1 === 0x01) {\n    return parseAdnlAddressRecord(cell);\n  } else {\n    return parseStorageBagIdRecord(cell);\n  }\n}\n\nfunction parseAdnlAddressRecord(cell: Cell): string {\n  const slice = cell.asSlice();\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 !== 0xad || byte1 !== 0x01) {\n    throw new Error('Invalid dns record value prefix');\n  }\n\n  const buffer = slice.loadBuffer(4);\n  return buffer.toString('hex');\n}\n\nasync function dnsResolveImpl(\n  client: TonClient,\n  dnsAddress: string,\n  rawDomainBytes: Uint8Array,\n  category?: DnsCategory,\n  oneStep?: boolean,\n): Promise<DnsResult> {\n  const len = rawDomainBytes.length * 8;\n\n  const domainCell = new Builder()\n    .storeBuffer(Buffer.from(rawDomainBytes))\n    .asCell();\n\n  const categoryBN = await categoryToBigInt(category);\n  const { stack } = await client.callGetMethod(Address.parse(dnsAddress), 'dnsresolve', [\n    { type: 'slice', cell: domainCell },\n    { type: 'int', value: BigInt(categoryBN.toString()) },\n  ]);\n\n  const resultLen = stack.readNumber();\n\n  let cell: Cell | undefined;\n\n  try {\n    cell = stack.readCell();\n  } catch (err) {\n    // Do nothing\n  }\n\n  if (resultLen === 0) {\n    return undefined; // domain cannot be resolved\n  }\n\n  if (resultLen % 8 !== 0) {\n    throw new Error('domain split not at a component boundary');\n  }\n  // if (rawDomainBytes[resultLen] !== 0) {\n  //     throw new Error('domain split not at a component boundary');\n  // }\n  if (resultLen > len) {\n    throw new Error(`invalid response ${resultLen}/${len}`);\n  } else if (resultLen === len) {\n    if (category === DnsCategory.DnsNextResolver) {\n      return cell ? parseNextResolverRecord(cell) : undefined;\n    } else if (category === DnsCategory.Wallet) {\n      return cell ? parseSmartContractAddressRecord(cell) : undefined;\n    } else if (category === DnsCategory.Site) {\n      return cell ? parseSiteRecord(cell) : undefined;\n    } else if (category === DnsCategory.BagId) {\n      return cell ? parseStorageBagIdRecord(cell) : undefined;\n    } else {\n      return cell;\n    }\n  } else if (!cell) {\n    return undefined; // domain cannot be resolved\n  } else {\n    const nextAddress = parseNextResolverRecord(cell)!;\n    if (oneStep) {\n      if (category === DnsCategory.DnsNextResolver) {\n        return nextAddress;\n      } else {\n        return undefined;\n      }\n    } else {\n      return dnsResolveImpl(client, nextAddress.toString(), rawDomainBytes.slice(resultLen / 8), category, false);\n    }\n  }\n}\n\nfunction domainToBytes(domain: string): Uint8Array {\n  if (!domain || !domain.length) {\n    throw new Error('empty domain');\n  }\n  if (domain === '.') {\n    return new Uint8Array([0]);\n  }\n\n  domain = domain.toLowerCase();\n\n  for (let i = 0; i < domain.length; i++) {\n    if (domain.charCodeAt(i) <= 32) {\n      throw new Error('bytes in range 0..32 are not allowed in domain names');\n    }\n  }\n\n  for (let i = 0; i < domain.length; i++) {\n    const s = domain.substring(i, i + 1);\n    for (let c = 127; c <= 159; c++) { // another control codes range\n      if (s === String.fromCharCode(c)) {\n        throw new Error('bytes in range 127..159 are not allowed in domain names');\n      }\n    }\n  }\n\n  const arr = domain.split('.');\n\n  arr.forEach((part) => {\n    if (!part.length) {\n      throw new Error('domain name cannot have an empty component');\n    }\n  });\n\n  let rawDomain = `${arr.reverse().join('\\0')}\\0`;\n  if (rawDomain.length < 126) {\n    rawDomain = `\\0${rawDomain}`;\n  }\n\n  return new TextEncoder().encode(rawDomain);\n}\n\nexport function dnsResolve(\n  client: TonClient,\n  rootDnsAddress: string,\n  domain: string,\n  category?: DnsCategory,\n  oneStep?: boolean,\n): Promise<DnsResult> {\n  const rawDomainBytes = domainToBytes(domain);\n\n  return dnsResolveImpl(client, rootDnsAddress, rawDomainBytes, category, oneStep);\n}\n\nfunction parseAddress(slice: Slice): Address | undefined {\n  slice.loadUint(3);\n  let n = slice.loadUintBig(8);\n  if (n > 127n) { // Maybe it's not necessary?\n    n -= 256n;\n  }\n\n  const hashPart = slice.loadUintBig(256);\n  if (`${n.toString(10)}:${hashPart.toString(16)}` === '0:0') {\n    return undefined;\n  }\n  const s = `${n.toString(10)}:${hashPart.toString(16).padStart(64, '0')}`;\n  return Address.parse(s);\n}\n","import { Address } from '@ton/core';\n\nimport type { ApiNetwork } from '../../types';\n\nimport dns from '../../../util/dns';\nimport { fetchAddressBook } from './util/apiV3';\nimport { dnsResolve } from './util/dns';\nimport { getTonClient, toBase64Address } from './util/tonCore';\nimport { getKnownAddressInfo } from '../../common/addresses';\nimport { DnsCategory } from './constants';\n\nconst TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\nconst VIP_DNS_COLLECTION = 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS';\nconst GRAM_DNS_COLLECTION = 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ';\n\nexport async function resolveAddress(network: ApiNetwork, address: string): Promise<{\n  address: string;\n  name?: string;\n  isMemoRequired?: boolean;\n  isScam?: boolean;\n} | undefined> {\n  const isDomain = dns.isDnsDomain(address);\n  let domain: string | undefined;\n\n  if (isDomain) {\n    const resolvedAddress = await resolveAddressByDomain(network, address);\n    if (!resolvedAddress) {\n      return undefined;\n    }\n\n    const addressBook = await fetchAddressBook(network, [resolvedAddress]);\n\n    domain = address;\n    address = addressBook[resolvedAddress].user_friendly;\n  }\n\n  const normalizedAddress = normalizeAddress(address);\n  const known = getKnownAddressInfo(normalizedAddress);\n\n  if (known) {\n    return {\n      address,\n      ...known,\n      name: domain ?? known.name,\n    };\n  }\n\n  return { address, name: domain };\n}\n\nasync function resolveAddressByDomain(network: ApiNetwork, domain: string) {\n  try {\n    let base: string;\n    let collection: string;\n    if (dns.isVipDnsDomain(domain)) {\n      base = dns.removeVipZone(domain)!;\n      collection = VIP_DNS_COLLECTION;\n    } else if (dns.isGramDnsDomain(domain)) {\n      base = dns.removeGramZone(domain)!;\n      collection = GRAM_DNS_COLLECTION;\n    } else {\n      base = dns.removeTonZone(domain);\n      collection = TON_DNS_COLLECTION;\n    }\n\n    const result = await dnsResolve(\n      getTonClient(network),\n      collection,\n      base,\n      DnsCategory.Wallet,\n    );\n\n    if (!(result instanceof Address)) {\n      return undefined;\n    }\n\n    return toBase64Address(result, undefined, network);\n  } catch (err: any) {\n    if (!err.message?.includes('exit_code')) {\n      throw err;\n    }\n    return undefined;\n  }\n}\n\nexport function normalizeAddress(address: string, network?: ApiNetwork) {\n  return toBase64Address(address, true, network);\n}\n","import type { JettonBalance } from 'tonapi-sdk-js';\nimport { Address } from '@ton/core';\n\nimport type {\n  ApiBaseToken, ApiNetwork, ApiToken, ApiTokenSimple,\n} from '../../types';\nimport type { AnyPayload, ApiTransactionExtra, JettonMetadata } from './types';\n\nimport { DEFAULT_DECIMAL_PLACES, TON_SYMBOL, TONCOIN_SLUG } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { logDebugError } from '../../../util/logs';\nimport { fixIpfsUrl } from '../../../util/metadata';\nimport { buildTokenSlug } from './util';\nimport {\n  fetchJettonMetadata,\n  fixBase64ImageData,\n  parseJettonWalletMsgBody,\n} from './util/metadata';\nimport { fetchJettonBalances } from './util/tonapiio';\nimport {\n  buildTokenTransferBody,\n  getTonClient,\n  resolveTokenMinterAddress,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonCore';\nimport { JettonWallet } from './contracts/JettonWallet';\nimport { fetchStoredAddress } from '../../common/accounts';\nimport {\n  DEFAULT_DECIMALS,\n  TOKEN_TRANSFER_TONCOIN_AMOUNT,\n  TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT,\n} from './constants';\n\nexport type TokenBalanceParsed = {\n  slug: string;\n  balance: bigint;\n  token: ApiTokenSimple;\n  jettonWallet: string;\n};\n\nconst KNOWN_TOKENS: ApiBaseToken[] = [\n  {\n    slug: TONCOIN_SLUG,\n    name: 'Toncoin',\n    cmcSlug: TONCOIN_SLUG,\n    symbol: TON_SYMBOL,\n    decimals: DEFAULT_DECIMAL_PLACES,\n  },\n];\n\nconst knownTokens = {} as Record<string, ApiToken>;\naddKnownTokens(KNOWN_TOKENS);\n\nexport async function getAccountTokenBalances(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return getTokenBalances(network, address);\n}\n\nexport async function getTokenBalances(network: ApiNetwork, address: string) {\n  const balancesRaw: Array<JettonBalance> = await fetchJettonBalances(network, address);\n  return balancesRaw.map((balance) => parseTokenBalance(network, balance)).filter(Boolean);\n}\n\nexport async function getAddressTokenBalances(address: string, network: ApiNetwork) {\n  const balancesRaw: Array<JettonBalance> = await fetchJettonBalances(network, address);\n  return balancesRaw.map((balance) => parseTokenBalance(network, balance)).filter(Boolean);\n}\n\nfunction parseTokenBalance(network: ApiNetwork, balanceRaw: JettonBalance): TokenBalanceParsed | undefined {\n  if (!balanceRaw.jetton) {\n    return undefined;\n  }\n\n  try {\n    const { balance, jetton, wallet_address: walletAddress } = balanceRaw;\n    const minterAddress = toBase64Address(jetton.address, true, network);\n    const token = buildTokenByMetadata(minterAddress, jetton);\n\n    return {\n      slug: token.slug,\n      balance: BigInt(balance),\n      token,\n      jettonWallet: toBase64Address(walletAddress.address, undefined, network),\n    };\n  } catch (err) {\n    logDebugError('parseTokenBalance', err);\n    return undefined;\n  }\n}\n\nexport function parseTokenTransaction(\n  network: ApiNetwork,\n  tx: ApiTransactionExtra,\n  slug: string,\n  walletAddress: string,\n): ApiTransactionExtra | undefined {\n  const { extraData } = tx;\n  if (!extraData?.body) {\n    return undefined;\n  }\n\n  const parsedData = parseJettonWalletMsgBody(network, extraData.body);\n  if (!parsedData) {\n    return undefined;\n  }\n\n  const {\n    operation, jettonAmount, address, comment, encryptedComment,\n  } = parsedData;\n  const isIncoming = operation === 'InternalTransfer';\n\n  const fromAddress = isIncoming ? (address ?? tx.fromAddress) : walletAddress;\n  const toAddress = isIncoming ? walletAddress : address!;\n  const normalizedAddress = toBase64Address(isIncoming ? fromAddress : toAddress, true);\n\n  return {\n    ...tx,\n    slug,\n    fromAddress,\n    toAddress,\n    normalizedAddress,\n    amount: isIncoming ? jettonAmount : -jettonAmount,\n    comment,\n    encryptedComment,\n    isIncoming,\n  };\n}\n\nexport async function buildTokenTransfer(\n  network: ApiNetwork,\n  tokenAddress: string,\n  fromAddress: string,\n  toAddress: string,\n  amount: bigint,\n  payload?: AnyPayload,\n) {\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, fromAddress, tokenAddress);\n  const realTokenAddress = await resolveTokenMinterAddress(network, tokenWalletAddress);\n  if (tokenAddress !== realTokenAddress) {\n    throw new Error('Invalid contract');\n  }\n\n  const tokenWallet = getTokenWallet(network, tokenWalletAddress);\n\n  payload = buildTokenTransferBody({\n    tokenAmount: amount,\n    toAddress,\n    forwardAmount: TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT,\n    forwardPayload: payload,\n    responseAddress: fromAddress,\n  });\n\n  return {\n    tokenWallet,\n    amount: TOKEN_TRANSFER_TONCOIN_AMOUNT,\n    toAddress: tokenWalletAddress,\n    payload,\n  };\n}\n\nexport function resolveTokenBySlug(slug: string) {\n  return knownTokens[slug]!;\n}\n\nexport function findTokenByMinter(minter: string) {\n  return Object.values(knownTokens).find((token) => token.minterAddress === minter);\n}\n\nexport function getTokenWallet(network: ApiNetwork, tokenAddress: string) {\n  return getTonClient(network).open(new JettonWallet(Address.parse(tokenAddress)));\n}\n\nexport function getKnownTokens() {\n  return knownTokens;\n}\n\nexport function addKnownTokens(tokens: ApiBaseToken[]) {\n  for (const token of tokens) {\n    if (token.slug in knownTokens) continue;\n\n    addKnownToken({\n      ...token,\n      quote: {\n        slug: token.slug,\n        price: 0,\n        priceUsd: 0,\n        percentChange24h: 0,\n      },\n    });\n  }\n}\n\nexport function addKnownToken(token: ApiToken) {\n  knownTokens[token.slug] = token;\n}\n\nexport async function fetchToken(network: ApiNetwork, address: string) {\n  const metadata = await fetchJettonMetadata(network, address);\n\n  return buildTokenByMetadata(address, metadata);\n}\n\nfunction buildTokenByMetadata(address: string, metadata: JettonMetadata): ApiBaseToken {\n  const {\n    name,\n    symbol,\n    image,\n    image_data: imageData,\n    decimals,\n  } = metadata;\n\n  return {\n    slug: buildTokenSlug(address),\n    name,\n    symbol,\n    decimals: decimals === undefined ? DEFAULT_DECIMALS : Number(decimals),\n    minterAddress: address,\n    image: (image && fixIpfsUrl(image)) || (imageData && fixBase64ImageData(imageData)) || undefined,\n  };\n}\n","import { beginCell, storeStateInit } from '@ton/core';\n\nimport type { ApiNetwork, ApiWalletVersion } from '../../types';\nimport type { ContractInfo, WalletInfo } from './types';\nimport type { TonWallet } from './util/tonCore';\n\nimport { DEFAULT_WALLET_VERSION } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { pick } from '../../../util/iteratees';\nimport withCacheAsync from '../../../util/withCacheAsync';\nimport { stringifyTxId } from './util';\nimport { fetchJettonBalances } from './util/tonapiio';\nimport {\n  getTonClient, toBase64Address, walletClassMap,\n} from './util/tonCore';\nimport { fetchStoredAccount, fetchStoredAddress } from '../../common/accounts';\nimport { base64ToBytes, hexToBytes, sha256 } from '../../common/utils';\nimport { ALL_WALLET_VERSIONS, KnownContracts, WORKCHAIN } from './constants';\n\nexport const isAddressInitialized = withCacheAsync(\n  async (network: ApiNetwork, walletOrAddress: TonWallet | string) => {\n    return (await getWalletInfo(network, walletOrAddress)).isInitialized;\n  },\n);\n\nexport const isActiveSmartContract = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  const { isInitialized, isWallet } = await getWalletInfo(network, address);\n  return isInitialized ? !isWallet : undefined;\n}, (value) => value !== undefined);\n\nexport function publicKeyToAddress(\n  network: ApiNetwork,\n  publicKey: Uint8Array,\n  walletVersion: ApiWalletVersion,\n) {\n  const wallet = buildWallet(network, publicKey, walletVersion);\n  return toBase64Address(wallet.address, false, network);\n}\n\nexport function buildWallet(network: ApiNetwork, publicKey: Uint8Array, walletVersion: ApiWalletVersion): TonWallet {\n  const client = getTonClient(network);\n  const WalletClass = walletClassMap[walletVersion]!;\n  return client.open(\n    WalletClass.create({\n      publicKey: Buffer.from(publicKey),\n      workchain: WORKCHAIN,\n    }),\n  );\n}\n\nexport async function getWalletInfo(network: ApiNetwork, walletOrAddress: TonWallet | string): Promise<{\n  isInitialized: boolean;\n  isWallet: boolean;\n  seqno: number;\n  balance: bigint;\n  lastTxId?: string;\n}> {\n  const address = typeof walletOrAddress === 'string'\n    ? walletOrAddress\n    : toBase64Address(walletOrAddress.address, undefined, network);\n\n  const {\n    account_state: accountState,\n    wallet: isWallet,\n    seqno = 0,\n    balance,\n    last_transaction_id: {\n      lt,\n      hash,\n    },\n  } = await getTonClient(network).getWalletInfo(address);\n\n  return {\n    isInitialized: accountState === 'active',\n    isWallet,\n    seqno,\n    balance: BigInt(balance || '0'),\n    lastTxId: lt === '0'\n      ? undefined\n      : stringifyTxId({ lt, hash }),\n  };\n}\n\nexport async function getContractInfo(network: ApiNetwork, address: string): Promise<{\n  isInitialized: boolean;\n  isSwapAllowed?: boolean;\n  isWallet?: boolean;\n  contractInfo?: ContractInfo;\n  codeHash?: string;\n}> {\n  const data = await getTonClient(network).getAddressInfo(address);\n\n  const { code, state } = data;\n\n  const codeHash = Buffer.from(await sha256(base64ToBytes(code))).toString('hex');\n  const contractInfo = Object.values(KnownContracts).find((info) => info.hash === codeHash);\n\n  const isInitialized = state === 'active';\n  const isWallet = state === 'active' ? contractInfo?.type === 'wallet' : undefined;\n  const isSwapAllowed = contractInfo?.isSwapAllowed;\n\n  return {\n    isInitialized,\n    isWallet,\n    isSwapAllowed,\n    contractInfo,\n    codeHash,\n  };\n}\n\nexport async function getAccountBalance(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return getWalletBalance(network, address);\n}\n\nexport async function getWalletBalance(network: ApiNetwork, walletOrAddress: TonWallet | string): Promise<bigint> {\n  return (await getWalletInfo(network, walletOrAddress)).balance;\n}\n\nexport async function getWalletSeqno(network: ApiNetwork, walletOrAddress: TonWallet | string): Promise<number> {\n  const { seqno } = await getWalletInfo(network, walletOrAddress);\n  return seqno || 0;\n}\n\nexport async function pickBestWallet(network: ApiNetwork, publicKey: Uint8Array): Promise<{\n  wallet: TonWallet;\n  version: ApiWalletVersion;\n  balance: bigint;\n}> {\n  const allWallets = await getWalletVersionInfos(network, publicKey);\n  const defaultWallet = allWallets.filter(({ version }) => version === DEFAULT_WALLET_VERSION)[0];\n\n  if (defaultWallet.lastTxId) {\n    return defaultWallet;\n  }\n\n  const withBiggestBalance = allWallets.reduce<typeof allWallets[0] | undefined>((best, current) => {\n    return current.balance > (best?.balance ?? 0n) ? current : best;\n  }, undefined);\n\n  if (withBiggestBalance) {\n    return withBiggestBalance;\n  }\n\n  const withLastTx = allWallets.find(({ lastTxId }) => !!lastTxId);\n\n  if (withLastTx) {\n    return withLastTx;\n  }\n\n  // Workaround for NOT holders who do not have transactions\n  const v4Wallet = allWallets.find(({ version }) => version === 'v4R2')!;\n  const v4JettonBalances = await fetchJettonBalances(network, v4Wallet.address);\n  if (v4JettonBalances.length > 0) {\n    return v4Wallet;\n  }\n\n  return defaultWallet;\n}\n\nexport function getWalletVersionInfos(\n  network: ApiNetwork,\n  publicKey: Uint8Array,\n  versions: ApiWalletVersion[] = ALL_WALLET_VERSIONS,\n): Promise<WalletInfo[]> {\n  return Promise.all(versions.map(async (version) => {\n    const wallet = buildWallet(network, publicKey, version);\n    const address = toBase64Address(wallet.address, false, network);\n    const walletInfo = await getWalletInfo(network, wallet);\n\n    return {\n      wallet,\n      address,\n      version,\n      ...pick(walletInfo, ['isInitialized', 'balance', 'lastTxId']),\n    };\n  }));\n}\n\nexport function getWalletVersions(\n  network: ApiNetwork,\n  publicKey: Uint8Array,\n  versions: ApiWalletVersion[] = ALL_WALLET_VERSIONS,\n): {\n    wallet: TonWallet;\n    address: string;\n    version: ApiWalletVersion;\n  }[] {\n  return versions.map((version) => {\n    const wallet = buildWallet(network, publicKey, version);\n    const address = toBase64Address(wallet.address, false, network);\n\n    return {\n      wallet,\n      address,\n      version,\n    };\n  });\n}\n\nexport async function getWalletStateInit(accountId: string) {\n  const wallet = await pickAccountWallet(accountId);\n\n  return beginCell()\n    .storeWritable(storeStateInit(wallet!.init))\n    .endCell();\n}\n\nexport function pickWalletByAddress(network: ApiNetwork, publicKey: Uint8Array, address: string) {\n  address = toBase64Address(address, false, network);\n\n  const allWallets = getWalletVersions(network, publicKey);\n\n  return allWallets.find((w) => w.address === address)!;\n}\n\nexport async function pickAccountWallet(accountId: string) {\n  const { network } = parseAccountId(accountId);\n\n  const { publicKey, version } = await fetchStoredAccount(accountId);\n\n  const publicKeyBytes = hexToBytes(publicKey);\n\n  return buildWallet(network, publicKeyBytes, version);\n}\n\nexport function resolveWalletVersion(wallet: TonWallet) {\n  return Object.entries(walletClassMap)\n    .find(([, walletClass]) => wallet instanceof walletClass)?.[0];\n}\n","import type { OpenedContract } from '@ton/core';\nimport {\n  beginCell, Cell, external, internal, SendMode, storeMessage,\n} from '@ton/core';\n\nimport type { DieselStatus } from '../../../global/types';\nimport type {\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiNetwork,\n  ApiNft,\n  ApiSignedTransfer,\n  ApiTransaction,\n  ApiTransactionActivity,\n  ApiTransactionType,\n  ApiTxIdBySlug,\n} from '../../types';\nimport type { JettonWallet } from './contracts/JettonWallet';\nimport type {\n  AnyPayload,\n  ApiCheckTransactionDraftResult,\n  ApiSubmitMultiTransferResult,\n  ApiSubmitTransferResult,\n  ApiSubmitTransferWithDieselResult,\n  ApiTransactionExtra,\n  TonTransferParams,\n} from './types';\nimport type { TonWallet } from './util/tonCore';\nimport { ApiCommonError, ApiTransactionDraftError, ApiTransactionError } from '../../types';\n\nimport { DIESEL_ADDRESS, ONE_TON, TONCOIN_SLUG } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { bigintMultiplyToNumber } from '../../../util/bigint';\nimport { compareActivities } from '../../../util/compareActivities';\nimport { fromDecimal } from '../../../util/decimals';\nimport { buildCollectionByKey, omit } from '../../../util/iteratees';\nimport { logDebugError } from '../../../util/logs';\nimport { pause } from '../../../util/schedulers';\nimport withCacheAsync from '../../../util/withCacheAsync';\nimport { parseTxId } from './util';\nimport { fetchAddressBook, fetchLatestTxId, fetchTransactions } from './util/apiV3';\nimport { decryptMessageComment, encryptMessageComment } from './util/encryption';\nimport { buildNft, parseWalletTransactionBody } from './util/metadata';\nimport { sendExternal } from './util/sendExternal';\nimport { fetchNftItems } from './util/tonapiio';\nimport {\n  commentToBytes,\n  getTonClient,\n  getTonWalletContract,\n  getWalletPublicKey,\n  packBytesAsSnake,\n  packBytesAsSnakeForEncryptedData,\n  parseAddress,\n  parseBase64,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonCore';\nimport { fetchStoredAccount, fetchStoredAddress } from '../../common/accounts';\nimport { callBackendGet } from '../../common/backend';\nimport { updateTransactionMetadata } from '../../common/helpers';\nimport { base64ToBytes, isKnownStakingPool } from '../../common/utils';\nimport { ApiServerError, handleServerError } from '../../errors';\nimport { resolveAddress } from './address';\nimport { fetchKeyPair, fetchPrivateKey } from './auth';\nimport {\n  ATTEMPTS, FEE_FACTOR, STAKE_COMMENT, TRANSFER_TIMEOUT_SEC, UNSTAKE_COMMENT,\n} from './constants';\nimport {\n  buildTokenTransfer, findTokenByMinter, parseTokenTransaction, resolveTokenBySlug,\n} from './tokens';\nimport {\n  getContractInfo, getWalletBalance, getWalletInfo, pickAccountWallet,\n} from './wallet';\n\nconst GET_TRANSACTIONS_LIMIT = 50;\nconst GET_TRANSACTIONS_MAX_LIMIT = 100;\nconst WAIT_TRANSFER_TIMEOUT = 5 * 60 * 1000; // 5 min\nconst WAIT_TRANSFER_PAUSE = 1000; // 1 sec.\nconst WAIT_TRANSACTION_PAUSE = 500; // 0.5 sec.\n\nconst MAX_BALANCE_WITH_CHECK_DIESEL = 220000000n; // 0.22 TON\nconst PENDING_DIESEL_TIMEOUT = 15 * 60 * 1000; // 15 min\n\nconst pendingTransfers: Record<string, {\n  timestamp: number;\n  seqno: number;\n  promise: Promise<any>;\n}> = {};\n\nexport const checkHasTransaction = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  const transactions = await fetchTransactions(network, address, 1);\n  return Boolean(transactions.length);\n});\n\nexport async function checkTransactionDraft(\n  options: {\n    accountId: string;\n    toAddress: string;\n    amount: bigint;\n    tokenAddress?: string;\n    data?: AnyPayload;\n    stateInit?: Cell;\n    shouldEncrypt?: boolean;\n    isBase64Data?: boolean;\n  },\n): Promise<ApiCheckTransactionDraftResult> {\n  const {\n    accountId,\n    tokenAddress,\n    stateInit,\n    shouldEncrypt,\n    isBase64Data,\n  } = options;\n  let { toAddress, amount, data } = options;\n\n  const { network } = parseAccountId(accountId);\n\n  let result: ApiCheckTransactionDraftResult = {};\n\n  try {\n    result = await checkToAddress(network, toAddress);\n\n    if ('error' in result) {\n      return result;\n    }\n\n    toAddress = result.resolvedAddress!;\n\n    const { isInitialized } = await getContractInfo(network, toAddress);\n\n    if (result.isBounceable && !isInitialized) {\n      result.isToAddressNew = !(await checkHasTransaction(network, toAddress));\n      return {\n        ...result,\n        error: ApiTransactionDraftError.InactiveContract,\n      };\n    }\n\n    result.resolvedAddress = toAddress;\n\n    if (amount < 0n) {\n      return {\n        ...result,\n        error: ApiTransactionDraftError.InvalidAmount,\n      };\n    }\n\n    const wallet = await pickAccountWallet(accountId);\n    if (!wallet) {\n      return {\n        ...result,\n        error: ApiCommonError.Unexpected,\n      };\n    }\n\n    if (typeof data === 'string' && isBase64Data) {\n      data = base64ToBytes(data);\n    }\n\n    if (data && typeof data === 'string' && shouldEncrypt) {\n      const toPublicKey = await getWalletPublicKey(network, toAddress);\n      if (!toPublicKey) {\n        return {\n          ...result,\n          error: ApiTransactionDraftError.WalletNotInitialized,\n        };\n      }\n    }\n\n    const account = await fetchStoredAccount(accountId);\n    const { address } = account;\n\n    if (data && typeof data === 'string' && !isBase64Data) {\n      data = commentToBytes(data);\n    }\n\n    let tokenBalance: bigint | undefined;\n\n    if (!tokenAddress) {\n      if (data instanceof Uint8Array) {\n        data = shouldEncrypt ? packBytesAsSnakeForEncryptedData(data) : packBytesAsSnake(data);\n      }\n    } else {\n      const tokenAmount: bigint = amount;\n      let tokenWallet: OpenedContract<JettonWallet>;\n      ({\n        tokenWallet,\n        amount,\n        toAddress,\n        payload: data,\n      } = await buildTokenTransfer(network, tokenAddress, address, toAddress, amount, data));\n\n      tokenBalance = await tokenWallet!.getJettonBalance();\n      if (tokenBalance < tokenAmount!) {\n        return {\n          ...result,\n          error: ApiTransactionDraftError.InsufficientBalance,\n        };\n      }\n    }\n\n    const { transaction } = await signTransaction({\n      network,\n      wallet,\n      toAddress,\n      amount,\n      payload: data,\n      stateInit,\n      shouldEncrypt,\n    });\n\n    const realFee = await calculateFee(network, wallet, transaction, account.isInitialized);\n    result.fee = bigintMultiplyToNumber(realFee, FEE_FACTOR);\n\n    const balance = await getWalletBalance(network, wallet);\n\n    const isFullTonBalance = !tokenAddress && balance === amount;\n    const isEnoughBalance = isFullTonBalance\n      ? balance > realFee\n      : balance >= amount + realFee;\n\n    if (network === 'mainnet' && tokenAddress && balance < MAX_BALANCE_WITH_CHECK_DIESEL) {\n      const {\n        status: dieselStatus,\n        amount: dieselAmount,\n        isAwaitingNotExpiredPrevious,\n      } = await fetchEstimateDiesel(accountId, tokenAddress) || {};\n\n      if (!isEnoughBalance || isAwaitingNotExpiredPrevious) {\n        result.dieselStatus = dieselStatus;\n        result.dieselAmount = dieselAmount;\n\n        if (dieselStatus !== 'not-available') {\n          return result;\n        }\n      }\n    }\n\n    if (!isEnoughBalance) {\n      return {\n        ...result,\n        error: ApiTransactionDraftError.InsufficientBalance,\n      };\n    }\n\n    return result;\n  } catch (err: any) {\n    return {\n      ...handleServerError(err),\n      ...result,\n    };\n  }\n}\n\nfunction estimateDiesel(address: string, tokenAddress: string) {\n  return callBackendGet<{\n    status: DieselStatus;\n    amount?: string;\n    pendingCreatedAt?: string;\n  }>('/diesel/estimate', { address, tokenAddress });\n}\n\nexport async function checkToAddress(network: ApiNetwork, toAddress: string) {\n  const result: {\n    addressName?: string;\n    isScam?: boolean;\n    resolvedAddress?: string;\n    isToAddressNew?: boolean;\n    isBounceable?: boolean;\n    isMemoRequired?: boolean;\n  } = {};\n\n  const resolved = await resolveAddress(network, toAddress);\n  if (resolved) {\n    result.addressName = resolved.name;\n    result.resolvedAddress = resolved.address;\n    result.isMemoRequired = resolved.isMemoRequired;\n    result.isScam = resolved.isScam;\n    toAddress = resolved.address;\n  } else {\n    return {\n      ...result,\n      error: ApiTransactionDraftError.DomainNotResolved,\n    };\n  }\n\n  const {\n    isValid, isUserFriendly, isTestOnly, isBounceable,\n  } = parseAddress(toAddress);\n\n  result.isBounceable = isBounceable;\n\n  if (!isValid) {\n    return {\n      ...result,\n      error: ApiTransactionDraftError.InvalidToAddress,\n    };\n  }\n\n  const regex = /[+=/]/;\n  const isUrlSafe = !regex.test(toAddress);\n\n  if (!isUserFriendly || !isUrlSafe || (network === 'mainnet' && isTestOnly)) {\n    return {\n      ...result,\n      error: ApiTransactionDraftError.InvalidAddressFormat,\n    };\n  }\n\n  return result;\n}\n\nexport async function submitTransfer(options: {\n  accountId: string;\n  password: string;\n  toAddress: string;\n  amount: bigint;\n  data?: AnyPayload;\n  tokenAddress?: string;\n  stateInit?: Cell;\n  shouldEncrypt?: boolean;\n  isBase64Data?: boolean;\n}): Promise<ApiSubmitTransferResult> {\n  const {\n    accountId,\n    password,\n    tokenAddress,\n    stateInit,\n    shouldEncrypt,\n    isBase64Data,\n  } = options;\n\n  let { toAddress, amount, data } = options;\n\n  const { network } = parseAccountId(accountId);\n\n  try {\n    const [wallet, account, keyPair] = await Promise.all([\n      pickAccountWallet(accountId),\n      fetchStoredAccount(accountId),\n      fetchKeyPair(accountId, password),\n    ]);\n    const { address: fromAddress } = account;\n    const { publicKey, secretKey } = keyPair!;\n\n    let encryptedComment: string | undefined;\n\n    if (typeof data === 'string') {\n      ({ payload: data, encryptedComment } = await stringToPayload({\n        network, toAddress, fromAddress, data, secretKey, publicKey, shouldEncrypt, isBase64Data,\n      }));\n    }\n\n    if (!tokenAddress) {\n      if (data instanceof Uint8Array) {\n        data = shouldEncrypt ? packBytesAsSnakeForEncryptedData(data) : packBytesAsSnake(data);\n      }\n    } else {\n      ({\n        amount,\n        toAddress,\n        payload: data,\n      } = await buildTokenTransfer(network, tokenAddress, fromAddress, toAddress, amount, data));\n    }\n\n    await waitPendingTransfer(network, fromAddress);\n\n    const { balance } = await getWalletInfo(network, wallet!);\n    const isFullTonBalance = !tokenAddress && balance === amount;\n\n    const { seqno, transaction } = await signTransaction({\n      network,\n      wallet,\n      toAddress,\n      amount,\n      payload: data,\n      stateInit,\n      privateKey: secretKey,\n      isFullBalance: isFullTonBalance,\n      shouldEncrypt,\n    });\n\n    const fee = await calculateFee(network, wallet!, transaction, account.isInitialized);\n\n    const isEnoughBalance = isFullTonBalance\n      ? balance > fee\n      : balance >= amount + fee;\n\n    if (!isEnoughBalance) {\n      return { error: ApiTransactionError.InsufficientBalance };\n    }\n\n    const client = getTonClient(network);\n    const { msgHash, boc } = await sendExternal(client, wallet!, transaction);\n\n    addPendingTransfer(network, fromAddress, seqno, boc);\n\n    return {\n      amount, seqno, encryptedComment, toAddress, msgHash,\n    };\n  } catch (err: any) {\n    logDebugError('submitTransfer', err);\n\n    return { error: resolveTransactionError(err) };\n  }\n}\n\nexport async function submitTransferWithDiesel(options: {\n  accountId: string;\n  password: string;\n  toAddress: string;\n  amount: bigint;\n  data?: AnyPayload;\n  tokenAddress: string;\n  shouldEncrypt?: boolean;\n  dieselAmount: bigint;\n}): Promise<ApiSubmitTransferWithDieselResult> {\n  const {\n    toAddress,\n    amount,\n    accountId,\n    password,\n    tokenAddress,\n    shouldEncrypt,\n    dieselAmount,\n  } = options;\n\n  let { data } = options;\n\n  const { network } = parseAccountId(accountId);\n\n  const [account, keyPair] = await Promise.all([\n    fetchStoredAccount(accountId),\n    fetchKeyPair(accountId, password),\n  ]);\n\n  const { address: fromAddress } = account;\n  const { publicKey, secretKey } = keyPair!;\n\n  let encryptedComment: string | undefined;\n\n  if (typeof data === 'string') {\n    ({ payload: data, encryptedComment } = await stringToPayload({\n      network, toAddress, fromAddress, data, secretKey, publicKey, shouldEncrypt,\n    }));\n  }\n\n  const messages: TonTransferParams[] = [\n    omit(await buildTokenTransfer(network, tokenAddress, fromAddress, toAddress, amount, data), ['tokenWallet']),\n    omit(await buildTokenTransfer(network, tokenAddress, fromAddress, DIESEL_ADDRESS, dieselAmount), ['tokenWallet']),\n  ];\n\n  const result = await submitMultiTransfer(accountId, password, messages, undefined, true);\n\n  return { ...result, encryptedComment };\n}\n\nasync function stringToPayload({\n  network, toAddress, data, shouldEncrypt, publicKey, secretKey, fromAddress, isBase64Data,\n}: {\n  network: ApiNetwork;\n  data: string;\n  shouldEncrypt?: boolean;\n  toAddress: string;\n  publicKey: Uint8Array;\n  secretKey: Uint8Array;\n  fromAddress: string;\n  isBase64Data?: boolean;\n}): Promise<{\n    payload?: Uint8Array | Cell;\n    encryptedComment?: string;\n  }> {\n  let payload: Uint8Array | Cell | undefined;\n  let encryptedComment: string | undefined;\n\n  if (!data) {\n    payload = undefined;\n  } else if (isBase64Data) {\n    payload = parseBase64(data);\n  } else if (shouldEncrypt) {\n    const toPublicKey = (await getWalletPublicKey(network, toAddress))!;\n    payload = await encryptMessageComment(data, publicKey, toPublicKey, secretKey, fromAddress);\n    encryptedComment = Buffer.from(payload.slice(4)).toString('base64');\n  } else {\n    payload = commentToBytes(data);\n  }\n\n  return { payload, encryptedComment };\n}\n\nexport function resolveTransactionError(error: any): ApiAnyDisplayError | string {\n  if (error instanceof ApiServerError) {\n    if (error.message.includes('exitcode=35,')) {\n      return ApiTransactionError.IncorrectDeviceTime;\n    } else if (error.statusCode === 400) {\n      return error.message;\n    } else if (error.displayError) {\n      return error.displayError;\n    }\n  }\n  return ApiTransactionError.UnsuccesfulTransfer;\n}\n\nasync function signTransaction({\n  network,\n  wallet,\n  toAddress,\n  amount,\n  payload,\n  stateInit,\n  privateKey = new Uint8Array(64),\n  isFullBalance,\n  expireAt,\n  shouldEncrypt,\n}: {\n  network: ApiNetwork;\n  wallet: TonWallet;\n  toAddress: string;\n  amount: bigint;\n  payload?: AnyPayload;\n  stateInit?: Cell;\n  privateKey?: Uint8Array;\n  isFullBalance?: boolean;\n  expireAt?: number;\n  shouldEncrypt?: boolean;\n}) {\n  const { seqno } = await getWalletInfo(network, wallet);\n\n  if (!expireAt) {\n    expireAt = Math.round(Date.now() / 1000) + TRANSFER_TIMEOUT_SEC;\n  }\n\n  if (payload instanceof Uint8Array) {\n    payload = shouldEncrypt\n      ? packBytesAsSnakeForEncryptedData(payload) as Cell\n      : packBytesAsSnake(payload, 0) as Cell;\n  }\n\n  const init = stateInit ? {\n    code: stateInit.refs[0],\n    data: stateInit.refs[1],\n  } : undefined;\n\n  const sendMode = isFullBalance\n    ? SendMode.CARRY_ALL_REMAINING_BALANCE\n    : SendMode.PAY_GAS_SEPARATELY + SendMode.IGNORE_ERRORS;\n\n  const transaction = wallet.createTransfer({\n    seqno,\n    secretKey: Buffer.from(privateKey),\n    messages: [internal({\n      value: amount,\n      to: toAddress,\n      body: payload,\n      init,\n      bounce: parseAddress(toAddress).isBounceable,\n    })],\n    sendMode,\n    timeout: expireAt,\n  });\n\n  return { seqno, transaction };\n}\n\nexport async function getAccountNewestTxId(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return fetchNewestTxId(network, address);\n}\n\nexport async function getAccountTransactionSlice(\n  accountId: string,\n  toTxId?: string,\n  fromTxId?: string,\n  limit?: number,\n) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  let transactions = await fetchTransactions(\n    network, address, limit ?? GET_TRANSACTIONS_LIMIT, toTxId, fromTxId,\n  );\n\n  transactions = await Promise.all(\n    transactions.map((transaction) => parseWalletTransactionBody(network, transaction)),\n  );\n\n  await populateTransactions(network, transactions);\n\n  return transactions\n    .map(updateTransactionType)\n    .map(updateTransactionMetadata)\n    .map(omitExtraData)\n    .map(transactionToActivity);\n}\n\nasync function populateTransactions(network: ApiNetwork, transactions: ApiTransactionExtra[]) {\n  const nftAddresses = new Set<string>();\n  const addressesForFixFormat = new Set<string>();\n\n  for (const { extraData: { parsedPayload } } of transactions) {\n    if (parsedPayload?.type === 'nft:ownership-assigned') {\n      nftAddresses.add(parsedPayload.nftAddress);\n      addressesForFixFormat.add(parsedPayload.prevOwner);\n    } else if (parsedPayload?.type === 'nft:transfer') {\n      nftAddresses.add(parsedPayload.nftAddress);\n      addressesForFixFormat.add(parsedPayload.newOwner);\n    }\n  }\n\n  if (nftAddresses.size) {\n    const [rawNfts, addressBook] = await Promise.all([\n      fetchNftItems(network, [...nftAddresses]),\n      fetchAddressBook(network, [...addressesForFixFormat]),\n    ]);\n\n    const nfts = rawNfts\n      .map((rawNft) => buildNft(network, rawNft))\n      .filter(Boolean) as ApiNft[];\n\n    const nftsByAddress = buildCollectionByKey(nfts, 'address');\n\n    for (const transaction of transactions) {\n      const { extraData: { parsedPayload } } = transaction;\n\n      if (parsedPayload?.type === 'nft:ownership-assigned') {\n        const nft = nftsByAddress[parsedPayload.nftAddress];\n        transaction.nft = nft;\n        if (nft?.isScam) {\n          transaction.metadata = { ...transaction.metadata, isScam: true };\n        } else {\n          transaction.fromAddress = addressBook[parsedPayload.prevOwner].user_friendly;\n        }\n      } else if (parsedPayload?.type === 'nft:transfer') {\n        const nft = nftsByAddress[parsedPayload.nftAddress];\n        transaction.nft = nft;\n        if (nft?.isScam) {\n          transaction.metadata = { ...transaction.metadata, isScam: true };\n        } else {\n          transaction.toAddress = addressBook[parsedPayload.newOwner].user_friendly;\n        }\n      }\n    }\n  }\n}\n\nexport async function getMergedTransactionSlice(accountId: string, lastTxIds: ApiTxIdBySlug, limit: number) {\n  // eslint-disable-next-line prefer-const\n  let { toncoin: lastTonTxId, ...tokenLastTxIds } = lastTxIds;\n  const tonTxs = await getAccountTransactionSlice(accountId, lastTonTxId, undefined, limit);\n\n  if (!tonTxs.length) {\n    return [];\n  }\n\n  lastTonTxId = tonTxs[tonTxs.length - 1].txId;\n  const lastTonTxLt = parseTxId(lastTonTxId).lt;\n\n  const results = await Promise.all(Object.entries(tokenLastTxIds).map(([slug, lastTxId]) => {\n    if (lastTxId && parseTxId(lastTxId).lt < lastTonTxLt) {\n      return [];\n    }\n\n    return getTokenTransactionSlice(accountId, slug, lastTxId, lastTonTxId, GET_TRANSACTIONS_MAX_LIMIT);\n  }));\n\n  const allTxs = [...tonTxs, ...results.flat()];\n  allTxs.sort(compareActivities);\n\n  return allTxs;\n}\n\nexport async function getTokenTransactionSlice(\n  accountId: string,\n  tokenSlug: string,\n  toTxId?: string,\n  fromTxId?: string,\n  limit?: number,\n): Promise<ApiTransactionActivity[]> {\n  if (tokenSlug === TONCOIN_SLUG) {\n    return getAccountTransactionSlice(accountId, toTxId, fromTxId, limit);\n  }\n\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const minterAddress = resolveTokenBySlug(tokenSlug).minterAddress!;\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, address, minterAddress);\n\n  const transactions = await fetchTransactions(\n    network, tokenWalletAddress, limit ?? GET_TRANSACTIONS_LIMIT, toTxId, fromTxId,\n  );\n\n  return transactions\n    .map((tx) => parseTokenTransaction(network, tx, tokenSlug, address))\n    .filter(Boolean)\n    .map(updateTransactionMetadata)\n    .map(omitExtraData)\n    .map(transactionToActivity);\n}\n\nfunction omitExtraData(tx: ApiTransactionExtra): ApiTransaction {\n  return omit(tx, ['extraData']);\n}\n\nfunction updateTransactionType(transaction: ApiTransactionExtra) {\n  const { amount, extraData } = transaction;\n  let { comment } = transaction;\n\n  const normalizedFromAddress = toBase64Address(transaction.fromAddress, true);\n  const normalizedToAddress = toBase64Address(transaction.toAddress, true);\n\n  let type: ApiTransactionType | undefined;\n\n  if (isKnownStakingPool(normalizedFromAddress) && amount > ONE_TON) {\n    type = 'unstake';\n  } else if (isKnownStakingPool(normalizedToAddress)) {\n    if (comment === STAKE_COMMENT) {\n      type = 'stake';\n    } else if (comment === UNSTAKE_COMMENT) {\n      type = 'unstakeRequest';\n    }\n  } else if (extraData?.parsedPayload && !transaction.metadata?.isScam) {\n    const payload = extraData.parsedPayload;\n\n    if (payload.type === 'tokens:burn' && payload.isLiquidUnstakeRequest) {\n      type = 'unstakeRequest';\n    } else if (payload.type === 'liquid-staking:deposit') {\n      type = 'stake';\n    } else if (payload.type === 'liquid-staking:withdrawal' || payload.type === 'liquid-staking:withdrawal-nft') {\n      type = 'unstake';\n    } else if (payload.type === 'nft:transfer') {\n      type = 'nftTransferred';\n      comment = payload.comment;\n    } else if (payload.type === 'nft:ownership-assigned') {\n      type = 'nftReceived';\n      comment = payload.comment;\n    }\n  }\n\n  return {\n    ...transaction,\n    type,\n    comment,\n  };\n}\n\nfunction transactionToActivity(transaction: ApiTransaction): ApiTransactionActivity {\n  return {\n    ...transaction,\n    kind: 'transaction',\n    id: transaction.txId,\n  };\n}\n\nexport async function checkMultiTransactionDraft(\n  accountId: string,\n  messages: TonTransferParams[],\n  withDiesel = false,\n) {\n  const { network } = parseAccountId(accountId);\n\n  const result: {\n    fee?: bigint;\n    totalAmount?: bigint;\n  } = {};\n\n  let totalAmount: bigint = 0n;\n\n  const account = await fetchStoredAccount(accountId);\n\n  try {\n    for (const { toAddress, amount } of messages) {\n      if (amount < 0n) {\n        return { ...result, error: ApiTransactionDraftError.InvalidAmount };\n      }\n\n      const isMainnet = network === 'mainnet';\n      const { isValid, isTestOnly } = parseAddress(toAddress);\n\n      if (!isValid || (isMainnet && isTestOnly)) {\n        return { ...result, error: ApiTransactionDraftError.InvalidToAddress };\n      }\n      totalAmount += amount;\n    }\n\n    const wallet = await pickAccountWallet(accountId);\n\n    if (!wallet) {\n      return { ...result, error: ApiCommonError.Unexpected };\n    }\n\n    const { balance } = await getWalletInfo(network, wallet);\n\n    const { transaction } = await signMultiTransaction(network, wallet, messages);\n\n    const realFee = await calculateFee(network, wallet, transaction, account.isInitialized);\n\n    // TODO Should be `0` for `withDiesel`?\n    result.totalAmount = totalAmount;\n    result.fee = bigintMultiplyToNumber(realFee, FEE_FACTOR);\n\n    if (!withDiesel && balance < totalAmount + realFee) {\n      return { ...result, error: ApiTransactionDraftError.InsufficientBalance };\n    }\n\n    return result as { fee: bigint; totalAmount: bigint };\n  } catch (err: any) {\n    return handleServerError(err);\n  }\n}\n\nexport async function submitMultiTransfer(\n  accountId: string,\n  password: string,\n  messages: TonTransferParams[],\n  expireAt?: number,\n  withDiesel = false,\n): Promise<ApiSubmitMultiTransferResult> {\n  const { network } = parseAccountId(accountId);\n\n  try {\n    const [wallet, account, privateKey] = await Promise.all([\n      pickAccountWallet(accountId),\n      fetchStoredAccount(accountId),\n      fetchPrivateKey(accountId, password),\n    ]);\n\n    const { address: fromAddress } = account;\n\n    let totalAmount = 0n;\n    messages.forEach((message) => {\n      totalAmount += BigInt(message.amount);\n    });\n\n    await waitPendingTransfer(network, fromAddress);\n\n    const { balance } = await getWalletInfo(network, wallet!);\n\n    const { seqno, transaction } = await signMultiTransaction(\n      network, wallet!, messages, privateKey, expireAt,\n    );\n\n    if (!withDiesel) {\n      const fee = await calculateFee(network, wallet!, transaction, account.isInitialized);\n      if (balance < totalAmount + fee) {\n        return { error: ApiTransactionError.InsufficientBalance };\n      }\n    }\n\n    const client = getTonClient(network);\n    const { msgHash, boc } = await sendExternal(client, wallet!, transaction, withDiesel);\n\n    if (!withDiesel) {\n      addPendingTransfer(network, fromAddress, seqno, boc);\n    }\n\n    const clearedMessages = messages.map((message) => {\n      if (typeof message.payload !== 'string' && typeof message.payload !== 'undefined') {\n        return omit(message, ['payload']);\n      }\n      return message;\n    });\n\n    return {\n      seqno,\n      amount: totalAmount.toString(),\n      messages: clearedMessages,\n      boc,\n      msgHash,\n    };\n  } catch (err) {\n    logDebugError('submitMultiTransfer', err);\n    return { error: resolveTransactionError(err) };\n  }\n}\n\nasync function signMultiTransaction(\n  network: ApiNetwork,\n  wallet: TonWallet,\n  messages: TonTransferParams[],\n  privateKey: Uint8Array = new Uint8Array(64),\n  expireAt?: number,\n) {\n  const { seqno } = await getWalletInfo(network, wallet);\n  if (!expireAt) {\n    expireAt = Math.round(Date.now() / 1000) + TRANSFER_TIMEOUT_SEC;\n  }\n\n  const preparedMessages = messages.map((message) => {\n    const {\n      amount, toAddress, stateInit, isBase64Payload,\n    } = message;\n    let { payload } = message;\n\n    if (isBase64Payload && typeof payload === 'string') {\n      payload = Cell.fromBase64(payload);\n    }\n\n    const init = stateInit ? {\n      code: stateInit.refs[0],\n      data: stateInit.refs[1],\n    } : undefined;\n\n    return internal({\n      value: amount,\n      to: toAddress,\n      body: payload as Cell | string | undefined, // TODO Fix Uint8Array type\n      bounce: parseAddress(toAddress).isBounceable,\n      init,\n    });\n  });\n\n  const transaction = wallet.createTransfer({\n    seqno,\n    secretKey: Buffer.from(privateKey),\n    messages: preparedMessages,\n    sendMode: SendMode.PAY_GAS_SEPARATELY + SendMode.IGNORE_ERRORS,\n    timeout: expireAt,\n  });\n\n  const externalMessage = toExternalMessage(wallet, seqno, transaction);\n\n  return { seqno, transaction, externalMessage };\n}\n\nfunction toExternalMessage(\n  contract: TonWallet,\n  seqno: number,\n  body: Cell,\n) {\n  return beginCell()\n    .storeWritable(\n      storeMessage(\n        external({\n          to: contract.address,\n          init: seqno === 0 ? contract.init : undefined,\n          body,\n        }),\n      ),\n    )\n    .endCell();\n}\n\nfunction addPendingTransfer(network: ApiNetwork, address: string, seqno: number, boc: string) {\n  const key = buildPendingTransferKey(network, address);\n  const timestamp = Date.now();\n  const promise = retrySendBoc({\n    network, address, boc, seqno, timestamp,\n  });\n\n  pendingTransfers[key] = {\n    timestamp,\n    seqno,\n    promise,\n  };\n}\n\nasync function retrySendBoc({\n  network, address, boc, seqno, timestamp,\n}: {\n  network: ApiNetwork;\n  address: string;\n  boc: string;\n  seqno: number;\n  timestamp: number;\n}) {\n  const tonClient = getTonClient(network);\n  const waitUntil = timestamp + WAIT_TRANSFER_TIMEOUT;\n\n  while (Date.now() < waitUntil) {\n    const error = await tonClient.sendFile(boc).catch((err) => String(err));\n\n    // Errors mean that `seqno` was changed or not enough of balance\n    if (error?.includes('exitcode=33') || error?.includes('inbound external message rejected by account')) {\n      return;\n    }\n\n    await pause(WAIT_TRANSFER_PAUSE);\n    const walletInfo = await getWalletInfo(network, address).catch(() => undefined);\n\n    // seqno here may change before exit code appears\n    if (walletInfo && walletInfo.seqno > seqno) {\n      return;\n    }\n\n    await pause(WAIT_TRANSFER_PAUSE);\n  }\n}\n\nexport async function waitPendingTransfer(network: ApiNetwork, address: string) {\n  const key = buildPendingTransferKey(network, address);\n  const pendingTransfer = pendingTransfers[key];\n  if (!pendingTransfer) return;\n\n  await pendingTransfer.promise;\n\n  delete pendingTransfers[key];\n}\n\nfunction buildPendingTransferKey(network: ApiNetwork, address: string) {\n  return `${network}:${address}`;\n}\n\nasync function calculateFee(network: ApiNetwork, wallet: TonWallet, transaction: Cell, isInitialized?: boolean) {\n  // eslint-disable-next-line no-null/no-null\n  const { code = null, data = null } = !isInitialized ? wallet.init : {};\n\n  const { source_fees: fees } = await getTonClient(network).estimateExternalMessageFee(wallet.address, {\n    body: transaction,\n    initCode: code,\n    initData: data,\n    ignoreSignature: true,\n  });\n\n  return BigInt(fees.in_fwd_fee + fees.storage_fee + fees.gas_fee + fees.fwd_fee);\n}\n\nexport async function sendSignedMessage(accountId: string, message: ApiSignedTransfer) {\n  const { network } = parseAccountId(accountId);\n  const { address: fromAddress, publicKey, version } = await fetchStoredAccount(accountId);\n  const client = getTonClient(network);\n  const wallet = client.open(getTonWalletContract(publicKey, version!));\n\n  const { base64, seqno } = message;\n  const { msgHash, boc } = await sendExternal(client, wallet, Cell.fromBase64(base64));\n\n  addPendingTransfer(network, fromAddress, seqno, boc);\n\n  return msgHash;\n}\n\nexport async function sendSignedMessages(accountId: string, messages: ApiSignedTransfer[]) {\n  const { network } = parseAccountId(accountId);\n  const { address: fromAddress, publicKey, version } = await fetchStoredAccount(accountId);\n  const client = getTonClient(network);\n  const wallet = client.open(getTonWalletContract(publicKey, version!));\n\n  const attempts = ATTEMPTS + messages.length;\n  let index = 0;\n  let attempt = 0;\n\n  let firstBoc: string | undefined;\n\n  const msgHashes: string[] = [];\n  while (index < messages.length && attempt < attempts) {\n    const { base64, seqno } = messages[index];\n    try {\n      await waitPendingTransfer(network, fromAddress);\n\n      const { msgHash, boc } = await sendExternal(client, wallet, Cell.fromBase64(base64));\n      msgHashes.push(msgHash);\n\n      if (index === 0) {\n        firstBoc = boc;\n      }\n\n      addPendingTransfer(network, fromAddress, seqno, boc);\n\n      index++;\n    } catch (err) {\n      logDebugError('sendSignedMessages', err);\n    }\n    attempt++;\n  }\n\n  return { successNumber: index, firstBoc, msgHashes };\n}\n\nexport async function decryptComment(\n  accountId: string, encryptedComment: string, fromAddress: string, password: string,\n) {\n  const keyPair = await fetchKeyPair(accountId, password);\n  if (!keyPair) {\n    return undefined;\n  }\n\n  const { secretKey, publicKey } = keyPair;\n\n  const buffer = Buffer.from(encryptedComment, 'base64');\n\n  return decryptMessageComment(buffer, publicKey, secretKey, fromAddress);\n}\n\nexport async function waitUntilTransactionAppears(network: ApiNetwork, address: string, txId: string) {\n  const { lt } = parseTxId(txId);\n\n  if (lt === 0) {\n    return;\n  }\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const latestTxId = await fetchLatestTxId(network, address);\n    if (latestTxId && parseTxId(latestTxId).lt >= lt) {\n      return;\n    }\n    await pause(WAIT_TRANSACTION_PAUSE);\n  }\n}\n\nexport async function fetchNewestTxId(network: ApiNetwork, address: string) {\n  const transactions = await fetchTransactions(network, address, 1);\n\n  if (!transactions.length) {\n    return undefined;\n  }\n\n  return transactions[0].txId;\n}\n\nexport async function fixTokenActivitiesAddressForm(network: ApiNetwork, activities: ApiActivity[]) {\n  const tokenAddresses: Set<string> = new Set();\n\n  for (const activity of activities) {\n    if (activity.kind === 'transaction' && activity.slug !== TONCOIN_SLUG) {\n      tokenAddresses.add(activity.fromAddress);\n      tokenAddresses.add(activity.toAddress);\n    }\n  }\n\n  if (!tokenAddresses.size) {\n    return;\n  }\n\n  const addressBook = await fetchAddressBook(network, Array.from(tokenAddresses));\n\n  for (const activity of activities) {\n    if (activity.kind === 'transaction' && activity.slug !== TONCOIN_SLUG) {\n      activity.fromAddress = addressBook[activity.fromAddress].user_friendly;\n      activity.toAddress = addressBook[activity.toAddress].user_friendly;\n    }\n  }\n}\n\nexport async function fetchEstimateDiesel(accountId: string, tokenAddress: string) {\n  const { network } = parseAccountId(accountId);\n  if (network !== 'mainnet') return undefined;\n\n  const wallet = await pickAccountWallet(accountId);\n  if (!wallet) return undefined;\n\n  const account = await fetchStoredAccount(accountId);\n  const { address } = account;\n  const balance = await getWalletBalance(network, wallet);\n\n  if (balance >= MAX_BALANCE_WITH_CHECK_DIESEL) return undefined;\n\n  const {\n    status,\n    amount,\n    pendingCreatedAt,\n  } = await estimateDiesel(address, tokenAddress);\n  const { decimals } = findTokenByMinter(tokenAddress)!;\n\n  const isAwaitingNotExpiredPrevious = Boolean(\n    pendingCreatedAt\n      && Date.now() - new Date(pendingCreatedAt).getTime() > PENDING_DIESEL_TIMEOUT,\n  );\n\n  return {\n    status,\n    amount: amount ? fromDecimal(amount, decimals) : undefined,\n    pendingCreatedAt,\n    isAwaitingNotExpiredPrevious,\n  };\n}\n","import type { NftItem } from 'tonapi-sdk-js';\nimport type { Cell } from '@ton/core';\nimport { Address, Builder } from '@ton/core';\n\nimport type { ApiNft, ApiNftUpdate } from '../../types';\nimport type { ApiCheckTransactionDraftResult } from './types';\n\nimport {\n  BURN_ADDRESS,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  NOTCOIN_FORWARD_TON_AMOUNT,\n  NOTCOIN_VOUCHERS_ADDRESS,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { compact } from '../../../util/iteratees';\nimport { generateQueryId } from './util';\nimport { buildNft } from './util/metadata';\nimport { fetchAccountEvents, fetchAccountNfts, fetchNftItems } from './util/tonapiio';\nimport { commentToBytes, packBytesAsSnake, toBase64Address } from './util/tonCore';\nimport { fetchStoredAccount, fetchStoredAddress } from '../../common/accounts';\nimport { NFT_TRANSFER_TONCOIN_AMOUNT, NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT, NftOpCode } from './constants';\nimport { checkMultiTransactionDraft, checkToAddress, submitMultiTransfer } from './transactions';\nimport { isActiveSmartContract } from './wallet';\n\nexport async function getAccountNfts(accountId: string, offset?: number, limit?: number): Promise<ApiNft[]> {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const rawNfts = await fetchAccountNfts(network, address, { offset, limit });\n  return compact(rawNfts.map((rawNft) => buildNft(network, rawNft)));\n}\n\nexport async function getNftUpdates(accountId: string, fromSec: number) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const events = await fetchAccountEvents(network, address, fromSec);\n  fromSec = events[0]?.timestamp ?? fromSec;\n  events.reverse();\n  const updates: ApiNftUpdate[] = [];\n\n  for (const event of events) {\n    for (const action of event.actions) {\n      let to: string;\n      let nftAddress: string;\n      let rawNft: NftItem | undefined;\n      const isPurchase = !!action.NftPurchase;\n\n      if (action.NftItemTransfer) {\n        const { sender, recipient, nft: rawNftAddress } = action.NftItemTransfer;\n        if (!sender || !recipient) continue;\n        to = toBase64Address(recipient.address, undefined, network);\n        nftAddress = toBase64Address(rawNftAddress, true, network);\n      } else if (action.NftPurchase) {\n        const { buyer } = action.NftPurchase;\n        to = toBase64Address(buyer.address, undefined, network);\n        rawNft = action.NftPurchase.nft;\n        if (!rawNft) {\n          continue;\n        }\n        nftAddress = toBase64Address(rawNft.address, true, network);\n      } else {\n        continue;\n      }\n\n      if (to === address) {\n        if (!rawNft) {\n          [rawNft] = await fetchNftItems(network, [nftAddress]);\n        }\n\n        if (rawNft) {\n          const nft = buildNft(network, rawNft);\n\n          if (nft) {\n            updates.push({\n              type: 'nftReceived',\n              accountId,\n              nftAddress,\n              nft,\n            });\n          }\n        }\n      } else if (!isPurchase && await isActiveSmartContract(network, to)) {\n        updates.push({\n          type: 'nftPutUpForSale',\n          accountId,\n          nftAddress,\n        });\n      } else {\n        updates.push({\n          type: 'nftSent',\n          accountId,\n          nftAddress,\n        });\n      }\n    }\n  }\n\n  return [fromSec, updates] as [number, ApiNftUpdate[]];\n}\n\nexport async function checkNftTransferDraft(options: {\n  accountId: string;\n  nftAddresses: string[];\n  toAddress: string;\n  comment?: string;\n}): Promise<ApiCheckTransactionDraftResult> {\n  const { accountId, nftAddresses, comment } = options;\n  let { toAddress } = options;\n\n  const { network } = parseAccountId(accountId);\n  const { address: fromAddress } = await fetchStoredAccount(accountId);\n\n  const checkAddressResult = await checkToAddress(network, toAddress);\n\n  if ('error' in checkAddressResult) {\n    return checkAddressResult;\n  }\n\n  toAddress = checkAddressResult.resolvedAddress!;\n\n  // We only need to check the first batch of a multi-transaction\n  const messages = nftAddresses.slice(0, NFT_BATCH_SIZE).map((nftAddress) => {\n    return {\n      payload: buildNftTransferPayload(fromAddress, toAddress, comment),\n      amount: NFT_TRANSFER_TONCOIN_AMOUNT,\n      toAddress: nftAddress,\n    };\n  });\n\n  const result = await checkMultiTransactionDraft(accountId, messages);\n\n  if ('error' in result) {\n    return result;\n  }\n\n  return {\n    ...result,\n    ...checkAddressResult,\n  };\n}\n\nexport async function submitNftTransfers(options: {\n  accountId: string;\n  password: string;\n  nftAddresses: string[];\n  toAddress: string;\n  comment?: string;\n  nfts?: ApiNft[];\n}) {\n  const {\n    accountId, password, nftAddresses, toAddress, comment, nfts,\n  } = options;\n\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const messages = nftAddresses.map((nftAddress, index) => {\n    const nft = nfts?.[index];\n    const isNotcoinBurn = nft?.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS\n      && (toAddress === BURN_ADDRESS || NOTCOIN_EXCHANGERS.includes(toAddress as any));\n    const payload = isNotcoinBurn\n      ? buildNotcoinVoucherExchange(fromAddress, nftAddress, nft!.index)\n      : buildNftTransferPayload(fromAddress, toAddress, comment);\n\n    return {\n      payload,\n      amount: NFT_TRANSFER_TONCOIN_AMOUNT,\n      toAddress: nftAddress,\n    };\n  });\n\n  return submitMultiTransfer(accountId, password, messages);\n}\n\nfunction buildNotcoinVoucherExchange(fromAddress: string, nftAddress: string, nftIndex: number) {\n  // eslint-disable-next-line no-bitwise\n  const first4Bits = Address.parse(nftAddress).hash.readUint8() >> 4;\n  const toAddress = NOTCOIN_EXCHANGERS[first4Bits];\n\n  const payload = new Builder()\n    .storeUint(0x5fec6642, 32)\n    .storeUint(nftIndex, 64)\n    .endCell();\n\n  return buildNftTransferPayload(fromAddress, toAddress, payload, NOTCOIN_FORWARD_TON_AMOUNT);\n}\n\nfunction buildNftTransferPayload(\n  fromAddress: string,\n  toAddress: string,\n  payload?: string | Cell,\n  forwardAmount = NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT,\n) {\n  let builder = new Builder()\n    .storeUint(NftOpCode.TransferOwnership, 32)\n    .storeUint(generateQueryId(), 64)\n    .storeAddress(Address.parse(toAddress))\n    .storeAddress(Address.parse(fromAddress))\n    .storeBit(false) // null custom_payload\n    .storeCoins(forwardAmount);\n\n  let forwardPayload: Cell | Uint8Array | undefined;\n\n  if (payload) {\n    if (typeof payload === 'string') {\n      const bytes = commentToBytes(payload);\n      const freeBytes = Math.floor(builder.availableBits / 8);\n      forwardPayload = packBytesAsSnake(bytes, freeBytes);\n    } else {\n      forwardPayload = payload;\n    }\n  }\n\n  if (forwardPayload instanceof Uint8Array) {\n    builder.storeBit(0);\n    builder = builder.storeBuffer(Buffer.from(forwardPayload));\n  } else {\n    builder = builder.storeMaybeRef(forwardPayload);\n  }\n\n  return builder.endCell();\n}\n","import type {\n  Cell, Contract, ContractProvider,\n} from '@ton/core';\nimport {\n  Address, beginCell, contractAddress, TupleReader,\n} from '@ton/core';\n\nexport type NominatorPoolConfig = {};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function nominatorPoolConfigToCell(config: NominatorPoolConfig): Cell {\n  return beginCell().endCell();\n}\n\nexport class NominatorPool implements Contract {\n  constructor(readonly address: Address, readonly init?: { code: Cell; data: Cell }) {}\n\n  static createFromAddress(address: Address) {\n    return new NominatorPool(address);\n  }\n\n  static createFromConfig(config: NominatorPoolConfig, code: Cell, workchain = 0) {\n    const data = nominatorPoolConfigToCell(config);\n    const init = { code, data };\n    return new NominatorPool(contractAddress(workchain, init), init);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getListNominators(provider: ContractProvider): Promise<{\n    address: Address;\n    amount: bigint;\n    pendingDepositAmount: bigint;\n    withdrawRequested: boolean;\n  }[]> {\n    const res = await provider.get('list_nominators', []);\n    const tupleReader = (res.stack as TupleReader).readTuple();\n    const itemsArray = (tupleReader as any).items as bigint[][];\n\n    return itemsArray.map((items: bigint[]) => {\n      const tupleItems = items.map((value) => ({ type: 'int' as const, value }));\n      const tuple = new TupleReader(tupleItems);\n\n      const hash = tuple.readBigNumber().toString(16).padStart(64, '0');\n      const address = Address.parse(`0:${hash}`);\n      const amount = tuple.readBigNumber();\n      const pendingDepositAmount = tuple.readBigNumber();\n      const withdrawRequested = Boolean(tuple.readNumber());\n\n      return {\n        address,\n        amount,\n        pendingDepositAmount,\n        withdrawRequested,\n      };\n    });\n  }\n}\n","import type { ApiStakingCommonData } from '../types';\n\nexport type AccountCache = { stakedAt?: number };\n\nlet stakingCommonCache: ApiStakingCommonData;\nconst accountCache: Record<string, AccountCache> = {};\n\nexport function getAccountCache(accountId: string, address: string) {\n  return accountCache[`${accountId}:${address}`] ?? {};\n}\n\nexport function updateAccountCache(accountId: string, address: string, partial: Partial<AccountCache>) {\n  const key = `${accountId}:${address}`;\n  accountCache[key] = { ...accountCache[key], ...partial };\n}\n\nexport function setStakingCommonCache(data: ApiStakingCommonData) {\n  stakingCommonCache = data;\n}\n\nexport function getStakingCommonCache() {\n  return stakingCommonCache;\n}\n","import type { ApiNft } from './types';\n\nimport Dexie from '../lib/dexie/dexie';\nimport Table = Dexie.Table;\n\nexport type ApiDbNft = ApiNft & {\n  accountId: string;\n  collectionAddress: string;\n};\n\nexport type ApiDbSseConnection = {\n  clientId: string;\n};\n\nconst DB_NANE = 'tables';\n\nexport class ApiDb extends Dexie {\n  nfts!: Table<ApiDbNft>;\n\n  constructor() {\n    super(DB_NANE);\n    this.version(1).stores({\n      nfts: '[accountId+address], accountId, address, collectionAddress',\n    });\n    this.version(2).stores({\n      sseConnections: '&clientId',\n    });\n  }\n}\n\nexport const apiDb = new ApiDb();\n","import { Address } from '@ton/core';\n\nimport type {\n  ApiBackendStakingState,\n  ApiNetwork,\n  ApiStakingState,\n  ApiStakingType,\n} from '../../types';\nimport type { ApiCheckTransactionDraftResult, ApiSubmitTransferResult, TonTransferParams } from './types';\nimport { ApiCommonError, ApiLiquidUnstakeMode, ApiTransactionDraftError } from '../../types';\n\nimport {\n  LIQUID_JETTON, LIQUID_POOL, ONE_TON, VALIDATION_PERIOD_MS,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { bigintDivideToNumber, bigintMultiplyToNumber } from '../../../util/bigint';\nimport { fromDecimal } from '../../../util/decimals';\nimport {\n  buildLiquidStakingDepositBody,\n  buildLiquidStakingWithdrawBody,\n  getTokenBalance,\n  getTonClient,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonCore';\nimport { NominatorPool } from './contracts/NominatorPool';\nimport { fetchStoredAddress } from '../../common/accounts';\nimport { getAccountCache, getStakingCommonCache, updateAccountCache } from '../../common/cache';\nimport { apiDb } from '../../db';\nimport { STAKE_COMMENT, UNSTAKE_COMMENT } from './constants';\nimport { checkTransactionDraft, submitTransfer } from './transactions';\nimport { isAddressInitialized } from './wallet';\n\nexport async function checkStakeDraft(\n  accountId: string,\n  amount: bigint,\n  backendState: ApiBackendStakingState,\n) {\n  const staked = await getStakingState(accountId, backendState);\n\n  let type: ApiStakingType;\n  let result: ApiCheckTransactionDraftResult;\n\n  if (staked?.type === 'nominators' && amount >= ONE_TON) {\n    type = 'nominators';\n\n    const poolAddress = backendState.nominatorsPool.address;\n    amount += ONE_TON;\n\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: poolAddress,\n      amount,\n      data: STAKE_COMMENT,\n    });\n  } else if (amount < ONE_TON) {\n    return { error: ApiTransactionDraftError.InvalidAmount };\n  } else {\n    type = 'liquid';\n\n    const body = buildLiquidStakingDepositBody();\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: LIQUID_POOL,\n      amount,\n      data: body,\n    });\n  }\n\n  return {\n    ...result,\n    type,\n  };\n}\n\nexport async function checkUnstakeDraft(\n  accountId: string,\n  amount: bigint,\n  backendState: ApiBackendStakingState,\n) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n  const commonData = getStakingCommonCache();\n  const staked = await getStakingState(accountId, backendState);\n\n  let type: ApiStakingType;\n  let result: ApiCheckTransactionDraftResult;\n  let tokenAmount: bigint | undefined;\n\n  if (staked.type === 'nominators') {\n    type = 'nominators';\n\n    const poolAddress = backendState.nominatorsPool.address;\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: poolAddress,\n      amount: ONE_TON,\n      data: UNSTAKE_COMMENT,\n    });\n  } else if (staked.type === 'liquid') {\n    type = 'liquid';\n\n    if (amount > staked.amount) {\n      return { error: ApiTransactionDraftError.InsufficientBalance };\n    } else if (amount === staked.amount) {\n      tokenAmount = staked.tokenAmount;\n    } else {\n      tokenAmount = bigintDivideToNumber(amount, commonData.liquid.currentRate);\n    }\n\n    const params = await buildLiquidStakingWithdraw(network, address, tokenAmount);\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: params.toAddress,\n      amount: params.amount,\n      data: params.payload,\n    });\n  } else {\n    return { error: ApiCommonError.Unexpected };\n  }\n\n  return {\n    ...result,\n    type,\n    tokenAmount,\n  };\n}\n\nexport async function submitStake(\n  accountId: string,\n  password: string,\n  amount: bigint,\n  type: ApiStakingType,\n  backendState: ApiBackendStakingState,\n) {\n  let result: ApiSubmitTransferResult;\n\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  if (type === 'liquid') {\n    amount += ONE_TON;\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: LIQUID_POOL,\n      amount,\n      data: buildLiquidStakingDepositBody(),\n    });\n  } else {\n    const poolAddress = backendState.nominatorsPool.address;\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: toBase64Address(poolAddress, true, network),\n      amount,\n      data: STAKE_COMMENT,\n    });\n  }\n\n  if (!('error' in result)) {\n    updateAccountCache(accountId, address, { stakedAt: Date.now() });\n  }\n\n  return result;\n}\n\nexport async function submitUnstake(\n  accountId: string,\n  password: string,\n  type: ApiStakingType,\n  amount: bigint,\n  backendState: ApiBackendStakingState,\n) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const staked = await getStakingState(accountId, backendState);\n\n  let result: ApiSubmitTransferResult;\n\n  if (type === 'liquid') {\n    const mode = staked.type === 'liquid' && !staked.instantAvailable\n      ? ApiLiquidUnstakeMode.BestRate\n      : ApiLiquidUnstakeMode.Default;\n\n    const params = await buildLiquidStakingWithdraw(network, address, amount, mode);\n\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: params.toAddress,\n      amount: params.amount,\n      data: params.payload,\n    });\n  } else {\n    const poolAddress = backendState.nominatorsPool.address;\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: toBase64Address(poolAddress, true, network),\n      amount: ONE_TON,\n      data: UNSTAKE_COMMENT,\n    });\n  }\n\n  return result;\n}\n\nexport async function buildLiquidStakingWithdraw(\n  network: ApiNetwork,\n  address: string,\n  amount: bigint,\n  mode: ApiLiquidUnstakeMode = ApiLiquidUnstakeMode.Default,\n): Promise<TonTransferParams> {\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, address, LIQUID_JETTON);\n\n  const payload = buildLiquidStakingWithdrawBody({\n    amount,\n    responseAddress: address,\n    fillOrKill: mode === ApiLiquidUnstakeMode.Instant,\n    waitTillRoundEnd: mode === ApiLiquidUnstakeMode.BestRate,\n  });\n\n  return {\n    amount: ONE_TON,\n    toAddress: tokenWalletAddress,\n    payload,\n  };\n}\n\nexport async function getStakingState(\n  accountId: string,\n  backendState: ApiBackendStakingState,\n): Promise<ApiStakingState> {\n  const commonData = getStakingCommonCache();\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const { currentRate, collection } = commonData.liquid;\n  const tokenBalance = await getLiquidStakingTokenBalance(accountId);\n  let unstakeAmount = 0n;\n\n  if (collection) {\n    const nfts = await apiDb.nfts.where({\n      accountId,\n      collectionAddress: collection,\n    }).toArray();\n\n    for (const nft of nfts) {\n      const billAmount = nft.name?.match(/Bill for (?<amount>[\\d.]+) Pool Jetton/)?.groups?.amount;\n      if (billAmount) {\n        unstakeAmount += fromDecimal(billAmount);\n      }\n    }\n  }\n\n  const { loyaltyType, shouldUseNominators } = backendState;\n\n  const accountCache = getAccountCache(accountId, address);\n  const stakedAt = Math.max(accountCache.stakedAt ?? 0, backendState.stakedAt ?? 0);\n\n  const isInstantUnstake = Date.now() - stakedAt > VALIDATION_PERIOD_MS;\n  const liquidAvailable = isInstantUnstake ? commonData.liquid.available : 0n;\n\n  let liquidApy = commonData.liquid.apy;\n  if (loyaltyType && loyaltyType in commonData.liquid.loyaltyApy) {\n    liquidApy = commonData.liquid.loyaltyApy[loyaltyType];\n  }\n\n  if (tokenBalance > 0n || unstakeAmount > 0n) {\n    const fullTokenAmount = tokenBalance + unstakeAmount;\n    const amount = bigintMultiplyToNumber(fullTokenAmount, currentRate);\n\n    return {\n      type: 'liquid',\n      tokenAmount: tokenBalance,\n      amount,\n      unstakeRequestAmount: unstakeAmount,\n      apy: liquidApy,\n      instantAvailable: liquidAvailable,\n    };\n  }\n\n  const poolAddress = backendState.nominatorsPool.address;\n\n  if (backendState.type === 'nominators') {\n    const nominatorPool = getPoolContract(network, poolAddress);\n    const nominators = await nominatorPool.getListNominators();\n    const addressObject = Address.parse(address);\n    const currentNominator = nominators.find((n) => n.address.equals(addressObject));\n\n    if (currentNominator) {\n      return {\n        type: 'nominators',\n        amount: backendState.balance,\n        pendingDepositAmount: currentNominator.pendingDepositAmount,\n        isUnstakeRequested: currentNominator.withdrawRequested,\n      };\n    }\n  }\n\n  if (shouldUseNominators) {\n    return {\n      type: 'nominators',\n      amount: 0n,\n      pendingDepositAmount: 0n,\n      isUnstakeRequested: false,\n    };\n  } else {\n    return {\n      type: 'liquid',\n      tokenAmount: 0n,\n      amount: 0n,\n      unstakeRequestAmount: 0n,\n      apy: liquidApy,\n      instantAvailable: liquidAvailable,\n    };\n  }\n}\n\nfunction getPoolContract(network: ApiNetwork, poolAddress: string) {\n  return getTonClient(network).open(new NominatorPool(Address.parse(poolAddress)));\n}\n\nasync function getLiquidStakingTokenBalance(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  if (network !== 'mainnet') {\n    return 0n;\n  }\n\n  const address = await fetchStoredAddress(accountId);\n  const walletAddress = await resolveTokenWalletAddress(network, address, LIQUID_JETTON);\n  const isInitialized = await isAddressInitialized(network, walletAddress);\n\n  if (!isInitialized) {\n    return 0n;\n  }\n\n  return getTokenBalance(network, walletAddress);\n}\n","import { Builder, Cell } from '@ton/core';\n\nimport type { ApiNetwork } from '../../types';\n\nimport { getTonClient } from './util/tonCore';\n\nexport function packPayloadToBoc(payload: string | Uint8Array) {\n  let cell = new Cell();\n  if (payload) {\n    if (payload instanceof Cell) {\n      cell = payload;\n    } else if (typeof payload === 'string') {\n      if (payload.length > 0) {\n        cell = new Builder()\n          .storeUint(0, 32)\n          .storeStringTail(payload)\n          .asCell();\n      }\n    } else {\n      cell = new Builder()\n        .storeBuffer(Buffer.from(payload))\n        .asCell();\n    }\n  }\n  return cell.toBoc().toString('base64');\n}\n\nexport async function checkApiAvailability(network: ApiNetwork) {\n  try {\n    await getTonClient(network).getMasterchainInfo();\n    return true;\n  } catch (err: any) {\n    return false;\n  }\n}\n","import type { ApiNetwork, ApiSwapBuildRequest, ApiTokensTransferPayload } from '../../types';\nimport type { TonTransferParams } from './types';\n\nimport { SWAP_FEE_ADDRESS, TON_SYMBOL } from '../../../config';\nimport { assert } from '../../../util/assert';\nimport { fromDecimal } from '../../../util/decimals';\nimport { parsePayloadBase64 } from './util/metadata';\nimport { resolveTokenWalletAddress, toBase64Address } from './util/tonCore';\nimport { findTokenByMinter } from './tokens';\nimport { getContractInfo } from './wallet';\n\nconst MEGATON_WTON_MINTER = 'EQCajaUU1XXSAjTD-xOV7pE49fGtg4q8kF3ELCOJtGvQFQ2C';\nconst MAX_NETWORK_FEE = 1000000000n; // 1 TON\n\nexport async function validateDexSwapTransfers(\n  network: ApiNetwork,\n  address: string,\n  request: ApiSwapBuildRequest,\n  transfers: TonTransferParams[],\n) {\n  assert(transfers.length <= 2);\n\n  const [mainTransfer, feeTransfer] = transfers;\n\n  if (request.from === TON_SYMBOL) {\n    const maxAmount = fromDecimal(request.fromAmount) + MAX_NETWORK_FEE;\n    const { isSwapAllowed, codeHash } = await getContractInfo(network, mainTransfer.toAddress);\n\n    assert(!!isSwapAllowed, `Not allowed swap contract: ${codeHash} ${mainTransfer.toAddress}`);\n    assert(mainTransfer.amount <= maxAmount);\n\n    if (feeTransfer) {\n      assert(feeTransfer.amount <= mainTransfer.amount);\n      assert(feeTransfer.amount + mainTransfer.amount < maxAmount);\n      assert(toBase64Address(feeTransfer.toAddress, false) === SWAP_FEE_ADDRESS);\n    }\n  } else {\n    const token = findTokenByMinter(request.from)!;\n    assert(!!token);\n\n    const maxAmount = fromDecimal(request.fromAmount, token.decimals);\n    const maxTonAmount = MAX_NETWORK_FEE;\n\n    const walletAddress = await resolveTokenWalletAddress(network, address, token.minterAddress!);\n    const parsedPayload = await parsePayloadBase64(network, mainTransfer.toAddress, mainTransfer.payload as string);\n\n    let destination: string;\n    let tokenAmount = 0n;\n\n    if (mainTransfer.toAddress === MEGATON_WTON_MINTER) {\n      destination = mainTransfer.toAddress;\n      assert(mainTransfer.toAddress === token.minterAddress);\n    } else {\n      assert(mainTransfer.toAddress === walletAddress);\n      assert(['tokens:transfer', 'tokens:transfer-non-standard'].includes(parsedPayload.type));\n\n      ({ amount: tokenAmount, destination } = parsedPayload as ApiTokensTransferPayload);\n      assert(tokenAmount <= maxAmount);\n    }\n\n    assert(mainTransfer.amount < maxTonAmount);\n\n    const { isSwapAllowed } = await getContractInfo(network, destination);\n\n    assert(!!isSwapAllowed);\n\n    if (feeTransfer) {\n      const feePayload = await parsePayloadBase64(network, feeTransfer.toAddress, feeTransfer.payload as string);\n\n      assert(feeTransfer.amount + mainTransfer.amount < maxTonAmount);\n      assert(feeTransfer.toAddress === walletAddress);\n      assert(['tokens:transfer', 'tokens:transfer-non-standard'].includes(feePayload.type));\n\n      const { amount: tokenFeeAmount, destination: feeDestination } = feePayload as ApiTokensTransferPayload;\n\n      assert(tokenAmount + tokenFeeAmount <= maxAmount);\n      assert(toBase64Address(feeDestination, false) === SWAP_FEE_ADDRESS);\n    }\n  }\n}\n","export {\n  encryptMnemonic,\n  decryptMnemonic,\n  fetchMnemonic,\n  generateMnemonic,\n  rawSign,\n  mnemonicToKeyPair,\n  validateMnemonic,\n  verifyPassword,\n  fetchPrivateKey,\n} from './auth';\nexport {\n  getAccountNfts,\n  getNftUpdates,\n  checkNftTransferDraft,\n  submitNftTransfers,\n} from './nfts';\nexport { oneCellFromBoc } from './util/tonCore';\nexport { buildTokenSlug } from './util';\nexport {\n  checkTransactionDraft,\n  getAccountNewestTxId,\n  getAccountTransactionSlice,\n  getTokenTransactionSlice,\n  submitTransfer,\n  waitPendingTransfer,\n  checkMultiTransactionDraft,\n  submitMultiTransfer,\n  getMergedTransactionSlice,\n  sendSignedMessage,\n  sendSignedMessages,\n  decryptComment,\n  waitUntilTransactionAppears,\n  fixTokenActivitiesAddressForm,\n  submitTransferWithDiesel,\n  fetchEstimateDiesel,\n} from './transactions';\nexport {\n  getAccountBalance,\n  pickAccountWallet,\n  pickBestWallet,\n  publicKeyToAddress,\n  resolveWalletVersion,\n  getWalletStateInit,\n  getWalletBalance,\n  getWalletSeqno,\n  isAddressInitialized,\n  isActiveSmartContract,\n  getWalletInfo,\n  pickWalletByAddress,\n  getWalletVersions,\n  getWalletVersionInfos,\n  getContractInfo,\n} from './wallet';\nexport {\n  checkStakeDraft,\n  checkUnstakeDraft,\n  submitStake,\n  submitUnstake,\n  getStakingState,\n} from './staking';\nexport {\n  packPayloadToBoc,\n  checkApiAvailability,\n} from './other';\nexport {\n  getAccountTokenBalances,\n  getTokenBalances,\n  getAddressTokenBalances,\n  fetchToken,\n  resolveTokenBySlug,\n} from './tokens';\nexport {\n  resolveTokenWalletAddress,\n  resolveTokenMinterAddress,\n} from './util/tonCore';\nexport {\n  parsePayloadBase64,\n} from './util/metadata';\nexport {\n  normalizeAddress,\n} from './address';\nexport {\n  validateDexSwapTransfers,\n} from './swap';\n","import * as ton from './ton';\n\nexport default {\n  ton,\n};\n","import { logDebugError } from '../util/logs';\n\ninterface Hooks {\n  onFirstLogin: AnyFunction;\n  onFullLogout: AnyFunction;\n  onWindowNeeded: AnyFunction;\n  onDappDisconnected: (accountId: string, origin: string) => any;\n  onDappsChanged: AnyFunction;\n  onSwapCreated: (accountId: string, fromTimestamp: number) => any;\n}\n\nconst hooks: Partial<{\n  [K in keyof Hooks]: Hooks[K][];\n}> = {};\n\nexport function addHooks(partial: Partial<Hooks>) {\n  for (const [name, hook] of Object.entries(partial) as Entries<Hooks>) {\n    hooks[name] = (hooks[name] ?? []).concat([hook]);\n  }\n}\n\nexport async function callHook<T extends keyof Hooks>(name: T, ...args: Parameters<Hooks[T]>) {\n  for (const hook of hooks[name] ?? []) {\n    try {\n      // @ts-ignore\n      await hook(...args);\n    } catch (err) {\n      logDebugError(`callHooks:${name}`, err);\n    }\n  }\n}\n","import type {\n  ApiDapp, ApiDappsState, ApiNetwork, ApiSite, OnApiUpdate,\n} from '../types';\n\nimport { buildAccountId, parseAccountId } from '../../util/account';\nimport {\n  getAccountValue, removeAccountValue, removeNetworkAccountsValue, setAccountValue,\n} from '../common/accounts';\nimport { callBackendGet } from '../common/backend';\nimport { isUpdaterAlive } from '../common/helpers';\nimport { callHook } from '../hooks';\nimport { storage } from '../storages';\n\nconst activeDappByAccountId: Record<string, string> = {};\n\nlet onUpdate: OnApiUpdate;\n\nexport function initDapps(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport function onActiveDappAccountUpdated(accountId: string) {\n  const activeDappOrigin = getActiveDapp(accountId);\n\n  onUpdate({\n    type: 'updateActiveDapp',\n    accountId,\n    origin: activeDappOrigin,\n  });\n}\n\nexport function activateDapp(accountId: string, origin: string) {\n  const oldAccountId = findActiveDappAccount(origin);\n  activeDappByAccountId[accountId] = origin;\n\n  // The method can be called in headless mode (tonConnect:reconnect)\n  if (!onUpdate || !isUpdaterAlive(onUpdate)) {\n    return;\n  }\n\n  if (oldAccountId) {\n    onUpdate({\n      type: 'updateActiveDapp',\n      accountId: oldAccountId,\n    });\n  }\n\n  onUpdate({\n    type: 'updateActiveDapp',\n    accountId,\n    origin,\n  });\n}\n\nexport function getActiveDapp(accountId: string) {\n  return activeDappByAccountId[accountId];\n}\n\nexport function deactivateDapp(origin: string) {\n  const accountId = findActiveDappAccount(origin);\n  if (!accountId) {\n    return false;\n  }\n\n  deactivateAccountDapp(accountId);\n\n  return true;\n}\n\nexport function findActiveDappAccount(origin: string) {\n  return Object.keys(activeDappByAccountId).find((acc) => origin === activeDappByAccountId[acc]);\n}\n\nexport function deactivateAccountDapp(accountId: string) {\n  const activeOrigin = activeDappByAccountId[accountId];\n  if (!activeOrigin) {\n    return false;\n  }\n\n  delete activeDappByAccountId[accountId];\n\n  if (onUpdate && isUpdaterAlive(onUpdate)) {\n    onUpdate({\n      type: 'updateActiveDapp',\n      accountId,\n    });\n  }\n\n  return true;\n}\n\nexport function deactivateAllDapps() {\n  for (const [accountId, value] of Object.entries(activeDappByAccountId)) {\n    if (!value) {\n      continue;\n    }\n\n    delete activeDappByAccountId[accountId];\n\n    onUpdate({\n      type: 'updateActiveDapp',\n      accountId,\n    });\n  }\n}\n\nexport function isDappActive(accountId: string, origin: string) {\n  return activeDappByAccountId[accountId] === origin;\n}\n\nexport async function updateDapp(accountId: string, origin: string, updater: (dapp: ApiDapp) => ApiDapp) {\n  const dapp = await getDapp(accountId, origin);\n  await addDapp(accountId, updater(dapp!));\n}\n\nexport async function getDapp(accountId: string, origin: string): Promise<ApiDapp | undefined> {\n  return (await getAccountValue(accountId, 'dapps'))[origin];\n}\n\nexport async function addDapp(accountId: string, dapp: ApiDapp) {\n  const dapps = await getDappsByOrigin(accountId);\n  dapps[dapp.origin] = dapp;\n  await setAccountValue(accountId, 'dapps', dapps);\n}\n\nexport async function deleteDapp(accountId: string, origin: string, dontNotifyDapp?: boolean) {\n  const dapps = await getDappsByOrigin(accountId);\n  if (!(origin in dapps)) {\n    return false;\n  }\n\n  if (isDappActive(accountId, origin)) {\n    deactivateAccountDapp(accountId);\n  }\n\n  delete dapps[origin];\n  await setAccountValue(accountId, 'dapps', dapps);\n\n  if (onUpdate && isUpdaterAlive(onUpdate)) {\n    onUpdate({\n      type: 'dappDisconnect',\n      accountId,\n      origin,\n    });\n  }\n\n  if (!dontNotifyDapp) {\n    await callHook('onDappDisconnected', accountId, origin);\n  }\n\n  await callHook('onDappsChanged');\n\n  return true;\n}\n\nexport async function deleteAllDapps(accountId: string) {\n  deactivateAccountDapp(accountId);\n\n  const origins = Object.keys(await getDappsByOrigin(accountId));\n  await setAccountValue(accountId, 'dapps', {});\n\n  origins.forEach((origin) => {\n    onUpdate({\n      type: 'dappDisconnect',\n      accountId,\n      origin,\n    });\n    void callHook('onDappDisconnected', accountId, origin);\n  });\n\n  await callHook('onDappsChanged');\n}\n\nexport async function getDapps(accountId: string): Promise<ApiDapp[]> {\n  return Object.values(await getDappsByOrigin(accountId));\n}\n\nexport async function getDappsByOrigin(accountId: string): Promise<Record<string, ApiDapp>> {\n  return await getAccountValue(accountId, 'dapps') || {};\n}\n\nexport async function findLastConnectedAccount(network: ApiNetwork, origin: string) {\n  const dapps = await getDappsState() || {};\n\n  let connectedAt = 0;\n  let lastConnectedAccountId: string | undefined;\n\n  Object.entries(dapps).forEach(([accountId, byOrigin]) => {\n    if (!(origin in byOrigin)) return;\n\n    if ((byOrigin[origin].connectedAt) > connectedAt) {\n      connectedAt = byOrigin[origin].connectedAt;\n      lastConnectedAccountId = accountId;\n    }\n  });\n\n  if (!lastConnectedAccountId) {\n    return undefined;\n  }\n\n  return buildAccountId({ ...parseAccountId(lastConnectedAccountId), network });\n}\n\nexport function getDappsState(): Promise<ApiDappsState | undefined> {\n  return storage.getItem('dapps');\n}\n\nexport async function removeAccountDapps(accountId: string) {\n  await removeAccountValue(accountId, 'dapps');\n\n  void callHook('onDappsChanged');\n}\n\nexport async function removeAllDapps() {\n  await storage.removeItem('dapps');\n\n  await callHook('onDappsChanged');\n}\n\nexport function removeNetworkDapps(network: ApiNetwork) {\n  return removeNetworkAccountsValue(network, 'dapps');\n}\n\nexport function getSseLastEventId(): Promise<string | undefined> {\n  return storage.getItem('sseLastEventId');\n}\n\nexport function setSseLastEventId(lastEventId: string) {\n  return storage.setItem('sseLastEventId', lastEventId);\n}\n\nexport function loadExploreSites(): Promise<ApiSite[]> {\n  return callBackendGet('/dapp/catalog');\n}\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import { pause } from './schedulers';\n\nimport Deferred from './Deferred';\n\nconst deferreds = new Set<Deferred>();\n\nlet isFocused = true;\n\nexport function pauseOrFocus(ms: number, msWhenNotFocused = ms) {\n  const deferred = new Deferred();\n\n  deferreds.add(deferred);\n\n  deferred.promise.then(() => {\n    deferreds.delete(deferred);\n  });\n\n  pause(isFocused ? ms : msWhenNotFocused).then(deferred.resolve);\n\n  return deferred.promise;\n}\n\nexport function setIsAppFocused(_isFocused: boolean) {\n  isFocused = _isFocused;\n\n  if (_isFocused) {\n    deferreds.forEach((d) => d.resolve());\n  }\n}\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { ApiTransactionActivity } from '../types';\n\nimport { createCallbackManager } from '../../util/callbacks';\n\nexport const txCallbacks = createCallbackManager();\n\nexport function whenTxComplete(normalizedAddress: string, amount: bigint) {\n  return new Promise<{ result: boolean; transaction: ApiTransactionActivity }>((resolve) => {\n    txCallbacks.addCallback(\n      function callback(transaction: ApiTransactionActivity) {\n        if (transaction.normalizedAddress === normalizedAddress && transaction.amount === -amount) {\n          txCallbacks.removeCallback(callback);\n          resolve({ result: true, transaction });\n        }\n      },\n    );\n  });\n}\n","export function buildSwapId(backendId: string) {\n  return `swap:${backendId}`;\n}\n","import nacl, { randomBytes } from 'tweetnacl';\n\nimport type { AccountCache } from '../common/cache';\nimport type { ApiBlockchainKey, ApiNetwork } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { setIsAppFocused } from '../../util/pauseOrFocus';\nimport blockchains from '../blockchains';\nimport { fetchStoredAccount, fetchStoredAccounts, updateStoredAccount } from '../common/accounts';\nimport { updateAccountCache } from '../common/cache';\nimport { storage } from '../storages';\n\nconst SIGN_MESSAGE = Buffer.from('MyTonWallet_AuthToken_n6i0k4w8pb');\nlet clientId: string | undefined;\n\nexport function checkApiAvailability(options: {\n  accountId: string;\n} | {\n  network: ApiNetwork;\n  blockchainKey: ApiBlockchainKey;\n}) {\n  let network: ApiNetwork;\n  let blockchainKey: ApiBlockchainKey;\n  if ('network' in options) {\n    ({ network, blockchainKey } = options);\n  } else {\n    ({ network, blockchain: blockchainKey } = parseAccountId(options.accountId));\n  }\n\n  const blockchain = blockchains[blockchainKey];\n\n  return blockchain.checkApiAvailability(network);\n}\n\nexport async function getBackendAuthToken(accountId: string, password: string) {\n  const account = await fetchStoredAccount(accountId);\n  let authToken = account.authToken;\n\n  if (!authToken) {\n    const privateKey = await blockchains.ton.fetchPrivateKey(accountId, password);\n    const signature = nacl.sign.detached(SIGN_MESSAGE, privateKey!);\n    authToken = Buffer.from(signature).toString('base64');\n\n    await updateStoredAccount(accountId, { authToken });\n  }\n\n  if (!account.isInitialized) {\n    authToken += `:${account.publicKey}`;\n  }\n\n  return authToken;\n}\n\nexport async function getClientId() {\n  clientId = await storage.getItem('clientId');\n  if (!clientId) {\n    clientId = Buffer.from(randomBytes(10)).toString('hex');\n    await storage.setItem('clientId', clientId);\n  }\n  return clientId;\n}\n\nexport async function fetchAccountConfigForDebugPurposesOnly() {\n  try {\n    const [accounts, mnemonicsEncrypted, stateVersion] = await Promise.all([\n      fetchStoredAccounts(),\n      storage.getItem('mnemonicsEncrypted'),\n      storage.getItem('stateVersion'),\n    ]);\n\n    return JSON.stringify({ accounts, mnemonicsEncrypted, stateVersion });\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n\n    return undefined;\n  }\n}\n\nexport function ping() {\n  return true;\n}\n\nexport function updateAccountMemoryCache(accountId: string, address: string, partial: Partial<AccountCache>) {\n  updateAccountCache(accountId, address, partial);\n}\n\nexport { setIsAppFocused };\n","import type { ApiNetwork } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport blockchains from '../blockchains';\n\nexport function fetchToken(accountId: string, address: string) {\n  const { network, blockchain: blockchainKey } = parseAccountId(accountId);\n  const blockchain = blockchains[blockchainKey];\n\n  return blockchain.fetchToken(network, address);\n}\n\nexport function resolveTokenBySlug(slug: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.resolveTokenBySlug(slug);\n}\n\nexport function resolveTokenWalletAddress(network: ApiNetwork, address: string, minterAddress: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.resolveTokenWalletAddress(network, address, minterAddress);\n}\n\nexport function resolveTokenMinterAddress(network: ApiNetwork, tokenWalletAddress: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.resolveTokenMinterAddress(network, tokenWalletAddress);\n}\n\nexport function buildTokenSlug(address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.buildTokenSlug(address);\n}\n\nexport function fetchTokenBalances(accountId: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getAccountTokenBalances(accountId);\n}\n\nexport function fetchTokenBalancesByAddress(address: string, network: ApiNetwork) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getAddressTokenBalances(address, network);\n}\n","import type { TonTransferParams } from '../blockchains/ton/types';\nimport type {\n  ApiActivity,\n  ApiNetwork,\n  ApiSwapActivity,\n  ApiSwapAsset,\n  ApiSwapBuildRequest,\n  ApiSwapBuildResponse,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapCexCreateTransactionResponse,\n  ApiSwapCexEstimateRequest,\n  ApiSwapCexEstimateResponse,\n  ApiSwapEstimateRequest,\n  ApiSwapEstimateResponse,\n  ApiSwapHistoryItem,\n  ApiSwapPairAsset,\n  ApiSwapTonAsset,\n  ApiSwapTransfer,\n  ApiTransaction,\n  ApiTransactionActivity,\n  OnApiUpdate,\n} from '../types';\n\nimport { TON_SYMBOL, TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { assert } from '../../util/assert';\nimport { fromDecimal } from '../../util/decimals';\nimport { logDebugError } from '../../util/logs';\nimport { pause } from '../../util/schedulers';\nimport { buildSwapId } from '../../util/swap/buildSwapId';\nimport blockchains from '../blockchains';\nimport { buildTokenSlug, parseTxId } from '../blockchains/ton/util';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { callBackendGet, callBackendPost } from '../common/backend';\nimport { callHook } from '../hooks';\nimport { getBackendAuthToken } from './other';\nimport { resolveTokenBySlug } from './tokens';\n\nexport type SwapHistoryRange = {\n  asset: string;\n  fromLt: number;\n  toLt: number;\n  fromTime: number;\n  toTime: number;\n};\n\ntype LtRange = [number, number];\n\nconst SWAP_MAX_LT = 50;\nconst SWAP_WAITING_TIME = 5 * 60 * 1_000; // 5 min\nconst SWAP_WAITING_PAUSE = 1_000; // 1 sec\nconst MAX_OLD_SWAP_ID = 41276;\n\nconst ton = blockchains.ton;\n\nlet onUpdate: OnApiUpdate;\n\nexport function initSwap(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function swapBuildTransfer(\n  accountId: string,\n  password: string,\n  request: ApiSwapBuildRequest,\n) {\n  const { network } = parseAccountId(accountId);\n  const authToken = await getBackendAuthToken(accountId, password);\n\n  const address = await fetchStoredAddress(accountId);\n  const { id, transfers } = await swapBuild(authToken, request);\n\n  const transferList = transfers.map((transfer) => ({\n    ...transfer,\n    amount: BigInt(transfer.amount),\n    isBase64Payload: true,\n  }));\n\n  await ton.validateDexSwapTransfers(network, address, request, transferList);\n\n  const result = await ton.checkMultiTransactionDraft(accountId, transferList, request.shouldTryDiesel);\n\n  if ('error' in result) {\n    return result;\n  }\n\n  return { ...result, id, transfers };\n}\n\nexport async function swapSubmit(\n  accountId: string,\n  password: string,\n  transfers: ApiSwapTransfer[],\n  historyItem: ApiSwapHistoryItem,\n  withDiesel?: boolean,\n) {\n  const address = await fetchStoredAddress(accountId);\n  const transferList = transfers.map((transfer) => ({\n    ...transfer,\n    amount: BigInt(transfer.amount),\n    isBase64Payload: true,\n  }));\n\n  const result = await ton.submitMultiTransfer(\n    accountId, password, transferList, undefined, withDiesel,\n  );\n\n  if ('error' in result) {\n    return result;\n  }\n\n  const from = getSwapItemSlug(historyItem, historyItem.from);\n  const to = getSwapItemSlug(historyItem, historyItem.to);\n\n  const swap: ApiSwapActivity = {\n    ...historyItem,\n    id: buildSwapId(historyItem.id),\n    from,\n    to,\n    kind: 'swap',\n  };\n\n  const authToken = await getBackendAuthToken(accountId, password);\n\n  await callBackendPost(`/swap/history/${address}/${historyItem.id}/update`, {\n    msgHash: result.msgHash,\n  }, {\n    method: 'PATCH',\n    authToken,\n  });\n\n  onUpdate({\n    type: 'newActivities',\n    accountId,\n    activities: [swap],\n  });\n\n  void callHook('onSwapCreated', accountId, swap.timestamp - 1);\n\n  return result;\n}\n\nfunction getSwapItemSlug(item: ApiSwapHistoryItem, asset: string) {\n  if (asset === TON_SYMBOL) return TONCOIN_SLUG;\n  if (item.cex) return asset;\n  return buildTokenSlug(asset);\n}\n\nexport async function swapReplaceTransactions(\n  accountId: string,\n  transactions: ApiTransactionActivity[],\n  network: ApiNetwork,\n  slug?: string,\n): Promise<ApiActivity[]> {\n  if (!transactions.length || network === 'testnet') {\n    return transactions;\n  }\n\n  try {\n    const address = await fetchStoredAddress(accountId);\n    const asset = slug ? resolveTokenBySlug(slug).minterAddress ?? TON_SYMBOL : undefined;\n    const {\n      fromLt, toLt, fromTime, toTime,\n    } = buildSwapHistoryRange(transactions);\n\n    const swaps = await swapGetHistory(address, {\n      fromLt,\n      toLt,\n      fromTimestamp: fromTime,\n      toTimestamp: toTime,\n      asset,\n    });\n\n    if (!swaps.length) {\n      return transactions;\n    }\n\n    return replaceTransactions(transactions, swaps);\n  } catch (err) {\n    logDebugError('swapReplaceTransactions', err);\n    return transactions;\n  }\n}\n\nexport async function swapReplaceTransactionsByRanges(\n  accountId: string,\n  transactions: ApiTransactionActivity[],\n  chunks: ApiTransactionActivity[][],\n  isFirstLoad?: boolean,\n): Promise<ApiActivity[]> {\n  transactions = transactions.slice();\n\n  const { network } = parseAccountId(accountId);\n\n  if (!chunks.length || network === 'testnet') {\n    return transactions;\n  }\n\n  try {\n    const address = await fetchStoredAddress(accountId);\n\n    if (!isFirstLoad) {\n      await waitPendingDexSwap(address);\n    }\n\n    const ranges = chunks.map((txs) => buildSwapHistoryRange(txs));\n    const swaps = await swapGetHistoryByRanges(address, ranges);\n\n    if (!swaps.length) {\n      return transactions;\n    }\n\n    return replaceTransactions(transactions, swaps);\n  } catch (err) {\n    logDebugError('swapReplaceTransactionsByRanges', err);\n    return transactions;\n  }\n}\n\nfunction replaceTransactions(transactions: ApiTransactionActivity[], swaps: ApiSwapHistoryItem[]) {\n  const result: ApiActivity[] = [];\n  const hiddenTxIds = new Set<string>();\n\n  const skipLtRanges: LtRange[] = []; // TODO Remove it after applying correcting script in backend\n\n  for (const swap of swaps) {\n    swap.txIds?.forEach((txId) => {\n      hiddenTxIds.add(txId);\n    });\n\n    if (swap.lt && Number(swap.id) < MAX_OLD_SWAP_ID) {\n      skipLtRanges.push([swap.lt, swap.lt + SWAP_MAX_LT]);\n    }\n\n    const swapActivity = swapItemToActivity(swap);\n\n    result.push(swapActivity);\n  }\n\n  for (let transaction of transactions) {\n    const [ltString, hash] = transaction.txId.split(':');\n    const lt = Number(ltString);\n    const shortenedTxId = `${lt}:${hash}`;\n\n    const shouldHide = Boolean(\n      hiddenTxIds.has(shortenedTxId)\n      || skipLtRanges.find(([startLt, endLt]) => lt >= startLt && lt <= endLt),\n    );\n\n    if (shouldHide) {\n      transaction = { ...transaction, shouldHide };\n    }\n    result.push(transaction);\n  }\n\n  return result;\n}\n\nasync function waitPendingDexSwap(address: string) {\n  const waitUntil = Date.now() + SWAP_WAITING_TIME;\n\n  while (Date.now() < waitUntil) {\n    const pendingSwaps = await swapGetHistory(address, {\n      status: 'pending',\n      isCex: false,\n    });\n\n    if (!pendingSwaps.length) {\n      break;\n    }\n\n    const areAllStale = pendingSwaps.every((swap) => (\n      Date.now() - swap.timestamp > SWAP_WAITING_TIME * 2\n    ));\n    if (areAllStale) {\n      break;\n    }\n\n    await pause(SWAP_WAITING_PAUSE);\n  }\n}\n\nfunction buildSwapHistoryRange(transactions: ApiTransaction[]): SwapHistoryRange {\n  const firstLt = parseTxId(transactions[0].txId).lt;\n  const lastLt = parseTxId(transactions[transactions.length - 1].txId).lt;\n\n  const firstTimestamp = transactions[0].timestamp;\n  const lastTimestamp = transactions[transactions.length - 1].timestamp;\n\n  const [fromLt, fromTime] = firstLt > lastLt ? [lastLt, lastTimestamp] : [firstLt, firstTimestamp];\n  const [toLt, toTime] = firstLt > lastLt ? [firstLt, firstTimestamp] : [lastLt, lastTimestamp];\n\n  const slug = transactions[0].slug;\n  const asset = slug === TONCOIN_SLUG ? TON_SYMBOL : resolveTokenBySlug(slug).minterAddress!;\n\n  return {\n    asset,\n    fromLt: Math.floor(fromLt / 100) * 100,\n    toLt,\n    fromTime,\n    toTime,\n  };\n}\n\nexport async function fetchSwaps(accountId: string, ids: string[]) {\n  const address = await fetchStoredAddress(accountId);\n  const results = await Promise.allSettled(\n    ids.map((id) => swapGetHistoryItem(address, id.replace('swap:', ''))),\n  );\n\n  return results\n    .map((result) => (result.status === 'fulfilled' ? result.value : undefined))\n    .filter(Boolean)\n    .map(swapItemToActivity);\n}\n\nexport function swapItemToActivity(swap: ApiSwapHistoryItem): ApiSwapActivity {\n  return {\n    ...swap,\n    id: buildSwapId(swap.id),\n    kind: 'swap',\n    from: getSwapItemSlug(swap, swap.from),\n    to: getSwapItemSlug(swap, swap.to),\n  };\n}\n\nexport function swapEstimate(request: ApiSwapEstimateRequest): Promise<ApiSwapEstimateResponse | { error: string }> {\n  return callBackendPost('/swap/ton/estimate', request, {\n    isAllowBadRequest: true,\n  });\n}\n\nexport function swapBuild(authToken: string, request: ApiSwapBuildRequest): Promise<ApiSwapBuildResponse> {\n  return callBackendPost('/swap/ton/build', {\n    ...request,\n    isMsgHashMode: true,\n  }, {\n    authToken,\n  });\n}\n\nexport function swapGetAssets(): Promise<ApiSwapAsset[]> {\n  return callBackendGet('/swap/assets');\n}\n\nexport function swapGetTonCurrencies(): Promise<ApiSwapTonAsset[]> {\n  return callBackendGet('/swap/ton/tokens');\n}\n\nexport function swapGetPairs(symbolOrMinter: string): Promise<ApiSwapPairAsset[]> {\n  return callBackendGet('/swap/pairs', { asset: symbolOrMinter });\n}\n\nexport function swapGetHistory(address: string, params: {\n  fromLt?: number;\n  toLt?: number;\n  fromTimestamp?: number;\n  toTimestamp?: number;\n  status?: ApiSwapHistoryItem['status'];\n  isCex?: boolean;\n  asset?: string;\n}): Promise<ApiSwapHistoryItem[]> {\n  return callBackendGet(`/swap/history/${address}`, params);\n}\n\nexport function swapGetHistoryByRanges(address: string, ranges: SwapHistoryRange[]): Promise<ApiSwapHistoryItem[]> {\n  return callBackendPost(`/swap/history-ranges/${address}`, { ranges });\n}\n\nexport function swapGetHistoryItem(address: string, id: string): Promise<ApiSwapHistoryItem> {\n  return callBackendGet(`/swap/history/${address}/${id}`);\n}\n\nexport function swapCexEstimate(request: ApiSwapCexEstimateRequest): Promise<ApiSwapCexEstimateResponse> {\n  return callBackendPost('/swap/cex/estimate', request, { isAllowBadRequest: true });\n}\n\nexport function swapCexValidateAddress(params: { slug: string; address: string }): Promise<{\n  result: boolean;\n  message?: string;\n}> {\n  return callBackendGet('/swap/cex/validate-address', params);\n}\n\nexport async function swapCexCreateTransaction(\n  accountId: string,\n  password: string,\n  request: ApiSwapCexCreateTransactionRequest,\n): Promise<{\n    swap: ApiSwapHistoryItem;\n    activity: ApiSwapActivity;\n    transfer?: TonTransferParams;\n  }> {\n  const authToken = await getBackendAuthToken(accountId, password);\n\n  const { swap } = await callBackendPost<ApiSwapCexCreateTransactionResponse>('/swap/cex/createTransaction', request, {\n    authToken,\n  });\n  const activity = swapItemToActivity(swap);\n\n  let transfer: {\n    toAddress: string;\n    amount: bigint;\n  } | undefined;\n\n  if (request.from === TON_SYMBOL) {\n    transfer = {\n      toAddress: swap.cex!.payinAddress,\n      amount: fromDecimal(swap.fromAmount),\n    };\n\n    assert(transfer.amount <= fromDecimal(request.fromAmount));\n  }\n\n  onUpdate({\n    type: 'newActivities',\n    accountId,\n    activities: [activity],\n  });\n\n  void callHook('onSwapCreated', accountId, swap.timestamp - 1);\n\n  return { swap, activity, transfer };\n}\n","import type { ApiSubmitTransferResult, ApiSubmitTransferWithDieselResult } from '../blockchains/ton/types';\nimport type {\n  ApiLocalTransactionParams,\n  ApiSignedTransfer,\n  ApiSubmitTransferOptions,\n  ApiTxIdBySlug,\n  OnApiUpdate,\n} from '../types';\n\nimport { TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { logDebugError } from '../../util/logs';\nimport blockchains from '../blockchains';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { buildLocalTransaction, resolveBlockchainKey } from '../common/helpers';\nimport { handleServerError } from '../errors';\nimport { swapReplaceTransactions } from './swap';\nimport { buildTokenSlug } from './tokens';\n\nlet onUpdate: OnApiUpdate;\n\nexport function initTransactions(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function fetchTokenActivitySlice(accountId: string, slug: string, fromTxId?: string, limit?: number) {\n  const { network, blockchain } = parseAccountId(accountId);\n  const activeBlockchain = blockchains[blockchain];\n  try {\n    const transactions = await activeBlockchain.getTokenTransactionSlice(accountId, slug, fromTxId, undefined, limit);\n    const activities = await swapReplaceTransactions(accountId, transactions, network, slug);\n    await activeBlockchain.fixTokenActivitiesAddressForm(network, activities);\n    return activities;\n  } catch (err) {\n    logDebugError('fetchTokenActivitySlice', err);\n    return handleServerError(err);\n  }\n}\n\nexport async function fetchAllActivitySlice(accountId: string, lastTxIds: ApiTxIdBySlug, limit: number) {\n  const { network, blockchain } = parseAccountId(accountId);\n  const activeBlockchain = blockchains[blockchain];\n  try {\n    const transactions = await activeBlockchain.getMergedTransactionSlice(accountId, lastTxIds, limit);\n    const activities = await swapReplaceTransactions(accountId, transactions, network);\n    await activeBlockchain.fixTokenActivitiesAddressForm(network, activities);\n    return activities;\n  } catch (err) {\n    logDebugError('fetchAllActivitySlice', err);\n    return handleServerError(err);\n  }\n}\n\nexport function checkTransactionDraft(options: {\n  accountId: string;\n  tokenAddress?: string;\n  toAddress: string;\n  amount: bigint;\n  data?: string;\n  shouldEncrypt?: boolean;\n  isBase64Data?: boolean;\n}) {\n  const blockchain = blockchains[resolveBlockchainKey(options.accountId)!];\n\n  return blockchain.checkTransactionDraft(options);\n}\n\nexport async function submitTransfer(options: ApiSubmitTransferOptions, shouldCreateLocalTransaction = true) {\n  const {\n    accountId, password, toAddress, amount, tokenAddress, comment, fee, shouldEncrypt, isBase64Data,\n    withDiesel, dieselAmount,\n  } = options;\n\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  let result: ApiSubmitTransferResult | ApiSubmitTransferWithDieselResult;\n\n  if (withDiesel) {\n    result = await blockchain.submitTransferWithDiesel({\n      accountId,\n      password,\n      toAddress,\n      amount,\n      tokenAddress: tokenAddress!,\n      data: comment,\n      shouldEncrypt,\n      dieselAmount: dieselAmount!,\n    });\n  } else {\n    result = await blockchain.submitTransfer({\n      accountId,\n      password,\n      toAddress,\n      amount,\n      tokenAddress,\n      data: comment,\n      shouldEncrypt,\n      isBase64Data,\n    });\n  }\n\n  if ('error' in result) {\n    return result;\n  }\n\n  const { encryptedComment, msgHash } = result;\n\n  if (!shouldCreateLocalTransaction) {\n    return result;\n  }\n\n  const slug = tokenAddress ? buildTokenSlug(tokenAddress) : TONCOIN_SLUG;\n\n  const localTransaction = createLocalTransaction(accountId, {\n    amount,\n    fromAddress,\n    toAddress,\n    comment: shouldEncrypt ? undefined : comment,\n    encryptedComment,\n    fee: fee || 0n,\n    slug,\n    inMsgHash: msgHash,\n  });\n\n  return {\n    ...result,\n    txId: localTransaction.txId,\n  };\n}\n\nexport async function waitLastTransfer(accountId: string) {\n  const blockchain = blockchains.ton;\n\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return blockchain.waitPendingTransfer(network, address);\n}\n\nexport async function sendSignedTransferMessage(accountId: string, message: ApiSignedTransfer) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  const msgHash = await blockchain.sendSignedMessage(accountId, message);\n\n  const localTransaction = createLocalTransaction(accountId, {\n    ...message.params,\n    inMsgHash: msgHash,\n  });\n\n  return localTransaction.txId;\n}\n\nexport async function sendSignedTransferMessages(accountId: string, messages: ApiSignedTransfer[]) {\n  const blockchain = blockchains.ton;\n\n  const result = await blockchain.sendSignedMessages(accountId, messages);\n\n  for (let i = 0; i < result.successNumber; i++) {\n    createLocalTransaction(accountId, {\n      ...messages[i].params,\n      inMsgHash: result.msgHashes[i],\n    });\n  }\n\n  return result;\n}\n\nexport function decryptComment(accountId: string, encryptedComment: string, fromAddress: string, password: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.decryptComment(accountId, encryptedComment, fromAddress, password);\n}\n\nexport function createLocalTransaction(accountId: string, params: ApiLocalTransactionParams) {\n  const { blockchain: blockchainKey, network } = parseAccountId(accountId);\n  const blockchain = blockchains[blockchainKey];\n\n  const { toAddress } = params;\n\n  const normalizedAddress = params.normalizedAddress ?? blockchain.normalizeAddress(toAddress, network);\n\n  const localTransaction = buildLocalTransaction(params, normalizedAddress);\n\n  onUpdate({\n    type: 'newLocalTransaction',\n    transaction: localTransaction,\n    accountId,\n  });\n\n  return localTransaction;\n}\n\nexport function fetchDieselState(accountId: string, tokenAddress: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.fetchEstimateDiesel(accountId, tokenAddress);\n}\n","import type { ApiDbNft } from '../db';\nimport type { ApiNft, ApiUpdate, OnApiUpdate } from '../types';\n\nimport { TONCOIN_SLUG } from '../../config';\nimport blockchains from '../blockchains';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { resolveBlockchainKey } from '../common/helpers';\nimport { apiDb } from '../db';\nimport { createLocalTransaction } from './transactions';\n\nlet onUpdate: OnApiUpdate;\n\nexport function initNfts(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport function fetchNfts(accountId: string) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  return blockchain.getAccountNfts(accountId);\n}\n\nexport async function processNftUpdates(accountId: string, updates: ApiUpdate[]) {\n  updates.filter((update) => !(update.type === 'nftReceived' && update.nft.isHidden)).forEach(onUpdate);\n\n  for (const update of updates) {\n    if (update.type === 'nftSent') {\n      const key = [accountId, update.nftAddress];\n      await apiDb.nfts.delete(key);\n    } else if (update.type === 'nftReceived') {\n      const dbNft = convertToDbEntity(accountId, update.nft);\n      await apiDb.nfts.put(dbNft);\n    } else if (update.type === 'nftPutUpForSale') {\n      const key = [accountId, update.nftAddress];\n      await apiDb.nfts.update(key, { isOnSale: true });\n    }\n  }\n}\n\nexport async function updateAccountNfts(accountId: string, nfts: ApiNft[]) {\n  onUpdate({\n    type: 'updateNfts',\n    accountId,\n    nfts,\n  });\n\n  const dbNfts = nfts.map((nft) => convertToDbEntity(accountId, nft));\n\n  await apiDb.nfts.where({ accountId }).delete();\n  await apiDb.nfts.bulkPut(dbNfts);\n}\n\nfunction convertToDbEntity(accountId: string, nft: ApiNft): ApiDbNft {\n  return {\n    ...nft,\n    collectionAddress: nft.collectionAddress ?? '',\n    accountId,\n  };\n}\n\nexport function checkNftTransferDraft(options: {\n  accountId: string;\n  nftAddresses: string[];\n  toAddress: string;\n  comment?: string;\n}) {\n  const blockchain = blockchains[resolveBlockchainKey(options.accountId)!];\n\n  return blockchain.checkNftTransferDraft(options);\n}\n\nexport async function submitNftTransfers(\n  accountId: string,\n  password: string,\n  nftAddresses: string[],\n  toAddress: string,\n  comment?: string,\n  nfts?: ApiNft[],\n  fee = 0n,\n) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const result = await blockchain.submitNftTransfers({\n    accountId, password, nftAddresses, toAddress, comment, nfts,\n  });\n\n  if ('error' in result) {\n    return result;\n  }\n\n  for (const [i, message] of result.messages.entries()) {\n    createLocalTransaction(accountId, {\n      amount: message.amount,\n      fromAddress,\n      toAddress: message.toAddress,\n      comment,\n      fee,\n      slug: TONCOIN_SLUG,\n      inMsgHash: result.msgHash,\n      type: 'nftTransferred',\n      nft: nfts?.[i],\n    });\n  }\n\n  return result;\n}\n","let resolvePromise: Function;\nconst preloadPromise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport function resolveDataPreloadPromise() {\n  resolvePromise();\n}\n\nexport async function waitDataPreload() {\n  await preloadPromise;\n}\n","import type { ApiBaseCurrency, ApiHistoryList, ApiPriceHistoryPeriod } from '../types';\n\nimport { DEFAULT_PRICE_CURRENCY, TON_SYMBOL } from '../../config';\nimport { callBackendGet } from '../common/backend';\nimport { storage } from '../storages';\nimport { waitDataPreload } from './preload';\nimport { resolveTokenBySlug } from './tokens';\n\nexport async function getBaseCurrency() {\n  return (await storage.getItem('baseCurrency')) ?? DEFAULT_PRICE_CURRENCY;\n}\n\nexport function setBaseCurrency(currency: ApiBaseCurrency) {\n  return storage.setItem('baseCurrency', currency);\n}\n\nexport async function fetchPriceHistory(\n  slug: string,\n  period: ApiPriceHistoryPeriod,\n  baseCurrency: ApiBaseCurrency = DEFAULT_PRICE_CURRENCY,\n): Promise<ApiHistoryList | undefined> {\n  await waitDataPreload();\n  const token = resolveTokenBySlug(slug);\n\n  if (!token) {\n    return [];\n  }\n\n  return callBackendGet(`/prices/chart/${token.minterAddress ?? TON_SYMBOL}`, {\n    base: baseCurrency,\n    period,\n  });\n}\n","import type {\n  ApiBackendStakingState,\n  ApiStakingCommonData,\n  ApiStakingHistory,\n  ApiStakingType,\n} from '../types';\n\nimport { APP_ENV, APP_VERSION, TONCOIN_SLUG } from '../../config';\nimport { fromDecimal } from '../../util/decimals';\nimport { logDebugError } from '../../util/logs';\nimport blockchains from '../blockchains';\nimport { STAKE_COMMENT, UNSTAKE_COMMENT } from '../blockchains/ton/constants';\nimport { fetchStoredAccount, fetchStoredAddress } from '../common/accounts';\nimport { callBackendGet } from '../common/backend';\nimport { setStakingCommonCache } from '../common/cache';\nimport { resolveBlockchainKey } from '../common/helpers';\nimport { isKnownStakingPool } from '../common/utils';\nimport { getEnvironment } from '../environment';\nimport { getClientId } from './other';\nimport { createLocalTransaction } from './transactions';\n\nconst CACHE_TTL = 5000; // 5 s.\nlet backendStakingStateByAddress: Record<string, [number, ApiBackendStakingState]> = {};\n\n// let onUpdate: OnApiUpdate;\n\nexport function initStaking() {\n  // onUpdate = _onUpdate;\n}\n\nexport async function checkStakeDraft(accountId: string, amount: bigint) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  const backendState = await getBackendStakingState(accountId);\n  return blockchain.checkStakeDraft(accountId, amount, backendState!);\n}\n\nexport async function checkUnstakeDraft(accountId: string, amount: bigint) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  const backendState = await getBackendStakingState(accountId);\n  return blockchain.checkUnstakeDraft(accountId, amount, backendState!);\n}\n\nexport async function submitStake(\n  accountId: string, password: string, amount: bigint, type: ApiStakingType, fee?: bigint,\n) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const backendState = await getBackendStakingState(accountId);\n  const result = await blockchain.submitStake(\n    accountId, password, amount, type, backendState!,\n  );\n  if ('error' in result) {\n    return false;\n  }\n\n  onStakingChangeExpected();\n\n  const localTransaction = createLocalTransaction(accountId, {\n    amount: result.amount,\n    fromAddress,\n    toAddress: result.toAddress,\n    comment: STAKE_COMMENT,\n    fee: fee || 0n,\n    type: 'stake',\n    slug: TONCOIN_SLUG,\n    inMsgHash: result.msgHash,\n  });\n\n  return {\n    ...result,\n    txId: localTransaction.txId,\n  };\n}\n\nexport async function submitUnstake(\n  accountId: string,\n  password: string,\n  type: ApiStakingType,\n  amount: bigint,\n  fee?: bigint,\n) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const backendState = await getBackendStakingState(accountId);\n  const result = await blockchain.submitUnstake(accountId, password, type, amount, backendState!);\n  if ('error' in result) {\n    return false;\n  }\n\n  onStakingChangeExpected();\n\n  const localTransaction = createLocalTransaction(accountId, {\n    amount: result.amount,\n    fromAddress,\n    toAddress: result.toAddress,\n    comment: UNSTAKE_COMMENT,\n    fee: fee || 0n,\n    type: 'unstakeRequest',\n    slug: TONCOIN_SLUG,\n    inMsgHash: result.msgHash,\n  });\n\n  return {\n    ...result,\n    txId: localTransaction.txId,\n  };\n}\n\nexport async function getBackendStakingState(accountId: string): Promise<ApiBackendStakingState> {\n  const { address } = await fetchStoredAccount(accountId);\n  const state = await fetchBackendStakingState(address);\n  return {\n    ...state,\n    nominatorsPool: {\n      ...state.nominatorsPool,\n      start: state.nominatorsPool.start * 1000,\n      end: state.nominatorsPool.end * 1000,\n    },\n  };\n}\n\nexport async function fetchBackendStakingState(address: string): Promise<ApiBackendStakingState> {\n  const cacheItem = backendStakingStateByAddress[address];\n  if (cacheItem && cacheItem[0] > Date.now()) {\n    return cacheItem[1];\n  }\n\n  const headers: AnyLiteral = {\n    ...getEnvironment().apiHeaders,\n    'X-App-Version': APP_VERSION,\n    'X-App-ClientID': await getClientId(),\n    'X-App-Env': APP_ENV,\n  };\n\n  const stakingState = await callBackendGet(`/staking/state/${address}`, undefined, headers);\n  stakingState.balance = fromDecimal(stakingState.balance);\n  stakingState.totalProfit = fromDecimal(stakingState.totalProfit);\n\n  if (!isKnownStakingPool(stakingState.nominatorsPool.address)) {\n    throw Error('Unexpected pool address, likely a malicious activity');\n  }\n\n  backendStakingStateByAddress[address] = [Date.now() + CACHE_TTL, stakingState];\n\n  return stakingState;\n}\n\nexport async function getStakingHistory(\n  accountId: string, limit?: number, offset?: number,\n): Promise<ApiStakingHistory> {\n  const address = await fetchStoredAddress(accountId);\n  return callBackendGet(`/staking/profits/${address}`, { limit, offset });\n}\n\nexport function onStakingChangeExpected() {\n  backendStakingStateByAddress = {};\n}\n\nexport async function tryUpdateStakingCommonData() {\n  try {\n    const data = await callBackendGet('/staking/common');\n    data.round.start *= 1000;\n    data.round.end *= 1000;\n    data.round.unlock *= 1000;\n    data.prevRound.start *= 1000;\n    data.prevRound.end *= 1000;\n    data.prevRound.unlock *= 1000;\n    data.liquid.available = fromDecimal(data.liquid.available);\n\n    setStakingCommonCache(data as ApiStakingCommonData);\n  } catch (err) {\n    logDebugError('tryUpdateLiquidStakingState', err);\n  }\n}\n\nexport async function getStakingState(accountId: string) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const backendState = await getBackendStakingState(accountId);\n  const state = await blockchain.getStakingState(accountId, backendState);\n\n  return { backendState, state };\n}\n","import type { ApiVestingInfo } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { callBackendGet } from '../common/backend';\n\nexport async function fetchVestings(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const isTestnet = network === 'testnet';\n  const address = await fetchStoredAddress(accountId);\n\n  return callBackendGet<ApiVestingInfo[]>(`/vesting/${address}`, { isTestnet });\n}\n","import type { TokenBalanceParsed } from '../blockchains/ton/tokens';\nimport type {\n  ApiBackendStakingState,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiBaseToken,\n  ApiCountryCode,\n  ApiNftUpdate,\n  ApiStakingCommonData,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenPrice,\n  ApiTransactionActivity,\n  ApiTxIdBySlug,\n  ApiVestingInfo,\n  ApiWalletInfo,\n  OnApiUpdate,\n} from '../types';\n\nimport { DEFAULT_PRICE_CURRENCY, POPULAR_WALLET_VERSIONS, TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { compareActivities } from '../../util/compareActivities';\nimport { buildCollectionByKey, omit } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { pauseOrFocus } from '../../util/pauseOrFocus';\nimport blockchains from '../blockchains';\nimport { addKnownToken, addKnownTokens, getKnownTokens } from '../blockchains/ton/tokens';\nimport { fetchStoredAccount, updateStoredAccount } from '../common/accounts';\nimport { tryUpdateKnownAddresses } from '../common/addresses';\nimport { callBackendGet } from '../common/backend';\nimport { getStakingCommonCache } from '../common/cache';\nimport { isUpdaterAlive, resolveBlockchainKey } from '../common/helpers';\nimport { txCallbacks } from '../common/txCallbacks';\nimport { hexToBytes } from '../common/utils';\nimport { AbortOperationError } from '../errors';\nimport { processNftUpdates, updateAccountNfts } from './nfts';\nimport { resolveDataPreloadPromise } from './preload';\nimport { getBaseCurrency } from './prices';\nimport { getBackendStakingState, tryUpdateStakingCommonData } from './staking';\nimport { swapGetAssets, swapReplaceTransactionsByRanges } from './swap';\nimport { fetchVestings } from './vesting';\n\ntype IsAccountActiveFn = (accountId: string) => boolean;\n\ntype AccountBalanceCache = {\n  balance?: bigint;\n  tokenBalances?: ApiBalanceBySlug;\n};\n\nconst SEC = 1000;\nconst BALANCE_BASED_INTERVAL = 1.1 * SEC;\nconst BALANCE_BASED_INTERVAL_WHEN_NOT_FOCUSED = 10 * SEC;\nconst STAKING_INTERVAL = 5 * SEC;\nconst STAKING_INTERVAL_WHEN_NOT_FOCUSED = 10 * SEC;\nconst BACKEND_INTERVAL = 30 * SEC;\nconst LONG_BACKEND_INTERVAL = 60 * SEC;\nconst NFT_FULL_INTERVAL = 60 * SEC;\nconst VERSIONS_INTERVAL = 5 * 60 * SEC;\nconst VERSIONS_INTERVAL_WHEN_NOT_FOCUSED = 15 * 60 * SEC;\nconst VESTING_INTERVAL = 10 * SEC;\nconst VESTING_INTERVAL_WHEN_NOT_FOCUSED = 60 * SEC;\nconst INCORRECT_TIME_DIFF = 30 * SEC;\n\nconst FIRST_TRANSACTIONS_LIMIT = 50;\nconst DOUBLE_CHECK_TOKENS_PAUSE = 30 * SEC;\n\nlet onUpdate: OnApiUpdate;\nlet isAccountActive: IsAccountActiveFn;\n\nconst prices: {\n  baseCurrency: ApiBaseCurrency;\n  bySlug: Record<string, ApiTokenPrice>;\n} = {\n  baseCurrency: DEFAULT_PRICE_CURRENCY,\n  bySlug: {},\n};\n\nconst lastBalanceCache: Record<string, AccountBalanceCache> = {};\n\nexport async function initPolling(_onUpdate: OnApiUpdate, _isAccountActive: IsAccountActiveFn) {\n  onUpdate = _onUpdate;\n  isAccountActive = _isAccountActive;\n\n  await tryUpdatePrices();\n\n  Promise.allSettled([\n    tryUpdateKnownAddresses(),\n    tryUpdateTokens(_onUpdate),\n    tryLoadSwapTokens(_onUpdate),\n    tryUpdateStakingCommonData(),\n  ]).then(() => resolveDataPreloadPromise());\n\n  void tryUpdateConfig(_onUpdate);\n\n  void setupBackendPolling();\n  void setupLongBackendPolling();\n}\n\nfunction registerNewTokens(tokenBalances: TokenBalanceParsed[]) {\n  const tokens = getKnownTokens();\n  let areNewTokensFound = false;\n\n  for (const { token } of tokenBalances.filter(Boolean)) {\n    if (token.slug in tokens) continue;\n\n    areNewTokensFound = true;\n    addKnownToken({\n      ...token,\n      quote: prices.bySlug[token.slug] || {\n        slug: token.slug,\n        price: 0.0,\n        priceUsd: 0.0,\n        percentChange24h: 0.0,\n      },\n    });\n  }\n\n  if (areNewTokensFound) {\n    sendUpdateTokens();\n  }\n}\n\nexport async function setupBalanceBasedPolling(accountId: string, newestTxIds: ApiTxIdBySlug = {}) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  delete lastBalanceCache[accountId];\n\n  const { network } = parseAccountId(accountId);\n  const account = await fetchStoredAccount(accountId);\n  const { address } = account;\n  let { isInitialized } = account;\n\n  let nftFromSec = Math.round(Date.now() / 1000);\n  let nftUpdates: ApiNftUpdate[];\n  let lastNftFullUpdate = 0;\n  let doubleCheckTokensTime: number | undefined;\n  let tokenBalances: TokenBalanceParsed[] | undefined;\n\n  const localOnUpdate = onUpdate;\n\n  async function updateBalance(cache: AccountBalanceCache) {\n    const walletInfo = await blockchain.getWalletInfo(network, address);\n    const { balance, lastTxId } = walletInfo ?? {};\n    const isToncoinBalanceChanged = balance !== undefined && balance !== cache?.balance;\n    const balancesToUpdate: ApiBalanceBySlug = {};\n\n    if (isToncoinBalanceChanged) {\n      balancesToUpdate[TONCOIN_SLUG] = balance;\n\n      lastBalanceCache[accountId] = {\n        ...lastBalanceCache[accountId],\n        balance,\n      };\n    }\n\n    return {\n      lastTxId, isToncoinBalanceChanged, balancesToUpdate,\n    };\n  }\n\n  async function updateNfts(isToncoinBalanceChanged: boolean) {\n    if (Date.now() - lastNftFullUpdate < NFT_FULL_INTERVAL) {\n      // Partial update\n      if (isToncoinBalanceChanged) {\n        const nftResult = await blockchain.getNftUpdates(accountId, nftFromSec).catch(logAndRescue);\n\n        throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n        if (nftResult) {\n          [nftFromSec, nftUpdates] = nftResult;\n          void processNftUpdates(accountId, nftUpdates);\n        }\n      }\n    } else {\n      // Full update\n      const nfts = await blockchain.getAccountNfts(accountId).catch(logAndRescue);\n      lastNftFullUpdate = Date.now();\n\n      throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n      if (nfts) {\n        nftFromSec = Math.round(Date.now() / 1000);\n        void updateAccountNfts(accountId, nfts);\n      }\n    }\n  }\n\n  async function updateTokenBalances(\n    isToncoinBalanceChanged: boolean,\n    cache: AccountBalanceCache,\n    balancesToUpdate: ApiBalanceBySlug,\n  ) {\n    const changedTokenSlugs: string[] = [];\n\n    if (isToncoinBalanceChanged || (doubleCheckTokensTime && doubleCheckTokensTime < Date.now())) {\n      doubleCheckTokensTime = isToncoinBalanceChanged ? Date.now() + DOUBLE_CHECK_TOKENS_PAUSE : undefined;\n      tokenBalances = await blockchain.getAccountTokenBalances(accountId).catch(logAndRescue);\n\n      throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n      if (tokenBalances) {\n        registerNewTokens(tokenBalances);\n\n        tokenBalances.forEach(({ slug, balance: tokenBalance }) => {\n          const cachedBalance = cache?.tokenBalances && cache.tokenBalances[slug];\n          if (cachedBalance === tokenBalance) return;\n\n          changedTokenSlugs.push(slug);\n          balancesToUpdate[slug] = tokenBalance;\n        });\n\n        lastBalanceCache[accountId] = {\n          ...lastBalanceCache[accountId],\n          tokenBalances: Object.fromEntries(tokenBalances.map(\n            ({ slug, balance: tokenBalance }) => [slug, tokenBalance],\n          )),\n        };\n      }\n\n      if (Object.keys(balancesToUpdate).length > 0) {\n        onUpdate({\n          type: 'updateBalances',\n          accountId,\n          balancesToUpdate,\n        });\n      }\n    }\n\n    onUpdate({ type: 'updatingStatus', kind: 'balance', isUpdating: false });\n\n    return changedTokenSlugs;\n  }\n\n  async function updateActivities(isToncoinBalanceChanged: boolean, changedTokenSlugs: string[], lastTxId?: string) {\n    if (isToncoinBalanceChanged || changedTokenSlugs.length) {\n      if (lastTxId) {\n        await blockchain.waitUntilTransactionAppears(network, address, lastTxId);\n      }\n\n      const newTxIds = await processNewActivities(accountId, newestTxIds, changedTokenSlugs, tokenBalances);\n      newestTxIds = { ...newestTxIds, ...newTxIds };\n    }\n\n    onUpdate({ type: 'updatingStatus', kind: 'activities', isUpdating: false });\n  }\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      onUpdate({ type: 'updatingStatus', kind: 'activities', isUpdating: true });\n      onUpdate({ type: 'updatingStatus', kind: 'balance', isUpdating: true });\n\n      const cache = lastBalanceCache[accountId];\n\n      const {\n        lastTxId,\n        isToncoinBalanceChanged,\n        balancesToUpdate,\n      } = await updateBalance(cache);\n\n      throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n      const changedTokenSlugs = await updateTokenBalances(isToncoinBalanceChanged, cache, balancesToUpdate);\n\n      await Promise.all([\n        updateActivities(isToncoinBalanceChanged, changedTokenSlugs, lastTxId),\n        updateNfts(isToncoinBalanceChanged),\n      ]);\n\n      if (isToncoinBalanceChanged && !isInitialized && await blockchain.isAddressInitialized(network, address)) {\n        isInitialized = true;\n        await updateStoredAccount(accountId, { isInitialized });\n      }\n    } catch (err) {\n      if (err instanceof AbortOperationError) {\n        return;\n      }\n      logDebugError('setupBalanceBasedPolling', err);\n    }\n\n    await pauseOrFocus(BALANCE_BASED_INTERVAL, BALANCE_BASED_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n\nfunction throwErrorIfUpdaterNotAlive(localOnUpdate: OnApiUpdate, accountId: string) {\n  if (!isAlive(localOnUpdate, accountId)) {\n    throw new AbortOperationError();\n  }\n}\n\nexport async function setupStakingPolling(accountId: string) {\n  const { blockchain: blockchainKey, network } = parseAccountId(accountId);\n  const blockchain = blockchains[blockchainKey];\n\n  if (network !== 'mainnet') {\n    return;\n  }\n\n  const localOnUpdate = onUpdate;\n  let lastState: {\n    stakingCommonData: ApiStakingCommonData;\n    backendStakingState: ApiBackendStakingState;\n    stakingState: ApiStakingState;\n  } | undefined;\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      const stakingCommonData = getStakingCommonCache();\n      const backendStakingState = await getBackendStakingState(accountId);\n      const stakingState = await blockchain.getStakingState(accountId, backendStakingState);\n\n      if (!isAlive(localOnUpdate, accountId)) return;\n\n      const state = {\n        stakingCommonData,\n        backendStakingState,\n        stakingState,\n      };\n\n      if (!areDeepEqual(state, lastState)) {\n        lastState = state;\n        onUpdate({\n          type: 'updateStaking',\n          accountId,\n          ...state,\n        });\n      }\n    } catch (err) {\n      logDebugError('setupStakingPolling', err);\n    }\n\n    await pauseOrFocus(STAKING_INTERVAL, STAKING_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n\nasync function processNewActivities(\n  accountId: string,\n  newestTxIds: ApiTxIdBySlug,\n  tokenSlugs: string[],\n  tokenBalances?: TokenBalanceParsed[],\n): Promise<ApiTxIdBySlug> {\n  const { network, blockchain } = parseAccountId(accountId);\n  const activeBlockchain = blockchains[blockchain];\n\n  const chunks: ApiTransactionActivity[][] = [];\n  const result: [string, string | undefined][] = [];\n\n  // Process TON transactions first\n  {\n    const slug = TONCOIN_SLUG;\n    let newestTxId = newestTxIds[slug];\n\n    const transactions = await activeBlockchain.getTokenTransactionSlice(\n      accountId, slug, undefined, newestTxId, FIRST_TRANSACTIONS_LIMIT,\n    );\n\n    if (transactions.length) {\n      newestTxId = transactions[0]!.txId;\n      chunks.push(transactions);\n    }\n\n    result.push([slug, newestTxId]);\n\n    // Find affected token wallets\n    const tokenBalanceByAddress = buildCollectionByKey(tokenBalances ?? [], 'jettonWallet');\n    transactions.forEach(({ isIncoming, toAddress, fromAddress }) => {\n      const address = isIncoming ? fromAddress : toAddress;\n      const tokenBalance: TokenBalanceParsed | undefined = tokenBalanceByAddress[address];\n\n      if (tokenBalance && !tokenSlugs.includes(tokenBalance.slug)) {\n        tokenSlugs = tokenSlugs.concat([tokenBalance.slug]);\n      }\n    });\n  }\n\n  // Process token transactions\n  await Promise.all(tokenSlugs.map(async (slug) => {\n    let newestTxId = newestTxIds[slug];\n\n    const transactions = await activeBlockchain.getTokenTransactionSlice(\n      accountId, slug, undefined, newestTxId, FIRST_TRANSACTIONS_LIMIT,\n    );\n\n    if (transactions.length) {\n      newestTxId = transactions[0]!.txId;\n      chunks.push(transactions);\n    }\n\n    result.push([slug, newestTxId]);\n  }));\n\n  const allTransactions = chunks.flat().sort(compareActivities);\n\n  const isFirstRun = !Object.keys(newestTxIds).length;\n  const activities = await swapReplaceTransactionsByRanges(accountId, allTransactions, chunks, isFirstRun);\n\n  allTransactions.slice().reverse().forEach((transaction) => {\n    txCallbacks.runCallbacks(transaction);\n  });\n\n  await activeBlockchain.fixTokenActivitiesAddressForm(network, activities);\n\n  onUpdate({\n    type: 'newActivities',\n    activities,\n    accountId,\n  });\n\n  return Object.fromEntries(result);\n}\n\nexport async function setupBackendPolling() {\n  const localOnUpdate = onUpdate;\n\n  while (isUpdaterAlive(localOnUpdate)) {\n    await pauseOrFocus(BACKEND_INTERVAL);\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    try {\n      await tryUpdatePrices(localOnUpdate);\n      await tryUpdateTokens(localOnUpdate);\n    } catch (err) {\n      logDebugError('setupBackendPolling', err);\n    }\n  }\n}\n\nexport async function setupLongBackendPolling() {\n  const localOnUpdate = onUpdate;\n\n  while (isUpdaterAlive(localOnUpdate)) {\n    await pauseOrFocus(LONG_BACKEND_INTERVAL);\n\n    await Promise.all([\n      tryUpdateKnownAddresses(),\n      tryUpdateStakingCommonData(),\n      tryUpdateConfig(localOnUpdate),\n    ]);\n  }\n}\n\nexport async function tryUpdatePrices(localOnUpdate?: OnApiUpdate) {\n  if (!localOnUpdate) {\n    localOnUpdate = onUpdate;\n  }\n\n  try {\n    const baseCurrency = await getBaseCurrency();\n    const pricesData = await callBackendGet<Record<string, ApiTokenPrice>>('/prices/current', {\n      base: baseCurrency,\n    });\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    prices.bySlug = buildCollectionByKey(Object.values(pricesData), 'slug');\n    prices.baseCurrency = baseCurrency;\n  } catch (err) {\n    logDebugError('tryUpdatePrices', err);\n  }\n}\n\nexport async function tryUpdateTokens(localOnUpdate?: OnApiUpdate) {\n  if (!localOnUpdate) {\n    localOnUpdate = onUpdate;\n  }\n\n  try {\n    const tokens = await callBackendGet<ApiBaseToken[]>('/known-tokens');\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    addKnownTokens(tokens);\n\n    sendUpdateTokens();\n  } catch (err) {\n    logDebugError('tryUpdateTokens', err);\n  }\n}\n\nexport async function tryLoadSwapTokens(localOnUpdate?: OnApiUpdate) {\n  if (!localOnUpdate) {\n    localOnUpdate = onUpdate;\n  }\n\n  try {\n    const assets = await swapGetAssets();\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    const tokens = assets.reduce((acc: Record<string, ApiSwapAsset>, asset) => {\n      acc[asset.slug] = {\n        ...asset,\n        contract: asset.contract ?? asset.slug,\n        price: prices.bySlug[asset.slug]?.price ?? 0,\n      };\n      return acc;\n    }, {});\n\n    onUpdate({\n      type: 'updateSwapTokens',\n      tokens,\n    });\n  } catch (err) {\n    logDebugError('tryLoadSwapTokens', err);\n  }\n}\n\nexport async function tryUpdateConfig(localOnUpdate: OnApiUpdate) {\n  try {\n    const {\n      isLimited,\n      isCopyStorageEnabled = false,\n      supportAccountsCount = 1,\n      now: serverUtc,\n      country: countryCode,\n    } = await callBackendGet<{\n      isLimited: boolean;\n      isCopyStorageEnabled?: boolean;\n      supportAccountsCount?: number;\n      now: number;\n      country: ApiCountryCode;\n    }>('/utils/get-config');\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    onUpdate({\n      type: 'updateConfig',\n      isLimited,\n      isCopyStorageEnabled,\n      supportAccountsCount,\n      countryCode,\n    });\n\n    const localUtc = (new Date()).getTime();\n    if (Math.abs(serverUtc - localUtc) > INCORRECT_TIME_DIFF) {\n      onUpdate({\n        type: 'incorrectTime',\n      });\n    }\n  } catch (err) {\n    logDebugError('tryUpdateRegion', err);\n  }\n}\n\nexport function sendUpdateTokens() {\n  const tokens = getKnownTokens();\n  Object.values(tokens).forEach((token) => {\n    if (token.slug in prices.bySlug) {\n      token.quote = prices.bySlug[token.slug];\n    }\n  });\n\n  onUpdate({\n    type: 'updateTokens',\n    tokens,\n    baseCurrency: prices.baseCurrency,\n  });\n}\n\nfunction isAlive(localOnUpdate: OnApiUpdate, accountId: string) {\n  return isUpdaterAlive(localOnUpdate) && isAccountActive(accountId);\n}\n\nfunction logAndRescue(err: Error) {\n  logDebugError('Polling error', err);\n\n  return undefined;\n}\n\nexport async function setupWalletVersionsPolling(accountId: string) {\n  const { ton } = blockchains;\n\n  const localOnUpdate = onUpdate;\n\n  const {\n    address, publicKey, version, isInitialized,\n  } = await fetchStoredAccount(accountId);\n  const publicKeyBytes = hexToBytes(publicKey);\n  const { network } = parseAccountId(accountId);\n\n  const versions = POPULAR_WALLET_VERSIONS.filter((value) => value !== version);\n  let lastResult: ApiWalletInfo[] | undefined;\n\n  let shouldCheckV4 = false;\n  let v4HasTokens: boolean | undefined;\n\n  if (version === 'W5' && !isInitialized) {\n    const { lastTxId } = await ton.getWalletInfo(network, address);\n    shouldCheckV4 = !lastTxId;\n  }\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      const allWalletInfos = (await ton.getWalletVersionInfos(network, publicKeyBytes, versions))\n        .map((versionInfo) => omit(versionInfo, ['wallet']));\n      const filteredInfos: ApiWalletInfo[] = [];\n\n      for (const walletInfo of allWalletInfos) {\n        if (!!walletInfo.lastTxId || walletInfo.version === 'W5') {\n          filteredInfos.push(walletInfo);\n        } else if (walletInfo.version === 'v4R2' && !walletInfo.lastTxId && shouldCheckV4) {\n          if (v4HasTokens === undefined) {\n            v4HasTokens = !!(await ton.getTokenBalances(network, walletInfo.address)).length;\n          }\n\n          if (v4HasTokens) {\n            filteredInfos.push(walletInfo);\n          }\n        }\n      }\n\n      if (!isAlive(localOnUpdate, accountId)) return;\n\n      if (!areDeepEqual(allWalletInfos, lastResult)) {\n        lastResult = allWalletInfos;\n        onUpdate({\n          type: 'updateWalletVersions',\n          accountId,\n          currentVersion: version,\n          versions: filteredInfos,\n        });\n      }\n    } catch (err) {\n      logDebugError('setupWalletVersionsPolling', err);\n    }\n\n    await pauseOrFocus(VERSIONS_INTERVAL, VERSIONS_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n\nexport async function setupVestingPolling(accountId: string) {\n  const localOnUpdate = onUpdate;\n  let lastVestingInfo: ApiVestingInfo[] | undefined;\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      const vestingInfo = await fetchVestings(accountId);\n\n      if (!isAlive(localOnUpdate, accountId)) return;\n      if (!areDeepEqual(lastVestingInfo, vestingInfo)) {\n        lastVestingInfo = vestingInfo;\n        onUpdate({\n          type: 'updateVesting',\n          accountId,\n          vestingInfo,\n        });\n      }\n    } catch (err) {\n      logDebugError('setupVestingPolling', err);\n    }\n\n    await pauseOrFocus(VESTING_INTERVAL, VESTING_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n","import type { ApiAccount, ApiTxIdBySlug } from '../types';\n\nimport { IS_EXTENSION } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { fetchStoredAccount, loginResolve } from '../common/accounts';\nimport { waitStorageMigration } from '../common/helpers';\nimport { callHook } from '../hooks';\nimport { storage } from '../storages';\nimport { deactivateAccountDapp, deactivateAllDapps, onActiveDappAccountUpdated } from './dapps';\nimport {\n  sendUpdateTokens,\n  setupBalanceBasedPolling,\n  setupStakingPolling,\n  setupVestingPolling,\n  setupWalletVersionsPolling,\n} from './polling';\n\nlet activeAccountId: string | undefined;\n\nexport async function activateAccount(accountId: string, newestTxIds?: ApiTxIdBySlug) {\n  await waitStorageMigration();\n\n  const prevAccountId = activeAccountId;\n  const isFirstLogin = !prevAccountId;\n\n  activeAccountId = accountId;\n  await storage.setItem('currentAccountId', accountId);\n  loginResolve();\n\n  if (IS_EXTENSION) {\n    if (prevAccountId && parseAccountId(prevAccountId).network !== parseAccountId(accountId).network) {\n      deactivateAllDapps();\n    }\n\n    void callHook('onFirstLogin');\n\n    onActiveDappAccountUpdated(accountId);\n  }\n\n  if (isFirstLogin) {\n    sendUpdateTokens();\n  }\n\n  void setupBalanceBasedPolling(accountId, newestTxIds);\n  void setupStakingPolling(accountId);\n  void setupWalletVersionsPolling(accountId);\n  void setupVestingPolling(accountId);\n}\n\nexport function deactivateAllAccounts() {\n  deactivateCurrentAccount();\n  activeAccountId = undefined;\n\n  if (IS_EXTENSION) {\n    deactivateAllDapps();\n    void callHook('onFullLogout');\n  }\n}\n\nexport function deactivateCurrentAccount() {\n  if (IS_EXTENSION) {\n    deactivateAccountDapp(activeAccountId!);\n  }\n}\n\nexport function isAccountActive(accountId: string) {\n  return activeAccountId === accountId;\n}\n\nexport function fetchAccount(accountId: string): Promise<ApiAccount> {\n  return fetchStoredAccount(accountId);\n}\n\nexport function getActiveAccountId() {\n  return activeAccountId;\n}\n","import type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { TonWallet } from '../blockchains/ton/util/tonCore';\nimport type {\n  ApiAccount, ApiNetwork, ApiTxIdBySlug, ApiWalletVersion,\n} from '../types';\nimport { ApiCommonError } from '../types';\n\nimport { DEFAULT_WALLET_VERSION } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport blockchains from '../blockchains';\nimport { privateKeyHexToKeyPair } from '../blockchains/ton/auth';\nimport { toBase64Address } from '../blockchains/ton/util/tonCore';\nimport {\n  fetchStoredAccount,\n  getAccountIds,\n  getAccountValue,\n  getNewAccountId,\n  removeAccountValue,\n  removeNetworkAccountsValue,\n  setAccountValue,\n} from '../common/accounts';\nimport { bytesToHex, hexToBytes } from '../common/utils';\nimport { apiDb } from '../db';\nimport { getEnvironment } from '../environment';\nimport { handleServerError } from '../errors';\nimport { storage } from '../storages';\nimport { activateAccount, deactivateAllAccounts, deactivateCurrentAccount } from './accounts';\nimport { removeAccountDapps, removeAllDapps, removeNetworkDapps } from './dapps';\n\nexport function generateMnemonic() {\n  return blockchains.ton.generateMnemonic();\n}\n\nexport async function createWallet(\n  network: ApiNetwork,\n  mnemonic: string[],\n  password: string,\n  version?: ApiWalletVersion,\n) {\n  if (!version) version = DEFAULT_WALLET_VERSION;\n\n  const {\n    mnemonicToKeyPair,\n    publicKeyToAddress,\n  } = blockchains.ton;\n\n  if (!await validateMnemonic(mnemonic)) {\n    throw new Error('Invalid mnemonic');\n  }\n\n  const { publicKey } = await mnemonicToKeyPair(mnemonic);\n  const address = publicKeyToAddress(network, publicKey, version);\n\n  const accountId = await getNewAccountId(network);\n  const result = await storeAccount(accountId, mnemonic, password, {\n    address,\n    publicKey: bytesToHex(publicKey),\n    version,\n  });\n\n  if ('error' in result) {\n    return result as { error: string };\n  }\n\n  void activateAccount(accountId);\n\n  return {\n    accountId,\n    address,\n  };\n}\n\nexport function validateMnemonic(mnemonic: string[]) {\n  return blockchains.ton.validateMnemonic(mnemonic);\n}\n\nexport async function importMnemonic(network: ApiNetwork, mnemonic: string[], password: string) {\n  const {\n    mnemonicToKeyPair,\n    pickBestWallet,\n  } = blockchains.ton;\n\n  const isPrivateKey = isMnemonicPrivateKey(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic) && !await validateMnemonic(mnemonic)) {\n    throw new Error('Invalid mnemonic');\n  }\n\n  const { publicKey } = isPrivateKey ? privateKeyHexToKeyPair(mnemonic[0]) : await mnemonicToKeyPair(mnemonic);\n  let wallet: TonWallet;\n  let version: ApiWalletVersion;\n\n  try {\n    ({ wallet, version } = await pickBestWallet(network, publicKey));\n  } catch (err: any) {\n    return handleServerError(err);\n  }\n\n  const address = toBase64Address(wallet.address, false, network);\n\n  const accountId: string = await getNewAccountId(network);\n  const result = await storeAccount(accountId, mnemonic, password, {\n    publicKey: bytesToHex(publicKey),\n    address,\n    version,\n  });\n\n  if ('error' in result) {\n    return result as { error: string };\n  }\n\n  void activateAccount(accountId);\n\n  return {\n    accountId,\n    address,\n  };\n}\n\nexport async function importLedgerWallet(network: ApiNetwork, walletInfo: LedgerWalletInfo) {\n  const accountId: string = await getNewAccountId(network);\n  const {\n    publicKey, address, index, driver, deviceId, deviceName, version,\n  } = walletInfo;\n\n  await storeHardwareAccount(accountId, {\n    address,\n    publicKey,\n    version,\n    ledger: {\n      index,\n      driver,\n      deviceId,\n      deviceName,\n    },\n  });\n  void activateAccount(accountId);\n\n  return { accountId, address, walletInfo };\n}\n\nexport async function importNewWalletVersion(accountId: string, version: ApiWalletVersion) {\n  const { publicKeyToAddress } = blockchains.ton;\n  const { network } = parseAccountId(accountId);\n\n  const account = await fetchStoredAccount(accountId);\n  const mnemonicEncrypted = await getAccountValue(accountId, 'mnemonicsEncrypted');\n  const publicKey = hexToBytes(account.publicKey);\n\n  const newAddress = publicKeyToAddress(network, publicKey, version);\n  const newAccountId = await getNewAccountId(network);\n  const newAccount: ApiAccount = {\n    address: newAddress,\n    publicKey: account.publicKey,\n    version,\n  };\n\n  await Promise.all([\n    setAccountValue(newAccountId, 'mnemonicsEncrypted', mnemonicEncrypted),\n    setAccountValue(newAccountId, 'accounts', newAccount),\n  ]);\n\n  void activateAccount(newAccountId);\n\n  return {\n    accountId: newAccountId,\n    address: newAddress,\n  };\n}\n\nfunction storeHardwareAccount(accountId: string, account?: ApiAccount) {\n  return setAccountValue(accountId, 'accounts', account);\n}\n\nasync function storeAccount(accountId: string, mnemonic: string[], password: string, account: ApiAccount) {\n  const mnemonicEncrypted = await blockchains.ton.encryptMnemonic(mnemonic, password);\n\n  // This is a defensive approach against potential corrupted encryption reported by some users\n  const decryptedMnemonic = await blockchains.ton.decryptMnemonic(mnemonicEncrypted, password)\n    .catch(() => undefined);\n\n  if (!password || !decryptedMnemonic) {\n    return { error: ApiCommonError.DebugError };\n  }\n\n  await Promise.all([\n    setAccountValue(accountId, 'mnemonicsEncrypted', mnemonicEncrypted),\n    setAccountValue(accountId, 'accounts', account),\n  ]);\n\n  return {};\n}\n\nexport async function removeNetworkAccounts(network: ApiNetwork) {\n  deactivateAllAccounts();\n\n  await Promise.all([\n    removeNetworkAccountsValue(network, 'mnemonicsEncrypted'),\n    removeNetworkAccountsValue(network, 'accounts'),\n    getEnvironment().isDappSupported && removeNetworkDapps(network),\n  ]);\n}\n\nexport async function resetAccounts() {\n  deactivateAllAccounts();\n\n  await Promise.all([\n    storage.removeItem('mnemonicsEncrypted'),\n    storage.removeItem('accounts'),\n    storage.removeItem('currentAccountId'),\n    getEnvironment().isDappSupported && removeAllDapps(),\n    apiDb.nfts.clear(),\n  ]);\n}\n\nexport async function removeAccount(accountId: string, nextAccountId: string, newestTxIds?: ApiTxIdBySlug) {\n  await Promise.all([\n    removeAccountValue(accountId, 'mnemonicsEncrypted'),\n    removeAccountValue(accountId, 'accounts'),\n    getEnvironment().isDappSupported && removeAccountDapps(accountId),\n    apiDb.nfts.where({ accountId }).delete(),\n  ]);\n\n  deactivateCurrentAccount();\n  await activateAccount(nextAccountId, newestTxIds);\n}\n\nexport async function changePassword(oldPassword: string, password: string) {\n  for (const accountId of await getAccountIds()) {\n    const mnemonic = await blockchains.ton.fetchMnemonic(accountId, oldPassword);\n    if (!mnemonic) {\n      throw new Error('Incorrect password');\n    }\n\n    const encryptedMnemonic = await blockchains.ton.encryptMnemonic(mnemonic, password);\n    await setAccountValue(accountId, 'mnemonicsEncrypted', encryptedMnemonic);\n  }\n}\n","import generateUniqueId from '../../util/generateUniqueId';\nimport { ApiUserRejectsError } from '../errors';\n\nconst deferreds = new Map<string, Deferred>();\n\nclass Deferred<T = any> {\n  resolve!: AnyToVoidFunction;\n\n  reject!: AnyToVoidFunction;\n\n  promise = new Promise<T>((resolve, reject) => {\n    this.resolve = resolve;\n    this.reject = reject;\n  });\n}\n\nexport function createDappPromise(promiseId = generateUniqueId()) {\n  const deferred = new Deferred();\n\n  deferreds.set(promiseId, deferred);\n\n  const { promise } = deferred;\n\n  return { promiseId, promise };\n}\n\nexport function resolveDappPromise(promiseId: string, value?: any) {\n  const deferred = deferreds.get(promiseId);\n  if (!deferred) {\n    return;\n  }\n\n  deferred.resolve(value);\n  deferreds.delete(promiseId);\n}\n\nexport function rejectDappPromise(promiseId: string, reason: string = 'Unknown rejection reason') {\n  const deferred = deferreds.get(promiseId);\n  if (!deferred) {\n    return;\n  }\n\n  deferred.reject(new ApiUserRejectsError(reason));\n  deferreds.delete(promiseId);\n}\n\nexport function rejectAllDappPromises(message: string) {\n  Array.from(deferreds.keys()).forEach((id) => {\n    rejectDappPromise(id, message);\n  });\n}\n","import * as tonWebMnemonic from 'tonweb-mnemonic';\n\nimport type { ApiNetwork } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport blockchains from '../blockchains';\nimport {\n  fetchStoredAddress,\n  getAccountIdWithMnemonic,\n} from '../common/accounts';\nimport * as dappPromises from '../common/dappPromises';\nimport { resolveBlockchainKey } from '../common/helpers';\n\nconst ton = blockchains.ton;\n\nexport function getMnemonic(accountId: string, password: string) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  return blockchain.fetchMnemonic(accountId, password);\n}\n\nexport function getMnemonicWordList() {\n  return tonWebMnemonic.wordlists.default;\n}\n\nexport async function verifyPassword(password: string) {\n  const accountId = await getAccountIdWithMnemonic();\n  if (!accountId) {\n    throw new Error('The user is not authorized in the wallet');\n  }\n\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  return blockchain.verifyPassword(accountId, password);\n}\n\nexport function confirmDappRequest(promiseId: string, data: any) {\n  dappPromises.resolveDappPromise(promiseId, data);\n}\n\nexport function confirmDappRequestConnect(promiseId: string, data: {\n  password?: string;\n  accountId?: string;\n  signature?: string;\n}) {\n  dappPromises.resolveDappPromise(promiseId, data);\n}\n\nexport function cancelDappRequest(promiseId: string, reason?: string) {\n  dappPromises.rejectDappPromise(promiseId, reason);\n}\n\nexport async function getWalletSeqno(accountId: string, address?: string) {\n  const { network } = parseAccountId(accountId);\n  if (!address) {\n    address = await fetchStoredAddress(accountId);\n  }\n  return ton.getWalletSeqno(network, address);\n}\n\nexport function fetchAddress(accountId: string) {\n  return fetchStoredAddress(accountId);\n}\n\nexport function isWalletInitialized(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.isAddressInitialized(network, address);\n}\n\nexport function getWalletBalance(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getWalletBalance(network, address);\n}\n\nexport function getContractInfo(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getContractInfo(network, address);\n}\n\nexport function getWalletInfo(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getWalletInfo(network, address);\n}\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { throttle } from './schedulers';\n\nconst noop = () => {\n};\n\nconst throttledAlert = typeof window !== 'undefined' ? throttle(window.alert, 1000) : noop;\n\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('error', handleErrorEvent);\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  // eslint-disable-next-line no-console\n  console.error(err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (APP_ENV === 'development' || APP_ENV === 'staging') {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\nexport default function safeExec(cb: Function, rescue?: (err: Error) => void, always?: NoneToVoidFunction) {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    handleError(err);\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","import type {\n  CHAIN, ConnectEventError, ConnectItemReply, DeviceInfo,\n} from '@tonconnect/protocol';\n\nexport interface LocalConnectEventSuccess {\n  event: 'connect';\n  id: number;\n  payload: {\n    items: ConnectItemReply[];\n    device?: DeviceInfo; // We add it later in contentScript.js\n  };\n}\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SIGN_DATA_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES | SIGN_DATA_ERROR_CODES;\nexport type LocalConnectEvent = LocalConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from '../types';\nimport type { AllErrorCodes } from './types';\nimport { ApiTransactionError } from '../types';\nimport { CONNECT_EVENT_ERROR_CODES } from './types';\n\nimport { ApiBaseError } from '../errors';\n\nexport class TonConnectError extends ApiBaseError {\n  code: number;\n\n  constructor(message: string, code: AllErrorCodes = 0, displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.code = code;\n    this.displayError = displayError;\n  }\n}\n\nexport class ManifestContentError extends TonConnectError {\n  constructor(message = 'Manifest content error') {\n    super(message, CONNECT_EVENT_ERROR_CODES.MANIFEST_CONTENT_ERROR);\n  }\n}\n\nexport class UnknownError extends TonConnectError {\n  constructor(message = 'Unknown error.') {\n    super(message, 0);\n  }\n}\n\nexport class BadRequestError extends TonConnectError {\n  constructor(message = 'Bad request', displayError?: ApiAnyDisplayError) {\n    super(message, 1, displayError);\n  }\n}\n\nexport class UnknownAppError extends TonConnectError {\n  constructor(message = 'Unknown app error') {\n    super(message, 100);\n  }\n}\n\nexport class UserRejectsError extends TonConnectError {\n  constructor(message = 'The user rejected the action') {\n    super(message, 300);\n  }\n}\n\nexport class InsufficientBalance extends BadRequestError {\n  constructor(message = 'Insufficient balance') {\n    super(message, ApiTransactionError.InsufficientBalance);\n  }\n}\n","export function isValidString(value: any, maxLength = 100) {\n  return typeof value === 'string' && value.length <= maxLength;\n}\n\nexport function isValidUrl(url: string) {\n  const isString = isValidString(url, 255);\n  if (!isString) return false;\n\n  try {\n    // eslint-disable-next-line no-new\n    new URL(url);\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n","import { Address, Cell } from '@ton/core';\nimport type {\n  ConnectEventError,\n  ConnectItemReply,\n  ConnectRequest,\n  DisconnectRpcRequest,\n  DisconnectRpcResponse,\n  SendTransactionRpcRequest,\n  SendTransactionRpcResponse,\n  SignDataRpcRequest,\n  TonProofItem,\n  TonProofItemReplySuccess,\n} from '@tonconnect/protocol';\nimport { CHAIN } from '@tonconnect/protocol';\nimport nacl from 'tweetnacl';\n\nimport type {\n  ApiAnyDisplayError,\n  ApiDappMetadata,\n  ApiDappRequest,\n  ApiNetwork,\n  ApiSignedTransfer,\n  OnApiUpdate,\n} from '../types';\nimport type {\n  ApiTonConnectProof, LocalConnectEvent, TransactionPayload, TransactionPayloadMessage,\n} from './types';\nimport { ApiCommonError, ApiTransactionError } from '../types';\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES, SIGN_DATA_ERROR_CODES } from './types';\n\nimport { IS_EXTENSION, TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { logDebugError } from '../../util/logs';\nimport { fetchJsonMetadata } from '../../util/metadata';\nimport safeExec from '../../util/safeExec';\nimport blockchains from '../blockchains';\nimport { parsePayloadBase64 } from '../blockchains/ton';\nimport { fetchKeyPair } from '../blockchains/ton/auth';\nimport {\n  getIsRawAddress, getWalletPublicKey, toBase64Address, toRawAddress,\n} from '../blockchains/ton/util/tonCore';\nimport { getContractInfo } from '../blockchains/ton/wallet';\nimport {\n  fetchStoredAccount,\n  fetchStoredAddress,\n  fetchStoredPublicKey,\n  getCurrentAccountId,\n  getCurrentAccountIdOrFail,\n} from '../common/accounts';\nimport { getKnownAddressInfo } from '../common/addresses';\nimport { createDappPromise } from '../common/dappPromises';\nimport { isUpdaterAlive } from '../common/helpers';\nimport { bytesToBase64, hexToBytes, sha256 } from '../common/utils';\nimport * as apiErrors from '../errors';\nimport { ApiServerError } from '../errors';\nimport { callHook } from '../hooks';\nimport {\n  activateDapp,\n  addDapp,\n  deactivateAccountDapp,\n  deactivateDapp,\n  deleteDapp,\n  findLastConnectedAccount,\n  getDapp,\n  getDappsByOrigin,\n  updateDapp,\n} from '../methods/dapps';\nimport { createLocalTransaction } from '../methods/transactions';\nimport * as errors from './errors';\nimport { UnknownAppError } from './errors';\nimport { isValidString, isValidUrl } from './utils';\n\nconst BLANK_GIF_DATA_URL = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n\nconst ton = blockchains.ton;\n\nlet resolveInit: AnyFunction;\nconst initPromise = new Promise((resolve) => {\n  resolveInit = resolve;\n});\n\nlet onPopupUpdate: OnApiUpdate;\n\nexport function initTonConnect(_onPopupUpdate: OnApiUpdate) {\n  onPopupUpdate = _onPopupUpdate;\n  resolveInit();\n}\n\nexport async function connect(\n  request: ApiDappRequest,\n  message: ConnectRequest,\n  id: number,\n): Promise<LocalConnectEvent> {\n  try {\n    await openExtensionPopup(true);\n\n    onPopupUpdate({\n      type: 'dappLoading',\n      connectionType: 'connect',\n      isSse: request && 'sseOptions' in request,\n    });\n\n    const dappMetadata = await fetchDappMetadata(message.manifestUrl);\n\n    if (!IS_EXTENSION) {\n      request.origin = dappMetadata.origin;\n    }\n\n    const { origin } = await validateRequest(request, true);\n\n    const addressItem = message.items.find(({ name }) => name === 'ton_addr');\n    const proofItem = message.items.find(({ name }) => name === 'ton_proof') as TonProofItem | undefined;\n    const proof = proofItem ? {\n      timestamp: Math.round(Date.now() / 1000),\n      domain: new URL(origin).host,\n      payload: proofItem.payload,\n    } : undefined;\n\n    if (!addressItem) {\n      throw new errors.BadRequestError(\"Missing 'ton_addr'\");\n    }\n\n    let accountId = await getCurrentAccountOrFail();\n\n    const { promiseId, promise } = createDappPromise();\n\n    const dapp = {\n      ...dappMetadata,\n      origin,\n      connectedAt: Date.now(),\n      ...('sseOptions' in request && {\n        sse: request.sseOptions,\n      }),\n    };\n\n    onPopupUpdate({\n      type: 'dappConnect',\n      promiseId,\n      accountId,\n      dapp,\n      permissions: {\n        address: true,\n        proof: !!proof,\n      },\n      proof,\n    });\n\n    const promiseResult: {\n      accountId?: string;\n      password?: string;\n      signature?: string;\n    } | undefined = await promise;\n\n    accountId = promiseResult!.accountId!;\n    request.accountId = accountId;\n    await addDapp(accountId, dapp);\n\n    const result = await reconnect(request, id);\n\n    if (result.event === 'connect' && proof) {\n      const address = await fetchStoredAddress(accountId);\n      const { password, signature } = promiseResult!;\n\n      let proofReplyItem: TonProofItemReplySuccess;\n      if (password) {\n        proofReplyItem = await signTonProof(accountId, password!, address, proof!);\n      } else {\n        proofReplyItem = buildTonProofReplyItem(proof, signature!);\n      }\n\n      result.payload.items.push(proofReplyItem);\n    }\n\n    onPopupUpdate({ type: 'updateDapps' });\n    onPopupUpdate({ type: 'dappConnectComplete' });\n\n    return result;\n  } catch (err) {\n    logDebugError('tonConnect:connect', err);\n\n    safeExec(() => {\n      onPopupUpdate({\n        type: 'dappCloseLoading',\n      });\n    });\n\n    return formatConnectError(id, err as Error);\n  }\n}\n\nexport async function reconnect(request: ApiDappRequest, id: number): Promise<LocalConnectEvent> {\n  try {\n    const { origin, accountId } = await validateRequest(request);\n\n    activateDapp(accountId, origin);\n    const currentDapp = await getDapp(accountId, origin);\n    if (!currentDapp) {\n      throw new UnknownAppError();\n    }\n    await updateDapp(accountId, origin, (dapp) => ({ ...dapp, connectedAt: Date.now() }));\n\n    const address = await fetchStoredAddress(accountId);\n    const items: ConnectItemReply[] = [\n      await buildTonAddressReplyItem(accountId, address),\n    ];\n\n    return {\n      event: 'connect',\n      id,\n      payload: { items },\n    };\n  } catch (e) {\n    logDebugError('tonConnect:reconnect', e);\n    return formatConnectError(id, e as Error);\n  }\n}\n\nexport async function disconnect(\n  request: ApiDappRequest,\n  message: DisconnectRpcRequest,\n): Promise<DisconnectRpcResponse> {\n  try {\n    const { origin, accountId } = await validateRequest(request);\n\n    await deleteDapp(accountId, origin, true);\n    deactivateAccountDapp(accountId);\n    onPopupUpdate({ type: 'updateDapps' });\n  } catch (err) {\n    logDebugError('tonConnect:disconnect', err);\n  }\n  return {\n    id: message.id,\n    result: {},\n  };\n}\n\nexport async function sendTransaction(\n  request: ApiDappRequest,\n  message: SendTransactionRpcRequest,\n): Promise<SendTransactionRpcResponse> {\n  try {\n    const { origin, accountId } = await validateRequest(request);\n    const { network } = parseAccountId(accountId);\n\n    const txPayload = JSON.parse(message.params[0]) as TransactionPayload;\n    const { messages, network: dappNetworkRaw } = txPayload;\n\n    if (messages.length > 4) {\n      throw new errors.BadRequestError('Payload contains more than 4 messages, which exceeds limit');\n    }\n\n    const dappNetwork = dappNetworkRaw\n      ? (dappNetworkRaw === CHAIN.MAINNET ? 'mainnet' : 'testnet')\n      : undefined;\n    let validUntil = txPayload.valid_until;\n    if (validUntil && validUntil > 10 ** 10) {\n      // If milliseconds were passed instead of seconds\n      validUntil = Math.round(validUntil / 1000);\n    }\n\n    const account = await fetchStoredAccount(accountId);\n    const isLedger = !!account.ledger;\n\n    let vestingAddress: string | undefined;\n\n    if (txPayload.from && toBase64Address(txPayload.from) !== toBase64Address(account.address)) {\n      const publicKey = hexToBytes(account.publicKey);\n      if (isLedger && await checkIsHisVestingWallet(network, publicKey, txPayload.from)) {\n        vestingAddress = txPayload.from;\n      } else {\n        throw new errors.BadRequestError(undefined, ApiTransactionError.WrongAddress);\n      }\n    }\n\n    if (dappNetwork && network !== dappNetwork) {\n      throw new errors.BadRequestError(undefined, ApiTransactionError.WrongNetwork);\n    }\n\n    await openExtensionPopup(true);\n\n    onPopupUpdate({\n      type: 'dappLoading',\n      connectionType: 'sendTransaction',\n      accountId,\n      isSse: Boolean('sseOptions' in request && request.sseOptions),\n    });\n\n    const {\n      preparedMessages,\n      checkResult,\n    } = await checkTransactionMessages(accountId, messages, network);\n\n    const dapp = (await getDappsByOrigin(accountId))[origin];\n    const transactionsForRequest = await prepareTransactionForRequest(network, messages);\n\n    const { promiseId, promise } = createDappPromise();\n\n    onPopupUpdate({\n      type: 'dappSendTransactions',\n      promiseId,\n      accountId,\n      dapp,\n      transactions: transactionsForRequest,\n      fee: checkResult.fee!,\n      vestingAddress,\n    });\n\n    // eslint-disable-next-line prefer-const\n    const response: string | ApiSignedTransfer[] = await promise;\n\n    if (validUntil && validUntil < (Date.now() / 1000)) {\n      throw new errors.BadRequestError('The confirmation timeout has expired');\n    }\n\n    let boc: string | undefined;\n    let successNumber: number | undefined;\n    let error: string | undefined;\n    let msgHashes: string[] = [];\n\n    if (isLedger) {\n      const signedTransfers = response as ApiSignedTransfer[];\n      const submitResult = await ton.sendSignedMessages(accountId, signedTransfers);\n      boc = submitResult.firstBoc;\n      successNumber = submitResult.successNumber;\n      msgHashes = submitResult.msgHashes;\n\n      if (successNumber > 0) {\n        if (successNumber < messages.length) {\n          onPopupUpdate({\n            type: 'showError',\n            error: ApiTransactionError.PartialTransactionFailure,\n          });\n        }\n      } else {\n        error = 'Failed transfers';\n      }\n    } else {\n      const password = response as string;\n      const submitResult = await ton.submitMultiTransfer(accountId, password!, preparedMessages, validUntil);\n      if ('error' in submitResult) {\n        error = submitResult.error;\n      } else {\n        boc = submitResult.boc;\n        successNumber = messages.length;\n        msgHashes = [submitResult.msgHash];\n      }\n    }\n\n    if (error) {\n      throw new errors.UnknownError(error);\n    }\n\n    const fromAddress = await fetchStoredAddress(accountId);\n    const successTransactions = transactionsForRequest.slice(0, successNumber!);\n\n    successTransactions.forEach(({ amount, normalizedAddress, payload }, index) => {\n      const comment = payload?.type === 'comment' ? payload.comment : undefined;\n      const msgHash = isLedger ? msgHashes[index] : msgHashes[0];\n      createLocalTransaction(accountId, {\n        amount,\n        fromAddress,\n        toAddress: normalizedAddress,\n        comment,\n        fee: checkResult.fee!,\n        slug: TONCOIN_SLUG,\n        inMsgHash: msgHash,\n      });\n    });\n\n    return {\n      result: boc!,\n      id: message.id,\n    };\n  } catch (err) {\n    logDebugError('tonConnect:sendTransaction', err);\n\n    safeExec(() => {\n      onPopupUpdate({\n        type: 'dappCloseLoading',\n      });\n    });\n\n    let code = SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR;\n    let errorMessage = 'Unhandled error';\n    let displayError: ApiAnyDisplayError | undefined;\n\n    if (err instanceof apiErrors.ApiUserRejectsError) {\n      code = SEND_TRANSACTION_ERROR_CODES.USER_REJECTS_ERROR;\n      errorMessage = err.message;\n    } else if (err instanceof errors.TonConnectError) {\n      code = err.code;\n      errorMessage = err.message;\n      displayError = err.displayError;\n    } else if (err instanceof ApiServerError) {\n      displayError = err.displayError;\n    } else {\n      displayError = ApiCommonError.Unexpected;\n    }\n\n    if (onPopupUpdate && isUpdaterAlive(onPopupUpdate) && displayError) {\n      onPopupUpdate({\n        type: 'showError',\n        error: displayError,\n      });\n    }\n    return {\n      error: {\n        code,\n        message: errorMessage,\n      },\n      id: message.id,\n    };\n  }\n}\n\nasync function checkIsHisVestingWallet(network: ApiNetwork, ownerPublicKey: Uint8Array, address: string) {\n  const [info, publicKey] = await Promise.all([\n    getContractInfo(network, address),\n    getWalletPublicKey(network, address),\n  ]);\n\n  return info.contractInfo?.name === 'vesting' && areDeepEqual(ownerPublicKey, publicKey);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function signData(request: ApiDappRequest, message: SignDataRpcRequest) {\n  return {\n    error: {\n      code: SIGN_DATA_ERROR_CODES.METHOD_NOT_SUPPORTED,\n      message: 'Method not supported',\n    },\n    id: message.id,\n  };\n}\n\nasync function checkTransactionMessages(accountId: string, messages: TransactionPayloadMessage[], network: ApiNetwork) {\n  const preparedMessages = messages.map((msg) => {\n    const {\n      address,\n      amount,\n      payload,\n      stateInit,\n    } = msg;\n\n    return {\n      toAddress: getIsRawAddress(address) ? toBase64Address(address, true, network) : address,\n      amount: BigInt(amount),\n      payload: payload ? Cell.fromBase64(payload) : undefined,\n      stateInit: stateInit ? Cell.fromBase64(stateInit) : undefined,\n    };\n  });\n\n  const checkResult = await ton.checkMultiTransactionDraft(accountId, preparedMessages);\n  if ('error' in checkResult) {\n    onPopupUpdate({\n      type: 'showError',\n      error: checkResult.error,\n    });\n    throw new errors.BadRequestError(checkResult.error);\n  }\n\n  return {\n    preparedMessages,\n    checkResult,\n  };\n}\n\nfunction prepareTransactionForRequest(network: ApiNetwork, messages: TransactionPayloadMessage[]) {\n  return Promise.all(messages.map(\n    async ({\n      address,\n      amount,\n      payload: rawPayload,\n      stateInit,\n    }) => {\n      const toAddress = getIsRawAddress(address) ? toBase64Address(address, true, network) : address;\n      // Fix address format for `waitTxComplete` to work properly\n      const normalizedAddress = toBase64Address(address, undefined, network);\n      const payload = rawPayload ? await parsePayloadBase64(network, toAddress, rawPayload) : undefined;\n      const { isScam } = getKnownAddressInfo(normalizedAddress) || {};\n\n      return {\n        toAddress,\n        amount: BigInt(amount),\n        rawPayload,\n        payload,\n        stateInit,\n        normalizedAddress,\n        isScam,\n      };\n    },\n  ));\n}\n\nexport async function deactivate(request: ApiDappRequest) {\n  try {\n    const { origin } = await validateRequest(request, true);\n\n    deactivateDapp(origin);\n  } catch (err) {\n    logDebugError('tonConnect:deactivate', err);\n  }\n}\n\nfunction formatConnectError(id: number, error: Error): ConnectEventError {\n  let code = CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR;\n  let message = 'Unhandled error';\n\n  if (error instanceof apiErrors.ApiUserRejectsError) {\n    code = CONNECT_EVENT_ERROR_CODES.USER_REJECTS_ERROR;\n    message = error.message;\n  } else if (error instanceof errors.TonConnectError) {\n    code = error.code;\n    message = error.message;\n  }\n\n  return {\n    id,\n    event: 'connect_error',\n    payload: {\n      code,\n      message,\n    },\n  };\n}\n\nasync function buildTonAddressReplyItem(accountId: string, address: string): Promise<ConnectItemReply> {\n  const { network } = parseAccountId(accountId);\n\n  const [stateInit, publicKey] = await Promise.all([\n    ton.getWalletStateInit(accountId),\n    fetchStoredPublicKey(accountId),\n  ]);\n  return {\n    name: 'ton_addr',\n    address: toRawAddress(address),\n    network: network === 'mainnet' ? CHAIN.MAINNET : CHAIN.TESTNET,\n    publicKey,\n    walletStateInit: stateInit\n      .toBoc({ idx: true, crc32: true })\n      .toString('base64'),\n  };\n}\n\nasync function signTonProof(\n  accountId: string,\n  password: string,\n  walletAddress: string,\n  proof: ApiTonConnectProof,\n): Promise<TonProofItemReplySuccess> {\n  const keyPair = await fetchKeyPair(accountId, password);\n  const { timestamp, domain, payload } = proof;\n\n  const timestampBuffer = Buffer.allocUnsafe(8);\n  timestampBuffer.writeBigInt64LE(BigInt(timestamp));\n\n  const domainBuffer = Buffer.from(domain);\n  const domainLengthBuffer = Buffer.allocUnsafe(4);\n  domainLengthBuffer.writeInt32LE(domainBuffer.byteLength);\n\n  const address = Address.parse(walletAddress);\n\n  const addressWorkchainBuffer = Buffer.allocUnsafe(4);\n  addressWorkchainBuffer.writeInt32BE(address.workChain);\n\n  const addressBuffer = Buffer.concat([\n    addressWorkchainBuffer,\n    address.hash,\n  ]);\n\n  const messageBuffer = Buffer.concat([\n    Buffer.from('ton-proof-item-v2/', 'utf8'),\n    addressBuffer,\n    domainLengthBuffer,\n    domainBuffer,\n    timestampBuffer,\n    Buffer.from(payload),\n  ]);\n\n  const bufferToSign = Buffer.concat([\n    Buffer.from('ffff', 'hex'),\n    Buffer.from('ton-connect', 'utf8'),\n    Buffer.from(await sha256(messageBuffer)),\n  ]);\n\n  const signature = nacl.sign.detached(\n    Buffer.from(await sha256(bufferToSign)),\n    keyPair!.secretKey,\n  );\n\n  return buildTonProofReplyItem(proof, bytesToBase64(signature));\n}\n\nfunction buildTonProofReplyItem(proof: ApiTonConnectProof, signature: string): TonProofItemReplySuccess {\n  const { timestamp, domain, payload } = proof;\n  const domainBuffer = Buffer.from(domain);\n\n  return {\n    name: 'ton_proof',\n    proof: {\n      timestamp,\n      domain: {\n        lengthBytes: domainBuffer.byteLength,\n        value: domainBuffer.toString('utf8'),\n      },\n      signature,\n      payload,\n    },\n  };\n}\n\nexport async function fetchDappMetadata(manifestUrl: string, origin?: string): Promise<ApiDappMetadata> {\n  try {\n    const data = await fetchJsonMetadata(manifestUrl);\n\n    const { url, name, iconUrl } = await data;\n    const safeIconUrl = iconUrl.startsWith('data:') ? BLANK_GIF_DATA_URL : iconUrl;\n    if (!isValidUrl(url) || !isValidString(name) || !isValidUrl(safeIconUrl)) {\n      throw new Error('Invalid data');\n    }\n\n    return {\n      origin: origin ?? new URL(url).origin,\n      url,\n      name,\n      iconUrl: safeIconUrl,\n      manifestUrl,\n    };\n  } catch (err) {\n    logDebugError('fetchDapp', err);\n    throw new errors.ManifestContentError();\n  }\n}\n\nasync function validateRequest(request: ApiDappRequest, skipConnection = false) {\n  const { origin } = request;\n  if (!origin) {\n    throw new errors.BadRequestError('Invalid origin');\n  }\n\n  let accountId = '';\n  if (request.accountId) {\n    accountId = request.accountId;\n  } else if (!skipConnection) {\n    const { network } = parseAccountId(await getCurrentAccountIdOrFail());\n    const lastAccountId = await findLastConnectedAccount(network, origin);\n    if (!lastAccountId) {\n      throw new errors.BadRequestError('The connection is outdated, try relogin');\n    }\n    accountId = lastAccountId;\n  }\n\n  return { origin, accountId };\n}\n\nasync function openExtensionPopup(force?: boolean) {\n  if (!IS_EXTENSION || (!force && onPopupUpdate && isUpdaterAlive(onPopupUpdate))) {\n    return false;\n  }\n\n  await callHook('onWindowNeeded');\n  await initPromise;\n\n  return true;\n}\n\nasync function getCurrentAccountOrFail() {\n  const accountId = await getCurrentAccountId();\n  if (!accountId) {\n    throw new errors.BadRequestError('The user is not authorized in the wallet');\n  }\n  return accountId;\n}\n","import type {\n  AppRequest,\n  ConnectEvent,\n  ConnectRequest,\n  DeviceInfo,\n  DisconnectEvent,\n  RpcRequests,\n} from '@tonconnect/protocol';\nimport nacl, { randomBytes } from 'tweetnacl';\n\nimport type { ApiDappRequest, ApiSseOptions, OnApiUpdate } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { handleFetchErrors } from '../../util/fetch';\nimport { extractKey } from '../../util/iteratees';\nimport { logDebug, logDebugError } from '../../util/logs';\nimport safeExec from '../../util/safeExec';\nimport { getCurrentNetwork, waitLogin } from '../common/accounts';\nimport { bytesToHex } from '../common/utils';\nimport { getDappsState, getSseLastEventId, setSseLastEventId } from '../methods/dapps';\nimport * as tonConnect from './index';\n\ntype SseDapp = {\n  accountId: string;\n  origin: string;\n} & ApiSseOptions;\n\ntype ReturnStrategy = 'back' | 'none' | string;\n\nconst BRIDGE_URL = 'https://tonconnectbridge.mytonwallet.org/bridge';\nconst TTL_SEC = 300;\nconst NONCE_SIZE = 24;\nconst MAX_CONFIRM_DURATION = 60 * 1000;\n\nlet sseEventSource: EventSource | undefined;\nlet sseDapps: SseDapp[] = [];\nlet delayedReturnParams: {\n  validUntil: number;\n  url: string;\n  isFromInAppBrowser?: boolean;\n} | undefined;\n\nlet onUpdate: OnApiUpdate;\n\nexport function initSse(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function startSseConnection({ url, deviceInfo, isFromInAppBrowser }: {\n  url: string;\n  deviceInfo: DeviceInfo;\n  isFromInAppBrowser?: boolean;\n}): Promise<ReturnStrategy | undefined> {\n  const { searchParams: params, origin } = new URL(url);\n\n  const ret: ReturnStrategy = params.get('ret') || 'back';\n  const version = Number(params.get('v') as string);\n  const appClientId = params.get('id') as string;\n  // `back` strategy cannot be implemented\n  const shouldOpenUrl = ret !== 'back' && ret !== 'none';\n  const r = params.get('r');\n\n  if (!r) {\n    if (shouldOpenUrl) {\n      delayedReturnParams = {\n        validUntil: Date.now() + MAX_CONFIRM_DURATION,\n        url: ret,\n        isFromInAppBrowser,\n      };\n    }\n    return undefined;\n  }\n\n  const connectRequest: ConnectRequest | null = safeExec(() => JSON.parse(r)) || JSON.parse(decodeURIComponent(r));\n\n  logDebug('SSE Start connection:', {\n    version, appClientId, connectRequest, ret, origin,\n  });\n\n  const { secretKey: secretKeyArray, publicKey: publicKeyArray } = nacl.box.keyPair();\n  const secretKey = bytesToHex(secretKeyArray);\n  const clientId = bytesToHex(publicKeyArray);\n\n  const lastOutputId = 0;\n  const request: ApiDappRequest = {\n    sseOptions: {\n      clientId,\n      appClientId,\n      secretKey,\n      lastOutputId,\n    },\n  };\n\n  await waitLogin();\n\n  if (!connectRequest) {\n    onUpdate({\n      type: 'showError',\n      error: 'Invalid TON Connect link',\n    });\n\n    return undefined;\n  }\n\n  const result = await tonConnect.connect(request, connectRequest, lastOutputId) as ConnectEvent;\n  if (result.event === 'connect') {\n    result.payload.device = deviceInfo;\n  }\n\n  await sendMessage(result, secretKey, clientId, appClientId);\n\n  if (result.event !== 'connect_error') {\n    await resetupSseConnection();\n  }\n\n  if (!shouldOpenUrl) {\n    return undefined;\n  }\n\n  return ret;\n}\n\nexport async function resetupSseConnection() {\n  closeEventSource();\n\n  const [lastEventId, dappsState, network] = await Promise.all([\n    getSseLastEventId(),\n    getDappsState(),\n    getCurrentNetwork(),\n  ]);\n\n  if (!dappsState || !network) {\n    return;\n  }\n\n  sseDapps = Object.entries(dappsState).reduce((result, [accountId, dapps]) => {\n    if (parseAccountId(accountId).network === network) {\n      for (const dapp of Object.values(dapps)) {\n        if (dapp.sse?.clientId) {\n          result.push({\n            ...dapp.sse,\n            accountId,\n            origin: dapp.origin,\n          });\n        }\n      }\n    }\n    return result;\n  }, [] as SseDapp[]);\n\n  const clientIds = extractKey(sseDapps, 'clientId').filter(Boolean);\n  if (!clientIds.length) {\n    return;\n  }\n\n  if (sseEventSource) {\n    safeExec(() => {\n      sseEventSource!.close();\n    });\n    sseEventSource = undefined;\n  }\n\n  sseEventSource = openEventSource(clientIds, lastEventId);\n\n  sseEventSource.onopen = () => {\n    logDebug('EventSource opened');\n  };\n\n  sseEventSource.onerror = (e) => {\n    logDebugError('EventSource', e.type);\n  };\n\n  sseEventSource.onmessage = async (event) => {\n    const { from, message: encryptedMessage } = JSON.parse(event.data);\n\n    const sseDapp = sseDapps.find(({ appClientId }) => appClientId === from);\n    if (!sseDapp) {\n      logDebug(`Dapp with clientId ${from} not found`);\n      return;\n    }\n\n    const {\n      accountId, clientId, appClientId, secretKey, origin, lastOutputId,\n    } = sseDapp;\n    const message = decryptMessage(encryptedMessage, appClientId, secretKey) as AppRequest<keyof RpcRequests>;\n\n    logDebug('SSE Event:', message);\n\n    await setSseLastEventId(event.lastEventId);\n    const sseOptions = {\n      clientId,\n      appClientId,\n      secretKey,\n      lastOutputId,\n    };\n\n    // @ts-ignore\n    const result = await tonConnect[message.method]({ origin, accountId, sseOptions }, message);\n\n    await sendMessage(result, secretKey, clientId, appClientId);\n\n    if (delayedReturnParams) {\n      const { validUntil, url, isFromInAppBrowser } = delayedReturnParams;\n      if (validUntil > Date.now()) {\n        onUpdate({ type: 'openUrl', url, isExternal: !isFromInAppBrowser });\n      }\n      delayedReturnParams = undefined;\n    }\n  };\n}\n\nexport async function sendSseDisconnect(accountId: string, origin: string) {\n  const sseDapp = sseDapps.find((dapp) => dapp.origin === origin && dapp.accountId === accountId);\n  if (!sseDapp) return;\n\n  const { secretKey, clientId, appClientId } = sseDapp;\n  const lastOutputId = sseDapp.lastOutputId + 1;\n\n  const response: DisconnectEvent = {\n    event: 'disconnect',\n    id: lastOutputId,\n    payload: {},\n  };\n\n  await sendMessage(response, secretKey, clientId, appClientId);\n}\n\nfunction sendMessage(\n  message: AnyLiteral, secretKey: string, clientId: string, toId: string, topic?: 'signTransaction' | 'signData',\n) {\n  const buffer = Buffer.from(JSON.stringify(message));\n  const encryptedMessage = encryptMessage(buffer, toId, secretKey);\n  return sendRawMessage(encryptedMessage, clientId, toId, topic);\n}\n\nasync function sendRawMessage(body: string, clientId: string, toId: string, topic?: 'signTransaction' | 'signData') {\n  const url = new URL(`${BRIDGE_URL}/message`);\n  url.searchParams.set('client_id', clientId);\n  url.searchParams.set('to', toId);\n  url.searchParams.set('ttl', TTL_SEC.toString());\n  if (topic) {\n    url.searchParams.set('topic', topic);\n  }\n\n  const response = await fetch(url, { method: 'POST', body });\n  await handleFetchErrors(response);\n}\n\nfunction closeEventSource() {\n  if (!sseEventSource) return;\n\n  sseEventSource.close();\n  sseEventSource = undefined;\n}\n\nfunction openEventSource(clientIds: string[], lastEventId?: string) {\n  const url = new URL(`${BRIDGE_URL}/events`);\n  url.searchParams.set('client_id', clientIds.join(','));\n  if (lastEventId) {\n    url.searchParams.set('last_event_id', lastEventId);\n  }\n  return new EventSource(url);\n}\n\nfunction encryptMessage(message: Uint8Array, publicKey: string, secretKey: string) {\n  const nonce = randomBytes(NONCE_SIZE);\n  const encrypted = nacl.box(\n    message, nonce, Buffer.from(publicKey, 'hex'), Buffer.from(secretKey, 'hex'),\n  );\n  return Buffer.concat([nonce, encrypted]).toString('base64');\n}\n\nfunction decryptMessage(message: string, publicKey: string, secretKey: string) {\n  const fullBuffer = Buffer.from(message, 'base64');\n  const nonce = fullBuffer.subarray(0, NONCE_SIZE);\n  const encrypted = fullBuffer.subarray(NONCE_SIZE);\n  const decrypted = nacl.box.open(\n    encrypted,\n    nonce,\n    Buffer.from(publicKey, 'hex'),\n    Buffer.from(secretKey, 'hex'),\n  );\n  const jsonText = new TextDecoder('utf-8').decode(decrypted!);\n  return JSON.parse(jsonText);\n}\n","import '../../util/bigintPatch';\n\nexport * from './auth';\nexport * from './wallet';\nexport * from './transactions';\nexport * from './nfts';\nexport * from './polling';\nexport * from './accounts';\nexport * from './staking';\nexport * from './tokens';\nexport {\n  initDapps,\n  getActiveDapp,\n  getDapps,\n  getDappsByOrigin,\n  deleteDapp,\n  deleteAllDapps,\n  deactivateDapp,\n  loadExploreSites,\n} from './dapps';\nexport {\n  startSseConnection,\n} from '../tonConnect/sse';\nexport * from './swap';\nexport * from './other';\nexport * from './prices';\nexport * from './preload';\nexport * from './vesting';\n","import type { ApiInitArgs, OnApiUpdate } from '../types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { initWindowConnector } from '../../util/capacitorStorageProxy/connector';\nimport blockchains from '../blockchains';\nimport { connectUpdater, startStorageMigration } from '../common/helpers';\nimport { setEnvironment } from '../environment';\nimport { addHooks } from '../hooks';\nimport * as tonConnect from '../tonConnect';\nimport * as tonConnectSse from '../tonConnect/sse';\nimport * as methods from '.';\n\naddHooks({\n  onDappDisconnected: tonConnectSse.sendSseDisconnect,\n  onDappsChanged: tonConnectSse.resetupSseConnection,\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport default async function init(onUpdate: OnApiUpdate, args: ApiInitArgs) {\n  connectUpdater(onUpdate);\n  const environment = setEnvironment(args);\n\n  if (IS_CAPACITOR) {\n    initWindowConnector();\n  }\n\n  methods.initPolling(onUpdate, methods.isAccountActive);\n  methods.initTransactions(onUpdate);\n  methods.initStaking();\n  methods.initSwap(onUpdate);\n  methods.initNfts(onUpdate);\n\n  if (environment.isDappSupported) {\n    methods.initDapps(onUpdate);\n    tonConnect.initTonConnect(onUpdate);\n  }\n\n  if (environment.isSseSupported) {\n    tonConnectSse.initSse(onUpdate);\n  }\n\n  await startStorageMigration(onUpdate, blockchains.ton);\n\n  if (environment.isSseSupported) {\n    void tonConnectSse.resetupSseConnection();\n  }\n}\n","import type {\n  MethodArgs, Methods,\n} from '../../methods/types';\nimport type { TonConnectMethodArgs, TonConnectMethods } from '../../tonConnect/types/misc';\nimport type {\n  ApiInitArgs, OnApiUpdate,\n} from '../../types';\n\nimport { createPostMessageInterface } from '../../../util/createPostMessageInterface';\nimport * as methods from '../../methods';\nimport init from '../../methods/init';\nimport * as tonConnectApi from '../../tonConnect';\n\ncreatePostMessageInterface((name: string, origin?: string, ...args: any[]) => {\n  if (name === 'init') {\n    return init(args[0] as OnApiUpdate, args[1] as ApiInitArgs);\n  } else {\n    if (name.startsWith('tonConnect_')) {\n      name = name.replace('tonConnect_', '');\n      const method = tonConnectApi[name as keyof TonConnectMethods];\n      // @ts-ignore\n      return method(...args as TonConnectMethodArgs<keyof TonConnectMethods>);\n    }\n\n    const method = methods[name as keyof Methods];\n\n    // @ts-ignore\n    return method(...args as MethodArgs<keyof Methods>);\n  }\n});\n","// Version 3.1.2\n/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */\n(function(root) {\n  \"use strict\";\n\n  function checkInt(value) {\n    return (parseInt(value) === value);\n  }\n\n  function checkInts(arrayish) {\n    if (!checkInt(arrayish.length)) { return false; }\n\n    for (var i = 0; i < arrayish.length; i++) {\n      if (!checkInt(arrayish[i]) || arrayish[i] < 0 || arrayish[i] > 255) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function coerceArray(arg, copy) {\n\n    // ArrayBuffer view\n    if (arg.buffer && arg.name === 'Uint8Array') {\n\n      if (copy) {\n        if (arg.slice) {\n          arg = arg.slice();\n        } else {\n          arg = Array.prototype.slice.call(arg);\n        }\n      }\n\n      return arg;\n    }\n\n    // It's an array; check it is a valid representation of a byte\n    if (Array.isArray(arg)) {\n      if (!checkInts(arg)) {\n        throw new Error('Array contains invalid value: ' + arg);\n      }\n\n      return new Uint8Array(arg);\n    }\n\n    // Something else, but behaves like an array (maybe a Buffer? Arguments?)\n    if (checkInt(arg.length) && checkInts(arg)) {\n      return new Uint8Array(arg);\n    }\n\n    throw new Error('unsupported array-like object');\n  }\n\n  function createArray(length) {\n    return new Uint8Array(length);\n  }\n\n  function copyArray(sourceArray, targetArray, targetStart, sourceStart, sourceEnd) {\n    if (sourceStart != null || sourceEnd != null) {\n      if (sourceArray.slice) {\n        sourceArray = sourceArray.slice(sourceStart, sourceEnd);\n      } else {\n        sourceArray = Array.prototype.slice.call(sourceArray, sourceStart, sourceEnd);\n      }\n    }\n    targetArray.set(sourceArray, targetStart);\n  }\n\n\n\n  var convertUtf8 = (function() {\n    function toBytes(text) {\n      var result = [], i = 0;\n      text = encodeURI(text);\n      while (i < text.length) {\n        var c = text.charCodeAt(i++);\n\n        // if it is a % sign, encode the following 2 bytes as a hex value\n        if (c === 37) {\n          result.push(parseInt(text.substr(i, 2), 16))\n          i += 2;\n\n          // otherwise, just the actual byte\n        } else {\n          result.push(c)\n        }\n      }\n\n      return coerceArray(result);\n    }\n\n    function fromBytes(bytes) {\n      var result = [], i = 0;\n\n      while (i < bytes.length) {\n        var c = bytes[i];\n\n        if (c < 128) {\n          result.push(String.fromCharCode(c));\n          i++;\n        } else if (c > 191 && c < 224) {\n          result.push(String.fromCharCode(((c & 0x1f) << 6) | (bytes[i + 1] & 0x3f)));\n          i += 2;\n        } else {\n          result.push(String.fromCharCode(((c & 0x0f) << 12) | ((bytes[i + 1] & 0x3f) << 6) | (bytes[i + 2] & 0x3f)));\n          i += 3;\n        }\n      }\n\n      return result.join('');\n    }\n\n    return {\n      toBytes: toBytes,\n      fromBytes: fromBytes,\n    }\n  })();\n\n  var convertHex = (function() {\n    function toBytes(text) {\n      var result = [];\n      for (var i = 0; i < text.length; i += 2) {\n        result.push(parseInt(text.substr(i, 2), 16));\n      }\n\n      return result;\n    }\n\n    // http://ixti.net/development/javascript/2011/11/11/base64-encodedecode-of-utf8-in-browser-with-js.html\n    var Hex = '0123456789abcdef';\n\n    function fromBytes(bytes) {\n      var result = [];\n      for (var i = 0; i < bytes.length; i++) {\n        var v = bytes[i];\n        result.push(Hex[(v & 0xf0) >> 4] + Hex[v & 0x0f]);\n      }\n      return result.join('');\n    }\n\n    return {\n      toBytes: toBytes,\n      fromBytes: fromBytes,\n    }\n  })();\n\n\n  // Number of rounds by keysize\n  var numberOfRounds = {16: 10, 24: 12, 32: 14}\n\n  // Round constant words\n  var rcon = [0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, 0xc5, 0x91];\n\n  // S-box and Inverse S-box (S is for Substitution)\n  var S = [0x63, 0x7c, 0x77, 0x7b, 0xf2, 0x6b, 0x6f, 0xc5, 0x30, 0x01, 0x67, 0x2b, 0xfe, 0xd7, 0xab, 0x76, 0xca, 0x82, 0xc9, 0x7d, 0xfa, 0x59, 0x47, 0xf0, 0xad, 0xd4, 0xa2, 0xaf, 0x9c, 0xa4, 0x72, 0xc0, 0xb7, 0xfd, 0x93, 0x26, 0x36, 0x3f, 0xf7, 0xcc, 0x34, 0xa5, 0xe5, 0xf1, 0x71, 0xd8, 0x31, 0x15, 0x04, 0xc7, 0x23, 0xc3, 0x18, 0x96, 0x05, 0x9a, 0x07, 0x12, 0x80, 0xe2, 0xeb, 0x27, 0xb2, 0x75, 0x09, 0x83, 0x2c, 0x1a, 0x1b, 0x6e, 0x5a, 0xa0, 0x52, 0x3b, 0xd6, 0xb3, 0x29, 0xe3, 0x2f, 0x84, 0x53, 0xd1, 0x00, 0xed, 0x20, 0xfc, 0xb1, 0x5b, 0x6a, 0xcb, 0xbe, 0x39, 0x4a, 0x4c, 0x58, 0xcf, 0xd0, 0xef, 0xaa, 0xfb, 0x43, 0x4d, 0x33, 0x85, 0x45, 0xf9, 0x02, 0x7f, 0x50, 0x3c, 0x9f, 0xa8, 0x51, 0xa3, 0x40, 0x8f, 0x92, 0x9d, 0x38, 0xf5, 0xbc, 0xb6, 0xda, 0x21, 0x10, 0xff, 0xf3, 0xd2, 0xcd, 0x0c, 0x13, 0xec, 0x5f, 0x97, 0x44, 0x17, 0xc4, 0xa7, 0x7e, 0x3d, 0x64, 0x5d, 0x19, 0x73, 0x60, 0x81, 0x4f, 0xdc, 0x22, 0x2a, 0x90, 0x88, 0x46, 0xee, 0xb8, 0x14, 0xde, 0x5e, 0x0b, 0xdb, 0xe0, 0x32, 0x3a, 0x0a, 0x49, 0x06, 0x24, 0x5c, 0xc2, 0xd3, 0xac, 0x62, 0x91, 0x95, 0xe4, 0x79, 0xe7, 0xc8, 0x37, 0x6d, 0x8d, 0xd5, 0x4e, 0xa9, 0x6c, 0x56, 0xf4, 0xea, 0x65, 0x7a, 0xae, 0x08, 0xba, 0x78, 0x25, 0x2e, 0x1c, 0xa6, 0xb4, 0xc6, 0xe8, 0xdd, 0x74, 0x1f, 0x4b, 0xbd, 0x8b, 0x8a, 0x70, 0x3e, 0xb5, 0x66, 0x48, 0x03, 0xf6, 0x0e, 0x61, 0x35, 0x57, 0xb9, 0x86, 0xc1, 0x1d, 0x9e, 0xe1, 0xf8, 0x98, 0x11, 0x69, 0xd9, 0x8e, 0x94, 0x9b, 0x1e, 0x87, 0xe9, 0xce, 0x55, 0x28, 0xdf, 0x8c, 0xa1, 0x89, 0x0d, 0xbf, 0xe6, 0x42, 0x68, 0x41, 0x99, 0x2d, 0x0f, 0xb0, 0x54, 0xbb, 0x16];\n  var Si =[0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81, 0xf3, 0xd7, 0xfb, 0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e, 0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb, 0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23, 0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e, 0x08, 0x2e, 0xa1, 0x66, 0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25, 0x72, 0xf8, 0xf6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xd4, 0xa4, 0x5c, 0xcc, 0x5d, 0x65, 0xb6, 0x92, 0x6c, 0x70, 0x48, 0x50, 0xfd, 0xed, 0xb9, 0xda, 0x5e, 0x15, 0x46, 0x57, 0xa7, 0x8d, 0x9d, 0x84, 0x90, 0xd8, 0xab, 0x00, 0x8c, 0xbc, 0xd3, 0x0a, 0xf7, 0xe4, 0x58, 0x05, 0xb8, 0xb3, 0x45, 0x06, 0xd0, 0x2c, 0x1e, 0x8f, 0xca, 0x3f, 0x0f, 0x02, 0xc1, 0xaf, 0xbd, 0x03, 0x01, 0x13, 0x8a, 0x6b, 0x3a, 0x91, 0x11, 0x41, 0x4f, 0x67, 0xdc, 0xea, 0x97, 0xf2, 0xcf, 0xce, 0xf0, 0xb4, 0xe6, 0x73, 0x96, 0xac, 0x74, 0x22, 0xe7, 0xad, 0x35, 0x85, 0xe2, 0xf9, 0x37, 0xe8, 0x1c, 0x75, 0xdf, 0x6e, 0x47, 0xf1, 0x1a, 0x71, 0x1d, 0x29, 0xc5, 0x89, 0x6f, 0xb7, 0x62, 0x0e, 0xaa, 0x18, 0xbe, 0x1b, 0xfc, 0x56, 0x3e, 0x4b, 0xc6, 0xd2, 0x79, 0x20, 0x9a, 0xdb, 0xc0, 0xfe, 0x78, 0xcd, 0x5a, 0xf4, 0x1f, 0xdd, 0xa8, 0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f, 0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93, 0xc9, 0x9c, 0xef, 0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb, 0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61, 0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6, 0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d];\n\n  // Transformations for encryption\n  var T1 = [0xc66363a5, 0xf87c7c84, 0xee777799, 0xf67b7b8d, 0xfff2f20d, 0xd66b6bbd, 0xde6f6fb1, 0x91c5c554, 0x60303050, 0x02010103, 0xce6767a9, 0x562b2b7d, 0xe7fefe19, 0xb5d7d762, 0x4dababe6, 0xec76769a, 0x8fcaca45, 0x1f82829d, 0x89c9c940, 0xfa7d7d87, 0xeffafa15, 0xb25959eb, 0x8e4747c9, 0xfbf0f00b, 0x41adadec, 0xb3d4d467, 0x5fa2a2fd, 0x45afafea, 0x239c9cbf, 0x53a4a4f7, 0xe4727296, 0x9bc0c05b, 0x75b7b7c2, 0xe1fdfd1c, 0x3d9393ae, 0x4c26266a, 0x6c36365a, 0x7e3f3f41, 0xf5f7f702, 0x83cccc4f, 0x6834345c, 0x51a5a5f4, 0xd1e5e534, 0xf9f1f108, 0xe2717193, 0xabd8d873, 0x62313153, 0x2a15153f, 0x0804040c, 0x95c7c752, 0x46232365, 0x9dc3c35e, 0x30181828, 0x379696a1, 0x0a05050f, 0x2f9a9ab5, 0x0e070709, 0x24121236, 0x1b80809b, 0xdfe2e23d, 0xcdebeb26, 0x4e272769, 0x7fb2b2cd, 0xea75759f, 0x1209091b, 0x1d83839e, 0x582c2c74, 0x341a1a2e, 0x361b1b2d, 0xdc6e6eb2, 0xb45a5aee, 0x5ba0a0fb, 0xa45252f6, 0x763b3b4d, 0xb7d6d661, 0x7db3b3ce, 0x5229297b, 0xdde3e33e, 0x5e2f2f71, 0x13848497, 0xa65353f5, 0xb9d1d168, 0x00000000, 0xc1eded2c, 0x40202060, 0xe3fcfc1f, 0x79b1b1c8, 0xb65b5bed, 0xd46a6abe, 0x8dcbcb46, 0x67bebed9, 0x7239394b, 0x944a4ade, 0x984c4cd4, 0xb05858e8, 0x85cfcf4a, 0xbbd0d06b, 0xc5efef2a, 0x4faaaae5, 0xedfbfb16, 0x864343c5, 0x9a4d4dd7, 0x66333355, 0x11858594, 0x8a4545cf, 0xe9f9f910, 0x04020206, 0xfe7f7f81, 0xa05050f0, 0x783c3c44, 0x259f9fba, 0x4ba8a8e3, 0xa25151f3, 0x5da3a3fe, 0x804040c0, 0x058f8f8a, 0x3f9292ad, 0x219d9dbc, 0x70383848, 0xf1f5f504, 0x63bcbcdf, 0x77b6b6c1, 0xafdada75, 0x42212163, 0x20101030, 0xe5ffff1a, 0xfdf3f30e, 0xbfd2d26d, 0x81cdcd4c, 0x180c0c14, 0x26131335, 0xc3ecec2f, 0xbe5f5fe1, 0x359797a2, 0x884444cc, 0x2e171739, 0x93c4c457, 0x55a7a7f2, 0xfc7e7e82, 0x7a3d3d47, 0xc86464ac, 0xba5d5de7, 0x3219192b, 0xe6737395, 0xc06060a0, 0x19818198, 0x9e4f4fd1, 0xa3dcdc7f, 0x44222266, 0x542a2a7e, 0x3b9090ab, 0x0b888883, 0x8c4646ca, 0xc7eeee29, 0x6bb8b8d3, 0x2814143c, 0xa7dede79, 0xbc5e5ee2, 0x160b0b1d, 0xaddbdb76, 0xdbe0e03b, 0x64323256, 0x743a3a4e, 0x140a0a1e, 0x924949db, 0x0c06060a, 0x4824246c, 0xb85c5ce4, 0x9fc2c25d, 0xbdd3d36e, 0x43acacef, 0xc46262a6, 0x399191a8, 0x319595a4, 0xd3e4e437, 0xf279798b, 0xd5e7e732, 0x8bc8c843, 0x6e373759, 0xda6d6db7, 0x018d8d8c, 0xb1d5d564, 0x9c4e4ed2, 0x49a9a9e0, 0xd86c6cb4, 0xac5656fa, 0xf3f4f407, 0xcfeaea25, 0xca6565af, 0xf47a7a8e, 0x47aeaee9, 0x10080818, 0x6fbabad5, 0xf0787888, 0x4a25256f, 0x5c2e2e72, 0x381c1c24, 0x57a6a6f1, 0x73b4b4c7, 0x97c6c651, 0xcbe8e823, 0xa1dddd7c, 0xe874749c, 0x3e1f1f21, 0x964b4bdd, 0x61bdbddc, 0x0d8b8b86, 0x0f8a8a85, 0xe0707090, 0x7c3e3e42, 0x71b5b5c4, 0xcc6666aa, 0x904848d8, 0x06030305, 0xf7f6f601, 0x1c0e0e12, 0xc26161a3, 0x6a35355f, 0xae5757f9, 0x69b9b9d0, 0x17868691, 0x99c1c158, 0x3a1d1d27, 0x279e9eb9, 0xd9e1e138, 0xebf8f813, 0x2b9898b3, 0x22111133, 0xd26969bb, 0xa9d9d970, 0x078e8e89, 0x339494a7, 0x2d9b9bb6, 0x3c1e1e22, 0x15878792, 0xc9e9e920, 0x87cece49, 0xaa5555ff, 0x50282878, 0xa5dfdf7a, 0x038c8c8f, 0x59a1a1f8, 0x09898980, 0x1a0d0d17, 0x65bfbfda, 0xd7e6e631, 0x844242c6, 0xd06868b8, 0x824141c3, 0x299999b0, 0x5a2d2d77, 0x1e0f0f11, 0x7bb0b0cb, 0xa85454fc, 0x6dbbbbd6, 0x2c16163a];\n  var T2 = [0xa5c66363, 0x84f87c7c, 0x99ee7777, 0x8df67b7b, 0x0dfff2f2, 0xbdd66b6b, 0xb1de6f6f, 0x5491c5c5, 0x50603030, 0x03020101, 0xa9ce6767, 0x7d562b2b, 0x19e7fefe, 0x62b5d7d7, 0xe64dabab, 0x9aec7676, 0x458fcaca, 0x9d1f8282, 0x4089c9c9, 0x87fa7d7d, 0x15effafa, 0xebb25959, 0xc98e4747, 0x0bfbf0f0, 0xec41adad, 0x67b3d4d4, 0xfd5fa2a2, 0xea45afaf, 0xbf239c9c, 0xf753a4a4, 0x96e47272, 0x5b9bc0c0, 0xc275b7b7, 0x1ce1fdfd, 0xae3d9393, 0x6a4c2626, 0x5a6c3636, 0x417e3f3f, 0x02f5f7f7, 0x4f83cccc, 0x5c683434, 0xf451a5a5, 0x34d1e5e5, 0x08f9f1f1, 0x93e27171, 0x73abd8d8, 0x53623131, 0x3f2a1515, 0x0c080404, 0x5295c7c7, 0x65462323, 0x5e9dc3c3, 0x28301818, 0xa1379696, 0x0f0a0505, 0xb52f9a9a, 0x090e0707, 0x36241212, 0x9b1b8080, 0x3ddfe2e2, 0x26cdebeb, 0x694e2727, 0xcd7fb2b2, 0x9fea7575, 0x1b120909, 0x9e1d8383, 0x74582c2c, 0x2e341a1a, 0x2d361b1b, 0xb2dc6e6e, 0xeeb45a5a, 0xfb5ba0a0, 0xf6a45252, 0x4d763b3b, 0x61b7d6d6, 0xce7db3b3, 0x7b522929, 0x3edde3e3, 0x715e2f2f, 0x97138484, 0xf5a65353, 0x68b9d1d1, 0x00000000, 0x2cc1eded, 0x60402020, 0x1fe3fcfc, 0xc879b1b1, 0xedb65b5b, 0xbed46a6a, 0x468dcbcb, 0xd967bebe, 0x4b723939, 0xde944a4a, 0xd4984c4c, 0xe8b05858, 0x4a85cfcf, 0x6bbbd0d0, 0x2ac5efef, 0xe54faaaa, 0x16edfbfb, 0xc5864343, 0xd79a4d4d, 0x55663333, 0x94118585, 0xcf8a4545, 0x10e9f9f9, 0x06040202, 0x81fe7f7f, 0xf0a05050, 0x44783c3c, 0xba259f9f, 0xe34ba8a8, 0xf3a25151, 0xfe5da3a3, 0xc0804040, 0x8a058f8f, 0xad3f9292, 0xbc219d9d, 0x48703838, 0x04f1f5f5, 0xdf63bcbc, 0xc177b6b6, 0x75afdada, 0x63422121, 0x30201010, 0x1ae5ffff, 0x0efdf3f3, 0x6dbfd2d2, 0x4c81cdcd, 0x14180c0c, 0x35261313, 0x2fc3ecec, 0xe1be5f5f, 0xa2359797, 0xcc884444, 0x392e1717, 0x5793c4c4, 0xf255a7a7, 0x82fc7e7e, 0x477a3d3d, 0xacc86464, 0xe7ba5d5d, 0x2b321919, 0x95e67373, 0xa0c06060, 0x98198181, 0xd19e4f4f, 0x7fa3dcdc, 0x66442222, 0x7e542a2a, 0xab3b9090, 0x830b8888, 0xca8c4646, 0x29c7eeee, 0xd36bb8b8, 0x3c281414, 0x79a7dede, 0xe2bc5e5e, 0x1d160b0b, 0x76addbdb, 0x3bdbe0e0, 0x56643232, 0x4e743a3a, 0x1e140a0a, 0xdb924949, 0x0a0c0606, 0x6c482424, 0xe4b85c5c, 0x5d9fc2c2, 0x6ebdd3d3, 0xef43acac, 0xa6c46262, 0xa8399191, 0xa4319595, 0x37d3e4e4, 0x8bf27979, 0x32d5e7e7, 0x438bc8c8, 0x596e3737, 0xb7da6d6d, 0x8c018d8d, 0x64b1d5d5, 0xd29c4e4e, 0xe049a9a9, 0xb4d86c6c, 0xfaac5656, 0x07f3f4f4, 0x25cfeaea, 0xafca6565, 0x8ef47a7a, 0xe947aeae, 0x18100808, 0xd56fbaba, 0x88f07878, 0x6f4a2525, 0x725c2e2e, 0x24381c1c, 0xf157a6a6, 0xc773b4b4, 0x5197c6c6, 0x23cbe8e8, 0x7ca1dddd, 0x9ce87474, 0x213e1f1f, 0xdd964b4b, 0xdc61bdbd, 0x860d8b8b, 0x850f8a8a, 0x90e07070, 0x427c3e3e, 0xc471b5b5, 0xaacc6666, 0xd8904848, 0x05060303, 0x01f7f6f6, 0x121c0e0e, 0xa3c26161, 0x5f6a3535, 0xf9ae5757, 0xd069b9b9, 0x91178686, 0x5899c1c1, 0x273a1d1d, 0xb9279e9e, 0x38d9e1e1, 0x13ebf8f8, 0xb32b9898, 0x33221111, 0xbbd26969, 0x70a9d9d9, 0x89078e8e, 0xa7339494, 0xb62d9b9b, 0x223c1e1e, 0x92158787, 0x20c9e9e9, 0x4987cece, 0xffaa5555, 0x78502828, 0x7aa5dfdf, 0x8f038c8c, 0xf859a1a1, 0x80098989, 0x171a0d0d, 0xda65bfbf, 0x31d7e6e6, 0xc6844242, 0xb8d06868, 0xc3824141, 0xb0299999, 0x775a2d2d, 0x111e0f0f, 0xcb7bb0b0, 0xfca85454, 0xd66dbbbb, 0x3a2c1616];\n  var T3 = [0x63a5c663, 0x7c84f87c, 0x7799ee77, 0x7b8df67b, 0xf20dfff2, 0x6bbdd66b, 0x6fb1de6f, 0xc55491c5, 0x30506030, 0x01030201, 0x67a9ce67, 0x2b7d562b, 0xfe19e7fe, 0xd762b5d7, 0xabe64dab, 0x769aec76, 0xca458fca, 0x829d1f82, 0xc94089c9, 0x7d87fa7d, 0xfa15effa, 0x59ebb259, 0x47c98e47, 0xf00bfbf0, 0xadec41ad, 0xd467b3d4, 0xa2fd5fa2, 0xafea45af, 0x9cbf239c, 0xa4f753a4, 0x7296e472, 0xc05b9bc0, 0xb7c275b7, 0xfd1ce1fd, 0x93ae3d93, 0x266a4c26, 0x365a6c36, 0x3f417e3f, 0xf702f5f7, 0xcc4f83cc, 0x345c6834, 0xa5f451a5, 0xe534d1e5, 0xf108f9f1, 0x7193e271, 0xd873abd8, 0x31536231, 0x153f2a15, 0x040c0804, 0xc75295c7, 0x23654623, 0xc35e9dc3, 0x18283018, 0x96a13796, 0x050f0a05, 0x9ab52f9a, 0x07090e07, 0x12362412, 0x809b1b80, 0xe23ddfe2, 0xeb26cdeb, 0x27694e27, 0xb2cd7fb2, 0x759fea75, 0x091b1209, 0x839e1d83, 0x2c74582c, 0x1a2e341a, 0x1b2d361b, 0x6eb2dc6e, 0x5aeeb45a, 0xa0fb5ba0, 0x52f6a452, 0x3b4d763b, 0xd661b7d6, 0xb3ce7db3, 0x297b5229, 0xe33edde3, 0x2f715e2f, 0x84971384, 0x53f5a653, 0xd168b9d1, 0x00000000, 0xed2cc1ed, 0x20604020, 0xfc1fe3fc, 0xb1c879b1, 0x5bedb65b, 0x6abed46a, 0xcb468dcb, 0xbed967be, 0x394b7239, 0x4ade944a, 0x4cd4984c, 0x58e8b058, 0xcf4a85cf, 0xd06bbbd0, 0xef2ac5ef, 0xaae54faa, 0xfb16edfb, 0x43c58643, 0x4dd79a4d, 0x33556633, 0x85941185, 0x45cf8a45, 0xf910e9f9, 0x02060402, 0x7f81fe7f, 0x50f0a050, 0x3c44783c, 0x9fba259f, 0xa8e34ba8, 0x51f3a251, 0xa3fe5da3, 0x40c08040, 0x8f8a058f, 0x92ad3f92, 0x9dbc219d, 0x38487038, 0xf504f1f5, 0xbcdf63bc, 0xb6c177b6, 0xda75afda, 0x21634221, 0x10302010, 0xff1ae5ff, 0xf30efdf3, 0xd26dbfd2, 0xcd4c81cd, 0x0c14180c, 0x13352613, 0xec2fc3ec, 0x5fe1be5f, 0x97a23597, 0x44cc8844, 0x17392e17, 0xc45793c4, 0xa7f255a7, 0x7e82fc7e, 0x3d477a3d, 0x64acc864, 0x5de7ba5d, 0x192b3219, 0x7395e673, 0x60a0c060, 0x81981981, 0x4fd19e4f, 0xdc7fa3dc, 0x22664422, 0x2a7e542a, 0x90ab3b90, 0x88830b88, 0x46ca8c46, 0xee29c7ee, 0xb8d36bb8, 0x143c2814, 0xde79a7de, 0x5ee2bc5e, 0x0b1d160b, 0xdb76addb, 0xe03bdbe0, 0x32566432, 0x3a4e743a, 0x0a1e140a, 0x49db9249, 0x060a0c06, 0x246c4824, 0x5ce4b85c, 0xc25d9fc2, 0xd36ebdd3, 0xacef43ac, 0x62a6c462, 0x91a83991, 0x95a43195, 0xe437d3e4, 0x798bf279, 0xe732d5e7, 0xc8438bc8, 0x37596e37, 0x6db7da6d, 0x8d8c018d, 0xd564b1d5, 0x4ed29c4e, 0xa9e049a9, 0x6cb4d86c, 0x56faac56, 0xf407f3f4, 0xea25cfea, 0x65afca65, 0x7a8ef47a, 0xaee947ae, 0x08181008, 0xbad56fba, 0x7888f078, 0x256f4a25, 0x2e725c2e, 0x1c24381c, 0xa6f157a6, 0xb4c773b4, 0xc65197c6, 0xe823cbe8, 0xdd7ca1dd, 0x749ce874, 0x1f213e1f, 0x4bdd964b, 0xbddc61bd, 0x8b860d8b, 0x8a850f8a, 0x7090e070, 0x3e427c3e, 0xb5c471b5, 0x66aacc66, 0x48d89048, 0x03050603, 0xf601f7f6, 0x0e121c0e, 0x61a3c261, 0x355f6a35, 0x57f9ae57, 0xb9d069b9, 0x86911786, 0xc15899c1, 0x1d273a1d, 0x9eb9279e, 0xe138d9e1, 0xf813ebf8, 0x98b32b98, 0x11332211, 0x69bbd269, 0xd970a9d9, 0x8e89078e, 0x94a73394, 0x9bb62d9b, 0x1e223c1e, 0x87921587, 0xe920c9e9, 0xce4987ce, 0x55ffaa55, 0x28785028, 0xdf7aa5df, 0x8c8f038c, 0xa1f859a1, 0x89800989, 0x0d171a0d, 0xbfda65bf, 0xe631d7e6, 0x42c68442, 0x68b8d068, 0x41c38241, 0x99b02999, 0x2d775a2d, 0x0f111e0f, 0xb0cb7bb0, 0x54fca854, 0xbbd66dbb, 0x163a2c16];\n  var T4 = [0x6363a5c6, 0x7c7c84f8, 0x777799ee, 0x7b7b8df6, 0xf2f20dff, 0x6b6bbdd6, 0x6f6fb1de, 0xc5c55491, 0x30305060, 0x01010302, 0x6767a9ce, 0x2b2b7d56, 0xfefe19e7, 0xd7d762b5, 0xababe64d, 0x76769aec, 0xcaca458f, 0x82829d1f, 0xc9c94089, 0x7d7d87fa, 0xfafa15ef, 0x5959ebb2, 0x4747c98e, 0xf0f00bfb, 0xadadec41, 0xd4d467b3, 0xa2a2fd5f, 0xafafea45, 0x9c9cbf23, 0xa4a4f753, 0x727296e4, 0xc0c05b9b, 0xb7b7c275, 0xfdfd1ce1, 0x9393ae3d, 0x26266a4c, 0x36365a6c, 0x3f3f417e, 0xf7f702f5, 0xcccc4f83, 0x34345c68, 0xa5a5f451, 0xe5e534d1, 0xf1f108f9, 0x717193e2, 0xd8d873ab, 0x31315362, 0x15153f2a, 0x04040c08, 0xc7c75295, 0x23236546, 0xc3c35e9d, 0x18182830, 0x9696a137, 0x05050f0a, 0x9a9ab52f, 0x0707090e, 0x12123624, 0x80809b1b, 0xe2e23ddf, 0xebeb26cd, 0x2727694e, 0xb2b2cd7f, 0x75759fea, 0x09091b12, 0x83839e1d, 0x2c2c7458, 0x1a1a2e34, 0x1b1b2d36, 0x6e6eb2dc, 0x5a5aeeb4, 0xa0a0fb5b, 0x5252f6a4, 0x3b3b4d76, 0xd6d661b7, 0xb3b3ce7d, 0x29297b52, 0xe3e33edd, 0x2f2f715e, 0x84849713, 0x5353f5a6, 0xd1d168b9, 0x00000000, 0xeded2cc1, 0x20206040, 0xfcfc1fe3, 0xb1b1c879, 0x5b5bedb6, 0x6a6abed4, 0xcbcb468d, 0xbebed967, 0x39394b72, 0x4a4ade94, 0x4c4cd498, 0x5858e8b0, 0xcfcf4a85, 0xd0d06bbb, 0xefef2ac5, 0xaaaae54f, 0xfbfb16ed, 0x4343c586, 0x4d4dd79a, 0x33335566, 0x85859411, 0x4545cf8a, 0xf9f910e9, 0x02020604, 0x7f7f81fe, 0x5050f0a0, 0x3c3c4478, 0x9f9fba25, 0xa8a8e34b, 0x5151f3a2, 0xa3a3fe5d, 0x4040c080, 0x8f8f8a05, 0x9292ad3f, 0x9d9dbc21, 0x38384870, 0xf5f504f1, 0xbcbcdf63, 0xb6b6c177, 0xdada75af, 0x21216342, 0x10103020, 0xffff1ae5, 0xf3f30efd, 0xd2d26dbf, 0xcdcd4c81, 0x0c0c1418, 0x13133526, 0xecec2fc3, 0x5f5fe1be, 0x9797a235, 0x4444cc88, 0x1717392e, 0xc4c45793, 0xa7a7f255, 0x7e7e82fc, 0x3d3d477a, 0x6464acc8, 0x5d5de7ba, 0x19192b32, 0x737395e6, 0x6060a0c0, 0x81819819, 0x4f4fd19e, 0xdcdc7fa3, 0x22226644, 0x2a2a7e54, 0x9090ab3b, 0x8888830b, 0x4646ca8c, 0xeeee29c7, 0xb8b8d36b, 0x14143c28, 0xdede79a7, 0x5e5ee2bc, 0x0b0b1d16, 0xdbdb76ad, 0xe0e03bdb, 0x32325664, 0x3a3a4e74, 0x0a0a1e14, 0x4949db92, 0x06060a0c, 0x24246c48, 0x5c5ce4b8, 0xc2c25d9f, 0xd3d36ebd, 0xacacef43, 0x6262a6c4, 0x9191a839, 0x9595a431, 0xe4e437d3, 0x79798bf2, 0xe7e732d5, 0xc8c8438b, 0x3737596e, 0x6d6db7da, 0x8d8d8c01, 0xd5d564b1, 0x4e4ed29c, 0xa9a9e049, 0x6c6cb4d8, 0x5656faac, 0xf4f407f3, 0xeaea25cf, 0x6565afca, 0x7a7a8ef4, 0xaeaee947, 0x08081810, 0xbabad56f, 0x787888f0, 0x25256f4a, 0x2e2e725c, 0x1c1c2438, 0xa6a6f157, 0xb4b4c773, 0xc6c65197, 0xe8e823cb, 0xdddd7ca1, 0x74749ce8, 0x1f1f213e, 0x4b4bdd96, 0xbdbddc61, 0x8b8b860d, 0x8a8a850f, 0x707090e0, 0x3e3e427c, 0xb5b5c471, 0x6666aacc, 0x4848d890, 0x03030506, 0xf6f601f7, 0x0e0e121c, 0x6161a3c2, 0x35355f6a, 0x5757f9ae, 0xb9b9d069, 0x86869117, 0xc1c15899, 0x1d1d273a, 0x9e9eb927, 0xe1e138d9, 0xf8f813eb, 0x9898b32b, 0x11113322, 0x6969bbd2, 0xd9d970a9, 0x8e8e8907, 0x9494a733, 0x9b9bb62d, 0x1e1e223c, 0x87879215, 0xe9e920c9, 0xcece4987, 0x5555ffaa, 0x28287850, 0xdfdf7aa5, 0x8c8c8f03, 0xa1a1f859, 0x89898009, 0x0d0d171a, 0xbfbfda65, 0xe6e631d7, 0x4242c684, 0x6868b8d0, 0x4141c382, 0x9999b029, 0x2d2d775a, 0x0f0f111e, 0xb0b0cb7b, 0x5454fca8, 0xbbbbd66d, 0x16163a2c];\n\n  // Transformations for decryption\n  var T5 = [0x51f4a750, 0x7e416553, 0x1a17a4c3, 0x3a275e96, 0x3bab6bcb, 0x1f9d45f1, 0xacfa58ab, 0x4be30393, 0x2030fa55, 0xad766df6, 0x88cc7691, 0xf5024c25, 0x4fe5d7fc, 0xc52acbd7, 0x26354480, 0xb562a38f, 0xdeb15a49, 0x25ba1b67, 0x45ea0e98, 0x5dfec0e1, 0xc32f7502, 0x814cf012, 0x8d4697a3, 0x6bd3f9c6, 0x038f5fe7, 0x15929c95, 0xbf6d7aeb, 0x955259da, 0xd4be832d, 0x587421d3, 0x49e06929, 0x8ec9c844, 0x75c2896a, 0xf48e7978, 0x99583e6b, 0x27b971dd, 0xbee14fb6, 0xf088ad17, 0xc920ac66, 0x7dce3ab4, 0x63df4a18, 0xe51a3182, 0x97513360, 0x62537f45, 0xb16477e0, 0xbb6bae84, 0xfe81a01c, 0xf9082b94, 0x70486858, 0x8f45fd19, 0x94de6c87, 0x527bf8b7, 0xab73d323, 0x724b02e2, 0xe31f8f57, 0x6655ab2a, 0xb2eb2807, 0x2fb5c203, 0x86c57b9a, 0xd33708a5, 0x302887f2, 0x23bfa5b2, 0x02036aba, 0xed16825c, 0x8acf1c2b, 0xa779b492, 0xf307f2f0, 0x4e69e2a1, 0x65daf4cd, 0x0605bed5, 0xd134621f, 0xc4a6fe8a, 0x342e539d, 0xa2f355a0, 0x058ae132, 0xa4f6eb75, 0x0b83ec39, 0x4060efaa, 0x5e719f06, 0xbd6e1051, 0x3e218af9, 0x96dd063d, 0xdd3e05ae, 0x4de6bd46, 0x91548db5, 0x71c45d05, 0x0406d46f, 0x605015ff, 0x1998fb24, 0xd6bde997, 0x894043cc, 0x67d99e77, 0xb0e842bd, 0x07898b88, 0xe7195b38, 0x79c8eedb, 0xa17c0a47, 0x7c420fe9, 0xf8841ec9, 0x00000000, 0x09808683, 0x322bed48, 0x1e1170ac, 0x6c5a724e, 0xfd0efffb, 0x0f853856, 0x3daed51e, 0x362d3927, 0x0a0fd964, 0x685ca621, 0x9b5b54d1, 0x24362e3a, 0x0c0a67b1, 0x9357e70f, 0xb4ee96d2, 0x1b9b919e, 0x80c0c54f, 0x61dc20a2, 0x5a774b69, 0x1c121a16, 0xe293ba0a, 0xc0a02ae5, 0x3c22e043, 0x121b171d, 0x0e090d0b, 0xf28bc7ad, 0x2db6a8b9, 0x141ea9c8, 0x57f11985, 0xaf75074c, 0xee99ddbb, 0xa37f60fd, 0xf701269f, 0x5c72f5bc, 0x44663bc5, 0x5bfb7e34, 0x8b432976, 0xcb23c6dc, 0xb6edfc68, 0xb8e4f163, 0xd731dcca, 0x42638510, 0x13972240, 0x84c61120, 0x854a247d, 0xd2bb3df8, 0xaef93211, 0xc729a16d, 0x1d9e2f4b, 0xdcb230f3, 0x0d8652ec, 0x77c1e3d0, 0x2bb3166c, 0xa970b999, 0x119448fa, 0x47e96422, 0xa8fc8cc4, 0xa0f03f1a, 0x567d2cd8, 0x223390ef, 0x87494ec7, 0xd938d1c1, 0x8ccaa2fe, 0x98d40b36, 0xa6f581cf, 0xa57ade28, 0xdab78e26, 0x3fadbfa4, 0x2c3a9de4, 0x5078920d, 0x6a5fcc9b, 0x547e4662, 0xf68d13c2, 0x90d8b8e8, 0x2e39f75e, 0x82c3aff5, 0x9f5d80be, 0x69d0937c, 0x6fd52da9, 0xcf2512b3, 0xc8ac993b, 0x10187da7, 0xe89c636e, 0xdb3bbb7b, 0xcd267809, 0x6e5918f4, 0xec9ab701, 0x834f9aa8, 0xe6956e65, 0xaaffe67e, 0x21bccf08, 0xef15e8e6, 0xbae79bd9, 0x4a6f36ce, 0xea9f09d4, 0x29b07cd6, 0x31a4b2af, 0x2a3f2331, 0xc6a59430, 0x35a266c0, 0x744ebc37, 0xfc82caa6, 0xe090d0b0, 0x33a7d815, 0xf104984a, 0x41ecdaf7, 0x7fcd500e, 0x1791f62f, 0x764dd68d, 0x43efb04d, 0xccaa4d54, 0xe49604df, 0x9ed1b5e3, 0x4c6a881b, 0xc12c1fb8, 0x4665517f, 0x9d5eea04, 0x018c355d, 0xfa877473, 0xfb0b412e, 0xb3671d5a, 0x92dbd252, 0xe9105633, 0x6dd64713, 0x9ad7618c, 0x37a10c7a, 0x59f8148e, 0xeb133c89, 0xcea927ee, 0xb761c935, 0xe11ce5ed, 0x7a47b13c, 0x9cd2df59, 0x55f2733f, 0x1814ce79, 0x73c737bf, 0x53f7cdea, 0x5ffdaa5b, 0xdf3d6f14, 0x7844db86, 0xcaaff381, 0xb968c43e, 0x3824342c, 0xc2a3405f, 0x161dc372, 0xbce2250c, 0x283c498b, 0xff0d9541, 0x39a80171, 0x080cb3de, 0xd8b4e49c, 0x6456c190, 0x7bcb8461, 0xd532b670, 0x486c5c74, 0xd0b85742];\n  var T6 = [0x5051f4a7, 0x537e4165, 0xc31a17a4, 0x963a275e, 0xcb3bab6b, 0xf11f9d45, 0xabacfa58, 0x934be303, 0x552030fa, 0xf6ad766d, 0x9188cc76, 0x25f5024c, 0xfc4fe5d7, 0xd7c52acb, 0x80263544, 0x8fb562a3, 0x49deb15a, 0x6725ba1b, 0x9845ea0e, 0xe15dfec0, 0x02c32f75, 0x12814cf0, 0xa38d4697, 0xc66bd3f9, 0xe7038f5f, 0x9515929c, 0xebbf6d7a, 0xda955259, 0x2dd4be83, 0xd3587421, 0x2949e069, 0x448ec9c8, 0x6a75c289, 0x78f48e79, 0x6b99583e, 0xdd27b971, 0xb6bee14f, 0x17f088ad, 0x66c920ac, 0xb47dce3a, 0x1863df4a, 0x82e51a31, 0x60975133, 0x4562537f, 0xe0b16477, 0x84bb6bae, 0x1cfe81a0, 0x94f9082b, 0x58704868, 0x198f45fd, 0x8794de6c, 0xb7527bf8, 0x23ab73d3, 0xe2724b02, 0x57e31f8f, 0x2a6655ab, 0x07b2eb28, 0x032fb5c2, 0x9a86c57b, 0xa5d33708, 0xf2302887, 0xb223bfa5, 0xba02036a, 0x5ced1682, 0x2b8acf1c, 0x92a779b4, 0xf0f307f2, 0xa14e69e2, 0xcd65daf4, 0xd50605be, 0x1fd13462, 0x8ac4a6fe, 0x9d342e53, 0xa0a2f355, 0x32058ae1, 0x75a4f6eb, 0x390b83ec, 0xaa4060ef, 0x065e719f, 0x51bd6e10, 0xf93e218a, 0x3d96dd06, 0xaedd3e05, 0x464de6bd, 0xb591548d, 0x0571c45d, 0x6f0406d4, 0xff605015, 0x241998fb, 0x97d6bde9, 0xcc894043, 0x7767d99e, 0xbdb0e842, 0x8807898b, 0x38e7195b, 0xdb79c8ee, 0x47a17c0a, 0xe97c420f, 0xc9f8841e, 0x00000000, 0x83098086, 0x48322bed, 0xac1e1170, 0x4e6c5a72, 0xfbfd0eff, 0x560f8538, 0x1e3daed5, 0x27362d39, 0x640a0fd9, 0x21685ca6, 0xd19b5b54, 0x3a24362e, 0xb10c0a67, 0x0f9357e7, 0xd2b4ee96, 0x9e1b9b91, 0x4f80c0c5, 0xa261dc20, 0x695a774b, 0x161c121a, 0x0ae293ba, 0xe5c0a02a, 0x433c22e0, 0x1d121b17, 0x0b0e090d, 0xadf28bc7, 0xb92db6a8, 0xc8141ea9, 0x8557f119, 0x4caf7507, 0xbbee99dd, 0xfda37f60, 0x9ff70126, 0xbc5c72f5, 0xc544663b, 0x345bfb7e, 0x768b4329, 0xdccb23c6, 0x68b6edfc, 0x63b8e4f1, 0xcad731dc, 0x10426385, 0x40139722, 0x2084c611, 0x7d854a24, 0xf8d2bb3d, 0x11aef932, 0x6dc729a1, 0x4b1d9e2f, 0xf3dcb230, 0xec0d8652, 0xd077c1e3, 0x6c2bb316, 0x99a970b9, 0xfa119448, 0x2247e964, 0xc4a8fc8c, 0x1aa0f03f, 0xd8567d2c, 0xef223390, 0xc787494e, 0xc1d938d1, 0xfe8ccaa2, 0x3698d40b, 0xcfa6f581, 0x28a57ade, 0x26dab78e, 0xa43fadbf, 0xe42c3a9d, 0x0d507892, 0x9b6a5fcc, 0x62547e46, 0xc2f68d13, 0xe890d8b8, 0x5e2e39f7, 0xf582c3af, 0xbe9f5d80, 0x7c69d093, 0xa96fd52d, 0xb3cf2512, 0x3bc8ac99, 0xa710187d, 0x6ee89c63, 0x7bdb3bbb, 0x09cd2678, 0xf46e5918, 0x01ec9ab7, 0xa8834f9a, 0x65e6956e, 0x7eaaffe6, 0x0821bccf, 0xe6ef15e8, 0xd9bae79b, 0xce4a6f36, 0xd4ea9f09, 0xd629b07c, 0xaf31a4b2, 0x312a3f23, 0x30c6a594, 0xc035a266, 0x37744ebc, 0xa6fc82ca, 0xb0e090d0, 0x1533a7d8, 0x4af10498, 0xf741ecda, 0x0e7fcd50, 0x2f1791f6, 0x8d764dd6, 0x4d43efb0, 0x54ccaa4d, 0xdfe49604, 0xe39ed1b5, 0x1b4c6a88, 0xb8c12c1f, 0x7f466551, 0x049d5eea, 0x5d018c35, 0x73fa8774, 0x2efb0b41, 0x5ab3671d, 0x5292dbd2, 0x33e91056, 0x136dd647, 0x8c9ad761, 0x7a37a10c, 0x8e59f814, 0x89eb133c, 0xeecea927, 0x35b761c9, 0xede11ce5, 0x3c7a47b1, 0x599cd2df, 0x3f55f273, 0x791814ce, 0xbf73c737, 0xea53f7cd, 0x5b5ffdaa, 0x14df3d6f, 0x867844db, 0x81caaff3, 0x3eb968c4, 0x2c382434, 0x5fc2a340, 0x72161dc3, 0x0cbce225, 0x8b283c49, 0x41ff0d95, 0x7139a801, 0xde080cb3, 0x9cd8b4e4, 0x906456c1, 0x617bcb84, 0x70d532b6, 0x74486c5c, 0x42d0b857];\n  var T7 = [0xa75051f4, 0x65537e41, 0xa4c31a17, 0x5e963a27, 0x6bcb3bab, 0x45f11f9d, 0x58abacfa, 0x03934be3, 0xfa552030, 0x6df6ad76, 0x769188cc, 0x4c25f502, 0xd7fc4fe5, 0xcbd7c52a, 0x44802635, 0xa38fb562, 0x5a49deb1, 0x1b6725ba, 0x0e9845ea, 0xc0e15dfe, 0x7502c32f, 0xf012814c, 0x97a38d46, 0xf9c66bd3, 0x5fe7038f, 0x9c951592, 0x7aebbf6d, 0x59da9552, 0x832dd4be, 0x21d35874, 0x692949e0, 0xc8448ec9, 0x896a75c2, 0x7978f48e, 0x3e6b9958, 0x71dd27b9, 0x4fb6bee1, 0xad17f088, 0xac66c920, 0x3ab47dce, 0x4a1863df, 0x3182e51a, 0x33609751, 0x7f456253, 0x77e0b164, 0xae84bb6b, 0xa01cfe81, 0x2b94f908, 0x68587048, 0xfd198f45, 0x6c8794de, 0xf8b7527b, 0xd323ab73, 0x02e2724b, 0x8f57e31f, 0xab2a6655, 0x2807b2eb, 0xc2032fb5, 0x7b9a86c5, 0x08a5d337, 0x87f23028, 0xa5b223bf, 0x6aba0203, 0x825ced16, 0x1c2b8acf, 0xb492a779, 0xf2f0f307, 0xe2a14e69, 0xf4cd65da, 0xbed50605, 0x621fd134, 0xfe8ac4a6, 0x539d342e, 0x55a0a2f3, 0xe132058a, 0xeb75a4f6, 0xec390b83, 0xefaa4060, 0x9f065e71, 0x1051bd6e, 0x8af93e21, 0x063d96dd, 0x05aedd3e, 0xbd464de6, 0x8db59154, 0x5d0571c4, 0xd46f0406, 0x15ff6050, 0xfb241998, 0xe997d6bd, 0x43cc8940, 0x9e7767d9, 0x42bdb0e8, 0x8b880789, 0x5b38e719, 0xeedb79c8, 0x0a47a17c, 0x0fe97c42, 0x1ec9f884, 0x00000000, 0x86830980, 0xed48322b, 0x70ac1e11, 0x724e6c5a, 0xfffbfd0e, 0x38560f85, 0xd51e3dae, 0x3927362d, 0xd9640a0f, 0xa621685c, 0x54d19b5b, 0x2e3a2436, 0x67b10c0a, 0xe70f9357, 0x96d2b4ee, 0x919e1b9b, 0xc54f80c0, 0x20a261dc, 0x4b695a77, 0x1a161c12, 0xba0ae293, 0x2ae5c0a0, 0xe0433c22, 0x171d121b, 0x0d0b0e09, 0xc7adf28b, 0xa8b92db6, 0xa9c8141e, 0x198557f1, 0x074caf75, 0xddbbee99, 0x60fda37f, 0x269ff701, 0xf5bc5c72, 0x3bc54466, 0x7e345bfb, 0x29768b43, 0xc6dccb23, 0xfc68b6ed, 0xf163b8e4, 0xdccad731, 0x85104263, 0x22401397, 0x112084c6, 0x247d854a, 0x3df8d2bb, 0x3211aef9, 0xa16dc729, 0x2f4b1d9e, 0x30f3dcb2, 0x52ec0d86, 0xe3d077c1, 0x166c2bb3, 0xb999a970, 0x48fa1194, 0x642247e9, 0x8cc4a8fc, 0x3f1aa0f0, 0x2cd8567d, 0x90ef2233, 0x4ec78749, 0xd1c1d938, 0xa2fe8cca, 0x0b3698d4, 0x81cfa6f5, 0xde28a57a, 0x8e26dab7, 0xbfa43fad, 0x9de42c3a, 0x920d5078, 0xcc9b6a5f, 0x4662547e, 0x13c2f68d, 0xb8e890d8, 0xf75e2e39, 0xaff582c3, 0x80be9f5d, 0x937c69d0, 0x2da96fd5, 0x12b3cf25, 0x993bc8ac, 0x7da71018, 0x636ee89c, 0xbb7bdb3b, 0x7809cd26, 0x18f46e59, 0xb701ec9a, 0x9aa8834f, 0x6e65e695, 0xe67eaaff, 0xcf0821bc, 0xe8e6ef15, 0x9bd9bae7, 0x36ce4a6f, 0x09d4ea9f, 0x7cd629b0, 0xb2af31a4, 0x23312a3f, 0x9430c6a5, 0x66c035a2, 0xbc37744e, 0xcaa6fc82, 0xd0b0e090, 0xd81533a7, 0x984af104, 0xdaf741ec, 0x500e7fcd, 0xf62f1791, 0xd68d764d, 0xb04d43ef, 0x4d54ccaa, 0x04dfe496, 0xb5e39ed1, 0x881b4c6a, 0x1fb8c12c, 0x517f4665, 0xea049d5e, 0x355d018c, 0x7473fa87, 0x412efb0b, 0x1d5ab367, 0xd25292db, 0x5633e910, 0x47136dd6, 0x618c9ad7, 0x0c7a37a1, 0x148e59f8, 0x3c89eb13, 0x27eecea9, 0xc935b761, 0xe5ede11c, 0xb13c7a47, 0xdf599cd2, 0x733f55f2, 0xce791814, 0x37bf73c7, 0xcdea53f7, 0xaa5b5ffd, 0x6f14df3d, 0xdb867844, 0xf381caaf, 0xc43eb968, 0x342c3824, 0x405fc2a3, 0xc372161d, 0x250cbce2, 0x498b283c, 0x9541ff0d, 0x017139a8, 0xb3de080c, 0xe49cd8b4, 0xc1906456, 0x84617bcb, 0xb670d532, 0x5c74486c, 0x5742d0b8];\n  var T8 = [0xf4a75051, 0x4165537e, 0x17a4c31a, 0x275e963a, 0xab6bcb3b, 0x9d45f11f, 0xfa58abac, 0xe303934b, 0x30fa5520, 0x766df6ad, 0xcc769188, 0x024c25f5, 0xe5d7fc4f, 0x2acbd7c5, 0x35448026, 0x62a38fb5, 0xb15a49de, 0xba1b6725, 0xea0e9845, 0xfec0e15d, 0x2f7502c3, 0x4cf01281, 0x4697a38d, 0xd3f9c66b, 0x8f5fe703, 0x929c9515, 0x6d7aebbf, 0x5259da95, 0xbe832dd4, 0x7421d358, 0xe0692949, 0xc9c8448e, 0xc2896a75, 0x8e7978f4, 0x583e6b99, 0xb971dd27, 0xe14fb6be, 0x88ad17f0, 0x20ac66c9, 0xce3ab47d, 0xdf4a1863, 0x1a3182e5, 0x51336097, 0x537f4562, 0x6477e0b1, 0x6bae84bb, 0x81a01cfe, 0x082b94f9, 0x48685870, 0x45fd198f, 0xde6c8794, 0x7bf8b752, 0x73d323ab, 0x4b02e272, 0x1f8f57e3, 0x55ab2a66, 0xeb2807b2, 0xb5c2032f, 0xc57b9a86, 0x3708a5d3, 0x2887f230, 0xbfa5b223, 0x036aba02, 0x16825ced, 0xcf1c2b8a, 0x79b492a7, 0x07f2f0f3, 0x69e2a14e, 0xdaf4cd65, 0x05bed506, 0x34621fd1, 0xa6fe8ac4, 0x2e539d34, 0xf355a0a2, 0x8ae13205, 0xf6eb75a4, 0x83ec390b, 0x60efaa40, 0x719f065e, 0x6e1051bd, 0x218af93e, 0xdd063d96, 0x3e05aedd, 0xe6bd464d, 0x548db591, 0xc45d0571, 0x06d46f04, 0x5015ff60, 0x98fb2419, 0xbde997d6, 0x4043cc89, 0xd99e7767, 0xe842bdb0, 0x898b8807, 0x195b38e7, 0xc8eedb79, 0x7c0a47a1, 0x420fe97c, 0x841ec9f8, 0x00000000, 0x80868309, 0x2bed4832, 0x1170ac1e, 0x5a724e6c, 0x0efffbfd, 0x8538560f, 0xaed51e3d, 0x2d392736, 0x0fd9640a, 0x5ca62168, 0x5b54d19b, 0x362e3a24, 0x0a67b10c, 0x57e70f93, 0xee96d2b4, 0x9b919e1b, 0xc0c54f80, 0xdc20a261, 0x774b695a, 0x121a161c, 0x93ba0ae2, 0xa02ae5c0, 0x22e0433c, 0x1b171d12, 0x090d0b0e, 0x8bc7adf2, 0xb6a8b92d, 0x1ea9c814, 0xf1198557, 0x75074caf, 0x99ddbbee, 0x7f60fda3, 0x01269ff7, 0x72f5bc5c, 0x663bc544, 0xfb7e345b, 0x4329768b, 0x23c6dccb, 0xedfc68b6, 0xe4f163b8, 0x31dccad7, 0x63851042, 0x97224013, 0xc6112084, 0x4a247d85, 0xbb3df8d2, 0xf93211ae, 0x29a16dc7, 0x9e2f4b1d, 0xb230f3dc, 0x8652ec0d, 0xc1e3d077, 0xb3166c2b, 0x70b999a9, 0x9448fa11, 0xe9642247, 0xfc8cc4a8, 0xf03f1aa0, 0x7d2cd856, 0x3390ef22, 0x494ec787, 0x38d1c1d9, 0xcaa2fe8c, 0xd40b3698, 0xf581cfa6, 0x7ade28a5, 0xb78e26da, 0xadbfa43f, 0x3a9de42c, 0x78920d50, 0x5fcc9b6a, 0x7e466254, 0x8d13c2f6, 0xd8b8e890, 0x39f75e2e, 0xc3aff582, 0x5d80be9f, 0xd0937c69, 0xd52da96f, 0x2512b3cf, 0xac993bc8, 0x187da710, 0x9c636ee8, 0x3bbb7bdb, 0x267809cd, 0x5918f46e, 0x9ab701ec, 0x4f9aa883, 0x956e65e6, 0xffe67eaa, 0xbccf0821, 0x15e8e6ef, 0xe79bd9ba, 0x6f36ce4a, 0x9f09d4ea, 0xb07cd629, 0xa4b2af31, 0x3f23312a, 0xa59430c6, 0xa266c035, 0x4ebc3774, 0x82caa6fc, 0x90d0b0e0, 0xa7d81533, 0x04984af1, 0xecdaf741, 0xcd500e7f, 0x91f62f17, 0x4dd68d76, 0xefb04d43, 0xaa4d54cc, 0x9604dfe4, 0xd1b5e39e, 0x6a881b4c, 0x2c1fb8c1, 0x65517f46, 0x5eea049d, 0x8c355d01, 0x877473fa, 0x0b412efb, 0x671d5ab3, 0xdbd25292, 0x105633e9, 0xd647136d, 0xd7618c9a, 0xa10c7a37, 0xf8148e59, 0x133c89eb, 0xa927eece, 0x61c935b7, 0x1ce5ede1, 0x47b13c7a, 0xd2df599c, 0xf2733f55, 0x14ce7918, 0xc737bf73, 0xf7cdea53, 0xfdaa5b5f, 0x3d6f14df, 0x44db8678, 0xaff381ca, 0x68c43eb9, 0x24342c38, 0xa3405fc2, 0x1dc37216, 0xe2250cbc, 0x3c498b28, 0x0d9541ff, 0xa8017139, 0x0cb3de08, 0xb4e49cd8, 0x56c19064, 0xcb84617b, 0x32b670d5, 0x6c5c7448, 0xb85742d0];\n\n  // Transformations for decryption key expansion\n  var U1 = [0x00000000, 0x0e090d0b, 0x1c121a16, 0x121b171d, 0x3824342c, 0x362d3927, 0x24362e3a, 0x2a3f2331, 0x70486858, 0x7e416553, 0x6c5a724e, 0x62537f45, 0x486c5c74, 0x4665517f, 0x547e4662, 0x5a774b69, 0xe090d0b0, 0xee99ddbb, 0xfc82caa6, 0xf28bc7ad, 0xd8b4e49c, 0xd6bde997, 0xc4a6fe8a, 0xcaaff381, 0x90d8b8e8, 0x9ed1b5e3, 0x8ccaa2fe, 0x82c3aff5, 0xa8fc8cc4, 0xa6f581cf, 0xb4ee96d2, 0xbae79bd9, 0xdb3bbb7b, 0xd532b670, 0xc729a16d, 0xc920ac66, 0xe31f8f57, 0xed16825c, 0xff0d9541, 0xf104984a, 0xab73d323, 0xa57ade28, 0xb761c935, 0xb968c43e, 0x9357e70f, 0x9d5eea04, 0x8f45fd19, 0x814cf012, 0x3bab6bcb, 0x35a266c0, 0x27b971dd, 0x29b07cd6, 0x038f5fe7, 0x0d8652ec, 0x1f9d45f1, 0x119448fa, 0x4be30393, 0x45ea0e98, 0x57f11985, 0x59f8148e, 0x73c737bf, 0x7dce3ab4, 0x6fd52da9, 0x61dc20a2, 0xad766df6, 0xa37f60fd, 0xb16477e0, 0xbf6d7aeb, 0x955259da, 0x9b5b54d1, 0x894043cc, 0x87494ec7, 0xdd3e05ae, 0xd33708a5, 0xc12c1fb8, 0xcf2512b3, 0xe51a3182, 0xeb133c89, 0xf9082b94, 0xf701269f, 0x4de6bd46, 0x43efb04d, 0x51f4a750, 0x5ffdaa5b, 0x75c2896a, 0x7bcb8461, 0x69d0937c, 0x67d99e77, 0x3daed51e, 0x33a7d815, 0x21bccf08, 0x2fb5c203, 0x058ae132, 0x0b83ec39, 0x1998fb24, 0x1791f62f, 0x764dd68d, 0x7844db86, 0x6a5fcc9b, 0x6456c190, 0x4e69e2a1, 0x4060efaa, 0x527bf8b7, 0x5c72f5bc, 0x0605bed5, 0x080cb3de, 0x1a17a4c3, 0x141ea9c8, 0x3e218af9, 0x302887f2, 0x223390ef, 0x2c3a9de4, 0x96dd063d, 0x98d40b36, 0x8acf1c2b, 0x84c61120, 0xaef93211, 0xa0f03f1a, 0xb2eb2807, 0xbce2250c, 0xe6956e65, 0xe89c636e, 0xfa877473, 0xf48e7978, 0xdeb15a49, 0xd0b85742, 0xc2a3405f, 0xccaa4d54, 0x41ecdaf7, 0x4fe5d7fc, 0x5dfec0e1, 0x53f7cdea, 0x79c8eedb, 0x77c1e3d0, 0x65daf4cd, 0x6bd3f9c6, 0x31a4b2af, 0x3fadbfa4, 0x2db6a8b9, 0x23bfa5b2, 0x09808683, 0x07898b88, 0x15929c95, 0x1b9b919e, 0xa17c0a47, 0xaf75074c, 0xbd6e1051, 0xb3671d5a, 0x99583e6b, 0x97513360, 0x854a247d, 0x8b432976, 0xd134621f, 0xdf3d6f14, 0xcd267809, 0xc32f7502, 0xe9105633, 0xe7195b38, 0xf5024c25, 0xfb0b412e, 0x9ad7618c, 0x94de6c87, 0x86c57b9a, 0x88cc7691, 0xa2f355a0, 0xacfa58ab, 0xbee14fb6, 0xb0e842bd, 0xea9f09d4, 0xe49604df, 0xf68d13c2, 0xf8841ec9, 0xd2bb3df8, 0xdcb230f3, 0xcea927ee, 0xc0a02ae5, 0x7a47b13c, 0x744ebc37, 0x6655ab2a, 0x685ca621, 0x42638510, 0x4c6a881b, 0x5e719f06, 0x5078920d, 0x0a0fd964, 0x0406d46f, 0x161dc372, 0x1814ce79, 0x322bed48, 0x3c22e043, 0x2e39f75e, 0x2030fa55, 0xec9ab701, 0xe293ba0a, 0xf088ad17, 0xfe81a01c, 0xd4be832d, 0xdab78e26, 0xc8ac993b, 0xc6a59430, 0x9cd2df59, 0x92dbd252, 0x80c0c54f, 0x8ec9c844, 0xa4f6eb75, 0xaaffe67e, 0xb8e4f163, 0xb6edfc68, 0x0c0a67b1, 0x02036aba, 0x10187da7, 0x1e1170ac, 0x342e539d, 0x3a275e96, 0x283c498b, 0x26354480, 0x7c420fe9, 0x724b02e2, 0x605015ff, 0x6e5918f4, 0x44663bc5, 0x4a6f36ce, 0x587421d3, 0x567d2cd8, 0x37a10c7a, 0x39a80171, 0x2bb3166c, 0x25ba1b67, 0x0f853856, 0x018c355d, 0x13972240, 0x1d9e2f4b, 0x47e96422, 0x49e06929, 0x5bfb7e34, 0x55f2733f, 0x7fcd500e, 0x71c45d05, 0x63df4a18, 0x6dd64713, 0xd731dcca, 0xd938d1c1, 0xcb23c6dc, 0xc52acbd7, 0xef15e8e6, 0xe11ce5ed, 0xf307f2f0, 0xfd0efffb, 0xa779b492, 0xa970b999, 0xbb6bae84, 0xb562a38f, 0x9f5d80be, 0x91548db5, 0x834f9aa8, 0x8d4697a3];\n  var U2 = [0x00000000, 0x0b0e090d, 0x161c121a, 0x1d121b17, 0x2c382434, 0x27362d39, 0x3a24362e, 0x312a3f23, 0x58704868, 0x537e4165, 0x4e6c5a72, 0x4562537f, 0x74486c5c, 0x7f466551, 0x62547e46, 0x695a774b, 0xb0e090d0, 0xbbee99dd, 0xa6fc82ca, 0xadf28bc7, 0x9cd8b4e4, 0x97d6bde9, 0x8ac4a6fe, 0x81caaff3, 0xe890d8b8, 0xe39ed1b5, 0xfe8ccaa2, 0xf582c3af, 0xc4a8fc8c, 0xcfa6f581, 0xd2b4ee96, 0xd9bae79b, 0x7bdb3bbb, 0x70d532b6, 0x6dc729a1, 0x66c920ac, 0x57e31f8f, 0x5ced1682, 0x41ff0d95, 0x4af10498, 0x23ab73d3, 0x28a57ade, 0x35b761c9, 0x3eb968c4, 0x0f9357e7, 0x049d5eea, 0x198f45fd, 0x12814cf0, 0xcb3bab6b, 0xc035a266, 0xdd27b971, 0xd629b07c, 0xe7038f5f, 0xec0d8652, 0xf11f9d45, 0xfa119448, 0x934be303, 0x9845ea0e, 0x8557f119, 0x8e59f814, 0xbf73c737, 0xb47dce3a, 0xa96fd52d, 0xa261dc20, 0xf6ad766d, 0xfda37f60, 0xe0b16477, 0xebbf6d7a, 0xda955259, 0xd19b5b54, 0xcc894043, 0xc787494e, 0xaedd3e05, 0xa5d33708, 0xb8c12c1f, 0xb3cf2512, 0x82e51a31, 0x89eb133c, 0x94f9082b, 0x9ff70126, 0x464de6bd, 0x4d43efb0, 0x5051f4a7, 0x5b5ffdaa, 0x6a75c289, 0x617bcb84, 0x7c69d093, 0x7767d99e, 0x1e3daed5, 0x1533a7d8, 0x0821bccf, 0x032fb5c2, 0x32058ae1, 0x390b83ec, 0x241998fb, 0x2f1791f6, 0x8d764dd6, 0x867844db, 0x9b6a5fcc, 0x906456c1, 0xa14e69e2, 0xaa4060ef, 0xb7527bf8, 0xbc5c72f5, 0xd50605be, 0xde080cb3, 0xc31a17a4, 0xc8141ea9, 0xf93e218a, 0xf2302887, 0xef223390, 0xe42c3a9d, 0x3d96dd06, 0x3698d40b, 0x2b8acf1c, 0x2084c611, 0x11aef932, 0x1aa0f03f, 0x07b2eb28, 0x0cbce225, 0x65e6956e, 0x6ee89c63, 0x73fa8774, 0x78f48e79, 0x49deb15a, 0x42d0b857, 0x5fc2a340, 0x54ccaa4d, 0xf741ecda, 0xfc4fe5d7, 0xe15dfec0, 0xea53f7cd, 0xdb79c8ee, 0xd077c1e3, 0xcd65daf4, 0xc66bd3f9, 0xaf31a4b2, 0xa43fadbf, 0xb92db6a8, 0xb223bfa5, 0x83098086, 0x8807898b, 0x9515929c, 0x9e1b9b91, 0x47a17c0a, 0x4caf7507, 0x51bd6e10, 0x5ab3671d, 0x6b99583e, 0x60975133, 0x7d854a24, 0x768b4329, 0x1fd13462, 0x14df3d6f, 0x09cd2678, 0x02c32f75, 0x33e91056, 0x38e7195b, 0x25f5024c, 0x2efb0b41, 0x8c9ad761, 0x8794de6c, 0x9a86c57b, 0x9188cc76, 0xa0a2f355, 0xabacfa58, 0xb6bee14f, 0xbdb0e842, 0xd4ea9f09, 0xdfe49604, 0xc2f68d13, 0xc9f8841e, 0xf8d2bb3d, 0xf3dcb230, 0xeecea927, 0xe5c0a02a, 0x3c7a47b1, 0x37744ebc, 0x2a6655ab, 0x21685ca6, 0x10426385, 0x1b4c6a88, 0x065e719f, 0x0d507892, 0x640a0fd9, 0x6f0406d4, 0x72161dc3, 0x791814ce, 0x48322bed, 0x433c22e0, 0x5e2e39f7, 0x552030fa, 0x01ec9ab7, 0x0ae293ba, 0x17f088ad, 0x1cfe81a0, 0x2dd4be83, 0x26dab78e, 0x3bc8ac99, 0x30c6a594, 0x599cd2df, 0x5292dbd2, 0x4f80c0c5, 0x448ec9c8, 0x75a4f6eb, 0x7eaaffe6, 0x63b8e4f1, 0x68b6edfc, 0xb10c0a67, 0xba02036a, 0xa710187d, 0xac1e1170, 0x9d342e53, 0x963a275e, 0x8b283c49, 0x80263544, 0xe97c420f, 0xe2724b02, 0xff605015, 0xf46e5918, 0xc544663b, 0xce4a6f36, 0xd3587421, 0xd8567d2c, 0x7a37a10c, 0x7139a801, 0x6c2bb316, 0x6725ba1b, 0x560f8538, 0x5d018c35, 0x40139722, 0x4b1d9e2f, 0x2247e964, 0x2949e069, 0x345bfb7e, 0x3f55f273, 0x0e7fcd50, 0x0571c45d, 0x1863df4a, 0x136dd647, 0xcad731dc, 0xc1d938d1, 0xdccb23c6, 0xd7c52acb, 0xe6ef15e8, 0xede11ce5, 0xf0f307f2, 0xfbfd0eff, 0x92a779b4, 0x99a970b9, 0x84bb6bae, 0x8fb562a3, 0xbe9f5d80, 0xb591548d, 0xa8834f9a, 0xa38d4697];\n  var U3 = [0x00000000, 0x0d0b0e09, 0x1a161c12, 0x171d121b, 0x342c3824, 0x3927362d, 0x2e3a2436, 0x23312a3f, 0x68587048, 0x65537e41, 0x724e6c5a, 0x7f456253, 0x5c74486c, 0x517f4665, 0x4662547e, 0x4b695a77, 0xd0b0e090, 0xddbbee99, 0xcaa6fc82, 0xc7adf28b, 0xe49cd8b4, 0xe997d6bd, 0xfe8ac4a6, 0xf381caaf, 0xb8e890d8, 0xb5e39ed1, 0xa2fe8cca, 0xaff582c3, 0x8cc4a8fc, 0x81cfa6f5, 0x96d2b4ee, 0x9bd9bae7, 0xbb7bdb3b, 0xb670d532, 0xa16dc729, 0xac66c920, 0x8f57e31f, 0x825ced16, 0x9541ff0d, 0x984af104, 0xd323ab73, 0xde28a57a, 0xc935b761, 0xc43eb968, 0xe70f9357, 0xea049d5e, 0xfd198f45, 0xf012814c, 0x6bcb3bab, 0x66c035a2, 0x71dd27b9, 0x7cd629b0, 0x5fe7038f, 0x52ec0d86, 0x45f11f9d, 0x48fa1194, 0x03934be3, 0x0e9845ea, 0x198557f1, 0x148e59f8, 0x37bf73c7, 0x3ab47dce, 0x2da96fd5, 0x20a261dc, 0x6df6ad76, 0x60fda37f, 0x77e0b164, 0x7aebbf6d, 0x59da9552, 0x54d19b5b, 0x43cc8940, 0x4ec78749, 0x05aedd3e, 0x08a5d337, 0x1fb8c12c, 0x12b3cf25, 0x3182e51a, 0x3c89eb13, 0x2b94f908, 0x269ff701, 0xbd464de6, 0xb04d43ef, 0xa75051f4, 0xaa5b5ffd, 0x896a75c2, 0x84617bcb, 0x937c69d0, 0x9e7767d9, 0xd51e3dae, 0xd81533a7, 0xcf0821bc, 0xc2032fb5, 0xe132058a, 0xec390b83, 0xfb241998, 0xf62f1791, 0xd68d764d, 0xdb867844, 0xcc9b6a5f, 0xc1906456, 0xe2a14e69, 0xefaa4060, 0xf8b7527b, 0xf5bc5c72, 0xbed50605, 0xb3de080c, 0xa4c31a17, 0xa9c8141e, 0x8af93e21, 0x87f23028, 0x90ef2233, 0x9de42c3a, 0x063d96dd, 0x0b3698d4, 0x1c2b8acf, 0x112084c6, 0x3211aef9, 0x3f1aa0f0, 0x2807b2eb, 0x250cbce2, 0x6e65e695, 0x636ee89c, 0x7473fa87, 0x7978f48e, 0x5a49deb1, 0x5742d0b8, 0x405fc2a3, 0x4d54ccaa, 0xdaf741ec, 0xd7fc4fe5, 0xc0e15dfe, 0xcdea53f7, 0xeedb79c8, 0xe3d077c1, 0xf4cd65da, 0xf9c66bd3, 0xb2af31a4, 0xbfa43fad, 0xa8b92db6, 0xa5b223bf, 0x86830980, 0x8b880789, 0x9c951592, 0x919e1b9b, 0x0a47a17c, 0x074caf75, 0x1051bd6e, 0x1d5ab367, 0x3e6b9958, 0x33609751, 0x247d854a, 0x29768b43, 0x621fd134, 0x6f14df3d, 0x7809cd26, 0x7502c32f, 0x5633e910, 0x5b38e719, 0x4c25f502, 0x412efb0b, 0x618c9ad7, 0x6c8794de, 0x7b9a86c5, 0x769188cc, 0x55a0a2f3, 0x58abacfa, 0x4fb6bee1, 0x42bdb0e8, 0x09d4ea9f, 0x04dfe496, 0x13c2f68d, 0x1ec9f884, 0x3df8d2bb, 0x30f3dcb2, 0x27eecea9, 0x2ae5c0a0, 0xb13c7a47, 0xbc37744e, 0xab2a6655, 0xa621685c, 0x85104263, 0x881b4c6a, 0x9f065e71, 0x920d5078, 0xd9640a0f, 0xd46f0406, 0xc372161d, 0xce791814, 0xed48322b, 0xe0433c22, 0xf75e2e39, 0xfa552030, 0xb701ec9a, 0xba0ae293, 0xad17f088, 0xa01cfe81, 0x832dd4be, 0x8e26dab7, 0x993bc8ac, 0x9430c6a5, 0xdf599cd2, 0xd25292db, 0xc54f80c0, 0xc8448ec9, 0xeb75a4f6, 0xe67eaaff, 0xf163b8e4, 0xfc68b6ed, 0x67b10c0a, 0x6aba0203, 0x7da71018, 0x70ac1e11, 0x539d342e, 0x5e963a27, 0x498b283c, 0x44802635, 0x0fe97c42, 0x02e2724b, 0x15ff6050, 0x18f46e59, 0x3bc54466, 0x36ce4a6f, 0x21d35874, 0x2cd8567d, 0x0c7a37a1, 0x017139a8, 0x166c2bb3, 0x1b6725ba, 0x38560f85, 0x355d018c, 0x22401397, 0x2f4b1d9e, 0x642247e9, 0x692949e0, 0x7e345bfb, 0x733f55f2, 0x500e7fcd, 0x5d0571c4, 0x4a1863df, 0x47136dd6, 0xdccad731, 0xd1c1d938, 0xc6dccb23, 0xcbd7c52a, 0xe8e6ef15, 0xe5ede11c, 0xf2f0f307, 0xfffbfd0e, 0xb492a779, 0xb999a970, 0xae84bb6b, 0xa38fb562, 0x80be9f5d, 0x8db59154, 0x9aa8834f, 0x97a38d46];\n  var U4 = [0x00000000, 0x090d0b0e, 0x121a161c, 0x1b171d12, 0x24342c38, 0x2d392736, 0x362e3a24, 0x3f23312a, 0x48685870, 0x4165537e, 0x5a724e6c, 0x537f4562, 0x6c5c7448, 0x65517f46, 0x7e466254, 0x774b695a, 0x90d0b0e0, 0x99ddbbee, 0x82caa6fc, 0x8bc7adf2, 0xb4e49cd8, 0xbde997d6, 0xa6fe8ac4, 0xaff381ca, 0xd8b8e890, 0xd1b5e39e, 0xcaa2fe8c, 0xc3aff582, 0xfc8cc4a8, 0xf581cfa6, 0xee96d2b4, 0xe79bd9ba, 0x3bbb7bdb, 0x32b670d5, 0x29a16dc7, 0x20ac66c9, 0x1f8f57e3, 0x16825ced, 0x0d9541ff, 0x04984af1, 0x73d323ab, 0x7ade28a5, 0x61c935b7, 0x68c43eb9, 0x57e70f93, 0x5eea049d, 0x45fd198f, 0x4cf01281, 0xab6bcb3b, 0xa266c035, 0xb971dd27, 0xb07cd629, 0x8f5fe703, 0x8652ec0d, 0x9d45f11f, 0x9448fa11, 0xe303934b, 0xea0e9845, 0xf1198557, 0xf8148e59, 0xc737bf73, 0xce3ab47d, 0xd52da96f, 0xdc20a261, 0x766df6ad, 0x7f60fda3, 0x6477e0b1, 0x6d7aebbf, 0x5259da95, 0x5b54d19b, 0x4043cc89, 0x494ec787, 0x3e05aedd, 0x3708a5d3, 0x2c1fb8c1, 0x2512b3cf, 0x1a3182e5, 0x133c89eb, 0x082b94f9, 0x01269ff7, 0xe6bd464d, 0xefb04d43, 0xf4a75051, 0xfdaa5b5f, 0xc2896a75, 0xcb84617b, 0xd0937c69, 0xd99e7767, 0xaed51e3d, 0xa7d81533, 0xbccf0821, 0xb5c2032f, 0x8ae13205, 0x83ec390b, 0x98fb2419, 0x91f62f17, 0x4dd68d76, 0x44db8678, 0x5fcc9b6a, 0x56c19064, 0x69e2a14e, 0x60efaa40, 0x7bf8b752, 0x72f5bc5c, 0x05bed506, 0x0cb3de08, 0x17a4c31a, 0x1ea9c814, 0x218af93e, 0x2887f230, 0x3390ef22, 0x3a9de42c, 0xdd063d96, 0xd40b3698, 0xcf1c2b8a, 0xc6112084, 0xf93211ae, 0xf03f1aa0, 0xeb2807b2, 0xe2250cbc, 0x956e65e6, 0x9c636ee8, 0x877473fa, 0x8e7978f4, 0xb15a49de, 0xb85742d0, 0xa3405fc2, 0xaa4d54cc, 0xecdaf741, 0xe5d7fc4f, 0xfec0e15d, 0xf7cdea53, 0xc8eedb79, 0xc1e3d077, 0xdaf4cd65, 0xd3f9c66b, 0xa4b2af31, 0xadbfa43f, 0xb6a8b92d, 0xbfa5b223, 0x80868309, 0x898b8807, 0x929c9515, 0x9b919e1b, 0x7c0a47a1, 0x75074caf, 0x6e1051bd, 0x671d5ab3, 0x583e6b99, 0x51336097, 0x4a247d85, 0x4329768b, 0x34621fd1, 0x3d6f14df, 0x267809cd, 0x2f7502c3, 0x105633e9, 0x195b38e7, 0x024c25f5, 0x0b412efb, 0xd7618c9a, 0xde6c8794, 0xc57b9a86, 0xcc769188, 0xf355a0a2, 0xfa58abac, 0xe14fb6be, 0xe842bdb0, 0x9f09d4ea, 0x9604dfe4, 0x8d13c2f6, 0x841ec9f8, 0xbb3df8d2, 0xb230f3dc, 0xa927eece, 0xa02ae5c0, 0x47b13c7a, 0x4ebc3774, 0x55ab2a66, 0x5ca62168, 0x63851042, 0x6a881b4c, 0x719f065e, 0x78920d50, 0x0fd9640a, 0x06d46f04, 0x1dc37216, 0x14ce7918, 0x2bed4832, 0x22e0433c, 0x39f75e2e, 0x30fa5520, 0x9ab701ec, 0x93ba0ae2, 0x88ad17f0, 0x81a01cfe, 0xbe832dd4, 0xb78e26da, 0xac993bc8, 0xa59430c6, 0xd2df599c, 0xdbd25292, 0xc0c54f80, 0xc9c8448e, 0xf6eb75a4, 0xffe67eaa, 0xe4f163b8, 0xedfc68b6, 0x0a67b10c, 0x036aba02, 0x187da710, 0x1170ac1e, 0x2e539d34, 0x275e963a, 0x3c498b28, 0x35448026, 0x420fe97c, 0x4b02e272, 0x5015ff60, 0x5918f46e, 0x663bc544, 0x6f36ce4a, 0x7421d358, 0x7d2cd856, 0xa10c7a37, 0xa8017139, 0xb3166c2b, 0xba1b6725, 0x8538560f, 0x8c355d01, 0x97224013, 0x9e2f4b1d, 0xe9642247, 0xe0692949, 0xfb7e345b, 0xf2733f55, 0xcd500e7f, 0xc45d0571, 0xdf4a1863, 0xd647136d, 0x31dccad7, 0x38d1c1d9, 0x23c6dccb, 0x2acbd7c5, 0x15e8e6ef, 0x1ce5ede1, 0x07f2f0f3, 0x0efffbfd, 0x79b492a7, 0x70b999a9, 0x6bae84bb, 0x62a38fb5, 0x5d80be9f, 0x548db591, 0x4f9aa883, 0x4697a38d];\n\n  function convertToInt32(bytes) {\n    var result = [];\n    for (var i = 0; i < bytes.length; i += 4) {\n      result.push(\n        (bytes[i    ] << 24) |\n        (bytes[i + 1] << 16) |\n        (bytes[i + 2] <<  8) |\n        bytes[i + 3]\n      );\n    }\n    return result;\n  }\n\n  var AES = function(key) {\n    if (!(this instanceof AES)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    Object.defineProperty(this, 'key', {\n      value: coerceArray(key, true)\n    });\n\n    this._prepare();\n  }\n\n\n  AES.prototype._prepare = function() {\n\n    var rounds = numberOfRounds[this.key.length];\n    if (rounds == null) {\n      throw new Error('invalid key size (must be 16, 24 or 32 bytes)');\n    }\n\n    // encryption round keys\n    this._Ke = [];\n\n    // decryption round keys\n    this._Kd = [];\n\n    for (var i = 0; i <= rounds; i++) {\n      this._Ke.push([0, 0, 0, 0]);\n      this._Kd.push([0, 0, 0, 0]);\n    }\n\n    var roundKeyCount = (rounds + 1) * 4;\n    var KC = this.key.length / 4;\n\n    // convert the key into ints\n    var tk = convertToInt32(this.key);\n\n    // copy values into round key arrays\n    var index;\n    for (var i = 0; i < KC; i++) {\n      index = i >> 2;\n      this._Ke[index][i % 4] = tk[i];\n      this._Kd[rounds - index][i % 4] = tk[i];\n    }\n\n    // key expansion (fips-197 section 5.2)\n    var rconpointer = 0;\n    var t = KC, tt;\n    while (t < roundKeyCount) {\n      tt = tk[KC - 1];\n      tk[0] ^= ((S[(tt >> 16) & 0xFF] << 24) ^\n        (S[(tt >>  8) & 0xFF] << 16) ^\n        (S[ tt        & 0xFF] <<  8) ^\n        S[(tt >> 24) & 0xFF]        ^\n        (rcon[rconpointer] << 24));\n      rconpointer += 1;\n\n      // key expansion (for non-256 bit)\n      if (KC != 8) {\n        for (var i = 1; i < KC; i++) {\n          tk[i] ^= tk[i - 1];\n        }\n\n        // key expansion for 256-bit keys is \"slightly different\" (fips-197)\n      } else {\n        for (var i = 1; i < (KC / 2); i++) {\n          tk[i] ^= tk[i - 1];\n        }\n        tt = tk[(KC / 2) - 1];\n\n        tk[KC / 2] ^= (S[ tt        & 0xFF]        ^\n          (S[(tt >>  8) & 0xFF] <<  8) ^\n          (S[(tt >> 16) & 0xFF] << 16) ^\n          (S[(tt >> 24) & 0xFF] << 24));\n\n        for (var i = (KC / 2) + 1; i < KC; i++) {\n          tk[i] ^= tk[i - 1];\n        }\n      }\n\n      // copy values into round key arrays\n      var i = 0, r, c;\n      while (i < KC && t < roundKeyCount) {\n        r = t >> 2;\n        c = t % 4;\n        this._Ke[r][c] = tk[i];\n        this._Kd[rounds - r][c] = tk[i++];\n        t++;\n      }\n    }\n\n    // inverse-cipher-ify the decryption round key (fips-197 section 5.3)\n    for (var r = 1; r < rounds; r++) {\n      for (var c = 0; c < 4; c++) {\n        tt = this._Kd[r][c];\n        this._Kd[r][c] = (U1[(tt >> 24) & 0xFF] ^\n          U2[(tt >> 16) & 0xFF] ^\n          U3[(tt >>  8) & 0xFF] ^\n          U4[ tt        & 0xFF]);\n      }\n    }\n  }\n\n  AES.prototype.encrypt = function(plaintext) {\n    if (plaintext.length != 16) {\n      throw new Error('invalid plaintext size (must be 16 bytes)');\n    }\n\n    var rounds = this._Ke.length - 1;\n    var a = [0, 0, 0, 0];\n\n    // convert plaintext to (ints ^ key)\n    var t = convertToInt32(plaintext);\n    for (var i = 0; i < 4; i++) {\n      t[i] ^= this._Ke[0][i];\n    }\n\n    // apply round transforms\n    for (var r = 1; r < rounds; r++) {\n      for (var i = 0; i < 4; i++) {\n        a[i] = (T1[(t[ i         ] >> 24) & 0xff] ^\n          T2[(t[(i + 1) % 4] >> 16) & 0xff] ^\n          T3[(t[(i + 2) % 4] >>  8) & 0xff] ^\n          T4[ t[(i + 3) % 4]        & 0xff] ^\n          this._Ke[r][i]);\n      }\n      t = a.slice();\n    }\n\n    // the last round is special\n    var result = createArray(16), tt;\n    for (var i = 0; i < 4; i++) {\n      tt = this._Ke[rounds][i];\n      result[4 * i    ] = (S[(t[ i         ] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n      result[4 * i + 1] = (S[(t[(i + 1) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n      result[4 * i + 2] = (S[(t[(i + 2) % 4] >>  8) & 0xff] ^ (tt >>  8)) & 0xff;\n      result[4 * i + 3] = (S[ t[(i + 3) % 4]        & 0xff] ^  tt       ) & 0xff;\n    }\n\n    return result;\n  }\n\n  AES.prototype.decrypt = function(ciphertext) {\n    if (ciphertext.length != 16) {\n      throw new Error('invalid ciphertext size (must be 16 bytes)');\n    }\n\n    var rounds = this._Kd.length - 1;\n    var a = [0, 0, 0, 0];\n\n    // convert plaintext to (ints ^ key)\n    var t = convertToInt32(ciphertext);\n    for (var i = 0; i < 4; i++) {\n      t[i] ^= this._Kd[0][i];\n    }\n\n    // apply round transforms\n    for (var r = 1; r < rounds; r++) {\n      for (var i = 0; i < 4; i++) {\n        a[i] = (T5[(t[ i          ] >> 24) & 0xff] ^\n          T6[(t[(i + 3) % 4] >> 16) & 0xff] ^\n          T7[(t[(i + 2) % 4] >>  8) & 0xff] ^\n          T8[ t[(i + 1) % 4]        & 0xff] ^\n          this._Kd[r][i]);\n      }\n      t = a.slice();\n    }\n\n    // the last round is special\n    var result = createArray(16), tt;\n    for (var i = 0; i < 4; i++) {\n      tt = this._Kd[rounds][i];\n      result[4 * i    ] = (Si[(t[ i         ] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n      result[4 * i + 1] = (Si[(t[(i + 3) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n      result[4 * i + 2] = (Si[(t[(i + 2) % 4] >>  8) & 0xff] ^ (tt >>  8)) & 0xff;\n      result[4 * i + 3] = (Si[ t[(i + 1) % 4]        & 0xff] ^  tt       ) & 0xff;\n    }\n\n    return result;\n  }\n\n\n  /**\n   *  Mode Of Operation - Electonic Codebook (ECB)\n   */\n  var ModeOfOperationECB = function(key) {\n    if (!(this instanceof ModeOfOperationECB)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Electronic Code Block\";\n    this.name = \"ecb\";\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationECB.prototype.encrypt = function(plaintext) {\n    plaintext = coerceArray(plaintext);\n\n    if ((plaintext.length % 16) !== 0) {\n      throw new Error('invalid plaintext size (must be multiple of 16 bytes)');\n    }\n\n    var ciphertext = createArray(plaintext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < plaintext.length; i += 16) {\n      copyArray(plaintext, block, 0, i, i + 16);\n      block = this._aes.encrypt(block);\n      copyArray(block, ciphertext, i);\n    }\n\n    return ciphertext;\n  }\n\n  ModeOfOperationECB.prototype.decrypt = function(ciphertext) {\n    ciphertext = coerceArray(ciphertext);\n\n    if ((ciphertext.length % 16) !== 0) {\n      throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');\n    }\n\n    var plaintext = createArray(ciphertext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < ciphertext.length; i += 16) {\n      copyArray(ciphertext, block, 0, i, i + 16);\n      block = this._aes.decrypt(block);\n      copyArray(block, plaintext, i);\n    }\n\n    return plaintext;\n  }\n\n\n  /**\n   *  Mode Of Operation - Cipher Block Chaining (CBC)\n   */\n  var ModeOfOperationCBC = function(key, iv) {\n    if (!(this instanceof ModeOfOperationCBC)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Cipher Block Chaining\";\n    this.name = \"cbc\";\n\n    if (!iv) {\n      iv = createArray(16);\n\n    } else if (iv.length != 16) {\n      throw new Error('invalid initialation vector size (must be 16 bytes)');\n    }\n\n    this._lastCipherblock = coerceArray(iv, true);\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationCBC.prototype.encrypt = function(plaintext) {\n    plaintext = coerceArray(plaintext);\n\n    if ((plaintext.length % 16) !== 0) {\n      throw new Error('invalid plaintext size (must be multiple of 16 bytes)');\n    }\n\n    var ciphertext = createArray(plaintext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < plaintext.length; i += 16) {\n      copyArray(plaintext, block, 0, i, i + 16);\n\n      for (var j = 0; j < 16; j++) {\n        block[j] ^= this._lastCipherblock[j];\n      }\n\n      this._lastCipherblock = this._aes.encrypt(block);\n      copyArray(this._lastCipherblock, ciphertext, i);\n    }\n\n    return ciphertext;\n  }\n\n  ModeOfOperationCBC.prototype.decrypt = function(ciphertext) {\n    ciphertext = coerceArray(ciphertext);\n\n    if ((ciphertext.length % 16) !== 0) {\n      throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');\n    }\n\n    var plaintext = createArray(ciphertext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < ciphertext.length; i += 16) {\n      copyArray(ciphertext, block, 0, i, i + 16);\n      block = this._aes.decrypt(block);\n\n      for (var j = 0; j < 16; j++) {\n        plaintext[i + j] = block[j] ^ this._lastCipherblock[j];\n      }\n\n      copyArray(ciphertext, this._lastCipherblock, 0, i, i + 16);\n    }\n\n    return plaintext;\n  }\n\n\n  /**\n   *  Mode Of Operation - Cipher Feedback (CFB)\n   */\n  var ModeOfOperationCFB = function(key, iv, segmentSize) {\n    if (!(this instanceof ModeOfOperationCFB)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Cipher Feedback\";\n    this.name = \"cfb\";\n\n    if (!iv) {\n      iv = createArray(16);\n\n    } else if (iv.length != 16) {\n      throw new Error('invalid initialation vector size (must be 16 size)');\n    }\n\n    if (!segmentSize) { segmentSize = 1; }\n\n    this.segmentSize = segmentSize;\n\n    this._shiftRegister = coerceArray(iv, true);\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationCFB.prototype.encrypt = function(plaintext) {\n    if ((plaintext.length % this.segmentSize) != 0) {\n      throw new Error('invalid plaintext size (must be segmentSize bytes)');\n    }\n\n    var encrypted = coerceArray(plaintext, true);\n\n    var xorSegment;\n    for (var i = 0; i < encrypted.length; i += this.segmentSize) {\n      xorSegment = this._aes.encrypt(this._shiftRegister);\n      for (var j = 0; j < this.segmentSize; j++) {\n        encrypted[i + j] ^= xorSegment[j];\n      }\n\n      // Shift the register\n      copyArray(this._shiftRegister, this._shiftRegister, 0, this.segmentSize);\n      copyArray(encrypted, this._shiftRegister, 16 - this.segmentSize, i, i + this.segmentSize);\n    }\n\n    return encrypted;\n  }\n\n  ModeOfOperationCFB.prototype.decrypt = function(ciphertext) {\n    if ((ciphertext.length % this.segmentSize) != 0) {\n      throw new Error('invalid ciphertext size (must be segmentSize bytes)');\n    }\n\n    var plaintext = coerceArray(ciphertext, true);\n\n    var xorSegment;\n    for (var i = 0; i < plaintext.length; i += this.segmentSize) {\n      xorSegment = this._aes.encrypt(this._shiftRegister);\n\n      for (var j = 0; j < this.segmentSize; j++) {\n        plaintext[i + j] ^= xorSegment[j];\n      }\n\n      // Shift the register\n      copyArray(this._shiftRegister, this._shiftRegister, 0, this.segmentSize);\n      copyArray(ciphertext, this._shiftRegister, 16 - this.segmentSize, i, i + this.segmentSize);\n    }\n\n    return plaintext;\n  }\n\n  /**\n   *  Mode Of Operation - Output Feedback (OFB)\n   */\n  var ModeOfOperationOFB = function(key, iv) {\n    if (!(this instanceof ModeOfOperationOFB)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Output Feedback\";\n    this.name = \"ofb\";\n\n    if (!iv) {\n      iv = createArray(16);\n\n    } else if (iv.length != 16) {\n      throw new Error('invalid initialation vector size (must be 16 bytes)');\n    }\n\n    this._lastPrecipher = coerceArray(iv, true);\n    this._lastPrecipherIndex = 16;\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationOFB.prototype.encrypt = function(plaintext) {\n    var encrypted = coerceArray(plaintext, true);\n\n    for (var i = 0; i < encrypted.length; i++) {\n      if (this._lastPrecipherIndex === 16) {\n        this._lastPrecipher = this._aes.encrypt(this._lastPrecipher);\n        this._lastPrecipherIndex = 0;\n      }\n      encrypted[i] ^= this._lastPrecipher[this._lastPrecipherIndex++];\n    }\n\n    return encrypted;\n  }\n\n  // Decryption is symetric\n  ModeOfOperationOFB.prototype.decrypt = ModeOfOperationOFB.prototype.encrypt;\n\n\n  /**\n   *  Counter object for CTR common mode of operation\n   */\n  var Counter = function(initialValue) {\n    if (!(this instanceof Counter)) {\n      throw Error('Counter must be instanitated with `new`');\n    }\n\n    // We allow 0, but anything false-ish uses the default 1\n    if (initialValue !== 0 && !initialValue) { initialValue = 1; }\n\n    if (typeof(initialValue) === 'number') {\n      this._counter = createArray(16);\n      this.setValue(initialValue);\n\n    } else {\n      this.setBytes(initialValue);\n    }\n  }\n\n  Counter.prototype.setValue = function(value) {\n    if (typeof(value) !== 'number' || parseInt(value) != value) {\n      throw new Error('invalid counter value (must be an integer)');\n    }\n\n    // We cannot safely handle numbers beyond the safe range for integers\n    if (value > Number.MAX_SAFE_INTEGER) {\n      throw new Error('integer value out of safe range');\n    }\n\n    for (var index = 15; index >= 0; --index) {\n      this._counter[index] = value % 256;\n      value = parseInt(value / 256);\n    }\n  }\n\n  Counter.prototype.setBytes = function(bytes) {\n    bytes = coerceArray(bytes, true);\n\n    if (bytes.length != 16) {\n      throw new Error('invalid counter bytes size (must be 16 bytes)');\n    }\n\n    this._counter = bytes;\n  };\n\n  Counter.prototype.increment = function() {\n    for (var i = 15; i >= 0; i--) {\n      if (this._counter[i] === 255) {\n        this._counter[i] = 0;\n      } else {\n        this._counter[i]++;\n        break;\n      }\n    }\n  }\n\n\n  /**\n   *  Mode Of Operation - Counter (CTR)\n   */\n  var ModeOfOperationCTR = function(key, counter) {\n    if (!(this instanceof ModeOfOperationCTR)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Counter\";\n    this.name = \"ctr\";\n\n    if (!(counter instanceof Counter)) {\n      counter = new Counter(counter)\n    }\n\n    this._counter = counter;\n\n    this._remainingCounter = null;\n    this._remainingCounterIndex = 16;\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationCTR.prototype.encrypt = function(plaintext) {\n    var encrypted = coerceArray(plaintext, true);\n\n    for (var i = 0; i < encrypted.length; i++) {\n      if (this._remainingCounterIndex === 16) {\n        this._remainingCounter = this._aes.encrypt(this._counter._counter);\n        this._remainingCounterIndex = 0;\n        this._counter.increment();\n      }\n      encrypted[i] ^= this._remainingCounter[this._remainingCounterIndex++];\n    }\n\n    return encrypted;\n  }\n\n  // Decryption is symetric\n  ModeOfOperationCTR.prototype.decrypt = ModeOfOperationCTR.prototype.encrypt;\n\n\n  ///////////////////////\n  // Padding\n\n  // See:https://tools.ietf.org/html/rfc2315\n  function pkcs7pad(data) {\n    data = coerceArray(data, true);\n    var padder = 16 - (data.length % 16);\n    var result = createArray(data.length + padder);\n    copyArray(data, result);\n    for (var i = data.length; i < result.length; i++) {\n      result[i] = padder;\n    }\n    return result;\n  }\n\n  function pkcs7strip(data) {\n    data = coerceArray(data, true);\n    if (data.length < 16) { throw new Error('PKCS#7 invalid length'); }\n\n    var padder = data[data.length - 1];\n    if (padder > 16) { throw new Error('PKCS#7 padding byte out of range'); }\n\n    var length = data.length - padder;\n    for (var i = 0; i < padder; i++) {\n      if (data[length + i] !== padder) {\n        throw new Error('PKCS#7 invalid padding byte');\n      }\n    }\n\n    var result = createArray(length);\n    copyArray(data, result, 0, 0, length);\n    return result;\n  }\n\n  ///////////////////////\n  // Exporting\n\n\n  // The block cipher\n  var aesjs = {\n    AES: AES,\n    Counter: Counter,\n\n    ModeOfOperation: {\n      ecb: ModeOfOperationECB,\n      cbc: ModeOfOperationCBC,\n      cfb: ModeOfOperationCFB,\n      ofb: ModeOfOperationOFB,\n      ctr: ModeOfOperationCTR\n    },\n\n    utils: {\n      hex: convertHex,\n      utf8: convertUtf8\n    },\n\n    padding: {\n      pkcs7: {\n        pad: pkcs7pad,\n        strip: pkcs7strip\n      }\n    },\n\n    _arrayTest: {\n      coerceArray: coerceArray,\n      createArray: createArray,\n      copyArray: copyArray,\n    }\n  };\n\n\n  // node.js\n  if (typeof exports !== 'undefined') {\n    module.exports = aesjs\n\n    // RequireJS/AMD\n    // http://www.requirejs.org/docs/api.html\n    // https://github.com/amdjs/amdjs-api/wiki/AMD\n  } else if (typeof(define) === 'function' && define.amd) {\n    define([], function() { return aesjs; });\n\n    // Web Browsers\n  } else {\n\n    // If there was an existing library at \"aesjs\" make sure it's still available\n    if (root.aesjs) {\n      aesjs._aesjs = root.aesjs;\n    }\n\n    root.aesjs = aesjs;\n  }\n\n\n})(this);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n    function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n    function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n  return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_OPTIONS = exports.exponentialDelay = exports.isNetworkOrIdempotentRequestError = exports.isIdempotentRequestError = exports.isSafeRequestError = exports.isRetryableError = exports.isNetworkError = exports.namespace = void 0;\nconst is_retry_allowed_1 = __importDefault(require(\"../is-retry-allowed\"));\nexports.namespace = 'axios-retry';\nfunction isNetworkError(error) {\n  const CODE_EXCLUDE_LIST = ['ERR_CANCELED', 'ECONNABORTED'];\n  if (error.response) {\n    return false;\n  }\n  if (!error.code) {\n    return false;\n  }\n  // Prevents retrying timed out & cancelled requests\n  if (CODE_EXCLUDE_LIST.includes(error.code)) {\n    return false;\n  }\n  // Prevents retrying unsafe errors\n  return (0, is_retry_allowed_1.default)(error);\n}\nexports.isNetworkError = isNetworkError;\nconst SAFE_HTTP_METHODS = ['get', 'head', 'options'];\nconst IDEMPOTENT_HTTP_METHODS = SAFE_HTTP_METHODS.concat(['put', 'delete']);\nfunction isRetryableError(error) {\n  return (error.code !== 'ECONNABORTED' &&\n    (!error.response || (error.response.status >= 500 && error.response.status <= 599)));\n}\nexports.isRetryableError = isRetryableError;\nfunction isSafeRequestError(error) {\n  var _a;\n  if (!((_a = error.config) === null || _a === void 0 ? void 0 : _a.method)) {\n    // Cannot determine if the request can be retried\n    return false;\n  }\n  return isRetryableError(error) && SAFE_HTTP_METHODS.indexOf(error.config.method) !== -1;\n}\nexports.isSafeRequestError = isSafeRequestError;\nfunction isIdempotentRequestError(error) {\n  var _a;\n  if (!((_a = error.config) === null || _a === void 0 ? void 0 : _a.method)) {\n    // Cannot determine if the request can be retried\n    return false;\n  }\n  return isRetryableError(error) && IDEMPOTENT_HTTP_METHODS.indexOf(error.config.method) !== -1;\n}\nexports.isIdempotentRequestError = isIdempotentRequestError;\nfunction isNetworkOrIdempotentRequestError(error) {\n  return isNetworkError(error) || isIdempotentRequestError(error);\n}\nexports.isNetworkOrIdempotentRequestError = isNetworkOrIdempotentRequestError;\nfunction noDelay() {\n  return 0;\n}\nfunction exponentialDelay(retryNumber = 0, _error = undefined, delayFactor = 100) {\n  const delay = Math.pow(2, retryNumber) * delayFactor;\n  const randomSum = delay * 0.2 * Math.random(); // 0-20% of the delay\n  return delay + randomSum;\n}\nexports.exponentialDelay = exponentialDelay;\nexports.DEFAULT_OPTIONS = {\n  retries: 3,\n  retryCondition: isNetworkOrIdempotentRequestError,\n  retryDelay: noDelay,\n  shouldResetTimeout: false,\n  onRetry: () => { }\n};\nfunction getRequestOptions(config, defaultOptions) {\n  return Object.assign(Object.assign(Object.assign({}, exports.DEFAULT_OPTIONS), defaultOptions), config[exports.namespace]);\n}\nfunction setCurrentState(config, defaultOptions) {\n  const currentState = getRequestOptions(config, defaultOptions || {});\n  currentState.retryCount = currentState.retryCount || 0;\n  currentState.lastRequestTime = currentState.lastRequestTime || Date.now();\n  config[exports.namespace] = currentState;\n  return currentState;\n}\nfunction fixConfig(axiosInstance, config) {\n  // @ts-ignore\n  if (axiosInstance.defaults.agent === config.agent) {\n    // @ts-ignore\n    delete config.agent;\n  }\n  if (axiosInstance.defaults.httpAgent === config.httpAgent) {\n    delete config.httpAgent;\n  }\n  if (axiosInstance.defaults.httpsAgent === config.httpsAgent) {\n    delete config.httpsAgent;\n  }\n}\nfunction shouldRetry(currentState, error) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const { retries, retryCondition } = currentState;\n    const shouldRetryOrPromise = (currentState.retryCount || 0) < retries && retryCondition(error);\n    // This could be a promise\n    if (typeof shouldRetryOrPromise === 'object') {\n      try {\n        const shouldRetryPromiseResult = yield shouldRetryOrPromise;\n        // keep return true unless shouldRetryPromiseResult return false for compatibility\n        return shouldRetryPromiseResult !== false;\n      }\n      catch (_err) {\n        return false;\n      }\n    }\n    return shouldRetryOrPromise;\n  });\n}\nconst axiosRetry = (axiosInstance, defaultOptions) => {\n  const requestInterceptorId = axiosInstance.interceptors.request.use((config) => {\n    setCurrentState(config, defaultOptions);\n    return config;\n  });\n  const responseInterceptorId = axiosInstance.interceptors.response.use(null, (error) => __awaiter(void 0, void 0, void 0, function* () {\n    const { config } = error;\n    // If we have no information to retry the request\n    if (!config) {\n      return Promise.reject(error);\n    }\n    const currentState = setCurrentState(config, defaultOptions);\n    if (yield shouldRetry(currentState, error)) {\n      currentState.retryCount += 1;\n      const { retryDelay, shouldResetTimeout, onRetry } = currentState;\n      const delay = retryDelay(currentState.retryCount, error);\n      // Axios fails merging this configuration to the default configuration because it has an issue\n      // with circular structures: https://github.com/mzabriskie/axios/issues/370\n      fixConfig(axiosInstance, config);\n      if (!shouldResetTimeout && config.timeout && currentState.lastRequestTime) {\n        const lastRequestDuration = Date.now() - currentState.lastRequestTime;\n        const timeout = config.timeout - lastRequestDuration - delay;\n        if (timeout <= 0) {\n          return Promise.reject(error);\n        }\n        config.timeout = timeout;\n      }\n      config.transformRequest = [(data) => data];\n      yield onRetry(currentState.retryCount, error, config);\n      return new Promise((resolve) => {\n        setTimeout(() => resolve(axiosInstance(config)), delay);\n      });\n    }\n    return Promise.reject(error);\n  }));\n  return { requestInterceptorId, responseInterceptorId };\n};\n// Compatibility with CommonJS\naxiosRetry.isNetworkError = isNetworkError;\naxiosRetry.isSafeRequestError = isSafeRequestError;\naxiosRetry.isIdempotentRequestError = isIdempotentRequestError;\naxiosRetry.isNetworkOrIdempotentRequestError = isNetworkOrIdempotentRequestError;\naxiosRetry.exponentialDelay = exponentialDelay;\naxiosRetry.isRetryableError = isRetryableError;\nexports.default = axiosRetry;\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.4, Tue May 30 2023\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Dexie = factory());\n})(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var _global = typeof globalThis !== 'undefined' ? globalThis :\n        typeof self !== 'undefined' ? self :\n            typeof window !== 'undefined' ? window :\n                global;\n\n    var keys = Object.keys;\n    var isArray = Array.isArray;\n    if (typeof Promise !== 'undefined' && !_global.Promise) {\n        _global.Promise = Promise;\n    }\n    function extend(obj, extension) {\n        if (typeof extension !== 'object')\n            return obj;\n        keys(extension).forEach(function (key) {\n            obj[key] = extension[key];\n        });\n        return obj;\n    }\n    var getProto = Object.getPrototypeOf;\n    var _hasOwn = {}.hasOwnProperty;\n    function hasOwn(obj, prop) {\n        return _hasOwn.call(obj, prop);\n    }\n    function props(proto, extension) {\n        if (typeof extension === 'function')\n            extension = extension(getProto(proto));\n        (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n            setProp(proto, key, extension[key]);\n        });\n    }\n    var defineProperty = Object.defineProperty;\n    function setProp(obj, prop, functionOrGetSet, options) {\n        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n            { value: functionOrGetSet, configurable: true, writable: true }, options));\n    }\n    function derive(Child) {\n        return {\n            from: function (Parent) {\n                Child.prototype = Object.create(Parent.prototype);\n                setProp(Child.prototype, \"constructor\", Child);\n                return {\n                    extend: props.bind(null, Child.prototype)\n                };\n            }\n        };\n    }\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    function getPropertyDescriptor(obj, prop) {\n        var pd = getOwnPropertyDescriptor(obj, prop);\n        var proto;\n        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n    }\n    var _slice = [].slice;\n    function slice(args, start, end) {\n        return _slice.call(args, start, end);\n    }\n    function override(origFunc, overridedFactory) {\n        return overridedFactory(origFunc);\n    }\n    function assert(b) {\n        if (!b)\n            throw new Error(\"Assertion Failed\");\n    }\n    function asap$1(fn) {\n        if (_global.setImmediate)\n            setImmediate(fn);\n        else\n            setTimeout(fn, 0);\n    }\n    function arrayToObject(array, extractor) {\n        return array.reduce(function (result, item, i) {\n            var nameAndValue = extractor(item, i);\n            if (nameAndValue)\n                result[nameAndValue[0]] = nameAndValue[1];\n            return result;\n        }, {});\n    }\n    function tryCatch(fn, onerror, args) {\n        try {\n            fn.apply(null, args);\n        }\n        catch (ex) {\n            onerror && onerror(ex);\n        }\n    }\n    function getByKeyPath(obj, keyPath) {\n        if (hasOwn(obj, keyPath))\n            return obj[keyPath];\n        if (!keyPath)\n            return obj;\n        if (typeof keyPath !== 'string') {\n            var rv = [];\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                var val = getByKeyPath(obj, keyPath[i]);\n                rv.push(val);\n            }\n            return rv;\n        }\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var innerObj = obj[keyPath.substr(0, period)];\n            return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n        }\n        return undefined;\n    }\n    function setByKeyPath(obj, keyPath, value) {\n        if (!obj || keyPath === undefined)\n            return;\n        if ('isFrozen' in Object && Object.isFrozen(obj))\n            return;\n        if (typeof keyPath !== 'string' && 'length' in keyPath) {\n            assert(typeof value !== 'string' && 'length' in value);\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                setByKeyPath(obj, keyPath[i], value[i]);\n            }\n        }\n        else {\n            var period = keyPath.indexOf('.');\n            if (period !== -1) {\n                var currentKeyPath = keyPath.substr(0, period);\n                var remainingKeyPath = keyPath.substr(period + 1);\n                if (remainingKeyPath === \"\")\n                    if (value === undefined) {\n                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                            obj.splice(currentKeyPath, 1);\n                        else\n                            delete obj[currentKeyPath];\n                    }\n                    else\n                        obj[currentKeyPath] = value;\n                else {\n                    var innerObj = obj[currentKeyPath];\n                    if (!innerObj || !hasOwn(obj, currentKeyPath))\n                        innerObj = (obj[currentKeyPath] = {});\n                    setByKeyPath(innerObj, remainingKeyPath, value);\n                }\n            }\n            else {\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                        obj.splice(keyPath, 1);\n                    else\n                        delete obj[keyPath];\n                }\n                else\n                    obj[keyPath] = value;\n            }\n        }\n    }\n    function delByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string')\n            setByKeyPath(obj, keyPath, undefined);\n        else if ('length' in keyPath)\n            [].map.call(keyPath, function (kp) {\n                setByKeyPath(obj, kp, undefined);\n            });\n    }\n    function shallowClone(obj) {\n        var rv = {};\n        for (var m in obj) {\n            if (hasOwn(obj, m))\n                rv[m] = obj[m];\n        }\n        return rv;\n    }\n    var concat = [].concat;\n    function flatten(a) {\n        return concat.apply([], a);\n    }\n    var intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\n    var intrinsicTypes = intrinsicTypeNames.map(function (t) { return _global[t]; });\n    arrayToObject(intrinsicTypeNames, function (x) { return [x, true]; });\n    var circularRefs = null;\n    function deepClone(any) {\n        circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n        var rv = innerDeepClone(any);\n        circularRefs = null;\n        return rv;\n    }\n    function innerDeepClone(any) {\n        if (!any || typeof any !== 'object')\n            return any;\n        var rv = circularRefs && circularRefs.get(any);\n        if (rv)\n            return rv;\n        if (isArray(any)) {\n            rv = [];\n            circularRefs && circularRefs.set(any, rv);\n            for (var i = 0, l = any.length; i < l; ++i) {\n                rv.push(innerDeepClone(any[i]));\n            }\n        }\n        else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n            rv = any;\n        }\n        else {\n            var proto = getProto(any);\n            rv = proto === Object.prototype ? {} : Object.create(proto);\n            circularRefs && circularRefs.set(any, rv);\n            for (var prop in any) {\n                if (hasOwn(any, prop)) {\n                    rv[prop] = innerDeepClone(any[prop]);\n                }\n            }\n        }\n        return rv;\n    }\n    var toString = {}.toString;\n    function toStringTag(o) {\n        return toString.call(o).slice(8, -1);\n    }\n    var iteratorSymbol = typeof Symbol !== 'undefined' ?\n        Symbol.iterator :\n        '@@iterator';\n    var getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n        var i;\n        return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n    } : function () { return null; };\n    var NO_CHAR_ARRAY = {};\n    function getArrayOf(arrayLike) {\n        var i, a, x, it;\n        if (arguments.length === 1) {\n            if (isArray(arrayLike))\n                return arrayLike.slice();\n            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n                return [arrayLike];\n            if ((it = getIteratorOf(arrayLike))) {\n                a = [];\n                while ((x = it.next()), !x.done)\n                    a.push(x.value);\n                return a;\n            }\n            if (arrayLike == null)\n                return [arrayLike];\n            i = arrayLike.length;\n            if (typeof i === 'number') {\n                a = new Array(i);\n                while (i--)\n                    a[i] = arrayLike[i];\n                return a;\n            }\n            return [arrayLike];\n        }\n        i = arguments.length;\n        a = new Array(i);\n        while (i--)\n            a[i] = arguments[i];\n        return a;\n    }\n    var isAsyncFunction = typeof Symbol !== 'undefined'\n        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n        : function () { return false; };\n\n    var debug = typeof location !== 'undefined' &&\n        /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n    function setDebug(value, filter) {\n        debug = value;\n        libraryFilter = filter;\n    }\n    var libraryFilter = function () { return true; };\n    var NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\n    function getErrorWithStack() {\n        if (NEEDS_THROW_FOR_STACK)\n            try {\n                getErrorWithStack.arguments;\n                throw new Error();\n            }\n            catch (e) {\n                return e;\n            }\n        return new Error();\n    }\n    function prettyStack(exception, numIgnoredFrames) {\n        var stack = exception.stack;\n        if (!stack)\n            return \"\";\n        numIgnoredFrames = (numIgnoredFrames || 0);\n        if (stack.indexOf(exception.name) === 0)\n            numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n        return stack.split('\\n')\n            .slice(numIgnoredFrames)\n            .filter(libraryFilter)\n            .map(function (frame) { return \"\\n\" + frame; })\n            .join('');\n    }\n\n    var dexieErrorNames = [\n        'Modify',\n        'Bulk',\n        'OpenFailed',\n        'VersionChange',\n        'Schema',\n        'Upgrade',\n        'InvalidTable',\n        'MissingAPI',\n        'NoSuchDatabase',\n        'InvalidArgument',\n        'SubTransaction',\n        'Unsupported',\n        'Internal',\n        'DatabaseClosed',\n        'PrematureCommit',\n        'ForeignAwait'\n    ];\n    var idbDomErrorNames = [\n        'Unknown',\n        'Constraint',\n        'Data',\n        'TransactionInactive',\n        'ReadOnly',\n        'Version',\n        'NotFound',\n        'InvalidState',\n        'InvalidAccess',\n        'Abort',\n        'Timeout',\n        'QuotaExceeded',\n        'Syntax',\n        'DataClone'\n    ];\n    var errorList = dexieErrorNames.concat(idbDomErrorNames);\n    var defaultTexts = {\n        VersionChanged: \"Database version changed by other database connection\",\n        DatabaseClosed: \"Database has been closed\",\n        Abort: \"Transaction aborted\",\n        TransactionInactive: \"Transaction has already completed or failed\",\n        MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n    function DexieError(name, msg) {\n        this._e = getErrorWithStack();\n        this.name = name;\n        this.message = msg;\n    }\n    derive(DexieError).from(Error).extend({\n        stack: {\n            get: function () {\n                return this._stack ||\n                    (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n            }\n        },\n        toString: function () { return this.name + \": \" + this.message; }\n    });\n    function getMultiErrorMessage(msg, failures) {\n        return msg + \". Errors: \" + Object.keys(failures)\n            .map(function (key) { return failures[key].toString(); })\n            .filter(function (v, i, s) { return s.indexOf(v) === i; })\n            .join('\\n');\n    }\n    function ModifyError(msg, failures, successCount, failedKeys) {\n        this._e = getErrorWithStack();\n        this.failures = failures;\n        this.failedKeys = failedKeys;\n        this.successCount = successCount;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(ModifyError).from(DexieError);\n    function BulkError(msg, failures) {\n        this._e = getErrorWithStack();\n        this.name = \"BulkError\";\n        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n        this.failuresByPos = failures;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(BulkError).from(DexieError);\n    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\n    var BaseException = DexieError;\n    var exceptions = errorList.reduce(function (obj, name) {\n        var fullName = name + \"Error\";\n        function DexieError(msgOrInner, inner) {\n            this._e = getErrorWithStack();\n            this.name = fullName;\n            if (!msgOrInner) {\n                this.message = defaultTexts[name] || fullName;\n                this.inner = null;\n            }\n            else if (typeof msgOrInner === 'string') {\n                this.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n                this.inner = inner || null;\n            }\n            else if (typeof msgOrInner === 'object') {\n                this.message = msgOrInner.name + \" \" + msgOrInner.message;\n                this.inner = msgOrInner;\n            }\n        }\n        derive(DexieError).from(BaseException);\n        obj[name] = DexieError;\n        return obj;\n    }, {});\n    exceptions.Syntax = SyntaxError;\n    exceptions.Type = TypeError;\n    exceptions.Range = RangeError;\n    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n        obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    function mapError(domError, message) {\n        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n            return domError;\n        var rv = new exceptionMap[domError.name](message || domError.message, domError);\n        if (\"stack\" in domError) {\n            setProp(rv, \"stack\", { get: function () {\n                    return this.inner.stack;\n                } });\n        }\n        return rv;\n    }\n    var fullNameExceptions = errorList.reduce(function (obj, name) {\n        if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n            obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    fullNameExceptions.ModifyError = ModifyError;\n    fullNameExceptions.DexieError = DexieError;\n    fullNameExceptions.BulkError = BulkError;\n\n    function nop() { }\n    function mirror(val) { return val; }\n    function pureFunctionChain(f1, f2) {\n        if (f1 == null || f1 === mirror)\n            return f2;\n        return function (val) {\n            return f2(f1(val));\n        };\n    }\n    function callBoth(on1, on2) {\n        return function () {\n            on1.apply(this, arguments);\n            on2.apply(this, arguments);\n        };\n    }\n    function hookCreatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res !== undefined)\n                arguments[0] = res;\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res2 !== undefined ? res2 : res;\n        };\n    }\n    function hookDeletingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            f1.apply(this, arguments);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = this.onerror = null;\n            f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        };\n    }\n    function hookUpdatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function (modifications) {\n            var res = f1.apply(this, arguments);\n            extend(modifications, res);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res === undefined ?\n                (res2 === undefined ? undefined : res2) :\n                (extend(res, res2));\n        };\n    }\n    function reverseStoppableEventChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            if (f2.apply(this, arguments) === false)\n                return false;\n            return f1.apply(this, arguments);\n        };\n    }\n    function promisableChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res && typeof res.then === 'function') {\n                var thiz = this, i = arguments.length, args = new Array(i);\n                while (i--)\n                    args[i] = arguments[i];\n                return res.then(function () {\n                    return f2.apply(thiz, args);\n                });\n            }\n            return f2.apply(this, arguments);\n        };\n    }\n\n    var INTERNAL = {};\n    var LONG_STACKS_CLIP_LIMIT = 100,\n    MAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n        [] :\n        (function () {\n            var globalP = Promise.resolve();\n            if (typeof crypto === 'undefined' || !crypto.subtle)\n                return [globalP, getProto(globalP), globalP];\n            var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n            return [\n                nativeP,\n                getProto(nativeP),\n                globalP\n            ];\n        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\n    var patchGlobalPromise = !!resolvedGlobalPromise;\n    var stack_being_generated = false;\n    var schedulePhysicalTick = resolvedGlobalPromise ?\n        function () { resolvedGlobalPromise.then(physicalTick); }\n        :\n            _global.setImmediate ?\n                setImmediate.bind(null, physicalTick) :\n                _global.MutationObserver ?\n                    function () {\n                        var hiddenDiv = document.createElement(\"div\");\n                        (new MutationObserver(function () {\n                            physicalTick();\n                            hiddenDiv = null;\n                        })).observe(hiddenDiv, { attributes: true });\n                        hiddenDiv.setAttribute('i', '1');\n                    } :\n                    function () { setTimeout(physicalTick, 0); };\n    var asap = function (callback, args) {\n        microtickQueue.push([callback, args]);\n        if (needsNewPhysicalTick) {\n            schedulePhysicalTick();\n            needsNewPhysicalTick = false;\n        }\n    };\n    var isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    currentFulfiller = null, rejectionMapper = mirror;\n    var globalPSD = {\n        id: 'global',\n        global: true,\n        ref: 0,\n        unhandleds: [],\n        onunhandled: globalError,\n        pgp: false,\n        env: {},\n        finalize: function () {\n            this.unhandleds.forEach(function (uh) {\n                try {\n                    globalError(uh[0], uh[1]);\n                }\n                catch (e) { }\n            });\n        }\n    };\n    var PSD = globalPSD;\n    var microtickQueue = [];\n    var numScheduledCalls = 0;\n    var tickFinalizers = [];\n    function DexiePromise(fn) {\n        if (typeof this !== 'object')\n            throw new TypeError('Promises must be constructed via new');\n        this._listeners = [];\n        this.onuncatched = nop;\n        this._lib = false;\n        var psd = (this._PSD = PSD);\n        if (debug) {\n            this._stackHolder = getErrorWithStack();\n            this._prev = null;\n            this._numPrev = 0;\n        }\n        if (typeof fn !== 'function') {\n            if (fn !== INTERNAL)\n                throw new TypeError('Not a function');\n            this._state = arguments[1];\n            this._value = arguments[2];\n            if (this._state === false)\n                handleRejection(this, this._value);\n            return;\n        }\n        this._state = null;\n        this._value = null;\n        ++psd.ref;\n        executePromiseTask(this, fn);\n    }\n    var thenProp = {\n        get: function () {\n            var psd = PSD, microTaskId = totalEchoes;\n            function then(onFulfilled, onRejected) {\n                var _this = this;\n                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n                var cleanup = possibleAwait && !decrementExpectedAwaits();\n                var rv = new DexiePromise(function (resolve, reject) {\n                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n                });\n                debug && linkToPreviousPromise(rv, this);\n                return rv;\n            }\n            then.prototype = INTERNAL;\n            return then;\n        },\n        set: function (value) {\n            setProp(this, 'then', value && value.prototype === INTERNAL ?\n                thenProp :\n                {\n                    get: function () {\n                        return value;\n                    },\n                    set: thenProp.set\n                });\n        }\n    };\n    props(DexiePromise.prototype, {\n        then: thenProp,\n        _then: function (onFulfilled, onRejected) {\n            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n        },\n        catch: function (onRejected) {\n            if (arguments.length === 1)\n                return this.then(null, onRejected);\n            var type = arguments[0], handler = arguments[1];\n            return typeof type === 'function' ? this.then(null, function (err) {\n                return err instanceof type ? handler(err) : PromiseReject(err);\n            })\n                : this.then(null, function (err) {\n                    return err && err.name === type ? handler(err) : PromiseReject(err);\n                });\n        },\n        finally: function (onFinally) {\n            return this.then(function (value) {\n                onFinally();\n                return value;\n            }, function (err) {\n                onFinally();\n                return PromiseReject(err);\n            });\n        },\n        stack: {\n            get: function () {\n                if (this._stack)\n                    return this._stack;\n                try {\n                    stack_being_generated = true;\n                    var stacks = getStack(this, [], MAX_LONG_STACKS);\n                    var stack = stacks.join(\"\\nFrom previous: \");\n                    if (this._state !== null)\n                        this._stack = stack;\n                    return stack;\n                }\n                finally {\n                    stack_being_generated = false;\n                }\n            }\n        },\n        timeout: function (ms, msg) {\n            var _this = this;\n            return ms < Infinity ?\n                new DexiePromise(function (resolve, reject) {\n                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n                }) : this;\n        }\n    });\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\n    globalPSD.env = snapShot();\n    function Listener(onFulfilled, onRejected, resolve, reject, zone) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.psd = zone;\n    }\n    props(DexiePromise, {\n        all: function () {\n            var values = getArrayOf.apply(null, arguments)\n                .map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (values.length === 0)\n                    resolve([]);\n                var remaining = values.length;\n                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (!--remaining)\n                        resolve(values);\n                }, reject); });\n            });\n        },\n        resolve: function (value) {\n            if (value instanceof DexiePromise)\n                return value;\n            if (value && typeof value.then === 'function')\n                return new DexiePromise(function (resolve, reject) {\n                    value.then(resolve, reject);\n                });\n            var rv = new DexiePromise(INTERNAL, true, value);\n            linkToPreviousPromise(rv, currentFulfiller);\n            return rv;\n        },\n        reject: PromiseReject,\n        race: function () {\n            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n            });\n        },\n        PSD: {\n            get: function () { return PSD; },\n            set: function (value) { return PSD = value; }\n        },\n        totalEchoes: { get: function () { return totalEchoes; } },\n        newPSD: newScope,\n        usePSD: usePSD,\n        scheduler: {\n            get: function () { return asap; },\n            set: function (value) { asap = value; }\n        },\n        rejectionMapper: {\n            get: function () { return rejectionMapper; },\n            set: function (value) { rejectionMapper = value; }\n        },\n        follow: function (fn, zoneProps) {\n            return new DexiePromise(function (resolve, reject) {\n                return newScope(function (resolve, reject) {\n                    var psd = PSD;\n                    psd.unhandleds = [];\n                    psd.onunhandled = reject;\n                    psd.finalize = callBoth(function () {\n                        var _this = this;\n                        run_at_end_of_this_or_next_physical_tick(function () {\n                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                        });\n                    }, psd.finalize);\n                    fn();\n                }, zoneProps, resolve, reject);\n            });\n        }\n    });\n    if (NativePromise) {\n        if (NativePromise.allSettled)\n            setProp(DexiePromise, \"allSettled\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve) {\n                    if (possiblePromises.length === 0)\n                        resolve([]);\n                    var remaining = possiblePromises.length;\n                    var results = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                        .then(function () { return --remaining || resolve(results); }); });\n                });\n            });\n        if (NativePromise.any && typeof AggregateError !== 'undefined')\n            setProp(DexiePromise, \"any\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve, reject) {\n                    if (possiblePromises.length === 0)\n                        reject(new AggregateError([]));\n                    var remaining = possiblePromises.length;\n                    var failures = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                        failures[i] = failure;\n                        if (!--remaining)\n                            reject(new AggregateError(failures));\n                    }); });\n                });\n            });\n    }\n    function executePromiseTask(promise, fn) {\n        try {\n            fn(function (value) {\n                if (promise._state !== null)\n                    return;\n                if (value === promise)\n                    throw new TypeError('A promise cannot be resolved with itself.');\n                var shouldExecuteTick = promise._lib && beginMicroTickScope();\n                if (value && typeof value.then === 'function') {\n                    executePromiseTask(promise, function (resolve, reject) {\n                        value instanceof DexiePromise ?\n                            value._then(resolve, reject) :\n                            value.then(resolve, reject);\n                    });\n                }\n                else {\n                    promise._state = true;\n                    promise._value = value;\n                    propagateAllListeners(promise);\n                }\n                if (shouldExecuteTick)\n                    endMicroTickScope();\n            }, handleRejection.bind(null, promise));\n        }\n        catch (ex) {\n            handleRejection(promise, ex);\n        }\n    }\n    function handleRejection(promise, reason) {\n        rejectingErrors.push(reason);\n        if (promise._state !== null)\n            return;\n        var shouldExecuteTick = promise._lib && beginMicroTickScope();\n        reason = rejectionMapper(reason);\n        promise._state = false;\n        promise._value = reason;\n        debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n            var origProp = getPropertyDescriptor(reason, \"stack\");\n            reason._promise = promise;\n            setProp(reason, \"stack\", {\n                get: function () {\n                    return stack_being_generated ?\n                        origProp && (origProp.get ?\n                            origProp.get.apply(reason) :\n                            origProp.value) :\n                        promise.stack;\n                }\n            });\n        });\n        addPossiblyUnhandledError(promise);\n        propagateAllListeners(promise);\n        if (shouldExecuteTick)\n            endMicroTickScope();\n    }\n    function propagateAllListeners(promise) {\n        var listeners = promise._listeners;\n        promise._listeners = [];\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            propagateToListener(promise, listeners[i]);\n        }\n        var psd = promise._PSD;\n        --psd.ref || psd.finalize();\n        if (numScheduledCalls === 0) {\n            ++numScheduledCalls;\n            asap(function () {\n                if (--numScheduledCalls === 0)\n                    finalizePhysicalTick();\n            }, []);\n        }\n    }\n    function propagateToListener(promise, listener) {\n        if (promise._state === null) {\n            promise._listeners.push(listener);\n            return;\n        }\n        var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n        if (cb === null) {\n            return (promise._state ? listener.resolve : listener.reject)(promise._value);\n        }\n        ++listener.psd.ref;\n        ++numScheduledCalls;\n        asap(callListener, [cb, promise, listener]);\n    }\n    function callListener(cb, promise, listener) {\n        try {\n            currentFulfiller = promise;\n            var ret, value = promise._value;\n            if (promise._state) {\n                ret = cb(value);\n            }\n            else {\n                if (rejectingErrors.length)\n                    rejectingErrors = [];\n                ret = cb(value);\n                if (rejectingErrors.indexOf(value) === -1)\n                    markErrorAsHandled(promise);\n            }\n            listener.resolve(ret);\n        }\n        catch (e) {\n            listener.reject(e);\n        }\n        finally {\n            currentFulfiller = null;\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n            --listener.psd.ref || listener.psd.finalize();\n        }\n    }\n    function getStack(promise, stacks, limit) {\n        if (stacks.length === limit)\n            return stacks;\n        var stack = \"\";\n        if (promise._state === false) {\n            var failure = promise._value, errorName, message;\n            if (failure != null) {\n                errorName = failure.name || \"Error\";\n                message = failure.message || failure;\n                stack = prettyStack(failure, 0);\n            }\n            else {\n                errorName = failure;\n                message = \"\";\n            }\n            stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n        }\n        if (debug) {\n            stack = prettyStack(promise._stackHolder, 2);\n            if (stack && stacks.indexOf(stack) === -1)\n                stacks.push(stack);\n            if (promise._prev)\n                getStack(promise._prev, stacks, limit);\n        }\n        return stacks;\n    }\n    function linkToPreviousPromise(promise, prev) {\n        var numPrev = prev ? prev._numPrev + 1 : 0;\n        if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n            promise._prev = prev;\n            promise._numPrev = numPrev;\n        }\n    }\n    function physicalTick() {\n        beginMicroTickScope() && endMicroTickScope();\n    }\n    function beginMicroTickScope() {\n        var wasRootExec = isOutsideMicroTick;\n        isOutsideMicroTick = false;\n        needsNewPhysicalTick = false;\n        return wasRootExec;\n    }\n    function endMicroTickScope() {\n        var callbacks, i, l;\n        do {\n            while (microtickQueue.length > 0) {\n                callbacks = microtickQueue;\n                microtickQueue = [];\n                l = callbacks.length;\n                for (i = 0; i < l; ++i) {\n                    var item = callbacks[i];\n                    item[0].apply(null, item[1]);\n                }\n            }\n        } while (microtickQueue.length > 0);\n        isOutsideMicroTick = true;\n        needsNewPhysicalTick = true;\n    }\n    function finalizePhysicalTick() {\n        var unhandledErrs = unhandledErrors;\n        unhandledErrors = [];\n        unhandledErrs.forEach(function (p) {\n            p._PSD.onunhandled.call(null, p._value, p);\n        });\n        var finalizers = tickFinalizers.slice(0);\n        var i = finalizers.length;\n        while (i)\n            finalizers[--i]();\n    }\n    function run_at_end_of_this_or_next_physical_tick(fn) {\n        function finalizer() {\n            fn();\n            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n        }\n        tickFinalizers.push(finalizer);\n        ++numScheduledCalls;\n        asap(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n    function addPossiblyUnhandledError(promise) {\n        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n            unhandledErrors.push(promise);\n    }\n    function markErrorAsHandled(promise) {\n        var i = unhandledErrors.length;\n        while (i)\n            if (unhandledErrors[--i]._value === promise._value) {\n                unhandledErrors.splice(i, 1);\n                return;\n            }\n    }\n    function PromiseReject(reason) {\n        return new DexiePromise(INTERNAL, false, reason);\n    }\n    function wrap(fn, errorCatcher) {\n        var psd = PSD;\n        return function () {\n            var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n            try {\n                switchToZone(psd, true);\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                errorCatcher && errorCatcher(e);\n            }\n            finally {\n                switchToZone(outerScope, false);\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n    }\n    var task = { awaits: 0, echoes: 0, id: 0 };\n    var taskCounter = 0;\n    var zoneStack = [];\n    var zoneEchoes = 0;\n    var totalEchoes = 0;\n    var zone_id_counter = 0;\n    function newScope(fn, props, a1, a2) {\n        var parent = PSD, psd = Object.create(parent);\n        psd.parent = parent;\n        psd.ref = 0;\n        psd.global = false;\n        psd.id = ++zone_id_counter;\n        var globalEnv = globalPSD.env;\n        psd.env = patchGlobalPromise ? {\n            Promise: DexiePromise,\n            PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n            all: DexiePromise.all,\n            race: DexiePromise.race,\n            allSettled: DexiePromise.allSettled,\n            any: DexiePromise.any,\n            resolve: DexiePromise.resolve,\n            reject: DexiePromise.reject,\n            nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n            gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n        } : {};\n        if (props)\n            extend(psd, props);\n        ++parent.ref;\n        psd.finalize = function () {\n            --this.parent.ref || this.parent.finalize();\n        };\n        var rv = usePSD(psd, fn, a1, a2);\n        if (psd.ref === 0)\n            psd.finalize();\n        return rv;\n    }\n    function incrementExpectedAwaits() {\n        if (!task.id)\n            task.id = ++taskCounter;\n        ++task.awaits;\n        task.echoes += ZONE_ECHO_LIMIT;\n        return task.id;\n    }\n    function decrementExpectedAwaits() {\n        if (!task.awaits)\n            return false;\n        if (--task.awaits === 0)\n            task.id = 0;\n        task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n        return true;\n    }\n    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n        incrementExpectedAwaits = decrementExpectedAwaits = nop;\n    }\n    function onPossibleParallellAsync(possiblePromise) {\n        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n            incrementExpectedAwaits();\n            return possiblePromise.then(function (x) {\n                decrementExpectedAwaits();\n                return x;\n            }, function (e) {\n                decrementExpectedAwaits();\n                return rejection(e);\n            });\n        }\n        return possiblePromise;\n    }\n    function zoneEnterEcho(targetZone) {\n        ++totalEchoes;\n        if (!task.echoes || --task.echoes === 0) {\n            task.echoes = task.id = 0;\n        }\n        zoneStack.push(PSD);\n        switchToZone(targetZone, true);\n    }\n    function zoneLeaveEcho() {\n        var zone = zoneStack[zoneStack.length - 1];\n        zoneStack.pop();\n        switchToZone(zone, false);\n    }\n    function switchToZone(targetZone, bEnteringZone) {\n        var currentZone = PSD;\n        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n            enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n        }\n        if (targetZone === PSD)\n            return;\n        PSD = targetZone;\n        if (currentZone === globalPSD)\n            globalPSD.env = snapShot();\n        if (patchGlobalPromise) {\n            var GlobalPromise_1 = globalPSD.env.Promise;\n            var targetEnv = targetZone.env;\n            nativePromiseProto.then = targetEnv.nthen;\n            GlobalPromise_1.prototype.then = targetEnv.gthen;\n            if (currentZone.global || targetZone.global) {\n                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n                GlobalPromise_1.all = targetEnv.all;\n                GlobalPromise_1.race = targetEnv.race;\n                GlobalPromise_1.resolve = targetEnv.resolve;\n                GlobalPromise_1.reject = targetEnv.reject;\n                if (targetEnv.allSettled)\n                    GlobalPromise_1.allSettled = targetEnv.allSettled;\n                if (targetEnv.any)\n                    GlobalPromise_1.any = targetEnv.any;\n            }\n        }\n    }\n    function snapShot() {\n        var GlobalPromise = _global.Promise;\n        return patchGlobalPromise ? {\n            Promise: GlobalPromise,\n            PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n            all: GlobalPromise.all,\n            race: GlobalPromise.race,\n            allSettled: GlobalPromise.allSettled,\n            any: GlobalPromise.any,\n            resolve: GlobalPromise.resolve,\n            reject: GlobalPromise.reject,\n            nthen: nativePromiseProto.then,\n            gthen: GlobalPromise.prototype.then\n        } : {};\n    }\n    function usePSD(psd, fn, a1, a2, a3) {\n        var outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn(a1, a2, a3);\n        }\n        finally {\n            switchToZone(outerScope, false);\n        }\n    }\n    function enqueueNativeMicroTask(job) {\n        nativePromiseThen.call(resolvedNativePromise, job);\n    }\n    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n        return typeof fn !== 'function' ? fn : function () {\n            var outerZone = PSD;\n            if (possibleAwait)\n                incrementExpectedAwaits();\n            switchToZone(zone, true);\n            try {\n                return fn.apply(this, arguments);\n            }\n            finally {\n                switchToZone(outerZone, false);\n                if (cleanup)\n                    enqueueNativeMicroTask(decrementExpectedAwaits);\n            }\n        };\n    }\n    function getPatchedPromiseThen(origThen, zone) {\n        return function (onResolved, onRejected) {\n            return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n        };\n    }\n    var UNHANDLEDREJECTION = \"unhandledrejection\";\n    function globalError(err, promise) {\n        var rv;\n        try {\n            rv = promise.onuncatched(err);\n        }\n        catch (e) { }\n        if (rv !== false)\n            try {\n                var event, eventData = { promise: promise, reason: err };\n                if (_global.document && document.createEvent) {\n                    event = document.createEvent('Event');\n                    event.initEvent(UNHANDLEDREJECTION, true, true);\n                    extend(event, eventData);\n                }\n                else if (_global.CustomEvent) {\n                    event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                    extend(event, eventData);\n                }\n                if (event && _global.dispatchEvent) {\n                    dispatchEvent(event);\n                    if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                        try {\n                            _global.onunhandledrejection(event);\n                        }\n                        catch (_) { }\n                }\n                if (debug && event && !event.defaultPrevented) {\n                    console.warn(\"Unhandled rejection: \" + (err.stack || err));\n                }\n            }\n            catch (e) { }\n    }\n    var rejection = DexiePromise.reject;\n\n    function tempTransaction(db, mode, storeNames, fn) {\n        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n            if (db._state.openComplete) {\n                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n            }\n            if (!db._state.isBeingOpened) {\n                if (!db._options.autoOpen)\n                    return rejection(new exceptions.DatabaseClosed());\n                db.open().catch(nop);\n            }\n            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n        }\n        else {\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db._close();\n                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n                }\n                return rejection(ex);\n            }\n            return trans._promise(mode, function (resolve, reject) {\n                return newScope(function () {\n                    PSD.trans = trans;\n                    return fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                return trans._completion.then(function () { return result; });\n            });\n        }\n    }\n\n    var DEXIE_VERSION = '3.2.4';\n    var maxString = String.fromCharCode(65535);\n    var minKey = -Infinity;\n    var INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\n    var STRING_EXPECTED = \"String expected.\";\n    var connections = [];\n    var isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\n    var hasIEDeleteObjectStoreBug = isIEOrEdge;\n    var hangsOnDeleteLargeKeyRange = isIEOrEdge;\n    var dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\n    var DBNAMES_DB = '__dbnames';\n    var READONLY = 'readonly';\n    var READWRITE = 'readwrite';\n\n    function combine(filter1, filter2) {\n        return filter1 ?\n            filter2 ?\n                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n                filter1 :\n            filter2;\n    }\n\n    var AnyRange = {\n        type: 3 ,\n        lower: -Infinity,\n        lowerOpen: false,\n        upper: [[]],\n        upperOpen: false\n    };\n\n    function workaroundForUndefinedPrimKey(keyPath) {\n        return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n            ? function (obj) {\n                if (obj[keyPath] === undefined && (keyPath in obj)) {\n                    obj = deepClone(obj);\n                    delete obj[keyPath];\n                }\n                return obj;\n            }\n            : function (obj) { return obj; };\n    }\n\n    var Table =  (function () {\n        function Table() {\n        }\n        Table.prototype._trans = function (mode, fn, writeLocked) {\n            var trans = this._tx || PSD.trans;\n            var tableName = this.name;\n            function checkTableInTransaction(resolve, reject, trans) {\n                if (!trans.schema[tableName])\n                    throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n                return fn(trans.idbtrans, trans);\n            }\n            var wasRootExec = beginMicroTickScope();\n            try {\n                return trans && trans.db === this.db ?\n                    trans === PSD.trans ?\n                        trans._promise(mode, checkTableInTransaction, writeLocked) :\n                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n            }\n            finally {\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n        Table.prototype.get = function (keyOrCrit, cb) {\n            var _this = this;\n            if (keyOrCrit && keyOrCrit.constructor === Object)\n                return this.where(keyOrCrit).first(cb);\n            return this._trans('readonly', function (trans) {\n                return _this.core.get({ trans: trans, key: keyOrCrit })\n                    .then(function (res) { return _this.hook.reading.fire(res); });\n            }).then(cb);\n        };\n        Table.prototype.where = function (indexOrCrit) {\n            if (typeof indexOrCrit === 'string')\n                return new this.db.WhereClause(this, indexOrCrit);\n            if (isArray(indexOrCrit))\n                return new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n            var keyPaths = keys(indexOrCrit);\n            if (keyPaths.length === 1)\n                return this\n                    .where(keyPaths[0])\n                    .equals(indexOrCrit[keyPaths[0]]);\n            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n                return ix.compound &&\n                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n                    ix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n            })[0];\n            if (compoundIndex && this.db._maxKey !== maxString)\n                return this\n                    .where(compoundIndex.name)\n                    .equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n            if (!compoundIndex && debug)\n                console.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n                    (\"compound index [\" + keyPaths.join('+') + \"]\"));\n            var idxByName = this.schema.idxByName;\n            var idb = this.db._deps.indexedDB;\n            function equals(a, b) {\n                try {\n                    return idb.cmp(a, b) === 0;\n                }\n                catch (e) {\n                    return false;\n                }\n            }\n            var _a = keyPaths.reduce(function (_a, keyPath) {\n                var prevIndex = _a[0], prevFilterFn = _a[1];\n                var index = idxByName[keyPath];\n                var value = indexOrCrit[keyPath];\n                return [\n                    prevIndex || index,\n                    prevIndex || !index ?\n                        combine(prevFilterFn, index && index.multi ?\n                            function (x) {\n                                var prop = getByKeyPath(x, keyPath);\n                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                        : prevFilterFn\n                ];\n            }, [null, null]), idx = _a[0], filterFunction = _a[1];\n            return idx ?\n                this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                    .filter(filterFunction) :\n                compoundIndex ?\n                    this.filter(filterFunction) :\n                    this.where(keyPaths).equals('');\n        };\n        Table.prototype.filter = function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        };\n        Table.prototype.count = function (thenShortcut) {\n            return this.toCollection().count(thenShortcut);\n        };\n        Table.prototype.offset = function (offset) {\n            return this.toCollection().offset(offset);\n        };\n        Table.prototype.limit = function (numRows) {\n            return this.toCollection().limit(numRows);\n        };\n        Table.prototype.each = function (callback) {\n            return this.toCollection().each(callback);\n        };\n        Table.prototype.toArray = function (thenShortcut) {\n            return this.toCollection().toArray(thenShortcut);\n        };\n        Table.prototype.toCollection = function () {\n            return new this.db.Collection(new this.db.WhereClause(this));\n        };\n        Table.prototype.orderBy = function (index) {\n            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n                \"[\" + index.join('+') + \"]\" :\n                index));\n        };\n        Table.prototype.reverse = function () {\n            return this.toCollection().reverse();\n        };\n        Table.prototype.mapToClass = function (constructor) {\n            this.schema.mappedClass = constructor;\n            var readHook = function (obj) {\n                if (!obj)\n                    return obj;\n                var res = Object.create(constructor.prototype);\n                for (var m in obj)\n                    if (hasOwn(obj, m))\n                        try {\n                            res[m] = obj[m];\n                        }\n                        catch (_) { }\n                return res;\n            };\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        };\n        Table.prototype.defineClass = function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return this.mapToClass(Class);\n        };\n        Table.prototype.add = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.update = function (keyOrObject, modifications) {\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined)\n                    return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n                try {\n                    if (typeof modifications !== \"function\") {\n                        keys(modifications).forEach(function (keyPath) {\n                            setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                        });\n                    }\n                    else {\n                        modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                    }\n                }\n                catch (_a) {\n                }\n                return this.where(\":id\").equals(key).modify(modifications);\n            }\n            else {\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        };\n        Table.prototype.put = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.delete = function (key) {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.clear = function () {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.bulkGet = function (keys) {\n            var _this = this;\n            return this._trans('readonly', function (trans) {\n                return _this.core.getMany({\n                    keys: keys,\n                    trans: trans\n                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n            });\n        };\n        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToAdd = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToPut = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkDelete = function (keys) {\n            var _this = this;\n            var numKeys = keys.length;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys });\n            }).then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + numKeys + \" operations failed\", failures);\n            });\n        };\n        return Table;\n    }());\n\n    function Events(ctx) {\n        var evs = {};\n        var rv = function (eventName, subscriber) {\n            if (subscriber) {\n                var i = arguments.length, args = new Array(i - 1);\n                while (--i)\n                    args[i - 1] = arguments[i];\n                evs[eventName].subscribe.apply(null, args);\n                return ctx;\n            }\n            else if (typeof (eventName) === 'string') {\n                return evs[eventName];\n            }\n        };\n        rv.addEventType = add;\n        for (var i = 1, l = arguments.length; i < l; ++i) {\n            add(arguments[i]);\n        }\n        return rv;\n        function add(eventName, chainFunction, defaultFunction) {\n            if (typeof eventName === 'object')\n                return addConfiguredEvents(eventName);\n            if (!chainFunction)\n                chainFunction = reverseStoppableEventChain;\n            if (!defaultFunction)\n                defaultFunction = nop;\n            var context = {\n                subscribers: [],\n                fire: defaultFunction,\n                subscribe: function (cb) {\n                    if (context.subscribers.indexOf(cb) === -1) {\n                        context.subscribers.push(cb);\n                        context.fire = chainFunction(context.fire, cb);\n                    }\n                },\n                unsubscribe: function (cb) {\n                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n                }\n            };\n            evs[eventName] = rv[eventName] = context;\n            return context;\n        }\n        function addConfiguredEvents(cfg) {\n            keys(cfg).forEach(function (eventName) {\n                var args = cfg[eventName];\n                if (isArray(args)) {\n                    add(eventName, cfg[eventName][0], cfg[eventName][1]);\n                }\n                else if (args === 'asap') {\n                    var context = add(eventName, mirror, function fire() {\n                        var i = arguments.length, args = new Array(i);\n                        while (i--)\n                            args[i] = arguments[i];\n                        context.subscribers.forEach(function (fn) {\n                            asap$1(function fireEvent() {\n                                fn.apply(null, args);\n                            });\n                        });\n                    });\n                }\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid event config\");\n            });\n        }\n    }\n\n    function makeClassConstructor(prototype, constructor) {\n        derive(constructor).from({ prototype: prototype });\n        return constructor;\n    }\n\n    function createTableConstructor(db) {\n        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n            this.db = db;\n            this._tx = trans;\n            this.name = name;\n            this.schema = tableSchema;\n            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n                \"creating\": [hookCreatingChain, nop],\n                \"reading\": [pureFunctionChain, mirror],\n                \"updating\": [hookUpdatingChain, nop],\n                \"deleting\": [hookDeletingChain, nop]\n            });\n        });\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) &&\n            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n    function addFilter(ctx, fn) {\n        ctx.filter = combine(ctx.filter, fn);\n    }\n    function addReplayFilter(ctx, factory, isLimitFilter) {\n        var curr = ctx.replayFilter;\n        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n        ctx.justLimit = isLimitFilter && !curr;\n    }\n    function addMatchFilter(ctx, fn) {\n        ctx.isMatch = combine(ctx.isMatch, fn);\n    }\n    function getIndexOrStore(ctx, coreSchema) {\n        if (ctx.isPrimKey)\n            return coreSchema.primaryKey;\n        var index = coreSchema.getIndexByKeyPath(ctx.index);\n        if (!index)\n            throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n        return index;\n    }\n    function openCursor(ctx, coreTable, trans) {\n        var index = getIndexOrStore(ctx, coreTable.schema);\n        return coreTable.openCursor({\n            trans: trans,\n            values: !ctx.keysOnly,\n            reverse: ctx.dir === 'prev',\n            unique: !!ctx.unique,\n            query: {\n                index: index,\n                range: ctx.range\n            }\n        });\n    }\n    function iter(ctx, fn, coreTrans, coreTable) {\n        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n        if (!ctx.or) {\n            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n        }\n        else {\n            var set_1 = {};\n            var union = function (item, cursor, advance) {\n                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                    var primaryKey = cursor.primaryKey;\n                    var key = '' + primaryKey;\n                    if (key === '[object ArrayBuffer]')\n                        key = '' + new Uint8Array(primaryKey);\n                    if (!hasOwn(set_1, key)) {\n                        set_1[key] = true;\n                        fn(item, cursor, advance);\n                    }\n                }\n            };\n            return Promise.all([\n                ctx.or._iterate(union, coreTrans),\n                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n            ]);\n        }\n    }\n    function iterate(cursorPromise, filter, fn, valueMapper) {\n        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n        var wrappedFn = wrap(mappedFn);\n        return cursorPromise.then(function (cursor) {\n            if (cursor) {\n                return cursor.start(function () {\n                    var c = function () { return cursor.continue(); };\n                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                    c();\n                });\n            }\n        });\n    }\n\n    function cmp(a, b) {\n        try {\n            var ta = type(a);\n            var tb = type(b);\n            if (ta !== tb) {\n                if (ta === 'Array')\n                    return 1;\n                if (tb === 'Array')\n                    return -1;\n                if (ta === 'binary')\n                    return 1;\n                if (tb === 'binary')\n                    return -1;\n                if (ta === 'string')\n                    return 1;\n                if (tb === 'string')\n                    return -1;\n                if (ta === 'Date')\n                    return 1;\n                if (tb !== 'Date')\n                    return NaN;\n                return -1;\n            }\n            switch (ta) {\n                case 'number':\n                case 'Date':\n                case 'string':\n                    return a > b ? 1 : a < b ? -1 : 0;\n                case 'binary': {\n                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n                }\n                case 'Array':\n                    return compareArrays(a, b);\n            }\n        }\n        catch (_a) { }\n        return NaN;\n    }\n    function compareArrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            var res = cmp(a[i], b[i]);\n            if (res !== 0)\n                return res;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function compareUint8Arrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            if (a[i] !== b[i])\n                return a[i] < b[i] ? -1 : 1;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function type(x) {\n        var t = typeof x;\n        if (t !== 'object')\n            return t;\n        if (ArrayBuffer.isView(x))\n            return 'binary';\n        var tsTag = toStringTag(x);\n        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n    }\n    function getUint8Array(a) {\n        if (a instanceof Uint8Array)\n            return a;\n        if (ArrayBuffer.isView(a))\n            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n        return new Uint8Array(a);\n    }\n\n    var Collection =  (function () {\n        function Collection() {\n        }\n        Collection.prototype._read = function (fn, cb) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readonly', fn).then(cb);\n        };\n        Collection.prototype._write = function (fn) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readwrite', fn, \"locked\");\n        };\n        Collection.prototype._addAlgorithm = function (fn) {\n            var ctx = this._ctx;\n            ctx.algorithm = combine(ctx.algorithm, fn);\n        };\n        Collection.prototype._iterate = function (fn, coreTrans) {\n            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n        };\n        Collection.prototype.clone = function (props) {\n            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n            if (props)\n                extend(ctx, props);\n            rv._ctx = ctx;\n            return rv;\n        };\n        Collection.prototype.raw = function () {\n            this._ctx.valueMapper = null;\n            return this;\n        };\n        Collection.prototype.each = function (fn) {\n            var ctx = this._ctx;\n            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n        };\n        Collection.prototype.count = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                var coreTable = ctx.table.core;\n                if (isPlainKeyRange(ctx, true)) {\n                    return coreTable.count({\n                        trans: trans,\n                        query: {\n                            index: getIndexOrStore(ctx, coreTable.schema),\n                            range: ctx.range\n                        }\n                    }).then(function (count) { return Math.min(count, ctx.limit); });\n                }\n                else {\n                    var count = 0;\n                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                        .then(function () { return count; });\n                }\n            }).then(cb);\n        };\n        Collection.prototype.sortBy = function (keyPath, cb) {\n            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n            function getval(obj, i) {\n                if (i)\n                    return getval(obj[parts[i]], i - 1);\n                return obj[lastPart];\n            }\n            var order = this._ctx.dir === \"next\" ? 1 : -1;\n            function sorter(a, b) {\n                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n                return aVal < bVal ? -order : aVal > bVal ? order : 0;\n            }\n            return this.toArray(function (a) {\n                return a.sort(sorter);\n            }).then(cb);\n        };\n        Collection.prototype.toArray = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    var valueMapper_1 = ctx.valueMapper;\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        limit: ctx.limit,\n                        values: true,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    }).then(function (_a) {\n                        var result = _a.result;\n                        return valueMapper_1 ? result.map(valueMapper_1) : result;\n                    });\n                }\n                else {\n                    var a_1 = [];\n                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n                }\n            }, cb);\n        };\n        Collection.prototype.offset = function (offset) {\n            var ctx = this._ctx;\n            if (offset <= 0)\n                return this;\n            ctx.offset += offset;\n            if (isPlainKeyRange(ctx)) {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function (cursor, advance) {\n                        if (offsetLeft === 0)\n                            return true;\n                        if (offsetLeft === 1) {\n                            --offsetLeft;\n                            return false;\n                        }\n                        advance(function () {\n                            cursor.advance(offsetLeft);\n                            offsetLeft = 0;\n                        });\n                        return false;\n                    };\n                });\n            }\n            else {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function () { return (--offsetLeft < 0); };\n                });\n            }\n            return this;\n        };\n        Collection.prototype.limit = function (numRows) {\n            this._ctx.limit = Math.min(this._ctx.limit, numRows);\n            addReplayFilter(this._ctx, function () {\n                var rowsLeft = numRows;\n                return function (cursor, advance, resolve) {\n                    if (--rowsLeft <= 0)\n                        advance(resolve);\n                    return rowsLeft >= 0;\n                };\n            }, true);\n            return this;\n        };\n        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n            addFilter(this._ctx, function (cursor, advance, resolve) {\n                if (filterFunction(cursor.value)) {\n                    advance(resolve);\n                    return bIncludeStopEntry;\n                }\n                else {\n                    return true;\n                }\n            });\n            return this;\n        };\n        Collection.prototype.first = function (cb) {\n            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.last = function (cb) {\n            return this.reverse().first(cb);\n        };\n        Collection.prototype.filter = function (filterFunction) {\n            addFilter(this._ctx, function (cursor) {\n                return filterFunction(cursor.value);\n            });\n            addMatchFilter(this._ctx, filterFunction);\n            return this;\n        };\n        Collection.prototype.and = function (filter) {\n            return this.filter(filter);\n        };\n        Collection.prototype.or = function (indexName) {\n            return new this.db.WhereClause(this._ctx.table, indexName, this);\n        };\n        Collection.prototype.reverse = function () {\n            this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n            if (this._ondirectionchange)\n                this._ondirectionchange(this._ctx.dir);\n            return this;\n        };\n        Collection.prototype.desc = function () {\n            return this.reverse();\n        };\n        Collection.prototype.eachKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n        };\n        Collection.prototype.eachUniqueKey = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.eachKey(cb);\n        };\n        Collection.prototype.eachPrimaryKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n        };\n        Collection.prototype.keys = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.key);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.primaryKeys = function (cb) {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                return this._read(function (trans) {\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        values: false,\n                        limit: ctx.limit,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    });\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return result;\n                }).then(cb);\n            }\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.primaryKey);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.uniqueKeys = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.keys(cb);\n        };\n        Collection.prototype.firstKey = function (cb) {\n            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.lastKey = function (cb) {\n            return this.reverse().firstKey(cb);\n        };\n        Collection.prototype.distinct = function () {\n            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n            if (!idx || !idx.multi)\n                return this;\n            var set = {};\n            addFilter(this._ctx, function (cursor) {\n                var strKey = cursor.primaryKey.toString();\n                var found = hasOwn(set, strKey);\n                set[strKey] = true;\n                return !found;\n            });\n            return this;\n        };\n        Collection.prototype.modify = function (changes) {\n            var _this = this;\n            var ctx = this._ctx;\n            return this._write(function (trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    modifyer = changes;\n                }\n                else {\n                    var keyPaths = keys(changes);\n                    var numKeys = keyPaths.length;\n                    modifyer = function (item) {\n                        var anythingModified = false;\n                        for (var i = 0; i < numKeys; ++i) {\n                            var keyPath = keyPaths[i], val = changes[keyPath];\n                            if (getByKeyPath(item, keyPath) !== val) {\n                                setByKeyPath(item, keyPath, val);\n                                anythingModified = true;\n                            }\n                        }\n                        return anythingModified;\n                    };\n                }\n                var coreTable = ctx.table.core;\n                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n                var limit = _this.db._options.modifyChunkSize || 200;\n                var totalFailures = [];\n                var successCount = 0;\n                var failedKeys = [];\n                var applyMutateResult = function (expectedCount, res) {\n                    var failures = res.failures, numFailures = res.numFailures;\n                    successCount += expectedCount - numFailures;\n                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                        var pos = _a[_i];\n                        totalFailures.push(failures[pos]);\n                    }\n                };\n                return _this.clone().primaryKeys().then(function (keys) {\n                    var nextChunk = function (offset) {\n                        var count = Math.min(limit, keys.length - offset);\n                        return coreTable.getMany({\n                            trans: trans,\n                            keys: keys.slice(offset, offset + count),\n                            cache: \"immutable\"\n                        }).then(function (values) {\n                            var addValues = [];\n                            var putValues = [];\n                            var putKeys = outbound ? [] : null;\n                            var deleteKeys = [];\n                            for (var i = 0; i < count; ++i) {\n                                var origValue = values[i];\n                                var ctx_1 = {\n                                    value: deepClone(origValue),\n                                    primKey: keys[offset + i]\n                                };\n                                if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                    if (ctx_1.value == null) {\n                                        deleteKeys.push(keys[offset + i]);\n                                    }\n                                    else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                        deleteKeys.push(keys[offset + i]);\n                                        addValues.push(ctx_1.value);\n                                    }\n                                    else {\n                                        putValues.push(ctx_1.value);\n                                        if (outbound)\n                                            putKeys.push(keys[offset + i]);\n                                    }\n                                }\n                            }\n                            var criteria = isPlainKeyRange(ctx) &&\n                                ctx.limit === Infinity &&\n                                (typeof changes !== 'function' || changes === deleteCallback) && {\n                                index: ctx.index,\n                                range: ctx.range\n                            };\n                            return Promise.resolve(addValues.length > 0 &&\n                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                    .then(function (res) {\n                                    for (var pos in res.failures) {\n                                        deleteKeys.splice(parseInt(pos), 1);\n                                    }\n                                    applyMutateResult(addValues.length, res);\n                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'put',\n                                    keys: putKeys,\n                                    values: putValues,\n                                    criteria: criteria,\n                                    changeSpec: typeof changes !== 'function'\n                                        && changes\n                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'delete',\n                                    keys: deleteKeys,\n                                    criteria: criteria\n                                }).then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                                return keys.length > offset + count && nextChunk(offset + limit);\n                            });\n                        });\n                    };\n                    return nextChunk(0).then(function () {\n                        if (totalFailures.length > 0)\n                            throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                        return keys.length;\n                    });\n                });\n            });\n        };\n        Collection.prototype.delete = function () {\n            var ctx = this._ctx, range = ctx.range;\n            if (isPlainKeyRange(ctx) &&\n                ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n             {\n                return this._write(function (trans) {\n                    var primaryKey = ctx.table.core.schema.primaryKey;\n                    var coreRange = range;\n                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                            .then(function (_a) {\n                            var failures = _a.failures; _a.lastResult; _a.results; var numFailures = _a.numFailures;\n                            if (numFailures)\n                                throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                            return count - numFailures;\n                        });\n                    });\n                });\n            }\n            return this.modify(deleteCallback);\n        };\n        return Collection;\n    }());\n    var deleteCallback = function (value, ctx) { return ctx.value = null; };\n\n    function createCollectionConstructor(db) {\n        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n            this.db = db;\n            var keyRange = AnyRange, error = null;\n            if (keyRangeGenerator)\n                try {\n                    keyRange = keyRangeGenerator();\n                }\n                catch (ex) {\n                    error = ex;\n                }\n            var whereCtx = whereClause._ctx;\n            var table = whereCtx.table;\n            var readingHook = table.hook.reading.fire;\n            this._ctx = {\n                table: table,\n                index: whereCtx.index,\n                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n                range: keyRange,\n                keysOnly: false,\n                dir: \"next\",\n                unique: \"\",\n                algorithm: null,\n                filter: null,\n                replayFilter: null,\n                justLimit: true,\n                isMatch: null,\n                offset: 0,\n                limit: Infinity,\n                error: error,\n                or: whereCtx.or,\n                valueMapper: readingHook !== mirror ? readingHook : null\n            };\n        });\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function fail(collectionOrWhereClause, err, T) {\n        var collection = collectionOrWhereClause instanceof WhereClause ?\n            new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n            collectionOrWhereClause;\n        collection._ctx.error = T ? new T(err) : new TypeError(err);\n        return collection;\n    }\n    function emptyCollection(whereClause) {\n        return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n    }\n    function upperFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toUpperCase(); } :\n            function (s) { return s.toLowerCase(); };\n    }\n    function lowerFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toLowerCase(); } :\n            function (s) { return s.toUpperCase(); };\n    }\n    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n        var length = Math.min(key.length, lowerNeedle.length);\n        var llp = -1;\n        for (var i = 0; i < length; ++i) {\n            var lwrKeyChar = lowerKey[i];\n            if (lwrKeyChar !== lowerNeedle[i]) {\n                if (cmp(key[i], upperNeedle[i]) < 0)\n                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                if (cmp(key[i], lowerNeedle[i]) < 0)\n                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                if (llp >= 0)\n                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                return null;\n            }\n            if (cmp(key[i], lwrKeyChar) < 0)\n                llp = i;\n        }\n        if (length < lowerNeedle.length && dir === \"next\")\n            return key + upperNeedle.substr(key.length);\n        if (length < key.length && dir === \"prev\")\n            return key.substr(0, upperNeedle.length);\n        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n    }\n    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n        if (!needles.every(function (s) { return typeof s === 'string'; })) {\n            return fail(whereClause, STRING_EXPECTED);\n        }\n        function initDirection(dir) {\n            upper = upperFactory(dir);\n            lower = lowerFactory(dir);\n            compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n            var needleBounds = needles.map(function (needle) {\n                return { lower: lower(needle), upper: upper(needle) };\n            }).sort(function (a, b) {\n                return compare(a.lower, b.lower);\n            });\n            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n            direction = dir;\n            nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n        }\n        initDirection(\"next\");\n        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n        c._ondirectionchange = function (direction) {\n            initDirection(direction);\n        };\n        var firstPossibleNeedle = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            if (typeof key !== 'string')\n                return false;\n            var lowerKey = lower(key);\n            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                return true;\n            }\n            else {\n                var lowestPossibleCasing = null;\n                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                    if (casing === null && lowestPossibleCasing === null)\n                        firstPossibleNeedle = i + 1;\n                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                        lowestPossibleCasing = casing;\n                    }\n                }\n                if (lowestPossibleCasing !== null) {\n                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n                }\n                else {\n                    advance(resolve);\n                }\n                return false;\n            }\n        });\n        return c;\n    }\n    function createRange(lower, upper, lowerOpen, upperOpen) {\n        return {\n            type: 2 ,\n            lower: lower,\n            upper: upper,\n            lowerOpen: lowerOpen,\n            upperOpen: upperOpen\n        };\n    }\n    function rangeEqual(value) {\n        return {\n            type: 1 ,\n            lower: value,\n            upper: value\n        };\n    }\n\n    var WhereClause =  (function () {\n        function WhereClause() {\n        }\n        Object.defineProperty(WhereClause.prototype, \"Collection\", {\n            get: function () {\n                return this._ctx.table.db.Collection;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n            includeLower = includeLower !== false;\n            includeUpper = includeUpper === true;\n            try {\n                if ((this._cmp(lower, upper) > 0) ||\n                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                    return emptyCollection(this);\n                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n        };\n        WhereClause.prototype.equals = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return rangeEqual(value); });\n        };\n        WhereClause.prototype.above = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, true); });\n        };\n        WhereClause.prototype.aboveOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, false); });\n        };\n        WhereClause.prototype.below = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n        };\n        WhereClause.prototype.belowOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value); });\n        };\n        WhereClause.prototype.startsWith = function (str) {\n            if (typeof str !== 'string')\n                return fail(this, STRING_EXPECTED);\n            return this.between(str, str + maxString, true, true);\n        };\n        WhereClause.prototype.startsWithIgnoreCase = function (str) {\n            if (str === \"\")\n                return this.startsWith(str);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n        };\n        WhereClause.prototype.equalsIgnoreCase = function (str) {\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n        };\n        WhereClause.prototype.anyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n        };\n        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n        };\n        WhereClause.prototype.anyOf = function () {\n            var _this = this;\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            var compare = this._cmp;\n            try {\n                set.sort(compare);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n            c._ondirectionchange = function (direction) {\n                compare = (direction === \"next\" ?\n                    _this._ascending :\n                    _this._descending);\n                set.sort(compare);\n            };\n            var i = 0;\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (compare(key, set[i]) > 0) {\n                    ++i;\n                    if (i === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (compare(key, set[i]) === 0) {\n                    return true;\n                }\n                else {\n                    advance(function () { cursor.continue(set[i]); });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.notEqual = function (value) {\n            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.noneOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return new this.Collection(this);\n            try {\n                set.sort(this._ascending);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var ranges = set.reduce(function (res, val) { return res ?\n                res.concat([[res[res.length - 1][1], val]]) :\n                [[minKey, val]]; }, null);\n            ranges.push([set[set.length - 1], this.db._maxKey]);\n            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.inAnyRange = function (ranges, options) {\n            var _this = this;\n            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n            if (ranges.length === 0)\n                return emptyCollection(this);\n            if (!ranges.every(function (range) {\n                return range[0] !== undefined &&\n                    range[1] !== undefined &&\n                    ascending(range[0], range[1]) <= 0;\n            })) {\n                return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n            }\n            var includeLowers = !options || options.includeLowers !== false;\n            var includeUppers = options && options.includeUppers === true;\n            function addRange(ranges, newRange) {\n                var i = 0, l = ranges.length;\n                for (; i < l; ++i) {\n                    var range = ranges[i];\n                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                        range[0] = min(range[0], newRange[0]);\n                        range[1] = max(range[1], newRange[1]);\n                        break;\n                    }\n                }\n                if (i === l)\n                    ranges.push(newRange);\n                return ranges;\n            }\n            var sortDirection = ascending;\n            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n            var set;\n            try {\n                set = ranges.reduce(addRange, []);\n                set.sort(rangeSorter);\n            }\n            catch (ex) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var rangePos = 0;\n            var keyIsBeyondCurrentEntry = includeUppers ?\n                function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n                function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n            var keyIsBeforeCurrentEntry = includeLowers ?\n                function (key) { return descending(key, set[rangePos][0]) > 0; } :\n                function (key) { return descending(key, set[rangePos][0]) >= 0; };\n            function keyWithinCurrentRange(key) {\n                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n            }\n            var checkKey = keyIsBeyondCurrentEntry;\n            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n            c._ondirectionchange = function (direction) {\n                if (direction === \"next\") {\n                    checkKey = keyIsBeyondCurrentEntry;\n                    sortDirection = ascending;\n                }\n                else {\n                    checkKey = keyIsBeforeCurrentEntry;\n                    sortDirection = descending;\n                }\n                set.sort(rangeSorter);\n            };\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (checkKey(key)) {\n                    ++rangePos;\n                    if (rangePos === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (keyWithinCurrentRange(key)) {\n                    return true;\n                }\n                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                    return false;\n                }\n                else {\n                    advance(function () {\n                        if (sortDirection === ascending)\n                            cursor.continue(set[rangePos][0]);\n                        else\n                            cursor.continue(set[rangePos][1]);\n                    });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.startsWithAnyOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (!set.every(function (s) { return typeof s === 'string'; })) {\n                return fail(this, \"startsWithAnyOf() only works with strings\");\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n        };\n        return WhereClause;\n    }());\n\n    function createWhereClauseConstructor(db) {\n        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n            this.db = db;\n            this._ctx = {\n                table: table,\n                index: index === \":id\" ? null : index,\n                or: orCollection\n            };\n            var indexedDB = db._deps.indexedDB;\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n            this._descending = function (a, b) { return indexedDB.cmp(b, a); };\n            this._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n            this._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n            this._IDBKeyRange = db._deps.IDBKeyRange;\n        });\n    }\n\n    function eventRejectHandler(reject) {\n        return wrap(function (event) {\n            preventDefault(event);\n            reject(event.target.error);\n            return false;\n        });\n    }\n    function preventDefault(event) {\n        if (event.stopPropagation)\n            event.stopPropagation();\n        if (event.preventDefault)\n            event.preventDefault();\n    }\n\n    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\n    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\n    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\n    var Transaction =  (function () {\n        function Transaction() {\n        }\n        Transaction.prototype._lock = function () {\n            assert(!PSD.global);\n            ++this._reculock;\n            if (this._reculock === 1 && !PSD.global)\n                PSD.lockOwnerFor = this;\n            return this;\n        };\n        Transaction.prototype._unlock = function () {\n            assert(!PSD.global);\n            if (--this._reculock === 0) {\n                if (!PSD.global)\n                    PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    }\n                    catch (e) { }\n                }\n            }\n            return this;\n        };\n        Transaction.prototype._locked = function () {\n            return this._reculock && PSD.lockOwnerFor !== this;\n        };\n        Transaction.prototype.create = function (idbtrans) {\n            var _this = this;\n            if (!this.mode)\n                return this;\n            var idbdb = this.db.idbdb;\n            var dbOpenError = this.db._state.dbOpenError;\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active)\n                throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n            idbtrans = this.idbtrans = idbtrans ||\n                (this.db.core\n                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev);\n                _this._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n                _this.active = false;\n                _this.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this.active = false;\n                _this._resolve();\n                if ('mutatedParts' in idbtrans) {\n                    globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n                }\n            });\n            return this;\n        };\n        Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n            var _this = this;\n            if (mode === 'readwrite' && this.mode !== 'readwrite')\n                return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n            if (!this.active)\n                return rejection(new exceptions.TransactionInactive());\n            if (this._locked()) {\n                return new DexiePromise(function (resolve, reject) {\n                    _this._blockedFuncs.push([function () {\n                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                        }, PSD]);\n                });\n            }\n            else if (bWriteLock) {\n                return newScope(function () {\n                    var p = new DexiePromise(function (resolve, reject) {\n                        _this._lock();\n                        var rv = fn(resolve, reject, _this);\n                        if (rv && rv.then)\n                            rv.then(resolve, reject);\n                    });\n                    p.finally(function () { return _this._unlock(); });\n                    p._lib = true;\n                    return p;\n                });\n            }\n            else {\n                var p = new DexiePromise(function (resolve, reject) {\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p._lib = true;\n                return p;\n            }\n        };\n        Transaction.prototype._root = function () {\n            return this.parent ? this.parent._root() : this;\n        };\n        Transaction.prototype.waitFor = function (promiseLike) {\n            var root = this._root();\n            var promise = DexiePromise.resolve(promiseLike);\n            if (root._waitingFor) {\n                root._waitingFor = root._waitingFor.then(function () { return promise; });\n            }\n            else {\n                root._waitingFor = promise;\n                root._waitingQueue = [];\n                var store = root.idbtrans.objectStore(root.storeNames[0]);\n                (function spin() {\n                    ++root._spinCount;\n                    while (root._waitingQueue.length)\n                        (root._waitingQueue.shift())();\n                    if (root._waitingFor)\n                        store.get(-Infinity).onsuccess = spin;\n                }());\n            }\n            var currentWaitPromise = root._waitingFor;\n            return new DexiePromise(function (resolve, reject) {\n                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                    if (root._waitingFor === currentWaitPromise) {\n                        root._waitingFor = null;\n                    }\n                });\n            });\n        };\n        Transaction.prototype.abort = function () {\n            if (this.active) {\n                this.active = false;\n                if (this.idbtrans)\n                    this.idbtrans.abort();\n                this._reject(new exceptions.Abort());\n            }\n        };\n        Transaction.prototype.table = function (tableName) {\n            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n            if (hasOwn(memoizedTables, tableName))\n                return memoizedTables[tableName];\n            var tableSchema = this.schema[tableName];\n            if (!tableSchema) {\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            }\n            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n            transactionBoundTable.core = this.db.core.table(tableName);\n            memoizedTables[tableName] = transactionBoundTable;\n            return transactionBoundTable;\n        };\n        return Transaction;\n    }());\n\n    function createTransactionConstructor(db) {\n        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n            var _this = this;\n            this.db = db;\n            this.mode = mode;\n            this.storeNames = storeNames;\n            this.schema = dbschema;\n            this.chromeTransactionDurability = chromeTransactionDurability;\n            this.idbtrans = null;\n            this.on = Events(this, \"complete\", \"error\", \"abort\");\n            this.parent = parent || null;\n            this.active = true;\n            this._reculock = 0;\n            this._blockedFuncs = [];\n            this._resolve = null;\n            this._reject = null;\n            this._waitingFor = null;\n            this._waitingQueue = null;\n            this._spinCount = 0;\n            this._completion = new DexiePromise(function (resolve, reject) {\n                _this._resolve = resolve;\n                _this._reject = reject;\n            });\n            this._completion.then(function () {\n                _this.active = false;\n                _this.on.complete.fire();\n            }, function (e) {\n                var wasActive = _this.active;\n                _this.active = false;\n                _this.on.error.fire(e);\n                _this.parent ?\n                    _this.parent._reject(e) :\n                    wasActive && _this.idbtrans && _this.idbtrans.abort();\n                return rejection(e);\n            });\n        });\n    }\n\n    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n        return {\n            name: name,\n            keyPath: keyPath,\n            unique: unique,\n            multi: multi,\n            auto: auto,\n            compound: compound,\n            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n        };\n    }\n    function nameFromKeyPath(keyPath) {\n        return typeof keyPath === 'string' ?\n            keyPath :\n            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n    }\n\n    function createTableSchema(name, primKey, indexes) {\n        return {\n            name: name,\n            primKey: primKey,\n            indexes: indexes,\n            mappedClass: null,\n            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n        };\n    }\n\n    function safariMultiStoreFix(storeNames) {\n        return storeNames.length === 1 ? storeNames[0] : storeNames;\n    }\n    var getMaxKey = function (IdbKeyRange) {\n        try {\n            IdbKeyRange.only([[]]);\n            getMaxKey = function () { return [[]]; };\n            return [[]];\n        }\n        catch (e) {\n            getMaxKey = function () { return maxString; };\n            return maxString;\n        }\n    };\n\n    function getKeyExtractor(keyPath) {\n        if (keyPath == null) {\n            return function () { return undefined; };\n        }\n        else if (typeof keyPath === 'string') {\n            return getSinglePathKeyExtractor(keyPath);\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n    function getSinglePathKeyExtractor(keyPath) {\n        var split = keyPath.split('.');\n        if (split.length === 1) {\n            return function (obj) { return obj[keyPath]; };\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n\n    function arrayify(arrayLike) {\n        return [].slice.call(arrayLike);\n    }\n    var _id_counter = 0;\n    function getKeyPathAlias(keyPath) {\n        return keyPath == null ?\n            \":id\" :\n            typeof keyPath === 'string' ?\n                keyPath :\n                \"[\" + keyPath.join('+') + \"]\";\n    }\n    function createDBCore(db, IdbKeyRange, tmpTrans) {\n        function extractSchema(db, trans) {\n            var tables = arrayify(db.objectStoreNames);\n            return {\n                schema: {\n                    name: db.name,\n                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                        var compound = isArray(keyPath);\n                        var outbound = keyPath == null;\n                        var indexByKeyPath = {};\n                        var result = {\n                            name: store.name,\n                            primaryKey: {\n                                name: null,\n                                isPrimaryKey: true,\n                                outbound: outbound,\n                                compound: compound,\n                                keyPath: keyPath,\n                                autoIncrement: autoIncrement,\n                                unique: true,\n                                extractKey: getKeyExtractor(keyPath)\n                            },\n                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                                .map(function (index) {\n                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                                var compound = isArray(keyPath);\n                                var result = {\n                                    name: name,\n                                    compound: compound,\n                                    keyPath: keyPath,\n                                    unique: unique,\n                                    multiEntry: multiEntry,\n                                    extractKey: getKeyExtractor(keyPath)\n                                };\n                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                                return result;\n                            }),\n                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                        };\n                        indexByKeyPath[\":id\"] = result.primaryKey;\n                        if (keyPath != null) {\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                        }\n                        return result;\n                    })\n                },\n                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n            };\n        }\n        function makeIDBKeyRange(range) {\n            if (range.type === 3 )\n                return null;\n            if (range.type === 4 )\n                throw new Error(\"Cannot convert never type to IDBKeyRange\");\n            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n            var idbRange = lower === undefined ?\n                upper === undefined ?\n                    null :\n                    IdbKeyRange.upperBound(upper, !!upperOpen) :\n                upper === undefined ?\n                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n            return idbRange;\n        }\n        function createDbCoreTable(tableSchema) {\n            var tableName = tableSchema.name;\n            function mutate(_a) {\n                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var outbound = store.keyPath == null;\n                    var isAddOrPut = type === \"put\" || type === \"add\";\n                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                        throw new Error(\"Invalid operation type: \" + type);\n                    var length = (keys || values || { length: 1 }).length;\n                    if (keys && values && keys.length !== values.length) {\n                        throw new Error(\"Given keys array must have same length as given values array.\");\n                    }\n                    if (length === 0)\n                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                    var req;\n                    var reqs = [];\n                    var failures = [];\n                    var numFailures = 0;\n                    var errorHandler = function (event) {\n                        ++numFailures;\n                        preventDefault(event);\n                    };\n                    if (type === 'deleteRange') {\n                        if (range.type === 4 )\n                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n                        if (range.type === 3 )\n                            reqs.push(req = store.clear());\n                        else\n                            reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                    }\n                    else {\n                        var _a = isAddOrPut ?\n                            outbound ?\n                                [values, keys] :\n                                [values, null] :\n                            [keys, null], args1 = _a[0], args2 = _a[1];\n                        if (isAddOrPut) {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = (args2 && args2[i] !== undefined ?\n                                    store[type](args1[i], args2[i]) :\n                                    store[type](args1[i])));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = store[type](args1[i]));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                    }\n                    var done = function (event) {\n                        var lastResult = event.target.result;\n                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n                        resolve({\n                            numFailures: numFailures,\n                            failures: failures,\n                            results: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n                            lastResult: lastResult\n                        });\n                    };\n                    req.onerror = function (event) {\n                        errorHandler(event);\n                        done(event);\n                    };\n                    req.onsuccess = done;\n                });\n            }\n            function openCursor(_a) {\n                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ?\n                        store :\n                        store.index(index.name);\n                    var direction = reverse ?\n                        unique ?\n                            \"prevunique\" :\n                            \"prev\" :\n                        unique ?\n                            \"nextunique\" :\n                            \"next\";\n                    var req = values || !('openKeyCursor' in source) ?\n                        source.openCursor(makeIDBKeyRange(range), direction) :\n                        source.openKeyCursor(makeIDBKeyRange(range), direction);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = wrap(function (ev) {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            resolve(null);\n                            return;\n                        }\n                        cursor.___id = ++_id_counter;\n                        cursor.done = false;\n                        var _cursorContinue = cursor.continue.bind(cursor);\n                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                        if (_cursorContinuePrimaryKey)\n                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                        var _cursorAdvance = cursor.advance.bind(cursor);\n                        var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                        var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                        cursor.trans = trans;\n                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                        cursor.fail = wrap(reject);\n                        cursor.next = function () {\n                            var _this = this;\n                            var gotOne = 1;\n                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                        };\n                        cursor.start = function (callback) {\n                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                                resolveIteration = wrap(resolveIteration);\n                                req.onerror = eventRejectHandler(rejectIteration);\n                                cursor.fail = rejectIteration;\n                                cursor.stop = function (value) {\n                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                    resolveIteration(value);\n                                };\n                            });\n                            var guardedCallback = function () {\n                                if (req.result) {\n                                    try {\n                                        callback();\n                                    }\n                                    catch (err) {\n                                        cursor.fail(err);\n                                    }\n                                }\n                                else {\n                                    cursor.done = true;\n                                    cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                    cursor.stop();\n                                }\n                            };\n                            req.onsuccess = wrap(function (ev) {\n                                req.onsuccess = guardedCallback;\n                                guardedCallback();\n                            });\n                            cursor.continue = _cursorContinue;\n                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                            cursor.advance = _cursorAdvance;\n                            guardedCallback();\n                            return iterationPromise;\n                        };\n                        resolve(cursor);\n                    }, reject);\n                });\n            }\n            function query(hasGetAll) {\n                return function (request) {\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                        var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                        var index = query.index, range = query.range;\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        if (limit === 0)\n                            return resolve({ result: [] });\n                        if (hasGetAll) {\n                            var req = values ?\n                                source.getAll(idbKeyRange, nonInfinitLimit) :\n                                source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                            req.onerror = eventRejectHandler(reject);\n                        }\n                        else {\n                            var count_1 = 0;\n                            var req_1 = values || !('openKeyCursor' in source) ?\n                                source.openCursor(idbKeyRange) :\n                                source.openKeyCursor(idbKeyRange);\n                            var result_1 = [];\n                            req_1.onsuccess = function (event) {\n                                var cursor = req_1.result;\n                                if (!cursor)\n                                    return resolve({ result: result_1 });\n                                result_1.push(values ? cursor.value : cursor.primaryKey);\n                                if (++count_1 === limit)\n                                    return resolve({ result: result_1 });\n                                cursor.continue();\n                            };\n                            req_1.onerror = eventRejectHandler(reject);\n                        }\n                    });\n                };\n            }\n            return {\n                name: tableName,\n                schema: tableSchema,\n                mutate: mutate,\n                getMany: function (_a) {\n                    var trans = _a.trans, keys = _a.keys;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var length = keys.length;\n                        var result = new Array(length);\n                        var keyCount = 0;\n                        var callbackCount = 0;\n                        var req;\n                        var successHandler = function (event) {\n                            var req = event.target;\n                            if ((result[req._pos] = req.result) != null)\n                                ;\n                            if (++callbackCount === keyCount)\n                                resolve(result);\n                        };\n                        var errorHandler = eventRejectHandler(reject);\n                        for (var i = 0; i < length; ++i) {\n                            var key = keys[i];\n                            if (key != null) {\n                                req = store.get(keys[i]);\n                                req._pos = i;\n                                req.onsuccess = successHandler;\n                                req.onerror = errorHandler;\n                                ++keyCount;\n                            }\n                        }\n                        if (keyCount === 0)\n                            resolve(result);\n                    });\n                },\n                get: function (_a) {\n                    var trans = _a.trans, key = _a.key;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var req = store.get(key);\n                        req.onsuccess = function (event) { return resolve(event.target.result); };\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                },\n                query: query(hasGetAll),\n                openCursor: openCursor,\n                count: function (_a) {\n                    var query = _a.query, trans = _a.trans;\n                    var index = query.index, range = query.range;\n                    return new Promise(function (resolve, reject) {\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                }\n            };\n        }\n        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n        var tableMap = {};\n        tables.forEach(function (table) { return tableMap[table.name] = table; });\n        return {\n            stack: \"dbcore\",\n            transaction: db.transaction.bind(db),\n            table: function (name) {\n                var result = tableMap[name];\n                if (!result)\n                    throw new Error(\"Table '\" + name + \"' not found\");\n                return tableMap[name];\n            },\n            MIN_KEY: -Infinity,\n            MAX_KEY: getMaxKey(IdbKeyRange),\n            schema: schema\n        };\n    }\n\n    function createMiddlewareStack(stackImpl, middlewares) {\n        return middlewares.reduce(function (down, _a) {\n            var create = _a.create;\n            return (__assign(__assign({}, down), create(down)));\n        }, stackImpl);\n    }\n    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n        return {\n            dbcore: dbcore\n        };\n    }\n    function generateMiddlewareStacks(_a, tmpTrans) {\n        var db = _a._novip;\n        var idbdb = tmpTrans.db;\n        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n        db.core = stacks.dbcore;\n        db.tables.forEach(function (table) {\n            var tableName = table.name;\n            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n                table.core = db.core.table(tableName);\n                if (db[tableName] instanceof db.Table) {\n                    db[tableName].core = table.core;\n                }\n            }\n        });\n    }\n\n    function setApiOnPlace(_a, objs, tableNames, dbschema) {\n        var db = _a._novip;\n        tableNames.forEach(function (tableName) {\n            var schema = dbschema[tableName];\n            objs.forEach(function (obj) {\n                var propDesc = getPropertyDescriptor(obj, tableName);\n                if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                        setProp(obj, tableName, {\n                            get: function () { return this.table(tableName); },\n                            set: function (value) {\n                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                            }\n                        });\n                    }\n                    else {\n                        obj[tableName] = new db.Table(tableName, schema);\n                    }\n                }\n            });\n        });\n    }\n    function removeTablesApi(_a, objs) {\n        var db = _a._novip;\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof db.Table)\n                    delete obj[key];\n            }\n        });\n    }\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n        var globalSchema = db._dbSchema;\n        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n        trans.create(idbUpgradeTrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        var transless = PSD.transless || PSD;\n        newScope(function () {\n            PSD.trans = trans;\n            PSD.transless = transless;\n            if (oldVersion === 0) {\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n            }\n            else\n                updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n        });\n    }\n    function updateTablesAndIndexes(_a, oldVersion, trans, idbUpgradeTrans) {\n        var db = _a._novip;\n        var queue = [];\n        var versions = db._versions;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        var anyContentUpgraderHasRun = false;\n        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n        versToRun.forEach(function (version) {\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                diff.add.forEach(function (tuple) {\n                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    }\n                    else {\n                        var store_1 = idbUpgradeTrans.objectStore(change.name);\n                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                        change.change.forEach(function (idx) {\n                            store_1.deleteIndex(idx.name);\n                            addIndex(store_1, idx);\n                        });\n                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                    }\n                });\n                var contentUpgrade = version._cfg.contentUpgrade;\n                if (contentUpgrade && version._cfg.version > oldVersion) {\n                    generateMiddlewareStacks(db, idbUpgradeTrans);\n                    trans._memoizedTables = {};\n                    anyContentUpgraderHasRun = true;\n                    var upgradeSchema_1 = shallowClone(newSchema);\n                    diff.del.forEach(function (table) {\n                        upgradeSchema_1[table] = oldSchema[table];\n                    });\n                    removeTablesApi(db, [db.Transaction.prototype]);\n                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                    trans.schema = upgradeSchema_1;\n                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                    if (contentUpgradeIsAsync_1) {\n                        incrementExpectedAwaits();\n                    }\n                    var returnValue_1;\n                    var promiseFollowed = DexiePromise.follow(function () {\n                        returnValue_1 = contentUpgrade(trans);\n                        if (returnValue_1) {\n                            if (contentUpgradeIsAsync_1) {\n                                var decrementor = decrementExpectedAwaits.bind(null, null);\n                                returnValue_1.then(decrementor, decrementor);\n                            }\n                        }\n                    });\n                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n                }\n            });\n            queue.push(function (idbtrans) {\n                if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                    var newSchema = version._cfg.dbschema;\n                    deleteRemovedTables(newSchema, idbtrans);\n                }\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n                trans.schema = db._dbSchema;\n            });\n        });\n        function runQueue() {\n            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n                DexiePromise.resolve();\n        }\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbUpgradeTrans);\n        });\n    }\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [],\n            add: [],\n            change: []\n        };\n        var table;\n        for (table in oldSchema) {\n            if (!newSchema[table])\n                diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table], newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            }\n            else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if ((\n                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                    (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n                 {\n                    change.recreate = true;\n                    diff.change.push(change);\n                }\n                else {\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    var idxName = void 0;\n                    for (idxName in oldIndexes) {\n                        if (!newIndexes[idxName])\n                            change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                        if (!oldIdx)\n                            change.add.push(newIdx);\n                        else if (oldIdx.src !== newIdx.src)\n                            change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n            { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) { return addIndex(store, idx); });\n        return store;\n    }\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n    function deleteRemovedTables(newSchema, idbtrans) {\n        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n        });\n    }\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n    function buildGlobalSchema(db, idbdb, tmpTrans) {\n        var globalSchema = {};\n        var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        dbStoreNames.forEach(function (storeName) {\n            var store = tmpTrans.objectStore(storeName);\n            var keyPath = store.keyPath;\n            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n        });\n        return globalSchema;\n    }\n    function readGlobalSchema(_a, idbdb, tmpTrans) {\n        var db = _a._novip;\n        db.verno = idbdb.version / 10;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n        db._storeNames = slice(idbdb.objectStoreNames, 0);\n        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n    }\n    function verifyInstalledSchema(db, tmpTrans) {\n        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n        var diff = getSchemaDiff(installedSchema, db._dbSchema);\n        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n    }\n    function adjustToExistingIndexNames(_a, schema, idbtrans) {\n        var db = _a._novip;\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            db._hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) {\n                        indexSpec.name = indexName;\n                        delete schema[storeName].idxByName[dexieName];\n                        schema[storeName].idxByName[indexName] = indexSpec;\n                    }\n                }\n            }\n        }\n        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n            !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n            [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n            db._hasGetAll = false;\n        }\n    }\n    function parseIndexSyntax(primKeyAndIndexes) {\n        return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n            index = index.trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n            return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n        });\n    }\n\n    var Version =  (function () {\n        function Version() {\n        }\n        Version.prototype._parseStoresSpec = function (stores, outSchema) {\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var indexes = parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (primKey.multi)\n                        throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                    indexes.forEach(function (idx) {\n                        if (idx.auto)\n                            throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                        if (!idx.keyPath)\n                            throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                    });\n                    outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n                }\n            });\n        };\n        Version.prototype.stores = function (stores) {\n            var db = this.db;\n            this._cfg.storesSource = this._cfg.storesSource ?\n                extend(this._cfg.storesSource, stores) :\n                stores;\n            var versions = db._versions;\n            var storesSpec = {};\n            var dbschema = {};\n            versions.forEach(function (version) {\n                extend(storesSpec, version._cfg.storesSource);\n                dbschema = (version._cfg.dbschema = {});\n                version._parseStoresSpec(storesSpec, dbschema);\n            });\n            db._dbSchema = dbschema;\n            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n            db._storeNames = keys(dbschema);\n            return this;\n        };\n        Version.prototype.upgrade = function (upgradeFunction) {\n            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n            return this;\n        };\n        return Version;\n    }());\n\n    function createVersionConstructor(db) {\n        return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n            this.db = db;\n            this._cfg = {\n                version: versionNumber,\n                storesSource: null,\n                dbschema: {},\n                tables: {},\n                contentUpgrade: null\n            };\n        });\n    }\n\n    function getDbNamesTable(indexedDB, IDBKeyRange) {\n        var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n        if (!dbNamesDB) {\n            dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n                addons: [],\n                indexedDB: indexedDB,\n                IDBKeyRange: IDBKeyRange,\n            });\n            dbNamesDB.version(1).stores({ dbnames: \"name\" });\n        }\n        return dbNamesDB.table(\"dbnames\");\n    }\n    function hasDatabasesNative(indexedDB) {\n        return indexedDB && typeof indexedDB.databases === \"function\";\n    }\n    function getDatabaseNames(_a) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        return hasDatabasesNative(indexedDB)\n            ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n                return infos\n                    .map(function (info) { return info.name; })\n                    .filter(function (name) { return name !== DBNAMES_DB; });\n            })\n            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n    }\n    function _onDatabaseCreated(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n    }\n    function _onDatabaseDeleted(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n    }\n\n    function vip(fn) {\n        return newScope(function () {\n            PSD.letThrough = true;\n            return fn();\n        });\n    }\n\n    function idbReady() {\n        var isSafari = !navigator.userAgentData &&\n            /Safari\\//.test(navigator.userAgent) &&\n            !/Chrom(e|ium)\\//.test(navigator.userAgent);\n        if (!isSafari || !indexedDB.databases)\n            return Promise.resolve();\n        var intervalId;\n        return new Promise(function (resolve) {\n            var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n            intervalId = setInterval(tryIdb, 100);\n            tryIdb();\n        }).finally(function () { return clearInterval(intervalId); });\n    }\n\n    function dexieOpen(db) {\n        var state = db._state;\n        var indexedDB = db._deps.indexedDB;\n        if (state.isBeingOpened || db.idbdb)\n            return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n                rejection(state.dbOpenError) :\n                db; });\n        debug && (state.openCanceller._stackHolder = getErrorWithStack());\n        state.isBeingOpened = true;\n        state.dbOpenError = null;\n        state.openComplete = false;\n        var openCanceller = state.openCanceller;\n        function throwIfCancelled() {\n            if (state.openCanceller !== openCanceller)\n                throw new exceptions.DatabaseClosed('db.open() was cancelled');\n        }\n        var resolveDbReady = state.dbReadyResolve,\n        upgradeTransaction = null, wasCreated = false;\n        return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(function () { return new DexiePromise(function (resolve, reject) {\n                throwIfCancelled();\n                if (!indexedDB)\n                    throw new exceptions.MissingAPI();\n                var dbName = db.name;\n                var req = state.autoSchema ?\n                    indexedDB.open(dbName) :\n                    indexedDB.open(dbName, Math.round(db.verno * 10));\n                if (!req)\n                    throw new exceptions.MissingAPI();\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = wrap(db._fireOnBlocked);\n                req.onupgradeneeded = wrap(function (e) {\n                    upgradeTransaction = req.transaction;\n                    if (state.autoSchema && !db._options.allowEmptyDB) {\n                        req.onerror = preventDefault;\n                        upgradeTransaction.abort();\n                        req.result.close();\n                        var delreq = indexedDB.deleteDatabase(dbName);\n                        delreq.onsuccess = delreq.onerror = wrap(function () {\n                            reject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n                        });\n                    }\n                    else {\n                        upgradeTransaction.onerror = eventRejectHandler(reject);\n                        var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                        wasCreated = oldVer < 1;\n                        db._novip.idbdb = req.result;\n                        runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                    }\n                }, reject);\n                req.onsuccess = wrap(function () {\n                    upgradeTransaction = null;\n                    var idbdb = db._novip.idbdb = req.result;\n                    var objectStoreNames = slice(idbdb.objectStoreNames);\n                    if (objectStoreNames.length > 0)\n                        try {\n                            var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                            if (state.autoSchema)\n                                readGlobalSchema(db, idbdb, tmpTrans);\n                            else {\n                                adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                                if (!verifyInstalledSchema(db, tmpTrans)) {\n                                    console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n                                }\n                            }\n                            generateMiddlewareStacks(db, tmpTrans);\n                        }\n                        catch (e) {\n                        }\n                    connections.push(db);\n                    idbdb.onversionchange = wrap(function (ev) {\n                        state.vcFired = true;\n                        db.on(\"versionchange\").fire(ev);\n                    });\n                    idbdb.onclose = wrap(function (ev) {\n                        db.on(\"close\").fire(ev);\n                    });\n                    if (wasCreated)\n                        _onDatabaseCreated(db._deps, dbName);\n                    resolve();\n                }, reject);\n            }); })]).then(function () {\n            throwIfCancelled();\n            state.onReadyBeingFired = [];\n            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n                if (state.onReadyBeingFired.length > 0) {\n                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n                    state.onReadyBeingFired = [];\n                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n                }\n            });\n        }).finally(function () {\n            state.onReadyBeingFired = null;\n            state.isBeingOpened = false;\n        }).then(function () {\n            return db;\n        }).catch(function (err) {\n            state.dbOpenError = err;\n            try {\n                upgradeTransaction && upgradeTransaction.abort();\n            }\n            catch (_a) { }\n            if (openCanceller === state.openCanceller) {\n                db._close();\n            }\n            return rejection(err);\n        }).finally(function () {\n            state.openComplete = true;\n            resolveDbReady();\n        });\n    }\n\n    function awaitIterator(iterator) {\n        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n        function step(getNext) {\n            return function (val) {\n                var next = getNext(val), value = next.value;\n                return next.done ? value :\n                    (!value || typeof value.then !== 'function' ?\n                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                        value.then(onSuccess, onError));\n            };\n        }\n        return step(callNext)();\n    }\n\n    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n        var i = arguments.length;\n        if (i < 2)\n            throw new exceptions.InvalidArgument(\"Too few arguments\");\n        var args = new Array(i - 1);\n        while (--i)\n            args[i - 1] = arguments[i];\n        scopeFunc = args.pop();\n        var tables = flatten(args);\n        return [mode, tables, scopeFunc];\n    }\n    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n        return DexiePromise.resolve().then(function () {\n            var transless = PSD.transless || PSD;\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n            var zoneProps = {\n                trans: trans,\n                transless: transless\n            };\n            if (parentTransaction) {\n                trans.idbtrans = parentTransaction.idbtrans;\n            }\n            else {\n                try {\n                    trans.create();\n                    db._state.PR1398_maxLoop = 3;\n                }\n                catch (ex) {\n                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                        console.warn('Dexie: Need to reopen db');\n                        db._close();\n                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n                    }\n                    return rejection(ex);\n                }\n            }\n            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            var returnValue;\n            var promiseFollowed = DexiePromise.follow(function () {\n                returnValue = scopeFunc.call(trans, trans);\n                if (returnValue) {\n                    if (scopeFuncIsAsync) {\n                        var decrementor = decrementExpectedAwaits.bind(null, null);\n                        returnValue.then(decrementor, decrementor);\n                    }\n                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                        returnValue = awaitIterator(returnValue);\n                    }\n                }\n            }, zoneProps);\n            return (returnValue && typeof returnValue.then === 'function' ?\n                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                    x\n                    : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n                if (parentTransaction)\n                    trans._resolve();\n                return trans._completion.then(function () { return x; });\n            }).catch(function (e) {\n                trans._reject(e);\n                return rejection(e);\n            });\n        });\n    }\n\n    function pad(a, value, count) {\n        var result = isArray(a) ? a.slice() : [a];\n        for (var i = 0; i < count; ++i)\n            result.push(value);\n        return result;\n    }\n    function createVirtualIndexMiddleware(down) {\n        return __assign(__assign({}, down), { table: function (tableName) {\n                var table = down.table(tableName);\n                var schema = table.schema;\n                var indexLookup = {};\n                var allVirtualIndexes = [];\n                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                    var keyPathAlias = getKeyPathAlias(keyPath);\n                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                    var isVirtual = keyTail > 0;\n                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                    indexList.push(virtualIndex);\n                    if (!virtualIndex.isPrimaryKey) {\n                        allVirtualIndexes.push(virtualIndex);\n                    }\n                    if (keyLength > 1) {\n                        var virtualKeyPath = keyLength === 2 ?\n                            keyPath[0] :\n                            keyPath.slice(0, keyLength - 1);\n                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                    }\n                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                    return virtualIndex;\n                }\n                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n                indexLookup[\":id\"] = [primaryKey];\n                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                    var index = _a[_i];\n                    addVirtualIndexes(index.keyPath, 0, index);\n                }\n                function findBestIndex(keyPath) {\n                    var result = indexLookup[getKeyPathAlias(keyPath)];\n                    return result && result[0];\n                }\n                function translateRange(range, keyTail) {\n                    return {\n                        type: range.type === 1  ?\n                            2  :\n                            range.type,\n                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                        lowerOpen: true,\n                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                        upperOpen: true\n                    };\n                }\n                function translateRequest(req) {\n                    var index = req.query.index;\n                    return index.isVirtual ? __assign(__assign({}, req), { query: {\n                            index: index,\n                            range: translateRange(req.query.range, index.keyTail)\n                        } }) : req;\n                }\n                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                        return table.count(translateRequest(req));\n                    }, query: function (req) {\n                        return table.query(translateRequest(req));\n                    }, openCursor: function (req) {\n                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                        if (!isVirtual)\n                            return table.openCursor(req);\n                        function createVirtualCursor(cursor) {\n                            function _continue(key) {\n                                key != null ?\n                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                    req.unique ?\n                                        cursor.continue(cursor.key.slice(0, keyLength)\n                                            .concat(req.reverse\n                                            ? down.MIN_KEY\n                                            : down.MAX_KEY, keyTail)) :\n                                        cursor.continue();\n                            }\n                            var virtualCursor = Object.create(cursor, {\n                                continue: { value: _continue },\n                                continuePrimaryKey: {\n                                    value: function (key, primaryKey) {\n                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                    }\n                                },\n                                primaryKey: {\n                                    get: function () {\n                                        return cursor.primaryKey;\n                                    }\n                                },\n                                key: {\n                                    get: function () {\n                                        var key = cursor.key;\n                                        return keyLength === 1 ?\n                                            key[0] :\n                                            key.slice(0, keyLength);\n                                    }\n                                },\n                                value: {\n                                    get: function () {\n                                        return cursor.value;\n                                    }\n                                }\n                            });\n                            return virtualCursor;\n                        }\n                        return table.openCursor(translateRequest(req))\n                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                    } });\n                return result;\n            } });\n    }\n    var virtualIndexMiddleware = {\n        stack: \"dbcore\",\n        name: \"VirtualIndexMiddleware\",\n        level: 1,\n        create: createVirtualIndexMiddleware\n    };\n\n    function getObjectDiff(a, b, rv, prfx) {\n        rv = rv || {};\n        prfx = prfx || '';\n        keys(a).forEach(function (prop) {\n            if (!hasOwn(b, prop)) {\n                rv[prfx + prop] = undefined;\n            }\n            else {\n                var ap = a[prop], bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                    var apTypeName = toStringTag(ap);\n                    var bpTypeName = toStringTag(bp);\n                    if (apTypeName !== bpTypeName) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                    else if (apTypeName === 'Object') {\n                        getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                    }\n                    else if (ap !== bp) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                }\n                else if (ap !== bp)\n                    rv[prfx + prop] = b[prop];\n            }\n        });\n        keys(b).forEach(function (prop) {\n            if (!hasOwn(a, prop)) {\n                rv[prfx + prop] = b[prop];\n            }\n        });\n        return rv;\n    }\n\n    function getEffectiveKeys(primaryKey, req) {\n        if (req.type === 'delete')\n            return req.keys;\n        return req.keys || req.values.map(primaryKey.extractKey);\n    }\n\n    var hooksMiddleware = {\n        stack: \"dbcore\",\n        name: \"HooksMiddleware\",\n        level: 2,\n        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n                var downTable = downCore.table(tableName);\n                var primaryKey = downTable.schema.primaryKey;\n                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                        var dxTrans = PSD.trans;\n                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                        switch (req.type) {\n                            case 'add':\n                                if (creating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'put':\n                                if (creating.fire === nop && updating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'delete':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'deleteRange':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                        }\n                        return downTable.mutate(req);\n                        function addPutOrDelete(req) {\n                            var dxTrans = PSD.trans;\n                            var keys = req.keys || getEffectiveKeys(primaryKey, req);\n                            if (!keys)\n                                throw new Error(\"Keys missing\");\n                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n                            if (req.type !== 'delete')\n                                req.values = __spreadArray([], req.values, true);\n                            if (req.keys)\n                                req.keys = __spreadArray([], req.keys, true);\n                            return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                                var contexts = keys.map(function (key, i) {\n                                    var existingValue = existingValues[i];\n                                    var ctx = { onerror: null, onsuccess: null };\n                                    if (req.type === 'delete') {\n                                        deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                    }\n                                    else if (req.type === 'add' || existingValue === undefined) {\n                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                        if (key == null && generatedPrimaryKey != null) {\n                                            key = generatedPrimaryKey;\n                                            req.keys[i] = key;\n                                            if (!primaryKey.outbound) {\n                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                        if (additionalChanges_1) {\n                                            var requestedValue_1 = req.values[i];\n                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                                if (hasOwn(requestedValue_1, keyPath)) {\n                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                                }\n                                                else {\n                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    return ctx;\n                                });\n                                return downTable.mutate(req).then(function (_a) {\n                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                    for (var i = 0; i < keys.length; ++i) {\n                                        var primKey = results ? results[i] : keys[i];\n                                        var ctx = contexts[i];\n                                        if (primKey == null) {\n                                            ctx.onerror && ctx.onerror(failures[i]);\n                                        }\n                                        else {\n                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                                req.values[i] :\n                                                primKey\n                                            );\n                                        }\n                                    }\n                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                                }).catch(function (error) {\n                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                    return Promise.reject(error);\n                                });\n                            });\n                        }\n                        function deleteRange(req) {\n                            return deleteNextChunk(req.trans, req.range, 10000);\n                        }\n                        function deleteNextChunk(trans, range, limit) {\n                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                                .then(function (_a) {\n                                var result = _a.result;\n                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                    if (res.numFailures > 0)\n                                        return Promise.reject(res.failures[0]);\n                                    if (result.length < limit) {\n                                        return { failures: [], numFailures: 0, lastResult: undefined };\n                                    }\n                                    else {\n                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                    }\n                                });\n                            });\n                        }\n                    } });\n                return tableMiddleware;\n            } })); }\n    };\n    function getExistingValues(table, req, effectiveKeys) {\n        return req.type === \"add\"\n            ? Promise.resolve([])\n            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n    }\n\n    function getFromTransactionCache(keys, cache, clone) {\n        try {\n            if (!cache)\n                return null;\n            if (cache.keys.length < keys.length)\n                return null;\n            var result = [];\n            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n                if (cmp(cache.keys[i], keys[j]) !== 0)\n                    continue;\n                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n                ++j;\n            }\n            return result.length === keys.length ? result : null;\n        }\n        catch (_a) {\n            return null;\n        }\n    }\n    var cacheExistingValuesMiddleware = {\n        stack: \"dbcore\",\n        level: -1,\n        create: function (core) {\n            return {\n                table: function (tableName) {\n                    var table = core.table(tableName);\n                    return __assign(__assign({}, table), { getMany: function (req) {\n                            if (!req.cache) {\n                                return table.getMany(req);\n                            }\n                            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                            if (cachedResult) {\n                                return DexiePromise.resolve(cachedResult);\n                            }\n                            return table.getMany(req).then(function (res) {\n                                req.trans[\"_cache\"] = {\n                                    keys: req.keys,\n                                    values: req.cache === \"clone\" ? deepClone(res) : res,\n                                };\n                                return res;\n                            });\n                        }, mutate: function (req) {\n                            if (req.type !== \"add\")\n                                req.trans[\"_cache\"] = null;\n                            return table.mutate(req);\n                        } });\n                },\n            };\n        },\n    };\n\n    var _a;\n    function isEmptyRange(node) {\n        return !(\"from\" in node);\n    }\n    var RangeSet = function (fromOrTree, to) {\n        if (this) {\n            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n        }\n        else {\n            var rv = new RangeSet();\n            if (fromOrTree && (\"d\" in fromOrTree)) {\n                extend(rv, fromOrTree);\n            }\n            return rv;\n        }\n    };\n    props(RangeSet.prototype, (_a = {\n            add: function (rangeSet) {\n                mergeRanges(this, rangeSet);\n                return this;\n            },\n            addKey: function (key) {\n                addRange(this, key, key);\n                return this;\n            },\n            addKeys: function (keys) {\n                var _this = this;\n                keys.forEach(function (key) { return addRange(_this, key, key); });\n                return this;\n            }\n        },\n        _a[iteratorSymbol] = function () {\n            return getRangeSetIterator(this);\n        },\n        _a));\n    function addRange(target, from, to) {\n        var diff = cmp(from, to);\n        if (isNaN(diff))\n            return;\n        if (diff > 0)\n            throw RangeError();\n        if (isEmptyRange(target))\n            return extend(target, { from: from, to: to, d: 1 });\n        var left = target.l;\n        var right = target.r;\n        if (cmp(to, target.from) < 0) {\n            left\n                ? addRange(left, from, to)\n                : (target.l = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.to) > 0) {\n            right\n                ? addRange(right, from, to)\n                : (target.r = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.from) < 0) {\n            target.from = from;\n            target.l = null;\n            target.d = right ? right.d + 1 : 1;\n        }\n        if (cmp(to, target.to) > 0) {\n            target.to = to;\n            target.r = null;\n            target.d = target.l ? target.l.d + 1 : 1;\n        }\n        var rightWasCutOff = !target.r;\n        if (left && !target.l) {\n            mergeRanges(target, left);\n        }\n        if (right && rightWasCutOff) {\n            mergeRanges(target, right);\n        }\n    }\n    function mergeRanges(target, newSet) {\n        function _addRangeSet(target, _a) {\n            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n            addRange(target, from, to);\n            if (l)\n                _addRangeSet(target, l);\n            if (r)\n                _addRangeSet(target, r);\n        }\n        if (!isEmptyRange(newSet))\n            _addRangeSet(target, newSet);\n    }\n    function rangesOverlap(rangeSet1, rangeSet2) {\n        var i1 = getRangeSetIterator(rangeSet2);\n        var nextResult1 = i1.next();\n        if (nextResult1.done)\n            return false;\n        var a = nextResult1.value;\n        var i2 = getRangeSetIterator(rangeSet1);\n        var nextResult2 = i2.next(a.from);\n        var b = nextResult2.value;\n        while (!nextResult1.done && !nextResult2.done) {\n            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n                return true;\n            cmp(a.from, b.from) < 0\n                ? (a = (nextResult1 = i1.next(b.from)).value)\n                : (b = (nextResult2 = i2.next(a.from)).value);\n        }\n        return false;\n    }\n    function getRangeSetIterator(node) {\n        var state = isEmptyRange(node) ? null : { s: 0, n: node };\n        return {\n            next: function (key) {\n                var keyProvided = arguments.length > 0;\n                while (state) {\n                    switch (state.s) {\n                        case 0:\n                            state.s = 1;\n                            if (keyProvided) {\n                                while (state.n.l && cmp(key, state.n.from) < 0)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                            else {\n                                while (state.n.l)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                        case 1:\n                            state.s = 2;\n                            if (!keyProvided || cmp(key, state.n.to) <= 0)\n                                return { value: state.n, done: false };\n                        case 2:\n                            if (state.n.r) {\n                                state.s = 3;\n                                state = { up: state, n: state.n.r, s: 0 };\n                                continue;\n                            }\n                        case 3:\n                            state = state.up;\n                    }\n                }\n                return { done: true };\n            },\n        };\n    }\n    function rebalance(target) {\n        var _a, _b;\n        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n        var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n        if (r) {\n            var l = r === \"r\" ? \"l\" : \"r\";\n            var rootClone = __assign({}, target);\n            var oldRootRight = target[r];\n            target.from = oldRootRight.from;\n            target.to = oldRootRight.to;\n            target[r] = oldRootRight[r];\n            rootClone[r] = oldRootRight[l];\n            target[l] = rootClone;\n            rootClone.d = computeDepth(rootClone);\n        }\n        target.d = computeDepth(target);\n    }\n    function computeDepth(_a) {\n        var r = _a.r, l = _a.l;\n        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n    }\n\n    var observabilityMiddleware = {\n        stack: \"dbcore\",\n        level: 0,\n        create: function (core) {\n            var dbName = core.schema.name;\n            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n            return __assign(__assign({}, core), { table: function (tableName) {\n                    var table = core.table(tableName);\n                    var schema = table.schema;\n                    var primaryKey = schema.primaryKey;\n                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {\n                            var trans = req.trans;\n                            var mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                            var getRangeSet = function (indexName) {\n                                var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                return (mutatedParts[part] ||\n                                    (mutatedParts[part] = new RangeSet()));\n                            };\n                            var pkRangeSet = getRangeSet(\"\");\n                            var delsRangeSet = getRangeSet(\":dels\");\n                            var type = req.type;\n                            var _a = req.type === \"deleteRange\"\n                                ? [req.range]\n                                : req.type === \"delete\"\n                                    ? [req.keys]\n                                    : req.values.length < 50\n                                        ? [[], req.values]\n                                        : [], keys = _a[0], newObjs = _a[1];\n                            var oldCache = req.trans[\"_cache\"];\n                            return table.mutate(req).then(function (res) {\n                                if (isArray(keys)) {\n                                    if (type !== \"delete\")\n                                        keys = res.results;\n                                    pkRangeSet.addKeys(keys);\n                                    var oldObjs = getFromTransactionCache(keys, oldCache);\n                                    if (!oldObjs && type !== \"add\") {\n                                        delsRangeSet.addKeys(keys);\n                                    }\n                                    if (oldObjs || newObjs) {\n                                        trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                    }\n                                }\n                                else if (keys) {\n                                    var range = { from: keys.lower, to: keys.upper };\n                                    delsRangeSet.add(range);\n                                    pkRangeSet.add(range);\n                                }\n                                else {\n                                    pkRangeSet.add(FULL_RANGE);\n                                    delsRangeSet.add(FULL_RANGE);\n                                    schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n                                }\n                                return res;\n                            });\n                        } });\n                    var getRange = function (_a) {\n                        var _b, _c;\n                        var _d = _a.query, index = _d.index, range = _d.range;\n                        return [\n                            index,\n                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n                        ];\n                    };\n                    var readSubscribers = {\n                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n                        count: getRange,\n                        query: getRange,\n                        openCursor: getRange,\n                    };\n                    keys(readSubscribers).forEach(function (method) {\n                        tableClone[method] = function (req) {\n                            var subscr = PSD.subscr;\n                            if (subscr) {\n                                var getRangeSet = function (indexName) {\n                                    var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                    return (subscr[part] ||\n                                        (subscr[part] = new RangeSet()));\n                                };\n                                var pkRangeSet_1 = getRangeSet(\"\");\n                                var delsRangeSet_1 = getRangeSet(\":dels\");\n                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n                                getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                                if (!queriedIndex.isPrimaryKey) {\n                                    if (method === \"count\") {\n                                        delsRangeSet_1.add(FULL_RANGE);\n                                    }\n                                    else {\n                                        var keysPromise_1 = method === \"query\" &&\n                                            outbound &&\n                                            req.values &&\n                                            table.query(__assign(__assign({}, req), { values: false }));\n                                        return table[method].apply(this, arguments).then(function (res) {\n                                            if (method === \"query\") {\n                                                if (outbound && req.values) {\n                                                    return keysPromise_1.then(function (_a) {\n                                                        var resultingKeys = _a.result;\n                                                        pkRangeSet_1.addKeys(resultingKeys);\n                                                        return res;\n                                                    });\n                                                }\n                                                var pKeys = req.values\n                                                    ? res.result.map(extractKey)\n                                                    : res.result;\n                                                if (req.values) {\n                                                    pkRangeSet_1.addKeys(pKeys);\n                                                }\n                                                else {\n                                                    delsRangeSet_1.addKeys(pKeys);\n                                                }\n                                            }\n                                            else if (method === \"openCursor\") {\n                                                var cursor_1 = res;\n                                                var wantValues_1 = req.values;\n                                                return (cursor_1 &&\n                                                    Object.create(cursor_1, {\n                                                        key: {\n                                                            get: function () {\n                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.key;\n                                                            },\n                                                        },\n                                                        primaryKey: {\n                                                            get: function () {\n                                                                var pkey = cursor_1.primaryKey;\n                                                                delsRangeSet_1.addKey(pkey);\n                                                                return pkey;\n                                                            },\n                                                        },\n                                                        value: {\n                                                            get: function () {\n                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.value;\n                                                            },\n                                                        },\n                                                    }));\n                                            }\n                                            return res;\n                                        });\n                                    }\n                                }\n                            }\n                            return table[method].apply(this, arguments);\n                        };\n                    });\n                    return tableClone;\n                } });\n        },\n    };\n    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n        function addAffectedIndex(ix) {\n            var rangeSet = getRangeSet(ix.name || \"\");\n            function extractKey(obj) {\n                return obj != null ? ix.extractKey(obj) : null;\n            }\n            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n                ? key.forEach(function (key) { return rangeSet.addKey(key); })\n                : rangeSet.addKey(key); };\n            (oldObjs || newObjs).forEach(function (_, i) {\n                var oldKey = oldObjs && extractKey(oldObjs[i]);\n                var newKey = newObjs && extractKey(newObjs[i]);\n                if (cmp(oldKey, newKey) !== 0) {\n                    if (oldKey != null)\n                        addKeyOrKeys(oldKey);\n                    if (newKey != null)\n                        addKeyOrKeys(newKey);\n                }\n            });\n        }\n        schema.indexes.forEach(addAffectedIndex);\n    }\n\n    var Dexie$1 =  (function () {\n        function Dexie(name, options) {\n            var _this = this;\n            this._middlewares = {};\n            this.verno = 0;\n            var deps = Dexie.dependencies;\n            this._options = options = __assign({\n                addons: Dexie.addons, autoOpen: true,\n                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n            this._deps = {\n                indexedDB: options.indexedDB,\n                IDBKeyRange: options.IDBKeyRange\n            };\n            var addons = options.addons;\n            this._dbSchema = {};\n            this._versions = [];\n            this._storeNames = [];\n            this._allTables = {};\n            this.idbdb = null;\n            this._novip = this;\n            var state = {\n                dbOpenError: null,\n                isBeingOpened: false,\n                onReadyBeingFired: null,\n                openComplete: false,\n                dbReadyResolve: nop,\n                dbReadyPromise: null,\n                cancelOpen: nop,\n                openCanceller: null,\n                autoSchema: true,\n                PR1398_maxLoop: 3\n            };\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n            this._state = state;\n            this.name = name;\n            this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n                return function (subscriber, bSticky) {\n                    Dexie.vip(function () {\n                        var state = _this._state;\n                        if (state.openComplete) {\n                            if (!state.dbOpenError)\n                                DexiePromise.resolve().then(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else if (state.onReadyBeingFired) {\n                            state.onReadyBeingFired.push(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else {\n                            subscribe(subscriber);\n                            var db_1 = _this;\n                            if (!bSticky)\n                                subscribe(function unsubscribe() {\n                                    db_1.on.ready.unsubscribe(subscriber);\n                                    db_1.on.ready.unsubscribe(unsubscribe);\n                                });\n                        }\n                    });\n                };\n            });\n            this.Collection = createCollectionConstructor(this);\n            this.Table = createTableConstructor(this);\n            this.Transaction = createTransactionConstructor(this);\n            this.Version = createVersionConstructor(this);\n            this.WhereClause = createWhereClauseConstructor(this);\n            this.on(\"versionchange\", function (ev) {\n                if (ev.newVersion > 0)\n                    console.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n                else\n                    console.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n                _this.close();\n            });\n            this.on(\"blocked\", function (ev) {\n                if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                    console.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n                else\n                    console.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n            });\n            this._maxKey = getMaxKey(options.IDBKeyRange);\n            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n            this._fireOnBlocked = function (ev) {\n                _this.on(\"blocked\").fire(ev);\n                connections\n                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                    .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n            };\n            this.use(virtualIndexMiddleware);\n            this.use(hooksMiddleware);\n            this.use(observabilityMiddleware);\n            this.use(cacheExistingValuesMiddleware);\n            this.vip = Object.create(this, { _vip: { value: true } });\n            addons.forEach(function (addon) { return addon(_this); });\n        }\n        Dexie.prototype.version = function (versionNumber) {\n            if (isNaN(versionNumber) || versionNumber < 0.1)\n                throw new exceptions.Type(\"Given version is not a positive number\");\n            versionNumber = Math.round(versionNumber * 10) / 10;\n            if (this.idbdb || this._state.isBeingOpened)\n                throw new exceptions.Schema(\"Cannot add version when database is open\");\n            this.verno = Math.max(this.verno, versionNumber);\n            var versions = this._versions;\n            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n            if (versionInstance)\n                return versionInstance;\n            versionInstance = new this.Version(versionNumber);\n            versions.push(versionInstance);\n            versions.sort(lowerVersionFirst);\n            versionInstance.stores({});\n            this._state.autoSchema = false;\n            return versionInstance;\n        };\n        Dexie.prototype._whenReady = function (fn) {\n            var _this = this;\n            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n                if (_this._state.openComplete) {\n                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n                }\n                if (!_this._state.isBeingOpened) {\n                    if (!_this._options.autoOpen) {\n                        reject(new exceptions.DatabaseClosed());\n                        return;\n                    }\n                    _this.open().catch(nop);\n                }\n                _this._state.dbReadyPromise.then(resolve, reject);\n            }).then(fn);\n        };\n        Dexie.prototype.use = function (_a) {\n            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n            if (name)\n                this.unuse({ stack: stack, name: name });\n            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n            middlewares.sort(function (a, b) { return a.level - b.level; });\n            return this;\n        };\n        Dexie.prototype.unuse = function (_a) {\n            var stack = _a.stack, name = _a.name, create = _a.create;\n            if (stack && this._middlewares[stack]) {\n                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                    return create ? mw.create !== create :\n                        name ? mw.name !== name :\n                            false;\n                });\n            }\n            return this;\n        };\n        Dexie.prototype.open = function () {\n            return dexieOpen(this);\n        };\n        Dexie.prototype._close = function () {\n            var state = this._state;\n            var idx = connections.indexOf(this);\n            if (idx >= 0)\n                connections.splice(idx, 1);\n            if (this.idbdb) {\n                try {\n                    this.idbdb.close();\n                }\n                catch (e) { }\n                this._novip.idbdb = null;\n            }\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n        };\n        Dexie.prototype.close = function () {\n            this._close();\n            var state = this._state;\n            this._options.autoOpen = false;\n            state.dbOpenError = new exceptions.DatabaseClosed();\n            if (state.isBeingOpened)\n                state.cancelOpen(state.dbOpenError);\n        };\n        Dexie.prototype.delete = function () {\n            var _this = this;\n            var hasArguments = arguments.length > 0;\n            var state = this._state;\n            return new DexiePromise(function (resolve, reject) {\n                var doDelete = function () {\n                    _this.close();\n                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                    req.onsuccess = wrap(function () {\n                        _onDatabaseDeleted(_this._deps, _this.name);\n                        resolve();\n                    });\n                    req.onerror = eventRejectHandler(reject);\n                    req.onblocked = _this._fireOnBlocked;\n                };\n                if (hasArguments)\n                    throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n                if (state.isBeingOpened) {\n                    state.dbReadyPromise.then(doDelete);\n                }\n                else {\n                    doDelete();\n                }\n            });\n        };\n        Dexie.prototype.backendDB = function () {\n            return this.idbdb;\n        };\n        Dexie.prototype.isOpen = function () {\n            return this.idbdb !== null;\n        };\n        Dexie.prototype.hasBeenClosed = function () {\n            var dbOpenError = this._state.dbOpenError;\n            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n        };\n        Dexie.prototype.hasFailed = function () {\n            return this._state.dbOpenError !== null;\n        };\n        Dexie.prototype.dynamicallyOpened = function () {\n            return this._state.autoSchema;\n        };\n        Object.defineProperty(Dexie.prototype, \"tables\", {\n            get: function () {\n                var _this = this;\n                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Dexie.prototype.transaction = function () {\n            var args = extractTransactionArgs.apply(this, arguments);\n            return this._transaction.apply(this, args);\n        };\n        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n            var _this = this;\n            var parentTransaction = PSD.trans;\n            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n                parentTransaction = null;\n            var onlyIfCompatible = mode.indexOf('?') !== -1;\n            mode = mode.replace('!', '').replace('?', '');\n            var idbMode, storeNames;\n            try {\n                storeNames = tables.map(function (table) {\n                    var storeName = table instanceof _this.Table ? table.name : table;\n                    if (typeof storeName !== 'string')\n                        throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                    return storeName;\n                });\n                if (mode == \"r\" || mode === READONLY)\n                    idbMode = READONLY;\n                else if (mode == \"rw\" || mode == READWRITE)\n                    idbMode = READWRITE;\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n                if (parentTransaction) {\n                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                        if (onlyIfCompatible) {\n                            parentTransaction = null;\n                        }\n                        else\n                            throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                    }\n                    if (parentTransaction) {\n                        storeNames.forEach(function (storeName) {\n                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                                if (onlyIfCompatible) {\n                                    parentTransaction = null;\n                                }\n                                else\n                                    throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                        \" not included in parent transaction.\");\n                            }\n                        });\n                    }\n                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                        parentTransaction = null;\n                    }\n                }\n            }\n            catch (e) {\n                return parentTransaction ?\n                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                    rejection(e);\n            }\n            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n            return (parentTransaction ?\n                parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n                PSD.trans ?\n                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                    this._whenReady(enterTransaction));\n        };\n        Dexie.prototype.table = function (tableName) {\n            if (!hasOwn(this._allTables, tableName)) {\n                throw new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n            }\n            return this._allTables[tableName];\n        };\n        return Dexie;\n    }());\n\n    var symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n        ? Symbol.observable\n        : \"@@observable\";\n    var Observable =  (function () {\n        function Observable(subscribe) {\n            this._subscribe = subscribe;\n        }\n        Observable.prototype.subscribe = function (x, error, complete) {\n            return this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n        };\n        Observable.prototype[symbolObservable] = function () {\n            return this;\n        };\n        return Observable;\n    }());\n\n    function extendObservabilitySet(target, newSet) {\n        keys(newSet).forEach(function (part) {\n            var rangeSet = target[part] || (target[part] = new RangeSet());\n            mergeRanges(rangeSet, newSet[part]);\n        });\n        return target;\n    }\n\n    function liveQuery(querier) {\n        var hasValue = false;\n        var currentValue = undefined;\n        var observable = new Observable(function (observer) {\n            var scopeFuncIsAsync = isAsyncFunction(querier);\n            function execute(subscr) {\n                if (scopeFuncIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                var exec = function () { return newScope(querier, { subscr: subscr, trans: null }); };\n                var rv = PSD.trans\n                    ?\n                        usePSD(PSD.transless, exec)\n                    : exec();\n                if (scopeFuncIsAsync) {\n                    rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n                }\n                return rv;\n            }\n            var closed = false;\n            var accumMuts = {};\n            var currentObs = {};\n            var subscription = {\n                get closed() {\n                    return closed;\n                },\n                unsubscribe: function () {\n                    closed = true;\n                    globalEvents.storagemutated.unsubscribe(mutationListener);\n                },\n            };\n            observer.start && observer.start(subscription);\n            var querying = false, startedListening = false;\n            function shouldNotify() {\n                return keys(currentObs).some(function (key) {\n                    return accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]);\n                });\n            }\n            var mutationListener = function (parts) {\n                extendObservabilitySet(accumMuts, parts);\n                if (shouldNotify()) {\n                    doQuery();\n                }\n            };\n            var doQuery = function () {\n                if (querying || closed)\n                    return;\n                accumMuts = {};\n                var subscr = {};\n                var ret = execute(subscr);\n                if (!startedListening) {\n                    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                    startedListening = true;\n                }\n                querying = true;\n                Promise.resolve(ret).then(function (result) {\n                    hasValue = true;\n                    currentValue = result;\n                    querying = false;\n                    if (closed)\n                        return;\n                    if (shouldNotify()) {\n                        doQuery();\n                    }\n                    else {\n                        accumMuts = {};\n                        currentObs = subscr;\n                        observer.next && observer.next(result);\n                    }\n                }, function (err) {\n                    querying = false;\n                    hasValue = false;\n                    observer.error && observer.error(err);\n                    subscription.unsubscribe();\n                });\n            };\n            doQuery();\n            return subscription;\n        });\n        observable.hasValue = function () { return hasValue; };\n        observable.getValue = function () { return currentValue; };\n        return observable;\n    }\n\n    var domDeps;\n    try {\n        domDeps = {\n            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n        };\n    }\n    catch (e) {\n        domDeps = { indexedDB: null, IDBKeyRange: null };\n    }\n\n    var Dexie = Dexie$1;\n    props(Dexie, __assign(__assign({}, fullNameExceptions), {\n        delete: function (databaseName) {\n            var db = new Dexie(databaseName, { addons: [] });\n            return db.delete();\n        },\n        exists: function (name) {\n            return new Dexie(name, { addons: [] }).open().then(function (db) {\n                db.close();\n                return true;\n            }).catch('NoSuchDatabaseError', function () { return false; });\n        },\n        getDatabaseNames: function (cb) {\n            try {\n                return getDatabaseNames(Dexie.dependencies).then(cb);\n            }\n            catch (_a) {\n                return rejection(new exceptions.MissingAPI());\n            }\n        },\n        defineClass: function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return Class;\n        }, ignoreTransaction: function (scopeFunc) {\n            return PSD.trans ?\n                usePSD(PSD.transless, scopeFunc) :\n                scopeFunc();\n        }, vip: vip, async: function (generatorFn) {\n            return function () {\n                try {\n                    var rv = awaitIterator(generatorFn.apply(this, arguments));\n                    if (!rv || typeof rv.then !== 'function')\n                        return DexiePromise.resolve(rv);\n                    return rv;\n                }\n                catch (e) {\n                    return rejection(e);\n                }\n            };\n        }, spawn: function (generatorFn, args, thiz) {\n            try {\n                var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        },\n        currentTransaction: {\n            get: function () { return PSD.trans || null; }\n        }, waitFor: function (promiseOrFunction, optionalTimeout) {\n            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n                Dexie.ignoreTransaction(promiseOrFunction) :\n                promiseOrFunction)\n                .timeout(optionalTimeout || 60000);\n            return PSD.trans ?\n                PSD.trans.waitFor(promise) :\n                promise;\n        },\n        Promise: DexiePromise,\n        debug: {\n            get: function () { return debug; },\n            set: function (value) {\n                setDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n            }\n        },\n        derive: derive, extend: extend, props: props, override: override,\n        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n        minKey: minKey,\n        addons: [],\n        connections: connections,\n        errnames: errnames,\n        dependencies: domDeps,\n        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n            .map(function (n) { return parseInt(n); })\n            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\n    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\n    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n            if (!propagatingLocally) {\n                var event_1;\n                if (isIEOrEdge) {\n                    event_1 = document.createEvent('CustomEvent');\n                    event_1.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n                }\n                else {\n                    event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                        detail: updatedParts\n                    });\n                }\n                propagatingLocally = true;\n                dispatchEvent(event_1);\n                propagatingLocally = false;\n            }\n        });\n        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n            var detail = _a.detail;\n            if (!propagatingLocally) {\n                propagateLocally(detail);\n            }\n        });\n    }\n    function propagateLocally(updateParts) {\n        var wasMe = propagatingLocally;\n        try {\n            propagatingLocally = true;\n            globalEvents.storagemutated.fire(updateParts);\n        }\n        finally {\n            propagatingLocally = wasMe;\n        }\n    }\n    var propagatingLocally = false;\n\n    if (typeof BroadcastChannel !== 'undefined') {\n        var bc_1 = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n        if (typeof bc_1.unref === 'function') {\n            bc_1.unref();\n        }\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            if (!propagatingLocally) {\n                bc_1.postMessage(changedParts);\n            }\n        });\n        bc_1.onmessage = function (ev) {\n            if (ev.data)\n                propagateLocally(ev.data);\n        };\n    }\n    else if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            try {\n                if (!propagatingLocally) {\n                    if (typeof localStorage !== 'undefined') {\n                        localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                            trig: Math.random(),\n                            changedParts: changedParts,\n                        }));\n                    }\n                    if (typeof self['clients'] === 'object') {\n                        __spreadArray([], self['clients'].matchAll({ includeUncontrolled: true }), true).forEach(function (client) {\n                            return client.postMessage({\n                                type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                                changedParts: changedParts,\n                            });\n                        });\n                    }\n                }\n            }\n            catch (_a) { }\n        });\n        if (typeof addEventListener !== 'undefined') {\n            addEventListener('storage', function (ev) {\n                if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n                    var data = JSON.parse(ev.newValue);\n                    if (data)\n                        propagateLocally(data.changedParts);\n                }\n            });\n        }\n        var swContainer = self.document && navigator.serviceWorker;\n        if (swContainer) {\n            swContainer.addEventListener('message', propagateMessageLocally);\n        }\n    }\n    function propagateMessageLocally(_a) {\n        var data = _a.data;\n        if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n            propagateLocally(data.changedParts);\n        }\n    }\n\n    DexiePromise.rejectionMapper = mapError;\n    setDebug(debug, dexieStackFrameFilter);\n\n    var namedExports = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Dexie: Dexie$1,\n        liveQuery: liveQuery,\n        'default': Dexie$1,\n        RangeSet: RangeSet,\n        mergeRanges: mergeRanges,\n        rangesOverlap: rangesOverlap\n    });\n\n    __assign(Dexie$1, namedExports, { default: Dexie$1 });\n\n    return Dexie$1;\n\n}));\n//# sourceMappingURL=dexie.js.map\n","const denyList = new Set([\n  'ENOTFOUND',\n  'ENETUNREACH',\n\n  // SSL errors from https://github.com/nodejs/node/blob/fc8e3e2cdc521978351de257030db0076d79e0ab/src/crypto/crypto_common.cc#L301-L328\n  'UNABLE_TO_GET_ISSUER_CERT',\n  'UNABLE_TO_GET_CRL',\n  'UNABLE_TO_DECRYPT_CERT_SIGNATURE',\n  'UNABLE_TO_DECRYPT_CRL_SIGNATURE',\n  'UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY',\n  'CERT_SIGNATURE_FAILURE',\n  'CRL_SIGNATURE_FAILURE',\n  'CERT_NOT_YET_VALID',\n  'CERT_HAS_EXPIRED',\n  'CRL_NOT_YET_VALID',\n  'CRL_HAS_EXPIRED',\n  'ERROR_IN_CERT_NOT_BEFORE_FIELD',\n  'ERROR_IN_CERT_NOT_AFTER_FIELD',\n  'ERROR_IN_CRL_LAST_UPDATE_FIELD',\n  'ERROR_IN_CRL_NEXT_UPDATE_FIELD',\n  'OUT_OF_MEM',\n  'DEPTH_ZERO_SELF_SIGNED_CERT',\n  'SELF_SIGNED_CERT_IN_CHAIN',\n  'UNABLE_TO_GET_ISSUER_CERT_LOCALLY',\n  'UNABLE_TO_VERIFY_LEAF_SIGNATURE',\n  'CERT_CHAIN_TOO_LONG',\n  'CERT_REVOKED',\n  'INVALID_CA',\n  'PATH_LENGTH_EXCEEDED',\n  'INVALID_PURPOSE',\n  'CERT_UNTRUSTED',\n  'CERT_REJECTED',\n  'HOSTNAME_MISMATCH'\n]);\n\n// TODO: Use `error?.code` when targeting Node.js 14\nexport default function isRetryAllowed(error) {\n  return !denyList.has(error && error.code);\n}\n","// Version 1.7.3\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n      (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.nobleEd25519 = {}));\n})(this, (function (exports) { 'use strict';\n\n  const _nodeResolve_empty = {};\n\n  const nodeCrypto = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    'default': _nodeResolve_empty\n  });\n\n  /*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\n  const _0n = BigInt(0);\n  const _1n = BigInt(1);\n  const _2n = BigInt(2);\n  const _8n = BigInt(8);\n  const CU_O = BigInt('7237005577332262213973186563042994240857116359379907606001950938285454250989');\n  const CURVE = Object.freeze({\n    a: BigInt(-1),\n    d: BigInt('37095705934669439343138083508754565189542113879843219016388785533085940283555'),\n    P: BigInt('57896044618658097711785492504343953926634992332820282019728792003956564819949'),\n    l: CU_O,\n    n: CU_O,\n    h: BigInt(8),\n    Gx: BigInt('15112221349535400772501151409588531511454012693041857206046113283949847762202'),\n    Gy: BigInt('46316835694926478169428394003475163141307993866256225615783033603165251855960'),\n  });\n  const POW_2_256 = BigInt('0x10000000000000000000000000000000000000000000000000000000000000000');\n  const SQRT_M1 = BigInt('19681161376707505956807079304988542015446066515923890162744021073123829784752');\n  BigInt('6853475219497561581579357271197624642482790079785650197046958215289687604742');\n  const SQRT_AD_MINUS_ONE = BigInt('25063068953384623474111414158702152701244531502492656460079210482610430750235');\n  const INVSQRT_A_MINUS_D = BigInt('54469307008909316920995813868745141605393597292927456921205312896311721017578');\n  const ONE_MINUS_D_SQ = BigInt('1159843021668779879193775521855586647937357759715417654439879720876111806838');\n  const D_MINUS_ONE_SQ = BigInt('40440834346308536858101042469323190826248399146238708352240133220865137265952');\n  class ExtendedPoint {\n    constructor(x, y, z, t) {\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      this.t = t;\n    }\n    static fromAffine(p) {\n      if (!(p instanceof Point)) {\n        throw new TypeError('ExtendedPoint#fromAffine: expected Point');\n      }\n      if (p.equals(Point.ZERO))\n        return ExtendedPoint.ZERO;\n      return new ExtendedPoint(p.x, p.y, _1n, mod(p.x * p.y));\n    }\n    static toAffineBatch(points) {\n      const toInv = invertBatch(points.map((p) => p.z));\n      return points.map((p, i) => p.toAffine(toInv[i]));\n    }\n    static normalizeZ(points) {\n      return this.toAffineBatch(points).map(this.fromAffine);\n    }\n    equals(other) {\n      assertExtPoint(other);\n      const { x: X1, y: Y1, z: Z1 } = this;\n      const { x: X2, y: Y2, z: Z2 } = other;\n      const X1Z2 = mod(X1 * Z2);\n      const X2Z1 = mod(X2 * Z1);\n      const Y1Z2 = mod(Y1 * Z2);\n      const Y2Z1 = mod(Y2 * Z1);\n      return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\n    }\n    negate() {\n      return new ExtendedPoint(mod(-this.x), this.y, this.z, mod(-this.t));\n    }\n    double() {\n      const { x: X1, y: Y1, z: Z1 } = this;\n      const { a } = CURVE;\n      const A = mod(X1 * X1);\n      const B = mod(Y1 * Y1);\n      const C = mod(_2n * mod(Z1 * Z1));\n      const D = mod(a * A);\n      const x1y1 = X1 + Y1;\n      const E = mod(mod(x1y1 * x1y1) - A - B);\n      const G = D + B;\n      const F = G - C;\n      const H = D - B;\n      const X3 = mod(E * F);\n      const Y3 = mod(G * H);\n      const T3 = mod(E * H);\n      const Z3 = mod(F * G);\n      return new ExtendedPoint(X3, Y3, Z3, T3);\n    }\n    add(other) {\n      assertExtPoint(other);\n      const { x: X1, y: Y1, z: Z1, t: T1 } = this;\n      const { x: X2, y: Y2, z: Z2, t: T2 } = other;\n      const A = mod((Y1 - X1) * (Y2 + X2));\n      const B = mod((Y1 + X1) * (Y2 - X2));\n      const F = mod(B - A);\n      if (F === _0n)\n        return this.double();\n      const C = mod(Z1 * _2n * T2);\n      const D = mod(T1 * _2n * Z2);\n      const E = D + C;\n      const G = B + A;\n      const H = D - C;\n      const X3 = mod(E * F);\n      const Y3 = mod(G * H);\n      const T3 = mod(E * H);\n      const Z3 = mod(F * G);\n      return new ExtendedPoint(X3, Y3, Z3, T3);\n    }\n    subtract(other) {\n      return this.add(other.negate());\n    }\n    precomputeWindow(W) {\n      const windows = 1 + 256 / W;\n      const points = [];\n      let p = this;\n      let base = p;\n      for (let window = 0; window < windows; window++) {\n        base = p;\n        points.push(base);\n        for (let i = 1; i < 2 ** (W - 1); i++) {\n          base = base.add(p);\n          points.push(base);\n        }\n        p = base.double();\n      }\n      return points;\n    }\n    wNAF(n, affinePoint) {\n      if (!affinePoint && this.equals(ExtendedPoint.BASE))\n        affinePoint = Point.BASE;\n      const W = (affinePoint && affinePoint._WINDOW_SIZE) || 1;\n      if (256 % W) {\n        throw new Error('Point#wNAF: Invalid precomputation window, must be power of 2');\n      }\n      let precomputes = affinePoint && pointPrecomputes.get(affinePoint);\n      if (!precomputes) {\n        precomputes = this.precomputeWindow(W);\n        if (affinePoint && W !== 1) {\n          precomputes = ExtendedPoint.normalizeZ(precomputes);\n          pointPrecomputes.set(affinePoint, precomputes);\n        }\n      }\n      let p = ExtendedPoint.ZERO;\n      let f = ExtendedPoint.BASE;\n      const windows = 1 + 256 / W;\n      const windowSize = 2 ** (W - 1);\n      const mask = BigInt(2 ** W - 1);\n      const maxNumber = 2 ** W;\n      const shiftBy = BigInt(W);\n      for (let window = 0; window < windows; window++) {\n        const offset = window * windowSize;\n        let wbits = Number(n & mask);\n        n >>= shiftBy;\n        if (wbits > windowSize) {\n          wbits -= maxNumber;\n          n += _1n;\n        }\n        const offset1 = offset;\n        const offset2 = offset + Math.abs(wbits) - 1;\n        const cond1 = window % 2 !== 0;\n        const cond2 = wbits < 0;\n        if (wbits === 0) {\n          f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n        }\n        else {\n          p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n        }\n      }\n      return ExtendedPoint.normalizeZ([p, f])[0];\n    }\n    multiply(scalar, affinePoint) {\n      return this.wNAF(normalizeScalar(scalar, CURVE.l), affinePoint);\n    }\n    multiplyUnsafe(scalar) {\n      let n = normalizeScalar(scalar, CURVE.l, false);\n      const G = ExtendedPoint.BASE;\n      const P0 = ExtendedPoint.ZERO;\n      if (n === _0n)\n        return P0;\n      if (this.equals(P0) || n === _1n)\n        return this;\n      if (this.equals(G))\n        return this.wNAF(n);\n      let p = P0;\n      let d = this;\n      while (n > _0n) {\n        if (n & _1n)\n          p = p.add(d);\n        d = d.double();\n        n >>= _1n;\n      }\n      return p;\n    }\n    isSmallOrder() {\n      return this.multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO);\n    }\n    isTorsionFree() {\n      let p = this.multiplyUnsafe(CURVE.l / _2n).double();\n      if (CURVE.l % _2n)\n        p = p.add(this);\n      return p.equals(ExtendedPoint.ZERO);\n    }\n    toAffine(invZ) {\n      const { x, y, z } = this;\n      const is0 = this.equals(ExtendedPoint.ZERO);\n      if (invZ == null)\n        invZ = is0 ? _8n : invert(z);\n      const ax = mod(x * invZ);\n      const ay = mod(y * invZ);\n      const zz = mod(z * invZ);\n      if (is0)\n        return Point.ZERO;\n      if (zz !== _1n)\n        throw new Error('invZ was invalid');\n      return new Point(ax, ay);\n    }\n    fromRistrettoBytes() {\n      legacyRist();\n    }\n    toRistrettoBytes() {\n      legacyRist();\n    }\n    fromRistrettoHash() {\n      legacyRist();\n    }\n  }\n  ExtendedPoint.BASE = new ExtendedPoint(CURVE.Gx, CURVE.Gy, _1n, mod(CURVE.Gx * CURVE.Gy));\n  ExtendedPoint.ZERO = new ExtendedPoint(_0n, _1n, _1n, _0n);\n  function constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n  }\n  function assertExtPoint(other) {\n    if (!(other instanceof ExtendedPoint))\n      throw new TypeError('ExtendedPoint expected');\n  }\n  function assertRstPoint(other) {\n    if (!(other instanceof RistrettoPoint))\n      throw new TypeError('RistrettoPoint expected');\n  }\n  function legacyRist() {\n    throw new Error('Legacy method: switch to RistrettoPoint');\n  }\n  class RistrettoPoint {\n    constructor(ep) {\n      this.ep = ep;\n    }\n    static calcElligatorRistrettoMap(r0) {\n      const { d } = CURVE;\n      const r = mod(SQRT_M1 * r0 * r0);\n      const Ns = mod((r + _1n) * ONE_MINUS_D_SQ);\n      let c = BigInt(-1);\n      const D = mod((c - d * r) * mod(r + d));\n      let { isValid: Ns_D_is_sq, value: s } = uvRatio(Ns, D);\n      let s_ = mod(s * r0);\n      if (!edIsNegative(s_))\n        s_ = mod(-s_);\n      if (!Ns_D_is_sq)\n        s = s_;\n      if (!Ns_D_is_sq)\n        c = r;\n      const Nt = mod(c * (r - _1n) * D_MINUS_ONE_SQ - D);\n      const s2 = s * s;\n      const W0 = mod((s + s) * D);\n      const W1 = mod(Nt * SQRT_AD_MINUS_ONE);\n      const W2 = mod(_1n - s2);\n      const W3 = mod(_1n + s2);\n      return new ExtendedPoint(mod(W0 * W3), mod(W2 * W1), mod(W1 * W3), mod(W0 * W2));\n    }\n    static hashToCurve(hex) {\n      hex = ensureBytes(hex, 64);\n      const r1 = bytes255ToNumberLE(hex.slice(0, 32));\n      const R1 = this.calcElligatorRistrettoMap(r1);\n      const r2 = bytes255ToNumberLE(hex.slice(32, 64));\n      const R2 = this.calcElligatorRistrettoMap(r2);\n      return new RistrettoPoint(R1.add(R2));\n    }\n    static fromHex(hex) {\n      hex = ensureBytes(hex, 32);\n      const { a, d } = CURVE;\n      const emsg = 'RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint';\n      const s = bytes255ToNumberLE(hex);\n      if (!equalBytes(numberTo32BytesLE(s), hex) || edIsNegative(s))\n        throw new Error(emsg);\n      const s2 = mod(s * s);\n      const u1 = mod(_1n + a * s2);\n      const u2 = mod(_1n - a * s2);\n      const u1_2 = mod(u1 * u1);\n      const u2_2 = mod(u2 * u2);\n      const v = mod(a * d * u1_2 - u2_2);\n      const { isValid, value: I } = invertSqrt(mod(v * u2_2));\n      const Dx = mod(I * u2);\n      const Dy = mod(I * Dx * v);\n      let x = mod((s + s) * Dx);\n      if (edIsNegative(x))\n        x = mod(-x);\n      const y = mod(u1 * Dy);\n      const t = mod(x * y);\n      if (!isValid || edIsNegative(t) || y === _0n)\n        throw new Error(emsg);\n      return new RistrettoPoint(new ExtendedPoint(x, y, _1n, t));\n    }\n    toRawBytes() {\n      let { x, y, z, t } = this.ep;\n      const u1 = mod(mod(z + y) * mod(z - y));\n      const u2 = mod(x * y);\n      const u2sq = mod(u2 * u2);\n      const { value: invsqrt } = invertSqrt(mod(u1 * u2sq));\n      const D1 = mod(invsqrt * u1);\n      const D2 = mod(invsqrt * u2);\n      const zInv = mod(D1 * D2 * t);\n      let D;\n      if (edIsNegative(t * zInv)) {\n        let _x = mod(y * SQRT_M1);\n        let _y = mod(x * SQRT_M1);\n        x = _x;\n        y = _y;\n        D = mod(D1 * INVSQRT_A_MINUS_D);\n      }\n      else {\n        D = D2;\n      }\n      if (edIsNegative(x * zInv))\n        y = mod(-y);\n      let s = mod((z - y) * D);\n      if (edIsNegative(s))\n        s = mod(-s);\n      return numberTo32BytesLE(s);\n    }\n    toHex() {\n      return bytesToHex(this.toRawBytes());\n    }\n    toString() {\n      return this.toHex();\n    }\n    equals(other) {\n      assertRstPoint(other);\n      const a = this.ep;\n      const b = other.ep;\n      const one = mod(a.x * b.y) === mod(a.y * b.x);\n      const two = mod(a.y * b.y) === mod(a.x * b.x);\n      return one || two;\n    }\n    add(other) {\n      assertRstPoint(other);\n      return new RistrettoPoint(this.ep.add(other.ep));\n    }\n    subtract(other) {\n      assertRstPoint(other);\n      return new RistrettoPoint(this.ep.subtract(other.ep));\n    }\n    multiply(scalar) {\n      return new RistrettoPoint(this.ep.multiply(scalar));\n    }\n    multiplyUnsafe(scalar) {\n      return new RistrettoPoint(this.ep.multiplyUnsafe(scalar));\n    }\n  }\n  RistrettoPoint.BASE = new RistrettoPoint(ExtendedPoint.BASE);\n  RistrettoPoint.ZERO = new RistrettoPoint(ExtendedPoint.ZERO);\n  const pointPrecomputes = new WeakMap();\n  class Point {\n    constructor(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n    _setWindowSize(windowSize) {\n      this._WINDOW_SIZE = windowSize;\n      pointPrecomputes.delete(this);\n    }\n    static fromHex(hex, strict = true) {\n      const { d, P } = CURVE;\n      hex = ensureBytes(hex, 32);\n      const normed = hex.slice();\n      normed[31] = hex[31] & ~0x80;\n      const y = bytesToNumberLE(normed);\n      if (strict && y >= P)\n        throw new Error('Expected 0 < hex < P');\n      if (!strict && y >= POW_2_256)\n        throw new Error('Expected 0 < hex < 2**256');\n      const y2 = mod(y * y);\n      const u = mod(y2 - _1n);\n      const v = mod(d * y2 + _1n);\n      let { isValid, value: x } = uvRatio(u, v);\n      if (!isValid)\n        throw new Error('Point.fromHex: invalid y coordinate');\n      const isXOdd = (x & _1n) === _1n;\n      const isLastByteOdd = (hex[31] & 0x80) !== 0;\n      if (isLastByteOdd !== isXOdd) {\n        x = mod(-x);\n      }\n      return new Point(x, y);\n    }\n    static async fromPrivateKey(privateKey) {\n      return (await getExtendedPublicKey(privateKey)).point;\n    }\n    toRawBytes() {\n      const bytes = numberTo32BytesLE(this.y);\n      bytes[31] |= this.x & _1n ? 0x80 : 0;\n      return bytes;\n    }\n    toHex() {\n      return bytesToHex(this.toRawBytes());\n    }\n    toX25519() {\n      const { y } = this;\n      const u = mod((_1n + y) * invert(_1n - y));\n      return numberTo32BytesLE(u);\n    }\n    isTorsionFree() {\n      return ExtendedPoint.fromAffine(this).isTorsionFree();\n    }\n    equals(other) {\n      return this.x === other.x && this.y === other.y;\n    }\n    negate() {\n      return new Point(mod(-this.x), this.y);\n    }\n    add(other) {\n      return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(other)).toAffine();\n    }\n    subtract(other) {\n      return this.add(other.negate());\n    }\n    multiply(scalar) {\n      return ExtendedPoint.fromAffine(this).multiply(scalar, this).toAffine();\n    }\n  }\n  Point.BASE = new Point(CURVE.Gx, CURVE.Gy);\n  Point.ZERO = new Point(_0n, _1n);\n  class Signature {\n    constructor(r, s) {\n      this.r = r;\n      this.s = s;\n      this.assertValidity();\n    }\n    static fromHex(hex) {\n      const bytes = ensureBytes(hex, 64);\n      const r = Point.fromHex(bytes.slice(0, 32), false);\n      const s = bytesToNumberLE(bytes.slice(32, 64));\n      return new Signature(r, s);\n    }\n    assertValidity() {\n      const { r, s } = this;\n      if (!(r instanceof Point))\n        throw new Error('Expected Point instance');\n      normalizeScalar(s, CURVE.l, false);\n      return this;\n    }\n    toRawBytes() {\n      const u8 = new Uint8Array(64);\n      u8.set(this.r.toRawBytes());\n      u8.set(numberTo32BytesLE(this.s), 32);\n      return u8;\n    }\n    toHex() {\n      return bytesToHex(this.toRawBytes());\n    }\n  }\n  function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n      throw new Error('Expected Uint8Array list');\n    if (arrays.length === 1)\n      return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n      const arr = arrays[i];\n      result.set(arr, pad);\n      pad += arr.length;\n    }\n    return result;\n  }\n  const hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n  function bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n      throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n      hex += hexes[uint8a[i]];\n    }\n    return hex;\n  }\n  function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n      throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n      throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n      const j = i * 2;\n      const hexByte = hex.slice(j, j + 2);\n      const byte = Number.parseInt(hexByte, 16);\n      if (Number.isNaN(byte) || byte < 0)\n        throw new Error('Invalid byte sequence');\n      array[i] = byte;\n    }\n    return array;\n  }\n  function numberTo32BytesBE(num) {\n    const length = 32;\n    const hex = num.toString(16).padStart(length * 2, '0');\n    return hexToBytes(hex);\n  }\n  function numberTo32BytesLE(num) {\n    return numberTo32BytesBE(num).reverse();\n  }\n  function edIsNegative(num) {\n    return (mod(num) & _1n) === _1n;\n  }\n  function bytesToNumberLE(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n      throw new Error('Expected Uint8Array');\n    return BigInt('0x' + bytesToHex(Uint8Array.from(uint8a).reverse()));\n  }\n  const MAX_255B = BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');\n  function bytes255ToNumberLE(bytes) {\n    return mod(bytesToNumberLE(bytes) & MAX_255B);\n  }\n  function mod(a, b = CURVE.P) {\n    const res = a % b;\n    return res >= _0n ? res : b + res;\n  }\n  function invert(number, modulo = CURVE.P) {\n    if (number === _0n || modulo <= _0n) {\n      throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    let a = mod(number, modulo);\n    let b = modulo;\n    let x = _0n, u = _1n;\n    while (a !== _0n) {\n      const q = b / a;\n      const r = b % a;\n      const m = x - u * q;\n      b = a, a = r, x = u, u = m;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n      throw new Error('invert: does not exist');\n    return mod(x, modulo);\n  }\n  function invertBatch(nums, p = CURVE.P) {\n    const tmp = new Array(nums.length);\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n      if (num === _0n)\n        return acc;\n      tmp[i] = acc;\n      return mod(acc * num, p);\n    }, _1n);\n    const inverted = invert(lastMultiplied, p);\n    nums.reduceRight((acc, num, i) => {\n      if (num === _0n)\n        return acc;\n      tmp[i] = mod(acc * tmp[i], p);\n      return mod(acc * num, p);\n    }, inverted);\n    return tmp;\n  }\n  function pow2(x, power) {\n    const { P } = CURVE;\n    let res = x;\n    while (power-- > _0n) {\n      res *= res;\n      res %= P;\n    }\n    return res;\n  }\n  function pow_2_252_3(x) {\n    const { P } = CURVE;\n    const _5n = BigInt(5);\n    const _10n = BigInt(10);\n    const _20n = BigInt(20);\n    const _40n = BigInt(40);\n    const _80n = BigInt(80);\n    const x2 = (x * x) % P;\n    const b2 = (x2 * x) % P;\n    const b4 = (pow2(b2, _2n) * b2) % P;\n    const b5 = (pow2(b4, _1n) * x) % P;\n    const b10 = (pow2(b5, _5n) * b5) % P;\n    const b20 = (pow2(b10, _10n) * b10) % P;\n    const b40 = (pow2(b20, _20n) * b20) % P;\n    const b80 = (pow2(b40, _40n) * b40) % P;\n    const b160 = (pow2(b80, _80n) * b80) % P;\n    const b240 = (pow2(b160, _80n) * b80) % P;\n    const b250 = (pow2(b240, _10n) * b10) % P;\n    const pow_p_5_8 = (pow2(b250, _2n) * x) % P;\n    return { pow_p_5_8, b2 };\n  }\n  function uvRatio(u, v) {\n    const v3 = mod(v * v * v);\n    const v7 = mod(v3 * v3 * v);\n    const pow = pow_2_252_3(u * v7).pow_p_5_8;\n    let x = mod(u * v3 * pow);\n    const vx2 = mod(v * x * x);\n    const root1 = x;\n    const root2 = mod(x * SQRT_M1);\n    const useRoot1 = vx2 === u;\n    const useRoot2 = vx2 === mod(-u);\n    const noRoot = vx2 === mod(-u * SQRT_M1);\n    if (useRoot1)\n      x = root1;\n    if (useRoot2 || noRoot)\n      x = root2;\n    if (edIsNegative(x))\n      x = mod(-x);\n    return { isValid: useRoot1 || useRoot2, value: x };\n  }\n  function invertSqrt(number) {\n    return uvRatio(_1n, number);\n  }\n  function modlLE(hash) {\n    return mod(bytesToNumberLE(hash), CURVE.l);\n  }\n  function equalBytes(b1, b2) {\n    if (b1.length !== b2.length) {\n      return false;\n    }\n    for (let i = 0; i < b1.length; i++) {\n      if (b1[i] !== b2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function ensureBytes(hex, expectedLength) {\n    const bytes = hex instanceof Uint8Array ? Uint8Array.from(hex) : hexToBytes(hex);\n    if (typeof expectedLength === 'number' && bytes.length !== expectedLength)\n      throw new Error(`Expected ${expectedLength} bytes`);\n    return bytes;\n  }\n  function normalizeScalar(num, max, strict = true) {\n    if (!max)\n      throw new TypeError('Specify max value');\n    if (typeof num === 'number' && Number.isSafeInteger(num))\n      num = BigInt(num);\n    if (typeof num === 'bigint' && num < max) {\n      if (strict) {\n        if (_0n < num)\n          return num;\n      }\n      else {\n        if (_0n <= num)\n          return num;\n      }\n    }\n    throw new TypeError('Expected valid scalar: 0 < scalar < max');\n  }\n  function adjustBytes25519(bytes) {\n    bytes[0] &= 248;\n    bytes[31] &= 127;\n    bytes[31] |= 64;\n    return bytes;\n  }\n  function decodeScalar25519(n) {\n    return bytesToNumberLE(adjustBytes25519(ensureBytes(n, 32)));\n  }\n  function checkPrivateKey(key) {\n    key =\n      typeof key === 'bigint' || typeof key === 'number'\n        ? numberTo32BytesBE(normalizeScalar(key, POW_2_256))\n        : ensureBytes(key);\n    if (key.length !== 32)\n      throw new Error(`Expected 32 bytes`);\n    return key;\n  }\n  function getKeyFromHash(hashed) {\n    const head = adjustBytes25519(hashed.slice(0, 32));\n    const prefix = hashed.slice(32, 64);\n    const scalar = modlLE(head);\n    const point = Point.BASE.multiply(scalar);\n    const pointBytes = point.toRawBytes();\n    return { head, prefix, scalar, point, pointBytes };\n  }\n  let _sha512Sync;\n  function sha512s(...m) {\n    if (typeof _sha512Sync !== 'function')\n      throw new Error('utils.sha512Sync must be set to use sync methods');\n    return _sha512Sync(...m);\n  }\n  async function getExtendedPublicKey(key) {\n    return getKeyFromHash(await utils.sha512(checkPrivateKey(key)));\n  }\n  function getExtendedPublicKeySync(key) {\n    return getKeyFromHash(sha512s(checkPrivateKey(key)));\n  }\n  async function getPublicKey(privateKey) {\n    return (await getExtendedPublicKey(privateKey)).pointBytes;\n  }\n  function getPublicKeySync(privateKey) {\n    return getExtendedPublicKeySync(privateKey).pointBytes;\n  }\n  async function sign(message, privateKey) {\n    message = ensureBytes(message);\n    const { prefix, scalar, pointBytes } = await getExtendedPublicKey(privateKey);\n    const r = modlLE(await utils.sha512(prefix, message));\n    const R = Point.BASE.multiply(r);\n    const k = modlLE(await utils.sha512(R.toRawBytes(), pointBytes, message));\n    const s = mod(r + k * scalar, CURVE.l);\n    return new Signature(R, s).toRawBytes();\n  }\n  function signSync(message, privateKey) {\n    message = ensureBytes(message);\n    const { prefix, scalar, pointBytes } = getExtendedPublicKeySync(privateKey);\n    const r = modlLE(sha512s(prefix, message));\n    const R = Point.BASE.multiply(r);\n    const k = modlLE(sha512s(R.toRawBytes(), pointBytes, message));\n    const s = mod(r + k * scalar, CURVE.l);\n    return new Signature(R, s).toRawBytes();\n  }\n  function prepareVerification(sig, message, publicKey) {\n    message = ensureBytes(message);\n    if (!(publicKey instanceof Point))\n      publicKey = Point.fromHex(publicKey, false);\n    const { r, s } = sig instanceof Signature ? sig.assertValidity() : Signature.fromHex(sig);\n    const SB = ExtendedPoint.BASE.multiplyUnsafe(s);\n    return { r, s, SB, pub: publicKey, msg: message };\n  }\n  function finishVerification(publicKey, r, SB, hashed) {\n    const k = modlLE(hashed);\n    const kA = ExtendedPoint.fromAffine(publicKey).multiplyUnsafe(k);\n    const RkA = ExtendedPoint.fromAffine(r).add(kA);\n    return RkA.subtract(SB).multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO);\n  }\n  async function verify(sig, message, publicKey) {\n    const { r, SB, msg, pub } = prepareVerification(sig, message, publicKey);\n    const hashed = await utils.sha512(r.toRawBytes(), pub.toRawBytes(), msg);\n    return finishVerification(pub, r, SB, hashed);\n  }\n  function verifySync(sig, message, publicKey) {\n    const { r, SB, msg, pub } = prepareVerification(sig, message, publicKey);\n    const hashed = sha512s(r.toRawBytes(), pub.toRawBytes(), msg);\n    return finishVerification(pub, r, SB, hashed);\n  }\n  const sync = {\n    getExtendedPublicKey: getExtendedPublicKeySync,\n    getPublicKey: getPublicKeySync,\n    sign: signSync,\n    verify: verifySync,\n  };\n  async function getSharedSecret(privateKey, publicKey) {\n    const { head } = await getExtendedPublicKey(privateKey);\n    const u = Point.fromHex(publicKey).toX25519();\n    return curve25519.scalarMult(head, u);\n  }\n  Point.BASE._setWindowSize(8);\n  function cswap(swap, x_2, x_3) {\n    const dummy = mod(swap * (x_2 - x_3));\n    x_2 = mod(x_2 - dummy);\n    x_3 = mod(x_3 + dummy);\n    return [x_2, x_3];\n  }\n  function montgomeryLadder(pointU, scalar) {\n    const { P } = CURVE;\n    const u = normalizeScalar(pointU, P);\n    const k = normalizeScalar(scalar, P);\n    const a24 = BigInt(121665);\n    const x_1 = u;\n    let x_2 = _1n;\n    let z_2 = _0n;\n    let x_3 = u;\n    let z_3 = _1n;\n    let swap = _0n;\n    let sw;\n    for (let t = BigInt(255 - 1); t >= _0n; t--) {\n      const k_t = (k >> t) & _1n;\n      swap ^= k_t;\n      sw = cswap(swap, x_2, x_3);\n      x_2 = sw[0];\n      x_3 = sw[1];\n      sw = cswap(swap, z_2, z_3);\n      z_2 = sw[0];\n      z_3 = sw[1];\n      swap = k_t;\n      const A = x_2 + z_2;\n      const AA = mod(A * A);\n      const B = x_2 - z_2;\n      const BB = mod(B * B);\n      const E = AA - BB;\n      const C = x_3 + z_3;\n      const D = x_3 - z_3;\n      const DA = mod(D * A);\n      const CB = mod(C * B);\n      const dacb = DA + CB;\n      const da_cb = DA - CB;\n      x_3 = mod(dacb * dacb);\n      z_3 = mod(x_1 * mod(da_cb * da_cb));\n      x_2 = mod(AA * BB);\n      z_2 = mod(E * (AA + mod(a24 * E)));\n    }\n    sw = cswap(swap, x_2, x_3);\n    x_2 = sw[0];\n    x_3 = sw[1];\n    sw = cswap(swap, z_2, z_3);\n    z_2 = sw[0];\n    z_3 = sw[1];\n    const { pow_p_5_8, b2 } = pow_2_252_3(z_2);\n    const xp2 = mod(pow2(pow_p_5_8, BigInt(3)) * b2);\n    return mod(x_2 * xp2);\n  }\n  function encodeUCoordinate(u) {\n    return numberTo32BytesLE(mod(u, CURVE.P));\n  }\n  function decodeUCoordinate(uEnc) {\n    const u = ensureBytes(uEnc, 32);\n    u[31] &= 127;\n    return bytesToNumberLE(u);\n  }\n  const curve25519 = {\n    BASE_POINT_U: '0900000000000000000000000000000000000000000000000000000000000000',\n    scalarMult(privateKey, publicKey) {\n      const u = decodeUCoordinate(publicKey);\n      const p = decodeScalar25519(privateKey);\n      const pu = montgomeryLadder(u, p);\n      if (pu === _0n)\n        throw new Error('Invalid private or public key received');\n      return encodeUCoordinate(pu);\n    },\n    scalarMultBase(privateKey) {\n      return curve25519.scalarMult(privateKey, curve25519.BASE_POINT_U);\n    },\n  };\n  const crypto = {\n    node: nodeCrypto,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n  };\n  const utils = {\n    bytesToHex,\n    hexToBytes,\n    concatBytes,\n    getExtendedPublicKey,\n    mod,\n    invert,\n    TORSION_SUBGROUP: [\n      '0100000000000000000000000000000000000000000000000000000000000000',\n      'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a',\n      '0000000000000000000000000000000000000000000000000000000000000080',\n      '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05',\n      'ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f',\n      '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85',\n      '0000000000000000000000000000000000000000000000000000000000000000',\n      'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa',\n    ],\n    hashToPrivateScalar: (hash) => {\n      hash = ensureBytes(hash);\n      if (hash.length < 40 || hash.length > 1024)\n        throw new Error('Expected 40-1024 bytes of private key as per FIPS 186');\n      return mod(bytesToNumberLE(hash), CURVE.l - _1n) + _1n;\n    },\n    randomBytes: (bytesLength = 32) => {\n      if (crypto.web) {\n        return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n      }\n      else if (crypto.node) {\n        const { randomBytes } = crypto.node;\n        return new Uint8Array(randomBytes(bytesLength).buffer);\n      }\n      else {\n        throw new Error(\"The environment doesn't have randomBytes function\");\n      }\n    },\n    randomPrivateKey: () => {\n      return utils.randomBytes(32);\n    },\n    sha512: async (...messages) => {\n      const message = concatBytes(...messages);\n      if (crypto.web) {\n        const buffer = await crypto.web.subtle.digest('SHA-512', message.buffer);\n        return new Uint8Array(buffer);\n      }\n      else if (crypto.node) {\n        return Uint8Array.from(crypto.node.createHash('sha512').update(message).digest());\n      }\n      else {\n        throw new Error(\"The environment doesn't have sha512 function\");\n      }\n    },\n    precompute(windowSize = 8, point = Point.BASE) {\n      const cached = point.equals(Point.BASE) ? point : new Point(point.x, point.y);\n      cached._setWindowSize(windowSize);\n      cached.multiply(_2n);\n      return cached;\n    },\n    sha512Sync: undefined,\n  };\n  Object.defineProperties(utils, {\n    sha512Sync: {\n      configurable: false,\n      get() {\n        return _sha512Sync;\n      },\n      set(val) {\n        if (!_sha512Sync)\n          _sha512Sync = val;\n      },\n    },\n  });\n\n  exports.CURVE = CURVE;\n  exports.ExtendedPoint = ExtendedPoint;\n  exports.Point = Point;\n  exports.RistrettoPoint = RistrettoPoint;\n  exports.Signature = Signature;\n  exports.curve25519 = curve25519;\n  exports.getPublicKey = getPublicKey;\n  exports.getSharedSecret = getSharedSecret;\n  exports.sign = sign;\n  exports.sync = sync;\n  exports.utils = utils;\n  exports.verify = verify;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [666], () => (__webpack_require__(7046)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t348: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = this[\"webpackChunkapi\"] = this[\"webpackChunkapi\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(666).then(next);\n};","","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n",""],"names":["APP_ENV","process","env","APP_NAME","APP_VERSION","APP_ENV_MARKER","undefined","DEBUG","DEBUG_MORE","IS_PRODUCTION","IS_TEST","IS_PERF","IS_EXTENSION","IS_FIREFOX_EXTENSION","IS_PACKAGED_ELECTRON","IS_CAPACITOR","IS_ANDROID_DIRECT","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_REPO_URL","BASE_URL","BOT_USERNAME","SWAP_FEE_ADDRESS","STRICTERDOM_ENABLED","DEBUG_ALERT_MSG","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","MNEMONIC_COUNT","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_DEFAULT_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","TON_SYMBOL","DEFAULT_LANDSCAPE_ACTION_TAB_ID","DEFAULT_DECIMAL_PLACES","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","MAIN_ACCOUNT_ID","TONHTTPAPI_MAINNET_URL","TONHTTPAPI_MAINNET_API_KEY","ELECTRON_TONHTTPAPI_MAINNET_API_KEY","TONHTTPAPI_V3_MAINNET_API_URL","TONHTTPAPI_V3_MAINNET_API_KEY","TONAPIIO_MAINNET_URL","TONHTTPAPI_TESTNET_URL","TONHTTPAPI_TESTNET_API_KEY","ELECTRON_TONHTTPAPI_TESTNET_API_KEY","TONHTTPAPI_V3_TESTNET_API_URL","TONHTTPAPI_V3_TESTNET_API_KEY","TONAPIIO_TESTNET_URL","BRILLIANT_API_BASE_URL","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","SUPPORT_USERNAME","MY_TON_WALLET_PROMO_URL","TELEGRAM_WEB_URL","TON_EXPLORER_BASE_MAINNET_URL","TON_EXPLORER_BASE_TESTNET_URL","TON_EXPLORER_NAME","TOKEN_EXPLORER_MAINNET_URL","TOKEN_EXPLORER_TESTNET_URL","TOKEN_EXPLORER_NAME","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","EMPTY_HASH_VALUE","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","TONCOIN_SLUG","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","LANG_CACHE_NAME","LANG_LIST","langCode","name","nativeName","rtl","STAKING_CYCLE_DURATION_MS","VALIDATION_PERIOD_MS","ONE_TON","MIN_BALANCE_FOR_UNSTAKE","STAKING_FORWARD_AMOUNT","DEFAULT_FEE","STAKING_POOLS","split","LIQUID_POOL","LIQUID_JETTON","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","NFT_FRAGMENT_COLLECTIONS","Set","TON_DNS_COLLECTION","MYCOIN_TOKEN","MYCOIN_SLUG","MYCOIN_TOKEN_TESTNET","MYCOIN_SLUG_TESTNET","TOKEN_INFO","toncoin","symbol","slug","cmcSlug","quote","price","priceUsd","percentChange24h","decimals","TON_BLOCKCHAIN","INIT_SWAP_ASSETS","blockchain","isPopular","image","contract","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","INDEXED_DB_NAME","INDEXED_DB_STORE_NAME","WINDOW_PROVIDER_CHANNEL","MIN_ASSETS_TAB_VIEW","DEFAULT_PRICE_CURRENCY","SHORT_CURRENCY_SYMBOL_MAP","USD","EUR","RUB","CNY","CURRENCY_LIST","value","BURN_ADDRESS","DEFAULT_WALLET_VERSION","POPULAR_WALLET_VERSIONS","DEFAULT_TIMEOUT","DEFAULT_RETRIES","DEFAULT_ERROR_PAUSE","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","NFT_BATCH_SIZE","NOTCOIN_VOUCHERS_ADDRESS","BURN_CHUNK_DURATION_APPROX_SEC","NOTCOIN_FORWARD_TON_AMOUNT","NOTCOIN_EXCHANGERS","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","RE_LINK_TEMPLATE","RE_TG_BOT_MENTION","DIESEL_ADDRESS","DIESEL_TOKENS","DP","RM","MAX_DP","MAX_POWER","NE","PE","STRICT","NAME","INVALID","INVALID_DP","INVALID_RM","DIV_BY_ZERO","P","UNDEFINED","NUMERIC","_Big_","Big","n","x","s","e","c","slice","strict","TypeError","String","parse","constructor","prototype","roundDown","roundHalfUp","roundHalfEven","roundUp","i","nl","test","Error","charAt","indexOf","replace","search","substring","length","round","sd","rm","more","xc","unshift","pop","stringify","doExponential","isNonzero","join","abs","cmp","y","isneg","yc","j","k","l","div","a","b","dp","bl","bt","ri","bz","ai","al","r","rl","q","qc","qi","p","push","shift","eq","gt","gte","lt","lte","minus","sub","t","xlty","plus","xe","ye","reverse","mod","ygtx","times","neg","add","pow","one","prec","sqrt","half","Math","toExponential","mul","Array","toFixed","Symbol","for","toJSON","toString","toNumber","Number","toPrecision","valueOf","ten","fromDecimal","BigInt","toDecimal","noFloor","arguments","toBig","roundDecimal","getIsPositiveDecimal","startsWith","random","min","max","floor","sample","arr","randomBytes","size","self","crypto","getRandomValues","Uint8Array","BIGINT_PREFIX","bigintReviver","key","bigintAbs","bigintDivideToNumber","num","bigintMultiplyToNumber","bigintRandom","bytes","randomNumber","randomBigInt","bigintCountBits","binaryString","logDebugError","message","_len","args","_key","console","error","logDebug","_len2","_key2","log","DETACHED_TAB_URL","callbackState","Map","createPostMessageInterface","api","channel","target","shouldIgnoreErrors","sendToOrigin","data","transferables","postMessage","handleErrors","onmessage","_message$data","onMessage","createExtensionInterface","portName","cleanUpdater","withAutoInit","chrome","runtime","onConnect","addListener","port","_port$sender","url","sender","includes","origin","URL","dAppUpdater","update","type","json","JSON","onDisconnect","onUpdate","_api$init","promise","init","call","messageId","withCallback","callback","callbackArgs","lastArg","isTransferable","set","response","arrayBuffer","err","delete","get","isCanceled","obj","ArrayBuffer","ImageBitmap","onerror","_e$error","addEventListener","_e$reason","reason","Workchain","ApiLiquidUnstakeMode","ApiCommonError","ApiTransactionDraftError","ApiTransactionError","parseAccountId","accountId","id","network","buildAccountId","account","isMnemonicPrivateKey","mnemonic","StorageType","generateUniqueId","Date","now","ConnectorClass","shouldUseJson","targetOrigin","_defineProperty","destroy","request","messageData","requestStates","requestStatesByCallback","payload","requestState","Promise","resolve","reject","Object","assign","catch","finally","cancelCallback","progressCallback","_requestState$callbac","_data$error","rawData","createConnector","worker","connector","handleMessage","_ref","removeEventListener","createExtensionConnector","getInitArgs","connect","initWindowConnector","callWindow","methodName","storage","getItem","result","setItem","removeItem","clear","getKeys","local","_await$storage$get","remove","bind","getAll","setMany","getMany","buildCollectionByKey","collection","reduce","byKey","member","groupBy","groupKey","mapValues","keys","newByKey","index","pick","object","pickTruthy","omit","stringKeys","map","savedKeys","filter","has","omitUndefined","stringKey","orderBy","orderRule","mode","compareValues","currentOrderRule","isAsc","aValue","bValue","condition","isArray","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","sort","unique","array","from","compact","Boolean","areSortedArraysEqual","array1","array2","every","item","chunkSize","cloneDeep","isObject","acc","isLiteralObject","findLast","predicate","cursor","range","start","end","fromKeyValueArrays","values","extractKey","findDifference","set2","element","idb","store","createStore","del","items","entries","withPromise","fn","localStorage","capacitorStorage","extensionStorage","IndexedDb","LocalStorage","ExtensionLocal","CapacitorStorage","MIN_ACCOUNT_NUMBER","loginResolve","loginPromise","getAccountIds","getAccountIdWithMnemonic","_Object$entries$find","byId","fetchStoredAccounts","find","ledger","getNewAccountId","ids","fetchStoredPublicKey","fetchStoredAccount","publicKey","fetchStoredAddress","address","getAccountValue","updateStoredAccount","partial","setAccountValue","_await$storage$getIte","removeAccountValue","removedValue","restData","removeNetworkAccountsValue","getCurrentNetwork","getCurrentAccountId","getCurrentAccountIdOrFail","waitLogin","sha256","subtle","digest","bytesToHex","Buffer","hexToBytes","hex","bytesToBase64","base64ToBytes","base64","base64ToString","isKnownStakingPool","some","poolPart","endsWith","tonWebMnemonic","nacl","PBKDF2_IMPORT_KEY_ARGS","PBKDF2_DERIVE_KEY_ARGS","iterations","hash","PBKDF2_DERIVE_KEY_TYPE","generateMnemonic","validateMnemonic","privateKeyHexToKeyPair","privateKeyHex","sign","keyPair","fromSeed","mnemonicToKeyPair","encryptMnemonic","password","plaintext","salt","keyMaterial","importKey","TextEncoder","encode","deriveKey","iv","ptUint8","ctBuffer","encrypt","ctArray","ctBase64","btoa","fromCharCode","ivHex","saltHex","decryptMnemonic","encrypted","decryptMnemonicLegacy","encryptedData","match","parseInt","ctStr","atob","ctUint8","ch","charCodeAt","plainBuffer","decrypt","TextDecoder","decode","pwUtf8","pwHash","byte","alg","fetchMnemonic","mnemonicEncrypted","tryMigratingMnemonicEncryption","decryptedMnemonic","DebugError","all","fetchPrivateKey","secretKey","privateKey","fetchKeyPair","rawSign","dataHex","signature","detached","verifyPassword","stringifyTxId","parseTxId","txId","buildTokenSlug","minterAddress","addressPart","toLowerCase","generateQueryId","IPFS_GATEWAY_BASE_URL","fetchJsonMetadata","fixIpfsUrl","reserveUrl","fetchJson","fetch","ok","status","RE_SYMBOL_WITH_COMBINING_MARKS","RE_LINEBREAK_COMBINING_MARKS","RE_SPACE_CHARS","RE_FAKE_DOTS","RE_EMPTY_CHARS","checkLNPRegex","checkLNP","str","clean","characters","alphabetMap","confusablesMap","base","alts","char","cleanText","newStr","ApiBaseError","displayError","ApiUserRejectsError","ApiServerError","statusCode","ServerError","ApiUnsupportedVersionError","UnsupportedVersion","ApiHardwareBlindSigningNotEnabled","HardwareBlindSigningNotEnabled","AbortOperationError","maybeApiErrors","handleServerError","debounce","ms","shouldRunFirst","shouldRunLast","waitingTimeout","clearTimeout","setTimeout","throttle","interval","isPending","_args","setInterval","clearInterval","throttleWithTickEnd","throttleWith","onTickEnd","schedulerFn","waiting","_len3","_key3","onIdle","cb","timeout","requestIdleCallback","pause","rafPromise","fastRaf","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","requestAnimationFrame","currentCallbacks","forEach","window","currentTimeoutCallbacks","onTickEndCallbacks","then","beforeUnloadCallbacks","onBeforeUnload","isLast","waitFor","attempts","MAX_TIMEOUT","urlObject","searchParams","append","fetchWithRetry","options","retries","timeouts","shouldSkipRetryFn","isNotTemporaryError","_timeouts","fetchWithTimeout","_err$message","shouldSkipRetry","controller","AbortController","abort","signal","cache","handleFetchErrors","ignoreHttpCodes","_error","errors","_errors$","msg","BAD_REQUEST_CODE","callBackendPost","path","authToken","isAllowBadRequest","method","headers","body","callBackendGet","knownAddresses","scamMarkers","trustedSites","trustedCollections","tryUpdateKnownAddresses","RegExp","getKnownAddresses","getScamMarkers","getKnownAddressInfo","checkIsTrustedSite","domain","checkIsTrustedCollection","checkHasScamLink","text","matches","matchAll","_match$groups","host","groups","checkHasTelegramBotMention","TOKEN_TRANSFER_TONCOIN_AMOUNT","TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT","NFT_TRANSFER_TONCOIN_AMOUNT","NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT","STAKE_COMMENT","UNSTAKE_COMMENT","ATTEMPTS","DEFAULT_DECIMALS","DEFAULT_IS_BOUNCEABLE","WALLET_IS_BOUNCEABLE","FEE_FACTOR","ALL_WALLET_VERSIONS","WORKCHAIN","BaseChain","TRANSFER_TIMEOUT_SEC","OpCode","JettonOpCode","NftOpCode","LiquidStakingOpCode","VestingV1OpCode","SingleNominatorOpCode","DnsOpCode","OtherOpCode","ContractType","DnsCategory","DNS_CATEGORY_HASH_MAP","dns_next_resolver","wallet","site","DNS_ZONES_MAP","KnownContracts","simpleR1","Wallet","simpleR2","simpleR3","v2R1","v2R2","v3R1","v3R2","v4R1","v4R2","W5","highloadV2","nominatorPool","Staking","multisig","multisigV2","vesting","multisigNew","dedustPool","isSwapAllowed","dedustVaultNative","dedustVaultJetton","stonPtonWallet","stonRouter","megatonWtonMaster","megatonRouter","ELECTRON_ORIGIN","environment","setEnvironment","_self","isDappSupported","isElectron","isSseSupported","isNativeBottomSheet","apiHeaders","tonhttpapiMainnetKey","tonhttpapiTestnetKey","getEnvironment","axios","buildFullPath","settle","buildURL","utils","isFormData","isStandardBrowserEnv","isUndefined","fetchAdapter","config","createRequest","promiseChain","getResponse","res","timeoutErrorMessage","createError","race","stageOne","statusText","Headers","responseType","blob","formData","auth","username","decodeURI","encodeURIComponent","toUpperCase","integrity","redirect","referrer","withCredentials","credentials","fullPath","baseURL","params","paramsSerializer","Request","code","AxiosError","enhanceError","isAxiosError","description","number","fileName","lineNumber","columnNumber","stack","WeakMap","withCacheAsync","canBeCached","fnCache","cacheKey","buildCacheKey","cached","newValue","arg","beginCell","contractAddress","dnsItemConfigToCell","endCell","DnsItem","createFromAddress","createFromConfig","workchain","getDomain","provider","readString","getTelemintDomain","parts","getNftData","readBigNumber","collectionAddress","readAddress","owner","readAddressOpt","Op","Errors","SendMode","toNano","jettonMinterConfigToCell","storeCoins","storeAddress","admin","storeRef","content","wallet_code","jettonContentToCell","storeUint","storeStringTail","uri","JettonMinter","sendDeploy","via","internal","sendMode","PAY_GAS_SEPARATELY","jettonInternalTransfer","jetton_amount","forward_ton_amount","response_addr","query_id","internal_transfer","storeBit","mintMessage","to","total_ton_amount","mintMsg","storeMaybeRef","mint","sendMint","discoveryMessage","include_address","sendDiscovery","changeAdminMessage","newOwner","change_admin","sendChangeAdmin","changeContentMessage","change_content","sendChangeContent","getWalletAddress","cell","getJettonData","totalSupply","mintable","readBoolean","adminAddress","readCell","walletCode","getTotalSupply","getAdminAddress","getContent","jettonWalletConfigToCell","JettonWallet","getJettonBalance","state","getState","transferMessage","responseAddress","customPayload","forwardPayload","sendTransfer","burnMessage","sendBurn","withdrawTonsMessage","sendWithdrawTons","withdrawJettonsMessage","amount","sendWithdrawJettons","getWalletData","balance","minter","TonClient","TonCoreClient","axiosRetry","shouldResetTimeout","retryDelay","retryCount","onRetry","retryNumber","requestConfig","_error$response","parameters","initParameters","getWalletInfo","callRpc","getAddressInfo","sendRequest","endpoint","jsonrpc","sendFile","src","boc","apiUrl","apiKey","Address","Builder","Cell","WalletContractV1R1","WalletContractV1R2","WalletContractV1R3","WalletContractV2R1","WalletContractV2R2","WalletContractV3R1","WalletContractV3R2","WalletContractV4","WalletContractV5R1","axiosFetchAdapter","defaults","adapter","TON_MAX_COMMENT_BYTES","clientByNetwork","walletClassMap","getTonClient","mainnet","testnet","getTonWalletContract","publicKeyHex","version","walletClass","create","resolveTokenWalletAddress","open","walletAddress","toBase64Address","resolveTokenMinterAddress","tokenWalletAddress","tokenWallet","getWalletPublicKey","callGetMethod","bigintKey","padStart","getJettonMinterData","oneCellFromBoc","fromBoc","isBounceable","urlSafe","bounceable","testOnly","toRawAddress","toRawString","buildTokenTransferBody","queryId","tokenAmount","toAddress","forwardAmount","builder","Transfer","freeBytes","availableBits","packBytesAsSnake","storeBuffer","parseBase64","fromBase64","commentToBytes","comment","buffer","startBuffer","alloc","writeUInt32BE","Comment","maxBytes","packBytesAsSnakeCell","mainBuilder","prevBuilder","currentBuilder","_prevBuilder","_prevBuilder2","asCell","createNestedCell","maxCellSize","dataSlice","remainingData","packBytesAsSnakeForEncryptedData","ROOT_BUILDER_BYTES","MAX_CELLS_AMOUNT","rootBuilder","buildLiquidStakingDepositBody","Deposit","buildLiquidStakingWithdrawBody","waitTillRoundEnd","fillOrKill","buildLiquidStakingWithdrawCustomPayload","Burn","getTokenBalance","parseAddress","isRaw","parseRaw","isValid","isFriendly","parseFriendly","isUserFriendly","getIsRawAddress","getDnsItemDomain","nftData","zone","ADDRESS_BOOK_CHUNK_SIZE","fetchTransactions","limit","toTxId","fromTxId","fromLt","toLt","callApiV3","start_lt","end_lt","transactions","rawTransactions","address_book","addressBook","_rawTransactions$","rawTx","parseRawTransaction","flat","total_fees","fee","compute_ph","exit_code","exitCode","timestamp","isIncoming","in_msg","source","inMsgHash","msgs","out_msgs","destination","fromAddress","user_friendly","normalizedAddress","shouldHide","extraData","getRawBody","fetchLatestTxId","message_content","fetchAddressBook","addresses","chunks","results","chunk","fixAddressFormat","baseUrl","Api","HttpClient","MAX_LIMIT","EVENTS_LIMIT","apiByNetwork","getApi","baseApiParams","customFetch","fetchJettonBalances","accounts","getAccountJettonsBalances","balances","fetchNftItems","nft","getNftItemsByAddresses","account_ids","nft_items","fetchAccountNfts","offset","getAccountNftItems","indirect_ownership","fetchAccountEvents","fromSec","getAccountEvents","start_date","events","BitReader","BitString","Slice","Dictionary","OFFCHAIN_CONTENT_PREFIX","SNAKE_PREFIX","parseJettonWalletMsgBody","beginParse","opCode","loadUint","InternalTransfer","jettonAmount","loadCoins","loadMaybeAddress","encryptedComment","loadBit","isSeparateCell","remainingBits","remainingRefs","loadRef","forwardOpCode","readSnakeBytes","Encrypted","operation","fixBase64ImageData","decodedData","dictSnakeBufferValue","sliceToVal","v","isFirst","concat","loadBuffer","serialize","jettonOnChainMetadataSpec","fetchJettonMetadata","metadata","asSlice","prefix","contentUri","fetchJettonOffchainMetadata","parseJettonOnchainMetadata","offchainMetadata","dict","loadDict","Keys","_dict$get","sha256Key","val","parseWalletTransactionBody","transaction","_transaction$extraDat","dataToSlice","parsedPayload","parsePayloadSlice","parsePayloadBase64","_await$parsePayloadSl","shouldLoadItems","transactionDebug","loadUintBig","_forwardPayload","loadAddress","responseDestination","loadMaybeRef","storeBits","loadBits","toBoc","TransferOwnership","_nft","readForwardPayloadCell","readComment","rawNft","buildNft","nftAddress","nftName","OwnershipAssigned","prevOwner","addressObj","isLiquidUnstakeRequest","DistributedAsset","Withdrawal","appId","AddWhitelist","addressString","Withdraw","ChangeValidator","Vote","votingAddress","expirationDate","vote","needConfirmation","ChangeRecord","category","_ref2","endParse","dataAddress","flags","record","TokenBridgePaySwap","swapId","_opCode","debugTxString","opCodeHex","_forwardPayload2","previews","sale","trust","render_type","renderType","hasScamLink","isScam","isHidden","imageFromPreview","resolution","thumbnail","isOnSale","collectionName","isOnFragment","compareActivities","ed25519","require","aesjs","hmacSha512","hmacAlgo","hmacKey","getAesCbcState","ModeOfOperation","cbc","getRandomPrefix","dataLength","minPadding","prefixLength","combineSecrets","encryptDataWithPrefix","sharedSecret","dataHash","msgKey","cbcStateSecret","encryptDataImpl","combined","encryptData","myPublicKey","theirPublicKey","getSharedSecret","prefixedEncrypted","encryptMessageComment","myPrivateKey","senderAddress","commentBytes","encryptedBytes","doDecrypt","decryptedData","gotMsgKey","decryptDataImpl","decryptData","decrypted","decryptMessageComment","decryptedBytes","DIESEL_URL","dieselSendBoc","external","storeMessage","sendExternal","client","withDiesel","neededInit","isContractDeployed","ext","msgHash","areDeepEqual","value1","value2","type1","type2","isArray1","isArray2","member1","object1","object2","keys1","key1","assert","idbStorage","localCounter","getNextLocalId","actualStateVersion","migrationEnsurePromise","resolveBlockchainKey","toInternalAccountId","buildInternalAccountId","buildLocalTransaction","restParams","updateTransactionMetadata","kind","isNftTransfer","hasScamMarkers","sm","shouldCheckComment","hasScamInComment","currentOnUpdate","connectUpdater","disconnectUpdater","isUpdaterAlive","startStorageMigration","ton","migrateStorage","_currentOnUpdate","waitStorageMigration","idbVersion","idbData","field","raw","oldItem","newItem","prevValue","dapps","accountDapps","dapp","connectedAt","byAccountId","internalAccountId","accountData","parsed","mainnetAccountId","testnetAccountId","publicKeys","oldAddress","newAddress","_dapp$sse","sse","appClientId","_dapp$sse2","clientId","isIosKeychainModeMigrated","isIosApp","iosBackupAndMigrateKeychainMode","walletVersion","publicKeyBytes","walletInfo","pickWalletByAddress","backupKey","backupValue","shouldRewrite","zonesRegex","vip","gram","isDnsDomain","isVipDnsDomain","isGramDnsDomain","removeVipZone","_value$match","removeGramZone","_value$match2","removeTonZone","categoryToBigInt","categoryBytes","categoryHashHex","parseSmartContractAddressImpl","prefix0","prefix1","byte0","byte1","parseSmartContractAddressRecord","parseNextResolverRecord","parseStorageBagIdRecord","parseSiteRecord","parseAdnlAddressRecord","dnsResolveImpl","dnsAddress","rawDomainBytes","oneStep","len","domainCell","categoryBN","resultLen","readNumber","DnsNextResolver","Site","BagId","nextAddress","domainToBytes","part","rawDomain","dnsResolve","rootDnsAddress","hashPart","dns","VIP_DNS_COLLECTION","GRAM_DNS_COLLECTION","resolveAddress","isDomain","resolvedAddress","resolveAddressByDomain","normalizeAddress","known","_domain","KNOWN_TOKENS","knownTokens","addKnownTokens","getAccountTokenBalances","getTokenBalances","balancesRaw","parseTokenBalance","getAddressTokenBalances","balanceRaw","jetton","wallet_address","token","buildTokenByMetadata","jettonWallet","parseTokenTransaction","tx","parsedData","buildTokenTransfer","tokenAddress","realTokenAddress","getTokenWallet","resolveTokenBySlug","findTokenByMinter","getKnownTokens","tokens","addKnownToken","fetchToken","image_data","imageData","storeStateInit","isAddressInitialized","walletOrAddress","isInitialized","isActiveSmartContract","isWallet","publicKeyToAddress","buildWallet","WalletClass","account_state","accountState","seqno","last_transaction_id","lastTxId","getContractInfo","codeHash","contractInfo","info","getAccountBalance","getWalletBalance","getWalletSeqno","pickBestWallet","allWallets","getWalletVersionInfos","defaultWallet","withBiggestBalance","best","current","_best$balance","withLastTx","v4Wallet","_ref3","v4JettonBalances","versions","getWalletVersions","getWalletStateInit","pickAccountWallet","storeWritable","w","resolveWalletVersion","_ref4","GET_TRANSACTIONS_LIMIT","GET_TRANSACTIONS_MAX_LIMIT","WAIT_TRANSFER_TIMEOUT","WAIT_TRANSFER_PAUSE","WAIT_TRANSACTION_PAUSE","MAX_BALANCE_WITH_CHECK_DIESEL","PENDING_DIESEL_TIMEOUT","pendingTransfers","checkHasTransaction","checkTransactionDraft","stateInit","shouldEncrypt","isBase64Data","checkToAddress","isToAddressNew","InactiveContract","InvalidAmount","Unexpected","toPublicKey","WalletNotInitialized","tokenBalance","InsufficientBalance","signTransaction","realFee","calculateFee","isFullTonBalance","isEnoughBalance","dieselStatus","dieselAmount","isAwaitingNotExpiredPrevious","fetchEstimateDiesel","estimateDiesel","resolved","addressName","isMemoRequired","DomainNotResolved","isTestOnly","InvalidToAddress","regex","isUrlSafe","InvalidAddressFormat","submitTransfer","stringToPayload","waitPendingTransfer","isFullBalance","addPendingTransfer","resolveTransactionError","submitTransferWithDiesel","messages","submitMultiTransfer","IncorrectDeviceTime","UnsuccesfulTransfer","expireAt","refs","CARRY_ALL_REMAINING_BALANCE","IGNORE_ERRORS","createTransfer","bounce","getAccountNewestTxId","fetchNewestTxId","getAccountTransactionSlice","populateTransactions","updateTransactionType","omitExtraData","transactionToActivity","nftAddresses","addressesForFixFormat","rawNfts","nfts","nftsByAddress","getMergedTransactionSlice","lastTxIds","lastTonTxId","tokenLastTxIds","tonTxs","lastTonTxLt","getTokenTransactionSlice","allTxs","tokenSlug","_transaction$metadata","normalizedFromAddress","normalizedToAddress","checkMultiTransactionDraft","totalAmount","isMainnet","signMultiTransaction","clearedMessages","preparedMessages","isBase64Payload","externalMessage","toExternalMessage","buildPendingTransferKey","retrySendBoc","tonClient","waitUntil","pendingTransfer","source_fees","fees","estimateExternalMessageFee","initCode","initData","ignoreSignature","in_fwd_fee","storage_fee","gas_fee","fwd_fee","sendSignedMessage","sendSignedMessages","attempt","firstBoc","msgHashes","successNumber","decryptComment","waitUntilTransactionAppears","latestTxId","fixTokenActivitiesAddressForm","activities","tokenAddresses","activity","pendingCreatedAt","getTime","getAccountNfts","getNftUpdates","_events$0$timestamp","_events$","updates","event","action","actions","isPurchase","NftPurchase","NftItemTransfer","recipient","rawNftAddress","buyer","checkNftTransferDraft","checkAddressResult","buildNftTransferPayload","submitNftTransfers","isNotcoinBurn","buildNotcoinVoucherExchange","nftIndex","first4Bits","readUint8","TupleReader","nominatorPoolConfigToCell","NominatorPool","getListNominators","tupleReader","readTuple","itemsArray","tupleItems","tuple","pendingDepositAmount","withdrawRequested","stakingCommonCache","accountCache","getAccountCache","_accountCache","updateAccountCache","setStakingCommonCache","getStakingCommonCache","Dexie","Table","DB_NANE","ApiDb","stores","sseConnections","apiDb","checkStakeDraft","backendState","staked","getStakingState","poolAddress","nominatorsPool","checkUnstakeDraft","commonData","liquid","currentRate","buildLiquidStakingWithdraw","submitStake","stakedAt","submitUnstake","instantAvailable","BestRate","Default","Instant","_accountCache$stakedA","_backendState$stakedA","getLiquidStakingTokenBalance","unstakeAmount","where","toArray","_nft$name","billAmount","loyaltyType","shouldUseNominators","isInstantUnstake","liquidAvailable","available","liquidApy","apy","loyaltyApy","fullTokenAmount","unstakeRequestAmount","getPoolContract","nominators","addressObject","currentNominator","equals","isUnstakeRequested","packPayloadToBoc","checkApiAvailability","getMasterchainInfo","MEGATON_WTON_MINTER","MAX_NETWORK_FEE","validateDexSwapTransfers","transfers","mainTransfer","feeTransfer","maxAmount","fromAmount","maxTonAmount","feePayload","tokenFeeAmount","feeDestination","hooks","addHooks","hook","_hooks$name","callHook","_hooks$name2","activeDappByAccountId","initDapps","_onUpdate","onActiveDappAccountUpdated","activeDappOrigin","getActiveDapp","activateDapp","oldAccountId","findActiveDappAccount","deactivateDapp","deactivateAccountDapp","activeOrigin","deactivateAllDapps","isDappActive","updateDapp","updater","getDapp","addDapp","getDappsByOrigin","deleteDapp","dontNotifyDapp","deleteAllDapps","origins","getDapps","findLastConnectedAccount","getDappsState","lastConnectedAccountId","byOrigin","removeAccountDapps","removeAllDapps","removeNetworkDapps","getSseLastEventId","setSseLastEventId","lastEventId","loadExploreSites","Deferred","deferred","deferreds","isFocused","pauseOrFocus","msWhenNotFocused","setIsAppFocused","_isFocused","d","createCallbackManager","callbacks","addCallback","removeCallback","runCallbacks","hasCallbacks","EventEmitter","on","handler","resolveChannel","removeListener","emit","channels","txCallbacks","whenTxComplete","buildSwapId","backendId","blockchains","SIGN_MESSAGE","blockchainKey","getBackendAuthToken","getClientId","fetchAccountConfigForDebugPurposesOnly","mnemonicsEncrypted","stateVersion","ping","updateAccountMemoryCache","fetchTokenBalances","fetchTokenBalancesByAddress","SWAP_MAX_LT","SWAP_WAITING_TIME","SWAP_WAITING_PAUSE","MAX_OLD_SWAP_ID","initSwap","swapBuildTransfer","swapBuild","transferList","transfer","shouldTryDiesel","swapSubmit","historyItem","getSwapItemSlug","swap","asset","cex","swapReplaceTransactions","_resolveTokenBySlug$m","fromTime","toTime","buildSwapHistoryRange","swaps","swapGetHistory","fromTimestamp","toTimestamp","replaceTransactions","swapReplaceTransactionsByRanges","isFirstLoad","waitPendingDexSwap","ranges","txs","swapGetHistoryByRanges","hiddenTxIds","skipLtRanges","_swap$txIds","txIds","swapActivity","swapItemToActivity","ltString","shortenedTxId","startLt","endLt","pendingSwaps","isCex","areAllStale","firstLt","lastLt","firstTimestamp","lastTimestamp","fetchSwaps","allSettled","swapGetHistoryItem","swapEstimate","isMsgHashMode","swapGetAssets","swapGetTonCurrencies","swapGetPairs","symbolOrMinter","swapCexEstimate","swapCexValidateAddress","swapCexCreateTransaction","payinAddress","initTransactions","fetchTokenActivitySlice","activeBlockchain","fetchAllActivitySlice","shouldCreateLocalTransaction","localTransaction","createLocalTransaction","waitLastTransfer","sendSignedTransferMessage","sendSignedTransferMessages","_params$normalizedAdd","fetchDieselState","initNfts","fetchNfts","processNftUpdates","dbNft","convertToDbEntity","put","updateAccountNfts","dbNfts","bulkPut","_nft$collectionAddres","resolvePromise","preloadPromise","resolveDataPreloadPromise","waitDataPreload","getBaseCurrency","setBaseCurrency","currency","fetchPriceHistory","period","_token$minterAddress","baseCurrency","CACHE_TTL","backendStakingStateByAddress","initStaking","getBackendStakingState","onStakingChangeExpected","fetchBackendStakingState","cacheItem","stakingState","totalProfit","getStakingHistory","tryUpdateStakingCommonData","unlock","prevRound","fetchVestings","isTestnet","SEC","BALANCE_BASED_INTERVAL","BALANCE_BASED_INTERVAL_WHEN_NOT_FOCUSED","STAKING_INTERVAL","STAKING_INTERVAL_WHEN_NOT_FOCUSED","BACKEND_INTERVAL","LONG_BACKEND_INTERVAL","NFT_FULL_INTERVAL","VERSIONS_INTERVAL","VERSIONS_INTERVAL_WHEN_NOT_FOCUSED","VESTING_INTERVAL","VESTING_INTERVAL_WHEN_NOT_FOCUSED","INCORRECT_TIME_DIFF","FIRST_TRANSACTIONS_LIMIT","DOUBLE_CHECK_TOKENS_PAUSE","isAccountActive","prices","bySlug","lastBalanceCache","initPolling","_isAccountActive","tryUpdatePrices","tryUpdateTokens","tryLoadSwapTokens","tryUpdateConfig","setupBackendPolling","setupLongBackendPolling","registerNewTokens","tokenBalances","areNewTokensFound","sendUpdateTokens","setupBalanceBasedPolling","newestTxIds","nftFromSec","nftUpdates","lastNftFullUpdate","doubleCheckTokensTime","localOnUpdate","updateBalance","isToncoinBalanceChanged","balancesToUpdate","updateNfts","nftResult","logAndRescue","throwErrorIfUpdaterNotAlive","updateTokenBalances","changedTokenSlugs","cachedBalance","fromEntries","isUpdating","updateActivities","newTxIds","processNewActivities","isAlive","setupStakingPolling","lastState","stakingCommonData","backendStakingState","tokenSlugs","newestTxId","tokenBalanceByAddress","allTransactions","isFirstRun","pricesData","assets","_asset$contract","_prices$bySlug$asset$","_prices$bySlug$asset$2","isLimited","isCopyStorageEnabled","supportAccountsCount","serverUtc","country","countryCode","localUtc","setupWalletVersionsPolling","lastResult","shouldCheckV4","v4HasTokens","allWalletInfos","versionInfo","filteredInfos","currentVersion","setupVestingPolling","lastVestingInfo","vestingInfo","activeAccountId","activateAccount","prevAccountId","isFirstLogin","deactivateAllAccounts","deactivateCurrentAccount","fetchAccount","getActiveAccountId","createWallet","storeAccount","importMnemonic","isPrivateKey","importLedgerWallet","driver","deviceId","deviceName","storeHardwareAccount","importNewWalletVersion","newAccountId","newAccount","removeNetworkAccounts","resetAccounts","removeAccount","nextAccountId","changePassword","oldPassword","encryptedMnemonic","createDappPromise","promiseId","resolveDappPromise","rejectDappPromise","rejectAllDappPromises","dappPromises","getMnemonic","getMnemonicWordList","wordlists","default","confirmDappRequest","confirmDappRequestConnect","cancelDappRequest","fetchAddress","isWalletInitialized","noop","throttledAlert","alert","handleErrorEvent","ErrorEvent","preventDefault","handleError","SAFE_EXEC_ENABLED","safeExec","rescue","always","CONNECT_EVENT_ERROR_CODES","SEND_TRANSACTION_ERROR_CODES","SIGN_DATA_ERROR_CODES","TonConnectError","ManifestContentError","MANIFEST_CONTENT_ERROR","UnknownError","BadRequestError","UnknownAppError","UserRejectsError","isValidString","maxLength","isValidUrl","isString","CHAIN","apiErrors","BLANK_GIF_DATA_URL","resolveInit","initPromise","onPopupUpdate","initTonConnect","_onPopupUpdate","openExtensionPopup","connectionType","isSse","dappMetadata","fetchDappMetadata","manifestUrl","validateRequest","addressItem","proofItem","proof","getCurrentAccountOrFail","sseOptions","permissions","promiseResult","reconnect","proofReplyItem","signTonProof","buildTonProofReplyItem","formatConnectError","currentDapp","buildTonAddressReplyItem","disconnect","sendTransaction","txPayload","dappNetworkRaw","dappNetwork","MAINNET","validUntil","valid_until","isLedger","vestingAddress","checkIsHisVestingWallet","WrongAddress","WrongNetwork","checkResult","checkTransactionMessages","transactionsForRequest","prepareTransactionForRequest","signedTransfers","submitResult","PartialTransactionFailure","successTransactions","UNKNOWN_ERROR","errorMessage","USER_REJECTS_ERROR","ownerPublicKey","_info$contractInfo","signData","METHOD_NOT_SUPPORTED","rawPayload","deactivate","TESTNET","walletStateInit","idx","crc32","timestampBuffer","allocUnsafe","writeBigInt64LE","domainBuffer","domainLengthBuffer","writeInt32LE","byteLength","addressWorkchainBuffer","writeInt32BE","workChain","addressBuffer","messageBuffer","bufferToSign","lengthBytes","iconUrl","safeIconUrl","skipConnection","lastAccountId","force","tonConnect","BRIDGE_URL","TTL_SEC","NONCE_SIZE","MAX_CONFIRM_DURATION","sseEventSource","sseDapps","delayedReturnParams","initSse","startSseConnection","deviceInfo","isFromInAppBrowser","ret","shouldOpenUrl","connectRequest","decodeURIComponent","secretKeyArray","publicKeyArray","box","lastOutputId","device","sendMessage","resetupSseConnection","closeEventSource","dappsState","clientIds","close","openEventSource","onopen","encryptedMessage","sseDapp","decryptMessage","isExternal","sendSseDisconnect","toId","topic","encryptMessage","sendRawMessage","EventSource","nonce","fullBuffer","subarray","jsonText","tonConnectSse","methods","onDappDisconnected","onDappsChanged","tonConnectApi","root","checkInt","checkInts","arrayish","coerceArray","copy","createArray","copyArray","sourceArray","targetArray","targetStart","sourceStart","sourceEnd","convertUtf8","toBytes","encodeURI","substr","fromBytes","convertHex","Hex","numberOfRounds","rcon","S","Si","T1","T2","T3","T4","T5","T6","T7","T8","U1","U2","U3","U4","convertToInt32","AES","defineProperty","_prepare","rounds","_Ke","_Kd","roundKeyCount","KC","tk","rconpointer","tt","ciphertext","ModeOfOperationECB","_aes","block","ModeOfOperationCBC","_lastCipherblock","ModeOfOperationCFB","segmentSize","_shiftRegister","xorSegment","ModeOfOperationOFB","_lastPrecipher","_lastPrecipherIndex","Counter","initialValue","_counter","setValue","setBytes","MAX_SAFE_INTEGER","increment","ModeOfOperationCTR","counter","_remainingCounter","_remainingCounterIndex","pkcs7pad","padder","pkcs7strip","ecb","cfb","ofb","ctr","utf8","padding","pkcs7","pad","strip","_arrayTest","exports","module","define","amd","_aesjs","__awaiter","thisArg","_arguments","generator","adopt","fulfilled","step","next","rejected","done","apply","__importDefault","__esModule","DEFAULT_OPTIONS","exponentialDelay","isNetworkOrIdempotentRequestError","isIdempotentRequestError","isSafeRequestError","isRetryableError","isNetworkError","namespace","is_retry_allowed_1","CODE_EXCLUDE_LIST","SAFE_HTTP_METHODS","IDEMPOTENT_HTTP_METHODS","_a","noDelay","delayFactor","delay","randomSum","retryCondition","getRequestOptions","defaultOptions","setCurrentState","currentState","lastRequestTime","fixConfig","axiosInstance","agent","httpAgent","httpsAgent","shouldRetry","shouldRetryOrPromise","shouldRetryPromiseResult","_err","requestInterceptorId","interceptors","use","responseInterceptorId","lastRequestDuration","transformRequest","global","factory","globalThis","__assign","hasOwnProperty","__spreadArray","pack","ar","_global","extend","extension","getProto","getPrototypeOf","_hasOwn","hasOwn","prop","props","proto","Reflect","ownKeys","setProp","functionOrGetSet","configurable","writable","derive","Child","Parent","getOwnPropertyDescriptor","getPropertyDescriptor","pd","_slice","override","origFunc","overridedFactory","asap$1","setImmediate","arrayToObject","extractor","nameAndValue","tryCatch","ex","getByKeyPath","keyPath","rv","innerObj","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","splice","delByKeyPath","kp","shallowClone","m","flatten","intrinsicTypeNames","intrinsicTypes","circularRefs","deepClone","any","innerDeepClone","toStringTag","o","iteratorSymbol","iterator","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","isAsyncFunction","debug","location","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","getErrorWithStack","prettyStack","exception","numIgnoredFrames","frame","dexieErrorNames","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","_e","_stack","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","Range","RangeError","exceptionMap","mapError","domError","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","onsuccess","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","LONG_STACKS_CLIP_LIMIT","MAX_LONG_STACKS","ZONE_ECHO_LIMIT","_a$1","globalP","nativeP","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","document","createElement","observe","attributes","setAttribute","asap","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","ref","unhandleds","onunhandled","globalError","pgp","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","_then","PromiseReject","onFinally","stacks","getStack","Infinity","handle","Timeout","snapShot","onPossibleParallellAsync","remaining","newPSD","newScope","usePSD","scheduler","follow","zoneProps","run_at_end_of_this_or_next_physical_tick","possiblePromises","AggregateError","failure","shouldExecuteTick","beginMicroTickScope","propagateAllListeners","endMicroTickScope","_promise","origProp","addPossiblyUnhandledError","listeners","finalizePhysicalTick","listener","callListener","markErrorAsHandled","errorName","prev","numPrev","wasRootExec","unhandledErrs","finalizers","finalizer","wrap","errorCatcher","outerScope","switchToZone","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise_1","targetEnv","GlobalPromise","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","warn","tempTransaction","db","storeNames","idbdb","openComplete","letThrough","_vip","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","_completion","DEXIE_VERSION","maxString","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","first","core","reading","fire","indexOrCrit","WhereClause","keyPaths","compoundIndex","indexes","primKey","ix","compound","_maxKey","idxByName","_deps","indexedDB","prevIndex","prevFilterFn","multi","filterFunction","toCollection","and","count","thenShortcut","numRows","each","Collection","mapToClass","mappedClass","readHook","unsubscribe","defineClass","Class","auto","objToAdd","mutate","numFailures","keyOrObject","InvalidArgument","modify","bulkGet","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","fireEvent","makeClassConstructor","createTableConstructor","tableSchema","_allTables","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","isLimitFilter","curr","addMatchFilter","isMatch","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","query","iter","coreTrans","iterate","valueMapper","set_1","union","advance","stop","fail","_iterate","cursorPromise","mappedFn","wrappedFn","continue","advancer","ta","tb","NaN","compareUint8Arrays","getUint8Array","compareArrays","isView","tsTag","byteOffset","_read","_ctx","table","_write","_addAlgorithm","clone","sortBy","lastPart","lastIndex","getval","order","sorter","aVal","bVal","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","_i","nextChunk","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","criteria","deleteCallback","changeSpec","coreRange","createCollectionConstructor","whereClause","keyRangeGenerator","keyRange","whereCtx","readingHook","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","emptyCollection","rangeEqual","upperFactory","lowerFactory","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","enumerable","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ascending","descending","_min","_max","addRange","newRange","sortDirection","rangeSorter","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","keyWithinCurrentRange","checkKey","startsWithAnyOf","createWhereClauseConstructor","orCollection","_IDBKeyRange","IDBKeyRange","eventRejectHandler","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","OpenFailed","active","durability","chromeTransactionDurability","ev","_reject","onabort","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","promiseLike","_waitingFor","_waitingQueue","objectStore","spin","_spinCount","currentWaitPromise","memoizedTables","_memoizedTables","transactionBoundTable","createTransactionConstructor","dbschema","complete","wasActive","createIndexSpec","nameFromKeyPath","createTableSchema","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","extractSchema","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","makeIDBKeyRange","idbRange","upperBound","lowerBound","bound","createDbCoreTable","isAddOrPut","req","reqs","errorHandler","args1","args2","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsNotStarted","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","nonInfinitLimit","idbKeyRange","getAllKeys","count_1","req_1","result_1","keyCount","callbackCount","successHandler","_pos","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStack","stackImpl","middlewares","down","createMiddlewareStacks","dbcore","generateMiddlewareStacks","_novip","_middlewares","tbl","setApiOnPlace","objs","tableNames","propDesc","removeTablesApi","lowerVersionFirst","_cfg","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","updateTablesAndIndexes","queue","_versions","buildGlobalSchema","anyContentUpgraderHasRun","versToRun","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","change","recreate","Upgrade","store_1","addIndex","deleteIndex","idxName","contentUpgrade","upgradeSchema_1","contentUpgradeIsAsync_1","returnValue_1","promiseFollowed","decrementor","deleteRemovedTables","runQueue","createMissingTables","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","contains","storeName","deleteObjectStore","createIndex","dbStoreNames","idbindex","readGlobalSchema","verno","verifyInstalledSchema","installedSchema","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","parseIndexSyntax","primKeyAndIndexes","indexNum","trim","Version","_parseStoresSpec","outSchema","storesSource","storesSpec","upgrade","upgradeFunction","createVersionConstructor","versionNumber","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","getDatabaseNames","infos","_onDatabaseCreated","_onDatabaseDeleted","idbReady","isSafari","userAgentData","intervalId","tryIdb","dexieOpen","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","delreq","deleteDatabase","NoSuchDatabase","oldVer","onversionchange","vcFired","onclose","onReadyBeingFired","ready","fireRemainders","remainders_1","awaitIterator","callNext","doThrow","throw","onSuccess","onError","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","returnValue","PrematureCommit","createVirtualIndexMiddleware","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","virtualKeyPath","findBestIndex","translateRange","translateRequest","createVirtualCursor","_continue","virtualCursor","virtualIndexMiddleware","level","getObjectDiff","prfx","ap","bp","apTypeName","bpTypeName","getEffectiveKeys","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteRange","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deleteNextChunk","effectiveKeys","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","node","RangeSet","fromOrTree","rangeSet","mergeRanges","addKey","addKeys","getRangeSetIterator","left","right","rebalance","rightWasCutOff","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","nextResult1","i2","nextResult2","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","trackAffectedIndexes","getRange","_c","_d","readSubscribers","subscr","pkRangeSet_1","delsRangeSet_1","queriedIndex","queriedRanges","keysPromise_1","resultingKeys","pKeys","cursor_1","wantValues_1","pkey","addAffectedIndex","addKeyOrKeys","oldKey","newKey","deps","dependencies","cancelOpen","bSticky","db_1","newVersion","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","onlyIfCompatible","idbMode","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","hasValue","currentValue","observer","execute","exec","closed","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","getValue","domDeps","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","databaseName","exists","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","semVer","maxKey","updatedParts","propagatingLocally","event_1","initCustomEvent","propagateLocally","updateParts","wasMe","BroadcastChannel","bc_1","unref","changedParts","trig","includeUncontrolled","swContainer","serviceWorker","propagateMessageLocally","namedExports","freeze","__proto__","denyList","isRetryAllowed","nobleEd25519","_nodeResolve_empty","nodeCrypto","_0n","_1n","_2n","_8n","CU_O","CURVE","h","Gx","Gy","POW_2_256","SQRT_M1","SQRT_AD_MINUS_ONE","INVSQRT_A_MINUS_D","ONE_MINUS_D_SQ","D_MINUS_ONE_SQ","ExtendedPoint","z","fromAffine","Point","ZERO","toAffineBatch","points","toInv","invertBatch","toAffine","normalizeZ","other","assertExtPoint","X1","Y1","Z1","X2","Y2","Z2","X1Z2","X2Z1","Y1Z2","Y2Z1","negate","double","A","B","C","D","x1y1","E","G","F","H","X3","Y3","Z3","subtract","precomputeWindow","W","windows","wNAF","affinePoint","BASE","_WINDOW_SIZE","precomputes","pointPrecomputes","f","windowSize","mask","maxNumber","shiftBy","wbits","offset1","offset2","cond1","cond2","constTimeNegate","multiply","scalar","normalizeScalar","multiplyUnsafe","P0","isSmallOrder","isTorsionFree","invZ","is0","invert","ax","ay","zz","fromRistrettoBytes","legacyRist","toRistrettoBytes","fromRistrettoHash","assertRstPoint","RistrettoPoint","ep","calcElligatorRistrettoMap","r0","Ns","Ns_D_is_sq","uvRatio","s_","edIsNegative","Nt","s2","W0","W1","W2","W3","hashToCurve","ensureBytes","r1","bytes255ToNumberLE","R1","r2","R2","fromHex","emsg","equalBytes","numberTo32BytesLE","u1","u2","u1_2","u2_2","I","invertSqrt","Dx","Dy","toRawBytes","u2sq","invsqrt","D1","D2","zInv","_x","_y","toHex","two","_setWindowSize","normed","bytesToNumberLE","y2","u","isXOdd","isLastByteOdd","fromPrivateKey","getExtendedPublicKey","point","toX25519","Signature","assertValidity","u8","concatBytes","arrays","hexes","uint8a","hexByte","numberTo32BytesBE","MAX_255B","modulo","gcd","nums","tmp","lastMultiplied","inverted","reduceRight","pow2","power","pow_2_252_3","_5n","_10n","_20n","_40n","_80n","x2","b2","b4","b5","b10","b20","b40","b80","b160","b240","b250","pow_p_5_8","v3","v7","vx2","root1","root2","useRoot1","useRoot2","noRoot","modlLE","b1","expectedLength","isSafeInteger","adjustBytes25519","decodeScalar25519","checkPrivateKey","getKeyFromHash","hashed","head","pointBytes","_sha512Sync","sha512s","sha512","getExtendedPublicKeySync","getPublicKey","getPublicKeySync","R","signSync","prepareVerification","sig","SB","pub","finishVerification","kA","RkA","verify","verifySync","sync","curve25519","scalarMult","cswap","x_2","x_3","dummy","montgomeryLadder","pointU","a24","x_1","z_2","z_3","sw","k_t","AA","BB","DA","CB","dacb","da_cb","xp2","encodeUCoordinate","decodeUCoordinate","uEnc","BASE_POINT_U","pu","scalarMultBase","web","TORSION_SUBGROUP","hashToPrivateScalar","bytesLength","randomPrivateKey","createHash","precompute","sha512Sync","defineProperties"],"sourceRoot":""}