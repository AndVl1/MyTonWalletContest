{"version":3,"file":"worker.4c2da0b4666077f26228.js","mappings":"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E,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EACxgD,IAAIC,EAAE,GAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;;EAExgD;EACA,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;;EAEzgG;EACA,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;;EAEzgG;EACA,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EACzgG,IAAIC,EAAE,GAAG,CAAC,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,CAAC;EAEzgG,SAASC,cAAcA,CAAC//C,KAAK,EAAE;IAC7B,IAAI7T,MAAM,GAAG,EAAE;IACf,KAAK,IAAIorB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGvX,KAAK,CAACzS,MAAM,EAAEgqB,CAAC,IAAI,CAAC,EAAE;MACxCprB,MAAM,CAACmS,IAAI,CACR0B,KAAK,CAACuX,CAAC,CAAK,IAAI,EAAE,GAClBvX,KAAK,CAACuX,CAAC,GAAG,CAAC,CAAC,IAAI,EAAG,GACnBvX,KAAK,CAACuX,CAAC,GAAG,CAAC,CAAC,IAAK,CAAE,GACpBvX,KAAK,CAACuX,CAAC,GAAG,CAAC,CACb,CAAC;IACH;IACA,OAAOprB,MAAM;EACf;EAEA,IAAI6zD,GAAG,GAAG,SAAAA,CAASlxD,GAAG,EAAE;IACtB,IAAI,EAAE,IAAI,YAAYkxD,GAAG,CAAC,EAAE;MAC1B,MAAM72C,KAAK,CAAC,qCAAqC,CAAC;IACpD;IAEAI,MAAM,CAAC02C,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE;MACjCnoD,KAAK,EAAE6lD,WAAW,CAAC7uD,GAAG,EAAE,IAAI;IAC9B,CAAC,CAAC;IAEF,IAAI,CAACoxD,QAAQ,CAAC,CAAC;EACjB,CAAC;EAGDF,GAAG,CAAClC,SAAS,CAACoC,QAAQ,GAAG,YAAW;IAElC,IAAIC,MAAM,GAAGpB,cAAc,CAAC,IAAI,CAACjwD,GAAG,CAACvB,MAAM,CAAC;IAC5C,IAAI4yD,MAAM,IAAI,IAAI,EAAE;MAClB,MAAM,IAAIh3C,KAAK,CAAC,+CAA+C,CAAC;IAClE;;IAEA;IACA,IAAI,CAACi3C,GAAG,GAAG,EAAE;;IAEb;IACA,IAAI,CAACC,GAAG,GAAG,EAAE;IAEb,KAAK,IAAI9oC,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI4oC,MAAM,EAAE5oC,CAAC,EAAE,EAAE;MAChC,IAAI,CAAC6oC,GAAG,CAAC9hD,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;MAC3B,IAAI,CAAC+hD,GAAG,CAAC/hD,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7B;IAEA,IAAIgiD,aAAa,GAAG,CAACH,MAAM,GAAG,CAAC,IAAI,CAAC;IACpC,IAAII,EAAE,GAAG,IAAI,CAACzxD,GAAG,CAACvB,MAAM,GAAG,CAAC;;IAE5B;IACA,IAAIizD,EAAE,GAAGT,cAAc,CAAC,IAAI,CAACjxD,GAAG,CAAC;;IAEjC;IACA,IAAImQ,KAAK;IACT,KAAK,IAAIsY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgpC,EAAE,EAAEhpC,CAAC,EAAE,EAAE;MAC3BtY,KAAK,GAAGsY,CAAC,IAAI,CAAC;MACd,IAAI,CAAC6oC,GAAG,CAACnhD,KAAK,CAAC,CAACsY,CAAC,GAAG,CAAC,CAAC,GAAGipC,EAAE,CAACjpC,CAAC,CAAC;MAC9B,IAAI,CAAC8oC,GAAG,CAACF,MAAM,GAAGlhD,KAAK,CAAC,CAACsY,CAAC,GAAG,CAAC,CAAC,GAAGipC,EAAE,CAACjpC,CAAC,CAAC;IACzC;;IAEA;IACA,IAAIkpC,WAAW,GAAG,CAAC;IACnB,IAAIC,CAAC,GAAGH,EAAE;MAAEI,EAAE;IACd,OAAOD,CAAC,GAAGJ,aAAa,EAAE;MACxBK,EAAE,GAAGH,EAAE,CAACD,EAAE,GAAG,CAAC,CAAC;MACfC,EAAE,CAAC,CAAC,CAAC,IAAMvB,CAAC,CAAE0B,EAAE,IAAI,EAAE,GAAI,IAAI,CAAC,IAAI,EAAE,GAClC1B,CAAC,CAAE0B,EAAE,IAAK,CAAC,GAAI,IAAI,CAAC,IAAI,EAAG,GAC3B1B,CAAC,CAAE0B,EAAE,GAAU,IAAI,CAAC,IAAK,CAAE,GAC5B1B,CAAC,CAAE0B,EAAE,IAAI,EAAE,GAAI,IAAI,CAAC,GACnB3B,IAAI,CAACyB,WAAW,CAAC,IAAI,EAAI;MAC5BA,WAAW,IAAI,CAAC;;MAEhB;MACA,IAAIF,EAAE,IAAI,CAAC,EAAE;QACX,KAAK,IAAIhpC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgpC,EAAE,EAAEhpC,CAAC,EAAE,EAAE;UAC3BipC,EAAE,CAACjpC,CAAC,CAAC,IAAIipC,EAAE,CAACjpC,CAAC,GAAG,CAAC,CAAC;QACpB;;QAEA;MACF,CAAC,MAAM;QACL,KAAK,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAIgpC,EAAE,GAAG,CAAE,EAAEhpC,CAAC,EAAE,EAAE;UACjCipC,EAAE,CAACjpC,CAAC,CAAC,IAAIipC,EAAE,CAACjpC,CAAC,GAAG,CAAC,CAAC;QACpB;QACAopC,EAAE,GAAGH,EAAE,CAAED,EAAE,GAAG,CAAC,GAAI,CAAC,CAAC;QAErBC,EAAE,CAACD,EAAE,GAAG,CAAC,CAAC,IAAKtB,CAAC,CAAE0B,EAAE,GAAU,IAAI,CAAC,GAChC1B,CAAC,CAAE0B,EAAE,IAAK,CAAC,GAAI,IAAI,CAAC,IAAK,CAAE,GAC3B1B,CAAC,CAAE0B,EAAE,IAAI,EAAE,GAAI,IAAI,CAAC,IAAI,EAAG,GAC3B1B,CAAC,CAAE0B,EAAE,IAAI,EAAE,GAAI,IAAI,CAAC,IAAI,EAAI;QAE/B,KAAK,IAAIppC,CAAC,GAAIgpC,EAAE,GAAG,CAAC,GAAI,CAAC,EAAEhpC,CAAC,GAAGgpC,EAAE,EAAEhpC,CAAC,EAAE,EAAE;UACtCipC,EAAE,CAACjpC,CAAC,CAAC,IAAIipC,EAAE,CAACjpC,CAAC,GAAG,CAAC,CAAC;QACpB;MACF;;MAEA;MACA,IAAIA,CAAC,GAAG,CAAC;QAAEi9B,CAAC;QAAEx5B,CAAC;MACf,OAAOzD,CAAC,GAAGgpC,EAAE,IAAIG,CAAC,GAAGJ,aAAa,EAAE;QAClC9L,CAAC,GAAGkM,CAAC,IAAI,CAAC;QACV1lC,CAAC,GAAG0lC,CAAC,GAAG,CAAC;QACT,IAAI,CAACN,GAAG,CAAC5L,CAAC,CAAC,CAACx5B,CAAC,CAAC,GAAGwlC,EAAE,CAACjpC,CAAC,CAAC;QACtB,IAAI,CAAC8oC,GAAG,CAACF,MAAM,GAAG3L,CAAC,CAAC,CAACx5B,CAAC,CAAC,GAAGwlC,EAAE,CAACjpC,CAAC,EAAE,CAAC;QACjCmpC,CAAC,EAAE;MACL;IACF;;IAEA;IACA,KAAK,IAAIlM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2L,MAAM,EAAE3L,CAAC,EAAE,EAAE;MAC/B,KAAK,IAAIx5B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1B2lC,EAAE,GAAG,IAAI,CAACN,GAAG,CAAC7L,CAAC,CAAC,CAACx5B,CAAC,CAAC;QACnB,IAAI,CAACqlC,GAAG,CAAC7L,CAAC,CAAC,CAACx5B,CAAC,CAAC,GAAI2kC,EAAE,CAAEgB,EAAE,IAAI,EAAE,GAAI,IAAI,CAAC,GACrCf,EAAE,CAAEe,EAAE,IAAI,EAAE,GAAI,IAAI,CAAC,GACrBd,EAAE,CAAEc,EAAE,IAAK,CAAC,GAAI,IAAI,CAAC,GACrBb,EAAE,CAAEa,EAAE,GAAU,IAAI,CAAE;MAC1B;IACF;EACF,CAAC;EAEDX,GAAG,CAAClC,SAAS,CAAC3uD,OAAO,GAAG,UAAShB,SAAS,EAAE;IAC1C,IAAIA,SAAS,CAACZ,MAAM,IAAI,EAAE,EAAE;MAC1B,MAAM,IAAI4b,KAAK,CAAC,2CAA2C,CAAC;IAC9D;IAEA,IAAIg3C,MAAM,GAAG,IAAI,CAACC,GAAG,CAAC7yD,MAAM,GAAG,CAAC;IAChC,IAAI+uB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;IAEpB;IACA,IAAIokC,CAAC,GAAGX,cAAc,CAAC5xD,SAAS,CAAC;IACjC,KAAK,IAAIopB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1BmpC,CAAC,CAACnpC,CAAC,CAAC,IAAI,IAAI,CAAC6oC,GAAG,CAAC,CAAC,CAAC,CAAC7oC,CAAC,CAAC;IACxB;;IAEA;IACA,KAAK,IAAIi9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2L,MAAM,EAAE3L,CAAC,EAAE,EAAE;MAC/B,KAAK,IAAIj9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1B+E,CAAC,CAAC/E,CAAC,CAAC,GAAI4nC,EAAE,CAAEuB,CAAC,CAAEnpC,CAAC,CAAU,IAAI,EAAE,GAAI,IAAI,CAAC,GACvC6nC,EAAE,CAAEsB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,GAAI,IAAI,CAAC,GACjC8nC,EAAE,CAAEqB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAK,CAAC,GAAI,IAAI,CAAC,GACjC+nC,EAAE,CAAEoB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAU,IAAI,CAAC,GACjC,IAAI,CAAC6oC,GAAG,CAAC5L,CAAC,CAAC,CAACj9B,CAAC,CAAE;MACnB;MACAmpC,CAAC,GAAGpkC,CAAC,CAACvsB,KAAK,CAAC,CAAC;IACf;;IAEA;IACA,IAAI5D,MAAM,GAAG8xD,WAAW,CAAC,EAAE,CAAC;MAAE0C,EAAE;IAChC,KAAK,IAAIppC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1BopC,EAAE,GAAG,IAAI,CAACP,GAAG,CAACD,MAAM,CAAC,CAAC5oC,CAAC,CAAC;MACxBprB,MAAM,CAAC,CAAC,GAAGorB,CAAC,CAAK,GAAG,CAAC0nC,CAAC,CAAEyB,CAAC,CAAEnpC,CAAC,CAAU,IAAI,EAAE,GAAI,IAAI,CAAC,GAAIopC,EAAE,IAAI,EAAG,IAAI,IAAI;MAC1Ex0D,MAAM,CAAC,CAAC,GAAGorB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC0nC,CAAC,CAAEyB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,GAAI,IAAI,CAAC,GAAIopC,EAAE,IAAI,EAAG,IAAI,IAAI;MAC1Ex0D,MAAM,CAAC,CAAC,GAAGorB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC0nC,CAAC,CAAEyB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAK,CAAC,GAAI,IAAI,CAAC,GAAIopC,EAAE,IAAK,CAAE,IAAI,IAAI;MAC1Ex0D,MAAM,CAAC,CAAC,GAAGorB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC0nC,CAAC,CAAEyB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAU,IAAI,CAAC,GAAIopC,EAAE,IAAW,IAAI;IAC5E;IAEA,OAAOx0D,MAAM;EACf,CAAC;EAED6zD,GAAG,CAAClC,SAAS,CAAChtD,OAAO,GAAG,UAAS8vD,UAAU,EAAE;IAC3C,IAAIA,UAAU,CAACrzD,MAAM,IAAI,EAAE,EAAE;MAC3B,MAAM,IAAI4b,KAAK,CAAC,4CAA4C,CAAC;IAC/D;IAEA,IAAIg3C,MAAM,GAAG,IAAI,CAACE,GAAG,CAAC9yD,MAAM,GAAG,CAAC;IAChC,IAAI+uB,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;IAEpB;IACA,IAAIokC,CAAC,GAAGX,cAAc,CAACa,UAAU,CAAC;IAClC,KAAK,IAAIrpC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1BmpC,CAAC,CAACnpC,CAAC,CAAC,IAAI,IAAI,CAAC8oC,GAAG,CAAC,CAAC,CAAC,CAAC9oC,CAAC,CAAC;IACxB;;IAEA;IACA,KAAK,IAAIi9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2L,MAAM,EAAE3L,CAAC,EAAE,EAAE;MAC/B,KAAK,IAAIj9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1B+E,CAAC,CAAC/E,CAAC,CAAC,GAAIgoC,EAAE,CAAEmB,CAAC,CAAEnpC,CAAC,CAAW,IAAI,EAAE,GAAI,IAAI,CAAC,GACxCioC,EAAE,CAAEkB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,GAAI,IAAI,CAAC,GACjCkoC,EAAE,CAAEiB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAK,CAAC,GAAI,IAAI,CAAC,GACjCmoC,EAAE,CAAEgB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAU,IAAI,CAAC,GACjC,IAAI,CAAC8oC,GAAG,CAAC7L,CAAC,CAAC,CAACj9B,CAAC,CAAE;MACnB;MACAmpC,CAAC,GAAGpkC,CAAC,CAACvsB,KAAK,CAAC,CAAC;IACf;;IAEA;IACA,IAAI5D,MAAM,GAAG8xD,WAAW,CAAC,EAAE,CAAC;MAAE0C,EAAE;IAChC,KAAK,IAAIppC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC1BopC,EAAE,GAAG,IAAI,CAACN,GAAG,CAACF,MAAM,CAAC,CAAC5oC,CAAC,CAAC;MACxBprB,MAAM,CAAC,CAAC,GAAGorB,CAAC,CAAK,GAAG,CAAC2nC,EAAE,CAAEwB,CAAC,CAAEnpC,CAAC,CAAU,IAAI,EAAE,GAAI,IAAI,CAAC,GAAIopC,EAAE,IAAI,EAAG,IAAI,IAAI;MAC3Ex0D,MAAM,CAAC,CAAC,GAAGorB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC2nC,EAAE,CAAEwB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,GAAI,IAAI,CAAC,GAAIopC,EAAE,IAAI,EAAG,IAAI,IAAI;MAC3Ex0D,MAAM,CAAC,CAAC,GAAGorB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC2nC,EAAE,CAAEwB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAK,CAAC,GAAI,IAAI,CAAC,GAAIopC,EAAE,IAAK,CAAE,IAAI,IAAI;MAC3Ex0D,MAAM,CAAC,CAAC,GAAGorB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC2nC,EAAE,CAAEwB,CAAC,CAAC,CAACnpC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAU,IAAI,CAAC,GAAIopC,EAAE,IAAW,IAAI;IAC7E;IAEA,OAAOx0D,MAAM;EACf,CAAC;;EAGD;AACF;AACA;EACE,IAAI00D,kBAAkB,GAAG,SAAAA,CAAS/xD,GAAG,EAAE;IACrC,IAAI,EAAE,IAAI,YAAY+xD,kBAAkB,CAAC,EAAE;MACzC,MAAM13C,KAAK,CAAC,qCAAqC,CAAC;IACpD;IAEA,IAAI,CAAC0N,WAAW,GAAG,uBAAuB;IAC1C,IAAI,CAAClrB,IAAI,GAAG,KAAK;IAEjB,IAAI,CAACm1D,IAAI,GAAG,IAAId,GAAG,CAAClxD,GAAG,CAAC;EAC1B,CAAC;EAED+xD,kBAAkB,CAAC/C,SAAS,CAAC3uD,OAAO,GAAG,UAAShB,SAAS,EAAE;IACzDA,SAAS,GAAGwvD,WAAW,CAACxvD,SAAS,CAAC;IAElC,IAAKA,SAAS,CAACZ,MAAM,GAAG,EAAE,KAAM,CAAC,EAAE;MACjC,MAAM,IAAI4b,KAAK,CAAC,uDAAuD,CAAC;IAC1E;IAEA,IAAIy3C,UAAU,GAAG3C,WAAW,CAAC9vD,SAAS,CAACZ,MAAM,CAAC;IAC9C,IAAIwzD,KAAK,GAAG9C,WAAW,CAAC,EAAE,CAAC;IAE3B,KAAK,IAAI1mC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGppB,SAAS,CAACZ,MAAM,EAAEgqB,CAAC,IAAI,EAAE,EAAE;MAC7C2mC,SAAS,CAAC/vD,SAAS,EAAE4yD,KAAK,EAAE,CAAC,EAAExpC,CAAC,EAAEA,CAAC,GAAG,EAAE,CAAC;MACzCwpC,KAAK,GAAG,IAAI,CAACD,IAAI,CAAC3xD,OAAO,CAAC4xD,KAAK,CAAC;MAChC7C,SAAS,CAAC6C,KAAK,EAAEH,UAAU,EAAErpC,CAAC,CAAC;IACjC;IAEA,OAAOqpC,UAAU;EACnB,CAAC;EAEDC,kBAAkB,CAAC/C,SAAS,CAAChtD,OAAO,GAAG,UAAS8vD,UAAU,EAAE;IAC1DA,UAAU,GAAGjD,WAAW,CAACiD,UAAU,CAAC;IAEpC,IAAKA,UAAU,CAACrzD,MAAM,GAAG,EAAE,KAAM,CAAC,EAAE;MAClC,MAAM,IAAI4b,KAAK,CAAC,wDAAwD,CAAC;IAC3E;IAEA,IAAIhb,SAAS,GAAG8vD,WAAW,CAAC2C,UAAU,CAACrzD,MAAM,CAAC;IAC9C,IAAIwzD,KAAK,GAAG9C,WAAW,CAAC,EAAE,CAAC;IAE3B,KAAK,IAAI1mC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqpC,UAAU,CAACrzD,MAAM,EAAEgqB,CAAC,IAAI,EAAE,EAAE;MAC9C2mC,SAAS,CAAC0C,UAAU,EAAEG,KAAK,EAAE,CAAC,EAAExpC,CAAC,EAAEA,CAAC,GAAG,EAAE,CAAC;MAC1CwpC,KAAK,GAAG,IAAI,CAACD,IAAI,CAAChwD,OAAO,CAACiwD,KAAK,CAAC;MAChC7C,SAAS,CAAC6C,KAAK,EAAE5yD,SAAS,EAAEopB,CAAC,CAAC;IAChC;IAEA,OAAOppB,SAAS;EAClB,CAAC;;EAGD;AACF;AACA;EACE,IAAI6yD,kBAAkB,GAAG,SAAAA,CAASlyD,GAAG,EAAEE,EAAE,EAAE;IACzC,IAAI,EAAE,IAAI,YAAYgyD,kBAAkB,CAAC,EAAE;MACzC,MAAM73C,KAAK,CAAC,qCAAqC,CAAC;IACpD;IAEA,IAAI,CAAC0N,WAAW,GAAG,uBAAuB;IAC1C,IAAI,CAAClrB,IAAI,GAAG,KAAK;IAEjB,IAAI,CAACqD,EAAE,EAAE;MACPA,EAAE,GAAGivD,WAAW,CAAC,EAAE,CAAC;IAEtB,CAAC,MAAM,IAAIjvD,EAAE,CAACzB,MAAM,IAAI,EAAE,EAAE;MAC1B,MAAM,IAAI4b,KAAK,CAAC,qDAAqD,CAAC;IACxE;IAEA,IAAI,CAAC83C,gBAAgB,GAAGtD,WAAW,CAAC3uD,EAAE,EAAE,IAAI,CAAC;IAE7C,IAAI,CAAC8xD,IAAI,GAAG,IAAId,GAAG,CAAClxD,GAAG,CAAC;EAC1B,CAAC;EAEDkyD,kBAAkB,CAAClD,SAAS,CAAC3uD,OAAO,GAAG,UAAShB,SAAS,EAAE;IACzDA,SAAS,GAAGwvD,WAAW,CAACxvD,SAAS,CAAC;IAElC,IAAKA,SAAS,CAACZ,MAAM,GAAG,EAAE,KAAM,CAAC,EAAE;MACjC,MAAM,IAAI4b,KAAK,CAAC,uDAAuD,CAAC;IAC1E;IAEA,IAAIy3C,UAAU,GAAG3C,WAAW,CAAC9vD,SAAS,CAACZ,MAAM,CAAC;IAC9C,IAAIwzD,KAAK,GAAG9C,WAAW,CAAC,EAAE,CAAC;IAE3B,KAAK,IAAI1mC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGppB,SAAS,CAACZ,MAAM,EAAEgqB,CAAC,IAAI,EAAE,EAAE;MAC7C2mC,SAAS,CAAC/vD,SAAS,EAAE4yD,KAAK,EAAE,CAAC,EAAExpC,CAAC,EAAEA,CAAC,GAAG,EAAE,CAAC;MAEzC,KAAK,IAAI2pC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;QAC3BH,KAAK,CAACG,CAAC,CAAC,IAAI,IAAI,CAACD,gBAAgB,CAACC,CAAC,CAAC;MACtC;MAEA,IAAI,CAACD,gBAAgB,GAAG,IAAI,CAACH,IAAI,CAAC3xD,OAAO,CAAC4xD,KAAK,CAAC;MAChD7C,SAAS,CAAC,IAAI,CAAC+C,gBAAgB,EAAEL,UAAU,EAAErpC,CAAC,CAAC;IACjD;IAEA,OAAOqpC,UAAU;EACnB,CAAC;EAEDI,kBAAkB,CAAClD,SAAS,CAAChtD,OAAO,GAAG,UAAS8vD,UAAU,EAAE;IAC1DA,UAAU,GAAGjD,WAAW,CAACiD,UAAU,CAAC;IAEpC,IAAKA,UAAU,CAACrzD,MAAM,GAAG,EAAE,KAAM,CAAC,EAAE;MAClC,MAAM,IAAI4b,KAAK,CAAC,wDAAwD,CAAC;IAC3E;IAEA,IAAIhb,SAAS,GAAG8vD,WAAW,CAAC2C,UAAU,CAACrzD,MAAM,CAAC;IAC9C,IAAIwzD,KAAK,GAAG9C,WAAW,CAAC,EAAE,CAAC;IAE3B,KAAK,IAAI1mC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqpC,UAAU,CAACrzD,MAAM,EAAEgqB,CAAC,IAAI,EAAE,EAAE;MAC9C2mC,SAAS,CAAC0C,UAAU,EAAEG,KAAK,EAAE,CAAC,EAAExpC,CAAC,EAAEA,CAAC,GAAG,EAAE,CAAC;MAC1CwpC,KAAK,GAAG,IAAI,CAACD,IAAI,CAAChwD,OAAO,CAACiwD,KAAK,CAAC;MAEhC,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,EAAE,EAAEA,CAAC,EAAE,EAAE;QAC3B/yD,SAAS,CAACopB,CAAC,GAAG2pC,CAAC,CAAC,GAAGH,KAAK,CAACG,CAAC,CAAC,GAAG,IAAI,CAACD,gBAAgB,CAACC,CAAC,CAAC;MACxD;MAEAhD,SAAS,CAAC0C,UAAU,EAAE,IAAI,CAACK,gBAAgB,EAAE,CAAC,EAAE1pC,CAAC,EAAEA,CAAC,GAAG,EAAE,CAAC;IAC5D;IAEA,OAAOppB,SAAS;EAClB,CAAC;;EAGD;AACF;AACA;EACE,IAAIgzD,kBAAkB,GAAG,SAAAA,CAASryD,GAAG,EAAEE,EAAE,EAAEoyD,WAAW,EAAE;IACtD,IAAI,EAAE,IAAI,YAAYD,kBAAkB,CAAC,EAAE;MACzC,MAAMh4C,KAAK,CAAC,qCAAqC,CAAC;IACpD;IAEA,IAAI,CAAC0N,WAAW,GAAG,iBAAiB;IACpC,IAAI,CAAClrB,IAAI,GAAG,KAAK;IAEjB,IAAI,CAACqD,EAAE,EAAE;MACPA,EAAE,GAAGivD,WAAW,CAAC,EAAE,CAAC;IAEtB,CAAC,MAAM,IAAIjvD,EAAE,CAACzB,MAAM,IAAI,EAAE,EAAE;MAC1B,MAAM,IAAI4b,KAAK,CAAC,oDAAoD,CAAC;IACvE;IAEA,IAAI,CAACi4C,WAAW,EAAE;MAAEA,WAAW,GAAG,CAAC;IAAE;IAErC,IAAI,CAACA,WAAW,GAAGA,WAAW;IAE9B,IAAI,CAACC,cAAc,GAAG1D,WAAW,CAAC3uD,EAAE,EAAE,IAAI,CAAC;IAE3C,IAAI,CAAC8xD,IAAI,GAAG,IAAId,GAAG,CAAClxD,GAAG,CAAC;EAC1B,CAAC;EAEDqyD,kBAAkB,CAACrD,SAAS,CAAC3uD,OAAO,GAAG,UAAShB,SAAS,EAAE;IACzD,IAAKA,SAAS,CAACZ,MAAM,GAAG,IAAI,CAAC6zD,WAAW,IAAK,CAAC,EAAE;MAC9C,MAAM,IAAIj4C,KAAK,CAAC,oDAAoD,CAAC;IACvE;IAEA,IAAIjZ,SAAS,GAAGytD,WAAW,CAACxvD,SAAS,EAAE,IAAI,CAAC;IAE5C,IAAImzD,UAAU;IACd,KAAK,IAAI/pC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrnB,SAAS,CAAC3C,MAAM,EAAEgqB,CAAC,IAAI,IAAI,CAAC6pC,WAAW,EAAE;MAC3DE,UAAU,GAAG,IAAI,CAACR,IAAI,CAAC3xD,OAAO,CAAC,IAAI,CAACkyD,cAAc,CAAC;MACnD,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACE,WAAW,EAAEF,CAAC,EAAE,EAAE;QACzChxD,SAAS,CAACqnB,CAAC,GAAG2pC,CAAC,CAAC,IAAII,UAAU,CAACJ,CAAC,CAAC;MACnC;;MAEA;MACAhD,SAAS,CAAC,IAAI,CAACmD,cAAc,EAAE,IAAI,CAACA,cAAc,EAAE,CAAC,EAAE,IAAI,CAACD,WAAW,CAAC;MACxElD,SAAS,CAAChuD,SAAS,EAAE,IAAI,CAACmxD,cAAc,EAAE,EAAE,GAAG,IAAI,CAACD,WAAW,EAAE7pC,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC6pC,WAAW,CAAC;IAC3F;IAEA,OAAOlxD,SAAS;EAClB,CAAC;EAEDixD,kBAAkB,CAACrD,SAAS,CAAChtD,OAAO,GAAG,UAAS8vD,UAAU,EAAE;IAC1D,IAAKA,UAAU,CAACrzD,MAAM,GAAG,IAAI,CAAC6zD,WAAW,IAAK,CAAC,EAAE;MAC/C,MAAM,IAAIj4C,KAAK,CAAC,qDAAqD,CAAC;IACxE;IAEA,IAAIhb,SAAS,GAAGwvD,WAAW,CAACiD,UAAU,EAAE,IAAI,CAAC;IAE7C,IAAIU,UAAU;IACd,KAAK,IAAI/pC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGppB,SAAS,CAACZ,MAAM,EAAEgqB,CAAC,IAAI,IAAI,CAAC6pC,WAAW,EAAE;MAC3DE,UAAU,GAAG,IAAI,CAACR,IAAI,CAAC3xD,OAAO,CAAC,IAAI,CAACkyD,cAAc,CAAC;MAEnD,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACE,WAAW,EAAEF,CAAC,EAAE,EAAE;QACzC/yD,SAAS,CAACopB,CAAC,GAAG2pC,CAAC,CAAC,IAAII,UAAU,CAACJ,CAAC,CAAC;MACnC;;MAEA;MACAhD,SAAS,CAAC,IAAI,CAACmD,cAAc,EAAE,IAAI,CAACA,cAAc,EAAE,CAAC,EAAE,IAAI,CAACD,WAAW,CAAC;MACxElD,SAAS,CAAC0C,UAAU,EAAE,IAAI,CAACS,cAAc,EAAE,EAAE,GAAG,IAAI,CAACD,WAAW,EAAE7pC,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC6pC,WAAW,CAAC;IAC5F;IAEA,OAAOjzD,SAAS;EAClB,CAAC;;EAED;AACF;AACA;EACE,IAAIozD,kBAAkB,GAAG,SAAAA,CAASzyD,GAAG,EAAEE,EAAE,EAAE;IACzC,IAAI,EAAE,IAAI,YAAYuyD,kBAAkB,CAAC,EAAE;MACzC,MAAMp4C,KAAK,CAAC,qCAAqC,CAAC;IACpD;IAEA,IAAI,CAAC0N,WAAW,GAAG,iBAAiB;IACpC,IAAI,CAAClrB,IAAI,GAAG,KAAK;IAEjB,IAAI,CAACqD,EAAE,EAAE;MACPA,EAAE,GAAGivD,WAAW,CAAC,EAAE,CAAC;IAEtB,CAAC,MAAM,IAAIjvD,EAAE,CAACzB,MAAM,IAAI,EAAE,EAAE;MAC1B,MAAM,IAAI4b,KAAK,CAAC,qDAAqD,CAAC;IACxE;IAEA,IAAI,CAACq4C,cAAc,GAAG7D,WAAW,CAAC3uD,EAAE,EAAE,IAAI,CAAC;IAC3C,IAAI,CAACyyD,mBAAmB,GAAG,EAAE;IAE7B,IAAI,CAACX,IAAI,GAAG,IAAId,GAAG,CAAClxD,GAAG,CAAC;EAC1B,CAAC;EAEDyyD,kBAAkB,CAACzD,SAAS,CAAC3uD,OAAO,GAAG,UAAShB,SAAS,EAAE;IACzD,IAAI+B,SAAS,GAAGytD,WAAW,CAACxvD,SAAS,EAAE,IAAI,CAAC;IAE5C,KAAK,IAAIopB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrnB,SAAS,CAAC3C,MAAM,EAAEgqB,CAAC,EAAE,EAAE;MACzC,IAAI,IAAI,CAACkqC,mBAAmB,KAAK,EAAE,EAAE;QACnC,IAAI,CAACD,cAAc,GAAG,IAAI,CAACV,IAAI,CAAC3xD,OAAO,CAAC,IAAI,CAACqyD,cAAc,CAAC;QAC5D,IAAI,CAACC,mBAAmB,GAAG,CAAC;MAC9B;MACAvxD,SAAS,CAACqnB,CAAC,CAAC,IAAI,IAAI,CAACiqC,cAAc,CAAC,IAAI,CAACC,mBAAmB,EAAE,CAAC;IACjE;IAEA,OAAOvxD,SAAS;EAClB,CAAC;;EAED;EACAqxD,kBAAkB,CAACzD,SAAS,CAAChtD,OAAO,GAAGywD,kBAAkB,CAACzD,SAAS,CAAC3uD,OAAO;;EAG3E;AACF;AACA;EACE,IAAIuyD,OAAO,GAAG,SAAAA,CAASC,YAAY,EAAE;IACnC,IAAI,EAAE,IAAI,YAAYD,OAAO,CAAC,EAAE;MAC9B,MAAMv4C,KAAK,CAAC,yCAAyC,CAAC;IACxD;;IAEA;IACA,IAAIw4C,YAAY,KAAK,CAAC,IAAI,CAACA,YAAY,EAAE;MAAEA,YAAY,GAAG,CAAC;IAAE;IAE7D,IAAI,OAAOA,YAAa,KAAK,QAAQ,EAAE;MACrC,IAAI,CAACC,QAAQ,GAAG3D,WAAW,CAAC,EAAE,CAAC;MAC/B,IAAI,CAAC4D,QAAQ,CAACF,YAAY,CAAC;IAE7B,CAAC,MAAM;MACL,IAAI,CAACG,QAAQ,CAACH,YAAY,CAAC;IAC7B;EACF,CAAC;EAEDD,OAAO,CAAC5D,SAAS,CAAC+D,QAAQ,GAAG,UAAS/pD,KAAK,EAAE;IAC3C,IAAI,OAAOA,KAAM,KAAK,QAAQ,IAAIvH,QAAQ,CAACuH,KAAK,CAAC,IAAIA,KAAK,EAAE;MAC1D,MAAM,IAAIqR,KAAK,CAAC,4CAA4C,CAAC;IAC/D;;IAEA;IACA,IAAIrR,KAAK,GAAGsS,MAAM,CAAC23C,gBAAgB,EAAE;MACnC,MAAM,IAAI54C,KAAK,CAAC,iCAAiC,CAAC;IACpD;IAEA,KAAK,IAAIlK,KAAK,GAAG,EAAE,EAAEA,KAAK,IAAI,CAAC,EAAE,EAAEA,KAAK,EAAE;MACxC,IAAI,CAAC2iD,QAAQ,CAAC3iD,KAAK,CAAC,GAAGnH,KAAK,GAAG,GAAG;MAClCA,KAAK,GAAGvH,QAAQ,CAACuH,KAAK,GAAG,GAAG,CAAC;IAC/B;EACF,CAAC;EAED4pD,OAAO,CAAC5D,SAAS,CAACgE,QAAQ,GAAG,UAAS9hD,KAAK,EAAE;IAC3CA,KAAK,GAAG29C,WAAW,CAAC39C,KAAK,EAAE,IAAI,CAAC;IAEhC,IAAIA,KAAK,CAACzS,MAAM,IAAI,EAAE,EAAE;MACtB,MAAM,IAAI4b,KAAK,CAAC,+CAA+C,CAAC;IAClE;IAEA,IAAI,CAACy4C,QAAQ,GAAG5hD,KAAK;EACvB,CAAC;EAED0hD,OAAO,CAAC5D,SAAS,CAACkE,SAAS,GAAG,YAAW;IACvC,KAAK,IAAIzqC,CAAC,GAAG,EAAE,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC5B,IAAI,IAAI,CAACqqC,QAAQ,CAACrqC,CAAC,CAAC,KAAK,GAAG,EAAE;QAC5B,IAAI,CAACqqC,QAAQ,CAACrqC,CAAC,CAAC,GAAG,CAAC;MACtB,CAAC,MAAM;QACL,IAAI,CAACqqC,QAAQ,CAACrqC,CAAC,CAAC,EAAE;QAClB;MACF;IACF;EACF,CAAC;;EAGD;AACF;AACA;EACE,IAAI0qC,kBAAkB,GAAG,SAAAA,CAASnzD,GAAG,EAAEozD,OAAO,EAAE;IAC9C,IAAI,EAAE,IAAI,YAAYD,kBAAkB,CAAC,EAAE;MACzC,MAAM94C,KAAK,CAAC,qCAAqC,CAAC;IACpD;IAEA,IAAI,CAAC0N,WAAW,GAAG,SAAS;IAC5B,IAAI,CAAClrB,IAAI,GAAG,KAAK;IAEjB,IAAI,EAAEu2D,OAAO,YAAYR,OAAO,CAAC,EAAE;MACjCQ,OAAO,GAAG,IAAIR,OAAO,CAACQ,OAAO,CAAC;IAChC;IAEA,IAAI,CAACN,QAAQ,GAAGM,OAAO;IAEvB,IAAI,CAACC,iBAAiB,GAAG,IAAI;IAC7B,IAAI,CAACC,sBAAsB,GAAG,EAAE;IAEhC,IAAI,CAACtB,IAAI,GAAG,IAAId,GAAG,CAAClxD,GAAG,CAAC;EAC1B,CAAC;EAEDmzD,kBAAkB,CAACnE,SAAS,CAAC3uD,OAAO,GAAG,UAAShB,SAAS,EAAE;IACzD,IAAI+B,SAAS,GAAGytD,WAAW,CAACxvD,SAAS,EAAE,IAAI,CAAC;IAE5C,KAAK,IAAIopB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrnB,SAAS,CAAC3C,MAAM,EAAEgqB,CAAC,EAAE,EAAE;MACzC,IAAI,IAAI,CAAC6qC,sBAAsB,KAAK,EAAE,EAAE;QACtC,IAAI,CAACD,iBAAiB,GAAG,IAAI,CAACrB,IAAI,CAAC3xD,OAAO,CAAC,IAAI,CAACyyD,QAAQ,CAACA,QAAQ,CAAC;QAClE,IAAI,CAACQ,sBAAsB,GAAG,CAAC;QAC/B,IAAI,CAACR,QAAQ,CAACI,SAAS,CAAC,CAAC;MAC3B;MACA9xD,SAAS,CAACqnB,CAAC,CAAC,IAAI,IAAI,CAAC4qC,iBAAiB,CAAC,IAAI,CAACC,sBAAsB,EAAE,CAAC;IACvE;IAEA,OAAOlyD,SAAS;EAClB,CAAC;;EAED;EACA+xD,kBAAkB,CAACnE,SAAS,CAAChtD,OAAO,GAAGmxD,kBAAkB,CAACnE,SAAS,CAAC3uD,OAAO;;EAG3E;EACA;;EAEA;EACA,SAASkzD,QAAQA,CAAClrD,IAAI,EAAE;IACtBA,IAAI,GAAGwmD,WAAW,CAACxmD,IAAI,EAAE,IAAI,CAAC;IAC9B,IAAImrD,MAAM,GAAG,EAAE,GAAInrD,IAAI,CAAC5J,MAAM,GAAG,EAAG;IACpC,IAAIpB,MAAM,GAAG8xD,WAAW,CAAC9mD,IAAI,CAAC5J,MAAM,GAAG+0D,MAAM,CAAC;IAC9CpE,SAAS,CAAC/mD,IAAI,EAAEhL,MAAM,CAAC;IACvB,KAAK,IAAIorB,CAAC,GAAGpgB,IAAI,CAAC5J,MAAM,EAAEgqB,CAAC,GAAGprB,MAAM,CAACoB,MAAM,EAAEgqB,CAAC,EAAE,EAAE;MAChDprB,MAAM,CAACorB,CAAC,CAAC,GAAG+qC,MAAM;IACpB;IACA,OAAOn2D,MAAM;EACf;EAEA,SAASo2D,UAAUA,CAACprD,IAAI,EAAE;IACxBA,IAAI,GAAGwmD,WAAW,CAACxmD,IAAI,EAAE,IAAI,CAAC;IAC9B,IAAIA,IAAI,CAAC5J,MAAM,GAAG,EAAE,EAAE;MAAE,MAAM,IAAI4b,KAAK,CAAC,uBAAuB,CAAC;IAAE;IAElE,IAAIm5C,MAAM,GAAGnrD,IAAI,CAACA,IAAI,CAAC5J,MAAM,GAAG,CAAC,CAAC;IAClC,IAAI+0D,MAAM,GAAG,EAAE,EAAE;MAAE,MAAM,IAAIn5C,KAAK,CAAC,kCAAkC,CAAC;IAAE;IAExE,IAAI5b,MAAM,GAAG4J,IAAI,CAAC5J,MAAM,GAAG+0D,MAAM;IACjC,KAAK,IAAI/qC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+qC,MAAM,EAAE/qC,CAAC,EAAE,EAAE;MAC/B,IAAIpgB,IAAI,CAAC5J,MAAM,GAAGgqB,CAAC,CAAC,KAAK+qC,MAAM,EAAE;QAC/B,MAAM,IAAIn5C,KAAK,CAAC,6BAA6B,CAAC;MAChD;IACF;IAEA,IAAIhd,MAAM,GAAG8xD,WAAW,CAAC1wD,MAAM,CAAC;IAChC2wD,SAAS,CAAC/mD,IAAI,EAAEhL,MAAM,EAAE,CAAC,EAAE,CAAC,EAAEoB,MAAM,CAAC;IACrC,OAAOpB,MAAM;EACf;;EAEA;EACA;;EAGA;EACA,IAAIsvB,KAAK,GAAG;IACVukC,GAAG,EAAEA,GAAG;IACR0B,OAAO,EAAEA,OAAO;IAEhB5lC,eAAe,EAAE;MACf0mC,GAAG,EAAE3B,kBAAkB;MACvB9kC,GAAG,EAAEilC,kBAAkB;MACvByB,GAAG,EAAEtB,kBAAkB;MACvBuB,GAAG,EAAEnB,kBAAkB;MACvBoB,GAAG,EAAEV;IACP,CAAC;IAEDW,KAAK,EAAE;MACLz6B,GAAG,EAAE02B,UAAU;MACfgE,IAAI,EAAErE;IACR,CAAC;IAEDsE,OAAO,EAAE;MACPC,KAAK,EAAE;QACLC,GAAG,EAAEX,QAAQ;QACbY,KAAK,EAAEV;MACT;IACF,CAAC;IAEDW,UAAU,EAAE;MACVvF,WAAW,EAAEA,WAAW;MACxBM,WAAW,EAAEA,WAAW;MACxBC,SAAS,EAAEA;IACb;EACF,CAAC;;EAGD;EACA,IAAI,IAA8B,EAAE;IAClCkF,MAAM,CAACD,OAAO,GAAG1nC,KAAK;;IAEtB;IACA;IACA;EACF,CAAC,MAAM,EAYN;AAGH,CAAC,EAAE,IAAI,CAAC;;;;;;;;;;;;;;ACnyBD,MAAM+nC,UAAU,GAAG,IAAIzyB,GAAG,CAAiB,CAChD,CAAC,GAAG,EAAE,GAAG,CAAC,EACV,CAAC,GAAG,EAAE,GAAG,CAAC,EACV,CAAC,GAAG,EAAE,0BAA0B,CAAC,EACjC,CAAC,GAAG,EAAE,6BAA6B,CAAC,EACpC,CAAC,GAAG,EAAE,oDAAoD,CAAC,EAC3D,CAAC,GAAG,EAAE,iCAAiC,CAAC,EACxC,CAAC,GAAG,EAAE,wBAAwB,CAAC,EAC/B,CAAC,GAAG,EAAE,8BAA8B,CAAC,EACrC,CAAC,GAAG,EAAE,0BAA0B,CAAC,EACjC,CAAC,GAAG,EAAE,2BAA2B,CAAC,EAClC,CAAC,GAAG,EAAE,qCAAqC,CAAC,EAC5C,CAAC,IAAI,EAAE,WAAW,CAAC,EACnB,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,MAAM,CAAC,EACd,CAAC,IAAI,EAAE,GAAG,CAAC,EACX,CAAC,IAAI,EAAE,GAAG,CAAC,EACX,CAAC,IAAI,EAAE,GAAG,CAAC,EACX,CAAC,IAAI,EAAE,GAAG,CAAC,EACX,CAAC,IAAI,EAAE,GAAG,CAAC,EACX,CAAC,IAAI,EAAE,GAAG,CAAC,EACX,CAAC,GAAG,EAAE,oIAAoI,CAAC,EAC3I,CAAC,GAAG,EAAE,kHAAkH,CAAC,EACzH,CAAC,GAAG,EAAE,oHAAoH,CAAC,EAC3H,CAAC,GAAG,EAAE,kEAAkE,CAAC,EACzE,CAAC,GAAG,EAAE,mFAAmF,CAAC,EAC1F,CAAC,GAAG,EAAE,oGAAoG,CAAC,EAC3G,CAAC,GAAG,EAAE,yEAAyE,CAAC,EAChF,CAAC,GAAG,EAAE,+DAA+D,CAAC,EACtE,CAAC,GAAG,EAAE,oHAAoH,CAAC,EAC3H,CAAC,GAAG,EAAE,kHAAkH,CAAC,EACzH,CAAC,GAAG,EAAE,gEAAgE,CAAC,EACvE,CAAC,GAAG,EAAE,6CAA6C,CAAC,EACpD,CAAC,GAAG,EAAE,8DAA8D,CAAC,EACrE,CAAC,GAAG,EAAE,gDAAgD,CAAC,EACvD,CAAC,GAAG,EAAE,sGAAsG,CAAC,EAC7G,CAAC,GAAG,EAAE,mEAAmE,CAAC,EAC1E,CAAC,GAAG,EAAE,mFAAmF,CAAC,EAC1F,CAAC,GAAG,EAAE,oGAAoG,CAAC,EAC3G,CAAC,GAAG,EAAE,6EAA6E,CAAC,EACpF,CAAC,GAAG,EAAE,2CAA2C,CAAC,EAClD,CAAC,GAAG,EAAE,yFAAyF,CAAC,EAChG,CAAC,GAAG,EAAE,wDAAwD,CAAC,EAC/D,CAAC,GAAG,EAAE,yFAAyF,CAAC,EAChG,CAAC,GAAG,EAAE,iFAAiF,CAAC,EACxF,CAAC,GAAG,EAAE,kFAAkF,CAAC,EACzF,CAAC,GAAG,EAAE,0CAA0C,CAAC,EACjD,CAAC,GAAG,EAAE,uGAAuG,CAAC,EAC9G,CAAC,GAAG,EAAE,2GAA2G,CAAC,EAClH,CACE,GAAG;AACH;AACA,qNAAqN,CACtN,EACD,CACE,GAAG;AACH;AACA,kKAAkK,CACnK,EACD,CAAC,GAAG,EAAE,+EAA+E,CAAC,EACtF,CAAC,GAAG,EAAE,sDAAsD,CAAC,EAC7D,CAAC,GAAG,EAAE,0CAA0C,CAAC,EACjD,CAAC,GAAG,EAAE,uCAAuC,CAAC,EAC9C,CAAC,GAAG,EAAE,oEAAoE,CAAC,EAC3E,CAAC,GAAG,EAAE,yEAAyE,CAAC,EAChF,CAAC,GAAG,EAAE,sEAAsE,CAAC,EAC7E,CAAC,GAAG,EAAE,qDAAqD,CAAC,EAC5D,CAAC,GAAG,EAAE,4GAA4G,CAAC,EACnH,CAAC,GAAG,EAAE,mDAAmD,CAAC,EAC1D,CAAC,GAAG,EAAE,mGAAmG,CAAC,EAC1G,CAAC,GAAG,EAAE,8GAA8G,CAAC,EACrH,CAAC,GAAG,EAAE,oDAAoD,CAAC,EAC3D,CAAC,GAAG,EAAE,+DAA+D,CAAC,EACtE,CAAC,GAAG,EAAE,6EAA6E,CAAC,EACpF,CAAC,GAAG,EAAE,2EAA2E,CAAC,EAClF,CAAC,GAAG,EAAE,iHAAiH,CAAC,EACxH,CAAC,GAAG,EAAE,8CAA8C,CAAC,EACrD,CAAC,GAAG,EAAE,kGAAkG,CAAC,EACzG,CAAC,GAAG,EAAE,2EAA2E,CAAC,EAClF,CAAC,GAAG,EAAE,qCAAqC,CAAC,EAC5C,CAAC,GAAG,EAAE,wEAAwE,CAAC,CAChF,CAAC;;;;;;;;;;;;;;;;ACzFF;;AAEyC;AACC;AAE1C,MAAM4yB,WAAW,GAAG,IAAI5yB,GAAG,CAAmB,CAAC;AAC/C,MAAM6yB,cAAc,GAAG,IAAI7yB,GAAG,CAAiB,CAAC;AAEhD,KAAK,MAAM,CAACnlC,IAAI,EAAEi4D,IAAI,CAAC,IAAIL,2DAAkB,CAAC,CAAC,EAAE;EAC/CG,WAAW,CAAChnC,GAAG,CAAC/wB,IAAI,EAAE,CAAC,GAAGi4D,IAAI,CAAC,CAAC;EAEhC,KAAK,MAAMC,IAAI,IAAID,IAAI,EAAE;IACvBD,cAAc,CAACjnC,GAAG,CAACmnC,IAAI,EAAEl4D,IAAI,CAAC;EAChC;AACF;AAEO,SAASojC,SAASA,CAAC+0B,GAAW,EAAE;EACrC,IAAIN,+CAAQ,CAACM,GAAG,CAAC,EAAE,OAAOA,GAAG;EAE7B,IAAIC,MAAM,GAAG,EAAE;EAEf,KAAK,MAAMF,IAAI,IAAIJ,4CAAK,CAACK,GAAG,CAAC,EAAE;IAC7BC,MAAM,IAAIJ,cAAc,CAACrsD,GAAG,CAACusD,IAAI,CAAC,IAAIA,IAAI;EAC5C;EAEA,OAAOE,MAAM;AACf;;;;;;;;;;;;;;;;AC1BA;AACA;AACA,MAAMC,8BAA8B,GAClC,4QAA4Q;AAC9Q;AACA,MAAMC,4BAA4B,GAChC,wyFAAwyF;AAC1yF,MAAMC,cAAc,GAAG,SAAS;AAChC,MAAMC,YAAY,GAAG,iEAAiE;AACtF,MAAMC,cAAc,GAAG,8BAA8B;AACrD;;AAEA;AACO,MAAMC,aAAa,GAAG,0DAA0D;AAEhF,SAASb,QAAQA,CAACM,GAAW,EAAE;EACpC,OAAOO,aAAa,CAACz1C,IAAI,CAACk1C,GAAG,CAAC;AAChC;;AAEA;AACA;AACA;AACA;AACO,SAASL,KAAKA,CAACK,GAAW,EAAE;EACjC,OAAOA,GAAG,CACPvlC,OAAO,CAAC0lC,4BAA4B,EAAE,EAAE,CAAC,CACzC1lC,OAAO,CAACylC,8BAA8B,EAAE,IAAI,CAAC,CAC7CzlC,OAAO,CAAC2lC,cAAc,EAAE,GAAG,CAAC,CAC5B3lC,OAAO,CAAC4lC,YAAY,EAAE,GAAG,CAAC,CAC1B5lC,OAAO,CAAC6lC,cAAc,EAAE,EAAE,CAAC;AAChC;;;;;;;;;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,UAAUE,MAAM,EAAEC,OAAO,EAAE;EACxB,KAA4D,GAAGpB,MAAM,CAACD,OAAO,GAAGqB,OAAO,CAAC,CAAC,GACzF,CACoG;AACxG,CAAC,EAAE,IAAI,EAAG,YAAY;EAAE,YAAY;;EAEhC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,IAAIE,QAAQ,GAAG,SAAAA,CAAA,EAAW;IACtBA,QAAQ,GAAGn7C,MAAM,CAACyO,MAAM,IAAI,SAAS0sC,QAAQA,CAAChE,CAAC,EAAE;MAC7C,KAAK,IAAI5lC,CAAC,EAAEvD,CAAC,GAAG,CAAC,EAAEpS,CAAC,GAAGjO,SAAS,CAAC3J,MAAM,EAAEgqB,CAAC,GAAGpS,CAAC,EAAEoS,CAAC,EAAE,EAAE;QACjDuD,CAAC,GAAG5jB,SAAS,CAACqgB,CAAC,CAAC;QAChB,KAAK,IAAIotC,CAAC,IAAI7pC,CAAC,EAAE,IAAIvR,MAAM,CAACu0C,SAAS,CAAC8G,cAAc,CAAC7G,IAAI,CAACjjC,CAAC,EAAE6pC,CAAC,CAAC,EAAEjE,CAAC,CAACiE,CAAC,CAAC,GAAG7pC,CAAC,CAAC6pC,CAAC,CAAC;MAChF;MACA,OAAOjE,CAAC;IACZ,CAAC;IACD,OAAOgE,QAAQ,CAACG,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;EAC1C,CAAC;EACD,SAAS4tD,aAAaA,CAAClnD,EAAE,EAAEtO,IAAI,EAAEy1D,IAAI,EAAE;IACnC,IAAIA,IAAI,IAAI7tD,SAAS,CAAC3J,MAAM,KAAK,CAAC,EAAE,KAAK,IAAIgqB,CAAC,GAAG,CAAC,EAAEytC,CAAC,GAAG11D,IAAI,CAAC/B,MAAM,EAAE03D,EAAE,EAAE1tC,CAAC,GAAGytC,CAAC,EAAEztC,CAAC,EAAE,EAAE;MACjF,IAAI0tC,EAAE,IAAI,EAAE1tC,CAAC,IAAIjoB,IAAI,CAAC,EAAE;QACpB,IAAI,CAAC21D,EAAE,EAAEA,EAAE,GAAG51D,KAAK,CAACyuD,SAAS,CAAC/tD,KAAK,CAACguD,IAAI,CAACzuD,IAAI,EAAE,CAAC,EAAEioB,CAAC,CAAC;QACpD0tC,EAAE,CAAC1tC,CAAC,CAAC,GAAGjoB,IAAI,CAACioB,CAAC,CAAC;MACnB;IACJ;IACA,OAAO3Z,EAAE,CAACijB,MAAM,CAACokC,EAAE,IAAI51D,KAAK,CAACyuD,SAAS,CAAC/tD,KAAK,CAACguD,IAAI,CAACzuD,IAAI,CAAC,CAAC;EAC5D;EAEA,IAAI41D,OAAO,GAAG,OAAOT,UAAU,KAAK,WAAW,GAAGA,UAAU,GACxD,OAAO9sB,IAAI,KAAK,WAAW,GAAGA,IAAI,GAC9B,OAAOwtB,MAAM,KAAK,WAAW,GAAGA,MAAM,GAClCZ,qBAAM;EAElB,IAAI/2B,IAAI,GAAGjkB,MAAM,CAACikB,IAAI;EACtB,IAAIwwB,OAAO,GAAG3uD,KAAK,CAAC2uD,OAAO;EAC3B,IAAI,OAAOjsD,OAAO,KAAK,WAAW,IAAI,CAACmzD,OAAO,CAACnzD,OAAO,EAAE;IACpDmzD,OAAO,CAACnzD,OAAO,GAAGA,OAAO;EAC7B;EACA,SAASqzD,MAAMA,CAACC,GAAG,EAAEC,SAAS,EAAE;IAC5B,IAAI,OAAOA,SAAS,KAAK,QAAQ,EAC7B,OAAOD,GAAG;IACd73B,IAAI,CAAC83B,SAAS,CAAC,CAACtyC,OAAO,CAAC,UAAUlkB,GAAG,EAAE;MACnCu2D,GAAG,CAACv2D,GAAG,CAAC,GAAGw2D,SAAS,CAACx2D,GAAG,CAAC;IAC7B,CAAC,CAAC;IACF,OAAOu2D,GAAG;EACd;EACA,IAAIE,QAAQ,GAAGh8C,MAAM,CAACi8C,cAAc;EACpC,IAAIC,OAAO,GAAG,CAAC,CAAC,CAACb,cAAc;EAC/B,SAASc,MAAMA,CAACL,GAAG,EAAEM,IAAI,EAAE;IACvB,OAAOF,OAAO,CAAC1H,IAAI,CAACsH,GAAG,EAAEM,IAAI,CAAC;EAClC;EACA,SAASC,KAAKA,CAACC,KAAK,EAAEP,SAAS,EAAE;IAC7B,IAAI,OAAOA,SAAS,KAAK,UAAU,EAC/BA,SAAS,GAAGA,SAAS,CAACC,QAAQ,CAACM,KAAK,CAAC,CAAC;IAC1C,CAAC,OAAOC,OAAO,KAAK,WAAW,GAAGt4B,IAAI,GAAGs4B,OAAO,CAACC,OAAO,EAAET,SAAS,CAAC,CAACtyC,OAAO,CAAC,UAAUlkB,GAAG,EAAE;MACxFk3D,OAAO,CAACH,KAAK,EAAE/2D,GAAG,EAAEw2D,SAAS,CAACx2D,GAAG,CAAC,CAAC;IACvC,CAAC,CAAC;EACN;EACA,IAAImxD,cAAc,GAAG12C,MAAM,CAAC02C,cAAc;EAC1C,SAAS+F,OAAOA,CAACX,GAAG,EAAEM,IAAI,EAAEM,gBAAgB,EAAE1nD,OAAO,EAAE;IACnD0hD,cAAc,CAACoF,GAAG,EAAEM,IAAI,EAAEP,MAAM,CAACa,gBAAgB,IAAIP,MAAM,CAACO,gBAAgB,EAAE,KAAK,CAAC,IAAI,OAAOA,gBAAgB,CAAC1uD,GAAG,KAAK,UAAU,GAC9H;MAAEA,GAAG,EAAE0uD,gBAAgB,CAAC1uD,GAAG;MAAEolB,GAAG,EAAEspC,gBAAgB,CAACtpC,GAAG;MAAEupC,YAAY,EAAE;IAAK,CAAC,GAC5E;MAAEpuD,KAAK,EAAEmuD,gBAAgB;MAAEC,YAAY,EAAE,IAAI;MAAEC,QAAQ,EAAE;IAAK,CAAC,EAAE5nD,OAAO,CAAC,CAAC;EAClF;EACA,SAAS6nD,MAAMA,CAACC,KAAK,EAAE;IACnB,OAAO;MACH/2D,IAAI,EAAE,SAAAA,CAAUg3D,MAAM,EAAE;QACpBD,KAAK,CAACvI,SAAS,GAAGv0C,MAAM,CAACwe,MAAM,CAACu+B,MAAM,CAACxI,SAAS,CAAC;QACjDkI,OAAO,CAACK,KAAK,CAACvI,SAAS,EAAE,aAAa,EAAEuI,KAAK,CAAC;QAC9C,OAAO;UACHjB,MAAM,EAAEQ,KAAK,CAACnZ,IAAI,CAAC,IAAI,EAAE4Z,KAAK,CAACvI,SAAS;QAC5C,CAAC;MACL;IACJ,CAAC;EACL;EACA,IAAIyI,wBAAwB,GAAGh9C,MAAM,CAACg9C,wBAAwB;EAC9D,SAASC,qBAAqBA,CAACnB,GAAG,EAAEM,IAAI,EAAE;IACtC,IAAIc,EAAE,GAAGF,wBAAwB,CAAClB,GAAG,EAAEM,IAAI,CAAC;IAC5C,IAAIE,KAAK;IACT,OAAOY,EAAE,IAAI,CAACZ,KAAK,GAAGN,QAAQ,CAACF,GAAG,CAAC,KAAKmB,qBAAqB,CAACX,KAAK,EAAEF,IAAI,CAAC;EAC9E;EACA,IAAIe,MAAM,GAAG,EAAE,CAAC32D,KAAK;EACrB,SAASA,KAAKA,CAACunC,IAAI,EAAEoP,KAAK,EAAEC,GAAG,EAAE;IAC7B,OAAO+f,MAAM,CAAC3I,IAAI,CAACzmB,IAAI,EAAEoP,KAAK,EAAEC,GAAG,CAAC;EACxC;EACA,SAASggB,QAAQA,CAACC,QAAQ,EAAEC,gBAAgB,EAAE;IAC1C,OAAOA,gBAAgB,CAACD,QAAQ,CAAC;EACrC;EACA,SAAShhD,MAAMA,CAAC/V,CAAC,EAAE;IACf,IAAI,CAACA,CAAC,EACF,MAAM,IAAIsZ,KAAK,CAAC,kBAAkB,CAAC;EAC3C;EACA,SAAS29C,MAAMA,CAACzuB,EAAE,EAAE;IAChB,IAAI6sB,OAAO,CAAC6B,YAAY,EACpBA,YAAY,CAAC1uB,EAAE,CAAC,CAAC,KAEjB2uB,UAAU,CAAC3uB,EAAE,EAAE,CAAC,CAAC;EACzB;EACA,SAAS4uB,aAAaA,CAACC,KAAK,EAAEC,SAAS,EAAE;IACrC,OAAOD,KAAK,CAACpvC,MAAM,CAAC,UAAU3rB,MAAM,EAAE47C,IAAI,EAAExwB,CAAC,EAAE;MAC3C,IAAI6vC,YAAY,GAAGD,SAAS,CAACpf,IAAI,EAAExwB,CAAC,CAAC;MACrC,IAAI6vC,YAAY,EACZj7D,MAAM,CAACi7D,YAAY,CAAC,CAAC,CAAC,CAAC,GAAGA,YAAY,CAAC,CAAC,CAAC;MAC7C,OAAOj7D,MAAM;IACjB,CAAC,EAAE,CAAC,CAAC,CAAC;EACV;EACA,SAASk7D,QAAQA,CAAChvB,EAAE,EAAEkd,OAAO,EAAEje,IAAI,EAAE;IACjC,IAAI;MACAe,EAAE,CAACwsB,KAAK,CAAC,IAAI,EAAEvtB,IAAI,CAAC;IACxB,CAAC,CACD,OAAOgwB,EAAE,EAAE;MACP/R,OAAO,IAAIA,OAAO,CAAC+R,EAAE,CAAC;IAC1B;EACJ;EACA,SAASC,YAAYA,CAAClC,GAAG,EAAEmC,OAAO,EAAE;IAChC,IAAI9B,MAAM,CAACL,GAAG,EAAEmC,OAAO,CAAC,EACpB,OAAOnC,GAAG,CAACmC,OAAO,CAAC;IACvB,IAAI,CAACA,OAAO,EACR,OAAOnC,GAAG;IACd,IAAI,OAAOmC,OAAO,KAAK,QAAQ,EAAE;MAC7B,IAAIC,EAAE,GAAG,EAAE;MACX,KAAK,IAAIlwC,CAAC,GAAG,CAAC,EAAEytC,CAAC,GAAGwC,OAAO,CAACj6D,MAAM,EAAEgqB,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;QAC5C,IAAIoK,GAAG,GAAG4lC,YAAY,CAAClC,GAAG,EAAEmC,OAAO,CAACjwC,CAAC,CAAC,CAAC;QACvCkwC,EAAE,CAACnpD,IAAI,CAACqjB,GAAG,CAAC;MAChB;MACA,OAAO8lC,EAAE;IACb;IACA,IAAIxhB,MAAM,GAAGuhB,OAAO,CAACE,OAAO,CAAC,GAAG,CAAC;IACjC,IAAIzhB,MAAM,KAAK,CAAC,CAAC,EAAE;MACf,IAAI0hB,QAAQ,GAAGtC,GAAG,CAACmC,OAAO,CAAC7I,MAAM,CAAC,CAAC,EAAE1Y,MAAM,CAAC,CAAC;MAC7C,OAAO0hB,QAAQ,KAAKv8D,SAAS,GAAGA,SAAS,GAAGm8D,YAAY,CAACI,QAAQ,EAAEH,OAAO,CAAC7I,MAAM,CAAC1Y,MAAM,GAAG,CAAC,CAAC,CAAC;IAClG;IACA,OAAO76C,SAAS;EACpB;EACA,SAASw8D,YAAYA,CAACvC,GAAG,EAAEmC,OAAO,EAAE1vD,KAAK,EAAE;IACvC,IAAI,CAACutD,GAAG,IAAImC,OAAO,KAAKp8D,SAAS,EAC7B;IACJ,IAAI,UAAU,IAAIme,MAAM,IAAIA,MAAM,CAACs+C,QAAQ,CAACxC,GAAG,CAAC,EAC5C;IACJ,IAAI,OAAOmC,OAAO,KAAK,QAAQ,IAAI,QAAQ,IAAIA,OAAO,EAAE;MACpD5hD,MAAM,CAAC,OAAO9N,KAAK,KAAK,QAAQ,IAAI,QAAQ,IAAIA,KAAK,CAAC;MACtD,KAAK,IAAIyf,CAAC,GAAG,CAAC,EAAEytC,CAAC,GAAGwC,OAAO,CAACj6D,MAAM,EAAEgqB,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;QAC5CqwC,YAAY,CAACvC,GAAG,EAAEmC,OAAO,CAACjwC,CAAC,CAAC,EAAEzf,KAAK,CAACyf,CAAC,CAAC,CAAC;MAC3C;IACJ,CAAC,MACI;MACD,IAAI0uB,MAAM,GAAGuhB,OAAO,CAACE,OAAO,CAAC,GAAG,CAAC;MACjC,IAAIzhB,MAAM,KAAK,CAAC,CAAC,EAAE;QACf,IAAI6hB,cAAc,GAAGN,OAAO,CAAC7I,MAAM,CAAC,CAAC,EAAE1Y,MAAM,CAAC;QAC9C,IAAI8hB,gBAAgB,GAAGP,OAAO,CAAC7I,MAAM,CAAC1Y,MAAM,GAAG,CAAC,CAAC;QACjD,IAAI8hB,gBAAgB,KAAK,EAAE;UACvB,IAAIjwD,KAAK,KAAK1M,SAAS,EAAE;YACrB,IAAI4yD,OAAO,CAACqH,GAAG,CAAC,IAAI,CAAC2C,KAAK,CAACz3D,QAAQ,CAACu3D,cAAc,CAAC,CAAC,EAChDzC,GAAG,CAAC4C,MAAM,CAACH,cAAc,EAAE,CAAC,CAAC,CAAC,KAE9B,OAAOzC,GAAG,CAACyC,cAAc,CAAC;UAClC,CAAC,MAEGzC,GAAG,CAACyC,cAAc,CAAC,GAAGhwD,KAAK;QAAC,OAC/B;UACD,IAAI6vD,QAAQ,GAAGtC,GAAG,CAACyC,cAAc,CAAC;UAClC,IAAI,CAACH,QAAQ,IAAI,CAACjC,MAAM,CAACL,GAAG,EAAEyC,cAAc,CAAC,EACzCH,QAAQ,GAAItC,GAAG,CAACyC,cAAc,CAAC,GAAG,CAAC,CAAE;UACzCF,YAAY,CAACD,QAAQ,EAAEI,gBAAgB,EAAEjwD,KAAK,CAAC;QACnD;MACJ,CAAC,MACI;QACD,IAAIA,KAAK,KAAK1M,SAAS,EAAE;UACrB,IAAI4yD,OAAO,CAACqH,GAAG,CAAC,IAAI,CAAC2C,KAAK,CAACz3D,QAAQ,CAACi3D,OAAO,CAAC,CAAC,EACzCnC,GAAG,CAAC4C,MAAM,CAACT,OAAO,EAAE,CAAC,CAAC,CAAC,KAEvB,OAAOnC,GAAG,CAACmC,OAAO,CAAC;QAC3B,CAAC,MAEGnC,GAAG,CAACmC,OAAO,CAAC,GAAG1vD,KAAK;MAC5B;IACJ;EACJ;EACA,SAASowD,YAAYA,CAAC7C,GAAG,EAAEmC,OAAO,EAAE;IAChC,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAC3BI,YAAY,CAACvC,GAAG,EAAEmC,OAAO,EAAEp8D,SAAS,CAAC,CAAC,KACrC,IAAI,QAAQ,IAAIo8D,OAAO,EACxB,EAAE,CAAC53D,GAAG,CAACmuD,IAAI,CAACyJ,OAAO,EAAE,UAAUW,EAAE,EAAE;MAC/BP,YAAY,CAACvC,GAAG,EAAE8C,EAAE,EAAE/8D,SAAS,CAAC;IACpC,CAAC,CAAC;EACV;EACA,SAASg9D,YAAYA,CAAC/C,GAAG,EAAE;IACvB,IAAIoC,EAAE,GAAG,CAAC,CAAC;IACX,KAAK,IAAIY,CAAC,IAAIhD,GAAG,EAAE;MACf,IAAIK,MAAM,CAACL,GAAG,EAAEgD,CAAC,CAAC,EACdZ,EAAE,CAACY,CAAC,CAAC,GAAGhD,GAAG,CAACgD,CAAC,CAAC;IACtB;IACA,OAAOZ,EAAE;EACb;EACA,IAAI5mC,MAAM,GAAG,EAAE,CAACA,MAAM;EACtB,SAASynC,OAAOA,CAAChsC,CAAC,EAAE;IAChB,OAAOuE,MAAM,CAACgkC,KAAK,CAAC,EAAE,EAAEvoC,CAAC,CAAC;EAC9B;EACA,IAAIisC,kBAAkB,GAAG,mJAAmJ,CACvKl4D,KAAK,CAAC,GAAG,CAAC,CAACwwB,MAAM,CAACynC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC14D,GAAG,CAAC,UAAU44D,GAAG,EAAE;IAAE,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC54D,GAAG,CAAC,UAAU8wD,CAAC,EAAE;MAAE,OAAOA,CAAC,GAAG8H,GAAG,GAAG,OAAO;IAAE,CAAC,CAAC;EAAE,CAAC,CAAC,CAAC,CAAC,CAACvgD,MAAM,CAAC,UAAUy4C,CAAC,EAAE;IAAE,OAAOwE,OAAO,CAACxE,CAAC,CAAC;EAAE,CAAC,CAAC;EACrM,IAAI+H,cAAc,GAAGF,kBAAkB,CAAC34D,GAAG,CAAC,UAAU8wD,CAAC,EAAE;IAAE,OAAOwE,OAAO,CAACxE,CAAC,CAAC;EAAE,CAAC,CAAC;EAChFuG,aAAa,CAACsB,kBAAkB,EAAE,UAAUjjC,CAAC,EAAE;IAAE,OAAO,CAACA,CAAC,EAAE,IAAI,CAAC;EAAE,CAAC,CAAC;EACrE,IAAIojC,YAAY,GAAG,IAAI;EACvB,SAASC,SAASA,CAACC,GAAG,EAAE;IACpBF,YAAY,GAAG,OAAOG,OAAO,KAAK,WAAW,IAAI,IAAIA,OAAO,CAAC,CAAC;IAC9D,IAAIpB,EAAE,GAAGqB,cAAc,CAACF,GAAG,CAAC;IAC5BF,YAAY,GAAG,IAAI;IACnB,OAAOjB,EAAE;EACb;EACA,SAASqB,cAAcA,CAACF,GAAG,EAAE;IACzB,IAAI,CAACA,GAAG,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAC/B,OAAOA,GAAG;IACd,IAAInB,EAAE,GAAGiB,YAAY,IAAIA,YAAY,CAACnxD,GAAG,CAACqxD,GAAG,CAAC;IAC9C,IAAInB,EAAE,EACF,OAAOA,EAAE;IACb,IAAIzJ,OAAO,CAAC4K,GAAG,CAAC,EAAE;MACdnB,EAAE,GAAG,EAAE;MACPiB,YAAY,IAAIA,YAAY,CAAC/rC,GAAG,CAACisC,GAAG,EAAEnB,EAAE,CAAC;MACzC,KAAK,IAAIlwC,CAAC,GAAG,CAAC,EAAEytC,CAAC,GAAG4D,GAAG,CAACr7D,MAAM,EAAEgqB,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;QACxCkwC,EAAE,CAACnpD,IAAI,CAACwqD,cAAc,CAACF,GAAG,CAACrxC,CAAC,CAAC,CAAC,CAAC;MACnC;IACJ,CAAC,MACI,IAAIkxC,cAAc,CAACf,OAAO,CAACkB,GAAG,CAAChyD,WAAW,CAAC,IAAI,CAAC,EAAE;MACnD6wD,EAAE,GAAGmB,GAAG;IACZ,CAAC,MACI;MACD,IAAI/C,KAAK,GAAGN,QAAQ,CAACqD,GAAG,CAAC;MACzBnB,EAAE,GAAG5B,KAAK,KAAKt8C,MAAM,CAACu0C,SAAS,GAAG,CAAC,CAAC,GAAGv0C,MAAM,CAACwe,MAAM,CAAC89B,KAAK,CAAC;MAC3D6C,YAAY,IAAIA,YAAY,CAAC/rC,GAAG,CAACisC,GAAG,EAAEnB,EAAE,CAAC;MACzC,KAAK,IAAI9B,IAAI,IAAIiD,GAAG,EAAE;QAClB,IAAIlD,MAAM,CAACkD,GAAG,EAAEjD,IAAI,CAAC,EAAE;UACnB8B,EAAE,CAAC9B,IAAI,CAAC,GAAGmD,cAAc,CAACF,GAAG,CAACjD,IAAI,CAAC,CAAC;QACxC;MACJ;IACJ;IACA,OAAO8B,EAAE;EACb;EACA,IAAI33D,QAAQ,GAAG,CAAC,CAAC,CAACA,QAAQ;EAC1B,SAASi5D,WAAWA,CAACC,CAAC,EAAE;IACpB,OAAOl5D,QAAQ,CAACiuD,IAAI,CAACiL,CAAC,CAAC,CAACj5D,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACxC;EACA,IAAIk5D,cAAc,GAAG,OAAOC,MAAM,KAAK,WAAW,GAC9CA,MAAM,CAACC,QAAQ,GACf,YAAY;EAChB,IAAIC,aAAa,GAAG,OAAOH,cAAc,KAAK,QAAQ,GAAG,UAAU3jC,CAAC,EAAE;IAClE,IAAI/N,CAAC;IACL,OAAO+N,CAAC,IAAI,IAAI,KAAK/N,CAAC,GAAG+N,CAAC,CAAC2jC,cAAc,CAAC,CAAC,IAAI1xC,CAAC,CAACstC,KAAK,CAACv/B,CAAC,CAAC;EAC7D,CAAC,GAAG,YAAY;IAAE,OAAO,IAAI;EAAE,CAAC;EAChC,IAAI+jC,aAAa,GAAG,CAAC,CAAC;EACtB,SAASC,UAAUA,CAACC,SAAS,EAAE;IAC3B,IAAIhyC,CAAC,EAAE+E,CAAC,EAAEgJ,CAAC,EAAEkkC,EAAE;IACf,IAAItyD,SAAS,CAAC3J,MAAM,KAAK,CAAC,EAAE;MACxB,IAAIywD,OAAO,CAACuL,SAAS,CAAC,EAClB,OAAOA,SAAS,CAACx5D,KAAK,CAAC,CAAC;MAC5B,IAAI,IAAI,KAAKs5D,aAAa,IAAI,OAAOE,SAAS,KAAK,QAAQ,EACvD,OAAO,CAACA,SAAS,CAAC;MACtB,IAAKC,EAAE,GAAGJ,aAAa,CAACG,SAAS,CAAC,EAAG;QACjCjtC,CAAC,GAAG,EAAE;QACN,OAAQgJ,CAAC,GAAGkkC,EAAE,CAACC,IAAI,CAAC,CAAC,EAAG,CAACnkC,CAAC,CAACokC,IAAI,EAC3BptC,CAAC,CAAChe,IAAI,CAACgnB,CAAC,CAACxtB,KAAK,CAAC;QACnB,OAAOwkB,CAAC;MACZ;MACA,IAAIitC,SAAS,IAAI,IAAI,EACjB,OAAO,CAACA,SAAS,CAAC;MACtBhyC,CAAC,GAAGgyC,SAAS,CAACh8D,MAAM;MACpB,IAAI,OAAOgqB,CAAC,KAAK,QAAQ,EAAE;QACvB+E,CAAC,GAAG,IAAIjtB,KAAK,CAACkoB,CAAC,CAAC;QAChB,OAAOA,CAAC,EAAE,EACN+E,CAAC,CAAC/E,CAAC,CAAC,GAAGgyC,SAAS,CAAChyC,CAAC,CAAC;QACvB,OAAO+E,CAAC;MACZ;MACA,OAAO,CAACitC,SAAS,CAAC;IACtB;IACAhyC,CAAC,GAAGrgB,SAAS,CAAC3J,MAAM;IACpB+uB,CAAC,GAAG,IAAIjtB,KAAK,CAACkoB,CAAC,CAAC;IAChB,OAAOA,CAAC,EAAE,EACN+E,CAAC,CAAC/E,CAAC,CAAC,GAAGrgB,SAAS,CAACqgB,CAAC,CAAC;IACvB,OAAO+E,CAAC;EACZ;EACA,IAAIqtC,eAAe,GAAG,OAAOT,MAAM,KAAK,WAAW,GAC7C,UAAU7wB,EAAE,EAAE;IAAE,OAAOA,EAAE,CAAC6wB,MAAM,CAACH,WAAW,CAAC,KAAK,eAAe;EAAE,CAAC,GACpE,YAAY;IAAE,OAAO,KAAK;EAAE,CAAC;EAEnC,IAAIa,KAAK,GAAG,OAAOC,QAAQ,KAAK,WAAW,IACvC,4CAA4C,CAACh7C,IAAI,CAACg7C,QAAQ,CAACC,IAAI,CAAC;EACpE,SAASC,QAAQA,CAACjyD,KAAK,EAAEmQ,MAAM,EAAE;IAC7B2hD,KAAK,GAAG9xD,KAAK;IACbkyD,aAAa,GAAG/hD,MAAM;EAC1B;EACA,IAAI+hD,aAAa,GAAG,SAAAA,CAAA,EAAY;IAAE,OAAO,IAAI;EAAE,CAAC;EAChD,IAAIC,qBAAqB,GAAG,CAAC,IAAI9gD,KAAK,CAAC,EAAE,CAAC,CAAC1R,KAAK;EAChD,SAASyyD,iBAAiBA,CAAA,EAAG;IACzB,IAAID,qBAAqB,EACrB,IAAI;MACAC,iBAAiB,CAAChzD,SAAS;MAC3B,MAAM,IAAIiS,KAAK,CAAC,CAAC;IACrB,CAAC,CACD,OAAOinC,CAAC,EAAE;MACN,OAAOA,CAAC;IACZ;IACJ,OAAO,IAAIjnC,KAAK,CAAC,CAAC;EACtB;EACA,SAASghD,WAAWA,CAACC,SAAS,EAAEC,gBAAgB,EAAE;IAC9C,IAAI5yD,KAAK,GAAG2yD,SAAS,CAAC3yD,KAAK;IAC3B,IAAI,CAACA,KAAK,EACN,OAAO,EAAE;IACb4yD,gBAAgB,GAAIA,gBAAgB,IAAI,CAAE;IAC1C,IAAI5yD,KAAK,CAACiwD,OAAO,CAAC0C,SAAS,CAACz+D,IAAI,CAAC,KAAK,CAAC,EACnC0+D,gBAAgB,IAAI,CAACD,SAAS,CAACz+D,IAAI,GAAGy+D,SAAS,CAAC79D,OAAO,EAAE8D,KAAK,CAAC,IAAI,CAAC,CAAC9C,MAAM;IAC/E,OAAOkK,KAAK,CAACpH,KAAK,CAAC,IAAI,CAAC,CACnBN,KAAK,CAACs6D,gBAAgB,CAAC,CACvBpiD,MAAM,CAAC+hD,aAAa,CAAC,CACrBp6D,GAAG,CAAC,UAAU06D,KAAK,EAAE;MAAE,OAAO,IAAI,GAAGA,KAAK;IAAE,CAAC,CAAC,CAC9Cl8D,IAAI,CAAC,EAAE,CAAC;EACjB;EAEA,IAAIm8D,eAAe,GAAG,CAClB,QAAQ,EACR,MAAM,EACN,YAAY,EACZ,eAAe,EACf,QAAQ,EACR,SAAS,EACT,cAAc,EACd,YAAY,EACZ,gBAAgB,EAChB,iBAAiB,EACjB,gBAAgB,EAChB,aAAa,EACb,UAAU,EACV,gBAAgB,EAChB,iBAAiB,EACjB,cAAc,CACjB;EACD,IAAIC,gBAAgB,GAAG,CACnB,SAAS,EACT,YAAY,EACZ,MAAM,EACN,qBAAqB,EACrB,UAAU,EACV,SAAS,EACT,UAAU,EACV,cAAc,EACd,eAAe,EACf,OAAO,EACP,SAAS,EACT,eAAe,EACf,QAAQ,EACR,WAAW,CACd;EACD,IAAIC,SAAS,GAAGF,eAAe,CAAC1pC,MAAM,CAAC2pC,gBAAgB,CAAC;EACxD,IAAIE,YAAY,GAAG;IACfC,cAAc,EAAE,uDAAuD;IACvEC,cAAc,EAAE,0BAA0B;IAC1CC,KAAK,EAAE,qBAAqB;IAC5BC,mBAAmB,EAAE,6CAA6C;IAClEC,UAAU,EAAE;EAChB,CAAC;EACD,SAASC,UAAUA,CAACr/D,IAAI,EAAE2rB,GAAG,EAAE;IAC3B,IAAI,CAAC2zC,EAAE,GAAGf,iBAAiB,CAAC,CAAC;IAC7B,IAAI,CAACv+D,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACY,OAAO,GAAG+qB,GAAG;EACtB;EACA8uC,MAAM,CAAC4E,UAAU,CAAC,CAAC17D,IAAI,CAAC6Z,KAAK,CAAC,CAACi8C,MAAM,CAAC;IAClC3tD,KAAK,EAAE;MACHF,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC2zD,MAAM,KACb,IAAI,CAACA,MAAM,GAAG,IAAI,CAACv/D,IAAI,GAAG,IAAI,GAAG,IAAI,CAACY,OAAO,GAAG49D,WAAW,CAAC,IAAI,CAACc,EAAE,EAAE,CAAC,CAAC,CAAC;MACjF;IACJ,CAAC;IACDn7D,QAAQ,EAAE,SAAAA,CAAA,EAAY;MAAE,OAAO,IAAI,CAACnE,IAAI,GAAG,IAAI,GAAG,IAAI,CAACY,OAAO;IAAE;EACpE,CAAC,CAAC;EACF,SAAS4+D,oBAAoBA,CAAC7zC,GAAG,EAAE8zC,QAAQ,EAAE;IACzC,OAAO9zC,GAAG,GAAG,YAAY,GAAG/N,MAAM,CAACikB,IAAI,CAAC49B,QAAQ,CAAC,CAC5Cx7D,GAAG,CAAC,UAAUd,GAAG,EAAE;MAAE,OAAOs8D,QAAQ,CAACt8D,GAAG,CAAC,CAACgB,QAAQ,CAAC,CAAC;IAAE,CAAC,CAAC,CACxDmY,MAAM,CAAC,UAAU0Y,CAAC,EAAEpJ,CAAC,EAAEuD,CAAC,EAAE;MAAE,OAAOA,CAAC,CAAC4sC,OAAO,CAAC/mC,CAAC,CAAC,KAAKpJ,CAAC;IAAE,CAAC,CAAC,CACzDnpB,IAAI,CAAC,IAAI,CAAC;EACnB;EACA,SAASi9D,WAAWA,CAAC/zC,GAAG,EAAE8zC,QAAQ,EAAEE,YAAY,EAAEC,UAAU,EAAE;IAC1D,IAAI,CAACN,EAAE,GAAGf,iBAAiB,CAAC,CAAC;IAC7B,IAAI,CAACkB,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACG,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACD,YAAY,GAAGA,YAAY;IAChC,IAAI,CAAC/+D,OAAO,GAAG4+D,oBAAoB,CAAC7zC,GAAG,EAAE8zC,QAAQ,CAAC;EACtD;EACAhF,MAAM,CAACiF,WAAW,CAAC,CAAC/7D,IAAI,CAAC07D,UAAU,CAAC;EACpC,SAASQ,SAASA,CAACl0C,GAAG,EAAE8zC,QAAQ,EAAE;IAC9B,IAAI,CAACH,EAAE,GAAGf,iBAAiB,CAAC,CAAC;IAC7B,IAAI,CAACv+D,IAAI,GAAG,WAAW;IACvB,IAAI,CAACy/D,QAAQ,GAAG7hD,MAAM,CAACikB,IAAI,CAAC49B,QAAQ,CAAC,CAACx7D,GAAG,CAAC,UAAU67D,GAAG,EAAE;MAAE,OAAOL,QAAQ,CAACK,GAAG,CAAC;IAAE,CAAC,CAAC;IACnF,IAAI,CAACC,aAAa,GAAGN,QAAQ;IAC7B,IAAI,CAAC7+D,OAAO,GAAG4+D,oBAAoB,CAAC7zC,GAAG,EAAE8zC,QAAQ,CAAC;EACtD;EACAhF,MAAM,CAACoF,SAAS,CAAC,CAACl8D,IAAI,CAAC07D,UAAU,CAAC;EAClC,IAAIW,QAAQ,GAAGlB,SAAS,CAAC3yC,MAAM,CAAC,UAAUutC,GAAG,EAAE15D,IAAI,EAAE;IAAE,OAAQ05D,GAAG,CAAC15D,IAAI,CAAC,GAAGA,IAAI,GAAG,OAAO,EAAE05D,GAAG;EAAG,CAAC,EAAE,CAAC,CAAC,CAAC;EACvG,IAAIuG,aAAa,GAAGZ,UAAU;EAC9B,IAAIa,UAAU,GAAGpB,SAAS,CAAC3yC,MAAM,CAAC,UAAUutC,GAAG,EAAE15D,IAAI,EAAE;IACnD,IAAImgE,QAAQ,GAAGngE,IAAI,GAAG,OAAO;IAC7B,SAASq/D,UAAUA,CAACe,UAAU,EAAEC,KAAK,EAAE;MACnC,IAAI,CAACf,EAAE,GAAGf,iBAAiB,CAAC,CAAC;MAC7B,IAAI,CAACv+D,IAAI,GAAGmgE,QAAQ;MACpB,IAAI,CAACC,UAAU,EAAE;QACb,IAAI,CAACx/D,OAAO,GAAGm+D,YAAY,CAAC/+D,IAAI,CAAC,IAAImgE,QAAQ;QAC7C,IAAI,CAACE,KAAK,GAAG,IAAI;MACrB,CAAC,MACI,IAAI,OAAOD,UAAU,KAAK,QAAQ,EAAE;QACrC,IAAI,CAACx/D,OAAO,GAAG,EAAE,GAAGw/D,UAAU,IAAI,CAACC,KAAK,GAAG,EAAE,GAAG,KAAK,GAAGA,KAAK,CAAC;QAC9D,IAAI,CAACA,KAAK,GAAGA,KAAK,IAAI,IAAI;MAC9B,CAAC,MACI,IAAI,OAAOD,UAAU,KAAK,QAAQ,EAAE;QACrC,IAAI,CAACx/D,OAAO,GAAGw/D,UAAU,CAACpgE,IAAI,GAAG,GAAG,GAAGogE,UAAU,CAACx/D,OAAO;QACzD,IAAI,CAACy/D,KAAK,GAAGD,UAAU;MAC3B;IACJ;IACA3F,MAAM,CAAC4E,UAAU,CAAC,CAAC17D,IAAI,CAACs8D,aAAa,CAAC;IACtCvG,GAAG,CAAC15D,IAAI,CAAC,GAAGq/D,UAAU;IACtB,OAAO3F,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;EACNwG,UAAU,CAACI,MAAM,GAAGC,WAAW;EAC/BL,UAAU,CAACM,IAAI,GAAGC,SAAS;EAC3BP,UAAU,CAACQ,KAAK,GAAGC,UAAU;EAC7B,IAAIC,YAAY,GAAG/B,gBAAgB,CAAC1yC,MAAM,CAAC,UAAUutC,GAAG,EAAE15D,IAAI,EAAE;IAC5D05D,GAAG,CAAC15D,IAAI,GAAG,OAAO,CAAC,GAAGkgE,UAAU,CAAClgE,IAAI,CAAC;IACtC,OAAO05D,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;EACN,SAASmH,QAAQA,CAACC,QAAQ,EAAElgE,OAAO,EAAE;IACjC,IAAI,CAACkgE,QAAQ,IAAIA,QAAQ,YAAYzB,UAAU,IAAIyB,QAAQ,YAAYL,SAAS,IAAIK,QAAQ,YAAYP,WAAW,IAAI,CAACO,QAAQ,CAAC9gE,IAAI,IAAI,CAAC4gE,YAAY,CAACE,QAAQ,CAAC9gE,IAAI,CAAC,EACjK,OAAO8gE,QAAQ;IACnB,IAAIhF,EAAE,GAAG,IAAI8E,YAAY,CAACE,QAAQ,CAAC9gE,IAAI,CAAC,CAACY,OAAO,IAAIkgE,QAAQ,CAAClgE,OAAO,EAAEkgE,QAAQ,CAAC;IAC/E,IAAI,OAAO,IAAIA,QAAQ,EAAE;MACrBzG,OAAO,CAACyB,EAAE,EAAE,OAAO,EAAE;QAAElwD,GAAG,EAAE,SAAAA,CAAA,EAAY;UAChC,OAAO,IAAI,CAACy0D,KAAK,CAACv0D,KAAK;QAC3B;MAAE,CAAC,CAAC;IACZ;IACA,OAAOgwD,EAAE;EACb;EACA,IAAIiF,kBAAkB,GAAGjC,SAAS,CAAC3yC,MAAM,CAAC,UAAUutC,GAAG,EAAE15D,IAAI,EAAE;IAC3D,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC+7D,OAAO,CAAC/7D,IAAI,CAAC,KAAK,CAAC,CAAC,EAChD05D,GAAG,CAAC15D,IAAI,GAAG,OAAO,CAAC,GAAGkgE,UAAU,CAAClgE,IAAI,CAAC;IAC1C,OAAO05D,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;EACNqH,kBAAkB,CAACrB,WAAW,GAAGA,WAAW;EAC5CqB,kBAAkB,CAAC1B,UAAU,GAAGA,UAAU;EAC1C0B,kBAAkB,CAAClB,SAAS,GAAGA,SAAS;EAExC,SAASmB,GAAGA,CAAA,EAAG,CAAE;EACjB,SAASC,MAAMA,CAACjrC,GAAG,EAAE;IAAE,OAAOA,GAAG;EAAE;EACnC,SAASkrC,iBAAiBA,CAACC,EAAE,EAAEC,EAAE,EAAE;IAC/B,IAAID,EAAE,IAAI,IAAI,IAAIA,EAAE,KAAKF,MAAM,EAC3B,OAAOG,EAAE;IACb,OAAO,UAAUprC,GAAG,EAAE;MAClB,OAAOorC,EAAE,CAACD,EAAE,CAACnrC,GAAG,CAAC,CAAC;IACtB,CAAC;EACL;EACA,SAASqrC,QAAQA,CAACC,GAAG,EAAEC,GAAG,EAAE;IACxB,OAAO,YAAY;MACfD,GAAG,CAACpI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MAC1Bg2D,GAAG,CAACrI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;IAC9B,CAAC;EACL;EACA,SAASi2D,iBAAiBA,CAACL,EAAE,EAAEC,EAAE,EAAE;IAC/B,IAAID,EAAE,KAAKH,GAAG,EACV,OAAOI,EAAE;IACb,OAAO,YAAY;MACf,IAAIz1D,GAAG,GAAGw1D,EAAE,CAACjI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACnC,IAAII,GAAG,KAAKlM,SAAS,EACjB8L,SAAS,CAAC,CAAC,CAAC,GAAGI,GAAG;MACtB,IAAI81D,SAAS,GAAG,IAAI,CAACA,SAAS;QAC9B7X,OAAO,GAAG,IAAI,CAACA,OAAO;MACtB,IAAI,CAAC6X,SAAS,GAAG,IAAI;MACrB,IAAI,CAAC7X,OAAO,GAAG,IAAI;MACnB,IAAI8X,IAAI,GAAGN,EAAE,CAAClI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACpC,IAAIk2D,SAAS,EACT,IAAI,CAACA,SAAS,GAAG,IAAI,CAACA,SAAS,GAAGJ,QAAQ,CAACI,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC,GAAGA,SAAS;MACrF,IAAI7X,OAAO,EACP,IAAI,CAACA,OAAO,GAAG,IAAI,CAACA,OAAO,GAAGyX,QAAQ,CAACzX,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC,GAAGA,OAAO;MAC3E,OAAO8X,IAAI,KAAKjiE,SAAS,GAAGiiE,IAAI,GAAG/1D,GAAG;IAC1C,CAAC;EACL;EACA,SAASg2D,iBAAiBA,CAACR,EAAE,EAAEC,EAAE,EAAE;IAC/B,IAAID,EAAE,KAAKH,GAAG,EACV,OAAOI,EAAE;IACb,OAAO,YAAY;MACfD,EAAE,CAACjI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACzB,IAAIk2D,SAAS,GAAG,IAAI,CAACA,SAAS;QAC9B7X,OAAO,GAAG,IAAI,CAACA,OAAO;MACtB,IAAI,CAAC6X,SAAS,GAAG,IAAI,CAAC7X,OAAO,GAAG,IAAI;MACpCwX,EAAE,CAAClI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACzB,IAAIk2D,SAAS,EACT,IAAI,CAACA,SAAS,GAAG,IAAI,CAACA,SAAS,GAAGJ,QAAQ,CAACI,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC,GAAGA,SAAS;MACrF,IAAI7X,OAAO,EACP,IAAI,CAACA,OAAO,GAAG,IAAI,CAACA,OAAO,GAAGyX,QAAQ,CAACzX,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC,GAAGA,OAAO;IAC/E,CAAC;EACL;EACA,SAASgY,iBAAiBA,CAACT,EAAE,EAAEC,EAAE,EAAE;IAC/B,IAAID,EAAE,KAAKH,GAAG,EACV,OAAOI,EAAE;IACb,OAAO,UAAUS,aAAa,EAAE;MAC5B,IAAIl2D,GAAG,GAAGw1D,EAAE,CAACjI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACnCkuD,MAAM,CAACoI,aAAa,EAAEl2D,GAAG,CAAC;MAC1B,IAAI81D,SAAS,GAAG,IAAI,CAACA,SAAS;QAC9B7X,OAAO,GAAG,IAAI,CAACA,OAAO;MACtB,IAAI,CAAC6X,SAAS,GAAG,IAAI;MACrB,IAAI,CAAC7X,OAAO,GAAG,IAAI;MACnB,IAAI8X,IAAI,GAAGN,EAAE,CAAClI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACpC,IAAIk2D,SAAS,EACT,IAAI,CAACA,SAAS,GAAG,IAAI,CAACA,SAAS,GAAGJ,QAAQ,CAACI,SAAS,EAAE,IAAI,CAACA,SAAS,CAAC,GAAGA,SAAS;MACrF,IAAI7X,OAAO,EACP,IAAI,CAACA,OAAO,GAAG,IAAI,CAACA,OAAO,GAAGyX,QAAQ,CAACzX,OAAO,EAAE,IAAI,CAACA,OAAO,CAAC,GAAGA,OAAO;MAC3E,OAAOj+C,GAAG,KAAKlM,SAAS,GACnBiiE,IAAI,KAAKjiE,SAAS,GAAGA,SAAS,GAAGiiE,IAAI,GACrCjI,MAAM,CAAC9tD,GAAG,EAAE+1D,IAAI,CAAE;IAC3B,CAAC;EACL;EACA,SAASI,0BAA0BA,CAACX,EAAE,EAAEC,EAAE,EAAE;IACxC,IAAID,EAAE,KAAKH,GAAG,EACV,OAAOI,EAAE;IACb,OAAO,YAAY;MACf,IAAIA,EAAE,CAAClI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,KAAK,KAAK,EACnC,OAAO,KAAK;MAChB,OAAO41D,EAAE,CAACjI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;IACpC,CAAC;EACL;EACA,SAASw2D,eAAeA,CAACZ,EAAE,EAAEC,EAAE,EAAE;IAC7B,IAAID,EAAE,KAAKH,GAAG,EACV,OAAOI,EAAE;IACb,OAAO,YAAY;MACf,IAAIz1D,GAAG,GAAGw1D,EAAE,CAACjI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACnC,IAAII,GAAG,IAAI,OAAOA,GAAG,CAACsqC,IAAI,KAAK,UAAU,EAAE;QACvC,IAAI+rB,IAAI,GAAG,IAAI;UAAEp2C,CAAC,GAAGrgB,SAAS,CAAC3J,MAAM;UAAE+pC,IAAI,GAAG,IAAIjoC,KAAK,CAACkoB,CAAC,CAAC;QAC1D,OAAOA,CAAC,EAAE,EACN+f,IAAI,CAAC/f,CAAC,CAAC,GAAGrgB,SAAS,CAACqgB,CAAC,CAAC;QAC1B,OAAOjgB,GAAG,CAACsqC,IAAI,CAAC,YAAY;UACxB,OAAOmrB,EAAE,CAAClI,KAAK,CAAC8I,IAAI,EAAEr2B,IAAI,CAAC;QAC/B,CAAC,CAAC;MACN;MACA,OAAOy1B,EAAE,CAAClI,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;IACpC,CAAC;EACL;EAEA,IAAI02D,QAAQ,GAAG,CAAC,CAAC;EACjB,IAAIC,sBAAsB,GAAG,GAAG;IAChCC,eAAe,GAAG,EAAE;IAAEC,eAAe,GAAG,GAAG;IAAEC,IAAI,GAAG,OAAOj8D,OAAO,KAAK,WAAW,GAC9E,EAAE,GACD,YAAY;MACT,IAAIk8D,OAAO,GAAGl8D,OAAO,CAACu7B,OAAO,CAAC,CAAC;MAC/B,IAAI,OAAOh/B,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAACI,MAAM,EAC/C,OAAO,CAACu/D,OAAO,EAAE1I,QAAQ,CAAC0I,OAAO,CAAC,EAAEA,OAAO,CAAC;MAChD,IAAIC,OAAO,GAAG5/D,MAAM,CAACI,MAAM,CAACyC,MAAM,CAAC,SAAS,EAAE,IAAI3C,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAClE,OAAO,CACH0/D,OAAO,EACP3I,QAAQ,CAAC2I,OAAO,CAAC,EACjBD,OAAO,CACV;IACL,CAAC,CAAE,CAAC;IAAEE,qBAAqB,GAAGH,IAAI,CAAC,CAAC,CAAC;IAAEI,kBAAkB,GAAGJ,IAAI,CAAC,CAAC,CAAC;IAAEK,qBAAqB,GAAGL,IAAI,CAAC,CAAC,CAAC;IAAEM,iBAAiB,GAAGF,kBAAkB,IAAIA,kBAAkB,CAACxsB,IAAI;EAC3K,IAAI2sB,aAAa,GAAGJ,qBAAqB,IAAIA,qBAAqB,CAACv3D,WAAW;EAC9E,IAAI43D,kBAAkB,GAAG,CAAC,CAACH,qBAAqB;EAChD,IAAII,qBAAqB,GAAG,KAAK;EACjC,IAAIC,oBAAoB,GAAGL,qBAAqB,GAC5C,YAAY;IAAEA,qBAAqB,CAACzsB,IAAI,CAAC+sB,YAAY,CAAC;EAAE,CAAC,GAErDzJ,OAAO,CAAC6B,YAAY,GAChBA,YAAY,CAACta,IAAI,CAAC,IAAI,EAAEkiB,YAAY,CAAC,GACrCzJ,OAAO,CAAC0J,gBAAgB,GACpB,YAAY;IACR,IAAIC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC5C,IAAIH,gBAAgB,CAAC,YAAY;MAC9BD,YAAY,CAAC,CAAC;MACdE,SAAS,GAAG,IAAI;IACpB,CAAC,CAAC,CAAEG,OAAO,CAACH,SAAS,EAAE;MAAEI,UAAU,EAAE;IAAK,CAAC,CAAC;IAC5CJ,SAAS,CAACK,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC;EACpC,CAAC,GACD,YAAY;IAAElI,UAAU,CAAC2H,YAAY,EAAE,CAAC,CAAC;EAAE,CAAC;EAC5D,IAAIQ,IAAI,GAAG,SAAAA,CAAU94B,QAAQ,EAAEiB,IAAI,EAAE;IACjC83B,cAAc,CAAC9wD,IAAI,CAAC,CAAC+3B,QAAQ,EAAEiB,IAAI,CAAC,CAAC;IACrC,IAAI+3B,oBAAoB,EAAE;MACtBX,oBAAoB,CAAC,CAAC;MACtBW,oBAAoB,GAAG,KAAK;IAChC;EACJ,CAAC;EACD,IAAIC,kBAAkB,GAAG,IAAI;IAC7BD,oBAAoB,GAAG,IAAI;IAC3BE,eAAe,GAAG,EAAE;IACpBC,eAAe,GAAG,EAAE;IACpBC,gBAAgB,GAAG,IAAI;IAAEC,eAAe,GAAG9C,MAAM;EACjD,IAAI+C,SAAS,GAAG;IACZh9C,EAAE,EAAE,QAAQ;IACZ4xC,MAAM,EAAE,IAAI;IACZqL,GAAG,EAAE,CAAC;IACNC,UAAU,EAAE,EAAE;IACdC,WAAW,EAAEC,WAAW;IACxBC,GAAG,EAAE,KAAK;IACVvZ,GAAG,EAAE,CAAC,CAAC;IACPwZ,QAAQ,EAAE,SAAAA,CAAA,EAAY;MAClB,IAAI,CAACJ,UAAU,CAAC78C,OAAO,CAAC,UAAUk9C,EAAE,EAAE;QAClC,IAAI;UACAH,WAAW,CAACG,EAAE,CAAC,CAAC,CAAC,EAAEA,EAAE,CAAC,CAAC,CAAC,CAAC;QAC7B,CAAC,CACD,OAAO9f,CAAC,EAAE,CAAE;MAChB,CAAC,CAAC;IACN;EACJ,CAAC;EACD,IAAI+f,GAAG,GAAGR,SAAS;EACnB,IAAIP,cAAc,GAAG,EAAE;EACvB,IAAIgB,iBAAiB,GAAG,CAAC;EACzB,IAAIC,cAAc,GAAG,EAAE;EACvB,SAASC,YAAYA,CAACj4B,EAAE,EAAE;IACtB,IAAI,OAAO,IAAI,KAAK,QAAQ,EACxB,MAAM,IAAI+zB,SAAS,CAAC,sCAAsC,CAAC;IAC/D,IAAI,CAACmE,UAAU,GAAG,EAAE;IACpB,IAAI,CAACC,WAAW,GAAG7D,GAAG;IACtB,IAAI,CAAC8D,IAAI,GAAG,KAAK;IACjB,IAAIC,GAAG,GAAI,IAAI,CAACC,IAAI,GAAGR,GAAI;IAC3B,IAAIvG,KAAK,EAAE;MACP,IAAI,CAACgH,YAAY,GAAG1G,iBAAiB,CAAC,CAAC;MACvC,IAAI,CAAC2G,KAAK,GAAG,IAAI;MACjB,IAAI,CAACC,QAAQ,GAAG,CAAC;IACrB;IACA,IAAI,OAAOz4B,EAAE,KAAK,UAAU,EAAE;MAC1B,IAAIA,EAAE,KAAKu1B,QAAQ,EACf,MAAM,IAAIxB,SAAS,CAAC,gBAAgB,CAAC;MACzC,IAAI,CAAC2E,MAAM,GAAG75D,SAAS,CAAC,CAAC,CAAC;MAC1B,IAAI,CAAC85D,MAAM,GAAG95D,SAAS,CAAC,CAAC,CAAC;MAC1B,IAAI,IAAI,CAAC65D,MAAM,KAAK,KAAK,EACrBE,eAAe,CAAC,IAAI,EAAE,IAAI,CAACD,MAAM,CAAC;MACtC;IACJ;IACA,IAAI,CAACD,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,EAAEN,GAAG,CAACd,GAAG;IACTsB,kBAAkB,CAAC,IAAI,EAAE74B,EAAE,CAAC;EAChC;EACA,IAAI84B,QAAQ,GAAG;IACX55D,GAAG,EAAE,SAAAA,CAAA,EAAY;MACb,IAAIm5D,GAAG,GAAGP,GAAG;QAAEiB,WAAW,GAAGC,WAAW;MACxC,SAASzvB,IAAIA,CAAC0vB,WAAW,EAAEC,UAAU,EAAE;QACnC,IAAIC,KAAK,GAAG,IAAI;QAChB,IAAIC,aAAa,GAAG,CAACf,GAAG,CAACnM,MAAM,KAAKmM,GAAG,KAAKP,GAAG,IAAIiB,WAAW,KAAKC,WAAW,CAAC;QAC/E,IAAIK,OAAO,GAAGD,aAAa,IAAI,CAACE,uBAAuB,CAAC,CAAC;QACzD,IAAIlK,EAAE,GAAG,IAAI6I,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;UACjD0gC,mBAAmB,CAACJ,KAAK,EAAE,IAAIK,QAAQ,CAACC,yBAAyB,CAACR,WAAW,EAAEZ,GAAG,EAAEe,aAAa,EAAEC,OAAO,CAAC,EAAEI,yBAAyB,CAACP,UAAU,EAAEb,GAAG,EAAEe,aAAa,EAAEC,OAAO,CAAC,EAAEpkC,OAAO,EAAE4D,MAAM,EAAEw/B,GAAG,CAAC,CAAC;QAC3M,CAAC,CAAC;QACF9G,KAAK,IAAImI,qBAAqB,CAACtK,EAAE,EAAE,IAAI,CAAC;QACxC,OAAOA,EAAE;MACb;MACA7lB,IAAI,CAACkc,SAAS,GAAG8P,QAAQ;MACzB,OAAOhsB,IAAI;IACf,CAAC;IACDjlB,GAAG,EAAE,SAAAA,CAAU7kB,KAAK,EAAE;MAClBkuD,OAAO,CAAC,IAAI,EAAE,MAAM,EAAEluD,KAAK,IAAIA,KAAK,CAACgmD,SAAS,KAAK8P,QAAQ,GACvDuD,QAAQ,GACR;QACI55D,GAAG,EAAE,SAAAA,CAAA,EAAY;UACb,OAAOO,KAAK;QAChB,CAAC;QACD6kB,GAAG,EAAEw0C,QAAQ,CAACx0C;MAClB,CAAC,CAAC;IACV;EACJ,CAAC;EACDipC,KAAK,CAAC0K,YAAY,CAACxS,SAAS,EAAE;IAC1Blc,IAAI,EAAEuvB,QAAQ;IACda,KAAK,EAAE,SAAAA,CAAUV,WAAW,EAAEC,UAAU,EAAE;MACtCK,mBAAmB,CAAC,IAAI,EAAE,IAAIC,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAEP,WAAW,EAAEC,UAAU,EAAEpB,GAAG,CAAC,CAAC;IACrF,CAAC;IACDt+D,KAAK,EAAE,SAAAA,CAAU0/D,UAAU,EAAE;MACzB,IAAIr6D,SAAS,CAAC3J,MAAM,KAAK,CAAC,EACtB,OAAO,IAAI,CAACq0C,IAAI,CAAC,IAAI,EAAE2vB,UAAU,CAAC;MACtC,IAAI38D,IAAI,GAAGsC,SAAS,CAAC,CAAC,CAAC;QAAE+6D,OAAO,GAAG/6D,SAAS,CAAC,CAAC,CAAC;MAC/C,OAAO,OAAOtC,IAAI,KAAK,UAAU,GAAG,IAAI,CAACgtC,IAAI,CAAC,IAAI,EAAE,UAAUv1C,GAAG,EAAE;QAC/D,OAAOA,GAAG,YAAYuI,IAAI,GAAGq9D,OAAO,CAAC5lE,GAAG,CAAC,GAAG6lE,aAAa,CAAC7lE,GAAG,CAAC;MAClE,CAAC,CAAC,GACI,IAAI,CAACu1C,IAAI,CAAC,IAAI,EAAE,UAAUv1C,GAAG,EAAE;QAC7B,OAAOA,GAAG,IAAIA,GAAG,CAACV,IAAI,KAAKiJ,IAAI,GAAGq9D,OAAO,CAAC5lE,GAAG,CAAC,GAAG6lE,aAAa,CAAC7lE,GAAG,CAAC;MACvE,CAAC,CAAC;IACV,CAAC;IACD8lE,OAAO,EAAE,SAAAA,CAAUC,SAAS,EAAE;MAC1B,OAAO,IAAI,CAACxwB,IAAI,CAAC,UAAU9pC,KAAK,EAAE;QAC9Bs6D,SAAS,CAAC,CAAC;QACX,OAAOt6D,KAAK;MAChB,CAAC,EAAE,UAAUzL,GAAG,EAAE;QACd+lE,SAAS,CAAC,CAAC;QACX,OAAOF,aAAa,CAAC7lE,GAAG,CAAC;MAC7B,CAAC,CAAC;IACN,CAAC;IACDoL,KAAK,EAAE;MACHF,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,IAAI,IAAI,CAAC2zD,MAAM,EACX,OAAO,IAAI,CAACA,MAAM;QACtB,IAAI;UACAuD,qBAAqB,GAAG,IAAI;UAC5B,IAAI4D,MAAM,GAAGC,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAExE,eAAe,CAAC;UAChD,IAAIr2D,KAAK,GAAG46D,MAAM,CAACjkE,IAAI,CAAC,mBAAmB,CAAC;UAC5C,IAAI,IAAI,CAAC2iE,MAAM,KAAK,IAAI,EACpB,IAAI,CAAC7F,MAAM,GAAGzzD,KAAK;UACvB,OAAOA,KAAK;QAChB,CAAC,SACO;UACJg3D,qBAAqB,GAAG,KAAK;QACjC;MACJ;IACJ,CAAC;IACDl+C,OAAO,EAAE,SAAAA,CAAUgiD,EAAE,EAAEj7C,GAAG,EAAE;MACxB,IAAIk6C,KAAK,GAAG,IAAI;MAChB,OAAOe,EAAE,GAAGC,QAAQ,GAChB,IAAIlC,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QACxC,IAAIuhC,MAAM,GAAGzL,UAAU,CAAC,YAAY;UAAE,OAAO91B,MAAM,CAAC,IAAI26B,UAAU,CAAC6G,OAAO,CAACp7C,GAAG,CAAC,CAAC;QAAE,CAAC,EAAEi7C,EAAE,CAAC;QACxFf,KAAK,CAAC5vB,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC,CAACihC,OAAO,CAACQ,YAAY,CAAClmB,IAAI,CAAC,IAAI,EAAEgmB,MAAM,CAAC,CAAC;MACxE,CAAC,CAAC,GAAG,IAAI;IACjB;EACJ,CAAC,CAAC;EACF,IAAI,OAAOvJ,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACH,WAAW,EACnD/C,OAAO,CAACsK,YAAY,CAACxS,SAAS,EAAEoL,MAAM,CAACH,WAAW,EAAE,eAAe,CAAC;EACxE4G,SAAS,CAAClZ,GAAG,GAAGmc,QAAQ,CAAC,CAAC;EAC1B,SAASf,QAAQA,CAACP,WAAW,EAAEC,UAAU,EAAEjkC,OAAO,EAAE4D,MAAM,EAAElH,IAAI,EAAE;IAC9D,IAAI,CAACsnC,WAAW,GAAG,OAAOA,WAAW,KAAK,UAAU,GAAGA,WAAW,GAAG,IAAI;IACzE,IAAI,CAACC,UAAU,GAAG,OAAOA,UAAU,KAAK,UAAU,GAAGA,UAAU,GAAG,IAAI;IACtE,IAAI,CAACjkC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC4D,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACw/B,GAAG,GAAG1mC,IAAI;EACnB;EACA47B,KAAK,CAAC0K,YAAY,EAAE;IAChBt+D,GAAG,EAAE,SAAAA,CAAA,EAAY;MACb,IAAIwX,MAAM,GAAG8/C,UAAU,CAACzE,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,CACzCtH,GAAG,CAACijE,wBAAwB,CAAC;MAClC,OAAO,IAAIvC,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC/C,IAAI1nB,MAAM,CAACjc,MAAM,KAAK,CAAC,EACnB+/B,OAAO,CAAC,EAAE,CAAC;QACf,IAAIwlC,SAAS,GAAGtpD,MAAM,CAACjc,MAAM;QAC7Bic,MAAM,CAACwJ,OAAO,CAAC,UAAUsJ,CAAC,EAAE/E,CAAC,EAAE;UAAE,OAAO+4C,YAAY,CAAChjC,OAAO,CAAChR,CAAC,CAAC,CAACslB,IAAI,CAAC,UAAUtc,CAAC,EAAE;YAC9E9b,MAAM,CAAC+N,CAAC,CAAC,GAAG+N,CAAC;YACb,IAAI,CAAC,GAAEwtC,SAAS,EACZxlC,OAAO,CAAC9jB,MAAM,CAAC;UACvB,CAAC,EAAE0nB,MAAM,CAAC;QAAE,CAAC,CAAC;MAClB,CAAC,CAAC;IACN,CAAC;IACD5D,OAAO,EAAE,SAAAA,CAAUx1B,KAAK,EAAE;MACtB,IAAIA,KAAK,YAAYw4D,YAAY,EAC7B,OAAOx4D,KAAK;MAChB,IAAIA,KAAK,IAAI,OAAOA,KAAK,CAAC8pC,IAAI,KAAK,UAAU,EACzC,OAAO,IAAI0uB,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC/Cp5B,KAAK,CAAC8pC,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC;MAC/B,CAAC,CAAC;MACN,IAAIu2B,EAAE,GAAG,IAAI6I,YAAY,CAAC1C,QAAQ,EAAE,IAAI,EAAE91D,KAAK,CAAC;MAChDi6D,qBAAqB,CAACtK,EAAE,EAAEgI,gBAAgB,CAAC;MAC3C,OAAOhI,EAAE;IACb,CAAC;IACDv2B,MAAM,EAAEghC,aAAa;IACrBa,IAAI,EAAE,SAAAA,CAAA,EAAY;MACd,IAAIvpD,MAAM,GAAG8/C,UAAU,CAACzE,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,CAACtH,GAAG,CAACijE,wBAAwB,CAAC;MAC5E,OAAO,IAAIvC,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC/C1nB,MAAM,CAAC5Z,GAAG,CAAC,UAAUkI,KAAK,EAAE;UAAE,OAAOw4D,YAAY,CAAChjC,OAAO,CAACx1B,KAAK,CAAC,CAAC8pC,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC;QAAE,CAAC,CAAC;MAC9F,CAAC,CAAC;IACN,CAAC;IACDi/B,GAAG,EAAE;MACD54D,GAAG,EAAE,SAAAA,CAAA,EAAY;QAAE,OAAO44D,GAAG;MAAE,CAAC;MAChCxzC,GAAG,EAAE,SAAAA,CAAU7kB,KAAK,EAAE;QAAE,OAAOq4D,GAAG,GAAGr4D,KAAK;MAAE;IAChD,CAAC;IACDu5D,WAAW,EAAE;MAAE95D,GAAG,EAAE,SAAAA,CAAA,EAAY;QAAE,OAAO85D,WAAW;MAAE;IAAE,CAAC;IACzD2B,MAAM,EAAEC,QAAQ;IAChBC,MAAM,EAAEA,MAAM;IACdC,SAAS,EAAE;MACP57D,GAAG,EAAE,SAAAA,CAAA,EAAY;QAAE,OAAO43D,IAAI;MAAE,CAAC;MACjCxyC,GAAG,EAAE,SAAAA,CAAU7kB,KAAK,EAAE;QAAEq3D,IAAI,GAAGr3D,KAAK;MAAE;IAC1C,CAAC;IACD43D,eAAe,EAAE;MACbn4D,GAAG,EAAE,SAAAA,CAAA,EAAY;QAAE,OAAOm4D,eAAe;MAAE,CAAC;MAC5C/yC,GAAG,EAAE,SAAAA,CAAU7kB,KAAK,EAAE;QAAE43D,eAAe,GAAG53D,KAAK;MAAE;IACrD,CAAC;IACDs7D,MAAM,EAAE,SAAAA,CAAU/6B,EAAE,EAAEg7B,SAAS,EAAE;MAC7B,OAAO,IAAI/C,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC/C,OAAO+hC,QAAQ,CAAC,UAAU3lC,OAAO,EAAE4D,MAAM,EAAE;UACvC,IAAIw/B,GAAG,GAAGP,GAAG;UACbO,GAAG,CAACb,UAAU,GAAG,EAAE;UACnBa,GAAG,CAACZ,WAAW,GAAG5+B,MAAM;UACxBw/B,GAAG,CAACT,QAAQ,GAAGjD,QAAQ,CAAC,YAAY;YAChC,IAAIwE,KAAK,GAAG,IAAI;YAChB8B,wCAAwC,CAAC,YAAY;cACjD9B,KAAK,CAAC3B,UAAU,CAACtiE,MAAM,KAAK,CAAC,GAAG+/B,OAAO,CAAC,CAAC,GAAG4D,MAAM,CAACsgC,KAAK,CAAC3B,UAAU,CAAC,CAAC,CAAC,CAAC;YAC3E,CAAC,CAAC;UACN,CAAC,EAAEa,GAAG,CAACT,QAAQ,CAAC;UAChB53B,EAAE,CAAC,CAAC;QACR,CAAC,EAAEg7B,SAAS,EAAE/lC,OAAO,EAAE4D,MAAM,CAAC;MAClC,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;EACF,IAAIq9B,aAAa,EAAE;IACf,IAAIA,aAAa,CAAC9sB,UAAU,EACxBukB,OAAO,CAACsK,YAAY,EAAE,YAAY,EAAE,YAAY;MAC5C,IAAIiD,gBAAgB,GAAGjK,UAAU,CAACzE,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,CAACtH,GAAG,CAACijE,wBAAwB,CAAC;MACtF,OAAO,IAAIvC,YAAY,CAAC,UAAUhjC,OAAO,EAAE;QACvC,IAAIimC,gBAAgB,CAAChmE,MAAM,KAAK,CAAC,EAC7B+/B,OAAO,CAAC,EAAE,CAAC;QACf,IAAIwlC,SAAS,GAAGS,gBAAgB,CAAChmE,MAAM;QACvC,IAAIukB,OAAO,GAAG,IAAIziB,KAAK,CAACyjE,SAAS,CAAC;QAClCS,gBAAgB,CAACvgD,OAAO,CAAC,UAAU2xC,CAAC,EAAEptC,CAAC,EAAE;UAAE,OAAO+4C,YAAY,CAAChjC,OAAO,CAACq3B,CAAC,CAAC,CAAC/iB,IAAI,CAAC,UAAU9pC,KAAK,EAAE;YAAE,OAAOga,OAAO,CAACyF,CAAC,CAAC,GAAG;cAAE1J,MAAM,EAAE,WAAW;cAAE/V,KAAK,EAAEA;YAAM,CAAC;UAAE,CAAC,EAAE,UAAU25B,MAAM,EAAE;YAAE,OAAO3f,OAAO,CAACyF,CAAC,CAAC,GAAG;cAAE1J,MAAM,EAAE,UAAU;cAAE4jB,MAAM,EAAEA;YAAO,CAAC;UAAE,CAAC,CAAC,CAC7OmQ,IAAI,CAAC,YAAY;YAAE,OAAO,EAAEkxB,SAAS,IAAIxlC,OAAO,CAACxb,OAAO,CAAC;UAAE,CAAC,CAAC;QAAE,CAAC,CAAC;MAC1E,CAAC,CAAC;IACN,CAAC,CAAC;IACN,IAAIy8C,aAAa,CAAC3F,GAAG,IAAI,OAAO4K,cAAc,KAAK,WAAW,EAC1DxN,OAAO,CAACsK,YAAY,EAAE,KAAK,EAAE,YAAY;MACrC,IAAIiD,gBAAgB,GAAGjK,UAAU,CAACzE,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,CAACtH,GAAG,CAACijE,wBAAwB,CAAC;MACtF,OAAO,IAAIvC,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC/C,IAAIqiC,gBAAgB,CAAChmE,MAAM,KAAK,CAAC,EAC7B2jC,MAAM,CAAC,IAAIsiC,cAAc,CAAC,EAAE,CAAC,CAAC;QAClC,IAAIV,SAAS,GAAGS,gBAAgB,CAAChmE,MAAM;QACvC,IAAI69D,QAAQ,GAAG,IAAI/7D,KAAK,CAACyjE,SAAS,CAAC;QACnCS,gBAAgB,CAACvgD,OAAO,CAAC,UAAU2xC,CAAC,EAAEptC,CAAC,EAAE;UAAE,OAAO+4C,YAAY,CAAChjC,OAAO,CAACq3B,CAAC,CAAC,CAAC/iB,IAAI,CAAC,UAAU9pC,KAAK,EAAE;YAAE,OAAOw1B,OAAO,CAACx1B,KAAK,CAAC;UAAE,CAAC,EAAE,UAAU27D,OAAO,EAAE;YAC3IrI,QAAQ,CAAC7zC,CAAC,CAAC,GAAGk8C,OAAO;YACrB,IAAI,CAAC,GAAEX,SAAS,EACZ5hC,MAAM,CAAC,IAAIsiC,cAAc,CAACpI,QAAQ,CAAC,CAAC;UAC5C,CAAC,CAAC;QAAE,CAAC,CAAC;MACV,CAAC,CAAC;IACN,CAAC,CAAC;EACV;EACA,SAAS8F,kBAAkBA,CAACx9C,OAAO,EAAE2kB,EAAE,EAAE;IACrC,IAAI;MACAA,EAAE,CAAC,UAAUvgC,KAAK,EAAE;QAChB,IAAI4b,OAAO,CAACq9C,MAAM,KAAK,IAAI,EACvB;QACJ,IAAIj5D,KAAK,KAAK4b,OAAO,EACjB,MAAM,IAAI04C,SAAS,CAAC,2CAA2C,CAAC;QACpE,IAAIsH,iBAAiB,GAAGhgD,OAAO,CAAC+8C,IAAI,IAAIkD,mBAAmB,CAAC,CAAC;QAC7D,IAAI77D,KAAK,IAAI,OAAOA,KAAK,CAAC8pC,IAAI,KAAK,UAAU,EAAE;UAC3CsvB,kBAAkB,CAACx9C,OAAO,EAAE,UAAU4Z,OAAO,EAAE4D,MAAM,EAAE;YACnDp5B,KAAK,YAAYw4D,YAAY,GACzBx4D,KAAK,CAACk6D,KAAK,CAAC1kC,OAAO,EAAE4D,MAAM,CAAC,GAC5Bp5B,KAAK,CAAC8pC,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC;UACnC,CAAC,CAAC;QACN,CAAC,MACI;UACDxd,OAAO,CAACq9C,MAAM,GAAG,IAAI;UACrBr9C,OAAO,CAACs9C,MAAM,GAAGl5D,KAAK;UACtB87D,qBAAqB,CAAClgD,OAAO,CAAC;QAClC;QACA,IAAIggD,iBAAiB,EACjBG,iBAAiB,CAAC,CAAC;MAC3B,CAAC,EAAE5C,eAAe,CAACxkB,IAAI,CAAC,IAAI,EAAE/4B,OAAO,CAAC,CAAC;IAC3C,CAAC,CACD,OAAO4zC,EAAE,EAAE;MACP2J,eAAe,CAACv9C,OAAO,EAAE4zC,EAAE,CAAC;IAChC;EACJ;EACA,SAAS2J,eAAeA,CAACv9C,OAAO,EAAE+d,MAAM,EAAE;IACtC+9B,eAAe,CAAClxD,IAAI,CAACmzB,MAAM,CAAC;IAC5B,IAAI/d,OAAO,CAACq9C,MAAM,KAAK,IAAI,EACvB;IACJ,IAAI2C,iBAAiB,GAAGhgD,OAAO,CAAC+8C,IAAI,IAAIkD,mBAAmB,CAAC,CAAC;IAC7DliC,MAAM,GAAGi+B,eAAe,CAACj+B,MAAM,CAAC;IAChC/d,OAAO,CAACq9C,MAAM,GAAG,KAAK;IACtBr9C,OAAO,CAACs9C,MAAM,GAAGv/B,MAAM;IACvBm4B,KAAK,IAAIn4B,MAAM,KAAK,IAAI,IAAI,OAAOA,MAAM,KAAK,QAAQ,IAAI,CAACA,MAAM,CAACqiC,QAAQ,IAAIzM,QAAQ,CAAC,YAAY;MAC/F,IAAI0M,QAAQ,GAAGvN,qBAAqB,CAAC/0B,MAAM,EAAE,OAAO,CAAC;MACrDA,MAAM,CAACqiC,QAAQ,GAAGpgD,OAAO;MACzBsyC,OAAO,CAACv0B,MAAM,EAAE,OAAO,EAAE;QACrBl6B,GAAG,EAAE,SAAAA,CAAA,EAAY;UACb,OAAOk3D,qBAAqB,GACxBsF,QAAQ,KAAKA,QAAQ,CAACx8D,GAAG,GACrBw8D,QAAQ,CAACx8D,GAAG,CAACstD,KAAK,CAACpzB,MAAM,CAAC,GAC1BsiC,QAAQ,CAACj8D,KAAK,CAAC,GACnB4b,OAAO,CAACjc,KAAK;QACrB;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;IACFu8D,yBAAyB,CAACtgD,OAAO,CAAC;IAClCkgD,qBAAqB,CAAClgD,OAAO,CAAC;IAC9B,IAAIggD,iBAAiB,EACjBG,iBAAiB,CAAC,CAAC;EAC3B;EACA,SAASD,qBAAqBA,CAAClgD,OAAO,EAAE;IACpC,IAAIugD,SAAS,GAAGvgD,OAAO,CAAC68C,UAAU;IAClC78C,OAAO,CAAC68C,UAAU,GAAG,EAAE;IACvB,KAAK,IAAIh5C,CAAC,GAAG,CAAC,EAAE2C,GAAG,GAAG+5C,SAAS,CAAC1mE,MAAM,EAAEgqB,CAAC,GAAG2C,GAAG,EAAE,EAAE3C,CAAC,EAAE;MAClDq6C,mBAAmB,CAACl+C,OAAO,EAAEugD,SAAS,CAAC18C,CAAC,CAAC,CAAC;IAC9C;IACA,IAAIm5C,GAAG,GAAGh9C,OAAO,CAACi9C,IAAI;IACtB,EAAED,GAAG,CAACd,GAAG,IAAIc,GAAG,CAACT,QAAQ,CAAC,CAAC;IAC3B,IAAIG,iBAAiB,KAAK,CAAC,EAAE;MACzB,EAAEA,iBAAiB;MACnBjB,IAAI,CAAC,YAAY;QACb,IAAI,EAAEiB,iBAAiB,KAAK,CAAC,EACzB8D,oBAAoB,CAAC,CAAC;MAC9B,CAAC,EAAE,EAAE,CAAC;IACV;EACJ;EACA,SAAStC,mBAAmBA,CAACl+C,OAAO,EAAEygD,QAAQ,EAAE;IAC5C,IAAIzgD,OAAO,CAACq9C,MAAM,KAAK,IAAI,EAAE;MACzBr9C,OAAO,CAAC68C,UAAU,CAACjyD,IAAI,CAAC61D,QAAQ,CAAC;MACjC;IACJ;IACA,IAAIC,EAAE,GAAG1gD,OAAO,CAACq9C,MAAM,GAAGoD,QAAQ,CAAC7C,WAAW,GAAG6C,QAAQ,CAAC5C,UAAU;IACpE,IAAI6C,EAAE,KAAK,IAAI,EAAE;MACb,OAAO,CAAC1gD,OAAO,CAACq9C,MAAM,GAAGoD,QAAQ,CAAC7mC,OAAO,GAAG6mC,QAAQ,CAACjjC,MAAM,EAAExd,OAAO,CAACs9C,MAAM,CAAC;IAChF;IACA,EAAEmD,QAAQ,CAACzD,GAAG,CAACd,GAAG;IAClB,EAAEQ,iBAAiB;IACnBjB,IAAI,CAACkF,YAAY,EAAE,CAACD,EAAE,EAAE1gD,OAAO,EAAEygD,QAAQ,CAAC,CAAC;EAC/C;EACA,SAASE,YAAYA,CAACD,EAAE,EAAE1gD,OAAO,EAAEygD,QAAQ,EAAE;IACzC,IAAI;MACA1E,gBAAgB,GAAG/7C,OAAO;MAC1B,IAAI4gC,GAAG;QAAEx8C,KAAK,GAAG4b,OAAO,CAACs9C,MAAM;MAC/B,IAAIt9C,OAAO,CAACq9C,MAAM,EAAE;QAChBzc,GAAG,GAAG8f,EAAE,CAACt8D,KAAK,CAAC;MACnB,CAAC,MACI;QACD,IAAI03D,eAAe,CAACjiE,MAAM,EACtBiiE,eAAe,GAAG,EAAE;QACxBlb,GAAG,GAAG8f,EAAE,CAACt8D,KAAK,CAAC;QACf,IAAI03D,eAAe,CAAC9H,OAAO,CAAC5vD,KAAK,CAAC,KAAK,CAAC,CAAC,EACrCw8D,kBAAkB,CAAC5gD,OAAO,CAAC;MACnC;MACAygD,QAAQ,CAAC7mC,OAAO,CAACgnB,GAAG,CAAC;IACzB,CAAC,CACD,OAAOlE,CAAC,EAAE;MACN+jB,QAAQ,CAACjjC,MAAM,CAACkf,CAAC,CAAC;IACtB,CAAC,SACO;MACJqf,gBAAgB,GAAG,IAAI;MACvB,IAAI,EAAEW,iBAAiB,KAAK,CAAC,EACzB8D,oBAAoB,CAAC,CAAC;MAC1B,EAAEC,QAAQ,CAACzD,GAAG,CAACd,GAAG,IAAIuE,QAAQ,CAACzD,GAAG,CAACT,QAAQ,CAAC,CAAC;IACjD;EACJ;EACA,SAASqC,QAAQA,CAAC5+C,OAAO,EAAE2+C,MAAM,EAAEt1D,KAAK,EAAE;IACtC,IAAIs1D,MAAM,CAAC9kE,MAAM,KAAKwP,KAAK,EACvB,OAAOs1D,MAAM;IACjB,IAAI56D,KAAK,GAAG,EAAE;IACd,IAAIic,OAAO,CAACq9C,MAAM,KAAK,KAAK,EAAE;MAC1B,IAAI0C,OAAO,GAAG//C,OAAO,CAACs9C,MAAM;QAAEuD,SAAS;QAAEhoE,OAAO;MAChD,IAAIknE,OAAO,IAAI,IAAI,EAAE;QACjBc,SAAS,GAAGd,OAAO,CAAC9nE,IAAI,IAAI,OAAO;QACnCY,OAAO,GAAGknE,OAAO,CAAClnE,OAAO,IAAIknE,OAAO;QACpCh8D,KAAK,GAAG0yD,WAAW,CAACsJ,OAAO,EAAE,CAAC,CAAC;MACnC,CAAC,MACI;QACDc,SAAS,GAAGd,OAAO;QACnBlnE,OAAO,GAAG,EAAE;MAChB;MACA8lE,MAAM,CAAC/zD,IAAI,CAACi2D,SAAS,IAAIhoE,OAAO,GAAG,IAAI,GAAGA,OAAO,GAAG,EAAE,CAAC,GAAGkL,KAAK,CAAC;IACpE;IACA,IAAImyD,KAAK,EAAE;MACPnyD,KAAK,GAAG0yD,WAAW,CAACz2C,OAAO,CAACk9C,YAAY,EAAE,CAAC,CAAC;MAC5C,IAAIn5D,KAAK,IAAI46D,MAAM,CAAC3K,OAAO,CAACjwD,KAAK,CAAC,KAAK,CAAC,CAAC,EACrC46D,MAAM,CAAC/zD,IAAI,CAAC7G,KAAK,CAAC;MACtB,IAAIic,OAAO,CAACm9C,KAAK,EACbyB,QAAQ,CAAC5+C,OAAO,CAACm9C,KAAK,EAAEwB,MAAM,EAAEt1D,KAAK,CAAC;IAC9C;IACA,OAAOs1D,MAAM;EACjB;EACA,SAASN,qBAAqBA,CAACr+C,OAAO,EAAE8gD,IAAI,EAAE;IAC1C,IAAIC,OAAO,GAAGD,IAAI,GAAGA,IAAI,CAAC1D,QAAQ,GAAG,CAAC,GAAG,CAAC;IAC1C,IAAI2D,OAAO,GAAG5G,sBAAsB,EAAE;MAClCn6C,OAAO,CAACm9C,KAAK,GAAG2D,IAAI;MACpB9gD,OAAO,CAACo9C,QAAQ,GAAG2D,OAAO;IAC9B;EACJ;EACA,SAAS9F,YAAYA,CAAA,EAAG;IACpBgF,mBAAmB,CAAC,CAAC,IAAIE,iBAAiB,CAAC,CAAC;EAChD;EACA,SAASF,mBAAmBA,CAAA,EAAG;IAC3B,IAAIe,WAAW,GAAGpF,kBAAkB;IACpCA,kBAAkB,GAAG,KAAK;IAC1BD,oBAAoB,GAAG,KAAK;IAC5B,OAAOqF,WAAW;EACtB;EACA,SAASb,iBAAiBA,CAAA,EAAG;IACzB,IAAIc,SAAS,EAAEp9C,CAAC,EAAEytC,CAAC;IACnB,GAAG;MACC,OAAOoK,cAAc,CAAC7hE,MAAM,GAAG,CAAC,EAAE;QAC9BonE,SAAS,GAAGvF,cAAc;QAC1BA,cAAc,GAAG,EAAE;QACnBpK,CAAC,GAAG2P,SAAS,CAACpnE,MAAM;QACpB,KAAKgqB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;UACpB,IAAIwwB,IAAI,GAAG4sB,SAAS,CAACp9C,CAAC,CAAC;UACvBwwB,IAAI,CAAC,CAAC,CAAC,CAAC8c,KAAK,CAAC,IAAI,EAAE9c,IAAI,CAAC,CAAC,CAAC,CAAC;QAChC;MACJ;IACJ,CAAC,QAAQqnB,cAAc,CAAC7hE,MAAM,GAAG,CAAC;IAClC+hE,kBAAkB,GAAG,IAAI;IACzBD,oBAAoB,GAAG,IAAI;EAC/B;EACA,SAAS6E,oBAAoBA,CAAA,EAAG;IAC5B,IAAIU,aAAa,GAAGrF,eAAe;IACnCA,eAAe,GAAG,EAAE;IACpBqF,aAAa,CAAC5hD,OAAO,CAAC,UAAU2xC,CAAC,EAAE;MAC/BA,CAAC,CAACgM,IAAI,CAACb,WAAW,CAAC/R,IAAI,CAAC,IAAI,EAAE4G,CAAC,CAACqM,MAAM,EAAErM,CAAC,CAAC;IAC9C,CAAC,CAAC;IACF,IAAIkQ,UAAU,GAAGxE,cAAc,CAACtgE,KAAK,CAAC,CAAC,CAAC;IACxC,IAAIwnB,CAAC,GAAGs9C,UAAU,CAACtnE,MAAM;IACzB,OAAOgqB,CAAC,EACJs9C,UAAU,CAAC,EAAEt9C,CAAC,CAAC,CAAC,CAAC;EACzB;EACA,SAAS+7C,wCAAwCA,CAACj7B,EAAE,EAAE;IAClD,SAASy8B,SAASA,CAAA,EAAG;MACjBz8B,EAAE,CAAC,CAAC;MACJg4B,cAAc,CAACpI,MAAM,CAACoI,cAAc,CAAC3I,OAAO,CAACoN,SAAS,CAAC,EAAE,CAAC,CAAC;IAC/D;IACAzE,cAAc,CAAC/xD,IAAI,CAACw2D,SAAS,CAAC;IAC9B,EAAE1E,iBAAiB;IACnBjB,IAAI,CAAC,YAAY;MACb,IAAI,EAAEiB,iBAAiB,KAAK,CAAC,EACzB8D,oBAAoB,CAAC,CAAC;IAC9B,CAAC,EAAE,EAAE,CAAC;EACV;EACA,SAASF,yBAAyBA,CAACtgD,OAAO,EAAE;IACxC,IAAI,CAAC67C,eAAe,CAAC38B,IAAI,CAAC,UAAU+xB,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACqM,MAAM,KAAKt9C,OAAO,CAACs9C,MAAM;IAAE,CAAC,CAAC,EAC3EzB,eAAe,CAACjxD,IAAI,CAACoV,OAAO,CAAC;EACrC;EACA,SAAS4gD,kBAAkBA,CAAC5gD,OAAO,EAAE;IACjC,IAAI6D,CAAC,GAAGg4C,eAAe,CAAChiE,MAAM;IAC9B,OAAOgqB,CAAC,EACJ,IAAIg4C,eAAe,CAAC,EAAEh4C,CAAC,CAAC,CAACy5C,MAAM,KAAKt9C,OAAO,CAACs9C,MAAM,EAAE;MAChDzB,eAAe,CAACtH,MAAM,CAAC1wC,CAAC,EAAE,CAAC,CAAC;MAC5B;IACJ;EACR;EACA,SAAS26C,aAAaA,CAACzgC,MAAM,EAAE;IAC3B,OAAO,IAAI6+B,YAAY,CAAC1C,QAAQ,EAAE,KAAK,EAAEn8B,MAAM,CAAC;EACpD;EACA,SAASsjC,IAAIA,CAAC18B,EAAE,EAAE28B,YAAY,EAAE;IAC5B,IAAItE,GAAG,GAAGP,GAAG;IACb,OAAO,YAAY;MACf,IAAIuE,WAAW,GAAGf,mBAAmB,CAAC,CAAC;QAAEsB,UAAU,GAAG9E,GAAG;MACzD,IAAI;QACA+E,YAAY,CAACxE,GAAG,EAAE,IAAI,CAAC;QACvB,OAAOr4B,EAAE,CAACwsB,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACpC,CAAC,CACD,OAAOk5C,CAAC,EAAE;QACN4kB,YAAY,IAAIA,YAAY,CAAC5kB,CAAC,CAAC;MACnC,CAAC,SACO;QACJ8kB,YAAY,CAACD,UAAU,EAAE,KAAK,CAAC;QAC/B,IAAIP,WAAW,EACXb,iBAAiB,CAAC,CAAC;MAC3B;IACJ,CAAC;EACL;EACA,IAAIsB,IAAI,GAAG;IAAEC,MAAM,EAAE,CAAC;IAAEC,MAAM,EAAE,CAAC;IAAE1iD,EAAE,EAAE;EAAE,CAAC;EAC1C,IAAI2iD,WAAW,GAAG,CAAC;EACnB,IAAIC,SAAS,GAAG,EAAE;EAClB,IAAIC,UAAU,GAAG,CAAC;EAClB,IAAInE,WAAW,GAAG,CAAC;EACnB,IAAIoE,eAAe,GAAG,CAAC;EACvB,SAASxC,QAAQA,CAAC56B,EAAE,EAAEutB,KAAK,EAAE8P,EAAE,EAAEC,EAAE,EAAE;IACjC,IAAIC,MAAM,GAAGzF,GAAG;MAAEO,GAAG,GAAGnnD,MAAM,CAACwe,MAAM,CAAC6tC,MAAM,CAAC;IAC7ClF,GAAG,CAACkF,MAAM,GAAGA,MAAM;IACnBlF,GAAG,CAACd,GAAG,GAAG,CAAC;IACXc,GAAG,CAACnM,MAAM,GAAG,KAAK;IAClBmM,GAAG,CAAC/9C,EAAE,GAAG,EAAE8iD,eAAe;IAC1B,IAAII,SAAS,GAAGlG,SAAS,CAAClZ,GAAG;IAC7Bia,GAAG,CAACja,GAAG,GAAG+X,kBAAkB,GAAG;MAC3Bz8D,OAAO,EAAEu+D,YAAY;MACrBwF,WAAW,EAAE;QAAEh+D,KAAK,EAAEw4D,YAAY;QAAEpK,YAAY,EAAE,IAAI;QAAEC,QAAQ,EAAE;MAAK,CAAC;MACxEn0D,GAAG,EAAEs+D,YAAY,CAACt+D,GAAG;MACrB+gE,IAAI,EAAEzC,YAAY,CAACyC,IAAI;MACvBtxB,UAAU,EAAE6uB,YAAY,CAAC7uB,UAAU;MACnCmnB,GAAG,EAAE0H,YAAY,CAAC1H,GAAG;MACrBt7B,OAAO,EAAEgjC,YAAY,CAAChjC,OAAO;MAC7B4D,MAAM,EAAEo/B,YAAY,CAACp/B,MAAM;MAC3B6kC,KAAK,EAAEC,qBAAqB,CAACH,SAAS,CAACE,KAAK,EAAErF,GAAG,CAAC;MAClDuF,KAAK,EAAED,qBAAqB,CAACH,SAAS,CAACI,KAAK,EAAEvF,GAAG;IACrD,CAAC,GAAG,CAAC,CAAC;IACN,IAAI9K,KAAK,EACLR,MAAM,CAACsL,GAAG,EAAE9K,KAAK,CAAC;IACtB,EAAEgQ,MAAM,CAAChG,GAAG;IACZc,GAAG,CAACT,QAAQ,GAAG,YAAY;MACvB,EAAE,IAAI,CAAC2F,MAAM,CAAChG,GAAG,IAAI,IAAI,CAACgG,MAAM,CAAC3F,QAAQ,CAAC,CAAC;IAC/C,CAAC;IACD,IAAIxI,EAAE,GAAGyL,MAAM,CAACxC,GAAG,EAAEr4B,EAAE,EAAEq9B,EAAE,EAAEC,EAAE,CAAC;IAChC,IAAIjF,GAAG,CAACd,GAAG,KAAK,CAAC,EACbc,GAAG,CAACT,QAAQ,CAAC,CAAC;IAClB,OAAOxI,EAAE;EACb;EACA,SAASyO,uBAAuBA,CAAA,EAAG;IAC/B,IAAI,CAACf,IAAI,CAACxiD,EAAE,EACRwiD,IAAI,CAACxiD,EAAE,GAAG,EAAE2iD,WAAW;IAC3B,EAAEH,IAAI,CAACC,MAAM;IACbD,IAAI,CAACE,MAAM,IAAItH,eAAe;IAC9B,OAAOoH,IAAI,CAACxiD,EAAE;EAClB;EACA,SAASg/C,uBAAuBA,CAAA,EAAG;IAC/B,IAAI,CAACwD,IAAI,CAACC,MAAM,EACZ,OAAO,KAAK;IAChB,IAAI,EAAED,IAAI,CAACC,MAAM,KAAK,CAAC,EACnBD,IAAI,CAACxiD,EAAE,GAAG,CAAC;IACfwiD,IAAI,CAACE,MAAM,GAAGF,IAAI,CAACC,MAAM,GAAGrH,eAAe;IAC3C,OAAO,IAAI;EACf;EACA,IAAI,CAAC,EAAE,GAAGO,iBAAiB,EAAE5G,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,EAAE;IAC1DwO,uBAAuB,GAAGvE,uBAAuB,GAAGhF,GAAG;EAC3D;EACA,SAASkG,wBAAwBA,CAACsD,eAAe,EAAE;IAC/C,IAAIhB,IAAI,CAACE,MAAM,IAAIc,eAAe,IAAIA,eAAe,CAACv/D,WAAW,KAAK23D,aAAa,EAAE;MACjF2H,uBAAuB,CAAC,CAAC;MACzB,OAAOC,eAAe,CAACv0B,IAAI,CAAC,UAAUtc,CAAC,EAAE;QACrCqsC,uBAAuB,CAAC,CAAC;QACzB,OAAOrsC,CAAC;MACZ,CAAC,EAAE,UAAU8qB,CAAC,EAAE;QACZuhB,uBAAuB,CAAC,CAAC;QACzB,OAAOyE,SAAS,CAAChmB,CAAC,CAAC;MACvB,CAAC,CAAC;IACN;IACA,OAAO+lB,eAAe;EAC1B;EACA,SAASE,aAAaA,CAACC,UAAU,EAAE;IAC/B,EAAEjF,WAAW;IACb,IAAI,CAAC8D,IAAI,CAACE,MAAM,IAAI,EAAEF,IAAI,CAACE,MAAM,KAAK,CAAC,EAAE;MACrCF,IAAI,CAACE,MAAM,GAAGF,IAAI,CAACxiD,EAAE,GAAG,CAAC;IAC7B;IACA4iD,SAAS,CAACj3D,IAAI,CAAC6xD,GAAG,CAAC;IACnB+E,YAAY,CAACoB,UAAU,EAAE,IAAI,CAAC;EAClC;EACA,SAASC,aAAaA,CAAA,EAAG;IACrB,IAAIvsC,IAAI,GAAGurC,SAAS,CAACA,SAAS,CAAChoE,MAAM,GAAG,CAAC,CAAC;IAC1CgoE,SAAS,CAAC9+C,GAAG,CAAC,CAAC;IACfy+C,YAAY,CAAClrC,IAAI,EAAE,KAAK,CAAC;EAC7B;EACA,SAASkrC,YAAYA,CAACoB,UAAU,EAAEE,aAAa,EAAE;IAC7C,IAAIC,WAAW,GAAGtG,GAAG;IACrB,IAAIqG,aAAa,GAAGrB,IAAI,CAACE,MAAM,KAAK,CAACG,UAAU,EAAE,IAAIc,UAAU,KAAKnG,GAAG,CAAC,GAAGqF,UAAU,KAAK,CAAC,GAAEA,UAAU,IAAIc,UAAU,KAAKnG,GAAG,CAAC,EAAE;MAC5HuG,sBAAsB,CAACF,aAAa,GAAGH,aAAa,CAAC5pB,IAAI,CAAC,IAAI,EAAE6pB,UAAU,CAAC,GAAGC,aAAa,CAAC;IAChG;IACA,IAAID,UAAU,KAAKnG,GAAG,EAClB;IACJA,GAAG,GAAGmG,UAAU;IAChB,IAAIG,WAAW,KAAK9G,SAAS,EACzBA,SAAS,CAAClZ,GAAG,GAAGmc,QAAQ,CAAC,CAAC;IAC9B,IAAIpE,kBAAkB,EAAE;MACpB,IAAImI,eAAe,GAAGhH,SAAS,CAAClZ,GAAG,CAAC1kD,OAAO;MAC3C,IAAI6kE,SAAS,GAAGN,UAAU,CAAC7f,GAAG;MAC9B2X,kBAAkB,CAACxsB,IAAI,GAAGg1B,SAAS,CAACb,KAAK;MACzCY,eAAe,CAAC7Y,SAAS,CAAClc,IAAI,GAAGg1B,SAAS,CAACX,KAAK;MAChD,IAAIQ,WAAW,CAAClS,MAAM,IAAI+R,UAAU,CAAC/R,MAAM,EAAE;QACzCh7C,MAAM,CAAC02C,cAAc,CAACiF,OAAO,EAAE,SAAS,EAAE0R,SAAS,CAACd,WAAW,CAAC;QAChEa,eAAe,CAAC3kE,GAAG,GAAG4kE,SAAS,CAAC5kE,GAAG;QACnC2kE,eAAe,CAAC5D,IAAI,GAAG6D,SAAS,CAAC7D,IAAI;QACrC4D,eAAe,CAACrpC,OAAO,GAAGspC,SAAS,CAACtpC,OAAO;QAC3CqpC,eAAe,CAACzlC,MAAM,GAAG0lC,SAAS,CAAC1lC,MAAM;QACzC,IAAI0lC,SAAS,CAACn1B,UAAU,EACpBk1B,eAAe,CAACl1B,UAAU,GAAGm1B,SAAS,CAACn1B,UAAU;QACrD,IAAIm1B,SAAS,CAAChO,GAAG,EACb+N,eAAe,CAAC/N,GAAG,GAAGgO,SAAS,CAAChO,GAAG;MAC3C;IACJ;EACJ;EACA,SAASgK,QAAQA,CAAA,EAAG;IAChB,IAAIiE,aAAa,GAAG3R,OAAO,CAACnzD,OAAO;IACnC,OAAOy8D,kBAAkB,GAAG;MACxBz8D,OAAO,EAAE8kE,aAAa;MACtBf,WAAW,EAAEvsD,MAAM,CAACg9C,wBAAwB,CAACrB,OAAO,EAAE,SAAS,CAAC;MAChElzD,GAAG,EAAE6kE,aAAa,CAAC7kE,GAAG;MACtB+gE,IAAI,EAAE8D,aAAa,CAAC9D,IAAI;MACxBtxB,UAAU,EAAEo1B,aAAa,CAACp1B,UAAU;MACpCmnB,GAAG,EAAEiO,aAAa,CAACjO,GAAG;MACtBt7B,OAAO,EAAEupC,aAAa,CAACvpC,OAAO;MAC9B4D,MAAM,EAAE2lC,aAAa,CAAC3lC,MAAM;MAC5B6kC,KAAK,EAAE3H,kBAAkB,CAACxsB,IAAI;MAC9Bq0B,KAAK,EAAEY,aAAa,CAAC/Y,SAAS,CAAClc;IACnC,CAAC,GAAG,CAAC,CAAC;EACV;EACA,SAASsxB,MAAMA,CAACxC,GAAG,EAAEr4B,EAAE,EAAEq9B,EAAE,EAAEC,EAAE,EAAEmB,EAAE,EAAE;IACjC,IAAI7B,UAAU,GAAG9E,GAAG;IACpB,IAAI;MACA+E,YAAY,CAACxE,GAAG,EAAE,IAAI,CAAC;MACvB,OAAOr4B,EAAE,CAACq9B,EAAE,EAAEC,EAAE,EAAEmB,EAAE,CAAC;IACzB,CAAC,SACO;MACJ5B,YAAY,CAACD,UAAU,EAAE,KAAK,CAAC;IACnC;EACJ;EACA,SAASyB,sBAAsBA,CAACK,GAAG,EAAE;IACjCzI,iBAAiB,CAACvQ,IAAI,CAACoQ,qBAAqB,EAAE4I,GAAG,CAAC;EACtD;EACA,SAASjF,yBAAyBA,CAACz5B,EAAE,EAAErO,IAAI,EAAEynC,aAAa,EAAEC,OAAO,EAAE;IACjE,OAAO,OAAOr5B,EAAE,KAAK,UAAU,GAAGA,EAAE,GAAG,YAAY;MAC/C,IAAI2+B,SAAS,GAAG7G,GAAG;MACnB,IAAIsB,aAAa,EACbyE,uBAAuB,CAAC,CAAC;MAC7BhB,YAAY,CAAClrC,IAAI,EAAE,IAAI,CAAC;MACxB,IAAI;QACA,OAAOqO,EAAE,CAACwsB,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACpC,CAAC,SACO;QACJg+D,YAAY,CAAC8B,SAAS,EAAE,KAAK,CAAC;QAC9B,IAAItF,OAAO,EACPgF,sBAAsB,CAAC/E,uBAAuB,CAAC;MACvD;IACJ,CAAC;EACL;EACA,SAASqE,qBAAqBA,CAACiB,QAAQ,EAAEjtC,IAAI,EAAE;IAC3C,OAAO,UAAUktC,UAAU,EAAE3F,UAAU,EAAE;MACrC,OAAO0F,QAAQ,CAAClZ,IAAI,CAAC,IAAI,EAAE+T,yBAAyB,CAACoF,UAAU,EAAEltC,IAAI,CAAC,EAAE8nC,yBAAyB,CAACP,UAAU,EAAEvnC,IAAI,CAAC,CAAC;IACxH,CAAC;EACL;EACA,IAAImtC,kBAAkB,GAAG,oBAAoB;EAC7C,SAASpH,WAAWA,CAAC1jE,GAAG,EAAEqnB,OAAO,EAAE;IAC/B,IAAI+zC,EAAE;IACN,IAAI;MACAA,EAAE,GAAG/zC,OAAO,CAAC88C,WAAW,CAACnkE,GAAG,CAAC;IACjC,CAAC,CACD,OAAO+jD,CAAC,EAAE,CAAE;IACZ,IAAIqX,EAAE,KAAK,KAAK,EACZ,IAAI;MACA,IAAIhqD,KAAK;QAAE25D,SAAS,GAAG;UAAE1jD,OAAO,EAAEA,OAAO;UAAE+d,MAAM,EAAEplC;QAAI,CAAC;MACxD,IAAI64D,OAAO,CAAC4J,QAAQ,IAAIA,QAAQ,CAACuI,WAAW,EAAE;QAC1C55D,KAAK,GAAGqxD,QAAQ,CAACuI,WAAW,CAAC,OAAO,CAAC;QACrC55D,KAAK,CAAC65D,SAAS,CAACH,kBAAkB,EAAE,IAAI,EAAE,IAAI,CAAC;QAC/C/R,MAAM,CAAC3nD,KAAK,EAAE25D,SAAS,CAAC;MAC5B,CAAC,MACI,IAAIlS,OAAO,CAACqS,WAAW,EAAE;QAC1B95D,KAAK,GAAG,IAAI85D,WAAW,CAACJ,kBAAkB,EAAE;UAAEK,MAAM,EAAEJ;QAAU,CAAC,CAAC;QAClEhS,MAAM,CAAC3nD,KAAK,EAAE25D,SAAS,CAAC;MAC5B;MACA,IAAI35D,KAAK,IAAIynD,OAAO,CAACuS,aAAa,EAAE;QAChCA,aAAa,CAACh6D,KAAK,CAAC;QACpB,IAAI,CAACynD,OAAO,CAACwS,qBAAqB,IAAIxS,OAAO,CAACyS,oBAAoB,EAC9D,IAAI;UACAzS,OAAO,CAACyS,oBAAoB,CAACl6D,KAAK,CAAC;QACvC,CAAC,CACD,OAAOm6D,CAAC,EAAE,CAAE;MACpB;MACA,IAAIhO,KAAK,IAAInsD,KAAK,IAAI,CAACA,KAAK,CAACo6D,gBAAgB,EAAE;QAC3CnmE,OAAO,CAAComE,IAAI,CAAC,uBAAuB,IAAIzrE,GAAG,CAACoL,KAAK,IAAIpL,GAAG,CAAC,CAAC;MAC9D;IACJ,CAAC,CACD,OAAO+jD,CAAC,EAAE,CAAE;EACpB;EACA,IAAIgmB,SAAS,GAAG9F,YAAY,CAACp/B,MAAM;EAEnC,SAAS6mC,eAAeA,CAACC,EAAE,EAAEj1D,IAAI,EAAEk1D,UAAU,EAAE5/B,EAAE,EAAE;IAC/C,IAAI,CAAC2/B,EAAE,CAACE,KAAK,IAAK,CAACF,EAAE,CAACjH,MAAM,CAACoH,YAAY,IAAK,CAAChI,GAAG,CAACiI,UAAU,IAAI,CAACJ,EAAE,CAACK,IAAM,EAAE;MACzE,IAAIL,EAAE,CAACjH,MAAM,CAACoH,YAAY,EAAE;QACxB,OAAO/B,SAAS,CAAC,IAAIvK,UAAU,CAACjB,cAAc,CAACoN,EAAE,CAACjH,MAAM,CAACuH,WAAW,CAAC,CAAC;MAC1E;MACA,IAAI,CAACN,EAAE,CAACjH,MAAM,CAACwH,aAAa,EAAE;QAC1B,IAAI,CAACP,EAAE,CAACQ,QAAQ,CAACC,QAAQ,EACrB,OAAOrC,SAAS,CAAC,IAAIvK,UAAU,CAACjB,cAAc,CAAC,CAAC,CAAC;QACrDoN,EAAE,CAACzyD,IAAI,CAAC,CAAC,CAAC1T,KAAK,CAAC86D,GAAG,CAAC;MACxB;MACA,OAAOqL,EAAE,CAACjH,MAAM,CAAC2H,cAAc,CAAC92B,IAAI,CAAC,YAAY;QAAE,OAAOm2B,eAAe,CAACC,EAAE,EAAEj1D,IAAI,EAAEk1D,UAAU,EAAE5/B,EAAE,CAAC;MAAE,CAAC,CAAC;IAC3G,CAAC,MACI;MACD,IAAIsgC,KAAK,GAAGX,EAAE,CAACY,kBAAkB,CAAC71D,IAAI,EAAEk1D,UAAU,EAAED,EAAE,CAACa,SAAS,CAAC;MACjE,IAAI;QACAF,KAAK,CAAC5wC,MAAM,CAAC,CAAC;QACdiwC,EAAE,CAACjH,MAAM,CAAC+H,cAAc,GAAG,CAAC;MAChC,CAAC,CACD,OAAOxR,EAAE,EAAE;QACP,IAAIA,EAAE,CAAC37D,IAAI,KAAKggE,QAAQ,CAACoN,YAAY,IAAIf,EAAE,CAACgB,MAAM,CAAC,CAAC,IAAI,EAAEhB,EAAE,CAACjH,MAAM,CAAC+H,cAAc,GAAG,CAAC,EAAE;UACpFpnE,OAAO,CAAComE,IAAI,CAAC,0BAA0B,CAAC;UACxCE,EAAE,CAACiB,MAAM,CAAC,CAAC;UACX,OAAOjB,EAAE,CAACzyD,IAAI,CAAC,CAAC,CAACq8B,IAAI,CAAC,YAAY;YAAE,OAAOm2B,eAAe,CAACC,EAAE,EAAEj1D,IAAI,EAAEk1D,UAAU,EAAE5/B,EAAE,CAAC;UAAE,CAAC,CAAC;QAC5F;QACA,OAAO+9B,SAAS,CAAC9O,EAAE,CAAC;MACxB;MACA,OAAOqR,KAAK,CAAC7E,QAAQ,CAAC/wD,IAAI,EAAE,UAAUuqB,OAAO,EAAE4D,MAAM,EAAE;QACnD,OAAO+hC,QAAQ,CAAC,YAAY;UACxB9C,GAAG,CAACwI,KAAK,GAAGA,KAAK;UACjB,OAAOtgC,EAAE,CAAC/K,OAAO,EAAE4D,MAAM,EAAEynC,KAAK,CAAC;QACrC,CAAC,CAAC;MACN,CAAC,CAAC,CAAC/2B,IAAI,CAAC,UAAUz1C,MAAM,EAAE;QACtB,OAAOwsE,KAAK,CAACO,WAAW,CAACt3B,IAAI,CAAC,YAAY;UAAE,OAAOz1C,MAAM;QAAE,CAAC,CAAC;MACjE,CAAC,CAAC;IACN;EACJ;EAEA,IAAIgtE,aAAa,GAAG,OAAO;EAC3B,IAAIC,SAAS,GAAG3pE,MAAM,CAACC,YAAY,CAAC,KAAK,CAAC;EAC1C,IAAI2pE,MAAM,GAAG,CAAC7G,QAAQ;EACtB,IAAI8G,oBAAoB,GAAG,mGAAmG;EAC9H,IAAIC,eAAe,GAAG,kBAAkB;EACxC,IAAIC,WAAW,GAAG,EAAE;EACpB,IAAIC,UAAU,GAAG,OAAOC,SAAS,KAAK,WAAW,IAAI,qBAAqB,CAAC7qD,IAAI,CAAC6qD,SAAS,CAACC,SAAS,CAAC;EACpG,IAAIC,yBAAyB,GAAGH,UAAU;EAC1C,IAAII,0BAA0B,GAAGJ,UAAU;EAC3C,IAAIK,qBAAqB,GAAG,SAAAA,CAAUxP,KAAK,EAAE;IAAE,OAAO,CAAC,4BAA4B,CAACz7C,IAAI,CAACy7C,KAAK,CAAC;EAAE,CAAC;EAClG,IAAIyP,UAAU,GAAG,WAAW;EAC5B,IAAIC,QAAQ,GAAG,UAAU;EACzB,IAAIC,SAAS,GAAG,WAAW;EAE3B,SAASC,OAAOA,CAACC,OAAO,EAAEC,OAAO,EAAE;IAC/B,OAAOD,OAAO,GACVC,OAAO,GACH,YAAY;MAAE,OAAOD,OAAO,CAACtV,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,IAAIkjE,OAAO,CAACvV,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;IAAE,CAAC,GACxFijE,OAAO,GACXC,OAAO;EACf;EAEA,IAAIC,QAAQ,GAAG;IACXzlE,IAAI,EAAE,CAAC;IACP0lE,KAAK,EAAE,CAAC9H,QAAQ;IAChB+H,SAAS,EAAE,KAAK;IAChBC,KAAK,EAAE,CAAC,EAAE,CAAC;IACXC,SAAS,EAAE;EACf,CAAC;EAED,SAASC,6BAA6BA,CAAClT,OAAO,EAAE;IAC5C,OAAO,OAAOA,OAAO,KAAK,QAAQ,IAAI,CAAC,IAAI,CAAC34C,IAAI,CAAC24C,OAAO,CAAC,GACnD,UAAUnC,GAAG,EAAE;MACb,IAAIA,GAAG,CAACmC,OAAO,CAAC,KAAKp8D,SAAS,IAAKo8D,OAAO,IAAInC,GAAI,EAAE;QAChDA,GAAG,GAAGsD,SAAS,CAACtD,GAAG,CAAC;QACpB,OAAOA,GAAG,CAACmC,OAAO,CAAC;MACvB;MACA,OAAOnC,GAAG;IACd,CAAC,GACC,UAAUA,GAAG,EAAE;MAAE,OAAOA,GAAG;IAAE,CAAC;EACxC;EAEA,IAAIzuB,KAAK,GAAK,YAAY;IACtB,SAASA,KAAKA,CAAA,EAAG,CACjB;IACAA,KAAK,CAACknB,SAAS,CAAC6c,MAAM,GAAG,UAAU53D,IAAI,EAAEs1B,EAAE,EAAEuiC,WAAW,EAAE;MACtD,IAAIjC,KAAK,GAAG,IAAI,CAACkC,GAAG,IAAI1K,GAAG,CAACwI,KAAK;MACjC,IAAImC,SAAS,GAAG,IAAI,CAACnvE,IAAI;MACzB,SAASovE,uBAAuBA,CAACztC,OAAO,EAAE4D,MAAM,EAAEynC,KAAK,EAAE;QACrD,IAAI,CAACA,KAAK,CAACqC,MAAM,CAACF,SAAS,CAAC,EACxB,MAAM,IAAIjP,UAAU,CAACoP,QAAQ,CAAC,QAAQ,GAAGH,SAAS,GAAG,0BAA0B,CAAC;QACpF,OAAOziC,EAAE,CAACsgC,KAAK,CAACuC,QAAQ,EAAEvC,KAAK,CAAC;MACpC;MACA,IAAIjE,WAAW,GAAGf,mBAAmB,CAAC,CAAC;MACvC,IAAI;QACA,OAAOgF,KAAK,IAAIA,KAAK,CAACX,EAAE,KAAK,IAAI,CAACA,EAAE,GAChCW,KAAK,KAAKxI,GAAG,CAACwI,KAAK,GACfA,KAAK,CAAC7E,QAAQ,CAAC/wD,IAAI,EAAEg4D,uBAAuB,EAAEH,WAAW,CAAC,GAC1D3H,QAAQ,CAAC,YAAY;UAAE,OAAO0F,KAAK,CAAC7E,QAAQ,CAAC/wD,IAAI,EAAEg4D,uBAAuB,EAAEH,WAAW,CAAC;QAAE,CAAC,EAAE;UAAEjC,KAAK,EAAEA,KAAK;UAAEwC,SAAS,EAAEhL,GAAG,CAACgL,SAAS,IAAIhL;QAAI,CAAC,CAAC,GACnJ4H,eAAe,CAAC,IAAI,CAACC,EAAE,EAAEj1D,IAAI,EAAE,CAAC,IAAI,CAACpX,IAAI,CAAC,EAAEovE,uBAAuB,CAAC;MAC5E,CAAC,SACO;QACJ,IAAIrG,WAAW,EACXb,iBAAiB,CAAC,CAAC;MAC3B;IACJ,CAAC;IACDj9B,KAAK,CAACknB,SAAS,CAACvmD,GAAG,GAAG,UAAU6jE,SAAS,EAAEhH,EAAE,EAAE;MAC3C,IAAI5C,KAAK,GAAG,IAAI;MAChB,IAAI4J,SAAS,IAAIA,SAAS,CAACxkE,WAAW,KAAK2S,MAAM,EAC7C,OAAO,IAAI,CAAC1F,KAAK,CAACu3D,SAAS,CAAC,CAACC,KAAK,CAACjH,EAAE,CAAC;MAC1C,OAAO,IAAI,CAACuG,MAAM,CAAC,UAAU,EAAE,UAAUhC,KAAK,EAAE;QAC5C,OAAOnH,KAAK,CAAC8J,IAAI,CAAC/jE,GAAG,CAAC;UAAEohE,KAAK,EAAEA,KAAK;UAAE7pE,GAAG,EAAEssE;QAAU,CAAC,CAAC,CAClDx5B,IAAI,CAAC,UAAUtqC,GAAG,EAAE;UAAE,OAAOk6D,KAAK,CAACh5B,IAAI,CAAC+iC,OAAO,CAACC,IAAI,CAAClkE,GAAG,CAAC;QAAE,CAAC,CAAC;MACtE,CAAC,CAAC,CAACsqC,IAAI,CAACwyB,EAAE,CAAC;IACf,CAAC;IACDx9B,KAAK,CAACknB,SAAS,CAACj6C,KAAK,GAAG,UAAU43D,WAAW,EAAE;MAC3C,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAC/B,OAAO,IAAI,IAAI,CAACzD,EAAE,CAAC0D,WAAW,CAAC,IAAI,EAAED,WAAW,CAAC;MACrD,IAAIzd,OAAO,CAACyd,WAAW,CAAC,EACpB,OAAO,IAAI,IAAI,CAACzD,EAAE,CAAC0D,WAAW,CAAC,IAAI,EAAE,GAAG,GAAGD,WAAW,CAACrtE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;MAC3E,IAAIutE,QAAQ,GAAGnuC,IAAI,CAACiuC,WAAW,CAAC;MAChC,IAAIE,QAAQ,CAACpuE,MAAM,KAAK,CAAC,EACrB,OAAO,IAAI,CACNsW,KAAK,CAAC83D,QAAQ,CAAC,CAAC,CAAC,CAAC,CAClBv2D,MAAM,CAACq2D,WAAW,CAACE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;MACzC,IAAIC,aAAa,GAAG,IAAI,CAACZ,MAAM,CAACa,OAAO,CAACh7C,MAAM,CAAC,IAAI,CAACm6C,MAAM,CAACc,OAAO,CAAC,CAAC7zD,MAAM,CAAC,UAAU8zD,EAAE,EAAE;QACrF,OAAOA,EAAE,CAACC,QAAQ,IACdL,QAAQ,CAAC9xB,KAAK,CAAC,UAAU2d,OAAO,EAAE;UAAE,OAAOuU,EAAE,CAACvU,OAAO,CAACE,OAAO,CAACF,OAAO,CAAC,IAAI,CAAC;QAAE,CAAC,CAAC,IAC/EuU,EAAE,CAACvU,OAAO,CAAC3d,KAAK,CAAC,UAAU2d,OAAO,EAAE;UAAE,OAAOmU,QAAQ,CAACjU,OAAO,CAACF,OAAO,CAAC,IAAI,CAAC;QAAE,CAAC,CAAC;MACvF,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,IAAIoU,aAAa,IAAI,IAAI,CAAC5D,EAAE,CAACiE,OAAO,KAAK7C,SAAS,EAC9C,OAAO,IAAI,CACNv1D,KAAK,CAAC+3D,aAAa,CAACjwE,IAAI,CAAC,CACzByZ,MAAM,CAACw2D,aAAa,CAACpU,OAAO,CAAC53D,GAAG,CAAC,UAAUu4D,EAAE,EAAE;QAAE,OAAOsT,WAAW,CAACtT,EAAE,CAAC;MAAE,CAAC,CAAC,CAAC;MACrF,IAAI,CAACyT,aAAa,IAAIhS,KAAK,EACvBl4D,OAAO,CAAComE,IAAI,CAAC,YAAY,GAAGz5C,IAAI,CAACC,SAAS,CAACm9C,WAAW,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC9vE,IAAI,GAAG,sBAAsB,IAChG,kBAAkB,GAAGgwE,QAAQ,CAACvtE,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;MACxD,IAAI8tE,SAAS,GAAG,IAAI,CAAClB,MAAM,CAACkB,SAAS;MACrC,IAAIvvB,GAAG,GAAG,IAAI,CAACqrB,EAAE,CAACmE,KAAK,CAACC,SAAS;MACjC,SAASh3D,MAAMA,CAACkX,CAAC,EAAEzsB,CAAC,EAAE;QAClB,IAAI;UACA,OAAO88C,GAAG,CAAC0vB,GAAG,CAAC//C,CAAC,EAAEzsB,CAAC,CAAC,KAAK,CAAC;QAC9B,CAAC,CACD,OAAOugD,CAAC,EAAE;UACN,OAAO,KAAK;QAChB;MACJ;MACA,IAAIksB,EAAE,GAAGX,QAAQ,CAAC7jD,MAAM,CAAC,UAAUwkD,EAAE,EAAE9U,OAAO,EAAE;UAC5C,IAAI+U,SAAS,GAAGD,EAAE,CAAC,CAAC,CAAC;YAAEE,YAAY,GAAGF,EAAE,CAAC,CAAC,CAAC;UAC3C,IAAIr9D,KAAK,GAAGi9D,SAAS,CAAC1U,OAAO,CAAC;UAC9B,IAAI1vD,KAAK,GAAG2jE,WAAW,CAACjU,OAAO,CAAC;UAChC,OAAO,CACH+U,SAAS,IAAIt9D,KAAK,EAClBs9D,SAAS,IAAI,CAACt9D,KAAK,GACfi7D,OAAO,CAACsC,YAAY,EAAEv9D,KAAK,IAAIA,KAAK,CAACw9D,KAAK,GACtC,UAAUn3C,CAAC,EAAE;YACT,IAAIqgC,IAAI,GAAG4B,YAAY,CAACjiC,CAAC,EAAEkiC,OAAO,CAAC;YACnC,OAAOxJ,OAAO,CAAC2H,IAAI,CAAC,IAAIA,IAAI,CAAC/yB,IAAI,CAAC,UAAUmV,IAAI,EAAE;cAAE,OAAO3iC,MAAM,CAACtN,KAAK,EAAEiwC,IAAI,CAAC;YAAE,CAAC,CAAC;UACtF,CAAC,GAAG,UAAUziB,CAAC,EAAE;YAAE,OAAOlgB,MAAM,CAACtN,KAAK,EAAEyvD,YAAY,CAACjiC,CAAC,EAAEkiC,OAAO,CAAC,CAAC;UAAE,CAAC,CAAC,GACvEgV,YAAY,CACrB;QACL,CAAC,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAAEnqB,GAAG,GAAGiqB,EAAE,CAAC,CAAC,CAAC;QAAEI,cAAc,GAAGJ,EAAE,CAAC,CAAC,CAAC;MACrD,OAAOjqB,GAAG,GACN,IAAI,CAACxuC,KAAK,CAACwuC,GAAG,CAAC1mD,IAAI,CAAC,CAACyZ,MAAM,CAACq2D,WAAW,CAACppB,GAAG,CAACmV,OAAO,CAAC,CAAC,CAChDv/C,MAAM,CAACy0D,cAAc,CAAC,GAC3Bd,aAAa,GACT,IAAI,CAAC3zD,MAAM,CAACy0D,cAAc,CAAC,GAC3B,IAAI,CAAC74D,KAAK,CAAC83D,QAAQ,CAAC,CAACv2D,MAAM,CAAC,EAAE,CAAC;IAC3C,CAAC;IACDwxB,KAAK,CAACknB,SAAS,CAAC71C,MAAM,GAAG,UAAUy0D,cAAc,EAAE;MAC/C,OAAO,IAAI,CAACC,YAAY,CAAC,CAAC,CAACC,GAAG,CAACF,cAAc,CAAC;IAClD,CAAC;IACD9lC,KAAK,CAACknB,SAAS,CAAC+e,KAAK,GAAG,UAAUC,YAAY,EAAE;MAC5C,OAAO,IAAI,CAACH,YAAY,CAAC,CAAC,CAACE,KAAK,CAACC,YAAY,CAAC;IAClD,CAAC;IACDlmC,KAAK,CAACknB,SAAS,CAAChhD,MAAM,GAAG,UAAUA,MAAM,EAAE;MACvC,OAAO,IAAI,CAAC6/D,YAAY,CAAC,CAAC,CAAC7/D,MAAM,CAACA,MAAM,CAAC;IAC7C,CAAC;IACD85B,KAAK,CAACknB,SAAS,CAAC/gD,KAAK,GAAG,UAAUggE,OAAO,EAAE;MACvC,OAAO,IAAI,CAACJ,YAAY,CAAC,CAAC,CAAC5/D,KAAK,CAACggE,OAAO,CAAC;IAC7C,CAAC;IACDnmC,KAAK,CAACknB,SAAS,CAACkf,IAAI,GAAG,UAAU3mC,QAAQ,EAAE;MACvC,OAAO,IAAI,CAACsmC,YAAY,CAAC,CAAC,CAACK,IAAI,CAAC3mC,QAAQ,CAAC;IAC7C,CAAC;IACDO,KAAK,CAACknB,SAAS,CAACh6C,OAAO,GAAG,UAAUg5D,YAAY,EAAE;MAC9C,OAAO,IAAI,CAACH,YAAY,CAAC,CAAC,CAAC74D,OAAO,CAACg5D,YAAY,CAAC;IACpD,CAAC;IACDlmC,KAAK,CAACknB,SAAS,CAAC6e,YAAY,GAAG,YAAY;MACvC,OAAO,IAAI,IAAI,CAAC3E,EAAE,CAACiF,UAAU,CAAC,IAAI,IAAI,CAACjF,EAAE,CAAC0D,WAAW,CAAC,IAAI,CAAC,CAAC;IAChE,CAAC;IACD9kC,KAAK,CAACknB,SAAS,CAACof,OAAO,GAAG,UAAUj+D,KAAK,EAAE;MACvC,OAAO,IAAI,IAAI,CAAC+4D,EAAE,CAACiF,UAAU,CAAC,IAAI,IAAI,CAACjF,EAAE,CAAC0D,WAAW,CAAC,IAAI,EAAE1d,OAAO,CAAC/+C,KAAK,CAAC,GACtE,GAAG,GAAGA,KAAK,CAAC7Q,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAC3B6Q,KAAK,CAAC,CAAC;IACf,CAAC;IACD23B,KAAK,CAACknB,SAAS,CAACvgD,OAAO,GAAG,YAAY;MAClC,OAAO,IAAI,CAACo/D,YAAY,CAAC,CAAC,CAACp/D,OAAO,CAAC,CAAC;IACxC,CAAC;IACDq5B,KAAK,CAACknB,SAAS,CAACqf,UAAU,GAAG,UAAUvmE,WAAW,EAAE;MAChD,IAAI,CAACokE,MAAM,CAACoC,WAAW,GAAGxmE,WAAW;MACrC,IAAIymE,QAAQ,GAAG,SAAAA,CAAUhY,GAAG,EAAE;QAC1B,IAAI,CAACA,GAAG,EACJ,OAAOA,GAAG;QACd,IAAI/tD,GAAG,GAAGiS,MAAM,CAACwe,MAAM,CAACnxB,WAAW,CAACknD,SAAS,CAAC;QAC9C,KAAK,IAAIuK,CAAC,IAAIhD,GAAG,EACb,IAAIK,MAAM,CAACL,GAAG,EAAEgD,CAAC,CAAC,EACd,IAAI;UACA/wD,GAAG,CAAC+wD,CAAC,CAAC,GAAGhD,GAAG,CAACgD,CAAC,CAAC;QACnB,CAAC,CACD,OAAOuP,CAAC,EAAE,CAAE;QACpB,OAAOtgE,GAAG;MACd,CAAC;MACD,IAAI,IAAI,CAAC0jE,MAAM,CAACqC,QAAQ,EAAE;QACtB,IAAI,CAAC7kC,IAAI,CAAC+iC,OAAO,CAAC+B,WAAW,CAAC,IAAI,CAACtC,MAAM,CAACqC,QAAQ,CAAC;MACvD;MACA,IAAI,CAACrC,MAAM,CAACqC,QAAQ,GAAGA,QAAQ;MAC/B,IAAI,CAAC7kC,IAAI,CAAC,SAAS,EAAE6kC,QAAQ,CAAC;MAC9B,OAAOzmE,WAAW;IACtB,CAAC;IACDggC,KAAK,CAACknB,SAAS,CAACyf,WAAW,GAAG,YAAY;MACtC,SAASC,KAAKA,CAACv8C,OAAO,EAAE;QACpBmkC,MAAM,CAAC,IAAI,EAAEnkC,OAAO,CAAC;MACzB;MACA,OAAO,IAAI,CAACk8C,UAAU,CAACK,KAAK,CAAC;IACjC,CAAC;IACD5mC,KAAK,CAACknB,SAAS,CAAC7sC,GAAG,GAAG,UAAUo0C,GAAG,EAAEv2D,GAAG,EAAE;MACtC,IAAI0iE,KAAK,GAAG,IAAI;MAChB,IAAI8K,EAAE,GAAG,IAAI,CAACtB,MAAM,CAACc,OAAO;QAAE2B,IAAI,GAAGnB,EAAE,CAACmB,IAAI;QAAEjW,OAAO,GAAG8U,EAAE,CAAC9U,OAAO;MAClE,IAAIkW,QAAQ,GAAGrY,GAAG;MAClB,IAAImC,OAAO,IAAIiW,IAAI,EAAE;QACjBC,QAAQ,GAAGhD,6BAA6B,CAAClT,OAAO,CAAC,CAACnC,GAAG,CAAC;MAC1D;MACA,OAAO,IAAI,CAACsV,MAAM,CAAC,WAAW,EAAE,UAAUhC,KAAK,EAAE;QAC7C,OAAOnH,KAAK,CAAC8J,IAAI,CAACqC,MAAM,CAAC;UAAEhF,KAAK,EAAEA,KAAK;UAAE/jE,IAAI,EAAE,KAAK;UAAE44B,IAAI,EAAE1+B,GAAG,IAAI,IAAI,GAAG,CAACA,GAAG,CAAC,GAAG,IAAI;UAAE0a,MAAM,EAAE,CAACk0D,QAAQ;QAAE,CAAC,CAAC;MACjH,CAAC,CAAC,CAAC97B,IAAI,CAAC,UAAUtqC,GAAG,EAAE;QAAE,OAAOA,GAAG,CAACsmE,WAAW,GAAGtN,YAAY,CAACp/B,MAAM,CAAC55B,GAAG,CAAC8zD,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG9zD,GAAG,CAAC4tC,UAAU;MAAE,CAAC,CAAC,CACtGtD,IAAI,CAAC,UAAUsD,UAAU,EAAE;QAC5B,IAAIsiB,OAAO,EAAE;UACT,IAAI;YACAI,YAAY,CAACvC,GAAG,EAAEmC,OAAO,EAAEtiB,UAAU,CAAC;UAC1C,CAAC,CACD,OAAO0yB,CAAC,EAAE,CAAE;QAChB;QACA,OAAO1yB,UAAU;MACrB,CAAC,CAAC;IACN,CAAC;IACDtO,KAAK,CAACknB,SAAS,CAACvf,MAAM,GAAG,UAAUs/B,WAAW,EAAErQ,aAAa,EAAE;MAC3D,IAAI,OAAOqQ,WAAW,KAAK,QAAQ,IAAI,CAAC7f,OAAO,CAAC6f,WAAW,CAAC,EAAE;QAC1D,IAAI/uE,GAAG,GAAGy4D,YAAY,CAACsW,WAAW,EAAE,IAAI,CAAC7C,MAAM,CAACc,OAAO,CAACtU,OAAO,CAAC;QAChE,IAAI14D,GAAG,KAAK1D,SAAS,EACjB,OAAOgrE,SAAS,CAAC,IAAIvK,UAAU,CAACiS,eAAe,CAAC,+CAA+C,CAAC,CAAC;QACrG,IAAI;UACA,IAAI,OAAOtQ,aAAa,KAAK,UAAU,EAAE;YACrChgC,IAAI,CAACggC,aAAa,CAAC,CAACx6C,OAAO,CAAC,UAAUw0C,OAAO,EAAE;cAC3CI,YAAY,CAACiW,WAAW,EAAErW,OAAO,EAAEgG,aAAa,CAAChG,OAAO,CAAC,CAAC;YAC9D,CAAC,CAAC;UACN,CAAC,MACI;YACDgG,aAAa,CAACqQ,WAAW,EAAE;cAAE/lE,KAAK,EAAE+lE,WAAW;cAAE/B,OAAO,EAAEhtE;YAAI,CAAC,CAAC;UACpE;QACJ,CAAC,CACD,OAAOwtE,EAAE,EAAE,CACX;QACA,OAAO,IAAI,CAACz4D,KAAK,CAAC,KAAK,CAAC,CAACuB,MAAM,CAACtW,GAAG,CAAC,CAACivE,MAAM,CAACvQ,aAAa,CAAC;MAC9D,CAAC,MACI;QACD,OAAO,IAAI,CAAC3pD,KAAK,CAAC,KAAK,CAAC,CAACuB,MAAM,CAACy4D,WAAW,CAAC,CAACE,MAAM,CAACvQ,aAAa,CAAC;MACtE;IACJ,CAAC;IACD52B,KAAK,CAACknB,SAAS,CAACpf,GAAG,GAAG,UAAU2mB,GAAG,EAAEv2D,GAAG,EAAE;MACtC,IAAI0iE,KAAK,GAAG,IAAI;MAChB,IAAI8K,EAAE,GAAG,IAAI,CAACtB,MAAM,CAACc,OAAO;QAAE2B,IAAI,GAAGnB,EAAE,CAACmB,IAAI;QAAEjW,OAAO,GAAG8U,EAAE,CAAC9U,OAAO;MAClE,IAAIkW,QAAQ,GAAGrY,GAAG;MAClB,IAAImC,OAAO,IAAIiW,IAAI,EAAE;QACjBC,QAAQ,GAAGhD,6BAA6B,CAAClT,OAAO,CAAC,CAACnC,GAAG,CAAC;MAC1D;MACA,OAAO,IAAI,CAACsV,MAAM,CAAC,WAAW,EAAE,UAAUhC,KAAK,EAAE;QAAE,OAAOnH,KAAK,CAAC8J,IAAI,CAACqC,MAAM,CAAC;UAAEhF,KAAK,EAAEA,KAAK;UAAE/jE,IAAI,EAAE,KAAK;UAAE4U,MAAM,EAAE,CAACk0D,QAAQ,CAAC;UAAElwC,IAAI,EAAE1+B,GAAG,IAAI,IAAI,GAAG,CAACA,GAAG,CAAC,GAAG;QAAK,CAAC,CAAC;MAAE,CAAC,CAAC,CAC/J8yC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;QAAE,OAAOA,GAAG,CAACsmE,WAAW,GAAGtN,YAAY,CAACp/B,MAAM,CAAC55B,GAAG,CAAC8zD,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG9zD,GAAG,CAAC4tC,UAAU;MAAE,CAAC,CAAC,CACxGtD,IAAI,CAAC,UAAUsD,UAAU,EAAE;QAC5B,IAAIsiB,OAAO,EAAE;UACT,IAAI;YACAI,YAAY,CAACvC,GAAG,EAAEmC,OAAO,EAAEtiB,UAAU,CAAC;UAC1C,CAAC,CACD,OAAO0yB,CAAC,EAAE,CAAE;QAChB;QACA,OAAO1yB,UAAU;MACrB,CAAC,CAAC;IACN,CAAC;IACDtO,KAAK,CAACknB,SAAS,CAACvsB,MAAM,GAAG,UAAUziC,GAAG,EAAE;MACpC,IAAI0iE,KAAK,GAAG,IAAI;MAChB,OAAO,IAAI,CAACmJ,MAAM,CAAC,WAAW,EAAE,UAAUhC,KAAK,EAAE;QAAE,OAAOnH,KAAK,CAAC8J,IAAI,CAACqC,MAAM,CAAC;UAAEhF,KAAK,EAAEA,KAAK;UAAE/jE,IAAI,EAAE,QAAQ;UAAE44B,IAAI,EAAE,CAAC1+B,GAAG;QAAE,CAAC,CAAC;MAAE,CAAC,CAAC,CACzH8yC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;QAAE,OAAOA,GAAG,CAACsmE,WAAW,GAAGtN,YAAY,CAACp/B,MAAM,CAAC55B,GAAG,CAAC8zD,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAGhgE,SAAS;MAAE,CAAC,CAAC;IAC5G,CAAC;IACDwrC,KAAK,CAACknB,SAAS,CAACtoB,KAAK,GAAG,YAAY;MAChC,IAAIg8B,KAAK,GAAG,IAAI;MAChB,OAAO,IAAI,CAACmJ,MAAM,CAAC,WAAW,EAAE,UAAUhC,KAAK,EAAE;QAAE,OAAOnH,KAAK,CAAC8J,IAAI,CAACqC,MAAM,CAAC;UAAEhF,KAAK,EAAEA,KAAK;UAAE/jE,IAAI,EAAE,aAAa;UAAEoqB,KAAK,EAAEq7C;QAAS,CAAC,CAAC;MAAE,CAAC,CAAC,CAClIz4B,IAAI,CAAC,UAAUtqC,GAAG,EAAE;QAAE,OAAOA,GAAG,CAACsmE,WAAW,GAAGtN,YAAY,CAACp/B,MAAM,CAAC55B,GAAG,CAAC8zD,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAGhgE,SAAS;MAAE,CAAC,CAAC;IAC5G,CAAC;IACDwrC,KAAK,CAACknB,SAAS,CAACkgB,OAAO,GAAG,UAAUxwC,IAAI,EAAE;MACtC,IAAIgkC,KAAK,GAAG,IAAI;MAChB,OAAO,IAAI,CAACmJ,MAAM,CAAC,UAAU,EAAE,UAAUhC,KAAK,EAAE;QAC5C,OAAOnH,KAAK,CAAC8J,IAAI,CAAC5uB,OAAO,CAAC;UACtBlf,IAAI,EAAEA,IAAI;UACVmrC,KAAK,EAAEA;QACX,CAAC,CAAC,CAAC/2B,IAAI,CAAC,UAAUz1C,MAAM,EAAE;UAAE,OAAOA,MAAM,CAACyD,GAAG,CAAC,UAAU0H,GAAG,EAAE;YAAE,OAAOk6D,KAAK,CAACh5B,IAAI,CAAC+iC,OAAO,CAACC,IAAI,CAAClkE,GAAG,CAAC;UAAE,CAAC,CAAC;QAAE,CAAC,CAAC;MAC9G,CAAC,CAAC;IACN,CAAC;IACDs/B,KAAK,CAACknB,SAAS,CAACmgB,OAAO,GAAG,UAAUC,OAAO,EAAEC,aAAa,EAAE5/D,OAAO,EAAE;MACjE,IAAIizD,KAAK,GAAG,IAAI;MAChB,IAAIhkC,IAAI,GAAGn+B,KAAK,CAAC2uD,OAAO,CAACmgB,aAAa,CAAC,GAAGA,aAAa,GAAG/yE,SAAS;MACnEmT,OAAO,GAAGA,OAAO,KAAKivB,IAAI,GAAGpiC,SAAS,GAAG+yE,aAAa,CAAC;MACvD,IAAIC,WAAW,GAAG7/D,OAAO,GAAGA,OAAO,CAAC8/D,OAAO,GAAGjzE,SAAS;MACvD,OAAO,IAAI,CAACuvE,MAAM,CAAC,WAAW,EAAE,UAAUhC,KAAK,EAAE;QAC7C,IAAI2D,EAAE,GAAG9K,KAAK,CAACwJ,MAAM,CAACc,OAAO;UAAE2B,IAAI,GAAGnB,EAAE,CAACmB,IAAI;UAAEjW,OAAO,GAAG8U,EAAE,CAAC9U,OAAO;QACnE,IAAIA,OAAO,IAAIh6B,IAAI,EACf,MAAM,IAAIq+B,UAAU,CAACiS,eAAe,CAAC,8DAA8D,CAAC;QACxG,IAAItwC,IAAI,IAAIA,IAAI,CAACjgC,MAAM,KAAK2wE,OAAO,CAAC3wE,MAAM,EACtC,MAAM,IAAIs+D,UAAU,CAACiS,eAAe,CAAC,sDAAsD,CAAC;QAChG,IAAIQ,UAAU,GAAGJ,OAAO,CAAC3wE,MAAM;QAC/B,IAAIgxE,YAAY,GAAG/W,OAAO,IAAIiW,IAAI,GAC9BS,OAAO,CAACtuE,GAAG,CAAC8qE,6BAA6B,CAAClT,OAAO,CAAC,CAAC,GACnD0W,OAAO;QACX,OAAO1M,KAAK,CAAC8J,IAAI,CAACqC,MAAM,CAAC;UAAEhF,KAAK,EAAEA,KAAK;UAAE/jE,IAAI,EAAE,KAAK;UAAE44B,IAAI,EAAEA,IAAI;UAAEhkB,MAAM,EAAE+0D,YAAY;UAAEH,WAAW,EAAEA;QAAY,CAAC,CAAC,CAC9Gx8B,IAAI,CAAC,UAAU06B,EAAE,EAAE;UACpB,IAAIsB,WAAW,GAAGtB,EAAE,CAACsB,WAAW;YAAE9rD,OAAO,GAAGwqD,EAAE,CAACxqD,OAAO;YAAEozB,UAAU,GAAGo3B,EAAE,CAACp3B,UAAU;YAAEkmB,QAAQ,GAAGkR,EAAE,CAAClR,QAAQ;UAC1G,IAAIj/D,MAAM,GAAGiyE,WAAW,GAAGtsD,OAAO,GAAGozB,UAAU;UAC/C,IAAI04B,WAAW,KAAK,CAAC,EACjB,OAAOzxE,MAAM;UACjB,MAAM,IAAIq/D,SAAS,CAACgG,KAAK,CAAC7lE,IAAI,GAAG,cAAc,GAAGiyE,WAAW,GAAG,MAAM,GAAGU,UAAU,GAAG,oBAAoB,EAAElT,QAAQ,CAAC;QACzH,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACDx0B,KAAK,CAACknB,SAAS,CAACjf,OAAO,GAAG,UAAUq/B,OAAO,EAAEC,aAAa,EAAE5/D,OAAO,EAAE;MACjE,IAAIizD,KAAK,GAAG,IAAI;MAChB,IAAIhkC,IAAI,GAAGn+B,KAAK,CAAC2uD,OAAO,CAACmgB,aAAa,CAAC,GAAGA,aAAa,GAAG/yE,SAAS;MACnEmT,OAAO,GAAGA,OAAO,KAAKivB,IAAI,GAAGpiC,SAAS,GAAG+yE,aAAa,CAAC;MACvD,IAAIC,WAAW,GAAG7/D,OAAO,GAAGA,OAAO,CAAC8/D,OAAO,GAAGjzE,SAAS;MACvD,OAAO,IAAI,CAACuvE,MAAM,CAAC,WAAW,EAAE,UAAUhC,KAAK,EAAE;QAC7C,IAAI2D,EAAE,GAAG9K,KAAK,CAACwJ,MAAM,CAACc,OAAO;UAAE2B,IAAI,GAAGnB,EAAE,CAACmB,IAAI;UAAEjW,OAAO,GAAG8U,EAAE,CAAC9U,OAAO;QACnE,IAAIA,OAAO,IAAIh6B,IAAI,EACf,MAAM,IAAIq+B,UAAU,CAACiS,eAAe,CAAC,8DAA8D,CAAC;QACxG,IAAItwC,IAAI,IAAIA,IAAI,CAACjgC,MAAM,KAAK2wE,OAAO,CAAC3wE,MAAM,EACtC,MAAM,IAAIs+D,UAAU,CAACiS,eAAe,CAAC,sDAAsD,CAAC;QAChG,IAAIQ,UAAU,GAAGJ,OAAO,CAAC3wE,MAAM;QAC/B,IAAIixE,YAAY,GAAGhX,OAAO,IAAIiW,IAAI,GAC9BS,OAAO,CAACtuE,GAAG,CAAC8qE,6BAA6B,CAAClT,OAAO,CAAC,CAAC,GACnD0W,OAAO;QACX,OAAO1M,KAAK,CAAC8J,IAAI,CAACqC,MAAM,CAAC;UAAEhF,KAAK,EAAEA,KAAK;UAAE/jE,IAAI,EAAE,KAAK;UAAE44B,IAAI,EAAEA,IAAI;UAAEhkB,MAAM,EAAEg1D,YAAY;UAAEJ,WAAW,EAAEA;QAAY,CAAC,CAAC,CAC9Gx8B,IAAI,CAAC,UAAU06B,EAAE,EAAE;UACpB,IAAIsB,WAAW,GAAGtB,EAAE,CAACsB,WAAW;YAAE9rD,OAAO,GAAGwqD,EAAE,CAACxqD,OAAO;YAAEozB,UAAU,GAAGo3B,EAAE,CAACp3B,UAAU;YAAEkmB,QAAQ,GAAGkR,EAAE,CAAClR,QAAQ;UAC1G,IAAIj/D,MAAM,GAAGiyE,WAAW,GAAGtsD,OAAO,GAAGozB,UAAU;UAC/C,IAAI04B,WAAW,KAAK,CAAC,EACjB,OAAOzxE,MAAM;UACjB,MAAM,IAAIq/D,SAAS,CAACgG,KAAK,CAAC7lE,IAAI,GAAG,cAAc,GAAGiyE,WAAW,GAAG,MAAM,GAAGU,UAAU,GAAG,oBAAoB,EAAElT,QAAQ,CAAC;QACzH,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACDx0B,KAAK,CAACknB,SAAS,CAAC2gB,UAAU,GAAG,UAAUjxC,IAAI,EAAE;MACzC,IAAIgkC,KAAK,GAAG,IAAI;MAChB,IAAIkN,OAAO,GAAGlxC,IAAI,CAACjgC,MAAM;MACzB,OAAO,IAAI,CAACotE,MAAM,CAAC,WAAW,EAAE,UAAUhC,KAAK,EAAE;QAC7C,OAAOnH,KAAK,CAAC8J,IAAI,CAACqC,MAAM,CAAC;UAAEhF,KAAK,EAAEA,KAAK;UAAE/jE,IAAI,EAAE,QAAQ;UAAE44B,IAAI,EAAEA;QAAK,CAAC,CAAC;MAC1E,CAAC,CAAC,CAACoU,IAAI,CAAC,UAAU06B,EAAE,EAAE;QAClB,IAAIsB,WAAW,GAAGtB,EAAE,CAACsB,WAAW;UAAE14B,UAAU,GAAGo3B,EAAE,CAACp3B,UAAU;UAAEkmB,QAAQ,GAAGkR,EAAE,CAAClR,QAAQ;QACpF,IAAIwS,WAAW,KAAK,CAAC,EACjB,OAAO14B,UAAU;QACrB,MAAM,IAAIsmB,SAAS,CAACgG,KAAK,CAAC7lE,IAAI,GAAG,iBAAiB,GAAGiyE,WAAW,GAAG,MAAM,GAAGc,OAAO,GAAG,oBAAoB,EAAEtT,QAAQ,CAAC;MACzH,CAAC,CAAC;IACN,CAAC;IACD,OAAOx0B,KAAK;EAChB,CAAC,CAAC,CAAE;EAEJ,SAAS+nC,MAAMA,CAACC,GAAG,EAAE;IACjB,IAAIC,GAAG,GAAG,CAAC,CAAC;IACZ,IAAIpX,EAAE,GAAG,SAAAA,CAAUqX,SAAS,EAAEC,UAAU,EAAE;MACtC,IAAIA,UAAU,EAAE;QACZ,IAAIxnD,CAAC,GAAGrgB,SAAS,CAAC3J,MAAM;UAAE+pC,IAAI,GAAG,IAAIjoC,KAAK,CAACkoB,CAAC,GAAG,CAAC,CAAC;QACjD,OAAO,EAAEA,CAAC,EACN+f,IAAI,CAAC/f,CAAC,GAAG,CAAC,CAAC,GAAGrgB,SAAS,CAACqgB,CAAC,CAAC;QAC9BsnD,GAAG,CAACC,SAAS,CAAC,CAACE,SAAS,CAACna,KAAK,CAAC,IAAI,EAAEvtB,IAAI,CAAC;QAC1C,OAAOsnC,GAAG;MACd,CAAC,MACI,IAAI,OAAQE,SAAU,KAAK,QAAQ,EAAE;QACtC,OAAOD,GAAG,CAACC,SAAS,CAAC;MACzB;IACJ,CAAC;IACDrX,EAAE,CAACwX,YAAY,GAAGhuD,GAAG;IACrB,KAAK,IAAIsG,CAAC,GAAG,CAAC,EAAEytC,CAAC,GAAG9tD,SAAS,CAAC3J,MAAM,EAAEgqB,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;MAC9CtG,GAAG,CAAC/Z,SAAS,CAACqgB,CAAC,CAAC,CAAC;IACrB;IACA,OAAOkwC,EAAE;IACT,SAASx2C,GAAGA,CAAC6tD,SAAS,EAAEI,aAAa,EAAEC,eAAe,EAAE;MACpD,IAAI,OAAOL,SAAS,KAAK,QAAQ,EAC7B,OAAOM,mBAAmB,CAACN,SAAS,CAAC;MACzC,IAAI,CAACI,aAAa,EACdA,aAAa,GAAGzR,0BAA0B;MAC9C,IAAI,CAAC0R,eAAe,EAChBA,eAAe,GAAGxS,GAAG;MACzB,IAAI0S,OAAO,GAAG;QACVC,WAAW,EAAE,EAAE;QACf9D,IAAI,EAAE2D,eAAe;QACrBH,SAAS,EAAE,SAAAA,CAAU5K,EAAE,EAAE;UACrB,IAAIiL,OAAO,CAACC,WAAW,CAAC5X,OAAO,CAAC0M,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;YACxCiL,OAAO,CAACC,WAAW,CAAChhE,IAAI,CAAC81D,EAAE,CAAC;YAC5BiL,OAAO,CAAC7D,IAAI,GAAG0D,aAAa,CAACG,OAAO,CAAC7D,IAAI,EAAEpH,EAAE,CAAC;UAClD;QACJ,CAAC;QACDkJ,WAAW,EAAE,SAAAA,CAAUlJ,EAAE,EAAE;UACvBiL,OAAO,CAACC,WAAW,GAAGD,OAAO,CAACC,WAAW,CAACr3D,MAAM,CAAC,UAAUowB,EAAE,EAAE;YAAE,OAAOA,EAAE,KAAK+7B,EAAE;UAAE,CAAC,CAAC;UACrFiL,OAAO,CAAC7D,IAAI,GAAG6D,OAAO,CAACC,WAAW,CAACxnD,MAAM,CAAConD,aAAa,EAAEC,eAAe,CAAC;QAC7E;MACJ,CAAC;MACDN,GAAG,CAACC,SAAS,CAAC,GAAGrX,EAAE,CAACqX,SAAS,CAAC,GAAGO,OAAO;MACxC,OAAOA,OAAO;IAClB;IACA,SAASD,mBAAmBA,CAACG,GAAG,EAAE;MAC9B/xC,IAAI,CAAC+xC,GAAG,CAAC,CAACvsD,OAAO,CAAC,UAAU8rD,SAAS,EAAE;QACnC,IAAIxnC,IAAI,GAAGioC,GAAG,CAACT,SAAS,CAAC;QACzB,IAAI9gB,OAAO,CAAC1mB,IAAI,CAAC,EAAE;UACfrmB,GAAG,CAAC6tD,SAAS,EAAES,GAAG,CAACT,SAAS,CAAC,CAAC,CAAC,CAAC,EAAES,GAAG,CAACT,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QACxD,CAAC,MACI,IAAIxnC,IAAI,KAAK,MAAM,EAAE;UACtB,IAAI+nC,OAAO,GAAGpuD,GAAG,CAAC6tD,SAAS,EAAElS,MAAM,EAAE,SAAS4O,IAAIA,CAAA,EAAG;YACjD,IAAIjkD,CAAC,GAAGrgB,SAAS,CAAC3J,MAAM;cAAE+pC,IAAI,GAAG,IAAIjoC,KAAK,CAACkoB,CAAC,CAAC;YAC7C,OAAOA,CAAC,EAAE,EACN+f,IAAI,CAAC/f,CAAC,CAAC,GAAGrgB,SAAS,CAACqgB,CAAC,CAAC;YAC1B8nD,OAAO,CAACC,WAAW,CAACtsD,OAAO,CAAC,UAAUqlB,EAAE,EAAE;cACtCyuB,MAAM,CAAC,SAAS0Y,SAASA,CAAA,EAAG;gBACxBnnC,EAAE,CAACwsB,KAAK,CAAC,IAAI,EAAEvtB,IAAI,CAAC;cACxB,CAAC,CAAC;YACN,CAAC,CAAC;UACN,CAAC,CAAC;QACN,CAAC,MAEG,MAAM,IAAIu0B,UAAU,CAACiS,eAAe,CAAC,sBAAsB,CAAC;MACpE,CAAC,CAAC;IACN;EACJ;EAEA,SAAS2B,oBAAoBA,CAAC3hB,SAAS,EAAElnD,WAAW,EAAE;IAClDwvD,MAAM,CAACxvD,WAAW,CAAC,CAACtH,IAAI,CAAC;MAAEwuD,SAAS,EAAEA;IAAU,CAAC,CAAC;IAClD,OAAOlnD,WAAW;EACtB;EAEA,SAAS8oE,sBAAsBA,CAAC1H,EAAE,EAAE;IAChC,OAAOyH,oBAAoB,CAAC7oC,KAAK,CAACknB,SAAS,EAAE,SAASlnB,KAAKA,CAACjrC,IAAI,EAAEg0E,WAAW,EAAEhH,KAAK,EAAE;MAClF,IAAI,CAACX,EAAE,GAAGA,EAAE;MACZ,IAAI,CAAC6C,GAAG,GAAGlC,KAAK;MAChB,IAAI,CAAChtE,IAAI,GAAGA,IAAI;MAChB,IAAI,CAACqvE,MAAM,GAAG2E,WAAW;MACzB,IAAI,CAACnnC,IAAI,GAAGw/B,EAAE,CAAC4H,UAAU,CAACj0E,IAAI,CAAC,GAAGqsE,EAAE,CAAC4H,UAAU,CAACj0E,IAAI,CAAC,CAAC6sC,IAAI,GAAGmmC,MAAM,CAAC,IAAI,EAAE;QACtE,UAAU,EAAE,CAACxR,iBAAiB,EAAER,GAAG,CAAC;QACpC,SAAS,EAAE,CAACE,iBAAiB,EAAED,MAAM,CAAC;QACtC,UAAU,EAAE,CAACW,iBAAiB,EAAEZ,GAAG,CAAC;QACpC,UAAU,EAAE,CAACW,iBAAiB,EAAEX,GAAG;MACvC,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEA,SAASkT,eAAeA,CAACjB,GAAG,EAAEkB,iBAAiB,EAAE;IAC7C,OAAO,EAAElB,GAAG,CAAC32D,MAAM,IAAI22D,GAAG,CAACmB,SAAS,IAAInB,GAAG,CAACoB,EAAE,CAAC,KAC1CF,iBAAiB,GAAGlB,GAAG,CAACqB,SAAS,GAAG,CAACrB,GAAG,CAACsB,YAAY,CAAC;EAC/D;EACA,SAASC,SAASA,CAACvB,GAAG,EAAEvmC,EAAE,EAAE;IACxBumC,GAAG,CAAC32D,MAAM,GAAGiyD,OAAO,CAAC0E,GAAG,CAAC32D,MAAM,EAAEowB,EAAE,CAAC;EACxC;EACA,SAAS+nC,eAAeA,CAACxB,GAAG,EAAEpa,OAAO,EAAE6b,aAAa,EAAE;IAClD,IAAIC,IAAI,GAAG1B,GAAG,CAACsB,YAAY;IAC3BtB,GAAG,CAACsB,YAAY,GAAGI,IAAI,GAAG,YAAY;MAAE,OAAOpG,OAAO,CAACoG,IAAI,CAAC,CAAC,EAAE9b,OAAO,CAAC,CAAC,CAAC;IAAE,CAAC,GAAGA,OAAO;IACtFoa,GAAG,CAACqB,SAAS,GAAGI,aAAa,IAAI,CAACC,IAAI;EAC1C;EACA,SAASC,cAAcA,CAAC3B,GAAG,EAAEvmC,EAAE,EAAE;IAC7BumC,GAAG,CAAC4B,OAAO,GAAGtG,OAAO,CAAC0E,GAAG,CAAC4B,OAAO,EAAEnoC,EAAE,CAAC;EAC1C;EACA,SAASooC,eAAeA,CAAC7B,GAAG,EAAE8B,UAAU,EAAE;IACtC,IAAI9B,GAAG,CAAC+B,SAAS,EACb,OAAOD,UAAU,CAACE,UAAU;IAChC,IAAI3hE,KAAK,GAAGyhE,UAAU,CAACG,iBAAiB,CAACjC,GAAG,CAAC3/D,KAAK,CAAC;IACnD,IAAI,CAACA,KAAK,EACN,MAAM,IAAI4sD,UAAU,CAACiV,MAAM,CAAC,UAAU,GAAGlC,GAAG,CAAC3/D,KAAK,GAAG,mBAAmB,GAAGyhE,UAAU,CAAC/0E,IAAI,GAAG,iBAAiB,CAAC;IACnH,OAAOsT,KAAK;EAChB;EACA,SAAS8hE,UAAUA,CAACnC,GAAG,EAAEoC,SAAS,EAAErI,KAAK,EAAE;IACvC,IAAI15D,KAAK,GAAGwhE,eAAe,CAAC7B,GAAG,EAAEoC,SAAS,CAAChG,MAAM,CAAC;IAClD,OAAOgG,SAAS,CAACD,UAAU,CAAC;MACxBpI,KAAK,EAAEA,KAAK;MACZnvD,MAAM,EAAE,CAACo1D,GAAG,CAACqC,QAAQ;MACrB1jE,OAAO,EAAEqhE,GAAG,CAACsC,GAAG,KAAK,MAAM;MAC3BC,MAAM,EAAE,CAAC,CAACvC,GAAG,CAACuC,MAAM;MACpBC,KAAK,EAAE;QACHniE,KAAK,EAAEA,KAAK;QACZ+f,KAAK,EAAE4/C,GAAG,CAAC5/C;MACf;IACJ,CAAC,CAAC;EACN;EACA,SAASqiD,IAAIA,CAACzC,GAAG,EAAEvmC,EAAE,EAAEipC,SAAS,EAAEN,SAAS,EAAE;IACzC,IAAI/4D,MAAM,GAAG22D,GAAG,CAACsB,YAAY,GAAGhG,OAAO,CAAC0E,GAAG,CAAC32D,MAAM,EAAE22D,GAAG,CAACsB,YAAY,CAAC,CAAC,CAAC,GAAGtB,GAAG,CAAC32D,MAAM;IACpF,IAAI,CAAC22D,GAAG,CAACoB,EAAE,EAAE;MACT,OAAOuB,OAAO,CAACR,UAAU,CAACnC,GAAG,EAAEoC,SAAS,EAAEM,SAAS,CAAC,EAAEpH,OAAO,CAAC0E,GAAG,CAACmB,SAAS,EAAE93D,MAAM,CAAC,EAAEowB,EAAE,EAAE,CAACumC,GAAG,CAACqC,QAAQ,IAAIrC,GAAG,CAAC4C,WAAW,CAAC;IAC/H,CAAC,MACI;MACD,IAAIC,KAAK,GAAG,CAAC,CAAC;MACd,IAAIC,KAAK,GAAG,SAAAA,CAAU35B,IAAI,EAAE45B,MAAM,EAAEC,OAAO,EAAE;QACzC,IAAI,CAAC35D,MAAM,IAAIA,MAAM,CAAC05D,MAAM,EAAEC,OAAO,EAAE,UAAUz1E,MAAM,EAAE;UAAE,OAAOw1E,MAAM,CAACE,IAAI,CAAC11E,MAAM,CAAC;QAAE,CAAC,EAAE,UAAUE,GAAG,EAAE;UAAE,OAAOs1E,MAAM,CAACG,IAAI,CAACz1E,GAAG,CAAC;QAAE,CAAC,CAAC,EAAE;UACpI,IAAIu0E,UAAU,GAAGe,MAAM,CAACf,UAAU;UAClC,IAAI9xE,GAAG,GAAG,EAAE,GAAG8xE,UAAU;UACzB,IAAI9xE,GAAG,KAAK,sBAAsB,EAC9BA,GAAG,GAAG,EAAE,GAAG,IAAIN,UAAU,CAACoyE,UAAU,CAAC;UACzC,IAAI,CAAClb,MAAM,CAAC+b,KAAK,EAAE3yE,GAAG,CAAC,EAAE;YACrB2yE,KAAK,CAAC3yE,GAAG,CAAC,GAAG,IAAI;YACjBupC,EAAE,CAAC0P,IAAI,EAAE45B,MAAM,EAAEC,OAAO,CAAC;UAC7B;QACJ;MACJ,CAAC;MACD,OAAO7vE,OAAO,CAACC,GAAG,CAAC,CACf4sE,GAAG,CAACoB,EAAE,CAAC+B,QAAQ,CAACL,KAAK,EAAEJ,SAAS,CAAC,EACjCC,OAAO,CAACR,UAAU,CAACnC,GAAG,EAAEoC,SAAS,EAAEM,SAAS,CAAC,EAAE1C,GAAG,CAACmB,SAAS,EAAE2B,KAAK,EAAE,CAAC9C,GAAG,CAACqC,QAAQ,IAAIrC,GAAG,CAAC4C,WAAW,CAAC,CACzG,CAAC;IACN;EACJ;EACA,SAASD,OAAOA,CAACS,aAAa,EAAE/5D,MAAM,EAAEowB,EAAE,EAAEmpC,WAAW,EAAE;IACrD,IAAIS,QAAQ,GAAGT,WAAW,GAAG,UAAUl8C,CAAC,EAAEtK,CAAC,EAAEsB,CAAC,EAAE;MAAE,OAAO+b,EAAE,CAACmpC,WAAW,CAACl8C,CAAC,CAAC,EAAEtK,CAAC,EAAEsB,CAAC,CAAC;IAAE,CAAC,GAAG+b,EAAE;IACzF,IAAI6pC,SAAS,GAAGnN,IAAI,CAACkN,QAAQ,CAAC;IAC9B,OAAOD,aAAa,CAACpgC,IAAI,CAAC,UAAU+/B,MAAM,EAAE;MACxC,IAAIA,MAAM,EAAE;QACR,OAAOA,MAAM,CAACj7B,KAAK,CAAC,YAAY;UAC5B,IAAI1rB,CAAC,GAAG,SAAAA,CAAA,EAAY;YAAE,OAAO2mD,MAAM,CAACQ,QAAQ,CAAC,CAAC;UAAE,CAAC;UACjD,IAAI,CAACl6D,MAAM,IAAIA,MAAM,CAAC05D,MAAM,EAAE,UAAUS,QAAQ,EAAE;YAAE,OAAOpnD,CAAC,GAAGonD,QAAQ;UAAE,CAAC,EAAE,UAAUzgD,GAAG,EAAE;YAAEggD,MAAM,CAACE,IAAI,CAAClgD,GAAG,CAAC;YAAE3G,CAAC,GAAG2xC,GAAG;UAAE,CAAC,EAAE,UAAUvc,CAAC,EAAE;YAAEuxB,MAAM,CAACG,IAAI,CAAC1xB,CAAC,CAAC;YAAEp1B,CAAC,GAAG2xC,GAAG;UAAE,CAAC,CAAC,EACjKuV,SAAS,CAACP,MAAM,CAAC7pE,KAAK,EAAE6pE,MAAM,EAAE,UAAUS,QAAQ,EAAE;YAAE,OAAOpnD,CAAC,GAAGonD,QAAQ;UAAE,CAAC,CAAC;UACjFpnD,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;MACN;IACJ,CAAC,CAAC;EACN;EAEA,SAASqhD,GAAGA,CAAC//C,CAAC,EAAEzsB,CAAC,EAAE;IACf,IAAI;MACA,IAAIwyE,EAAE,GAAGztE,IAAI,CAAC0nB,CAAC,CAAC;MAChB,IAAIgmD,EAAE,GAAG1tE,IAAI,CAAC/E,CAAC,CAAC;MAChB,IAAIwyE,EAAE,KAAKC,EAAE,EAAE;QACX,IAAID,EAAE,KAAK,OAAO,EACd,OAAO,CAAC;QACZ,IAAIC,EAAE,KAAK,OAAO,EACd,OAAO,CAAC,CAAC;QACb,IAAID,EAAE,KAAK,QAAQ,EACf,OAAO,CAAC;QACZ,IAAIC,EAAE,KAAK,QAAQ,EACf,OAAO,CAAC,CAAC;QACb,IAAID,EAAE,KAAK,QAAQ,EACf,OAAO,CAAC;QACZ,IAAIC,EAAE,KAAK,QAAQ,EACf,OAAO,CAAC,CAAC;QACb,IAAID,EAAE,KAAK,MAAM,EACb,OAAO,CAAC;QACZ,IAAIC,EAAE,KAAK,MAAM,EACb,OAAOC,GAAG;QACd,OAAO,CAAC,CAAC;MACb;MACA,QAAQF,EAAE;QACN,KAAK,QAAQ;QACb,KAAK,MAAM;QACX,KAAK,QAAQ;UACT,OAAO/lD,CAAC,GAAGzsB,CAAC,GAAG,CAAC,GAAGysB,CAAC,GAAGzsB,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;QACrC,KAAK,QAAQ;UAAE;YACX,OAAO2yE,kBAAkB,CAACC,aAAa,CAACnmD,CAAC,CAAC,EAAEmmD,aAAa,CAAC5yE,CAAC,CAAC,CAAC;UACjE;QACA,KAAK,OAAO;UACR,OAAO6yE,aAAa,CAACpmD,CAAC,EAAEzsB,CAAC,CAAC;MAClC;IACJ,CAAC,CACD,OAAOysE,EAAE,EAAE,CAAE;IACb,OAAOiG,GAAG;EACd;EACA,SAASG,aAAaA,CAACpmD,CAAC,EAAEzsB,CAAC,EAAE;IACzB,IAAI8yE,EAAE,GAAGrmD,CAAC,CAAC/uB,MAAM;IACjB,IAAIq1E,EAAE,GAAG/yE,CAAC,CAACtC,MAAM;IACjB,IAAIy3D,CAAC,GAAG2d,EAAE,GAAGC,EAAE,GAAGD,EAAE,GAAGC,EAAE;IACzB,KAAK,IAAIrrD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;MACxB,IAAIjgB,GAAG,GAAG+kE,GAAG,CAAC//C,CAAC,CAAC/E,CAAC,CAAC,EAAE1nB,CAAC,CAAC0nB,CAAC,CAAC,CAAC;MACzB,IAAIjgB,GAAG,KAAK,CAAC,EACT,OAAOA,GAAG;IAClB;IACA,OAAOqrE,EAAE,KAAKC,EAAE,GAAG,CAAC,GAAGD,EAAE,GAAGC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC;EAC3C;EACA,SAASJ,kBAAkBA,CAAClmD,CAAC,EAAEzsB,CAAC,EAAE;IAC9B,IAAI8yE,EAAE,GAAGrmD,CAAC,CAAC/uB,MAAM;IACjB,IAAIq1E,EAAE,GAAG/yE,CAAC,CAACtC,MAAM;IACjB,IAAIy3D,CAAC,GAAG2d,EAAE,GAAGC,EAAE,GAAGD,EAAE,GAAGC,EAAE;IACzB,KAAK,IAAIrrD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;MACxB,IAAI+E,CAAC,CAAC/E,CAAC,CAAC,KAAK1nB,CAAC,CAAC0nB,CAAC,CAAC,EACb,OAAO+E,CAAC,CAAC/E,CAAC,CAAC,GAAG1nB,CAAC,CAAC0nB,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;IACnC;IACA,OAAOorD,EAAE,KAAKC,EAAE,GAAG,CAAC,GAAGD,EAAE,GAAGC,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC;EAC3C;EACA,SAAShuE,IAAIA,CAAC0wB,CAAC,EAAE;IACb,IAAIo7B,CAAC,GAAG,OAAOp7B,CAAC;IAChB,IAAIo7B,CAAC,KAAK,QAAQ,EACd,OAAOA,CAAC;IACZ,IAAImiB,WAAW,CAACC,MAAM,CAACx9C,CAAC,CAAC,EACrB,OAAO,QAAQ;IACnB,IAAIy9C,KAAK,GAAGha,WAAW,CAACzjC,CAAC,CAAC;IAC1B,OAAOy9C,KAAK,KAAK,aAAa,GAAG,QAAQ,GAAGA,KAAK;EACrD;EACA,SAASN,aAAaA,CAACnmD,CAAC,EAAE;IACtB,IAAIA,CAAC,YAAY9tB,UAAU,EACvB,OAAO8tB,CAAC;IACZ,IAAIumD,WAAW,CAACC,MAAM,CAACxmD,CAAC,CAAC,EACrB,OAAO,IAAI9tB,UAAU,CAAC8tB,CAAC,CAACnH,MAAM,EAAEmH,CAAC,CAAC0mD,UAAU,EAAE1mD,CAAC,CAACu2B,UAAU,CAAC;IAC/D,OAAO,IAAIrkD,UAAU,CAAC8tB,CAAC,CAAC;EAC5B;EAEA,IAAI2gD,UAAU,GAAK,YAAY;IAC3B,SAASA,UAAUA,CAAA,EAAG,CACtB;IACAA,UAAU,CAACnf,SAAS,CAACmlB,KAAK,GAAG,UAAU5qC,EAAE,EAAE+7B,EAAE,EAAE;MAC3C,IAAIwK,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnB,OAAOtE,GAAG,CAACjtE,KAAK,GACZitE,GAAG,CAACuE,KAAK,CAACxI,MAAM,CAAC,IAAI,EAAEvE,SAAS,CAAC3pB,IAAI,CAAC,IAAI,EAAEmyB,GAAG,CAACjtE,KAAK,CAAC,CAAC,GACvDitE,GAAG,CAACuE,KAAK,CAACxI,MAAM,CAAC,UAAU,EAAEtiC,EAAE,CAAC,CAACuJ,IAAI,CAACwyB,EAAE,CAAC;IACjD,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACslB,MAAM,GAAG,UAAU/qC,EAAE,EAAE;MACxC,IAAIumC,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnB,OAAOtE,GAAG,CAACjtE,KAAK,GACZitE,GAAG,CAACuE,KAAK,CAACxI,MAAM,CAAC,IAAI,EAAEvE,SAAS,CAAC3pB,IAAI,CAAC,IAAI,EAAEmyB,GAAG,CAACjtE,KAAK,CAAC,CAAC,GACvDitE,GAAG,CAACuE,KAAK,CAACxI,MAAM,CAAC,WAAW,EAAEtiC,EAAE,EAAE,QAAQ,CAAC;IACnD,CAAC;IACD4kC,UAAU,CAACnf,SAAS,CAACulB,aAAa,GAAG,UAAUhrC,EAAE,EAAE;MAC/C,IAAIumC,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnBtE,GAAG,CAACmB,SAAS,GAAG7F,OAAO,CAAC0E,GAAG,CAACmB,SAAS,EAAE1nC,EAAE,CAAC;IAC9C,CAAC;IACD4kC,UAAU,CAACnf,SAAS,CAACikB,QAAQ,GAAG,UAAU1pC,EAAE,EAAEipC,SAAS,EAAE;MACrD,OAAOD,IAAI,CAAC,IAAI,CAAC6B,IAAI,EAAE7qC,EAAE,EAAEipC,SAAS,EAAE,IAAI,CAAC4B,IAAI,CAACC,KAAK,CAAC7H,IAAI,CAAC;IAC/D,CAAC;IACD2B,UAAU,CAACnf,SAAS,CAACwlB,KAAK,GAAG,UAAU1d,KAAK,EAAE;MAC1C,IAAI6B,EAAE,GAAGl+C,MAAM,CAACwe,MAAM,CAAC,IAAI,CAACnxB,WAAW,CAACknD,SAAS,CAAC;QAAE8gB,GAAG,GAAGr1D,MAAM,CAACwe,MAAM,CAAC,IAAI,CAACm7C,IAAI,CAAC;MAClF,IAAItd,KAAK,EACLR,MAAM,CAACwZ,GAAG,EAAEhZ,KAAK,CAAC;MACtB6B,EAAE,CAACyb,IAAI,GAAGtE,GAAG;MACb,OAAOnX,EAAE;IACb,CAAC;IACDwV,UAAU,CAACnf,SAAS,CAAC/pB,GAAG,GAAG,YAAY;MACnC,IAAI,CAACmvC,IAAI,CAAC1B,WAAW,GAAG,IAAI;MAC5B,OAAO,IAAI;IACf,CAAC;IACDvE,UAAU,CAACnf,SAAS,CAACkf,IAAI,GAAG,UAAU3kC,EAAE,EAAE;MACtC,IAAIumC,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnB,OAAO,IAAI,CAACD,KAAK,CAAC,UAAUtK,KAAK,EAAE;QAAE,OAAO0I,IAAI,CAACzC,GAAG,EAAEvmC,EAAE,EAAEsgC,KAAK,EAAEiG,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAAC;MAAE,CAAC,CAAC;IACxF,CAAC;IACD2B,UAAU,CAACnf,SAAS,CAAC+e,KAAK,GAAG,UAAUzI,EAAE,EAAE;MACvC,IAAI5C,KAAK,GAAG,IAAI;MAChB,OAAO,IAAI,CAACyR,KAAK,CAAC,UAAUtK,KAAK,EAAE;QAC/B,IAAIiG,GAAG,GAAGpN,KAAK,CAAC0R,IAAI;QACpB,IAAIlC,SAAS,GAAGpC,GAAG,CAACuE,KAAK,CAAC7H,IAAI;QAC9B,IAAIuE,eAAe,CAACjB,GAAG,EAAE,IAAI,CAAC,EAAE;UAC5B,OAAOoC,SAAS,CAACnE,KAAK,CAAC;YACnBlE,KAAK,EAAEA,KAAK;YACZyI,KAAK,EAAE;cACHniE,KAAK,EAAEwhE,eAAe,CAAC7B,GAAG,EAAEoC,SAAS,CAAChG,MAAM,CAAC;cAC7Ch8C,KAAK,EAAE4/C,GAAG,CAAC5/C;YACf;UACJ,CAAC,CAAC,CAAC4iB,IAAI,CAAC,UAAUi7B,KAAK,EAAE;YAAE,OAAO38D,IAAI,CAACqpB,GAAG,CAACszC,KAAK,EAAE+B,GAAG,CAAC7hE,KAAK,CAAC;UAAE,CAAC,CAAC;QACpE,CAAC,MACI;UACD,IAAI8/D,KAAK,GAAG,CAAC;UACb,OAAOwE,IAAI,CAACzC,GAAG,EAAE,YAAY;YAAE,EAAE/B,KAAK;YAAE,OAAO,KAAK;UAAE,CAAC,EAAElE,KAAK,EAAEqI,SAAS,CAAC,CACrEp/B,IAAI,CAAC,YAAY;YAAE,OAAOi7B,KAAK;UAAE,CAAC,CAAC;QAC5C;MACJ,CAAC,CAAC,CAACj7B,IAAI,CAACwyB,EAAE,CAAC;IACf,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACylB,MAAM,GAAG,UAAU/b,OAAO,EAAE4M,EAAE,EAAE;MACjD,IAAIoP,KAAK,GAAGhc,OAAO,CAACn3D,KAAK,CAAC,GAAG,CAAC,CAACkN,OAAO,CAAC,CAAC;QAAEkmE,QAAQ,GAAGD,KAAK,CAAC,CAAC,CAAC;QAAEE,SAAS,GAAGF,KAAK,CAACj2E,MAAM,GAAG,CAAC;MAC3F,SAASo2E,MAAMA,CAACte,GAAG,EAAE9tC,CAAC,EAAE;QACpB,IAAIA,CAAC,EACD,OAAOosD,MAAM,CAACte,GAAG,CAACme,KAAK,CAACjsD,CAAC,CAAC,CAAC,EAAEA,CAAC,GAAG,CAAC,CAAC;QACvC,OAAO8tC,GAAG,CAACoe,QAAQ,CAAC;MACxB;MACA,IAAIG,KAAK,GAAG,IAAI,CAACV,IAAI,CAAChC,GAAG,KAAK,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;MAC7C,SAAS2C,MAAMA,CAACvnD,CAAC,EAAEzsB,CAAC,EAAE;QAClB,IAAIi0E,IAAI,GAAGH,MAAM,CAACrnD,CAAC,EAAEonD,SAAS,CAAC;UAAEK,IAAI,GAAGJ,MAAM,CAAC9zE,CAAC,EAAE6zE,SAAS,CAAC;QAC5D,OAAOI,IAAI,GAAGC,IAAI,GAAG,CAACH,KAAK,GAAGE,IAAI,GAAGC,IAAI,GAAGH,KAAK,GAAG,CAAC;MACzD;MACA,OAAO,IAAI,CAAC9/D,OAAO,CAAC,UAAUwY,CAAC,EAAE;QAC7B,OAAOA,CAAC,CAAClK,IAAI,CAACyxD,MAAM,CAAC;MACzB,CAAC,CAAC,CAACjiC,IAAI,CAACwyB,EAAE,CAAC;IACf,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACh6C,OAAO,GAAG,UAAUswD,EAAE,EAAE;MACzC,IAAI5C,KAAK,GAAG,IAAI;MAChB,OAAO,IAAI,CAACyR,KAAK,CAAC,UAAUtK,KAAK,EAAE;QAC/B,IAAIiG,GAAG,GAAGpN,KAAK,CAAC0R,IAAI;QACpB,IAAItE,GAAG,CAACsC,GAAG,KAAK,MAAM,IAAIrB,eAAe,CAACjB,GAAG,EAAE,IAAI,CAAC,IAAIA,GAAG,CAAC7hE,KAAK,GAAG,CAAC,EAAE;UACnE,IAAIinE,aAAa,GAAGpF,GAAG,CAAC4C,WAAW;UACnC,IAAIviE,KAAK,GAAGwhE,eAAe,CAAC7B,GAAG,EAAEA,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAACN,MAAM,CAAC;UACvD,OAAO4D,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAAC8F,KAAK,CAAC;YACxBzI,KAAK,EAAEA,KAAK;YACZ57D,KAAK,EAAE6hE,GAAG,CAAC7hE,KAAK;YAChByM,MAAM,EAAE,IAAI;YACZ43D,KAAK,EAAE;cACHniE,KAAK,EAAEA,KAAK;cACZ+f,KAAK,EAAE4/C,GAAG,CAAC5/C;YACf;UACJ,CAAC,CAAC,CAAC4iB,IAAI,CAAC,UAAU06B,EAAE,EAAE;YAClB,IAAInwE,MAAM,GAAGmwE,EAAE,CAACnwE,MAAM;YACtB,OAAO63E,aAAa,GAAG73E,MAAM,CAACyD,GAAG,CAACo0E,aAAa,CAAC,GAAG73E,MAAM;UAC7D,CAAC,CAAC;QACN,CAAC,MACI;UACD,IAAI83E,GAAG,GAAG,EAAE;UACZ,OAAO5C,IAAI,CAACzC,GAAG,EAAE,UAAU72B,IAAI,EAAE;YAAE,OAAOk8B,GAAG,CAAC3lE,IAAI,CAACypC,IAAI,CAAC;UAAE,CAAC,EAAE4wB,KAAK,EAAEiG,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAAC,CAAC15B,IAAI,CAAC,YAAY;YAAE,OAAOqiC,GAAG;UAAE,CAAC,CAAC;QACzH;MACJ,CAAC,EAAE7P,EAAE,CAAC;IACV,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAAChhD,MAAM,GAAG,UAAUA,MAAM,EAAE;MAC5C,IAAI8hE,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnB,IAAIpmE,MAAM,IAAI,CAAC,EACX,OAAO,IAAI;MACf8hE,GAAG,CAAC9hE,MAAM,IAAIA,MAAM;MACpB,IAAI+iE,eAAe,CAACjB,GAAG,CAAC,EAAE;QACtBwB,eAAe,CAACxB,GAAG,EAAE,YAAY;UAC7B,IAAIsF,UAAU,GAAGpnE,MAAM;UACvB,OAAO,UAAU6kE,MAAM,EAAEC,OAAO,EAAE;YAC9B,IAAIsC,UAAU,KAAK,CAAC,EAChB,OAAO,IAAI;YACf,IAAIA,UAAU,KAAK,CAAC,EAAE;cAClB,EAAEA,UAAU;cACZ,OAAO,KAAK;YAChB;YACAtC,OAAO,CAAC,YAAY;cAChBD,MAAM,CAACC,OAAO,CAACsC,UAAU,CAAC;cAC1BA,UAAU,GAAG,CAAC;YAClB,CAAC,CAAC;YACF,OAAO,KAAK;UAChB,CAAC;QACL,CAAC,CAAC;MACN,CAAC,MACI;QACD9D,eAAe,CAACxB,GAAG,EAAE,YAAY;UAC7B,IAAIsF,UAAU,GAAGpnE,MAAM;UACvB,OAAO,YAAY;YAAE,OAAQ,EAAEonE,UAAU,GAAG,CAAC;UAAG,CAAC;QACrD,CAAC,CAAC;MACN;MACA,OAAO,IAAI;IACf,CAAC;IACDjH,UAAU,CAACnf,SAAS,CAAC/gD,KAAK,GAAG,UAAUggE,OAAO,EAAE;MAC5C,IAAI,CAACmG,IAAI,CAACnmE,KAAK,GAAGmD,IAAI,CAACqpB,GAAG,CAAC,IAAI,CAAC25C,IAAI,CAACnmE,KAAK,EAAEggE,OAAO,CAAC;MACpDqD,eAAe,CAAC,IAAI,CAAC8C,IAAI,EAAE,YAAY;QACnC,IAAIiB,QAAQ,GAAGpH,OAAO;QACtB,OAAO,UAAU4E,MAAM,EAAEC,OAAO,EAAEt0C,OAAO,EAAE;UACvC,IAAI,EAAE62C,QAAQ,IAAI,CAAC,EACfvC,OAAO,CAACt0C,OAAO,CAAC;UACpB,OAAO62C,QAAQ,IAAI,CAAC;QACxB,CAAC;MACL,CAAC,EAAE,IAAI,CAAC;MACR,OAAO,IAAI;IACf,CAAC;IACDlH,UAAU,CAACnf,SAAS,CAACsmB,KAAK,GAAG,UAAU1H,cAAc,EAAE2H,iBAAiB,EAAE;MACtElE,SAAS,CAAC,IAAI,CAAC+C,IAAI,EAAE,UAAUvB,MAAM,EAAEC,OAAO,EAAEt0C,OAAO,EAAE;QACrD,IAAIovC,cAAc,CAACiF,MAAM,CAAC7pE,KAAK,CAAC,EAAE;UAC9B8pE,OAAO,CAACt0C,OAAO,CAAC;UAChB,OAAO+2C,iBAAiB;QAC5B,CAAC,MACI;UACD,OAAO,IAAI;QACf;MACJ,CAAC,CAAC;MACF,OAAO,IAAI;IACf,CAAC;IACDpH,UAAU,CAACnf,SAAS,CAACud,KAAK,GAAG,UAAUjH,EAAE,EAAE;MACvC,OAAO,IAAI,CAACr3D,KAAK,CAAC,CAAC,CAAC,CAAC+G,OAAO,CAAC,UAAUwY,CAAC,EAAE;QAAE,OAAOA,CAAC,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC,CAACslB,IAAI,CAACwyB,EAAE,CAAC;IACxE,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACwmB,IAAI,GAAG,UAAUlQ,EAAE,EAAE;MACtC,OAAO,IAAI,CAAC72D,OAAO,CAAC,CAAC,CAAC89D,KAAK,CAACjH,EAAE,CAAC;IACnC,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAAC71C,MAAM,GAAG,UAAUy0D,cAAc,EAAE;MACpDyD,SAAS,CAAC,IAAI,CAAC+C,IAAI,EAAE,UAAUvB,MAAM,EAAE;QACnC,OAAOjF,cAAc,CAACiF,MAAM,CAAC7pE,KAAK,CAAC;MACvC,CAAC,CAAC;MACFyoE,cAAc,CAAC,IAAI,CAAC2C,IAAI,EAAExG,cAAc,CAAC;MACzC,OAAO,IAAI;IACf,CAAC;IACDO,UAAU,CAACnf,SAAS,CAAC8e,GAAG,GAAG,UAAU30D,MAAM,EAAE;MACzC,OAAO,IAAI,CAACA,MAAM,CAACA,MAAM,CAAC;IAC9B,CAAC;IACDg1D,UAAU,CAACnf,SAAS,CAACkiB,EAAE,GAAG,UAAUuE,SAAS,EAAE;MAC3C,OAAO,IAAI,IAAI,CAACvM,EAAE,CAAC0D,WAAW,CAAC,IAAI,CAACwH,IAAI,CAACC,KAAK,EAAEoB,SAAS,EAAE,IAAI,CAAC;IACpE,CAAC;IACDtH,UAAU,CAACnf,SAAS,CAACvgD,OAAO,GAAG,YAAY;MACvC,IAAI,CAAC2lE,IAAI,CAAChC,GAAG,GAAI,IAAI,CAACgC,IAAI,CAAChC,GAAG,KAAK,MAAM,GAAG,MAAM,GAAG,MAAO;MAC5D,IAAI,IAAI,CAACsD,kBAAkB,EACvB,IAAI,CAACA,kBAAkB,CAAC,IAAI,CAACtB,IAAI,CAAChC,GAAG,CAAC;MAC1C,OAAO,IAAI;IACf,CAAC;IACDjE,UAAU,CAACnf,SAAS,CAAC2mB,IAAI,GAAG,YAAY;MACpC,OAAO,IAAI,CAAClnE,OAAO,CAAC,CAAC;IACzB,CAAC;IACD0/D,UAAU,CAACnf,SAAS,CAAC4mB,OAAO,GAAG,UAAUtQ,EAAE,EAAE;MACzC,IAAIwK,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnBtE,GAAG,CAACqC,QAAQ,GAAG,CAACrC,GAAG,CAAC4B,OAAO;MAC3B,OAAO,IAAI,CAACxD,IAAI,CAAC,UAAUr7C,GAAG,EAAEggD,MAAM,EAAE;QAAEvN,EAAE,CAACuN,MAAM,CAAC7yE,GAAG,EAAE6yE,MAAM,CAAC;MAAE,CAAC,CAAC;IACxE,CAAC;IACD1E,UAAU,CAACnf,SAAS,CAAC6mB,aAAa,GAAG,UAAUvQ,EAAE,EAAE;MAC/C,IAAI,CAAC8O,IAAI,CAAC/B,MAAM,GAAG,QAAQ;MAC3B,OAAO,IAAI,CAACuD,OAAO,CAACtQ,EAAE,CAAC;IAC3B,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAAC8mB,cAAc,GAAG,UAAUxQ,EAAE,EAAE;MAChD,IAAIwK,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnBtE,GAAG,CAACqC,QAAQ,GAAG,CAACrC,GAAG,CAAC4B,OAAO;MAC3B,OAAO,IAAI,CAACxD,IAAI,CAAC,UAAUr7C,GAAG,EAAEggD,MAAM,EAAE;QAAEvN,EAAE,CAACuN,MAAM,CAACf,UAAU,EAAEe,MAAM,CAAC;MAAE,CAAC,CAAC;IAC/E,CAAC;IACD1E,UAAU,CAACnf,SAAS,CAACtwB,IAAI,GAAG,UAAU4mC,EAAE,EAAE;MACtC,IAAIwK,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnBtE,GAAG,CAACqC,QAAQ,GAAG,CAACrC,GAAG,CAAC4B,OAAO;MAC3B,IAAIlkD,CAAC,GAAG,EAAE;MACV,OAAO,IAAI,CAAC0gD,IAAI,CAAC,UAAUj1B,IAAI,EAAE45B,MAAM,EAAE;QACrCrlD,CAAC,CAAChe,IAAI,CAACqjE,MAAM,CAAC7yE,GAAG,CAAC;MACtB,CAAC,CAAC,CAAC8yC,IAAI,CAAC,YAAY;QAChB,OAAOtlB,CAAC;MACZ,CAAC,CAAC,CAACslB,IAAI,CAACwyB,EAAE,CAAC;IACf,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAAC+mB,WAAW,GAAG,UAAUzQ,EAAE,EAAE;MAC7C,IAAIwK,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnB,IAAItE,GAAG,CAACsC,GAAG,KAAK,MAAM,IAAIrB,eAAe,CAACjB,GAAG,EAAE,IAAI,CAAC,IAAIA,GAAG,CAAC7hE,KAAK,GAAG,CAAC,EAAE;QACnE,OAAO,IAAI,CAACkmE,KAAK,CAAC,UAAUtK,KAAK,EAAE;UAC/B,IAAI15D,KAAK,GAAGwhE,eAAe,CAAC7B,GAAG,EAAEA,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAACN,MAAM,CAAC;UACvD,OAAO4D,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAAC8F,KAAK,CAAC;YACxBzI,KAAK,EAAEA,KAAK;YACZnvD,MAAM,EAAE,KAAK;YACbzM,KAAK,EAAE6hE,GAAG,CAAC7hE,KAAK;YAChBqkE,KAAK,EAAE;cACHniE,KAAK,EAAEA,KAAK;cACZ+f,KAAK,EAAE4/C,GAAG,CAAC5/C;YACf;UACJ,CAAC,CAAC;QACN,CAAC,CAAC,CAAC4iB,IAAI,CAAC,UAAU06B,EAAE,EAAE;UAClB,IAAInwE,MAAM,GAAGmwE,EAAE,CAACnwE,MAAM;UACtB,OAAOA,MAAM;QACjB,CAAC,CAAC,CAACy1C,IAAI,CAACwyB,EAAE,CAAC;MACf;MACAwK,GAAG,CAACqC,QAAQ,GAAG,CAACrC,GAAG,CAAC4B,OAAO;MAC3B,IAAIlkD,CAAC,GAAG,EAAE;MACV,OAAO,IAAI,CAAC0gD,IAAI,CAAC,UAAUj1B,IAAI,EAAE45B,MAAM,EAAE;QACrCrlD,CAAC,CAAChe,IAAI,CAACqjE,MAAM,CAACf,UAAU,CAAC;MAC7B,CAAC,CAAC,CAACh/B,IAAI,CAAC,YAAY;QAChB,OAAOtlB,CAAC;MACZ,CAAC,CAAC,CAACslB,IAAI,CAACwyB,EAAE,CAAC;IACf,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACgnB,UAAU,GAAG,UAAU1Q,EAAE,EAAE;MAC5C,IAAI,CAAC8O,IAAI,CAAC/B,MAAM,GAAG,QAAQ;MAC3B,OAAO,IAAI,CAAC3zC,IAAI,CAAC4mC,EAAE,CAAC;IACxB,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACinB,QAAQ,GAAG,UAAU3Q,EAAE,EAAE;MAC1C,OAAO,IAAI,CAACr3D,KAAK,CAAC,CAAC,CAAC,CAACywB,IAAI,CAAC,UAAUlR,CAAC,EAAE;QAAE,OAAOA,CAAC,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC,CAACslB,IAAI,CAACwyB,EAAE,CAAC;IACrE,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACknB,OAAO,GAAG,UAAU5Q,EAAE,EAAE;MACzC,OAAO,IAAI,CAAC72D,OAAO,CAAC,CAAC,CAACwnE,QAAQ,CAAC3Q,EAAE,CAAC;IACtC,CAAC;IACD6I,UAAU,CAACnf,SAAS,CAACmnB,QAAQ,GAAG,YAAY;MACxC,IAAIrG,GAAG,GAAG,IAAI,CAACsE,IAAI;QAAE7wB,GAAG,GAAGusB,GAAG,CAAC3/D,KAAK,IAAI2/D,GAAG,CAACuE,KAAK,CAACnI,MAAM,CAACkB,SAAS,CAAC0C,GAAG,CAAC3/D,KAAK,CAAC;MAC7E,IAAI,CAACozC,GAAG,IAAI,CAACA,GAAG,CAACoqB,KAAK,EAClB,OAAO,IAAI;MACf,IAAI9/C,GAAG,GAAG,CAAC,CAAC;MACZwjD,SAAS,CAAC,IAAI,CAAC+C,IAAI,EAAE,UAAUvB,MAAM,EAAE;QACnC,IAAIuD,MAAM,GAAGvD,MAAM,CAACf,UAAU,CAAC9wE,QAAQ,CAAC,CAAC;QACzC,IAAIq1E,KAAK,GAAGzf,MAAM,CAAC/oC,GAAG,EAAEuoD,MAAM,CAAC;QAC/BvoD,GAAG,CAACuoD,MAAM,CAAC,GAAG,IAAI;QAClB,OAAO,CAACC,KAAK;MACjB,CAAC,CAAC;MACF,OAAO,IAAI;IACf,CAAC;IACDlI,UAAU,CAACnf,SAAS,CAACigB,MAAM,GAAG,UAAUqH,OAAO,EAAE;MAC7C,IAAI5T,KAAK,GAAG,IAAI;MAChB,IAAIoN,GAAG,GAAG,IAAI,CAACsE,IAAI;MACnB,OAAO,IAAI,CAACE,MAAM,CAAC,UAAUzK,KAAK,EAAE;QAChC,IAAI0M,QAAQ;QACZ,IAAI,OAAOD,OAAO,KAAK,UAAU,EAAE;UAC/BC,QAAQ,GAAGD,OAAO;QACtB,CAAC,MACI;UACD,IAAIzJ,QAAQ,GAAGnuC,IAAI,CAAC43C,OAAO,CAAC;UAC5B,IAAI1G,OAAO,GAAG/C,QAAQ,CAACpuE,MAAM;UAC7B83E,QAAQ,GAAG,SAAAA,CAAUt9B,IAAI,EAAE;YACvB,IAAIu9B,gBAAgB,GAAG,KAAK;YAC5B,KAAK,IAAI/tD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmnD,OAAO,EAAE,EAAEnnD,CAAC,EAAE;cAC9B,IAAIiwC,OAAO,GAAGmU,QAAQ,CAACpkD,CAAC,CAAC;gBAAEoK,GAAG,GAAGyjD,OAAO,CAAC5d,OAAO,CAAC;cACjD,IAAID,YAAY,CAACxf,IAAI,EAAEyf,OAAO,CAAC,KAAK7lC,GAAG,EAAE;gBACrCimC,YAAY,CAAC7f,IAAI,EAAEyf,OAAO,EAAE7lC,GAAG,CAAC;gBAChC2jD,gBAAgB,GAAG,IAAI;cAC3B;YACJ;YACA,OAAOA,gBAAgB;UAC3B,CAAC;QACL;QACA,IAAItE,SAAS,GAAGpC,GAAG,CAACuE,KAAK,CAAC7H,IAAI;QAC9B,IAAIgB,EAAE,GAAG0E,SAAS,CAAChG,MAAM,CAAC4F,UAAU;UAAE2E,QAAQ,GAAGjJ,EAAE,CAACiJ,QAAQ;UAAE7xB,UAAU,GAAG4oB,EAAE,CAAC5oB,UAAU;QACxF,IAAI32C,KAAK,GAAGy0D,KAAK,CAACwG,EAAE,CAACQ,QAAQ,CAACgN,eAAe,IAAI,GAAG;QACpD,IAAIC,aAAa,GAAG,EAAE;QACtB,IAAIna,YAAY,GAAG,CAAC;QACpB,IAAIC,UAAU,GAAG,EAAE;QACnB,IAAIma,iBAAiB,GAAG,SAAAA,CAAUC,aAAa,EAAEruE,GAAG,EAAE;UAClD,IAAI8zD,QAAQ,GAAG9zD,GAAG,CAAC8zD,QAAQ;YAAEwS,WAAW,GAAGtmE,GAAG,CAACsmE,WAAW;UAC1DtS,YAAY,IAAIqa,aAAa,GAAG/H,WAAW;UAC3C,KAAK,IAAIgI,EAAE,GAAG,CAAC,EAAEtJ,EAAE,GAAG9uC,IAAI,CAAC49B,QAAQ,CAAC,EAAEwa,EAAE,GAAGtJ,EAAE,CAAC/uE,MAAM,EAAEq4E,EAAE,EAAE,EAAE;YACxD,IAAIna,GAAG,GAAG6Q,EAAE,CAACsJ,EAAE,CAAC;YAChBH,aAAa,CAACnnE,IAAI,CAAC8sD,QAAQ,CAACK,GAAG,CAAC,CAAC;UACrC;QACJ,CAAC;QACD,OAAO+F,KAAK,CAAC8R,KAAK,CAAC,CAAC,CAACuB,WAAW,CAAC,CAAC,CAACjjC,IAAI,CAAC,UAAUpU,IAAI,EAAE;UACpD,IAAIq4C,SAAS,GAAG,SAAAA,CAAU/oE,MAAM,EAAE;YAC9B,IAAI+/D,KAAK,GAAG38D,IAAI,CAACqpB,GAAG,CAACxsB,KAAK,EAAEywB,IAAI,CAACjgC,MAAM,GAAGuP,MAAM,CAAC;YACjD,OAAOkkE,SAAS,CAACt0B,OAAO,CAAC;cACrBisB,KAAK,EAAEA,KAAK;cACZnrC,IAAI,EAAEA,IAAI,CAACz9B,KAAK,CAAC+M,MAAM,EAAEA,MAAM,GAAG+/D,KAAK,CAAC;cACxCp6B,KAAK,EAAE;YACX,CAAC,CAAC,CAACb,IAAI,CAAC,UAAUp4B,MAAM,EAAE;cACtB,IAAIs8D,SAAS,GAAG,EAAE;cAClB,IAAIC,SAAS,GAAG,EAAE;cAClB,IAAIC,OAAO,GAAGT,QAAQ,GAAG,EAAE,GAAG,IAAI;cAClC,IAAIU,UAAU,GAAG,EAAE;cACnB,KAAK,IAAI1uD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGslD,KAAK,EAAE,EAAEtlD,CAAC,EAAE;gBAC5B,IAAI2uD,SAAS,GAAG18D,MAAM,CAAC+N,CAAC,CAAC;gBACzB,IAAI4uD,KAAK,GAAG;kBACRruE,KAAK,EAAE6wD,SAAS,CAACud,SAAS,CAAC;kBAC3BpK,OAAO,EAAEtuC,IAAI,CAAC1wB,MAAM,GAAGya,CAAC;gBAC5B,CAAC;gBACD,IAAI8tD,QAAQ,CAACtnB,IAAI,CAACooB,KAAK,EAAEA,KAAK,CAACruE,KAAK,EAAEquE,KAAK,CAAC,KAAK,KAAK,EAAE;kBACpD,IAAIA,KAAK,CAACruE,KAAK,IAAI,IAAI,EAAE;oBACrBmuE,UAAU,CAAC3nE,IAAI,CAACkvB,IAAI,CAAC1wB,MAAM,GAAGya,CAAC,CAAC,CAAC;kBACrC,CAAC,MACI,IAAI,CAACguD,QAAQ,IAAIlJ,GAAG,CAAC3oB,UAAU,CAACwyB,SAAS,CAAC,EAAExyB,UAAU,CAACyyB,KAAK,CAACruE,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE;oBAC7EmuE,UAAU,CAAC3nE,IAAI,CAACkvB,IAAI,CAAC1wB,MAAM,GAAGya,CAAC,CAAC,CAAC;oBACjCuuD,SAAS,CAACxnE,IAAI,CAAC6nE,KAAK,CAACruE,KAAK,CAAC;kBAC/B,CAAC,MACI;oBACDiuE,SAAS,CAACznE,IAAI,CAAC6nE,KAAK,CAACruE,KAAK,CAAC;oBAC3B,IAAIytE,QAAQ,EACRS,OAAO,CAAC1nE,IAAI,CAACkvB,IAAI,CAAC1wB,MAAM,GAAGya,CAAC,CAAC,CAAC;kBACtC;gBACJ;cACJ;cACA,IAAI6uD,QAAQ,GAAGvG,eAAe,CAACjB,GAAG,CAAC,IAC/BA,GAAG,CAAC7hE,KAAK,KAAKy1D,QAAQ,KACrB,OAAO4S,OAAO,KAAK,UAAU,IAAIA,OAAO,KAAKiB,cAAc,CAAC,IAAI;gBACjEpnE,KAAK,EAAE2/D,GAAG,CAAC3/D,KAAK;gBAChB+f,KAAK,EAAE4/C,GAAG,CAAC5/C;cACf,CAAC;cACD,OAAOjtB,OAAO,CAACu7B,OAAO,CAACw4C,SAAS,CAACv4E,MAAM,GAAG,CAAC,IACvCyzE,SAAS,CAACrD,MAAM,CAAC;gBAAEhF,KAAK,EAAEA,KAAK;gBAAE/jE,IAAI,EAAE,KAAK;gBAAE4U,MAAM,EAAEs8D;cAAU,CAAC,CAAC,CAC7DlkC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;gBACrB,KAAK,IAAIm0D,GAAG,IAAIn0D,GAAG,CAAC8zD,QAAQ,EAAE;kBAC1B6a,UAAU,CAAChe,MAAM,CAAC13D,QAAQ,CAACk7D,GAAG,CAAC,EAAE,CAAC,CAAC;gBACvC;gBACAia,iBAAiB,CAACI,SAAS,CAACv4E,MAAM,EAAE+J,GAAG,CAAC;cAC5C,CAAC,CAAC,CAAC,CAACsqC,IAAI,CAAC,YAAY;gBAAE,OAAO,CAACmkC,SAAS,CAACx4E,MAAM,GAAG,CAAC,IAAK64E,QAAQ,IAAI,OAAOhB,OAAO,KAAK,QAAS,KAChGpE,SAAS,CAACrD,MAAM,CAAC;kBACbhF,KAAK,EAAEA,KAAK;kBACZ/jE,IAAI,EAAE,KAAK;kBACX44B,IAAI,EAAEw4C,OAAO;kBACbx8D,MAAM,EAAEu8D,SAAS;kBACjBK,QAAQ,EAAEA,QAAQ;kBAClBE,UAAU,EAAE,OAAOlB,OAAO,KAAK,UAAU,IAClCA;gBACX,CAAC,CAAC,CAACxjC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;kBAAE,OAAOouE,iBAAiB,CAACK,SAAS,CAACx4E,MAAM,EAAE+J,GAAG,CAAC;gBAAE,CAAC,CAAC;cAAE,CAAC,CAAC,CAACsqC,IAAI,CAAC,YAAY;gBAAE,OAAO,CAACqkC,UAAU,CAAC14E,MAAM,GAAG,CAAC,IAAK64E,QAAQ,IAAIhB,OAAO,KAAKiB,cAAe,KAC7KrF,SAAS,CAACrD,MAAM,CAAC;kBACbhF,KAAK,EAAEA,KAAK;kBACZ/jE,IAAI,EAAE,QAAQ;kBACd44B,IAAI,EAAEy4C,UAAU;kBAChBG,QAAQ,EAAEA;gBACd,CAAC,CAAC,CAACxkC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;kBAAE,OAAOouE,iBAAiB,CAACO,UAAU,CAAC14E,MAAM,EAAE+J,GAAG,CAAC;gBAAE,CAAC,CAAC;cAAE,CAAC,CAAC,CAACsqC,IAAI,CAAC,YAAY;gBACnG,OAAOpU,IAAI,CAACjgC,MAAM,GAAGuP,MAAM,GAAG+/D,KAAK,IAAIgJ,SAAS,CAAC/oE,MAAM,GAAGC,KAAK,CAAC;cACpE,CAAC,CAAC;YACN,CAAC,CAAC;UACN,CAAC;UACD,OAAO8oE,SAAS,CAAC,CAAC,CAAC,CAACjkC,IAAI,CAAC,YAAY;YACjC,IAAI6jC,aAAa,CAACl4E,MAAM,GAAG,CAAC,EACxB,MAAM,IAAI89D,WAAW,CAAC,qCAAqC,EAAEoa,aAAa,EAAEna,YAAY,EAAEC,UAAU,CAAC;YACzG,OAAO/9B,IAAI,CAACjgC,MAAM;UACtB,CAAC,CAAC;QACN,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACD0vE,UAAU,CAACnf,SAAS,CAACvsB,MAAM,GAAG,YAAY;MACtC,IAAIqtC,GAAG,GAAG,IAAI,CAACsE,IAAI;QAAElkD,KAAK,GAAG4/C,GAAG,CAAC5/C,KAAK;MACtC,IAAI6gD,eAAe,CAACjB,GAAG,CAAC,KAClBA,GAAG,CAAC+B,SAAS,IAAI,CAAC9G,0BAA0B,IAAK76C,KAAK,CAACpqB,IAAI,KAAK,CAAC,CAAE,EACxE;QACG,OAAO,IAAI,CAACwuE,MAAM,CAAC,UAAUzK,KAAK,EAAE;UAChC,IAAIiI,UAAU,GAAGhC,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAACN,MAAM,CAAC4F,UAAU;UACjD,IAAI2F,SAAS,GAAGvnD,KAAK;UACrB,OAAO4/C,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAACuB,KAAK,CAAC;YAAElE,KAAK,EAAEA,KAAK;YAAEyI,KAAK,EAAE;cAAEniE,KAAK,EAAE2hE,UAAU;cAAE5hD,KAAK,EAAEunD;YAAU;UAAE,CAAC,CAAC,CAAC3kC,IAAI,CAAC,UAAUi7B,KAAK,EAAE;YAChH,OAAO+B,GAAG,CAACuE,KAAK,CAAC7H,IAAI,CAACqC,MAAM,CAAC;cAAEhF,KAAK,EAAEA,KAAK;cAAE/jE,IAAI,EAAE,aAAa;cAAEoqB,KAAK,EAAEunD;YAAU,CAAC,CAAC,CAChF3kC,IAAI,CAAC,UAAU06B,EAAE,EAAE;cACpB,IAAIlR,QAAQ,GAAGkR,EAAE,CAAClR,QAAQ;cAAEkR,EAAE,CAACp3B,UAAU;cAAEo3B,EAAE,CAACxqD,OAAO;cAAE,IAAI8rD,WAAW,GAAGtB,EAAE,CAACsB,WAAW;cACvF,IAAIA,WAAW,EACX,MAAM,IAAIvS,WAAW,CAAC,8BAA8B,EAAE9hD,MAAM,CAACikB,IAAI,CAAC49B,QAAQ,CAAC,CAACx7D,GAAG,CAAC,UAAU67D,GAAG,EAAE;gBAAE,OAAOL,QAAQ,CAACK,GAAG,CAAC;cAAE,CAAC,CAAC,EAAEoR,KAAK,GAAGe,WAAW,CAAC;cACnJ,OAAOf,KAAK,GAAGe,WAAW;YAC9B,CAAC,CAAC;UACN,CAAC,CAAC;QACN,CAAC,CAAC;MACN;MACA,OAAO,IAAI,CAACG,MAAM,CAACsI,cAAc,CAAC;IACtC,CAAC;IACD,OAAOpJ,UAAU;EACrB,CAAC,CAAC,CAAE;EACJ,IAAIoJ,cAAc,GAAG,SAAAA,CAAUvuE,KAAK,EAAE8mE,GAAG,EAAE;IAAE,OAAOA,GAAG,CAAC9mE,KAAK,GAAG,IAAI;EAAE,CAAC;EAEvE,SAAS0uE,2BAA2BA,CAACxO,EAAE,EAAE;IACrC,OAAOyH,oBAAoB,CAACxC,UAAU,CAACnf,SAAS,EAAE,SAASmf,UAAUA,CAACwJ,WAAW,EAAEC,iBAAiB,EAAE;MAClG,IAAI,CAAC1O,EAAE,GAAGA,EAAE;MACZ,IAAI2O,QAAQ,GAAGtM,QAAQ;QAAE1oE,KAAK,GAAG,IAAI;MACrC,IAAI+0E,iBAAiB,EACjB,IAAI;QACAC,QAAQ,GAAGD,iBAAiB,CAAC,CAAC;MAClC,CAAC,CACD,OAAOpf,EAAE,EAAE;QACP31D,KAAK,GAAG21D,EAAE;MACd;MACJ,IAAIsf,QAAQ,GAAGH,WAAW,CAACvD,IAAI;MAC/B,IAAIC,KAAK,GAAGyD,QAAQ,CAACzD,KAAK;MAC1B,IAAI0D,WAAW,GAAG1D,KAAK,CAAC3qC,IAAI,CAAC+iC,OAAO,CAACC,IAAI;MACzC,IAAI,CAAC0H,IAAI,GAAG;QACRC,KAAK,EAAEA,KAAK;QACZlkE,KAAK,EAAE2nE,QAAQ,CAAC3nE,KAAK;QACrB0hE,SAAS,EAAG,CAACiG,QAAQ,CAAC3nE,KAAK,IAAKkkE,KAAK,CAACnI,MAAM,CAACc,OAAO,CAACtU,OAAO,IAAIof,QAAQ,CAAC3nE,KAAK,KAAKkkE,KAAK,CAACnI,MAAM,CAACc,OAAO,CAACnwE,IAAM;QAC9GqzB,KAAK,EAAE2nD,QAAQ;QACf1F,QAAQ,EAAE,KAAK;QACfC,GAAG,EAAE,MAAM;QACXC,MAAM,EAAE,EAAE;QACVpB,SAAS,EAAE,IAAI;QACf93D,MAAM,EAAE,IAAI;QACZi4D,YAAY,EAAE,IAAI;QAClBD,SAAS,EAAE,IAAI;QACfO,OAAO,EAAE,IAAI;QACb1jE,MAAM,EAAE,CAAC;QACTC,KAAK,EAAEy1D,QAAQ;QACf7gE,KAAK,EAAEA,KAAK;QACZquE,EAAE,EAAE4G,QAAQ,CAAC5G,EAAE;QACfwB,WAAW,EAAEqF,WAAW,KAAKja,MAAM,GAAGia,WAAW,GAAG;MACxD,CAAC;IACL,CAAC,CAAC;EACN;EAEA,SAASC,aAAaA,CAACxqD,CAAC,EAAEzsB,CAAC,EAAE;IACzB,OAAOysB,CAAC,GAAGzsB,CAAC,GAAG,CAAC,CAAC,GAAGysB,CAAC,KAAKzsB,CAAC,GAAG,CAAC,GAAG,CAAC;EACvC;EACA,SAASk3E,oBAAoBA,CAACzqD,CAAC,EAAEzsB,CAAC,EAAE;IAChC,OAAOysB,CAAC,GAAGzsB,CAAC,GAAG,CAAC,CAAC,GAAGysB,CAAC,KAAKzsB,CAAC,GAAG,CAAC,GAAG,CAAC;EACvC;EAEA,SAASiyE,IAAIA,CAACkF,uBAAuB,EAAE36E,GAAG,EAAE46E,CAAC,EAAE;IAC3C,IAAIp7E,UAAU,GAAGm7E,uBAAuB,YAAYtL,WAAW,GAC3D,IAAIsL,uBAAuB,CAAC/J,UAAU,CAAC+J,uBAAuB,CAAC,GAC/DA,uBAAuB;IAC3Bn7E,UAAU,CAACq3E,IAAI,CAACvxE,KAAK,GAAGs1E,CAAC,GAAG,IAAIA,CAAC,CAAC56E,GAAG,CAAC,GAAG,IAAI+/D,SAAS,CAAC//D,GAAG,CAAC;IAC3D,OAAOR,UAAU;EACrB;EACA,SAASq7E,eAAeA,CAACT,WAAW,EAAE;IAClC,OAAO,IAAIA,WAAW,CAACxJ,UAAU,CAACwJ,WAAW,EAAE,YAAY;MAAE,OAAOU,UAAU,CAAC,EAAE,CAAC;IAAE,CAAC,CAAC,CAACpqE,KAAK,CAAC,CAAC,CAAC;EACnG;EACA,SAASqqE,YAAYA,CAAClG,GAAG,EAAE;IACvB,OAAOA,GAAG,KAAK,MAAM,GACjB,UAAUpmD,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACusD,WAAW,CAAC,CAAC;IAAE,CAAC,GACxC,UAAUvsD,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACD,WAAW,CAAC,CAAC;IAAE,CAAC;EAChD;EACA,SAASysD,YAAYA,CAACpG,GAAG,EAAE;IACvB,OAAOA,GAAG,KAAK,MAAM,GACjB,UAAUpmD,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACD,WAAW,CAAC,CAAC;IAAE,CAAC,GACxC,UAAUC,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACusD,WAAW,CAAC,CAAC;IAAE,CAAC;EAChD;EACA,SAASE,UAAUA,CAACz4E,GAAG,EAAE04E,QAAQ,EAAEC,WAAW,EAAEC,WAAW,EAAErL,GAAG,EAAE6E,GAAG,EAAE;IACnE,IAAI3zE,MAAM,GAAG2S,IAAI,CAACqpB,GAAG,CAACz6B,GAAG,CAACvB,MAAM,EAAEm6E,WAAW,CAACn6E,MAAM,CAAC;IACrD,IAAIo6E,GAAG,GAAG,CAAC,CAAC;IACZ,KAAK,IAAIpwD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhqB,MAAM,EAAE,EAAEgqB,CAAC,EAAE;MAC7B,IAAIqwD,UAAU,GAAGJ,QAAQ,CAACjwD,CAAC,CAAC;MAC5B,IAAIqwD,UAAU,KAAKF,WAAW,CAACnwD,CAAC,CAAC,EAAE;QAC/B,IAAI8kD,GAAG,CAACvtE,GAAG,CAACyoB,CAAC,CAAC,EAAEkwD,WAAW,CAAClwD,CAAC,CAAC,CAAC,GAAG,CAAC,EAC/B,OAAOzoB,GAAG,CAAC6vD,MAAM,CAAC,CAAC,EAAEpnC,CAAC,CAAC,GAAGkwD,WAAW,CAAClwD,CAAC,CAAC,GAAGkwD,WAAW,CAAC9oB,MAAM,CAACpnC,CAAC,GAAG,CAAC,CAAC;QACxE,IAAI8kD,GAAG,CAACvtE,GAAG,CAACyoB,CAAC,CAAC,EAAEmwD,WAAW,CAACnwD,CAAC,CAAC,CAAC,GAAG,CAAC,EAC/B,OAAOzoB,GAAG,CAAC6vD,MAAM,CAAC,CAAC,EAAEpnC,CAAC,CAAC,GAAGmwD,WAAW,CAACnwD,CAAC,CAAC,GAAGkwD,WAAW,CAAC9oB,MAAM,CAACpnC,CAAC,GAAG,CAAC,CAAC;QACxE,IAAIowD,GAAG,IAAI,CAAC,EACR,OAAO74E,GAAG,CAAC6vD,MAAM,CAAC,CAAC,EAAEgpB,GAAG,CAAC,GAAGH,QAAQ,CAACG,GAAG,CAAC,GAAGF,WAAW,CAAC9oB,MAAM,CAACgpB,GAAG,GAAG,CAAC,CAAC;QAC3E,OAAO,IAAI;MACf;MACA,IAAItL,GAAG,CAACvtE,GAAG,CAACyoB,CAAC,CAAC,EAAEqwD,UAAU,CAAC,GAAG,CAAC,EAC3BD,GAAG,GAAGpwD,CAAC;IACf;IACA,IAAIhqB,MAAM,GAAGm6E,WAAW,CAACn6E,MAAM,IAAI2zE,GAAG,KAAK,MAAM,EAC7C,OAAOpyE,GAAG,GAAG24E,WAAW,CAAC9oB,MAAM,CAAC7vD,GAAG,CAACvB,MAAM,CAAC;IAC/C,IAAIA,MAAM,GAAGuB,GAAG,CAACvB,MAAM,IAAI2zE,GAAG,KAAK,MAAM,EACrC,OAAOpyE,GAAG,CAAC6vD,MAAM,CAAC,CAAC,EAAE8oB,WAAW,CAACl6E,MAAM,CAAC;IAC5C,OAAQo6E,GAAG,GAAG,CAAC,GAAG,IAAI,GAAG74E,GAAG,CAAC6vD,MAAM,CAAC,CAAC,EAAEgpB,GAAG,CAAC,GAAGD,WAAW,CAACC,GAAG,CAAC,GAAGF,WAAW,CAAC9oB,MAAM,CAACgpB,GAAG,GAAG,CAAC,CAAC;EAChG;EACA,SAASE,sBAAsBA,CAACpB,WAAW,EAAEn2E,KAAK,EAAEw3E,OAAO,EAAEC,MAAM,EAAE;IACjE,IAAIvN,KAAK;MAAEF,KAAK;MAAE0N,OAAO;MAAEC,YAAY;MAAEC,YAAY;MAAEC,SAAS;MAAEC,aAAa;MAAEC,UAAU,GAAGP,OAAO,CAACv6E,MAAM;IAC5G,IAAI,CAACu6E,OAAO,CAACj+B,KAAK,CAAC,UAAU/uB,CAAC,EAAE;MAAE,OAAO,OAAOA,CAAC,KAAK,QAAQ;IAAE,CAAC,CAAC,EAAE;MAChE,OAAOgnD,IAAI,CAAC2E,WAAW,EAAElN,eAAe,CAAC;IAC7C;IACA,SAAS+O,aAAaA,CAACpH,GAAG,EAAE;MACxB1G,KAAK,GAAG4M,YAAY,CAAClG,GAAG,CAAC;MACzB5G,KAAK,GAAGgN,YAAY,CAACpG,GAAG,CAAC;MACzB8G,OAAO,GAAI9G,GAAG,KAAK,MAAM,GAAG4F,aAAa,GAAGC,oBAAqB;MACjE,IAAIwB,YAAY,GAAGT,OAAO,CAACl4E,GAAG,CAAC,UAAU44E,MAAM,EAAE;QAC7C,OAAO;UAAElO,KAAK,EAAEA,KAAK,CAACkO,MAAM,CAAC;UAAEhO,KAAK,EAAEA,KAAK,CAACgO,MAAM;QAAE,CAAC;MACzD,CAAC,CAAC,CAACp2D,IAAI,CAAC,UAAUkK,CAAC,EAAEzsB,CAAC,EAAE;QACpB,OAAOm4E,OAAO,CAAC1rD,CAAC,CAACg+C,KAAK,EAAEzqE,CAAC,CAACyqE,KAAK,CAAC;MACpC,CAAC,CAAC;MACF2N,YAAY,GAAGM,YAAY,CAAC34E,GAAG,CAAC,UAAU64E,EAAE,EAAE;QAAE,OAAOA,EAAE,CAACjO,KAAK;MAAE,CAAC,CAAC;MACnE0N,YAAY,GAAGK,YAAY,CAAC34E,GAAG,CAAC,UAAU64E,EAAE,EAAE;QAAE,OAAOA,EAAE,CAACnO,KAAK;MAAE,CAAC,CAAC;MACnE6N,SAAS,GAAGjH,GAAG;MACfkH,aAAa,GAAIlH,GAAG,KAAK,MAAM,GAAG,EAAE,GAAG6G,MAAO;IAClD;IACAO,aAAa,CAAC,MAAM,CAAC;IACrB,IAAIttD,CAAC,GAAG,IAAIyrD,WAAW,CAACxJ,UAAU,CAACwJ,WAAW,EAAE,YAAY;MAAE,OAAOiC,WAAW,CAACT,YAAY,CAAC,CAAC,CAAC,EAAEC,YAAY,CAACG,UAAU,GAAG,CAAC,CAAC,GAAGN,MAAM,CAAC;IAAE,CAAC,CAAC;IAC5I/sD,CAAC,CAACwpD,kBAAkB,GAAG,UAAU2D,SAAS,EAAE;MACxCG,aAAa,CAACH,SAAS,CAAC;IAC5B,CAAC;IACD,IAAIQ,mBAAmB,GAAG,CAAC;IAC3B3tD,CAAC,CAACqoD,aAAa,CAAC,UAAU1B,MAAM,EAAEC,OAAO,EAAEt0C,OAAO,EAAE;MAChD,IAAIx+B,GAAG,GAAG6yE,MAAM,CAAC7yE,GAAG;MACpB,IAAI,OAAOA,GAAG,KAAK,QAAQ,EACvB,OAAO,KAAK;MAChB,IAAI04E,QAAQ,GAAGlN,KAAK,CAACxrE,GAAG,CAAC;MACzB,IAAIwB,KAAK,CAACk3E,QAAQ,EAAEU,YAAY,EAAES,mBAAmB,CAAC,EAAE;QACpD,OAAO,IAAI;MACf,CAAC,MACI;QACD,IAAIC,oBAAoB,GAAG,IAAI;QAC/B,KAAK,IAAIrxD,CAAC,GAAGoxD,mBAAmB,EAAEpxD,CAAC,GAAG8wD,UAAU,EAAE,EAAE9wD,CAAC,EAAE;UACnD,IAAIsxD,MAAM,GAAGtB,UAAU,CAACz4E,GAAG,EAAE04E,QAAQ,EAAES,YAAY,CAAC1wD,CAAC,CAAC,EAAE2wD,YAAY,CAAC3wD,CAAC,CAAC,EAAEywD,OAAO,EAAEG,SAAS,CAAC;UAC5F,IAAIU,MAAM,KAAK,IAAI,IAAID,oBAAoB,KAAK,IAAI,EAChDD,mBAAmB,GAAGpxD,CAAC,GAAG,CAAC,CAAC,KAC3B,IAAIqxD,oBAAoB,KAAK,IAAI,IAAIZ,OAAO,CAACY,oBAAoB,EAAEC,MAAM,CAAC,GAAG,CAAC,EAAE;YACjFD,oBAAoB,GAAGC,MAAM;UACjC;QACJ;QACA,IAAID,oBAAoB,KAAK,IAAI,EAAE;UAC/BhH,OAAO,CAAC,YAAY;YAAED,MAAM,CAACQ,QAAQ,CAACyG,oBAAoB,GAAGR,aAAa,CAAC;UAAE,CAAC,CAAC;QACnF,CAAC,MACI;UACDxG,OAAO,CAACt0C,OAAO,CAAC;QACpB;QACA,OAAO,KAAK;MAChB;IACJ,CAAC,CAAC;IACF,OAAOtS,CAAC;EACZ;EACA,SAAS0tD,WAAWA,CAACpO,KAAK,EAAEE,KAAK,EAAED,SAAS,EAAEE,SAAS,EAAE;IACrD,OAAO;MACH7lE,IAAI,EAAE,CAAC;MACP0lE,KAAK,EAAEA,KAAK;MACZE,KAAK,EAAEA,KAAK;MACZD,SAAS,EAAEA,SAAS;MACpBE,SAAS,EAAEA;IACf,CAAC;EACL;EACA,SAAS0M,UAAUA,CAACrvE,KAAK,EAAE;IACvB,OAAO;MACHlD,IAAI,EAAE,CAAC;MACP0lE,KAAK,EAAExiE,KAAK;MACZ0iE,KAAK,EAAE1iE;IACX,CAAC;EACL;EAEA,IAAI4jE,WAAW,GAAK,YAAY;IAC5B,SAASA,WAAWA,CAAA,EAAG,CACvB;IACAnyD,MAAM,CAAC02C,cAAc,CAACyb,WAAW,CAAC5d,SAAS,EAAE,YAAY,EAAE;MACvDvmD,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC2rE,IAAI,CAACC,KAAK,CAACnL,EAAE,CAACiF,UAAU;MACxC,CAAC;MACD6L,UAAU,EAAE,KAAK;MACjB5iB,YAAY,EAAE;IAClB,CAAC,CAAC;IACFwV,WAAW,CAAC5d,SAAS,CAACirB,OAAO,GAAG,UAAUzO,KAAK,EAAEE,KAAK,EAAEwO,YAAY,EAAEC,YAAY,EAAE;MAChFD,YAAY,GAAGA,YAAY,KAAK,KAAK;MACrCC,YAAY,GAAGA,YAAY,KAAK,IAAI;MACpC,IAAI;QACA,IAAK,IAAI,CAACC,IAAI,CAAC5O,KAAK,EAAEE,KAAK,CAAC,GAAG,CAAC,IAC3B,IAAI,CAAC0O,IAAI,CAAC5O,KAAK,EAAEE,KAAK,CAAC,KAAK,CAAC,KAAKwO,YAAY,IAAIC,YAAY,CAAC,IAAI,EAAED,YAAY,IAAIC,YAAY,CAAE,EACpG,OAAO/B,eAAe,CAAC,IAAI,CAAC;QAChC,OAAO,IAAI,IAAI,CAACjK,UAAU,CAAC,IAAI,EAAE,YAAY;UAAE,OAAOyL,WAAW,CAACpO,KAAK,EAAEE,KAAK,EAAE,CAACwO,YAAY,EAAE,CAACC,YAAY,CAAC;QAAE,CAAC,CAAC;MACrH,CAAC,CACD,OAAO74B,CAAC,EAAE;QACN,OAAO0xB,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C;IACJ,CAAC;IACDoC,WAAW,CAAC5d,SAAS,CAAC14C,MAAM,GAAG,UAAUtN,KAAK,EAAE;MAC5C,IAAIA,KAAK,IAAI,IAAI,EACb,OAAOgqE,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C,OAAO,IAAI,IAAI,CAAC2D,UAAU,CAAC,IAAI,EAAE,YAAY;QAAE,OAAOkK,UAAU,CAACrvE,KAAK,CAAC;MAAE,CAAC,CAAC;IAC/E,CAAC;IACD4jE,WAAW,CAAC5d,SAAS,CAACqrB,KAAK,GAAG,UAAUrxE,KAAK,EAAE;MAC3C,IAAIA,KAAK,IAAI,IAAI,EACb,OAAOgqE,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C,OAAO,IAAI,IAAI,CAAC2D,UAAU,CAAC,IAAI,EAAE,YAAY;QAAE,OAAOyL,WAAW,CAAC5wE,KAAK,EAAE1M,SAAS,EAAE,IAAI,CAAC;MAAE,CAAC,CAAC;IACjG,CAAC;IACDswE,WAAW,CAAC5d,SAAS,CAACsrB,YAAY,GAAG,UAAUtxE,KAAK,EAAE;MAClD,IAAIA,KAAK,IAAI,IAAI,EACb,OAAOgqE,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C,OAAO,IAAI,IAAI,CAAC2D,UAAU,CAAC,IAAI,EAAE,YAAY;QAAE,OAAOyL,WAAW,CAAC5wE,KAAK,EAAE1M,SAAS,EAAE,KAAK,CAAC;MAAE,CAAC,CAAC;IAClG,CAAC;IACDswE,WAAW,CAAC5d,SAAS,CAACurB,KAAK,GAAG,UAAUvxE,KAAK,EAAE;MAC3C,IAAIA,KAAK,IAAI,IAAI,EACb,OAAOgqE,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C,OAAO,IAAI,IAAI,CAAC2D,UAAU,CAAC,IAAI,EAAE,YAAY;QAAE,OAAOyL,WAAW,CAACt9E,SAAS,EAAE0M,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC;MAAE,CAAC,CAAC;IACxG,CAAC;IACD4jE,WAAW,CAAC5d,SAAS,CAACwrB,YAAY,GAAG,UAAUxxE,KAAK,EAAE;MAClD,IAAIA,KAAK,IAAI,IAAI,EACb,OAAOgqE,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C,OAAO,IAAI,IAAI,CAAC2D,UAAU,CAAC,IAAI,EAAE,YAAY;QAAE,OAAOyL,WAAW,CAACt9E,SAAS,EAAE0M,KAAK,CAAC;MAAE,CAAC,CAAC;IAC3F,CAAC;IACD4jE,WAAW,CAAC5d,SAAS,CAACjoB,UAAU,GAAG,UAAUkuB,GAAG,EAAE;MAC9C,IAAI,OAAOA,GAAG,KAAK,QAAQ,EACvB,OAAO+d,IAAI,CAAC,IAAI,EAAEvI,eAAe,CAAC;MACtC,OAAO,IAAI,CAACwP,OAAO,CAAChlB,GAAG,EAAEA,GAAG,GAAGqV,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC;IACzD,CAAC;IACDsC,WAAW,CAAC5d,SAAS,CAACyrB,oBAAoB,GAAG,UAAUxlB,GAAG,EAAE;MACxD,IAAIA,GAAG,KAAK,EAAE,EACV,OAAO,IAAI,CAACluB,UAAU,CAACkuB,GAAG,CAAC;MAC/B,OAAO8jB,sBAAsB,CAAC,IAAI,EAAE,UAAUviD,CAAC,EAAEhJ,CAAC,EAAE;QAAE,OAAOgJ,CAAC,CAACoiC,OAAO,CAACprC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;MAAE,CAAC,EAAE,CAACynC,GAAG,CAAC,EAAEqV,SAAS,CAAC;IAC5G,CAAC;IACDsC,WAAW,CAAC5d,SAAS,CAAC0rB,gBAAgB,GAAG,UAAUzlB,GAAG,EAAE;MACpD,OAAO8jB,sBAAsB,CAAC,IAAI,EAAE,UAAUviD,CAAC,EAAEhJ,CAAC,EAAE;QAAE,OAAOgJ,CAAC,KAAKhJ,CAAC,CAAC,CAAC,CAAC;MAAE,CAAC,EAAE,CAACynC,GAAG,CAAC,EAAE,EAAE,CAAC;IAC1F,CAAC;IACD2X,WAAW,CAAC5d,SAAS,CAAC2rB,eAAe,GAAG,YAAY;MAChD,IAAI9sD,GAAG,GAAG2sC,UAAU,CAACzE,KAAK,CAACwE,aAAa,EAAEnyD,SAAS,CAAC;MACpD,IAAIylB,GAAG,CAACpvB,MAAM,KAAK,CAAC,EAChB,OAAO25E,eAAe,CAAC,IAAI,CAAC;MAChC,OAAOW,sBAAsB,CAAC,IAAI,EAAE,UAAUviD,CAAC,EAAEhJ,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACorC,OAAO,CAACpiC,CAAC,CAAC,KAAK,CAAC,CAAC;MAAE,CAAC,EAAE3I,GAAG,EAAE,EAAE,CAAC;IACjG,CAAC;IACD++C,WAAW,CAAC5d,SAAS,CAAC4rB,yBAAyB,GAAG,YAAY;MAC1D,IAAI/sD,GAAG,GAAG2sC,UAAU,CAACzE,KAAK,CAACwE,aAAa,EAAEnyD,SAAS,CAAC;MACpD,IAAIylB,GAAG,CAACpvB,MAAM,KAAK,CAAC,EAChB,OAAO25E,eAAe,CAAC,IAAI,CAAC;MAChC,OAAOW,sBAAsB,CAAC,IAAI,EAAE,UAAUviD,CAAC,EAAEhJ,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACsW,IAAI,CAAC,UAAUztB,CAAC,EAAE;UAAE,OAAOmgB,CAAC,CAACoiC,OAAO,CAACviD,CAAC,CAAC,KAAK,CAAC;QAAE,CAAC,CAAC;MAAE,CAAC,EAAEwX,GAAG,EAAEy8C,SAAS,CAAC;IACxI,CAAC;IACDsC,WAAW,CAAC5d,SAAS,CAAC6rB,KAAK,GAAG,YAAY;MACtC,IAAInY,KAAK,GAAG,IAAI;MAChB,IAAI70C,GAAG,GAAG2sC,UAAU,CAACzE,KAAK,CAACwE,aAAa,EAAEnyD,SAAS,CAAC;MACpD,IAAI8wE,OAAO,GAAG,IAAI,CAACkB,IAAI;MACvB,IAAI;QACAvsD,GAAG,CAACvK,IAAI,CAAC41D,OAAO,CAAC;MACrB,CAAC,CACD,OAAO53B,CAAC,EAAE;QACN,OAAO0xB,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C;MACA,IAAI38C,GAAG,CAACpvB,MAAM,KAAK,CAAC,EAChB,OAAO25E,eAAe,CAAC,IAAI,CAAC;MAChC,IAAIlsD,CAAC,GAAG,IAAI,IAAI,CAACiiD,UAAU,CAAC,IAAI,EAAE,YAAY;QAAE,OAAOyL,WAAW,CAAC/rD,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAACA,GAAG,CAACpvB,MAAM,GAAG,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC;MACnGytB,CAAC,CAACwpD,kBAAkB,GAAG,UAAU2D,SAAS,EAAE;QACxCH,OAAO,GAAIG,SAAS,KAAK,MAAM,GAC3B3W,KAAK,CAACoY,UAAU,GAChBpY,KAAK,CAACqY,WAAY;QACtBltD,GAAG,CAACvK,IAAI,CAAC41D,OAAO,CAAC;MACrB,CAAC;MACD,IAAIzwD,CAAC,GAAG,CAAC;MACTyD,CAAC,CAACqoD,aAAa,CAAC,UAAU1B,MAAM,EAAEC,OAAO,EAAEt0C,OAAO,EAAE;QAChD,IAAIx+B,GAAG,GAAG6yE,MAAM,CAAC7yE,GAAG;QACpB,OAAOk5E,OAAO,CAACl5E,GAAG,EAAE6tB,GAAG,CAACpF,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;UAC7B,EAAEA,CAAC;UACH,IAAIA,CAAC,KAAKoF,GAAG,CAACpvB,MAAM,EAAE;YAClBq0E,OAAO,CAACt0C,OAAO,CAAC;YAChB,OAAO,KAAK;UAChB;QACJ;QACA,IAAI06C,OAAO,CAACl5E,GAAG,EAAE6tB,GAAG,CAACpF,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;UAC5B,OAAO,IAAI;QACf,CAAC,MACI;UACDqqD,OAAO,CAAC,YAAY;YAAED,MAAM,CAACQ,QAAQ,CAACxlD,GAAG,CAACpF,CAAC,CAAC,CAAC;UAAE,CAAC,CAAC;UACjD,OAAO,KAAK;QAChB;MACJ,CAAC,CAAC;MACF,OAAOyD,CAAC;IACZ,CAAC;IACD0gD,WAAW,CAAC5d,SAAS,CAACgsB,QAAQ,GAAG,UAAUhyE,KAAK,EAAE;MAC9C,OAAO,IAAI,CAACiyE,UAAU,CAAC,CAAC,CAAC1Q,MAAM,EAAEvhE,KAAK,CAAC,EAAE,CAACA,KAAK,EAAE,IAAI,CAACkgE,EAAE,CAACiE,OAAO,CAAC,CAAC,EAAE;QAAE+N,aAAa,EAAE,KAAK;QAAEC,aAAa,EAAE;MAAM,CAAC,CAAC;IACvH,CAAC;IACDvO,WAAW,CAAC5d,SAAS,CAACosB,MAAM,GAAG,YAAY;MACvC,IAAIvtD,GAAG,GAAG2sC,UAAU,CAACzE,KAAK,CAACwE,aAAa,EAAEnyD,SAAS,CAAC;MACpD,IAAIylB,GAAG,CAACpvB,MAAM,KAAK,CAAC,EAChB,OAAO,IAAI,IAAI,CAAC0vE,UAAU,CAAC,IAAI,CAAC;MACpC,IAAI;QACAtgD,GAAG,CAACvK,IAAI,CAAC,IAAI,CAACw3D,UAAU,CAAC;MAC7B,CAAC,CACD,OAAOx5B,CAAC,EAAE;QACN,OAAO0xB,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C;MACA,IAAIzwB,MAAM,GAAGlsB,GAAG,CAAC7E,MAAM,CAAC,UAAUxgB,GAAG,EAAEqqB,GAAG,EAAE;QAAE,OAAOrqB,GAAG,GACpDA,GAAG,CAACupB,MAAM,CAAC,CAAC,CAACvpB,GAAG,CAACA,GAAG,CAAC/J,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEo0B,GAAG,CAAC,CAAC,CAAC,GAC3C,CAAC,CAAC03C,MAAM,EAAE13C,GAAG,CAAC,CAAC;MAAE,CAAC,EAAE,IAAI,CAAC;MAC7BknB,MAAM,CAACvqC,IAAI,CAAC,CAACqe,GAAG,CAACA,GAAG,CAACpvB,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,CAACyqE,EAAE,CAACiE,OAAO,CAAC,CAAC;MACnD,OAAO,IAAI,CAAC8N,UAAU,CAAClhC,MAAM,EAAE;QAAEmhC,aAAa,EAAE,KAAK;QAAEC,aAAa,EAAE;MAAM,CAAC,CAAC;IAClF,CAAC;IACDvO,WAAW,CAAC5d,SAAS,CAACisB,UAAU,GAAG,UAAUlhC,MAAM,EAAEtqC,OAAO,EAAE;MAC1D,IAAIizD,KAAK,GAAG,IAAI;MAChB,IAAI6K,GAAG,GAAG,IAAI,CAAC6M,IAAI;QAAEiB,SAAS,GAAG,IAAI,CAACP,UAAU;QAAEQ,UAAU,GAAG,IAAI,CAACP,WAAW;QAAEtgD,GAAG,GAAG,IAAI,CAAC8gD,IAAI;QAAEhmE,GAAG,GAAG,IAAI,CAACimE,IAAI;MACjH,IAAIzhC,MAAM,CAACt7C,MAAM,KAAK,CAAC,EACnB,OAAO25E,eAAe,CAAC,IAAI,CAAC;MAChC,IAAI,CAACr+B,MAAM,CAACgB,KAAK,CAAC,UAAU7qB,KAAK,EAAE;QAC/B,OAAOA,KAAK,CAAC,CAAC,CAAC,KAAK5zB,SAAS,IACzB4zB,KAAK,CAAC,CAAC,CAAC,KAAK5zB,SAAS,IACtB++E,SAAS,CAACnrD,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;MAC1C,CAAC,CAAC,EAAE;QACA,OAAO8iD,IAAI,CAAC,IAAI,EAAE,4HAA4H,EAAEjW,UAAU,CAACiS,eAAe,CAAC;MAC/K;MACA,IAAIkM,aAAa,GAAG,CAACzrE,OAAO,IAAIA,OAAO,CAACyrE,aAAa,KAAK,KAAK;MAC/D,IAAIC,aAAa,GAAG1rE,OAAO,IAAIA,OAAO,CAAC0rE,aAAa,KAAK,IAAI;MAC7D,SAASM,QAAQA,CAAC1hC,MAAM,EAAE2hC,QAAQ,EAAE;QAChC,IAAIjzD,CAAC,GAAG,CAAC;UAAEytC,CAAC,GAAGnc,MAAM,CAACt7C,MAAM;QAC5B,OAAOgqB,CAAC,GAAGytC,CAAC,EAAE,EAAEztC,CAAC,EAAE;UACf,IAAIyH,KAAK,GAAG6pB,MAAM,CAACtxB,CAAC,CAAC;UACrB,IAAI8kD,GAAG,CAACmO,QAAQ,CAAC,CAAC,CAAC,EAAExrD,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAIq9C,GAAG,CAACmO,QAAQ,CAAC,CAAC,CAAC,EAAExrD,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;YAClEA,KAAK,CAAC,CAAC,CAAC,GAAGuK,GAAG,CAACvK,KAAK,CAAC,CAAC,CAAC,EAAEwrD,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrCxrD,KAAK,CAAC,CAAC,CAAC,GAAG3a,GAAG,CAAC2a,KAAK,CAAC,CAAC,CAAC,EAAEwrD,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrC;UACJ;QACJ;QACA,IAAIjzD,CAAC,KAAKytC,CAAC,EACPnc,MAAM,CAACvqC,IAAI,CAACksE,QAAQ,CAAC;QACzB,OAAO3hC,MAAM;MACjB;MACA,IAAI4hC,aAAa,GAAGN,SAAS;MAC7B,SAASO,WAAWA,CAACpuD,CAAC,EAAEzsB,CAAC,EAAE;QAAE,OAAO46E,aAAa,CAACnuD,CAAC,CAAC,CAAC,CAAC,EAAEzsB,CAAC,CAAC,CAAC,CAAC,CAAC;MAAE;MAC/D,IAAI8sB,GAAG;MACP,IAAI;QACAA,GAAG,GAAGksB,MAAM,CAAC/wB,MAAM,CAACyyD,QAAQ,EAAE,EAAE,CAAC;QACjC5tD,GAAG,CAACvK,IAAI,CAACs4D,WAAW,CAAC;MACzB,CAAC,CACD,OAAOpjB,EAAE,EAAE;QACP,OAAOwa,IAAI,CAAC,IAAI,EAAExI,oBAAoB,CAAC;MAC3C;MACA,IAAIqR,QAAQ,GAAG,CAAC;MAChB,IAAIC,uBAAuB,GAAGX,aAAa,GACvC,UAAUn7E,GAAG,EAAE;QAAE,OAAOq7E,SAAS,CAACr7E,GAAG,EAAE6tB,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;MAAE,CAAC,GAC/D,UAAU77E,GAAG,EAAE;QAAE,OAAOq7E,SAAS,CAACr7E,GAAG,EAAE6tB,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;MAAE,CAAC;MACpE,IAAIE,uBAAuB,GAAGb,aAAa,GACvC,UAAUl7E,GAAG,EAAE;QAAE,OAAOs7E,UAAU,CAACt7E,GAAG,EAAE6tB,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;MAAE,CAAC,GAChE,UAAU77E,GAAG,EAAE;QAAE,OAAOs7E,UAAU,CAACt7E,GAAG,EAAE6tB,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;MAAE,CAAC;MACrE,SAASG,qBAAqBA,CAACh8E,GAAG,EAAE;QAChC,OAAO,CAAC87E,uBAAuB,CAAC97E,GAAG,CAAC,IAAI,CAAC+7E,uBAAuB,CAAC/7E,GAAG,CAAC;MACzE;MACA,IAAIi8E,QAAQ,GAAGH,uBAAuB;MACtC,IAAI5vD,CAAC,GAAG,IAAI,IAAI,CAACiiD,UAAU,CAAC,IAAI,EAAE,YAAY;QAAE,OAAOyL,WAAW,CAAC/rD,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEA,GAAG,CAACA,GAAG,CAACpvB,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAACy8E,aAAa,EAAE,CAACC,aAAa,CAAC;MAAE,CAAC,CAAC;MACzIjvD,CAAC,CAACwpD,kBAAkB,GAAG,UAAU2D,SAAS,EAAE;QACxC,IAAIA,SAAS,KAAK,MAAM,EAAE;UACtB4C,QAAQ,GAAGH,uBAAuB;UAClCH,aAAa,GAAGN,SAAS;QAC7B,CAAC,MACI;UACDY,QAAQ,GAAGF,uBAAuB;UAClCJ,aAAa,GAAGL,UAAU;QAC9B;QACAztD,GAAG,CAACvK,IAAI,CAACs4D,WAAW,CAAC;MACzB,CAAC;MACD1vD,CAAC,CAACqoD,aAAa,CAAC,UAAU1B,MAAM,EAAEC,OAAO,EAAEt0C,OAAO,EAAE;QAChD,IAAIx+B,GAAG,GAAG6yE,MAAM,CAAC7yE,GAAG;QACpB,OAAOi8E,QAAQ,CAACj8E,GAAG,CAAC,EAAE;UAClB,EAAE67E,QAAQ;UACV,IAAIA,QAAQ,KAAKhuD,GAAG,CAACpvB,MAAM,EAAE;YACzBq0E,OAAO,CAACt0C,OAAO,CAAC;YAChB,OAAO,KAAK;UAChB;QACJ;QACA,IAAIw9C,qBAAqB,CAACh8E,GAAG,CAAC,EAAE;UAC5B,OAAO,IAAI;QACf,CAAC,MACI,IAAI0iE,KAAK,CAAC0X,IAAI,CAACp6E,GAAG,EAAE6tB,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAInZ,KAAK,CAAC0X,IAAI,CAACp6E,GAAG,EAAE6tB,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;UACzF,OAAO,KAAK;QAChB,CAAC,MACI;UACD/I,OAAO,CAAC,YAAY;YAChB,IAAI6I,aAAa,KAAKN,SAAS,EAC3BxI,MAAM,CAACQ,QAAQ,CAACxlD,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAElChJ,MAAM,CAACQ,QAAQ,CAACxlD,GAAG,CAACguD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;UACzC,CAAC,CAAC;UACF,OAAO,KAAK;QAChB;MACJ,CAAC,CAAC;MACF,OAAO3vD,CAAC;IACZ,CAAC;IACD0gD,WAAW,CAAC5d,SAAS,CAACktB,eAAe,GAAG,YAAY;MAChD,IAAIruD,GAAG,GAAG2sC,UAAU,CAACzE,KAAK,CAACwE,aAAa,EAAEnyD,SAAS,CAAC;MACpD,IAAI,CAACylB,GAAG,CAACktB,KAAK,CAAC,UAAU/uB,CAAC,EAAE;QAAE,OAAO,OAAOA,CAAC,KAAK,QAAQ;MAAE,CAAC,CAAC,EAAE;QAC5D,OAAOgnD,IAAI,CAAC,IAAI,EAAE,2CAA2C,CAAC;MAClE;MACA,IAAInlD,GAAG,CAACpvB,MAAM,KAAK,CAAC,EAChB,OAAO25E,eAAe,CAAC,IAAI,CAAC;MAChC,OAAO,IAAI,CAAC6C,UAAU,CAACptD,GAAG,CAAC/sB,GAAG,CAAC,UAAUm0D,GAAG,EAAE;QAAE,OAAO,CAACA,GAAG,EAAEA,GAAG,GAAGqV,SAAS,CAAC;MAAE,CAAC,CAAC,CAAC;IACtF,CAAC;IACD,OAAOsC,WAAW;EACtB,CAAC,CAAC,CAAE;EAEJ,SAASuP,4BAA4BA,CAACjT,EAAE,EAAE;IACtC,OAAOyH,oBAAoB,CAAC/D,WAAW,CAAC5d,SAAS,EAAE,SAAS4d,WAAWA,CAACyH,KAAK,EAAElkE,KAAK,EAAEisE,YAAY,EAAE;MAChG,IAAI,CAAClT,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACkL,IAAI,GAAG;QACRC,KAAK,EAAEA,KAAK;QACZlkE,KAAK,EAAEA,KAAK,KAAK,KAAK,GAAG,IAAI,GAAGA,KAAK;QACrC+gE,EAAE,EAAEkL;MACR,CAAC;MACD,IAAI9O,SAAS,GAAGpE,EAAE,CAACmE,KAAK,CAACC,SAAS;MAClC,IAAI,CAACA,SAAS,EACV,MAAM,IAAIvQ,UAAU,CAACd,UAAU,CAAC,CAAC;MACrC,IAAI,CAACme,IAAI,GAAG,IAAI,CAACU,UAAU,GAAGxN,SAAS,CAACC,GAAG,CAAC5vB,IAAI,CAAC2vB,SAAS,CAAC;MAC3D,IAAI,CAACyN,WAAW,GAAG,UAAUvtD,CAAC,EAAEzsB,CAAC,EAAE;QAAE,OAAOusE,SAAS,CAACC,GAAG,CAACxsE,CAAC,EAAEysB,CAAC,CAAC;MAAE,CAAC;MAClE,IAAI,CAACguD,IAAI,GAAG,UAAUhuD,CAAC,EAAEzsB,CAAC,EAAE;QAAE,OAAOusE,SAAS,CAACC,GAAG,CAAC//C,CAAC,EAAEzsB,CAAC,CAAC,GAAG,CAAC,GAAGysB,CAAC,GAAGzsB,CAAC;MAAE,CAAC;MACvE,IAAI,CAACw6E,IAAI,GAAG,UAAU/tD,CAAC,EAAEzsB,CAAC,EAAE;QAAE,OAAOusE,SAAS,CAACC,GAAG,CAAC//C,CAAC,EAAEzsB,CAAC,CAAC,GAAG,CAAC,GAAGysB,CAAC,GAAGzsB,CAAC;MAAE,CAAC;MACvE,IAAI,CAACs7E,YAAY,GAAGnT,EAAE,CAACmE,KAAK,CAACiP,WAAW;IAC5C,CAAC,CAAC;EACN;EAEA,SAASC,kBAAkBA,CAACn6C,MAAM,EAAE;IAChC,OAAO6jC,IAAI,CAAC,UAAUt3D,KAAK,EAAE;MACzB6tE,cAAc,CAAC7tE,KAAK,CAAC;MACrByzB,MAAM,CAACzzB,KAAK,CAAC8tE,MAAM,CAAC55E,KAAK,CAAC;MAC1B,OAAO,KAAK;IAChB,CAAC,CAAC;EACN;EACA,SAAS25E,cAAcA,CAAC7tE,KAAK,EAAE;IAC3B,IAAIA,KAAK,CAAC+tE,eAAe,EACrB/tE,KAAK,CAAC+tE,eAAe,CAAC,CAAC;IAC3B,IAAI/tE,KAAK,CAAC6tE,cAAc,EACpB7tE,KAAK,CAAC6tE,cAAc,CAAC,CAAC;EAC9B;EAEA,IAAIG,gCAAgC,GAAG,gBAAgB;EACvD,IAAIC,8BAA8B,GAAG,oBAAoB;EACzD,IAAIC,YAAY,GAAGhN,MAAM,CAAC,IAAI,EAAE8M,gCAAgC,CAAC;EAEjE,IAAIG,WAAW,GAAK,YAAY;IAC5B,SAASA,WAAWA,CAAA,EAAG,CACvB;IACAA,WAAW,CAAC9tB,SAAS,CAAC+tB,KAAK,GAAG,YAAY;MACtCjmE,MAAM,CAAC,CAACuqD,GAAG,CAAC5L,MAAM,CAAC;MACnB,EAAE,IAAI,CAACunB,SAAS;MAChB,IAAI,IAAI,CAACA,SAAS,KAAK,CAAC,IAAI,CAAC3b,GAAG,CAAC5L,MAAM,EACnC4L,GAAG,CAAC4b,YAAY,GAAG,IAAI;MAC3B,OAAO,IAAI;IACf,CAAC;IACDH,WAAW,CAAC9tB,SAAS,CAACkuB,OAAO,GAAG,YAAY;MACxCpmE,MAAM,CAAC,CAACuqD,GAAG,CAAC5L,MAAM,CAAC;MACnB,IAAI,EAAE,IAAI,CAACunB,SAAS,KAAK,CAAC,EAAE;QACxB,IAAI,CAAC3b,GAAG,CAAC5L,MAAM,EACX4L,GAAG,CAAC4b,YAAY,GAAG,IAAI;QAC3B,OAAO,IAAI,CAACE,aAAa,CAAC1+E,MAAM,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC2+E,OAAO,CAAC,CAAC,EAAE;UACrD,IAAIC,QAAQ,GAAG,IAAI,CAACF,aAAa,CAACG,KAAK,CAAC,CAAC;UACzC,IAAI;YACAlZ,MAAM,CAACiZ,QAAQ,CAAC,CAAC,CAAC,EAAEA,QAAQ,CAAC,CAAC,CAAC,CAAC;UACpC,CAAC,CACD,OAAO/7B,CAAC,EAAE,CAAE;QAChB;MACJ;MACA,OAAO,IAAI;IACf,CAAC;IACDw7B,WAAW,CAAC9tB,SAAS,CAACouB,OAAO,GAAG,YAAY;MACxC,OAAO,IAAI,CAACJ,SAAS,IAAI3b,GAAG,CAAC4b,YAAY,KAAK,IAAI;IACtD,CAAC;IACDH,WAAW,CAAC9tB,SAAS,CAAC/1B,MAAM,GAAG,UAAUmzC,QAAQ,EAAE;MAC/C,IAAI1J,KAAK,GAAG,IAAI;MAChB,IAAI,CAAC,IAAI,CAACzuD,IAAI,EACV,OAAO,IAAI;MACf,IAAIm1D,KAAK,GAAG,IAAI,CAACF,EAAE,CAACE,KAAK;MACzB,IAAII,WAAW,GAAG,IAAI,CAACN,EAAE,CAACjH,MAAM,CAACuH,WAAW;MAC5C1yD,MAAM,CAAC,CAAC,IAAI,CAACs1D,QAAQ,CAAC;MACtB,IAAI,CAACA,QAAQ,IAAI,CAAChD,KAAK,EAAE;QACrB,QAAQI,WAAW,IAAIA,WAAW,CAAC3sE,IAAI;UACnC,KAAK,qBAAqB;YACtB,MAAM,IAAIkgE,UAAU,CAACjB,cAAc,CAAC0N,WAAW,CAAC;UACpD,KAAK,iBAAiB;YAClB,MAAM,IAAIzM,UAAU,CAACd,UAAU,CAACuN,WAAW,CAAC/rE,OAAO,EAAE+rE,WAAW,CAAC;UACrE;YACI,MAAM,IAAIzM,UAAU,CAACwgB,UAAU,CAAC/T,WAAW,CAAC;QACpD;MACJ;MACA,IAAI,CAAC,IAAI,CAACgU,MAAM,EACZ,MAAM,IAAIzgB,UAAU,CAACf,mBAAmB,CAAC,CAAC;MAC9CllD,MAAM,CAAC,IAAI,CAACszD,WAAW,CAACnI,MAAM,KAAK,IAAI,CAAC;MACxCmK,QAAQ,GAAG,IAAI,CAACA,QAAQ,GAAGA,QAAQ,KAC9B,IAAI,CAAClD,EAAE,CAACsD,IAAI,GACP,IAAI,CAACtD,EAAE,CAACsD,IAAI,CAAChuD,WAAW,CAAC,IAAI,CAAC2qD,UAAU,EAAE,IAAI,CAACl1D,IAAI,EAAE;QAAEwpE,UAAU,EAAE,IAAI,CAACC;MAA4B,CAAC,CAAC,GACtGtU,KAAK,CAAC5qD,WAAW,CAAC,IAAI,CAAC2qD,UAAU,EAAE,IAAI,CAACl1D,IAAI,EAAE;QAAEwpE,UAAU,EAAE,IAAI,CAACC;MAA4B,CAAC,CAAC,CAAC;MAC1GtR,QAAQ,CAAC3lB,OAAO,GAAGwf,IAAI,CAAC,UAAU0X,EAAE,EAAE;QAClCnB,cAAc,CAACmB,EAAE,CAAC;QAClBjb,KAAK,CAACkb,OAAO,CAACxR,QAAQ,CAACvpE,KAAK,CAAC;MACjC,CAAC,CAAC;MACFupE,QAAQ,CAACyR,OAAO,GAAG5X,IAAI,CAAC,UAAU0X,EAAE,EAAE;QAClCnB,cAAc,CAACmB,EAAE,CAAC;QAClBjb,KAAK,CAAC8a,MAAM,IAAI9a,KAAK,CAACkb,OAAO,CAAC,IAAI7gB,UAAU,CAAChB,KAAK,CAACqQ,QAAQ,CAACvpE,KAAK,CAAC,CAAC;QACnE6/D,KAAK,CAAC8a,MAAM,GAAG,KAAK;QACpB9a,KAAK,CAACob,EAAE,CAAC,OAAO,CAAC,CAACpR,IAAI,CAACiR,EAAE,CAAC;MAC9B,CAAC,CAAC;MACFvR,QAAQ,CAAC2R,UAAU,GAAG9X,IAAI,CAAC,YAAY;QACnCvD,KAAK,CAAC8a,MAAM,GAAG,KAAK;QACpB9a,KAAK,CAACsb,QAAQ,CAAC,CAAC;QAChB,IAAI,cAAc,IAAI5R,QAAQ,EAAE;UAC5ByQ,YAAY,CAACoB,cAAc,CAACvR,IAAI,CAACN,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC9D;MACJ,CAAC,CAAC;MACF,OAAO,IAAI;IACf,CAAC;IACD0Q,WAAW,CAAC9tB,SAAS,CAACgW,QAAQ,GAAG,UAAU/wD,IAAI,EAAEs1B,EAAE,EAAE20C,UAAU,EAAE;MAC7D,IAAIxb,KAAK,GAAG,IAAI;MAChB,IAAIzuD,IAAI,KAAK,WAAW,IAAI,IAAI,CAACA,IAAI,KAAK,WAAW,EACjD,OAAOqzD,SAAS,CAAC,IAAIvK,UAAU,CAACohB,QAAQ,CAAC,yBAAyB,CAAC,CAAC;MACxE,IAAI,CAAC,IAAI,CAACX,MAAM,EACZ,OAAOlW,SAAS,CAAC,IAAIvK,UAAU,CAACf,mBAAmB,CAAC,CAAC,CAAC;MAC1D,IAAI,IAAI,CAACohB,OAAO,CAAC,CAAC,EAAE;QAChB,OAAO,IAAI5b,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;UAC/CsgC,KAAK,CAACya,aAAa,CAAC3tE,IAAI,CAAC,CAAC,YAAY;YAC9BkzD,KAAK,CAACsC,QAAQ,CAAC/wD,IAAI,EAAEs1B,EAAE,EAAE20C,UAAU,CAAC,CAACprC,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC;UAC9D,CAAC,EAAEi/B,GAAG,CAAC,CAAC;QAChB,CAAC,CAAC;MACN,CAAC,MACI,IAAI6c,UAAU,EAAE;QACjB,OAAO/Z,QAAQ,CAAC,YAAY;UACxB,IAAItO,CAAC,GAAG,IAAI2L,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;YAChDsgC,KAAK,CAACqa,KAAK,CAAC,CAAC;YACb,IAAIpkB,EAAE,GAAGpvB,EAAE,CAAC/K,OAAO,EAAE4D,MAAM,EAAEsgC,KAAK,CAAC;YACnC,IAAI/J,EAAE,IAAIA,EAAE,CAAC7lB,IAAI,EACb6lB,EAAE,CAAC7lB,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC;UAChC,CAAC,CAAC;UACFyzB,CAAC,CAACwN,OAAO,CAAC,YAAY;YAAE,OAAOX,KAAK,CAACwa,OAAO,CAAC,CAAC;UAAE,CAAC,CAAC;UAClDrnB,CAAC,CAAC8L,IAAI,GAAG,IAAI;UACb,OAAO9L,CAAC;QACZ,CAAC,CAAC;MACN,CAAC,MACI;QACD,IAAIA,CAAC,GAAG,IAAI2L,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;UAChD,IAAIu2B,EAAE,GAAGpvB,EAAE,CAAC/K,OAAO,EAAE4D,MAAM,EAAEsgC,KAAK,CAAC;UACnC,IAAI/J,EAAE,IAAIA,EAAE,CAAC7lB,IAAI,EACb6lB,EAAE,CAAC7lB,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC;QAChC,CAAC,CAAC;QACFyzB,CAAC,CAAC8L,IAAI,GAAG,IAAI;QACb,OAAO9L,CAAC;MACZ;IACJ,CAAC;IACDinB,WAAW,CAAC9tB,SAAS,CAACovB,KAAK,GAAG,YAAY;MACtC,OAAO,IAAI,CAACtX,MAAM,GAAG,IAAI,CAACA,MAAM,CAACsX,KAAK,CAAC,CAAC,GAAG,IAAI;IACnD,CAAC;IACDtB,WAAW,CAAC9tB,SAAS,CAACqvB,OAAO,GAAG,UAAUC,WAAW,EAAE;MACnD,IAAI7vB,IAAI,GAAG,IAAI,CAAC2vB,KAAK,CAAC,CAAC;MACvB,IAAIx5D,OAAO,GAAG48C,YAAY,CAAChjC,OAAO,CAAC8/C,WAAW,CAAC;MAC/C,IAAI7vB,IAAI,CAAC8vB,WAAW,EAAE;QAClB9vB,IAAI,CAAC8vB,WAAW,GAAG9vB,IAAI,CAAC8vB,WAAW,CAACzrC,IAAI,CAAC,YAAY;UAAE,OAAOluB,OAAO;QAAE,CAAC,CAAC;MAC7E,CAAC,MACI;QACD6pC,IAAI,CAAC8vB,WAAW,GAAG35D,OAAO;QAC1B6pC,IAAI,CAAC+vB,aAAa,GAAG,EAAE;QACvB,IAAIrnD,KAAK,GAAGs3B,IAAI,CAAC2d,QAAQ,CAACqS,WAAW,CAAChwB,IAAI,CAAC0a,UAAU,CAAC,CAAC,CAAC,CAAC;QACxD,UAASuV,IAAIA,CAAA,EAAG;UACb,EAAEjwB,IAAI,CAACkwB,UAAU;UACjB,OAAOlwB,IAAI,CAAC+vB,aAAa,CAAC//E,MAAM,EAC3BgwD,IAAI,CAAC+vB,aAAa,CAAClB,KAAK,CAAC,CAAC,CAAE,CAAC;UAClC,IAAI7uB,IAAI,CAAC8vB,WAAW,EAChBpnD,KAAK,CAAC1uB,GAAG,CAAC,CAACi7D,QAAQ,CAAC,CAACpF,SAAS,GAAGogB,IAAI;QAC7C,CAAC,EAAC,CAAC;MACP;MACA,IAAIE,kBAAkB,GAAGnwB,IAAI,CAAC8vB,WAAW;MACzC,OAAO,IAAI/c,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC/Cxd,OAAO,CAACkuB,IAAI,CAAC,UAAUtqC,GAAG,EAAE;UAAE,OAAOimD,IAAI,CAAC+vB,aAAa,CAAChvE,IAAI,CAACy2D,IAAI,CAACznC,OAAO,CAACmf,IAAI,CAAC,IAAI,EAAEn1C,GAAG,CAAC,CAAC,CAAC;QAAE,CAAC,EAAE,UAAUjL,GAAG,EAAE;UAAE,OAAOkxD,IAAI,CAAC+vB,aAAa,CAAChvE,IAAI,CAACy2D,IAAI,CAAC7jC,MAAM,CAACub,IAAI,CAAC,IAAI,EAAEpgD,GAAG,CAAC,CAAC,CAAC;QAAE,CAAC,CAAC,CAAC8lE,OAAO,CAAC,YAAY;UAClM,IAAI5U,IAAI,CAAC8vB,WAAW,KAAKK,kBAAkB,EAAE;YACzCnwB,IAAI,CAAC8vB,WAAW,GAAG,IAAI;UAC3B;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACDzB,WAAW,CAAC9tB,SAAS,CAAC6vB,KAAK,GAAG,YAAY;MACtC,IAAI,IAAI,CAACrB,MAAM,EAAE;QACb,IAAI,CAACA,MAAM,GAAG,KAAK;QACnB,IAAI,IAAI,CAACpR,QAAQ,EACb,IAAI,CAACA,QAAQ,CAACyS,KAAK,CAAC,CAAC;QACzB,IAAI,CAACjB,OAAO,CAAC,IAAI7gB,UAAU,CAAChB,KAAK,CAAC,CAAC,CAAC;MACxC;IACJ,CAAC;IACD+gB,WAAW,CAAC9tB,SAAS,CAACqlB,KAAK,GAAG,UAAUrI,SAAS,EAAE;MAC/C,IAAI8S,cAAc,GAAI,IAAI,CAACC,eAAe,KAAK,IAAI,CAACA,eAAe,GAAG,CAAC,CAAC,CAAE;MAC1E,IAAInoB,MAAM,CAACkoB,cAAc,EAAE9S,SAAS,CAAC,EACjC,OAAO8S,cAAc,CAAC9S,SAAS,CAAC;MACpC,IAAI6E,WAAW,GAAG,IAAI,CAAC3E,MAAM,CAACF,SAAS,CAAC;MACxC,IAAI,CAAC6E,WAAW,EAAE;QACd,MAAM,IAAI9T,UAAU,CAACoP,QAAQ,CAAC,QAAQ,GAAGH,SAAS,GAAG,0BAA0B,CAAC;MACpF;MACA,IAAIgT,qBAAqB,GAAG,IAAI,IAAI,CAAC9V,EAAE,CAACphC,KAAK,CAACkkC,SAAS,EAAE6E,WAAW,EAAE,IAAI,CAAC;MAC3EmO,qBAAqB,CAACxS,IAAI,GAAG,IAAI,CAACtD,EAAE,CAACsD,IAAI,CAAC6H,KAAK,CAACrI,SAAS,CAAC;MAC1D8S,cAAc,CAAC9S,SAAS,CAAC,GAAGgT,qBAAqB;MACjD,OAAOA,qBAAqB;IAChC,CAAC;IACD,OAAOlC,WAAW;EACtB,CAAC,CAAC,CAAE;EAEJ,SAASmC,4BAA4BA,CAAC/V,EAAE,EAAE;IACtC,OAAOyH,oBAAoB,CAACmM,WAAW,CAAC9tB,SAAS,EAAE,SAAS8tB,WAAWA,CAAC7oE,IAAI,EAAEk1D,UAAU,EAAE+V,QAAQ,EAAExB,2BAA2B,EAAE5W,MAAM,EAAE;MACrI,IAAIpE,KAAK,GAAG,IAAI;MAChB,IAAI,CAACwG,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACj1D,IAAI,GAAGA,IAAI;MAChB,IAAI,CAACk1D,UAAU,GAAGA,UAAU;MAC5B,IAAI,CAAC+C,MAAM,GAAGgT,QAAQ;MACtB,IAAI,CAACxB,2BAA2B,GAAGA,2BAA2B;MAC9D,IAAI,CAACtR,QAAQ,GAAG,IAAI;MACpB,IAAI,CAAC0R,EAAE,GAAGjO,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,CAAC;MACpD,IAAI,CAAC/I,MAAM,GAAGA,MAAM,IAAI,IAAI;MAC5B,IAAI,CAAC0W,MAAM,GAAG,IAAI;MAClB,IAAI,CAACR,SAAS,GAAG,CAAC;MAClB,IAAI,CAACG,aAAa,GAAG,EAAE;MACvB,IAAI,CAACa,QAAQ,GAAG,IAAI;MACpB,IAAI,CAACJ,OAAO,GAAG,IAAI;MACnB,IAAI,CAACW,WAAW,GAAG,IAAI;MACvB,IAAI,CAACC,aAAa,GAAG,IAAI;MACzB,IAAI,CAACG,UAAU,GAAG,CAAC;MACnB,IAAI,CAACvU,WAAW,GAAG,IAAI5I,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC3DsgC,KAAK,CAACsb,QAAQ,GAAGx/C,OAAO;QACxBkkC,KAAK,CAACkb,OAAO,GAAGx7C,MAAM;MAC1B,CAAC,CAAC;MACF,IAAI,CAACgoC,WAAW,CAACt3B,IAAI,CAAC,YAAY;QAC9B4vB,KAAK,CAAC8a,MAAM,GAAG,KAAK;QACpB9a,KAAK,CAACob,EAAE,CAACqB,QAAQ,CAACzS,IAAI,CAAC,CAAC;MAC5B,CAAC,EAAE,UAAUprB,CAAC,EAAE;QACZ,IAAI89B,SAAS,GAAG1c,KAAK,CAAC8a,MAAM;QAC5B9a,KAAK,CAAC8a,MAAM,GAAG,KAAK;QACpB9a,KAAK,CAACob,EAAE,CAACj7E,KAAK,CAAC6pE,IAAI,CAACprB,CAAC,CAAC;QACtBohB,KAAK,CAACoE,MAAM,GACRpE,KAAK,CAACoE,MAAM,CAAC8W,OAAO,CAACt8B,CAAC,CAAC,GACvB89B,SAAS,IAAI1c,KAAK,CAAC0J,QAAQ,IAAI1J,KAAK,CAAC0J,QAAQ,CAACyS,KAAK,CAAC,CAAC;QACzD,OAAOvX,SAAS,CAAChmB,CAAC,CAAC;MACvB,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEA,SAAS+9B,eAAeA,CAACxiF,IAAI,EAAE67D,OAAO,EAAE2Z,MAAM,EAAE1E,KAAK,EAAEgB,IAAI,EAAEzB,QAAQ,EAAE2E,SAAS,EAAE;IAC9E,OAAO;MACHh1E,IAAI,EAAEA,IAAI;MACV67D,OAAO,EAAEA,OAAO;MAChB2Z,MAAM,EAAEA,MAAM;MACd1E,KAAK,EAAEA,KAAK;MACZgB,IAAI,EAAEA,IAAI;MACVzB,QAAQ,EAAEA,QAAQ;MAClBoS,GAAG,EAAE,CAACjN,MAAM,IAAI,CAACR,SAAS,GAAG,GAAG,GAAG,EAAE,KAAKlE,KAAK,GAAG,GAAG,GAAG,EAAE,CAAC,IAAIgB,IAAI,GAAG,IAAI,GAAG,EAAE,CAAC,GAAG4Q,eAAe,CAAC7mB,OAAO;IAC9G,CAAC;EACL;EACA,SAAS6mB,eAAeA,CAAC7mB,OAAO,EAAE;IAC9B,OAAO,OAAOA,OAAO,KAAK,QAAQ,GAC9BA,OAAO,GACPA,OAAO,GAAI,GAAG,GAAG,EAAE,CAACp5D,IAAI,CAAC2vD,IAAI,CAACyJ,OAAO,EAAE,GAAG,CAAC,GAAG,GAAG,GAAI,EAAE;EAC/D;EAEA,SAAS8mB,iBAAiBA,CAAC3iF,IAAI,EAAEmwE,OAAO,EAAED,OAAO,EAAE;IAC/C,OAAO;MACHlwE,IAAI,EAAEA,IAAI;MACVmwE,OAAO,EAAEA,OAAO;MAChBD,OAAO,EAAEA,OAAO;MAChBuB,WAAW,EAAE,IAAI;MACjBlB,SAAS,EAAEjV,aAAa,CAAC4U,OAAO,EAAE,UAAU58D,KAAK,EAAE;QAAE,OAAO,CAACA,KAAK,CAACtT,IAAI,EAAEsT,KAAK,CAAC;MAAE,CAAC;IACtF,CAAC;EACL;EAEA,SAASsvE,mBAAmBA,CAACtW,UAAU,EAAE;IACrC,OAAOA,UAAU,CAAC1qE,MAAM,KAAK,CAAC,GAAG0qE,UAAU,CAAC,CAAC,CAAC,GAAGA,UAAU;EAC/D;EACA,IAAIuW,SAAS,GAAG,SAAAA,CAAUC,WAAW,EAAE;IACnC,IAAI;MACAA,WAAW,CAACC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;MACtBF,SAAS,GAAG,SAAAA,CAAA,EAAY;QAAE,OAAO,CAAC,EAAE,CAAC;MAAE,CAAC;MACxC,OAAO,CAAC,EAAE,CAAC;IACf,CAAC,CACD,OAAOp+B,CAAC,EAAE;MACNo+B,SAAS,GAAG,SAAAA,CAAA,EAAY;QAAE,OAAOpV,SAAS;MAAE,CAAC;MAC7C,OAAOA,SAAS;IACpB;EACJ,CAAC;EAED,SAASuV,eAAeA,CAACnnB,OAAO,EAAE;IAC9B,IAAIA,OAAO,IAAI,IAAI,EAAE;MACjB,OAAO,YAAY;QAAE,OAAOp8D,SAAS;MAAE,CAAC;IAC5C,CAAC,MACI,IAAI,OAAOo8D,OAAO,KAAK,QAAQ,EAAE;MAClC,OAAOonB,yBAAyB,CAACpnB,OAAO,CAAC;IAC7C,CAAC,MACI;MACD,OAAO,UAAUnC,GAAG,EAAE;QAAE,OAAOkC,YAAY,CAAClC,GAAG,EAAEmC,OAAO,CAAC;MAAE,CAAC;IAChE;EACJ;EACA,SAASonB,yBAAyBA,CAACpnB,OAAO,EAAE;IACxC,IAAIn3D,KAAK,GAAGm3D,OAAO,CAACn3D,KAAK,CAAC,GAAG,CAAC;IAC9B,IAAIA,KAAK,CAAC9C,MAAM,KAAK,CAAC,EAAE;MACpB,OAAO,UAAU83D,GAAG,EAAE;QAAE,OAAOA,GAAG,CAACmC,OAAO,CAAC;MAAE,CAAC;IAClD,CAAC,MACI;MACD,OAAO,UAAUnC,GAAG,EAAE;QAAE,OAAOkC,YAAY,CAAClC,GAAG,EAAEmC,OAAO,CAAC;MAAE,CAAC;IAChE;EACJ;EAEA,SAASqnB,QAAQA,CAACtlB,SAAS,EAAE;IACzB,OAAO,EAAE,CAACx5D,KAAK,CAACguD,IAAI,CAACwL,SAAS,CAAC;EACnC;EACA,IAAIulB,WAAW,GAAG,CAAC;EACnB,SAASC,eAAeA,CAACvnB,OAAO,EAAE;IAC9B,OAAOA,OAAO,IAAI,IAAI,GAClB,KAAK,GACL,OAAOA,OAAO,KAAK,QAAQ,GACvBA,OAAO,GACP,GAAG,GAAGA,OAAO,CAACp5D,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG;EACzC;EACA,SAAS4gF,YAAYA,CAAChX,EAAE,EAAEyW,WAAW,EAAEQ,QAAQ,EAAE;IAC7C,SAASC,aAAaA,CAAClX,EAAE,EAAEW,KAAK,EAAE;MAC9B,IAAIwW,MAAM,GAAGN,QAAQ,CAAC7W,EAAE,CAACoX,gBAAgB,CAAC;MAC1C,OAAO;QACHpU,MAAM,EAAE;UACJrvE,IAAI,EAAEqsE,EAAE,CAACrsE,IAAI;UACbwjF,MAAM,EAAEA,MAAM,CAACv/E,GAAG,CAAC,UAAUuzE,KAAK,EAAE;YAAE,OAAOxK,KAAK,CAAC4U,WAAW,CAACpK,KAAK,CAAC;UAAE,CAAC,CAAC,CAACvzE,GAAG,CAAC,UAAUq2B,KAAK,EAAE;YAC3F,IAAIuhC,OAAO,GAAGvhC,KAAK,CAACuhC,OAAO;cAAE6nB,aAAa,GAAGppD,KAAK,CAACopD,aAAa;YAChE,IAAIrT,QAAQ,GAAGhe,OAAO,CAACwJ,OAAO,CAAC;YAC/B,IAAI+d,QAAQ,GAAG/d,OAAO,IAAI,IAAI;YAC9B,IAAI8nB,cAAc,GAAG,CAAC,CAAC;YACvB,IAAInjF,MAAM,GAAG;cACTR,IAAI,EAAEs6B,KAAK,CAACt6B,IAAI;cAChBi1E,UAAU,EAAE;gBACRj1E,IAAI,EAAE,IAAI;gBACV4jF,YAAY,EAAE,IAAI;gBAClBhK,QAAQ,EAAEA,QAAQ;gBAClBvJ,QAAQ,EAAEA,QAAQ;gBAClBxU,OAAO,EAAEA,OAAO;gBAChB6nB,aAAa,EAAEA,aAAa;gBAC5BlO,MAAM,EAAE,IAAI;gBACZztB,UAAU,EAAEi7B,eAAe,CAACnnB,OAAO;cACvC,CAAC;cACDqU,OAAO,EAAEgT,QAAQ,CAAC5oD,KAAK,CAACupD,UAAU,CAAC,CAAC5/E,GAAG,CAAC,UAAU20E,SAAS,EAAE;gBAAE,OAAOt+C,KAAK,CAAChnB,KAAK,CAACslE,SAAS,CAAC;cAAE,CAAC,CAAC,CAC3F30E,GAAG,CAAC,UAAUqP,KAAK,EAAE;gBACtB,IAAItT,IAAI,GAAGsT,KAAK,CAACtT,IAAI;kBAAEw1E,MAAM,GAAGliE,KAAK,CAACkiE,MAAM;kBAAEsO,UAAU,GAAGxwE,KAAK,CAACwwE,UAAU;kBAAEjoB,OAAO,GAAGvoD,KAAK,CAACuoD,OAAO;gBACpG,IAAIwU,QAAQ,GAAGhe,OAAO,CAACwJ,OAAO,CAAC;gBAC/B,IAAIr7D,MAAM,GAAG;kBACTR,IAAI,EAAEA,IAAI;kBACVqwE,QAAQ,EAAEA,QAAQ;kBAClBxU,OAAO,EAAEA,OAAO;kBAChB2Z,MAAM,EAAEA,MAAM;kBACdsO,UAAU,EAAEA,UAAU;kBACtB/7B,UAAU,EAAEi7B,eAAe,CAACnnB,OAAO;gBACvC,CAAC;gBACD8nB,cAAc,CAACP,eAAe,CAACvnB,OAAO,CAAC,CAAC,GAAGr7D,MAAM;gBACjD,OAAOA,MAAM;cACjB,CAAC,CAAC;cACF00E,iBAAiB,EAAE,SAAAA,CAAUrZ,OAAO,EAAE;gBAAE,OAAO8nB,cAAc,CAACP,eAAe,CAACvnB,OAAO,CAAC,CAAC;cAAE;YAC7F,CAAC;YACD8nB,cAAc,CAAC,KAAK,CAAC,GAAGnjF,MAAM,CAACy0E,UAAU;YACzC,IAAIpZ,OAAO,IAAI,IAAI,EAAE;cACjB8nB,cAAc,CAACP,eAAe,CAACvnB,OAAO,CAAC,CAAC,GAAGr7D,MAAM,CAACy0E,UAAU;YAChE;YACA,OAAOz0E,MAAM;UACjB,CAAC;QACL,CAAC;QACDujF,SAAS,EAAEP,MAAM,CAAC5hF,MAAM,GAAG,CAAC,IAAK,QAAQ,IAAIorE,KAAK,CAAC4U,WAAW,CAAC4B,MAAM,CAAC,CAAC,CAAC,CAAE,IACtE,EAAE,OAAOzV,SAAS,KAAK,WAAW,IAAI,QAAQ,CAAC7qD,IAAI,CAAC6qD,SAAS,CAACC,SAAS,CAAC,IACpE,CAAC,mBAAmB,CAAC9qD,IAAI,CAAC6qD,SAAS,CAACC,SAAS,CAAC,IAC9C,EAAE,CAAC94C,MAAM,CAAC64C,SAAS,CAACC,SAAS,CAACrpE,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG;MAC1E,CAAC;IACL;IACA,SAASq/E,eAAeA,CAAC3wD,KAAK,EAAE;MAC5B,IAAIA,KAAK,CAACpqB,IAAI,KAAK,CAAC,EAChB,OAAO,IAAI;MACf,IAAIoqB,KAAK,CAACpqB,IAAI,KAAK,CAAC,EAChB,MAAM,IAAIuU,KAAK,CAAC,0CAA0C,CAAC;MAC/D,IAAImxD,KAAK,GAAGt7C,KAAK,CAACs7C,KAAK;QAAEE,KAAK,GAAGx7C,KAAK,CAACw7C,KAAK;QAAED,SAAS,GAAGv7C,KAAK,CAACu7C,SAAS;QAAEE,SAAS,GAAGz7C,KAAK,CAACy7C,SAAS;MACtG,IAAImV,QAAQ,GAAGtV,KAAK,KAAKlvE,SAAS,GAC9BovE,KAAK,KAAKpvE,SAAS,GACf,IAAI,GACJqjF,WAAW,CAACoB,UAAU,CAACrV,KAAK,EAAE,CAAC,CAACC,SAAS,CAAC,GAC9CD,KAAK,KAAKpvE,SAAS,GACfqjF,WAAW,CAACqB,UAAU,CAACxV,KAAK,EAAE,CAAC,CAACC,SAAS,CAAC,GAC1CkU,WAAW,CAACsB,KAAK,CAACzV,KAAK,EAAEE,KAAK,EAAE,CAAC,CAACD,SAAS,EAAE,CAAC,CAACE,SAAS,CAAC;MACjE,OAAOmV,QAAQ;IACnB;IACA,SAASI,iBAAiBA,CAACrQ,WAAW,EAAE;MACpC,IAAI7E,SAAS,GAAG6E,WAAW,CAACh0E,IAAI;MAChC,SAASgyE,MAAMA,CAACrB,EAAE,EAAE;QAChB,IAAI3D,KAAK,GAAG2D,EAAE,CAAC3D,KAAK;UAAE/jE,IAAI,GAAG0nE,EAAE,CAAC1nE,IAAI;UAAE44B,IAAI,GAAG8uC,EAAE,CAAC9uC,IAAI;UAAEhkB,MAAM,GAAG8yD,EAAE,CAAC9yD,MAAM;UAAEwV,KAAK,GAAGs9C,EAAE,CAACt9C,KAAK;QAC1F,OAAO,IAAIjtB,OAAO,CAAC,UAAUu7B,OAAO,EAAE4D,MAAM,EAAE;UAC1C5D,OAAO,GAAGynC,IAAI,CAACznC,OAAO,CAAC;UACvB,IAAIrH,KAAK,GAAG0yC,KAAK,CAAC4U,WAAW,CAACzS,SAAS,CAAC;UACxC,IAAIyK,QAAQ,GAAGt/C,KAAK,CAACuhC,OAAO,IAAI,IAAI;UACpC,IAAIyoB,UAAU,GAAGr7E,IAAI,KAAK,KAAK,IAAIA,IAAI,KAAK,KAAK;UACjD,IAAI,CAACq7E,UAAU,IAAIr7E,IAAI,KAAK,QAAQ,IAAIA,IAAI,KAAK,aAAa,EAC1D,MAAM,IAAIuU,KAAK,CAAC,0BAA0B,GAAGvU,IAAI,CAAC;UACtD,IAAIrH,MAAM,GAAG,CAACigC,IAAI,IAAIhkB,MAAM,IAAI;YAAEjc,MAAM,EAAE;UAAE,CAAC,EAAEA,MAAM;UACrD,IAAIigC,IAAI,IAAIhkB,MAAM,IAAIgkB,IAAI,CAACjgC,MAAM,KAAKic,MAAM,CAACjc,MAAM,EAAE;YACjD,MAAM,IAAI4b,KAAK,CAAC,+DAA+D,CAAC;UACpF;UACA,IAAI5b,MAAM,KAAK,CAAC,EACZ,OAAO+/B,OAAO,CAAC;YAAEswC,WAAW,EAAE,CAAC;YAAExS,QAAQ,EAAE,CAAC,CAAC;YAAEt5C,OAAO,EAAE,EAAE;YAAEozB,UAAU,EAAE95C;UAAU,CAAC,CAAC;UACxF,IAAI8kF,GAAG;UACP,IAAIC,IAAI,GAAG,EAAE;UACb,IAAI/kB,QAAQ,GAAG,EAAE;UACjB,IAAIwS,WAAW,GAAG,CAAC;UACnB,IAAIwS,YAAY,GAAG,SAAAA,CAAU3yE,KAAK,EAAE;YAChC,EAAEmgE,WAAW;YACb0N,cAAc,CAAC7tE,KAAK,CAAC;UACzB,CAAC;UACD,IAAI7I,IAAI,KAAK,aAAa,EAAE;YACxB,IAAIoqB,KAAK,CAACpqB,IAAI,KAAK,CAAC,EAChB,OAAO04B,OAAO,CAAC;cAAEswC,WAAW,EAAEA,WAAW;cAAExS,QAAQ,EAAEA,QAAQ;cAAEt5C,OAAO,EAAE,EAAE;cAAEozB,UAAU,EAAE95C;YAAU,CAAC,CAAC;YACxG,IAAI4zB,KAAK,CAACpqB,IAAI,KAAK,CAAC,EAChBu7E,IAAI,CAAC7xE,IAAI,CAAC4xE,GAAG,GAAGjqD,KAAK,CAACuP,KAAK,CAAC,CAAC,CAAC,CAAC,KAE/B26C,IAAI,CAAC7xE,IAAI,CAAC4xE,GAAG,GAAGjqD,KAAK,CAACsL,MAAM,CAACo+C,eAAe,CAAC3wD,KAAK,CAAC,CAAC,CAAC;UAC7D,CAAC,MACI;YACD,IAAIs9C,EAAE,GAAG2T,UAAU,GACf1K,QAAQ,GACJ,CAAC/7D,MAAM,EAAEgkB,IAAI,CAAC,GACd,CAAChkB,MAAM,EAAE,IAAI,CAAC,GAClB,CAACgkB,IAAI,EAAE,IAAI,CAAC;cAAE6iD,KAAK,GAAG/T,EAAE,CAAC,CAAC,CAAC;cAAEgU,KAAK,GAAGhU,EAAE,CAAC,CAAC,CAAC;YAC9C,IAAI2T,UAAU,EAAE;cACZ,KAAK,IAAI14D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhqB,MAAM,EAAE,EAAEgqB,CAAC,EAAE;gBAC7B44D,IAAI,CAAC7xE,IAAI,CAAC4xE,GAAG,GAAII,KAAK,IAAIA,KAAK,CAAC/4D,CAAC,CAAC,KAAKnsB,SAAS,GAC5C66B,KAAK,CAACrxB,IAAI,CAAC,CAACy7E,KAAK,CAAC94D,CAAC,CAAC,EAAE+4D,KAAK,CAAC/4D,CAAC,CAAC,CAAC,GAC/B0O,KAAK,CAACrxB,IAAI,CAAC,CAACy7E,KAAK,CAAC94D,CAAC,CAAC,CAAE,CAAC;gBAC3B24D,GAAG,CAAC36B,OAAO,GAAG66B,YAAY;cAC9B;YACJ,CAAC,MACI;cACD,KAAK,IAAI74D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhqB,MAAM,EAAE,EAAEgqB,CAAC,EAAE;gBAC7B44D,IAAI,CAAC7xE,IAAI,CAAC4xE,GAAG,GAAGjqD,KAAK,CAACrxB,IAAI,CAAC,CAACy7E,KAAK,CAAC94D,CAAC,CAAC,CAAC,CAAC;gBACtC24D,GAAG,CAAC36B,OAAO,GAAG66B,YAAY;cAC9B;YACJ;UACJ;UACA,IAAI1mB,IAAI,GAAG,SAAAA,CAAUjsD,KAAK,EAAE;YACxB,IAAIynC,UAAU,GAAGznC,KAAK,CAAC8tE,MAAM,CAACp/E,MAAM;YACpCgkF,IAAI,CAACn9D,OAAO,CAAC,UAAUk9D,GAAG,EAAE34D,CAAC,EAAE;cAAE,OAAO24D,GAAG,CAACv+E,KAAK,IAAI,IAAI,KAAKy5D,QAAQ,CAAC7zC,CAAC,CAAC,GAAG24D,GAAG,CAACv+E,KAAK,CAAC;YAAE,CAAC,CAAC;YAC1F27B,OAAO,CAAC;cACJswC,WAAW,EAAEA,WAAW;cACxBxS,QAAQ,EAAEA,QAAQ;cAClBt5C,OAAO,EAAEld,IAAI,KAAK,QAAQ,GAAG44B,IAAI,GAAG2iD,IAAI,CAACvgF,GAAG,CAAC,UAAUsgF,GAAG,EAAE;gBAAE,OAAOA,GAAG,CAAC/jF,MAAM;cAAE,CAAC,CAAC;cACnF+4C,UAAU,EAAEA;YAChB,CAAC,CAAC;UACN,CAAC;UACDgrC,GAAG,CAAC36B,OAAO,GAAG,UAAU93C,KAAK,EAAE;YAC3B2yE,YAAY,CAAC3yE,KAAK,CAAC;YACnBisD,IAAI,CAACjsD,KAAK,CAAC;UACf,CAAC;UACDyyE,GAAG,CAAC9iB,SAAS,GAAG1D,IAAI;QACxB,CAAC,CAAC;MACN;MACA,SAASqX,UAAUA,CAACzE,EAAE,EAAE;QACpB,IAAI3D,KAAK,GAAG2D,EAAE,CAAC3D,KAAK;UAAEnvD,MAAM,GAAG8yD,EAAE,CAAC9yD,MAAM;UAAE43D,KAAK,GAAG9E,EAAE,CAAC8E,KAAK;UAAE7jE,OAAO,GAAG++D,EAAE,CAAC/+D,OAAO;UAAE4jE,MAAM,GAAG7E,EAAE,CAAC6E,MAAM;QACpG,OAAO,IAAIpvE,OAAO,CAAC,UAAUu7B,OAAO,EAAE4D,MAAM,EAAE;UAC1C5D,OAAO,GAAGynC,IAAI,CAACznC,OAAO,CAAC;UACvB,IAAIruB,KAAK,GAAGmiE,KAAK,CAACniE,KAAK;YAAE+f,KAAK,GAAGoiD,KAAK,CAACpiD,KAAK;UAC5C,IAAIiH,KAAK,GAAG0yC,KAAK,CAAC4U,WAAW,CAACzS,SAAS,CAAC;UACxC,IAAI5jD,MAAM,GAAGjY,KAAK,CAACswE,YAAY,GAC3BtpD,KAAK,GACLA,KAAK,CAAChnB,KAAK,CAACA,KAAK,CAACtT,IAAI,CAAC;UAC3B,IAAIw8E,SAAS,GAAG5qE,OAAO,GACnB4jE,MAAM,GACF,YAAY,GACZ,MAAM,GACVA,MAAM,GACF,YAAY,GACZ,MAAM;UACd,IAAI+O,GAAG,GAAG1mE,MAAM,IAAI,EAAE,eAAe,IAAI0N,MAAM,CAAC,GAC5CA,MAAM,CAAC6pD,UAAU,CAAC4O,eAAe,CAAC3wD,KAAK,CAAC,EAAEmpD,SAAS,CAAC,GACpDjxD,MAAM,CAACq5D,aAAa,CAACZ,eAAe,CAAC3wD,KAAK,CAAC,EAAEmpD,SAAS,CAAC;UAC3D+H,GAAG,CAAC36B,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;UACxCg/C,GAAG,CAAC9iB,SAAS,GAAG2H,IAAI,CAAC,UAAU0X,EAAE,EAAE;YAC/B,IAAI9K,MAAM,GAAGuO,GAAG,CAAC/jF,MAAM;YACvB,IAAI,CAACw1E,MAAM,EAAE;cACTr0C,OAAO,CAAC,IAAI,CAAC;cACb;YACJ;YACAq0C,MAAM,CAAC6O,KAAK,GAAG,EAAE1B,WAAW;YAC5BnN,MAAM,CAACjY,IAAI,GAAG,KAAK;YACnB,IAAI+mB,eAAe,GAAG9O,MAAM,CAACQ,QAAQ,CAAC11B,IAAI,CAACk1B,MAAM,CAAC;YAClD,IAAI+O,yBAAyB,GAAG/O,MAAM,CAACgP,kBAAkB;YACzD,IAAID,yBAAyB,EACzBA,yBAAyB,GAAGA,yBAAyB,CAACjkC,IAAI,CAACk1B,MAAM,CAAC;YACtE,IAAIiP,cAAc,GAAGjP,MAAM,CAACC,OAAO,CAACn1B,IAAI,CAACk1B,MAAM,CAAC;YAChD,IAAIkP,yBAAyB,GAAG,SAAAA,CAAA,EAAY;cAAE,MAAM,IAAI1nE,KAAK,CAAC,oBAAoB,CAAC;YAAE,CAAC;YACtF,IAAI2nE,sBAAsB,GAAG,SAAAA,CAAA,EAAY;cAAE,MAAM,IAAI3nE,KAAK,CAAC,oBAAoB,CAAC;YAAE,CAAC;YACnFw4D,MAAM,CAAChJ,KAAK,GAAGA,KAAK;YACpBgJ,MAAM,CAACE,IAAI,GAAGF,MAAM,CAACQ,QAAQ,GAAGR,MAAM,CAACgP,kBAAkB,GAAGhP,MAAM,CAACC,OAAO,GAAGiP,yBAAyB;YACtGlP,MAAM,CAACG,IAAI,GAAG/M,IAAI,CAAC7jC,MAAM,CAAC;YAC1BywC,MAAM,CAAClY,IAAI,GAAG,YAAY;cACtB,IAAI+H,KAAK,GAAG,IAAI;cAChB,IAAIuf,MAAM,GAAG,CAAC;cACd,OAAO,IAAI,CAACrqC,KAAK,CAAC,YAAY;gBAAE,OAAOqqC,MAAM,EAAE,GAAGvf,KAAK,CAAC2Q,QAAQ,CAAC,CAAC,GAAG3Q,KAAK,CAACqQ,IAAI,CAAC,CAAC;cAAE,CAAC,CAAC,CAACjgC,IAAI,CAAC,YAAY;gBAAE,OAAO4vB,KAAK;cAAE,CAAC,CAAC;YAC7H,CAAC;YACDmQ,MAAM,CAACj7B,KAAK,GAAG,UAAUrQ,QAAQ,EAAE;cAC/B,IAAI26C,gBAAgB,GAAG,IAAIj/E,OAAO,CAAC,UAAUk/E,gBAAgB,EAAEC,eAAe,EAAE;gBAC5ED,gBAAgB,GAAGlc,IAAI,CAACkc,gBAAgB,CAAC;gBACzCf,GAAG,CAAC36B,OAAO,GAAG81B,kBAAkB,CAAC6F,eAAe,CAAC;gBACjDvP,MAAM,CAACG,IAAI,GAAGoP,eAAe;gBAC7BvP,MAAM,CAACE,IAAI,GAAG,UAAU/pE,KAAK,EAAE;kBAC3B6pE,MAAM,CAACE,IAAI,GAAGF,MAAM,CAACQ,QAAQ,GAAGR,MAAM,CAACgP,kBAAkB,GAAGhP,MAAM,CAACC,OAAO,GAAGkP,sBAAsB;kBACnGG,gBAAgB,CAACn5E,KAAK,CAAC;gBAC3B,CAAC;cACL,CAAC,CAAC;cACF,IAAIq5E,eAAe,GAAG,SAAAA,CAAA,EAAY;gBAC9B,IAAIjB,GAAG,CAAC/jF,MAAM,EAAE;kBACZ,IAAI;oBACAkqC,QAAQ,CAAC,CAAC;kBACd,CAAC,CACD,OAAOhqC,GAAG,EAAE;oBACRs1E,MAAM,CAACG,IAAI,CAACz1E,GAAG,CAAC;kBACpB;gBACJ,CAAC,MACI;kBACDs1E,MAAM,CAACjY,IAAI,GAAG,IAAI;kBAClBiY,MAAM,CAACj7B,KAAK,GAAG,YAAY;oBAAE,MAAM,IAAIv9B,KAAK,CAAC,0BAA0B,CAAC;kBAAE,CAAC;kBAC3Ew4D,MAAM,CAACE,IAAI,CAAC,CAAC;gBACjB;cACJ,CAAC;cACDqO,GAAG,CAAC9iB,SAAS,GAAG2H,IAAI,CAAC,UAAU0X,EAAE,EAAE;gBAC/ByD,GAAG,CAAC9iB,SAAS,GAAG+jB,eAAe;gBAC/BA,eAAe,CAAC,CAAC;cACrB,CAAC,CAAC;cACFxP,MAAM,CAACQ,QAAQ,GAAGsO,eAAe;cACjC9O,MAAM,CAACgP,kBAAkB,GAAGD,yBAAyB;cACrD/O,MAAM,CAACC,OAAO,GAAGgP,cAAc;cAC/BO,eAAe,CAAC,CAAC;cACjB,OAAOH,gBAAgB;YAC3B,CAAC;YACD1jD,OAAO,CAACq0C,MAAM,CAAC;UACnB,CAAC,EAAEzwC,MAAM,CAAC;QACd,CAAC,CAAC;MACN;MACA,SAASkwC,KAAKA,CAACsO,SAAS,EAAE;QACtB,OAAO,UAAU1pE,OAAO,EAAE;UACtB,OAAO,IAAIjU,OAAO,CAAC,UAAUu7B,OAAO,EAAE4D,MAAM,EAAE;YAC1C5D,OAAO,GAAGynC,IAAI,CAACznC,OAAO,CAAC;YACvB,IAAIqrC,KAAK,GAAG3yD,OAAO,CAAC2yD,KAAK;cAAEnvD,MAAM,GAAGxD,OAAO,CAACwD,MAAM;cAAEzM,KAAK,GAAGiJ,OAAO,CAACjJ,KAAK;cAAEqkE,KAAK,GAAGp7D,OAAO,CAACo7D,KAAK;YAChG,IAAIgQ,eAAe,GAAGr0E,KAAK,KAAKy1D,QAAQ,GAAGpnE,SAAS,GAAG2R,KAAK;YAC5D,IAAIkC,KAAK,GAAGmiE,KAAK,CAACniE,KAAK;cAAE+f,KAAK,GAAGoiD,KAAK,CAACpiD,KAAK;YAC5C,IAAIiH,KAAK,GAAG0yC,KAAK,CAAC4U,WAAW,CAACzS,SAAS,CAAC;YACxC,IAAI5jD,MAAM,GAAGjY,KAAK,CAACswE,YAAY,GAAGtpD,KAAK,GAAGA,KAAK,CAAChnB,KAAK,CAACA,KAAK,CAACtT,IAAI,CAAC;YACjE,IAAI0lF,WAAW,GAAG1B,eAAe,CAAC3wD,KAAK,CAAC;YACxC,IAAIjiB,KAAK,KAAK,CAAC,EACX,OAAOuwB,OAAO,CAAC;cAAEnhC,MAAM,EAAE;YAAG,CAAC,CAAC;YAClC,IAAIujF,SAAS,EAAE;cACX,IAAIQ,GAAG,GAAG1mE,MAAM,GACZ0N,MAAM,CAACyc,MAAM,CAAC09C,WAAW,EAAED,eAAe,CAAC,GAC3Cl6D,MAAM,CAACo6D,UAAU,CAACD,WAAW,EAAED,eAAe,CAAC;cACnDlB,GAAG,CAAC9iB,SAAS,GAAG,UAAU3vD,KAAK,EAAE;gBAAE,OAAO6vB,OAAO,CAAC;kBAAEnhC,MAAM,EAAEsR,KAAK,CAAC8tE,MAAM,CAACp/E;gBAAO,CAAC,CAAC;cAAE,CAAC;cACrF+jF,GAAG,CAAC36B,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;YAC5C,CAAC,MACI;cACD,IAAIqgD,OAAO,GAAG,CAAC;cACf,IAAIC,KAAK,GAAGhoE,MAAM,IAAI,EAAE,eAAe,IAAI0N,MAAM,CAAC,GAC9CA,MAAM,CAAC6pD,UAAU,CAACsQ,WAAW,CAAC,GAC9Bn6D,MAAM,CAACq5D,aAAa,CAACc,WAAW,CAAC;cACrC,IAAII,QAAQ,GAAG,EAAE;cACjBD,KAAK,CAACpkB,SAAS,GAAG,UAAU3vD,KAAK,EAAE;gBAC/B,IAAIkkE,MAAM,GAAG6P,KAAK,CAACrlF,MAAM;gBACzB,IAAI,CAACw1E,MAAM,EACP,OAAOr0C,OAAO,CAAC;kBAAEnhC,MAAM,EAAEslF;gBAAS,CAAC,CAAC;gBACxCA,QAAQ,CAACnzE,IAAI,CAACkL,MAAM,GAAGm4D,MAAM,CAAC7pE,KAAK,GAAG6pE,MAAM,CAACf,UAAU,CAAC;gBACxD,IAAI,EAAE2Q,OAAO,KAAKx0E,KAAK,EACnB,OAAOuwB,OAAO,CAAC;kBAAEnhC,MAAM,EAAEslF;gBAAS,CAAC,CAAC;gBACxC9P,MAAM,CAACQ,QAAQ,CAAC,CAAC;cACrB,CAAC;cACDqP,KAAK,CAACj8B,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;YAC9C;UACJ,CAAC,CAAC;QACN,CAAC;MACL;MACA,OAAO;QACHvlC,IAAI,EAAEmvE,SAAS;QACfE,MAAM,EAAE2E,WAAW;QACnBhC,MAAM,EAAEA,MAAM;QACdjxB,OAAO,EAAE,SAAAA,CAAU4vB,EAAE,EAAE;UACnB,IAAI3D,KAAK,GAAG2D,EAAE,CAAC3D,KAAK;YAAEnrC,IAAI,GAAG8uC,EAAE,CAAC9uC,IAAI;UACpC,OAAO,IAAIz7B,OAAO,CAAC,UAAUu7B,OAAO,EAAE4D,MAAM,EAAE;YAC1C5D,OAAO,GAAGynC,IAAI,CAACznC,OAAO,CAAC;YACvB,IAAIrH,KAAK,GAAG0yC,KAAK,CAAC4U,WAAW,CAACzS,SAAS,CAAC;YACxC,IAAIvtE,MAAM,GAAGigC,IAAI,CAACjgC,MAAM;YACxB,IAAIpB,MAAM,GAAG,IAAIkD,KAAK,CAAC9B,MAAM,CAAC;YAC9B,IAAImkF,QAAQ,GAAG,CAAC;YAChB,IAAIC,aAAa,GAAG,CAAC;YACrB,IAAIzB,GAAG;YACP,IAAI0B,cAAc,GAAG,SAAAA,CAAUn0E,KAAK,EAAE;cAClC,IAAIyyE,GAAG,GAAGzyE,KAAK,CAAC8tE,MAAM;cACtB,IAAI,CAACp/E,MAAM,CAAC+jF,GAAG,CAAC2B,IAAI,CAAC,GAAG3B,GAAG,CAAC/jF,MAAM,KAAK,IAAI,EACvC;cACJ,IAAI,EAAEwlF,aAAa,KAAKD,QAAQ,EAC5BpkD,OAAO,CAACnhC,MAAM,CAAC;YACvB,CAAC;YACD,IAAIikF,YAAY,GAAG/E,kBAAkB,CAACn6C,MAAM,CAAC;YAC7C,KAAK,IAAI3Z,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhqB,MAAM,EAAE,EAAEgqB,CAAC,EAAE;cAC7B,IAAIzoB,GAAG,GAAG0+B,IAAI,CAACjW,CAAC,CAAC;cACjB,IAAIzoB,GAAG,IAAI,IAAI,EAAE;gBACbohF,GAAG,GAAGjqD,KAAK,CAAC1uB,GAAG,CAACi2B,IAAI,CAACjW,CAAC,CAAC,CAAC;gBACxB24D,GAAG,CAAC2B,IAAI,GAAGt6D,CAAC;gBACZ24D,GAAG,CAAC9iB,SAAS,GAAGwkB,cAAc;gBAC9B1B,GAAG,CAAC36B,OAAO,GAAG66B,YAAY;gBAC1B,EAAEsB,QAAQ;cACd;YACJ;YACA,IAAIA,QAAQ,KAAK,CAAC,EACdpkD,OAAO,CAACnhC,MAAM,CAAC;UACvB,CAAC,CAAC;QACN,CAAC;QACDoL,GAAG,EAAE,SAAAA,CAAU+kE,EAAE,EAAE;UACf,IAAI3D,KAAK,GAAG2D,EAAE,CAAC3D,KAAK;YAAE7pE,GAAG,GAAGwtE,EAAE,CAACxtE,GAAG;UAClC,OAAO,IAAIiD,OAAO,CAAC,UAAUu7B,OAAO,EAAE4D,MAAM,EAAE;YAC1C5D,OAAO,GAAGynC,IAAI,CAACznC,OAAO,CAAC;YACvB,IAAIrH,KAAK,GAAG0yC,KAAK,CAAC4U,WAAW,CAACzS,SAAS,CAAC;YACxC,IAAIoV,GAAG,GAAGjqD,KAAK,CAAC1uB,GAAG,CAACzI,GAAG,CAAC;YACxBohF,GAAG,CAAC9iB,SAAS,GAAG,UAAU3vD,KAAK,EAAE;cAAE,OAAO6vB,OAAO,CAAC7vB,KAAK,CAAC8tE,MAAM,CAACp/E,MAAM,CAAC;YAAE,CAAC;YACzE+jF,GAAG,CAAC36B,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;UAC5C,CAAC,CAAC;QACN,CAAC;QACDkwC,KAAK,EAAEA,KAAK,CAACsO,SAAS,CAAC;QACvB3O,UAAU,EAAEA,UAAU;QACtBlE,KAAK,EAAE,SAAAA,CAAUP,EAAE,EAAE;UACjB,IAAI8E,KAAK,GAAG9E,EAAE,CAAC8E,KAAK;YAAEzI,KAAK,GAAG2D,EAAE,CAAC3D,KAAK;UACtC,IAAI15D,KAAK,GAAGmiE,KAAK,CAACniE,KAAK;YAAE+f,KAAK,GAAGoiD,KAAK,CAACpiD,KAAK;UAC5C,OAAO,IAAIjtB,OAAO,CAAC,UAAUu7B,OAAO,EAAE4D,MAAM,EAAE;YAC1C,IAAIjL,KAAK,GAAG0yC,KAAK,CAAC4U,WAAW,CAACzS,SAAS,CAAC;YACxC,IAAI5jD,MAAM,GAAGjY,KAAK,CAACswE,YAAY,GAAGtpD,KAAK,GAAGA,KAAK,CAAChnB,KAAK,CAACA,KAAK,CAACtT,IAAI,CAAC;YACjE,IAAI0lF,WAAW,GAAG1B,eAAe,CAAC3wD,KAAK,CAAC;YACxC,IAAIkxD,GAAG,GAAGmB,WAAW,GAAGn6D,MAAM,CAAC2lD,KAAK,CAACwU,WAAW,CAAC,GAAGn6D,MAAM,CAAC2lD,KAAK,CAAC,CAAC;YAClEqT,GAAG,CAAC9iB,SAAS,GAAG2H,IAAI,CAAC,UAAU0X,EAAE,EAAE;cAAE,OAAOn/C,OAAO,CAACm/C,EAAE,CAAClB,MAAM,CAACp/E,MAAM,CAAC;YAAE,CAAC,CAAC;YACzE+jF,GAAG,CAAC36B,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;UAC5C,CAAC,CAAC;QACN;MACJ,CAAC;IACL;IACA,IAAIorC,EAAE,GAAG4S,aAAa,CAAClX,EAAE,EAAEiX,QAAQ,CAAC;MAAEjU,MAAM,GAAGsB,EAAE,CAACtB,MAAM;MAAE0U,SAAS,GAAGpT,EAAE,CAACoT,SAAS;IAClF,IAAIP,MAAM,GAAGnU,MAAM,CAACmU,MAAM,CAACv/E,GAAG,CAAC,UAAU+vE,WAAW,EAAE;MAAE,OAAOqQ,iBAAiB,CAACrQ,WAAW,CAAC;IAAE,CAAC,CAAC;IACjG,IAAImS,QAAQ,GAAG,CAAC,CAAC;IACjB3C,MAAM,CAACn8D,OAAO,CAAC,UAAUmwD,KAAK,EAAE;MAAE,OAAO2O,QAAQ,CAAC3O,KAAK,CAACx3E,IAAI,CAAC,GAAGw3E,KAAK;IAAE,CAAC,CAAC;IACzE,OAAO;MACH1rE,KAAK,EAAE,QAAQ;MACf6V,WAAW,EAAE0qD,EAAE,CAAC1qD,WAAW,CAACm/B,IAAI,CAACurB,EAAE,CAAC;MACpCmL,KAAK,EAAE,SAAAA,CAAUx3E,IAAI,EAAE;QACnB,IAAIQ,MAAM,GAAG2lF,QAAQ,CAACnmF,IAAI,CAAC;QAC3B,IAAI,CAACQ,MAAM,EACP,MAAM,IAAIgd,KAAK,CAAC,SAAS,GAAGxd,IAAI,GAAG,aAAa,CAAC;QACrD,OAAOmmF,QAAQ,CAACnmF,IAAI,CAAC;MACzB,CAAC;MACDomF,OAAO,EAAE,CAACvf,QAAQ;MAClBwf,OAAO,EAAExD,SAAS,CAACC,WAAW,CAAC;MAC/BzT,MAAM,EAAEA;IACZ,CAAC;EACL;EAEA,SAASiX,qBAAqBA,CAACC,SAAS,EAAEC,WAAW,EAAE;IACnD,OAAOA,WAAW,CAACr6D,MAAM,CAAC,UAAUs6D,IAAI,EAAE9V,EAAE,EAAE;MAC1C,IAAIv0C,MAAM,GAAGu0C,EAAE,CAACv0C,MAAM;MACtB,OAAQ28B,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE0tB,IAAI,CAAC,EAAErqD,MAAM,CAACqqD,IAAI,CAAC,CAAC;IACtD,CAAC,EAAEF,SAAS,CAAC;EACjB;EACA,SAASG,sBAAsBA,CAACF,WAAW,EAAEja,KAAK,EAAEoE,EAAE,EAAE2S,QAAQ,EAAE;IAC9D,IAAI7D,WAAW,GAAG9O,EAAE,CAAC8O,WAAW;IAAE9O,EAAE,CAACF,SAAS;IAC9C,IAAIkW,MAAM,GAAGL,qBAAqB,CAACjD,YAAY,CAAC9W,KAAK,EAAEkT,WAAW,EAAE6D,QAAQ,CAAC,EAAEkD,WAAW,CAACG,MAAM,CAAC;IAClG,OAAO;MACHA,MAAM,EAAEA;IACZ,CAAC;EACL;EACA,SAASC,wBAAwBA,CAACjW,EAAE,EAAE2S,QAAQ,EAAE;IAC5C,IAAIjX,EAAE,GAAGsE,EAAE,CAACkW,MAAM;IAClB,IAAIta,KAAK,GAAG+W,QAAQ,CAACjX,EAAE;IACvB,IAAI3F,MAAM,GAAGggB,sBAAsB,CAACra,EAAE,CAACya,YAAY,EAAEva,KAAK,EAAEF,EAAE,CAACmE,KAAK,EAAE8S,QAAQ,CAAC;IAC/EjX,EAAE,CAACsD,IAAI,GAAGjJ,MAAM,CAACigB,MAAM;IACvBta,EAAE,CAACmX,MAAM,CAACn8D,OAAO,CAAC,UAAUmwD,KAAK,EAAE;MAC/B,IAAIrI,SAAS,GAAGqI,KAAK,CAACx3E,IAAI;MAC1B,IAAIqsE,EAAE,CAACsD,IAAI,CAACN,MAAM,CAACmU,MAAM,CAACv8C,IAAI,CAAC,UAAU8/C,GAAG,EAAE;QAAE,OAAOA,GAAG,CAAC/mF,IAAI,KAAKmvE,SAAS;MAAE,CAAC,CAAC,EAAE;QAC/EqI,KAAK,CAAC7H,IAAI,GAAGtD,EAAE,CAACsD,IAAI,CAAC6H,KAAK,CAACrI,SAAS,CAAC;QACrC,IAAI9C,EAAE,CAAC8C,SAAS,CAAC,YAAY9C,EAAE,CAACphC,KAAK,EAAE;UACnCohC,EAAE,CAAC8C,SAAS,CAAC,CAACQ,IAAI,GAAG6H,KAAK,CAAC7H,IAAI;QACnC;MACJ;IACJ,CAAC,CAAC;EACN;EAEA,SAASqX,aAAaA,CAACrW,EAAE,EAAEsW,IAAI,EAAEC,UAAU,EAAE7E,QAAQ,EAAE;IACnD,IAAIhW,EAAE,GAAGsE,EAAE,CAACkW,MAAM;IAClBK,UAAU,CAAC7/D,OAAO,CAAC,UAAU8nD,SAAS,EAAE;MACpC,IAAIE,MAAM,GAAGgT,QAAQ,CAAClT,SAAS,CAAC;MAChC8X,IAAI,CAAC5/D,OAAO,CAAC,UAAUqyC,GAAG,EAAE;QACxB,IAAIytB,QAAQ,GAAGtsB,qBAAqB,CAACnB,GAAG,EAAEyV,SAAS,CAAC;QACpD,IAAI,CAACgY,QAAQ,IAAK,OAAO,IAAIA,QAAQ,IAAIA,QAAQ,CAACh7E,KAAK,KAAK1M,SAAU,EAAE;UACpE,IAAIi6D,GAAG,KAAK2S,EAAE,CAAC4T,WAAW,CAAC9tB,SAAS,IAAIuH,GAAG,YAAY2S,EAAE,CAAC4T,WAAW,EAAE;YACnE5lB,OAAO,CAACX,GAAG,EAAEyV,SAAS,EAAE;cACpBvjE,GAAG,EAAE,SAAAA,CAAA,EAAY;gBAAE,OAAO,IAAI,CAAC4rE,KAAK,CAACrI,SAAS,CAAC;cAAE,CAAC;cAClDn+C,GAAG,EAAE,SAAAA,CAAU7kB,KAAK,EAAE;gBAClBmoD,cAAc,CAAC,IAAI,EAAE6a,SAAS,EAAE;kBAAEhjE,KAAK,EAAEA,KAAK;kBAAEquD,QAAQ,EAAE,IAAI;kBAAED,YAAY,EAAE,IAAI;kBAAE4iB,UAAU,EAAE;gBAAK,CAAC,CAAC;cAC3G;YACJ,CAAC,CAAC;UACN,CAAC,MACI;YACDzjB,GAAG,CAACyV,SAAS,CAAC,GAAG,IAAI9C,EAAE,CAACphC,KAAK,CAACkkC,SAAS,EAAEE,MAAM,CAAC;UACpD;QACJ;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EACA,SAAS+X,eAAeA,CAACzW,EAAE,EAAEsW,IAAI,EAAE;IAC/B,IAAI5a,EAAE,GAAGsE,EAAE,CAACkW,MAAM;IAClBI,IAAI,CAAC5/D,OAAO,CAAC,UAAUqyC,GAAG,EAAE;MACxB,KAAK,IAAIv2D,GAAG,IAAIu2D,GAAG,EAAE;QACjB,IAAIA,GAAG,CAACv2D,GAAG,CAAC,YAAYkpE,EAAE,CAACphC,KAAK,EAC5B,OAAOyuB,GAAG,CAACv2D,GAAG,CAAC;MACvB;IACJ,CAAC,CAAC;EACN;EACA,SAASkkF,iBAAiBA,CAAC12D,CAAC,EAAEzsB,CAAC,EAAE;IAC7B,OAAOysB,CAAC,CAAC22D,IAAI,CAACr+D,OAAO,GAAG/kB,CAAC,CAACojF,IAAI,CAACr+D,OAAO;EAC1C;EACA,SAASs+D,YAAYA,CAAClb,EAAE,EAAEmb,UAAU,EAAEC,eAAe,EAAEliD,MAAM,EAAE;IAC3D,IAAImiD,YAAY,GAAGrb,EAAE,CAACa,SAAS;IAC/B,IAAIF,KAAK,GAAGX,EAAE,CAACY,kBAAkB,CAAC,WAAW,EAAEZ,EAAE,CAACsb,WAAW,EAAED,YAAY,CAAC;IAC5E1a,KAAK,CAAC5wC,MAAM,CAACqrD,eAAe,CAAC;IAC7Bza,KAAK,CAACO,WAAW,CAACrnE,KAAK,CAACq/B,MAAM,CAAC;IAC/B,IAAIqiD,iBAAiB,GAAG5a,KAAK,CAAC+T,OAAO,CAACjgC,IAAI,CAACksB,KAAK,CAAC;IACjD,IAAIwC,SAAS,GAAGhL,GAAG,CAACgL,SAAS,IAAIhL,GAAG;IACpC8C,QAAQ,CAAC,YAAY;MACjB9C,GAAG,CAACwI,KAAK,GAAGA,KAAK;MACjBxI,GAAG,CAACgL,SAAS,GAAGA,SAAS;MACzB,IAAIgY,UAAU,KAAK,CAAC,EAAE;QAClB3lD,IAAI,CAAC6lD,YAAY,CAAC,CAACrgE,OAAO,CAAC,UAAU8nD,SAAS,EAAE;UAC5C0Y,WAAW,CAACJ,eAAe,EAAEtY,SAAS,EAAEuY,YAAY,CAACvY,SAAS,CAAC,CAACgB,OAAO,EAAEuX,YAAY,CAACvY,SAAS,CAAC,CAACe,OAAO,CAAC;QAC7G,CAAC,CAAC;QACF0W,wBAAwB,CAACva,EAAE,EAAEob,eAAe,CAAC;QAC7C9iB,YAAY,CAAC8C,MAAM,CAAC,YAAY;UAAE,OAAO4E,EAAE,CAAC4U,EAAE,CAAC6G,QAAQ,CAACjY,IAAI,CAAC7C,KAAK,CAAC;QAAE,CAAC,CAAC,CAAC9mE,KAAK,CAAC0hF,iBAAiB,CAAC;MACpG,CAAC,MAEGG,sBAAsB,CAAC1b,EAAE,EAAEmb,UAAU,EAAExa,KAAK,EAAEya,eAAe,CAAC,CAACvhF,KAAK,CAAC0hF,iBAAiB,CAAC;IAC/F,CAAC,CAAC;EACN;EACA,SAASG,sBAAsBA,CAACpX,EAAE,EAAE6W,UAAU,EAAExa,KAAK,EAAEya,eAAe,EAAE;IACpE,IAAIpb,EAAE,GAAGsE,EAAE,CAACkW,MAAM;IAClB,IAAImB,KAAK,GAAG,EAAE;IACd,IAAI5mD,QAAQ,GAAGirC,EAAE,CAAC4b,SAAS;IAC3B,IAAIP,YAAY,GAAGrb,EAAE,CAACa,SAAS,GAAGgb,iBAAiB,CAAC7b,EAAE,EAAEA,EAAE,CAACE,KAAK,EAAEkb,eAAe,CAAC;IAClF,IAAIU,wBAAwB,GAAG,KAAK;IACpC,IAAIC,SAAS,GAAGhnD,QAAQ,CAAC9kB,MAAM,CAAC,UAAU0Y,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACsyD,IAAI,CAACr+D,OAAO,IAAIu+D,UAAU;IAAE,CAAC,CAAC;IACtFY,SAAS,CAAC/gE,OAAO,CAAC,UAAU4B,OAAO,EAAE;MACjC++D,KAAK,CAACr1E,IAAI,CAAC,YAAY;QACnB,IAAI01E,SAAS,GAAGX,YAAY;QAC5B,IAAIY,SAAS,GAAGr/D,OAAO,CAACq+D,IAAI,CAACjF,QAAQ;QACrCkG,0BAA0B,CAAClc,EAAE,EAAEgc,SAAS,EAAEZ,eAAe,CAAC;QAC1Dc,0BAA0B,CAAClc,EAAE,EAAEic,SAAS,EAAEb,eAAe,CAAC;QAC1DC,YAAY,GAAGrb,EAAE,CAACa,SAAS,GAAGob,SAAS;QACvC,IAAIE,IAAI,GAAGC,aAAa,CAACJ,SAAS,EAAEC,SAAS,CAAC;QAC9CE,IAAI,CAACljE,GAAG,CAAC+B,OAAO,CAAC,UAAUjb,KAAK,EAAE;UAC9By7E,WAAW,CAACJ,eAAe,EAAEr7E,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,CAAC+jE,OAAO,EAAE/jE,KAAK,CAAC,CAAC,CAAC,CAAC8jE,OAAO,CAAC;QAC9E,CAAC,CAAC;QACFsY,IAAI,CAACE,MAAM,CAACrhE,OAAO,CAAC,UAAUqhE,MAAM,EAAE;UAClC,IAAIA,MAAM,CAACC,QAAQ,EAAE;YACjB,MAAM,IAAIzoB,UAAU,CAAC0oB,OAAO,CAAC,0CAA0C,CAAC;UAC5E,CAAC,MACI;YACD,IAAIC,OAAO,GAAGpB,eAAe,CAAC7F,WAAW,CAAC8G,MAAM,CAAC1oF,IAAI,CAAC;YACtD0oF,MAAM,CAACpjE,GAAG,CAAC+B,OAAO,CAAC,UAAUq/B,GAAG,EAAE;cAAE,OAAOoiC,QAAQ,CAACD,OAAO,EAAEniC,GAAG,CAAC;YAAE,CAAC,CAAC;YACrEgiC,MAAM,CAACA,MAAM,CAACrhE,OAAO,CAAC,UAAUq/B,GAAG,EAAE;cACjCmiC,OAAO,CAACE,WAAW,CAACriC,GAAG,CAAC1mD,IAAI,CAAC;cAC7B8oF,QAAQ,CAACD,OAAO,EAAEniC,GAAG,CAAC;YAC1B,CAAC,CAAC;YACFgiC,MAAM,CAACrnC,GAAG,CAACh6B,OAAO,CAAC,UAAU2hE,OAAO,EAAE;cAAE,OAAOH,OAAO,CAACE,WAAW,CAACC,OAAO,CAAC;YAAE,CAAC,CAAC;UACnF;QACJ,CAAC,CAAC;QACF,IAAIC,cAAc,GAAGhgE,OAAO,CAACq+D,IAAI,CAAC2B,cAAc;QAChD,IAAIA,cAAc,IAAIhgE,OAAO,CAACq+D,IAAI,CAACr+D,OAAO,GAAGu+D,UAAU,EAAE;UACrDZ,wBAAwB,CAACva,EAAE,EAAEob,eAAe,CAAC;UAC7Cza,KAAK,CAACkV,eAAe,GAAG,CAAC,CAAC;UAC1BiG,wBAAwB,GAAG,IAAI;UAC/B,IAAIe,eAAe,GAAGzsB,YAAY,CAAC6rB,SAAS,CAAC;UAC7CE,IAAI,CAACnnC,GAAG,CAACh6B,OAAO,CAAC,UAAUmwD,KAAK,EAAE;YAC9B0R,eAAe,CAAC1R,KAAK,CAAC,GAAG6Q,SAAS,CAAC7Q,KAAK,CAAC;UAC7C,CAAC,CAAC;UACF4P,eAAe,CAAC/a,EAAE,EAAE,CAACA,EAAE,CAAC4T,WAAW,CAAC9tB,SAAS,CAAC,CAAC;UAC/C60B,aAAa,CAAC3a,EAAE,EAAE,CAACA,EAAE,CAAC4T,WAAW,CAAC9tB,SAAS,CAAC,EAAEtwB,IAAI,CAACqnD,eAAe,CAAC,EAAEA,eAAe,CAAC;UACrFlc,KAAK,CAACqC,MAAM,GAAG6Z,eAAe;UAC9B,IAAIC,uBAAuB,GAAGnrB,eAAe,CAACirB,cAAc,CAAC;UAC7D,IAAIE,uBAAuB,EAAE;YACzB5e,uBAAuB,CAAC,CAAC;UAC7B;UACA,IAAI6e,aAAa;UACjB,IAAIC,eAAe,GAAG1kB,YAAY,CAAC8C,MAAM,CAAC,YAAY;YAClD2hB,aAAa,GAAGH,cAAc,CAACjc,KAAK,CAAC;YACrC,IAAIoc,aAAa,EAAE;cACf,IAAID,uBAAuB,EAAE;gBACzB,IAAIG,WAAW,GAAGtjB,uBAAuB,CAACllB,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;gBAC1DsoC,aAAa,CAACnzC,IAAI,CAACqzC,WAAW,EAAEA,WAAW,CAAC;cAChD;YACJ;UACJ,CAAC,CAAC;UACF,OAAQF,aAAa,IAAI,OAAOA,aAAa,CAACnzC,IAAI,KAAK,UAAU,GAC7D0uB,YAAY,CAAChjC,OAAO,CAACynD,aAAa,CAAC,GAAGC,eAAe,CAACpzC,IAAI,CAAC,YAAY;YAAE,OAAOmzC,aAAa;UAAE,CAAC,CAAC;QACzG;MACJ,CAAC,CAAC;MACFpB,KAAK,CAACr1E,IAAI,CAAC,UAAU48D,QAAQ,EAAE;QAC3B,IAAI,CAAC4Y,wBAAwB,IAAI,CAACla,yBAAyB,EAAE;UACzD,IAAIqa,SAAS,GAAGr/D,OAAO,CAACq+D,IAAI,CAACjF,QAAQ;UACrCkH,mBAAmB,CAACjB,SAAS,EAAE/Y,QAAQ,CAAC;QAC5C;QACA6X,eAAe,CAAC/a,EAAE,EAAE,CAACA,EAAE,CAAC4T,WAAW,CAAC9tB,SAAS,CAAC,CAAC;QAC/C60B,aAAa,CAAC3a,EAAE,EAAE,CAACA,EAAE,CAAC4T,WAAW,CAAC9tB,SAAS,CAAC,EAAEka,EAAE,CAACsb,WAAW,EAAEtb,EAAE,CAACa,SAAS,CAAC;QAC3EF,KAAK,CAACqC,MAAM,GAAGhD,EAAE,CAACa,SAAS;MAC/B,CAAC,CAAC;IACN,CAAC,CAAC;IACF,SAASsc,QAAQA,CAAA,EAAG;MAChB,OAAOxB,KAAK,CAACpmF,MAAM,GAAG+iE,YAAY,CAAChjC,OAAO,CAACqmD,KAAK,CAACvH,KAAK,CAAC,CAAC,CAACzT,KAAK,CAACuC,QAAQ,CAAC,CAAC,CAACt5B,IAAI,CAACuzC,QAAQ,CAAC,GACpF7kB,YAAY,CAAChjC,OAAO,CAAC,CAAC;IAC9B;IACA,OAAO6nD,QAAQ,CAAC,CAAC,CAACvzC,IAAI,CAAC,YAAY;MAC/BwzC,mBAAmB,CAAC/B,YAAY,EAAED,eAAe,CAAC;IACtD,CAAC,CAAC;EACN;EACA,SAASgB,aAAaA,CAACJ,SAAS,EAAEC,SAAS,EAAE;IACzC,IAAIE,IAAI,GAAG;MACPnnC,GAAG,EAAE,EAAE;MACP/7B,GAAG,EAAE,EAAE;MACPojE,MAAM,EAAE;IACZ,CAAC;IACD,IAAIlR,KAAK;IACT,KAAKA,KAAK,IAAI6Q,SAAS,EAAE;MACrB,IAAI,CAACC,SAAS,CAAC9Q,KAAK,CAAC,EACjBgR,IAAI,CAACnnC,GAAG,CAAC1uC,IAAI,CAAC6kE,KAAK,CAAC;IAC5B;IACA,KAAKA,KAAK,IAAI8Q,SAAS,EAAE;MACrB,IAAIoB,MAAM,GAAGrB,SAAS,CAAC7Q,KAAK,CAAC;QAAEmS,MAAM,GAAGrB,SAAS,CAAC9Q,KAAK,CAAC;MACxD,IAAI,CAACkS,MAAM,EAAE;QACTlB,IAAI,CAACljE,GAAG,CAAC3S,IAAI,CAAC,CAAC6kE,KAAK,EAAEmS,MAAM,CAAC,CAAC;MAClC,CAAC,MACI;QACD,IAAIjB,MAAM,GAAG;UACT1oF,IAAI,EAAEw3E,KAAK;UACXoS,GAAG,EAAED,MAAM;UACXhB,QAAQ,EAAE,KAAK;UACftnC,GAAG,EAAE,EAAE;UACP/7B,GAAG,EAAE,EAAE;UACPojE,MAAM,EAAE;QACZ,CAAC;QACD,IACA,EAAE,IAAIgB,MAAM,CAACvZ,OAAO,CAACtU,OAAO,IAAI,EAAE,CAAC,KAAO,EAAE,IAAI8tB,MAAM,CAACxZ,OAAO,CAACtU,OAAO,IAAI,EAAE,CAAE,IACzE6tB,MAAM,CAACvZ,OAAO,CAAC2B,IAAI,KAAK6X,MAAM,CAACxZ,OAAO,CAAC2B,IAAI,IAAI,CAAChE,UAAW,EAC/D;UACG4a,MAAM,CAACC,QAAQ,GAAG,IAAI;UACtBH,IAAI,CAACE,MAAM,CAAC/1E,IAAI,CAAC+1E,MAAM,CAAC;QAC5B,CAAC,MACI;UACD,IAAImB,UAAU,GAAGH,MAAM,CAACnZ,SAAS;UACjC,IAAIuZ,UAAU,GAAGH,MAAM,CAACpZ,SAAS;UACjC,IAAIyY,OAAO,GAAG,KAAK,CAAC;UACpB,KAAKA,OAAO,IAAIa,UAAU,EAAE;YACxB,IAAI,CAACC,UAAU,CAACd,OAAO,CAAC,EACpBN,MAAM,CAACrnC,GAAG,CAAC1uC,IAAI,CAACq2E,OAAO,CAAC;UAChC;UACA,KAAKA,OAAO,IAAIc,UAAU,EAAE;YACxB,IAAIC,MAAM,GAAGF,UAAU,CAACb,OAAO,CAAC;cAAEgB,MAAM,GAAGF,UAAU,CAACd,OAAO,CAAC;YAC9D,IAAI,CAACe,MAAM,EACPrB,MAAM,CAACpjE,GAAG,CAAC3S,IAAI,CAACq3E,MAAM,CAAC,CAAC,KACvB,IAAID,MAAM,CAACtH,GAAG,KAAKuH,MAAM,CAACvH,GAAG,EAC9BiG,MAAM,CAACA,MAAM,CAAC/1E,IAAI,CAACq3E,MAAM,CAAC;UAClC;UACA,IAAItB,MAAM,CAACrnC,GAAG,CAACz/C,MAAM,GAAG,CAAC,IAAI8mF,MAAM,CAACpjE,GAAG,CAAC1jB,MAAM,GAAG,CAAC,IAAI8mF,MAAM,CAACA,MAAM,CAAC9mF,MAAM,GAAG,CAAC,EAAE;YAC5E4mF,IAAI,CAACE,MAAM,CAAC/1E,IAAI,CAAC+1E,MAAM,CAAC;UAC5B;QACJ;MACJ;IACJ;IACA,OAAOF,IAAI;EACf;EACA,SAASX,WAAWA,CAACtY,QAAQ,EAAEJ,SAAS,EAAEgB,OAAO,EAAED,OAAO,EAAE;IACxD,IAAI51C,KAAK,GAAGi1C,QAAQ,CAAClD,EAAE,CAAC4d,iBAAiB,CAAC9a,SAAS,EAAEgB,OAAO,CAACtU,OAAO,GAChE;MAAEA,OAAO,EAAEsU,OAAO,CAACtU,OAAO;MAAE6nB,aAAa,EAAEvT,OAAO,CAAC2B;IAAK,CAAC,GACzD;MAAE4R,aAAa,EAAEvT,OAAO,CAAC2B;IAAK,CAAC,CAAC;IACpC5B,OAAO,CAAC7oD,OAAO,CAAC,UAAUq/B,GAAG,EAAE;MAAE,OAAOoiC,QAAQ,CAACxuD,KAAK,EAAEosB,GAAG,CAAC;IAAE,CAAC,CAAC;IAChE,OAAOpsB,KAAK;EAChB;EACA,SAASmvD,mBAAmBA,CAACnB,SAAS,EAAE/Y,QAAQ,EAAE;IAC9C1tC,IAAI,CAACymD,SAAS,CAAC,CAACjhE,OAAO,CAAC,UAAU8nD,SAAS,EAAE;MACzC,IAAI,CAACI,QAAQ,CAAClD,EAAE,CAACoX,gBAAgB,CAACyG,QAAQ,CAAC/a,SAAS,CAAC,EAAE;QACnD0Y,WAAW,CAACtY,QAAQ,EAAEJ,SAAS,EAAEmZ,SAAS,CAACnZ,SAAS,CAAC,CAACgB,OAAO,EAAEmY,SAAS,CAACnZ,SAAS,CAAC,CAACe,OAAO,CAAC;MAChG;IACJ,CAAC,CAAC;EACN;EACA,SAASqZ,mBAAmBA,CAACjB,SAAS,EAAE/Y,QAAQ,EAAE;IAC9C,EAAE,CAACnrE,KAAK,CAACguD,IAAI,CAACmd,QAAQ,CAAClD,EAAE,CAACoX,gBAAgB,CAAC,CAACp8D,OAAO,CAAC,UAAU8iE,SAAS,EAAE;MACrE,OAAO7B,SAAS,CAAC6B,SAAS,CAAC,IAAI,IAAI,IAAI5a,QAAQ,CAAClD,EAAE,CAAC+d,iBAAiB,CAACD,SAAS,CAAC;IACnF,CAAC,CAAC;EACN;EACA,SAASrB,QAAQA,CAACxuD,KAAK,EAAEosB,GAAG,EAAE;IAC1BpsB,KAAK,CAAC+vD,WAAW,CAAC3jC,GAAG,CAAC1mD,IAAI,EAAE0mD,GAAG,CAACmV,OAAO,EAAE;MAAE2Z,MAAM,EAAE9uB,GAAG,CAAC8uB,MAAM;MAAEsO,UAAU,EAAEp9B,GAAG,CAACoqB;IAAM,CAAC,CAAC;EAC3F;EACA,SAASoX,iBAAiBA,CAAC7b,EAAE,EAAEE,KAAK,EAAE+W,QAAQ,EAAE;IAC5C,IAAIoE,YAAY,GAAG,CAAC,CAAC;IACrB,IAAI4C,YAAY,GAAGlmF,KAAK,CAACmoE,KAAK,CAACkX,gBAAgB,EAAE,CAAC,CAAC;IACnD6G,YAAY,CAACjjE,OAAO,CAAC,UAAU8iE,SAAS,EAAE;MACtC,IAAI7vD,KAAK,GAAGgpD,QAAQ,CAAC1B,WAAW,CAACuI,SAAS,CAAC;MAC3C,IAAItuB,OAAO,GAAGvhC,KAAK,CAACuhC,OAAO;MAC3B,IAAIsU,OAAO,GAAGqS,eAAe,CAACE,eAAe,CAAC7mB,OAAO,CAAC,EAAEA,OAAO,IAAI,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAACvhC,KAAK,CAACopD,aAAa,EAAE7nB,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE,IAAI,CAAC;MACzJ,IAAIqU,OAAO,GAAG,EAAE;MAChB,KAAK,IAAI3a,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGj7B,KAAK,CAACupD,UAAU,CAACjiF,MAAM,EAAE,EAAE2zD,CAAC,EAAE;QAC9C,IAAIg1B,QAAQ,GAAGjwD,KAAK,CAAChnB,KAAK,CAACgnB,KAAK,CAACupD,UAAU,CAACtuB,CAAC,CAAC,CAAC;QAC/CsG,OAAO,GAAG0uB,QAAQ,CAAC1uB,OAAO;QAC1B,IAAIvoD,KAAK,GAAGkvE,eAAe,CAAC+H,QAAQ,CAACvqF,IAAI,EAAE67D,OAAO,EAAE,CAAC,CAAC0uB,QAAQ,CAAC/U,MAAM,EAAE,CAAC,CAAC+U,QAAQ,CAACzG,UAAU,EAAE,KAAK,EAAEjoB,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE,KAAK,CAAC;QACnJqU,OAAO,CAACv9D,IAAI,CAACW,KAAK,CAAC;MACvB;MACAo0E,YAAY,CAACyC,SAAS,CAAC,GAAGxH,iBAAiB,CAACwH,SAAS,EAAEha,OAAO,EAAED,OAAO,CAAC;IAC5E,CAAC,CAAC;IACF,OAAOwX,YAAY;EACvB;EACA,SAAS8C,gBAAgBA,CAAC7Z,EAAE,EAAEpE,KAAK,EAAE+W,QAAQ,EAAE;IAC3C,IAAIjX,EAAE,GAAGsE,EAAE,CAACkW,MAAM;IAClBxa,EAAE,CAACoe,KAAK,GAAGle,KAAK,CAACtjD,OAAO,GAAG,EAAE;IAC7B,IAAIy+D,YAAY,GAAGrb,EAAE,CAACa,SAAS,GAAGgb,iBAAiB,CAAC7b,EAAE,EAAEE,KAAK,EAAE+W,QAAQ,CAAC;IACxEjX,EAAE,CAACsb,WAAW,GAAGvjF,KAAK,CAACmoE,KAAK,CAACkX,gBAAgB,EAAE,CAAC,CAAC;IACjDuD,aAAa,CAAC3a,EAAE,EAAE,CAACA,EAAE,CAAC4H,UAAU,CAAC,EAAEpyC,IAAI,CAAC6lD,YAAY,CAAC,EAAEA,YAAY,CAAC;EACxE;EACA,SAASgD,qBAAqBA,CAACre,EAAE,EAAEiX,QAAQ,EAAE;IACzC,IAAIqH,eAAe,GAAGzC,iBAAiB,CAAC7b,EAAE,EAAEA,EAAE,CAACE,KAAK,EAAE+W,QAAQ,CAAC;IAC/D,IAAIkF,IAAI,GAAGC,aAAa,CAACkC,eAAe,EAAEte,EAAE,CAACa,SAAS,CAAC;IACvD,OAAO,EAAEsb,IAAI,CAACljE,GAAG,CAAC1jB,MAAM,IAAI4mF,IAAI,CAACE,MAAM,CAACzhD,IAAI,CAAC,UAAUjiC,EAAE,EAAE;MAAE,OAAOA,EAAE,CAACsgB,GAAG,CAAC1jB,MAAM,IAAIoD,EAAE,CAAC0jF,MAAM,CAAC9mF,MAAM;IAAE,CAAC,CAAC,CAAC;EAC9G;EACA,SAAS2mF,0BAA0BA,CAAC5X,EAAE,EAAEtB,MAAM,EAAEE,QAAQ,EAAE;IACtD,IAAIlD,EAAE,GAAGsE,EAAE,CAACkW,MAAM;IAClB,IAAIva,UAAU,GAAGiD,QAAQ,CAAClD,EAAE,CAACoX,gBAAgB;IAC7C,KAAK,IAAI73D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0gD,UAAU,CAAC1qE,MAAM,EAAE,EAAEgqB,CAAC,EAAE;MACxC,IAAIu+D,SAAS,GAAG7d,UAAU,CAAC1gD,CAAC,CAAC;MAC7B,IAAI0O,KAAK,GAAGi1C,QAAQ,CAACqS,WAAW,CAACuI,SAAS,CAAC;MAC3C9d,EAAE,CAACue,UAAU,GAAG,QAAQ,IAAItwD,KAAK;MACjC,KAAK,IAAIi7B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGj7B,KAAK,CAACupD,UAAU,CAACjiF,MAAM,EAAE,EAAE2zD,CAAC,EAAE;QAC9C,IAAIqjB,SAAS,GAAGt+C,KAAK,CAACupD,UAAU,CAACtuB,CAAC,CAAC;QACnC,IAAIsG,OAAO,GAAGvhC,KAAK,CAAChnB,KAAK,CAACslE,SAAS,CAAC,CAAC/c,OAAO;QAC5C,IAAIgvB,SAAS,GAAG,OAAOhvB,OAAO,KAAK,QAAQ,GAAGA,OAAO,GAAG,GAAG,GAAGz3D,KAAK,CAACy3D,OAAO,CAAC,CAACp5D,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG;QAC5F,IAAI4sE,MAAM,CAAC8a,SAAS,CAAC,EAAE;UACnB,IAAIW,SAAS,GAAGzb,MAAM,CAAC8a,SAAS,CAAC,CAAC5Z,SAAS,CAACsa,SAAS,CAAC;UACtD,IAAIC,SAAS,EAAE;YACXA,SAAS,CAAC9qF,IAAI,GAAG44E,SAAS;YAC1B,OAAOvJ,MAAM,CAAC8a,SAAS,CAAC,CAAC5Z,SAAS,CAACsa,SAAS,CAAC;YAC7Cxb,MAAM,CAAC8a,SAAS,CAAC,CAAC5Z,SAAS,CAACqI,SAAS,CAAC,GAAGkS,SAAS;UACtD;QACJ;MACJ;IACJ;IACA,IAAI,OAAO/c,SAAS,KAAK,WAAW,IAAI,QAAQ,CAAC7qD,IAAI,CAAC6qD,SAAS,CAACC,SAAS,CAAC,IACtE,CAAC,mBAAmB,CAAC9qD,IAAI,CAAC6qD,SAAS,CAACC,SAAS,CAAC,IAC9CzU,OAAO,CAACwxB,iBAAiB,IAAIxxB,OAAO,YAAYA,OAAO,CAACwxB,iBAAiB,IACzE,EAAE,CAAC71D,MAAM,CAAC64C,SAAS,CAACC,SAAS,CAACrpE,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE;MAChE0nE,EAAE,CAACue,UAAU,GAAG,KAAK;IACzB;EACJ;EACA,SAASI,gBAAgBA,CAACC,iBAAiB,EAAE;IACzC,OAAOA,iBAAiB,CAACvmF,KAAK,CAAC,GAAG,CAAC,CAACT,GAAG,CAAC,UAAUqP,KAAK,EAAE43E,QAAQ,EAAE;MAC/D53E,KAAK,GAAGA,KAAK,CAAC63E,IAAI,CAAC,CAAC;MACpB,IAAInrF,IAAI,GAAGsT,KAAK,CAACuf,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC;MAC5C,IAAIgpC,OAAO,GAAG,KAAK,CAAC34C,IAAI,CAACljB,IAAI,CAAC,GAAGA,IAAI,CAAC2E,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAACD,KAAK,CAAC,GAAG,CAAC,GAAG1E,IAAI;MAC9E,OAAOwiF,eAAe,CAACxiF,IAAI,EAAE67D,OAAO,IAAI,IAAI,EAAE,IAAI,CAAC34C,IAAI,CAAC5P,KAAK,CAAC,EAAE,IAAI,CAAC4P,IAAI,CAAC5P,KAAK,CAAC,EAAE,MAAM,CAAC4P,IAAI,CAAC5P,KAAK,CAAC,EAAE++C,OAAO,CAACwJ,OAAO,CAAC,EAAEqvB,QAAQ,KAAK,CAAC,CAAC;IAC3I,CAAC,CAAC;EACN;EAEA,IAAIE,OAAO,GAAK,YAAY;IACxB,SAASA,OAAOA,CAAA,EAAG,CACnB;IACAA,OAAO,CAACj5B,SAAS,CAACk5B,gBAAgB,GAAG,UAAUjgD,MAAM,EAAEkgD,SAAS,EAAE;MAC9DzpD,IAAI,CAACuJ,MAAM,CAAC,CAAC/jB,OAAO,CAAC,UAAU8nD,SAAS,EAAE;QACtC,IAAI/jC,MAAM,CAAC+jC,SAAS,CAAC,KAAK,IAAI,EAAE;UAC5B,IAAIe,OAAO,GAAG8a,gBAAgB,CAAC5/C,MAAM,CAAC+jC,SAAS,CAAC,CAAC;UACjD,IAAIgB,OAAO,GAAGD,OAAO,CAACuQ,KAAK,CAAC,CAAC;UAC7B,IAAItQ,OAAO,CAACW,KAAK,EACb,MAAM,IAAI5Q,UAAU,CAACiV,MAAM,CAAC,oCAAoC,CAAC;UACrEjF,OAAO,CAAC7oD,OAAO,CAAC,UAAUq/B,GAAG,EAAE;YAC3B,IAAIA,GAAG,CAACorB,IAAI,EACR,MAAM,IAAI5R,UAAU,CAACiV,MAAM,CAAC,sDAAsD,CAAC;YACvF,IAAI,CAACzuB,GAAG,CAACmV,OAAO,EACZ,MAAM,IAAIqE,UAAU,CAACiV,MAAM,CAAC,sDAAsD,CAAC;UAC3F,CAAC,CAAC;UACFmW,SAAS,CAACnc,SAAS,CAAC,GAAGwT,iBAAiB,CAACxT,SAAS,EAAEgB,OAAO,EAAED,OAAO,CAAC;QACzE;MACJ,CAAC,CAAC;IACN,CAAC;IACDkb,OAAO,CAACj5B,SAAS,CAAC/mB,MAAM,GAAG,UAAUA,MAAM,EAAE;MACzC,IAAIihC,EAAE,GAAG,IAAI,CAACA,EAAE;MAChB,IAAI,CAACib,IAAI,CAACiE,YAAY,GAAG,IAAI,CAACjE,IAAI,CAACiE,YAAY,GAC3C9xB,MAAM,CAAC,IAAI,CAAC6tB,IAAI,CAACiE,YAAY,EAAEngD,MAAM,CAAC,GACtCA,MAAM;MACV,IAAIhK,QAAQ,GAAGirC,EAAE,CAAC4b,SAAS;MAC3B,IAAIuD,UAAU,GAAG,CAAC,CAAC;MACnB,IAAInJ,QAAQ,GAAG,CAAC,CAAC;MACjBjhD,QAAQ,CAAC/Z,OAAO,CAAC,UAAU4B,OAAO,EAAE;QAChCwwC,MAAM,CAAC+xB,UAAU,EAAEviE,OAAO,CAACq+D,IAAI,CAACiE,YAAY,CAAC;QAC7ClJ,QAAQ,GAAIp5D,OAAO,CAACq+D,IAAI,CAACjF,QAAQ,GAAG,CAAC,CAAE;QACvCp5D,OAAO,CAACoiE,gBAAgB,CAACG,UAAU,EAAEnJ,QAAQ,CAAC;MAClD,CAAC,CAAC;MACFhW,EAAE,CAACa,SAAS,GAAGmV,QAAQ;MACvB+E,eAAe,CAAC/a,EAAE,EAAE,CAACA,EAAE,CAAC4H,UAAU,EAAE5H,EAAE,EAAEA,EAAE,CAAC4T,WAAW,CAAC9tB,SAAS,CAAC,CAAC;MAClE60B,aAAa,CAAC3a,EAAE,EAAE,CAACA,EAAE,CAAC4H,UAAU,EAAE5H,EAAE,EAAEA,EAAE,CAAC4T,WAAW,CAAC9tB,SAAS,EAAE,IAAI,CAACm1B,IAAI,CAAC9D,MAAM,CAAC,EAAE3hD,IAAI,CAACwgD,QAAQ,CAAC,EAAEA,QAAQ,CAAC;MAC5GhW,EAAE,CAACsb,WAAW,GAAG9lD,IAAI,CAACwgD,QAAQ,CAAC;MAC/B,OAAO,IAAI;IACf,CAAC;IACD+I,OAAO,CAACj5B,SAAS,CAACs5B,OAAO,GAAG,UAAUC,eAAe,EAAE;MACnD,IAAI,CAACpE,IAAI,CAAC2B,cAAc,GAAGlnB,eAAe,CAAC,IAAI,CAACulB,IAAI,CAAC2B,cAAc,IAAIjoB,GAAG,EAAE0qB,eAAe,CAAC;MAC5F,OAAO,IAAI;IACf,CAAC;IACD,OAAON,OAAO;EAClB,CAAC,CAAC,CAAE;EAEJ,SAASO,wBAAwBA,CAACtf,EAAE,EAAE;IAClC,OAAOyH,oBAAoB,CAACsX,OAAO,CAACj5B,SAAS,EAAE,SAASi5B,OAAOA,CAACQ,aAAa,EAAE;MAC3E,IAAI,CAACvf,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACib,IAAI,GAAG;QACRr+D,OAAO,EAAE2iE,aAAa;QACtBL,YAAY,EAAE,IAAI;QAClBlJ,QAAQ,EAAE,CAAC,CAAC;QACZmB,MAAM,EAAE,CAAC,CAAC;QACVyF,cAAc,EAAE;MACpB,CAAC;IACL,CAAC,CAAC;EACN;EAEA,SAAS4C,eAAeA,CAACpb,SAAS,EAAEgP,WAAW,EAAE;IAC7C,IAAIqM,SAAS,GAAGrb,SAAS,CAAC,YAAY,CAAC;IACvC,IAAI,CAACqb,SAAS,EAAE;MACZA,SAAS,GAAGrb,SAAS,CAAC,YAAY,CAAC,GAAG,IAAIsb,OAAO,CAAC3d,UAAU,EAAE;QAC1D4d,MAAM,EAAE,EAAE;QACVvb,SAAS,EAAEA,SAAS;QACpBgP,WAAW,EAAEA;MACjB,CAAC,CAAC;MACFqM,SAAS,CAAC7iE,OAAO,CAAC,CAAC,CAAC,CAACmiB,MAAM,CAAC;QAAE6gD,OAAO,EAAE;MAAO,CAAC,CAAC;IACpD;IACA,OAAOH,SAAS,CAACtU,KAAK,CAAC,SAAS,CAAC;EACrC;EACA,SAAS0U,kBAAkBA,CAACzb,SAAS,EAAE;IACnC,OAAOA,SAAS,IAAI,OAAOA,SAAS,CAAC0b,SAAS,KAAK,UAAU;EACjE;EACA,SAASC,gBAAgBA,CAACzb,EAAE,EAAE;IAC1B,IAAIF,SAAS,GAAGE,EAAE,CAACF,SAAS;MAAEgP,WAAW,GAAG9O,EAAE,CAAC8O,WAAW;IAC1D,OAAOyM,kBAAkB,CAACzb,SAAS,CAAC,GAC9BrqE,OAAO,CAACu7B,OAAO,CAAC8uC,SAAS,CAAC0b,SAAS,CAAC,CAAC,CAAC,CAACl2C,IAAI,CAAC,UAAUo2C,KAAK,EAAE;MAC3D,OAAOA,KAAK,CACPpoF,GAAG,CAAC,UAAUy8B,IAAI,EAAE;QAAE,OAAOA,IAAI,CAAC1gC,IAAI;MAAE,CAAC,CAAC,CAC1Csc,MAAM,CAAC,UAAUtc,IAAI,EAAE;QAAE,OAAOA,IAAI,KAAKouE,UAAU;MAAE,CAAC,CAAC;IAChE,CAAC,CAAC,GACAyd,eAAe,CAACpb,SAAS,EAAEgP,WAAW,CAAC,CAACzO,YAAY,CAAC,CAAC,CAACkI,WAAW,CAAC,CAAC;EAC9E;EACA,SAASoT,kBAAkBA,CAAC3b,EAAE,EAAE3wE,IAAI,EAAE;IAClC,IAAIywE,SAAS,GAAGE,EAAE,CAACF,SAAS;MAAEgP,WAAW,GAAG9O,EAAE,CAAC8O,WAAW;IAC1D,CAACyM,kBAAkB,CAACzb,SAAS,CAAC,IAC1BzwE,IAAI,KAAKouE,UAAU,IACnByd,eAAe,CAACpb,SAAS,EAAEgP,WAAW,CAAC,CAAC1sC,GAAG,CAAC;MAAE/yC,IAAI,EAAEA;IAAK,CAAC,CAAC,CAACkG,KAAK,CAAC86D,GAAG,CAAC;EAC9E;EACA,SAASurB,kBAAkBA,CAAC5b,EAAE,EAAE3wE,IAAI,EAAE;IAClC,IAAIywE,SAAS,GAAGE,EAAE,CAACF,SAAS;MAAEgP,WAAW,GAAG9O,EAAE,CAAC8O,WAAW;IAC1D,CAACyM,kBAAkB,CAACzb,SAAS,CAAC,IAC1BzwE,IAAI,KAAKouE,UAAU,IACnByd,eAAe,CAACpb,SAAS,EAAEgP,WAAW,CAAC,CAAC75C,MAAM,CAAC5lC,IAAI,CAAC,CAACkG,KAAK,CAAC86D,GAAG,CAAC;EACvE;EAEA,SAASwrB,GAAGA,CAAC9/C,EAAE,EAAE;IACb,OAAO46B,QAAQ,CAAC,YAAY;MACxB9C,GAAG,CAACiI,UAAU,GAAG,IAAI;MACrB,OAAO//B,EAAE,CAAC,CAAC;IACf,CAAC,CAAC;EACN;EAEA,SAAS+/C,QAAQA,CAAA,EAAG;IAChB,IAAIC,QAAQ,GAAG,CAAC3e,SAAS,CAAC4e,aAAa,IACnC,UAAU,CAACzpE,IAAI,CAAC6qD,SAAS,CAACC,SAAS,CAAC,IACpC,CAAC,gBAAgB,CAAC9qD,IAAI,CAAC6qD,SAAS,CAACC,SAAS,CAAC;IAC/C,IAAI,CAAC0e,QAAQ,IAAI,CAACjc,SAAS,CAAC0b,SAAS,EACjC,OAAO/lF,OAAO,CAACu7B,OAAO,CAAC,CAAC;IAC5B,IAAIirD,UAAU;IACd,OAAO,IAAIxmF,OAAO,CAAC,UAAUu7B,OAAO,EAAE;MAClC,IAAIkrD,MAAM,GAAG,SAAAA,CAAA,EAAY;QAAE,OAAOpc,SAAS,CAAC0b,SAAS,CAAC,CAAC,CAAC3lB,OAAO,CAAC7kC,OAAO,CAAC;MAAE,CAAC;MAC3EirD,UAAU,GAAGE,WAAW,CAACD,MAAM,EAAE,GAAG,CAAC;MACrCA,MAAM,CAAC,CAAC;IACZ,CAAC,CAAC,CAACrmB,OAAO,CAAC,YAAY;MAAE,OAAOumB,aAAa,CAACH,UAAU,CAAC;IAAE,CAAC,CAAC;EACjE;EAEA,SAASI,SAASA,CAAC3gB,EAAE,EAAE;IACnB,IAAI7rC,KAAK,GAAG6rC,EAAE,CAACjH,MAAM;IACrB,IAAIqL,SAAS,GAAGpE,EAAE,CAACmE,KAAK,CAACC,SAAS;IAClC,IAAIjwC,KAAK,CAACosC,aAAa,IAAIP,EAAE,CAACE,KAAK,EAC/B,OAAO/rC,KAAK,CAACusC,cAAc,CAAC92B,IAAI,CAAC,YAAY;MAAE,OAAOzV,KAAK,CAACmsC,WAAW,GACnElC,SAAS,CAACjqC,KAAK,CAACmsC,WAAW,CAAC,GAC5BN,EAAE;IAAE,CAAC,CAAC;IACdpO,KAAK,KAAKz9B,KAAK,CAACysD,aAAa,CAAChoB,YAAY,GAAG1G,iBAAiB,CAAC,CAAC,CAAC;IACjE/9B,KAAK,CAACosC,aAAa,GAAG,IAAI;IAC1BpsC,KAAK,CAACmsC,WAAW,GAAG,IAAI;IACxBnsC,KAAK,CAACgsC,YAAY,GAAG,KAAK;IAC1B,IAAIygB,aAAa,GAAGzsD,KAAK,CAACysD,aAAa;IACvC,SAASC,gBAAgBA,CAAA,EAAG;MACxB,IAAI1sD,KAAK,CAACysD,aAAa,KAAKA,aAAa,EACrC,MAAM,IAAI/sB,UAAU,CAACjB,cAAc,CAAC,yBAAyB,CAAC;IACtE;IACA,IAAIkuB,cAAc,GAAG3sD,KAAK,CAAC4sD,cAAc;MACzCC,kBAAkB,GAAG,IAAI;MAAEC,UAAU,GAAG,KAAK;IAC7C,OAAO3oB,YAAY,CAACyC,IAAI,CAAC,CAAC6lB,aAAa,EAAE,CAAC,OAAOlf,SAAS,KAAK,WAAW,GAAGpJ,YAAY,CAAChjC,OAAO,CAAC,CAAC,GAAG8qD,QAAQ,CAAC,CAAC,EAAEx2C,IAAI,CAAC,YAAY;MAAE,OAAO,IAAI0uB,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAChL2nD,gBAAgB,CAAC,CAAC;QAClB,IAAI,CAACzc,SAAS,EACV,MAAM,IAAIvQ,UAAU,CAACd,UAAU,CAAC,CAAC;QACrC,IAAImuB,MAAM,GAAGlhB,EAAE,CAACrsE,IAAI;QACpB,IAAIukF,GAAG,GAAG/jD,KAAK,CAACgtD,UAAU,GACtB/c,SAAS,CAAC72D,IAAI,CAAC2zE,MAAM,CAAC,GACtB9c,SAAS,CAAC72D,IAAI,CAAC2zE,MAAM,EAAEh5E,IAAI,CAAC6P,KAAK,CAACioD,EAAE,CAACoe,KAAK,GAAG,EAAE,CAAC,CAAC;QACrD,IAAI,CAAClG,GAAG,EACJ,MAAM,IAAIrkB,UAAU,CAACd,UAAU,CAAC,CAAC;QACrCmlB,GAAG,CAAC36B,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;QACxCg/C,GAAG,CAACkJ,SAAS,GAAGrkB,IAAI,CAACiD,EAAE,CAACqhB,cAAc,CAAC;QACvCnJ,GAAG,CAACoJ,eAAe,GAAGvkB,IAAI,CAAC,UAAU3kB,CAAC,EAAE;UACpC4oC,kBAAkB,GAAG9I,GAAG,CAAC5iE,WAAW;UACpC,IAAI6e,KAAK,CAACgtD,UAAU,IAAI,CAACnhB,EAAE,CAACQ,QAAQ,CAAC+gB,YAAY,EAAE;YAC/CrJ,GAAG,CAAC36B,OAAO,GAAG+1B,cAAc;YAC5B0N,kBAAkB,CAACrL,KAAK,CAAC,CAAC;YAC1BuC,GAAG,CAAC/jF,MAAM,CAACipD,KAAK,CAAC,CAAC;YAClB,IAAIokC,MAAM,GAAGpd,SAAS,CAACqd,cAAc,CAACP,MAAM,CAAC;YAC7CM,MAAM,CAACpsB,SAAS,GAAGosB,MAAM,CAACjkC,OAAO,GAAGwf,IAAI,CAAC,YAAY;cACjD7jC,MAAM,CAAC,IAAI26B,UAAU,CAAC6tB,cAAc,CAAC,WAAW,GAAGR,MAAM,GAAG,eAAe,CAAC,CAAC;YACjF,CAAC,CAAC;UACN,CAAC,MACI;YACDF,kBAAkB,CAACzjC,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;YACvD,IAAIyoD,MAAM,GAAGvpC,CAAC,CAAC+iC,UAAU,GAAGjzE,IAAI,CAAC05E,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,GAAGxpC,CAAC,CAAC+iC,UAAU;YAC9D8F,UAAU,GAAGU,MAAM,GAAG,CAAC;YACvB3hB,EAAE,CAACwa,MAAM,CAACta,KAAK,GAAGgY,GAAG,CAAC/jF,MAAM;YAC5B+mF,YAAY,CAAClb,EAAE,EAAE2hB,MAAM,GAAG,EAAE,EAAEX,kBAAkB,EAAE9nD,MAAM,CAAC;UAC7D;QACJ,CAAC,EAAEA,MAAM,CAAC;QACVg/C,GAAG,CAAC9iB,SAAS,GAAG2H,IAAI,CAAC,YAAY;UAC7BikB,kBAAkB,GAAG,IAAI;UACzB,IAAI9gB,KAAK,GAAGF,EAAE,CAACwa,MAAM,CAACta,KAAK,GAAGgY,GAAG,CAAC/jF,MAAM;UACxC,IAAIijF,gBAAgB,GAAGr/E,KAAK,CAACmoE,KAAK,CAACkX,gBAAgB,CAAC;UACpD,IAAIA,gBAAgB,CAAC7hF,MAAM,GAAG,CAAC,EAC3B,IAAI;YACA,IAAI0hF,QAAQ,GAAG/W,KAAK,CAAC5qD,WAAW,CAACihE,mBAAmB,CAACa,gBAAgB,CAAC,EAAE,UAAU,CAAC;YACnF,IAAIjjD,KAAK,CAACgtD,UAAU,EAChBhD,gBAAgB,CAACne,EAAE,EAAEE,KAAK,EAAE+W,QAAQ,CAAC,CAAC,KACrC;cACDiF,0BAA0B,CAAClc,EAAE,EAAEA,EAAE,CAACa,SAAS,EAAEoW,QAAQ,CAAC;cACtD,IAAI,CAACoH,qBAAqB,CAACre,EAAE,EAAEiX,QAAQ,CAAC,EAAE;gBACtCv9E,OAAO,CAAComE,IAAI,CAAC,oHAAoH,CAAC;cACtI;YACJ;YACAya,wBAAwB,CAACva,EAAE,EAAEiX,QAAQ,CAAC;UAC1C,CAAC,CACD,OAAO7+B,CAAC,EAAE,CACV;UACJopB,WAAW,CAACl7D,IAAI,CAAC05D,EAAE,CAAC;UACpBE,KAAK,CAAC2hB,eAAe,GAAG9kB,IAAI,CAAC,UAAU0X,EAAE,EAAE;YACvCtgD,KAAK,CAAC2tD,OAAO,GAAG,IAAI;YACpB9hB,EAAE,CAAC4U,EAAE,CAAC,eAAe,CAAC,CAACpR,IAAI,CAACiR,EAAE,CAAC;UACnC,CAAC,CAAC;UACFvU,KAAK,CAAC6hB,OAAO,GAAGhlB,IAAI,CAAC,UAAU0X,EAAE,EAAE;YAC/BzU,EAAE,CAAC4U,EAAE,CAAC,OAAO,CAAC,CAACpR,IAAI,CAACiR,EAAE,CAAC;UAC3B,CAAC,CAAC;UACF,IAAIwM,UAAU,EACVhB,kBAAkB,CAACjgB,EAAE,CAACmE,KAAK,EAAE+c,MAAM,CAAC;UACxC5rD,OAAO,CAAC,CAAC;QACb,CAAC,EAAE4D,MAAM,CAAC;MACd,CAAC,CAAC;IAAE,CAAC,CAAC,CAAC,CAAC,CAAC0Q,IAAI,CAAC,YAAY;MAC1Bi3C,gBAAgB,CAAC,CAAC;MAClB1sD,KAAK,CAAC6tD,iBAAiB,GAAG,EAAE;MAC5B,OAAO1pB,YAAY,CAAChjC,OAAO,CAAC6qD,GAAG,CAAC,YAAY;QAAE,OAAOngB,EAAE,CAAC4U,EAAE,CAACqN,KAAK,CAACze,IAAI,CAACxD,EAAE,CAACmgB,GAAG,CAAC;MAAE,CAAC,CAAC,CAAC,CAACv2C,IAAI,CAAC,SAASs4C,cAAcA,CAAA,EAAG;QAC9G,IAAI/tD,KAAK,CAAC6tD,iBAAiB,CAACzsF,MAAM,GAAG,CAAC,EAAE;UACpC,IAAI4sF,YAAY,GAAGhuD,KAAK,CAAC6tD,iBAAiB,CAACliE,MAAM,CAAC41C,eAAe,EAAEf,GAAG,CAAC;UACvExgC,KAAK,CAAC6tD,iBAAiB,GAAG,EAAE;UAC5B,OAAO1pB,YAAY,CAAChjC,OAAO,CAAC6qD,GAAG,CAAC,YAAY;YAAE,OAAOgC,YAAY,CAACniB,EAAE,CAACmgB,GAAG,CAAC;UAAE,CAAC,CAAC,CAAC,CAACv2C,IAAI,CAACs4C,cAAc,CAAC;QACvG;MACJ,CAAC,CAAC;IACN,CAAC,CAAC,CAAC/nB,OAAO,CAAC,YAAY;MACnBhmC,KAAK,CAAC6tD,iBAAiB,GAAG,IAAI;MAC9B7tD,KAAK,CAACosC,aAAa,GAAG,KAAK;IAC/B,CAAC,CAAC,CAAC32B,IAAI,CAAC,YAAY;MAChB,OAAOo2B,EAAE;IACb,CAAC,CAAC,CAACnmE,KAAK,CAAC,UAAUxF,GAAG,EAAE;MACpB8/B,KAAK,CAACmsC,WAAW,GAAGjsE,GAAG;MACvB,IAAI;QACA2sF,kBAAkB,IAAIA,kBAAkB,CAACrL,KAAK,CAAC,CAAC;MACpD,CAAC,CACD,OAAOrR,EAAE,EAAE,CAAE;MACb,IAAIsc,aAAa,KAAKzsD,KAAK,CAACysD,aAAa,EAAE;QACvC5gB,EAAE,CAACiB,MAAM,CAAC,CAAC;MACf;MACA,OAAO7C,SAAS,CAAC/pE,GAAG,CAAC;IACzB,CAAC,CAAC,CAAC8lE,OAAO,CAAC,YAAY;MACnBhmC,KAAK,CAACgsC,YAAY,GAAG,IAAI;MACzB2gB,cAAc,CAAC,CAAC;IACpB,CAAC,CAAC;EACN;EAEA,SAASsB,aAAaA,CAACjxB,QAAQ,EAAE;IAC7B,IAAIkxB,QAAQ,GAAG,SAAAA,CAAUluF,MAAM,EAAE;QAAE,OAAOg9D,QAAQ,CAACM,IAAI,CAACt9D,MAAM,CAAC;MAAE,CAAC;MAAEmuF,OAAO,GAAG,SAAAA,CAAU3oF,KAAK,EAAE;QAAE,OAAOw3D,QAAQ,CAACoxB,KAAK,CAAC5oF,KAAK,CAAC;MAAE,CAAC;MAAE6oF,SAAS,GAAGC,IAAI,CAACJ,QAAQ,CAAC;MAAEK,OAAO,GAAGD,IAAI,CAACH,OAAO,CAAC;IACrL,SAASG,IAAIA,CAACE,OAAO,EAAE;MACnB,OAAO,UAAUh5D,GAAG,EAAE;QAClB,IAAI8nC,IAAI,GAAGkxB,OAAO,CAACh5D,GAAG,CAAC;UAAE7pB,KAAK,GAAG2xD,IAAI,CAAC3xD,KAAK;QAC3C,OAAO2xD,IAAI,CAACC,IAAI,GAAG5xD,KAAK,GACnB,CAACA,KAAK,IAAI,OAAOA,KAAK,CAAC8pC,IAAI,KAAK,UAAU,GACvCoc,OAAO,CAAClmD,KAAK,CAAC,GAAG/F,OAAO,CAACC,GAAG,CAAC8F,KAAK,CAAC,CAAC8pC,IAAI,CAAC44C,SAAS,EAAEE,OAAO,CAAC,GAAGF,SAAS,CAAC1iF,KAAK,CAAC,GAC/EA,KAAK,CAAC8pC,IAAI,CAAC44C,SAAS,EAAEE,OAAO,CAAE;MAC3C,CAAC;IACL;IACA,OAAOD,IAAI,CAACJ,QAAQ,CAAC,CAAC,CAAC;EAC3B;EAEA,SAASO,sBAAsBA,CAAC73E,IAAI,EAAE83E,WAAW,EAAEC,SAAS,EAAE;IAC1D,IAAIvjE,CAAC,GAAGrgB,SAAS,CAAC3J,MAAM;IACxB,IAAIgqB,CAAC,GAAG,CAAC,EACL,MAAM,IAAIs0C,UAAU,CAACiS,eAAe,CAAC,mBAAmB,CAAC;IAC7D,IAAIxmC,IAAI,GAAG,IAAIjoC,KAAK,CAACkoB,CAAC,GAAG,CAAC,CAAC;IAC3B,OAAO,EAAEA,CAAC,EACN+f,IAAI,CAAC/f,CAAC,GAAG,CAAC,CAAC,GAAGrgB,SAAS,CAACqgB,CAAC,CAAC;IAC9BujE,SAAS,GAAGxjD,IAAI,CAAC7gB,GAAG,CAAC,CAAC;IACtB,IAAI04D,MAAM,GAAG7mB,OAAO,CAAChxB,IAAI,CAAC;IAC1B,OAAO,CAACv0B,IAAI,EAAEosE,MAAM,EAAE2L,SAAS,CAAC;EACpC;EACA,SAASC,qBAAqBA,CAAC/iB,EAAE,EAAEj1D,IAAI,EAAEk1D,UAAU,EAAE+iB,iBAAiB,EAAEF,SAAS,EAAE;IAC/E,OAAOxqB,YAAY,CAAChjC,OAAO,CAAC,CAAC,CAACsU,IAAI,CAAC,YAAY;MAC3C,IAAIu5B,SAAS,GAAGhL,GAAG,CAACgL,SAAS,IAAIhL,GAAG;MACpC,IAAIwI,KAAK,GAAGX,EAAE,CAACY,kBAAkB,CAAC71D,IAAI,EAAEk1D,UAAU,EAAED,EAAE,CAACa,SAAS,EAAEmiB,iBAAiB,CAAC;MACpF,IAAI3nB,SAAS,GAAG;QACZsF,KAAK,EAAEA,KAAK;QACZwC,SAAS,EAAEA;MACf,CAAC;MACD,IAAI6f,iBAAiB,EAAE;QACnBriB,KAAK,CAACuC,QAAQ,GAAG8f,iBAAiB,CAAC9f,QAAQ;MAC/C,CAAC,MACI;QACD,IAAI;UACAvC,KAAK,CAAC5wC,MAAM,CAAC,CAAC;UACdiwC,EAAE,CAACjH,MAAM,CAAC+H,cAAc,GAAG,CAAC;QAChC,CAAC,CACD,OAAOxR,EAAE,EAAE;UACP,IAAIA,EAAE,CAAC37D,IAAI,KAAKggE,QAAQ,CAACoN,YAAY,IAAIf,EAAE,CAACgB,MAAM,CAAC,CAAC,IAAI,EAAEhB,EAAE,CAACjH,MAAM,CAAC+H,cAAc,GAAG,CAAC,EAAE;YACpFpnE,OAAO,CAAComE,IAAI,CAAC,0BAA0B,CAAC;YACxCE,EAAE,CAACiB,MAAM,CAAC,CAAC;YACX,OAAOjB,EAAE,CAACzyD,IAAI,CAAC,CAAC,CAACq8B,IAAI,CAAC,YAAY;cAAE,OAAOm5C,qBAAqB,CAAC/iB,EAAE,EAAEj1D,IAAI,EAAEk1D,UAAU,EAAE,IAAI,EAAE6iB,SAAS,CAAC;YAAE,CAAC,CAAC;UAC/G;UACA,OAAO1kB,SAAS,CAAC9O,EAAE,CAAC;QACxB;MACJ;MACA,IAAI2zB,gBAAgB,GAAGtxB,eAAe,CAACmxB,SAAS,CAAC;MACjD,IAAIG,gBAAgB,EAAE;QAClB/kB,uBAAuB,CAAC,CAAC;MAC7B;MACA,IAAIglB,WAAW;MACf,IAAIlG,eAAe,GAAG1kB,YAAY,CAAC8C,MAAM,CAAC,YAAY;QAClD8nB,WAAW,GAAGJ,SAAS,CAAC/8B,IAAI,CAAC4a,KAAK,EAAEA,KAAK,CAAC;QAC1C,IAAIuiB,WAAW,EAAE;UACb,IAAID,gBAAgB,EAAE;YAClB,IAAIhG,WAAW,GAAGtjB,uBAAuB,CAACllB,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC;YAC1DyuC,WAAW,CAACt5C,IAAI,CAACqzC,WAAW,EAAEA,WAAW,CAAC;UAC9C,CAAC,MACI,IAAI,OAAOiG,WAAW,CAACzxB,IAAI,KAAK,UAAU,IAAI,OAAOyxB,WAAW,CAACX,KAAK,KAAK,UAAU,EAAE;YACxFW,WAAW,GAAGd,aAAa,CAACc,WAAW,CAAC;UAC5C;QACJ;MACJ,CAAC,EAAE7nB,SAAS,CAAC;MACb,OAAO,CAAC6nB,WAAW,IAAI,OAAOA,WAAW,CAACt5C,IAAI,KAAK,UAAU,GACzD0uB,YAAY,CAAChjC,OAAO,CAAC4tD,WAAW,CAAC,CAACt5C,IAAI,CAAC,UAAUtc,CAAC,EAAE;QAAE,OAAOqzC,KAAK,CAAC2T,MAAM,GACrEhnD,CAAC,GACC8wC,SAAS,CAAC,IAAIvK,UAAU,CAACsvB,eAAe,CAAC,4DAA4D,CAAC,CAAC;MAAE,CAAC,CAAC,GAC/GnG,eAAe,CAACpzC,IAAI,CAAC,YAAY;QAAE,OAAOs5C,WAAW;MAAE,CAAC,CAAC,EAAEt5C,IAAI,CAAC,UAAUtc,CAAC,EAAE;QAC/E,IAAI01D,iBAAiB,EACjBriB,KAAK,CAACmU,QAAQ,CAAC,CAAC;QACpB,OAAOnU,KAAK,CAACO,WAAW,CAACt3B,IAAI,CAAC,YAAY;UAAE,OAAOtc,CAAC;QAAE,CAAC,CAAC;MAC5D,CAAC,CAAC,CAACzzB,KAAK,CAAC,UAAUu+C,CAAC,EAAE;QAClBuoB,KAAK,CAAC+T,OAAO,CAACt8B,CAAC,CAAC;QAChB,OAAOgmB,SAAS,CAAChmB,CAAC,CAAC;MACvB,CAAC,CAAC;IACN,CAAC,CAAC;EACN;EAEA,SAAS4S,GAAGA,CAAC1mC,CAAC,EAAExkB,KAAK,EAAE+kE,KAAK,EAAE;IAC1B,IAAI1wE,MAAM,GAAG6xD,OAAO,CAAC1hC,CAAC,CAAC,GAAGA,CAAC,CAACvsB,KAAK,CAAC,CAAC,GAAG,CAACusB,CAAC,CAAC;IACzC,KAAK,IAAI/E,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGslD,KAAK,EAAE,EAAEtlD,CAAC,EAC1BprB,MAAM,CAACmS,IAAI,CAACxG,KAAK,CAAC;IACtB,OAAO3L,MAAM;EACjB;EACA,SAASivF,4BAA4BA,CAAChJ,IAAI,EAAE;IACxC,OAAO1tB,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE0tB,IAAI,CAAC,EAAE;MAAEjP,KAAK,EAAE,SAAAA,CAAUrI,SAAS,EAAE;QAC1D,IAAIqI,KAAK,GAAGiP,IAAI,CAACjP,KAAK,CAACrI,SAAS,CAAC;QACjC,IAAIE,MAAM,GAAGmI,KAAK,CAACnI,MAAM;QACzB,IAAIqgB,WAAW,GAAG,CAAC,CAAC;QACpB,IAAIC,iBAAiB,GAAG,EAAE;QAC1B,SAASC,iBAAiBA,CAAC/zB,OAAO,EAAEg0B,OAAO,EAAEC,aAAa,EAAE;UACxD,IAAIC,YAAY,GAAG3M,eAAe,CAACvnB,OAAO,CAAC;UAC3C,IAAIm0B,SAAS,GAAIN,WAAW,CAACK,YAAY,CAAC,GAAGL,WAAW,CAACK,YAAY,CAAC,IAAI,EAAG;UAC7E,IAAIE,SAAS,GAAGp0B,OAAO,IAAI,IAAI,GAAG,CAAC,GAAG,OAAOA,OAAO,KAAK,QAAQ,GAAG,CAAC,GAAGA,OAAO,CAACj6D,MAAM;UACtF,IAAIsuF,SAAS,GAAGL,OAAO,GAAG,CAAC;UAC3B,IAAIM,YAAY,GAAGp3B,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE+2B,aAAa,CAAC,EAAE;YAAEI,SAAS,EAAEA,SAAS;YAAEL,OAAO,EAAEA,OAAO;YAAEI,SAAS,EAAEA,SAAS;YAAEloC,UAAU,EAAEi7B,eAAe,CAACnnB,OAAO,CAAC;YAAE2Z,MAAM,EAAE,CAAC0a,SAAS,IAAIJ,aAAa,CAACta;UAAO,CAAC,CAAC;UAC5Mwa,SAAS,CAACr9E,IAAI,CAACw9E,YAAY,CAAC;UAC5B,IAAI,CAACA,YAAY,CAACvM,YAAY,EAAE;YAC5B+L,iBAAiB,CAACh9E,IAAI,CAACw9E,YAAY,CAAC;UACxC;UACA,IAAIF,SAAS,GAAG,CAAC,EAAE;YACf,IAAIG,cAAc,GAAGH,SAAS,KAAK,CAAC,GAChCp0B,OAAO,CAAC,CAAC,CAAC,GACVA,OAAO,CAACz3D,KAAK,CAAC,CAAC,EAAE6rF,SAAS,GAAG,CAAC,CAAC;YACnCL,iBAAiB,CAACQ,cAAc,EAAEP,OAAO,GAAG,CAAC,EAAEC,aAAa,CAAC;UACjE;UACAE,SAAS,CAACvpE,IAAI,CAAC,UAAUkK,CAAC,EAAEzsB,CAAC,EAAE;YAAE,OAAOysB,CAAC,CAACk/D,OAAO,GAAG3rF,CAAC,CAAC2rF,OAAO;UAAE,CAAC,CAAC;UACjE,OAAOM,YAAY;QACvB;QACA,IAAIlb,UAAU,GAAG2a,iBAAiB,CAACvgB,MAAM,CAAC4F,UAAU,CAACpZ,OAAO,EAAE,CAAC,EAAEwT,MAAM,CAAC4F,UAAU,CAAC;QACnFya,WAAW,CAAC,KAAK,CAAC,GAAG,CAACza,UAAU,CAAC;QACjC,KAAK,IAAIgF,EAAE,GAAG,CAAC,EAAEtJ,EAAE,GAAGtB,MAAM,CAACa,OAAO,EAAE+J,EAAE,GAAGtJ,EAAE,CAAC/uE,MAAM,EAAEq4E,EAAE,EAAE,EAAE;UACxD,IAAI3mE,KAAK,GAAGq9D,EAAE,CAACsJ,EAAE,CAAC;UAClB2V,iBAAiB,CAACt8E,KAAK,CAACuoD,OAAO,EAAE,CAAC,EAAEvoD,KAAK,CAAC;QAC9C;QACA,SAAS+8E,aAAaA,CAACx0B,OAAO,EAAE;UAC5B,IAAIr7D,MAAM,GAAGkvF,WAAW,CAACtM,eAAe,CAACvnB,OAAO,CAAC,CAAC;UAClD,OAAOr7D,MAAM,IAAIA,MAAM,CAAC,CAAC,CAAC;QAC9B;QACA,SAAS8vF,cAAcA,CAACj9D,KAAK,EAAEw8D,OAAO,EAAE;UACpC,OAAO;YACH5mF,IAAI,EAAEoqB,KAAK,CAACpqB,IAAI,KAAK,CAAC,GAClB,CAAC,GACDoqB,KAAK,CAACpqB,IAAI;YACd0lE,KAAK,EAAEtX,GAAG,CAAChkC,KAAK,CAACs7C,KAAK,EAAEt7C,KAAK,CAACu7C,SAAS,GAAG6X,IAAI,CAACJ,OAAO,GAAGI,IAAI,CAACL,OAAO,EAAEyJ,OAAO,CAAC;YAC/EjhB,SAAS,EAAE,IAAI;YACfC,KAAK,EAAExX,GAAG,CAAChkC,KAAK,CAACw7C,KAAK,EAAEx7C,KAAK,CAACy7C,SAAS,GAAG2X,IAAI,CAACL,OAAO,GAAGK,IAAI,CAACJ,OAAO,EAAEwJ,OAAO,CAAC;YAC/E/gB,SAAS,EAAE;UACf,CAAC;QACL;QACA,SAASyhB,gBAAgBA,CAAChM,GAAG,EAAE;UAC3B,IAAIjxE,KAAK,GAAGixE,GAAG,CAAC9O,KAAK,CAACniE,KAAK;UAC3B,OAAOA,KAAK,CAAC48E,SAAS,GAAGn3B,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEwrB,GAAG,CAAC,EAAE;YAAE9O,KAAK,EAAE;cACtDniE,KAAK,EAAEA,KAAK;cACZ+f,KAAK,EAAEi9D,cAAc,CAAC/L,GAAG,CAAC9O,KAAK,CAACpiD,KAAK,EAAE/f,KAAK,CAACu8E,OAAO;YACxD;UAAE,CAAC,CAAC,GAAGtL,GAAG;QAClB;QACA,IAAI/jF,MAAM,GAAGu4D,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEye,KAAK,CAAC,EAAE;UAAEnI,MAAM,EAAEtW,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEsW,MAAM,CAAC,EAAE;YAAE4F,UAAU,EAAEA,UAAU;YAAE/E,OAAO,EAAEyf,iBAAiB;YAAEza,iBAAiB,EAAEmb;UAAc,CAAC,CAAC;UAAEnf,KAAK,EAAE,SAAAA,CAAUqT,GAAG,EAAE;YAC7L,OAAO/M,KAAK,CAACtG,KAAK,CAACqf,gBAAgB,CAAChM,GAAG,CAAC,CAAC;UAC7C,CAAC;UAAE9O,KAAK,EAAE,SAAAA,CAAU8O,GAAG,EAAE;YACrB,OAAO/M,KAAK,CAAC/B,KAAK,CAAC8a,gBAAgB,CAAChM,GAAG,CAAC,CAAC;UAC7C,CAAC;UAAEnP,UAAU,EAAE,SAAAA,CAAUmP,GAAG,EAAE;YAC1B,IAAI5T,EAAE,GAAG4T,GAAG,CAAC9O,KAAK,CAACniE,KAAK;cAAEu8E,OAAO,GAAGlf,EAAE,CAACkf,OAAO;cAAEK,SAAS,GAAGvf,EAAE,CAACuf,SAAS;cAAED,SAAS,GAAGtf,EAAE,CAACsf,SAAS;YAClG,IAAI,CAACC,SAAS,EACV,OAAO1Y,KAAK,CAACpC,UAAU,CAACmP,GAAG,CAAC;YAChC,SAASiM,mBAAmBA,CAACxa,MAAM,EAAE;cACjC,SAASya,SAASA,CAACttF,GAAG,EAAE;gBACpBA,GAAG,IAAI,IAAI,GACP6yE,MAAM,CAACQ,QAAQ,CAACnf,GAAG,CAACl0D,GAAG,EAAEohF,GAAG,CAAC3yE,OAAO,GAAG60E,IAAI,CAACJ,OAAO,GAAGI,IAAI,CAACL,OAAO,EAAEyJ,OAAO,CAAC,CAAC,GAC7EtL,GAAG,CAAC/O,MAAM,GACNQ,MAAM,CAACQ,QAAQ,CAACR,MAAM,CAAC7yE,GAAG,CAACiB,KAAK,CAAC,CAAC,EAAE6rF,SAAS,CAAC,CACzC/6D,MAAM,CAACqvD,GAAG,CAAC3yE,OAAO,GACjB60E,IAAI,CAACL,OAAO,GACZK,IAAI,CAACJ,OAAO,EAAEwJ,OAAO,CAAC,CAAC,GAC7B7Z,MAAM,CAACQ,QAAQ,CAAC,CAAC;cAC7B;cACA,IAAIka,aAAa,GAAG9yE,MAAM,CAACwe,MAAM,CAAC45C,MAAM,EAAE;gBACtCQ,QAAQ,EAAE;kBAAErqE,KAAK,EAAEskF;gBAAU,CAAC;gBAC9BzL,kBAAkB,EAAE;kBAChB74E,KAAK,EAAE,SAAAA,CAAUhJ,GAAG,EAAE8xE,UAAU,EAAE;oBAC9Be,MAAM,CAACgP,kBAAkB,CAAC3tB,GAAG,CAACl0D,GAAG,EAAEsjF,IAAI,CAACJ,OAAO,EAAEwJ,OAAO,CAAC,EAAE5a,UAAU,CAAC;kBAC1E;gBACJ,CAAC;gBACDA,UAAU,EAAE;kBACRrpE,GAAG,EAAE,SAAAA,CAAA,EAAY;oBACb,OAAOoqE,MAAM,CAACf,UAAU;kBAC5B;gBACJ,CAAC;gBACD9xE,GAAG,EAAE;kBACDyI,GAAG,EAAE,SAAAA,CAAA,EAAY;oBACb,IAAIzI,GAAG,GAAG6yE,MAAM,CAAC7yE,GAAG;oBACpB,OAAO8sF,SAAS,KAAK,CAAC,GAClB9sF,GAAG,CAAC,CAAC,CAAC,GACNA,GAAG,CAACiB,KAAK,CAAC,CAAC,EAAE6rF,SAAS,CAAC;kBAC/B;gBACJ,CAAC;gBACD9jF,KAAK,EAAE;kBACHP,GAAG,EAAE,SAAAA,CAAA,EAAY;oBACb,OAAOoqE,MAAM,CAAC7pE,KAAK;kBACvB;gBACJ;cACJ,CAAC,CAAC;cACF,OAAOukF,aAAa;YACxB;YACA,OAAOlZ,KAAK,CAACpC,UAAU,CAACmb,gBAAgB,CAAChM,GAAG,CAAC,CAAC,CACzCtuC,IAAI,CAAC,UAAU+/B,MAAM,EAAE;cAAE,OAAOA,MAAM,IAAIwa,mBAAmB,CAACxa,MAAM,CAAC;YAAE,CAAC,CAAC;UAClF;QAAE,CAAC,CAAC;QACR,OAAOx1E,MAAM;MACjB;IAAE,CAAC,CAAC;EACZ;EACA,IAAImwF,sBAAsB,GAAG;IACzB7kF,KAAK,EAAE,QAAQ;IACf9L,IAAI,EAAE,wBAAwB;IAC9B4wF,KAAK,EAAE,CAAC;IACRx0D,MAAM,EAAEqzD;EACZ,CAAC;EAED,SAASoB,aAAaA,CAAClgE,CAAC,EAAEzsB,CAAC,EAAE43D,EAAE,EAAEg1B,IAAI,EAAE;IACnCh1B,EAAE,GAAGA,EAAE,IAAI,CAAC,CAAC;IACbg1B,IAAI,GAAGA,IAAI,IAAI,EAAE;IACjBjvD,IAAI,CAAClR,CAAC,CAAC,CAACtJ,OAAO,CAAC,UAAU2yC,IAAI,EAAE;MAC5B,IAAI,CAACD,MAAM,CAAC71D,CAAC,EAAE81D,IAAI,CAAC,EAAE;QAClB8B,EAAE,CAACg1B,IAAI,GAAG92B,IAAI,CAAC,GAAGv6D,SAAS;MAC/B,CAAC,MACI;QACD,IAAIsxF,EAAE,GAAGpgE,CAAC,CAACqpC,IAAI,CAAC;UAAEg3B,EAAE,GAAG9sF,CAAC,CAAC81D,IAAI,CAAC;QAC9B,IAAI,OAAO+2B,EAAE,KAAK,QAAQ,IAAI,OAAOC,EAAE,KAAK,QAAQ,IAAID,EAAE,IAAIC,EAAE,EAAE;UAC9D,IAAIC,UAAU,GAAG7zB,WAAW,CAAC2zB,EAAE,CAAC;UAChC,IAAIG,UAAU,GAAG9zB,WAAW,CAAC4zB,EAAE,CAAC;UAChC,IAAIC,UAAU,KAAKC,UAAU,EAAE;YAC3Bp1B,EAAE,CAACg1B,IAAI,GAAG92B,IAAI,CAAC,GAAG91D,CAAC,CAAC81D,IAAI,CAAC;UAC7B,CAAC,MACI,IAAIi3B,UAAU,KAAK,QAAQ,EAAE;YAC9BJ,aAAa,CAACE,EAAE,EAAEC,EAAE,EAAEl1B,EAAE,EAAEg1B,IAAI,GAAG92B,IAAI,GAAG,GAAG,CAAC;UAChD,CAAC,MACI,IAAI+2B,EAAE,KAAKC,EAAE,EAAE;YAChBl1B,EAAE,CAACg1B,IAAI,GAAG92B,IAAI,CAAC,GAAG91D,CAAC,CAAC81D,IAAI,CAAC;UAC7B;QACJ,CAAC,MACI,IAAI+2B,EAAE,KAAKC,EAAE,EACdl1B,EAAE,CAACg1B,IAAI,GAAG92B,IAAI,CAAC,GAAG91D,CAAC,CAAC81D,IAAI,CAAC;MACjC;IACJ,CAAC,CAAC;IACFn4B,IAAI,CAAC39B,CAAC,CAAC,CAACmjB,OAAO,CAAC,UAAU2yC,IAAI,EAAE;MAC5B,IAAI,CAACD,MAAM,CAACppC,CAAC,EAAEqpC,IAAI,CAAC,EAAE;QAClB8B,EAAE,CAACg1B,IAAI,GAAG92B,IAAI,CAAC,GAAG91D,CAAC,CAAC81D,IAAI,CAAC;MAC7B;IACJ,CAAC,CAAC;IACF,OAAO8B,EAAE;EACb;EAEA,SAASq1B,gBAAgBA,CAAClc,UAAU,EAAEsP,GAAG,EAAE;IACvC,IAAIA,GAAG,CAACt7E,IAAI,KAAK,QAAQ,EACrB,OAAOs7E,GAAG,CAAC1iD,IAAI;IACnB,OAAO0iD,GAAG,CAAC1iD,IAAI,IAAI0iD,GAAG,CAAC1mE,MAAM,CAAC5Z,GAAG,CAACgxE,UAAU,CAACltB,UAAU,CAAC;EAC5D;EAEA,IAAIqpC,eAAe,GAAG;IAClBtlF,KAAK,EAAE,QAAQ;IACf9L,IAAI,EAAE,iBAAiB;IACvB4wF,KAAK,EAAE,CAAC;IACRx0D,MAAM,EAAE,SAAAA,CAAUi1D,QAAQ,EAAE;MAAE,OAAQt4B,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEs4B,QAAQ,CAAC,EAAE;QAAE7Z,KAAK,EAAE,SAAAA,CAAUrI,SAAS,EAAE;UAC7F,IAAImiB,SAAS,GAAGD,QAAQ,CAAC7Z,KAAK,CAACrI,SAAS,CAAC;UACzC,IAAI8F,UAAU,GAAGqc,SAAS,CAACjiB,MAAM,CAAC4F,UAAU;UAC5C,IAAIsc,eAAe,GAAGx4B,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEu4B,SAAS,CAAC,EAAE;YAAEtf,MAAM,EAAE,SAAAA,CAAUuS,GAAG,EAAE;cACzE,IAAIiN,OAAO,GAAGhtB,GAAG,CAACwI,KAAK;cACvB,IAAI2D,EAAE,GAAG6gB,OAAO,CAACha,KAAK,CAACrI,SAAS,CAAC,CAACtiC,IAAI;gBAAE4kD,QAAQ,GAAG9gB,EAAE,CAAC8gB,QAAQ;gBAAEC,QAAQ,GAAG/gB,EAAE,CAAC+gB,QAAQ;gBAAEC,QAAQ,GAAGhhB,EAAE,CAACghB,QAAQ;cAC9G,QAAQpN,GAAG,CAACt7E,IAAI;gBACZ,KAAK,KAAK;kBACN,IAAIyoF,QAAQ,CAAC7hB,IAAI,KAAK7O,GAAG,EACrB;kBACJ,OAAOwwB,OAAO,CAACrpB,QAAQ,CAAC,WAAW,EAAE,YAAY;oBAAE,OAAOypB,cAAc,CAACrN,GAAG,CAAC;kBAAE,CAAC,EAAE,IAAI,CAAC;gBAC3F,KAAK,KAAK;kBACN,IAAImN,QAAQ,CAAC7hB,IAAI,KAAK7O,GAAG,IAAI2wB,QAAQ,CAAC9hB,IAAI,KAAK7O,GAAG,EAC9C;kBACJ,OAAOwwB,OAAO,CAACrpB,QAAQ,CAAC,WAAW,EAAE,YAAY;oBAAE,OAAOypB,cAAc,CAACrN,GAAG,CAAC;kBAAE,CAAC,EAAE,IAAI,CAAC;gBAC3F,KAAK,QAAQ;kBACT,IAAIkN,QAAQ,CAAC5hB,IAAI,KAAK7O,GAAG,EACrB;kBACJ,OAAOwwB,OAAO,CAACrpB,QAAQ,CAAC,WAAW,EAAE,YAAY;oBAAE,OAAOypB,cAAc,CAACrN,GAAG,CAAC;kBAAE,CAAC,EAAE,IAAI,CAAC;gBAC3F,KAAK,aAAa;kBACd,IAAIkN,QAAQ,CAAC5hB,IAAI,KAAK7O,GAAG,EACrB;kBACJ,OAAOwwB,OAAO,CAACrpB,QAAQ,CAAC,WAAW,EAAE,YAAY;oBAAE,OAAO0pB,WAAW,CAACtN,GAAG,CAAC;kBAAE,CAAC,EAAE,IAAI,CAAC;cAC5F;cACA,OAAO+M,SAAS,CAACtf,MAAM,CAACuS,GAAG,CAAC;cAC5B,SAASqN,cAAcA,CAACrN,GAAG,EAAE;gBACzB,IAAIiN,OAAO,GAAGhtB,GAAG,CAACwI,KAAK;gBACvB,IAAInrC,IAAI,GAAG0iD,GAAG,CAAC1iD,IAAI,IAAIsvD,gBAAgB,CAAClc,UAAU,EAAEsP,GAAG,CAAC;gBACxD,IAAI,CAAC1iD,IAAI,EACL,MAAM,IAAIrkB,KAAK,CAAC,cAAc,CAAC;gBACnC+mE,GAAG,GAAGA,GAAG,CAACt7E,IAAI,KAAK,KAAK,IAAIs7E,GAAG,CAACt7E,IAAI,KAAK,KAAK,GAAG8vD,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEwrB,GAAG,CAAC,EAAE;kBAAE1iD,IAAI,EAAEA;gBAAK,CAAC,CAAC,GAAGk3B,QAAQ,CAAC,CAAC,CAAC,EAAEwrB,GAAG,CAAC;gBAChH,IAAIA,GAAG,CAACt7E,IAAI,KAAK,QAAQ,EACrBs7E,GAAG,CAAC1mE,MAAM,GAAGs7C,aAAa,CAAC,EAAE,EAAEorB,GAAG,CAAC1mE,MAAM,EAAE,IAAI,CAAC;gBACpD,IAAI0mE,GAAG,CAAC1iD,IAAI,EACR0iD,GAAG,CAAC1iD,IAAI,GAAGs3B,aAAa,CAAC,EAAE,EAAEorB,GAAG,CAAC1iD,IAAI,EAAE,IAAI,CAAC;gBAChD,OAAOiwD,iBAAiB,CAACR,SAAS,EAAE/M,GAAG,EAAE1iD,IAAI,CAAC,CAACoU,IAAI,CAAC,UAAU87C,cAAc,EAAE;kBAC1E,IAAIC,QAAQ,GAAGnwD,IAAI,CAAC59B,GAAG,CAAC,UAAUd,GAAG,EAAEyoB,CAAC,EAAE;oBACtC,IAAIqmE,aAAa,GAAGF,cAAc,CAACnmE,CAAC,CAAC;oBACrC,IAAIqnD,GAAG,GAAG;sBAAErpB,OAAO,EAAE,IAAI;sBAAE6X,SAAS,EAAE;oBAAK,CAAC;oBAC5C,IAAI8iB,GAAG,CAACt7E,IAAI,KAAK,QAAQ,EAAE;sBACvBwoF,QAAQ,CAAC5hB,IAAI,CAACzd,IAAI,CAAC6gB,GAAG,EAAE9vE,GAAG,EAAE8uF,aAAa,EAAET,OAAO,CAAC;oBACxD,CAAC,MACI,IAAIjN,GAAG,CAACt7E,IAAI,KAAK,KAAK,IAAIgpF,aAAa,KAAKxyF,SAAS,EAAE;sBACxD,IAAIyyF,mBAAmB,GAAGR,QAAQ,CAAC7hB,IAAI,CAACzd,IAAI,CAAC6gB,GAAG,EAAE9vE,GAAG,EAAEohF,GAAG,CAAC1mE,MAAM,CAAC+N,CAAC,CAAC,EAAE4lE,OAAO,CAAC;sBAC9E,IAAIruF,GAAG,IAAI,IAAI,IAAI+uF,mBAAmB,IAAI,IAAI,EAAE;wBAC5C/uF,GAAG,GAAG+uF,mBAAmB;wBACzB3N,GAAG,CAAC1iD,IAAI,CAACjW,CAAC,CAAC,GAAGzoB,GAAG;wBACjB,IAAI,CAAC8xE,UAAU,CAAC2E,QAAQ,EAAE;0BACtB3d,YAAY,CAACsoB,GAAG,CAAC1mE,MAAM,CAAC+N,CAAC,CAAC,EAAEqpD,UAAU,CAACpZ,OAAO,EAAE14D,GAAG,CAAC;wBACxD;sBACJ;oBACJ,CAAC,MACI;sBACD,IAAIgvF,UAAU,GAAGtB,aAAa,CAACoB,aAAa,EAAE1N,GAAG,CAAC1mE,MAAM,CAAC+N,CAAC,CAAC,CAAC;sBAC5D,IAAIwmE,mBAAmB,GAAGT,QAAQ,CAAC9hB,IAAI,CAACzd,IAAI,CAAC6gB,GAAG,EAAEkf,UAAU,EAAEhvF,GAAG,EAAE8uF,aAAa,EAAET,OAAO,CAAC;sBAC1F,IAAIY,mBAAmB,EAAE;wBACrB,IAAIC,gBAAgB,GAAG9N,GAAG,CAAC1mE,MAAM,CAAC+N,CAAC,CAAC;wBACpChO,MAAM,CAACikB,IAAI,CAACuwD,mBAAmB,CAAC,CAAC/qE,OAAO,CAAC,UAAUw0C,OAAO,EAAE;0BACxD,IAAI9B,MAAM,CAACs4B,gBAAgB,EAAEx2B,OAAO,CAAC,EAAE;4BACnCw2B,gBAAgB,CAACx2B,OAAO,CAAC,GAAGu2B,mBAAmB,CAACv2B,OAAO,CAAC;0BAC5D,CAAC,MACI;4BACDI,YAAY,CAACo2B,gBAAgB,EAAEx2B,OAAO,EAAEu2B,mBAAmB,CAACv2B,OAAO,CAAC,CAAC;0BACzE;wBACJ,CAAC,CAAC;sBACN;oBACJ;oBACA,OAAOoX,GAAG;kBACd,CAAC,CAAC;kBACF,OAAOqe,SAAS,CAACtf,MAAM,CAACuS,GAAG,CAAC,CAACtuC,IAAI,CAAC,UAAU06B,EAAE,EAAE;oBAC5C,IAAIlR,QAAQ,GAAGkR,EAAE,CAAClR,QAAQ;sBAAEt5C,OAAO,GAAGwqD,EAAE,CAACxqD,OAAO;sBAAE8rD,WAAW,GAAGtB,EAAE,CAACsB,WAAW;sBAAE14B,UAAU,GAAGo3B,EAAE,CAACp3B,UAAU;oBAC1G,KAAK,IAAI3tB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiW,IAAI,CAACjgC,MAAM,EAAE,EAAEgqB,CAAC,EAAE;sBAClC,IAAIukD,OAAO,GAAGhqD,OAAO,GAAGA,OAAO,CAACyF,CAAC,CAAC,GAAGiW,IAAI,CAACjW,CAAC,CAAC;sBAC5C,IAAIqnD,GAAG,GAAG+e,QAAQ,CAACpmE,CAAC,CAAC;sBACrB,IAAIukD,OAAO,IAAI,IAAI,EAAE;wBACjB8C,GAAG,CAACrpB,OAAO,IAAIqpB,GAAG,CAACrpB,OAAO,CAAC6V,QAAQ,CAAC7zC,CAAC,CAAC,CAAC;sBAC3C,CAAC,MACI;wBACDqnD,GAAG,CAACxR,SAAS,IAAIwR,GAAG,CAACxR,SAAS,CAAC8iB,GAAG,CAACt7E,IAAI,KAAK,KAAK,IAAI8oF,cAAc,CAACnmE,CAAC,CAAC,GAClE24D,GAAG,CAAC1mE,MAAM,CAAC+N,CAAC,CAAC,GACbukD,OACJ,CAAC;sBACL;oBACJ;oBACA,OAAO;sBAAE1Q,QAAQ,EAAEA,QAAQ;sBAAEt5C,OAAO,EAAEA,OAAO;sBAAE8rD,WAAW,EAAEA,WAAW;sBAAE14B,UAAU,EAAEA;oBAAW,CAAC;kBACrG,CAAC,CAAC,CAACrzC,KAAK,CAAC,UAAUF,KAAK,EAAE;oBACtBgsF,QAAQ,CAAC3qE,OAAO,CAAC,UAAU4rD,GAAG,EAAE;sBAAE,OAAOA,GAAG,CAACrpB,OAAO,IAAIqpB,GAAG,CAACrpB,OAAO,CAAC5jD,KAAK,CAAC;oBAAE,CAAC,CAAC;oBAC9E,OAAOI,OAAO,CAACm/B,MAAM,CAACv/B,KAAK,CAAC;kBAChC,CAAC,CAAC;gBACN,CAAC,CAAC;cACN;cACA,SAAS6rF,WAAWA,CAACtN,GAAG,EAAE;gBACtB,OAAO+N,eAAe,CAAC/N,GAAG,CAACvX,KAAK,EAAEuX,GAAG,CAAClxD,KAAK,EAAE,KAAK,CAAC;cACvD;cACA,SAASi/D,eAAeA,CAACtlB,KAAK,EAAE35C,KAAK,EAAEjiB,KAAK,EAAE;gBAC1C,OAAOkgF,SAAS,CAAC7b,KAAK,CAAC;kBAAEzI,KAAK,EAAEA,KAAK;kBAAEnvD,MAAM,EAAE,KAAK;kBAAE43D,KAAK,EAAE;oBAAEniE,KAAK,EAAE2hE,UAAU;oBAAE5hD,KAAK,EAAEA;kBAAM,CAAC;kBAAEjiB,KAAK,EAAEA;gBAAM,CAAC,CAAC,CAC5G6kC,IAAI,CAAC,UAAU06B,EAAE,EAAE;kBACpB,IAAInwE,MAAM,GAAGmwE,EAAE,CAACnwE,MAAM;kBACtB,OAAOoxF,cAAc,CAAC;oBAAE3oF,IAAI,EAAE,QAAQ;oBAAE44B,IAAI,EAAErhC,MAAM;oBAAEwsE,KAAK,EAAEA;kBAAM,CAAC,CAAC,CAAC/2B,IAAI,CAAC,UAAUtqC,GAAG,EAAE;oBACtF,IAAIA,GAAG,CAACsmE,WAAW,GAAG,CAAC,EACnB,OAAO7rE,OAAO,CAACm/B,MAAM,CAAC55B,GAAG,CAAC8zD,QAAQ,CAAC,CAAC,CAAC,CAAC;oBAC1C,IAAIj/D,MAAM,CAACoB,MAAM,GAAGwP,KAAK,EAAE;sBACvB,OAAO;wBAAEquD,QAAQ,EAAE,EAAE;wBAAEwS,WAAW,EAAE,CAAC;wBAAE14B,UAAU,EAAE95C;sBAAU,CAAC;oBAClE,CAAC,MACI;sBACD,OAAO6yF,eAAe,CAACtlB,KAAK,EAAEjU,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE1lC,KAAK,CAAC,EAAE;wBAAEs7C,KAAK,EAAEnuE,MAAM,CAACA,MAAM,CAACoB,MAAM,GAAG,CAAC,CAAC;wBAAEgtE,SAAS,EAAE;sBAAK,CAAC,CAAC,EAAEx9D,KAAK,CAAC;oBAC9H;kBACJ,CAAC,CAAC;gBACN,CAAC,CAAC;cACN;YACJ;UAAE,CAAC,CAAC;UACR,OAAOmgF,eAAe;QAC1B;MAAE,CAAC,CAAC;IAAG;EACf,CAAC;EACD,SAASO,iBAAiBA,CAACta,KAAK,EAAE+M,GAAG,EAAEgO,aAAa,EAAE;IAClD,OAAOhO,GAAG,CAACt7E,IAAI,KAAK,KAAK,GACnB7C,OAAO,CAACu7B,OAAO,CAAC,EAAE,CAAC,GACnB61C,KAAK,CAACz2B,OAAO,CAAC;MAAEisB,KAAK,EAAEuX,GAAG,CAACvX,KAAK;MAAEnrC,IAAI,EAAE0wD,aAAa;MAAEz7C,KAAK,EAAE;IAAY,CAAC,CAAC;EACtF;EAEA,SAAS07C,uBAAuBA,CAAC3wD,IAAI,EAAEiV,KAAK,EAAE6gC,KAAK,EAAE;IACjD,IAAI;MACA,IAAI,CAAC7gC,KAAK,EACN,OAAO,IAAI;MACf,IAAIA,KAAK,CAACjV,IAAI,CAACjgC,MAAM,GAAGigC,IAAI,CAACjgC,MAAM,EAC/B,OAAO,IAAI;MACf,IAAIpB,MAAM,GAAG,EAAE;MACf,KAAK,IAAIorB,CAAC,GAAG,CAAC,EAAE2pC,CAAC,GAAG,CAAC,EAAE3pC,CAAC,GAAGkrB,KAAK,CAACjV,IAAI,CAACjgC,MAAM,IAAI2zD,CAAC,GAAG1zB,IAAI,CAACjgC,MAAM,EAAE,EAAEgqB,CAAC,EAAE;QAClE,IAAI8kD,GAAG,CAAC55B,KAAK,CAACjV,IAAI,CAACjW,CAAC,CAAC,EAAEiW,IAAI,CAAC0zB,CAAC,CAAC,CAAC,KAAK,CAAC,EACjC;QACJ/0D,MAAM,CAACmS,IAAI,CAACglE,KAAK,GAAG3a,SAAS,CAAClmB,KAAK,CAACj5B,MAAM,CAAC+N,CAAC,CAAC,CAAC,GAAGkrB,KAAK,CAACj5B,MAAM,CAAC+N,CAAC,CAAC,CAAC;QACjE,EAAE2pC,CAAC;MACP;MACA,OAAO/0D,MAAM,CAACoB,MAAM,KAAKigC,IAAI,CAACjgC,MAAM,GAAGpB,MAAM,GAAG,IAAI;IACxD,CAAC,CACD,OAAOmwE,EAAE,EAAE;MACP,OAAO,IAAI;IACf;EACJ;EACA,IAAI8hB,6BAA6B,GAAG;IAChC3mF,KAAK,EAAE,QAAQ;IACf8kF,KAAK,EAAE,CAAC,CAAC;IACTx0D,MAAM,EAAE,SAAAA,CAAUuzC,IAAI,EAAE;MACpB,OAAO;QACH6H,KAAK,EAAE,SAAAA,CAAUrI,SAAS,EAAE;UACxB,IAAIqI,KAAK,GAAG7H,IAAI,CAAC6H,KAAK,CAACrI,SAAS,CAAC;UACjC,OAAOpW,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEye,KAAK,CAAC,EAAE;YAAEz2B,OAAO,EAAE,SAAAA,CAAUwjC,GAAG,EAAE;cACvD,IAAI,CAACA,GAAG,CAACztC,KAAK,EAAE;gBACZ,OAAO0gC,KAAK,CAACz2B,OAAO,CAACwjC,GAAG,CAAC;cAC7B;cACA,IAAImO,YAAY,GAAGF,uBAAuB,CAACjO,GAAG,CAAC1iD,IAAI,EAAE0iD,GAAG,CAACvX,KAAK,CAAC,QAAQ,CAAC,EAAEuX,GAAG,CAACztC,KAAK,KAAK,OAAO,CAAC;cAChG,IAAI47C,YAAY,EAAE;gBACd,OAAO/tB,YAAY,CAAChjC,OAAO,CAAC+wD,YAAY,CAAC;cAC7C;cACA,OAAOlb,KAAK,CAACz2B,OAAO,CAACwjC,GAAG,CAAC,CAACtuC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;gBAC1C44E,GAAG,CAACvX,KAAK,CAAC,QAAQ,CAAC,GAAG;kBAClBnrC,IAAI,EAAE0iD,GAAG,CAAC1iD,IAAI;kBACdhkB,MAAM,EAAE0mE,GAAG,CAACztC,KAAK,KAAK,OAAO,GAAGkmB,SAAS,CAACrxD,GAAG,CAAC,GAAGA;gBACrD,CAAC;gBACD,OAAOA,GAAG;cACd,CAAC,CAAC;YACN,CAAC;YAAEqmE,MAAM,EAAE,SAAAA,CAAUuS,GAAG,EAAE;cACtB,IAAIA,GAAG,CAACt7E,IAAI,KAAK,KAAK,EAClBs7E,GAAG,CAACvX,KAAK,CAAC,QAAQ,CAAC,GAAG,IAAI;cAC9B,OAAOwK,KAAK,CAACxF,MAAM,CAACuS,GAAG,CAAC;YAC5B;UAAE,CAAC,CAAC;QACZ;MACJ,CAAC;IACL;EACJ,CAAC;EAED,IAAI5T,EAAE;EACN,SAASgiB,YAAYA,CAACC,IAAI,EAAE;IACxB,OAAO,EAAE,MAAM,IAAIA,IAAI,CAAC;EAC5B;EACA,IAAIC,QAAQ,GAAG,SAAAA,CAAUC,UAAU,EAAE7gF,EAAE,EAAE;IACrC,IAAI,IAAI,EAAE;MACNwnD,MAAM,CAAC,IAAI,EAAEluD,SAAS,CAAC3J,MAAM,GAAG;QAAEmxF,CAAC,EAAE,CAAC;QAAEpvF,IAAI,EAAEmvF,UAAU;QAAE7gF,EAAE,EAAE1G,SAAS,CAAC3J,MAAM,GAAG,CAAC,GAAGqQ,EAAE,GAAG6gF;MAAW,CAAC,GAAG;QAAEC,CAAC,EAAE;MAAE,CAAC,CAAC;IACtH,CAAC,MACI;MACD,IAAIj3B,EAAE,GAAG,IAAI+2B,QAAQ,CAAC,CAAC;MACvB,IAAIC,UAAU,IAAK,GAAG,IAAIA,UAAW,EAAE;QACnCr5B,MAAM,CAACqC,EAAE,EAAEg3B,UAAU,CAAC;MAC1B;MACA,OAAOh3B,EAAE;IACb;EACJ,CAAC;EACD7B,KAAK,CAAC44B,QAAQ,CAAC1gC,SAAS,GAAGwe,EAAE,GAAG;IACxBrrD,GAAG,EAAE,SAAAA,CAAU0tE,QAAQ,EAAE;MACrBC,WAAW,CAAC,IAAI,EAAED,QAAQ,CAAC;MAC3B,OAAO,IAAI;IACf,CAAC;IACDE,MAAM,EAAE,SAAAA,CAAU/vF,GAAG,EAAE;MACnBy7E,QAAQ,CAAC,IAAI,EAAEz7E,GAAG,EAAEA,GAAG,CAAC;MACxB,OAAO,IAAI;IACf,CAAC;IACDgwF,OAAO,EAAE,SAAAA,CAAUtxD,IAAI,EAAE;MACrB,IAAIgkC,KAAK,GAAG,IAAI;MAChBhkC,IAAI,CAACxa,OAAO,CAAC,UAAUlkB,GAAG,EAAE;QAAE,OAAOy7E,QAAQ,CAAC/Y,KAAK,EAAE1iE,GAAG,EAAEA,GAAG,CAAC;MAAE,CAAC,CAAC;MAClE,OAAO,IAAI;IACf;EACJ,CAAC,EACDwtE,EAAE,CAACrT,cAAc,CAAC,GAAG,YAAY;IAC7B,OAAO81B,mBAAmB,CAAC,IAAI,CAAC;EACpC,CAAC,EACDziB,EAAE,CAAC,CAAC;EACR,SAASiO,QAAQA,CAACgB,MAAM,EAAEj8E,IAAI,EAAEsO,EAAE,EAAE;IAChC,IAAIu2E,IAAI,GAAG9X,GAAG,CAAC/sE,IAAI,EAAEsO,EAAE,CAAC;IACxB,IAAIoqD,KAAK,CAACmsB,IAAI,CAAC,EACX;IACJ,IAAIA,IAAI,GAAG,CAAC,EACR,MAAM7nB,UAAU,CAAC,CAAC;IACtB,IAAIgyB,YAAY,CAAC/S,MAAM,CAAC,EACpB,OAAOnmB,MAAM,CAACmmB,MAAM,EAAE;MAAEj8E,IAAI,EAAEA,IAAI;MAAEsO,EAAE,EAAEA,EAAE;MAAE8gF,CAAC,EAAE;IAAE,CAAC,CAAC;IACvD,IAAIM,IAAI,GAAGzT,MAAM,CAACvmB,CAAC;IACnB,IAAIi6B,KAAK,GAAG1T,MAAM,CAAC/2B,CAAC;IACpB,IAAI6nB,GAAG,CAACz+D,EAAE,EAAE2tE,MAAM,CAACj8E,IAAI,CAAC,GAAG,CAAC,EAAE;MAC1B0vF,IAAI,GACEzU,QAAQ,CAACyU,IAAI,EAAE1vF,IAAI,EAAEsO,EAAE,CAAC,GACvB2tE,MAAM,CAACvmB,CAAC,GAAG;QAAE11D,IAAI,EAAEA,IAAI;QAAEsO,EAAE,EAAEA,EAAE;QAAE8gF,CAAC,EAAE,CAAC;QAAE15B,CAAC,EAAE,IAAI;QAAExQ,CAAC,EAAE;MAAK,CAAE;MACjE,OAAO0qC,SAAS,CAAC3T,MAAM,CAAC;IAC5B;IACA,IAAIlP,GAAG,CAAC/sE,IAAI,EAAEi8E,MAAM,CAAC3tE,EAAE,CAAC,GAAG,CAAC,EAAE;MAC1BqhF,KAAK,GACC1U,QAAQ,CAAC0U,KAAK,EAAE3vF,IAAI,EAAEsO,EAAE,CAAC,GACxB2tE,MAAM,CAAC/2B,CAAC,GAAG;QAAEllD,IAAI,EAAEA,IAAI;QAAEsO,EAAE,EAAEA,EAAE;QAAE8gF,CAAC,EAAE,CAAC;QAAE15B,CAAC,EAAE,IAAI;QAAExQ,CAAC,EAAE;MAAK,CAAE;MACjE,OAAO0qC,SAAS,CAAC3T,MAAM,CAAC;IAC5B;IACA,IAAIlP,GAAG,CAAC/sE,IAAI,EAAEi8E,MAAM,CAACj8E,IAAI,CAAC,GAAG,CAAC,EAAE;MAC5Bi8E,MAAM,CAACj8E,IAAI,GAAGA,IAAI;MAClBi8E,MAAM,CAACvmB,CAAC,GAAG,IAAI;MACfumB,MAAM,CAACmT,CAAC,GAAGO,KAAK,GAAGA,KAAK,CAACP,CAAC,GAAG,CAAC,GAAG,CAAC;IACtC;IACA,IAAIriB,GAAG,CAACz+D,EAAE,EAAE2tE,MAAM,CAAC3tE,EAAE,CAAC,GAAG,CAAC,EAAE;MACxB2tE,MAAM,CAAC3tE,EAAE,GAAGA,EAAE;MACd2tE,MAAM,CAAC/2B,CAAC,GAAG,IAAI;MACf+2B,MAAM,CAACmT,CAAC,GAAGnT,MAAM,CAACvmB,CAAC,GAAGumB,MAAM,CAACvmB,CAAC,CAAC05B,CAAC,GAAG,CAAC,GAAG,CAAC;IAC5C;IACA,IAAIS,cAAc,GAAG,CAAC5T,MAAM,CAAC/2B,CAAC;IAC9B,IAAIwqC,IAAI,IAAI,CAACzT,MAAM,CAACvmB,CAAC,EAAE;MACnB45B,WAAW,CAACrT,MAAM,EAAEyT,IAAI,CAAC;IAC7B;IACA,IAAIC,KAAK,IAAIE,cAAc,EAAE;MACzBP,WAAW,CAACrT,MAAM,EAAE0T,KAAK,CAAC;IAC9B;EACJ;EACA,SAASL,WAAWA,CAACrT,MAAM,EAAE6T,MAAM,EAAE;IACjC,SAASC,YAAYA,CAAC9T,MAAM,EAAEjP,EAAE,EAAE;MAC9B,IAAIhtE,IAAI,GAAGgtE,EAAE,CAAChtE,IAAI;QAAEsO,EAAE,GAAG0+D,EAAE,CAAC1+D,EAAE;QAAEonD,CAAC,GAAGsX,EAAE,CAACtX,CAAC;QAAExQ,CAAC,GAAG8nB,EAAE,CAAC9nB,CAAC;MAClD+1B,QAAQ,CAACgB,MAAM,EAAEj8E,IAAI,EAAEsO,EAAE,CAAC;MAC1B,IAAIonD,CAAC,EACDq6B,YAAY,CAAC9T,MAAM,EAAEvmB,CAAC,CAAC;MAC3B,IAAIxQ,CAAC,EACD6qC,YAAY,CAAC9T,MAAM,EAAE/2B,CAAC,CAAC;IAC/B;IACA,IAAI,CAAC8pC,YAAY,CAACc,MAAM,CAAC,EACrBC,YAAY,CAAC9T,MAAM,EAAE6T,MAAM,CAAC;EACpC;EACA,SAASE,aAAaA,CAACC,SAAS,EAAEC,SAAS,EAAE;IACzC,IAAIC,EAAE,GAAGV,mBAAmB,CAACS,SAAS,CAAC;IACvC,IAAIE,WAAW,GAAGD,EAAE,CAACh2B,IAAI,CAAC,CAAC;IAC3B,IAAIi2B,WAAW,CAACh2B,IAAI,EAChB,OAAO,KAAK;IAChB,IAAIptC,CAAC,GAAGojE,WAAW,CAAC5nF,KAAK;IACzB,IAAI6nF,EAAE,GAAGZ,mBAAmB,CAACQ,SAAS,CAAC;IACvC,IAAIK,WAAW,GAAGD,EAAE,CAACl2B,IAAI,CAACntC,CAAC,CAAChtB,IAAI,CAAC;IACjC,IAAIO,CAAC,GAAG+vF,WAAW,CAAC9nF,KAAK;IACzB,OAAO,CAAC4nF,WAAW,CAACh2B,IAAI,IAAI,CAACk2B,WAAW,CAACl2B,IAAI,EAAE;MAC3C,IAAI2S,GAAG,CAACxsE,CAAC,CAACP,IAAI,EAAEgtB,CAAC,CAAC1e,EAAE,CAAC,IAAI,CAAC,IAAIy+D,GAAG,CAACxsE,CAAC,CAAC+N,EAAE,EAAE0e,CAAC,CAAChtB,IAAI,CAAC,IAAI,CAAC,EAChD,OAAO,IAAI;MACf+sE,GAAG,CAAC//C,CAAC,CAAChtB,IAAI,EAAEO,CAAC,CAACP,IAAI,CAAC,GAAG,CAAC,GAChBgtB,CAAC,GAAG,CAACojE,WAAW,GAAGD,EAAE,CAACh2B,IAAI,CAAC55D,CAAC,CAACP,IAAI,CAAC,EAAEwI,KAAK,GACzCjI,CAAC,GAAG,CAAC+vF,WAAW,GAAGD,EAAE,CAACl2B,IAAI,CAACntC,CAAC,CAAChtB,IAAI,CAAC,EAAEwI,KAAM;IACrD;IACA,OAAO,KAAK;EAChB;EACA,SAASinF,mBAAmBA,CAACR,IAAI,EAAE;IAC/B,IAAIpyD,KAAK,GAAGmyD,YAAY,CAACC,IAAI,CAAC,GAAG,IAAI,GAAG;MAAEzjE,CAAC,EAAE,CAAC;MAAE3V,CAAC,EAAEo5E;IAAK,CAAC;IACzD,OAAO;MACH90B,IAAI,EAAE,SAAAA,CAAU36D,GAAG,EAAE;QACjB,IAAI+wF,WAAW,GAAG3oF,SAAS,CAAC3J,MAAM,GAAG,CAAC;QACtC,OAAO4+B,KAAK,EAAE;UACV,QAAQA,KAAK,CAACrR,CAAC;YACX,KAAK,CAAC;cACFqR,KAAK,CAACrR,CAAC,GAAG,CAAC;cACX,IAAI+kE,WAAW,EAAE;gBACb,OAAO1zD,KAAK,CAAChnB,CAAC,CAAC6/C,CAAC,IAAIqX,GAAG,CAACvtE,GAAG,EAAEq9B,KAAK,CAAChnB,CAAC,CAAC7V,IAAI,CAAC,GAAG,CAAC,EAC1C68B,KAAK,GAAG;kBAAE2zD,EAAE,EAAE3zD,KAAK;kBAAEhnB,CAAC,EAAEgnB,KAAK,CAAChnB,CAAC,CAAC6/C,CAAC;kBAAElqC,CAAC,EAAE;gBAAE,CAAC;cACjD,CAAC,MACI;gBACD,OAAOqR,KAAK,CAAChnB,CAAC,CAAC6/C,CAAC,EACZ74B,KAAK,GAAG;kBAAE2zD,EAAE,EAAE3zD,KAAK;kBAAEhnB,CAAC,EAAEgnB,KAAK,CAAChnB,CAAC,CAAC6/C,CAAC;kBAAElqC,CAAC,EAAE;gBAAE,CAAC;cACjD;YACJ,KAAK,CAAC;cACFqR,KAAK,CAACrR,CAAC,GAAG,CAAC;cACX,IAAI,CAAC+kE,WAAW,IAAIxjB,GAAG,CAACvtE,GAAG,EAAEq9B,KAAK,CAAChnB,CAAC,CAACvH,EAAE,CAAC,IAAI,CAAC,EACzC,OAAO;gBAAE9F,KAAK,EAAEq0B,KAAK,CAAChnB,CAAC;gBAAEukD,IAAI,EAAE;cAAM,CAAC;YAC9C,KAAK,CAAC;cACF,IAAIv9B,KAAK,CAAChnB,CAAC,CAACqvC,CAAC,EAAE;gBACXroB,KAAK,CAACrR,CAAC,GAAG,CAAC;gBACXqR,KAAK,GAAG;kBAAE2zD,EAAE,EAAE3zD,KAAK;kBAAEhnB,CAAC,EAAEgnB,KAAK,CAAChnB,CAAC,CAACqvC,CAAC;kBAAE15B,CAAC,EAAE;gBAAE,CAAC;gBACzC;cACJ;YACJ,KAAK,CAAC;cACFqR,KAAK,GAAGA,KAAK,CAAC2zD,EAAE;UACxB;QACJ;QACA,OAAO;UAAEp2B,IAAI,EAAE;QAAK,CAAC;MACzB;IACJ,CAAC;EACL;EACA,SAASw1B,SAASA,CAAC3T,MAAM,EAAE;IACvB,IAAIjP,EAAE,EAAEyjB,EAAE;IACV,IAAI5L,IAAI,GAAG,CAAC,CAAC,CAAC7X,EAAE,GAAGiP,MAAM,CAAC/2B,CAAC,MAAM,IAAI,IAAI8nB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACoiB,CAAC,KAAK,CAAC,KAAK,CAAC,CAACqB,EAAE,GAAGxU,MAAM,CAACvmB,CAAC,MAAM,IAAI,IAAI+6B,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACrB,CAAC,KAAK,CAAC,CAAC;IAClJ,IAAIlqC,CAAC,GAAG2/B,IAAI,GAAG,CAAC,GAAG,GAAG,GAAGA,IAAI,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE;IAC7C,IAAI3/B,CAAC,EAAE;MACH,IAAIwQ,CAAC,GAAGxQ,CAAC,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG;MAC7B,IAAIwrC,SAAS,GAAGt7B,QAAQ,CAAC,CAAC,CAAC,EAAE6mB,MAAM,CAAC;MACpC,IAAI0U,YAAY,GAAG1U,MAAM,CAAC/2B,CAAC,CAAC;MAC5B+2B,MAAM,CAACj8E,IAAI,GAAG2wF,YAAY,CAAC3wF,IAAI;MAC/Bi8E,MAAM,CAAC3tE,EAAE,GAAGqiF,YAAY,CAACriF,EAAE;MAC3B2tE,MAAM,CAAC/2B,CAAC,CAAC,GAAGyrC,YAAY,CAACzrC,CAAC,CAAC;MAC3BwrC,SAAS,CAACxrC,CAAC,CAAC,GAAGyrC,YAAY,CAACj7B,CAAC,CAAC;MAC9BumB,MAAM,CAACvmB,CAAC,CAAC,GAAGg7B,SAAS;MACrBA,SAAS,CAACtB,CAAC,GAAGwB,YAAY,CAACF,SAAS,CAAC;IACzC;IACAzU,MAAM,CAACmT,CAAC,GAAGwB,YAAY,CAAC3U,MAAM,CAAC;EACnC;EACA,SAAS2U,YAAYA,CAAC5jB,EAAE,EAAE;IACtB,IAAI9nB,CAAC,GAAG8nB,EAAE,CAAC9nB,CAAC;MAAEwQ,CAAC,GAAGsX,EAAE,CAACtX,CAAC;IACtB,OAAO,CAACxQ,CAAC,GAAIwQ,CAAC,GAAG9kD,IAAI,CAACmE,GAAG,CAACmwC,CAAC,CAACkqC,CAAC,EAAE15B,CAAC,CAAC05B,CAAC,CAAC,GAAGlqC,CAAC,CAACkqC,CAAC,GAAI15B,CAAC,GAAGA,CAAC,CAAC05B,CAAC,GAAG,CAAC,IAAI,CAAC;EACjE;EAEA,IAAIyB,uBAAuB,GAAG;IAC1B1oF,KAAK,EAAE,QAAQ;IACf8kF,KAAK,EAAE,CAAC;IACRx0D,MAAM,EAAE,SAAAA,CAAUuzC,IAAI,EAAE;MACpB,IAAI4d,MAAM,GAAG5d,IAAI,CAACN,MAAM,CAACrvE,IAAI;MAC7B,IAAIy0F,UAAU,GAAG,IAAI5B,QAAQ,CAACljB,IAAI,CAACyW,OAAO,EAAEzW,IAAI,CAAC0W,OAAO,CAAC;MACzD,OAAOttB,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAE4W,IAAI,CAAC,EAAE;QAAE6H,KAAK,EAAE,SAAAA,CAAUrI,SAAS,EAAE;UAC1D,IAAIqI,KAAK,GAAG7H,IAAI,CAAC6H,KAAK,CAACrI,SAAS,CAAC;UACjC,IAAIE,MAAM,GAAGmI,KAAK,CAACnI,MAAM;UACzB,IAAI4F,UAAU,GAAG5F,MAAM,CAAC4F,UAAU;UAClC,IAAIltB,UAAU,GAAGktB,UAAU,CAACltB,UAAU;YAAE6xB,QAAQ,GAAG3E,UAAU,CAAC2E,QAAQ;UACtE,IAAI8a,UAAU,GAAG37B,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEye,KAAK,CAAC,EAAE;YAAExF,MAAM,EAAE,SAAAA,CAAUuS,GAAG,EAAE;cAChE,IAAIvX,KAAK,GAAGuX,GAAG,CAACvX,KAAK;cACrB,IAAI2nB,YAAY,GAAG3nB,KAAK,CAAC2nB,YAAY,KAAK3nB,KAAK,CAAC2nB,YAAY,GAAG,CAAC,CAAC,CAAC;cAClE,IAAIC,WAAW,GAAG,SAAAA,CAAUhc,SAAS,EAAE;gBACnC,IAAIrpD,IAAI,GAAG,QAAQ,GAAGg+D,MAAM,GAAG,GAAG,GAAGpe,SAAS,GAAG,GAAG,GAAGyJ,SAAS;gBAChE,OAAQ+b,YAAY,CAACplE,IAAI,CAAC,KACrBolE,YAAY,CAACplE,IAAI,CAAC,GAAG,IAAIsjE,QAAQ,CAAC,CAAC,CAAC;cAC7C,CAAC;cACD,IAAIgC,UAAU,GAAGD,WAAW,CAAC,EAAE,CAAC;cAChC,IAAIE,YAAY,GAAGF,WAAW,CAAC,OAAO,CAAC;cACvC,IAAI3rF,IAAI,GAAGs7E,GAAG,CAACt7E,IAAI;cACnB,IAAI0nE,EAAE,GAAG4T,GAAG,CAACt7E,IAAI,KAAK,aAAa,GAC7B,CAACs7E,GAAG,CAAClxD,KAAK,CAAC,GACXkxD,GAAG,CAACt7E,IAAI,KAAK,QAAQ,GACjB,CAACs7E,GAAG,CAAC1iD,IAAI,CAAC,GACV0iD,GAAG,CAAC1mE,MAAM,CAACjc,MAAM,GAAG,EAAE,GAClB,CAAC,EAAE,EAAE2iF,GAAG,CAAC1mE,MAAM,CAAC,GAChB,EAAE;gBAAEgkB,IAAI,GAAG8uC,EAAE,CAAC,CAAC,CAAC;gBAAEokB,OAAO,GAAGpkB,EAAE,CAAC,CAAC,CAAC;cAC/C,IAAIqkB,QAAQ,GAAGzQ,GAAG,CAACvX,KAAK,CAAC,QAAQ,CAAC;cAClC,OAAOwK,KAAK,CAACxF,MAAM,CAACuS,GAAG,CAAC,CAACtuC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;gBACzC,IAAI0mD,OAAO,CAACxwB,IAAI,CAAC,EAAE;kBACf,IAAI54B,IAAI,KAAK,QAAQ,EACjB44B,IAAI,GAAGl2B,GAAG,CAACwa,OAAO;kBACtB0uE,UAAU,CAAC1B,OAAO,CAACtxD,IAAI,CAAC;kBACxB,IAAIozD,OAAO,GAAGzC,uBAAuB,CAAC3wD,IAAI,EAAEmzD,QAAQ,CAAC;kBACrD,IAAI,CAACC,OAAO,IAAIhsF,IAAI,KAAK,KAAK,EAAE;oBAC5B6rF,YAAY,CAAC3B,OAAO,CAACtxD,IAAI,CAAC;kBAC9B;kBACA,IAAIozD,OAAO,IAAIF,OAAO,EAAE;oBACpBG,oBAAoB,CAACN,WAAW,EAAEvlB,MAAM,EAAE4lB,OAAO,EAAEF,OAAO,CAAC;kBAC/D;gBACJ,CAAC,MACI,IAAIlzD,IAAI,EAAE;kBACX,IAAIxO,KAAK,GAAG;oBAAE1vB,IAAI,EAAEk+B,IAAI,CAAC8sC,KAAK;oBAAE18D,EAAE,EAAE4vB,IAAI,CAACgtC;kBAAM,CAAC;kBAChDimB,YAAY,CAACxvE,GAAG,CAAC+N,KAAK,CAAC;kBACvBwhE,UAAU,CAACvvE,GAAG,CAAC+N,KAAK,CAAC;gBACzB,CAAC,MACI;kBACDwhE,UAAU,CAACvvE,GAAG,CAACmvE,UAAU,CAAC;kBAC1BK,YAAY,CAACxvE,GAAG,CAACmvE,UAAU,CAAC;kBAC5BplB,MAAM,CAACa,OAAO,CAAC7oD,OAAO,CAAC,UAAUq/B,GAAG,EAAE;oBAAE,OAAOkuC,WAAW,CAACluC,GAAG,CAAC1mD,IAAI,CAAC,CAACslB,GAAG,CAACmvE,UAAU,CAAC;kBAAE,CAAC,CAAC;gBAC5F;gBACA,OAAO9oF,GAAG;cACd,CAAC,CAAC;YACN;UAAE,CAAC,CAAC;UACR,IAAIwpF,QAAQ,GAAG,SAAAA,CAAUxkB,EAAE,EAAE;YACzB,IAAIyjB,EAAE,EAAEgB,EAAE;YACV,IAAIC,EAAE,GAAG1kB,EAAE,CAAC8E,KAAK;cAAEniE,KAAK,GAAG+hF,EAAE,CAAC/hF,KAAK;cAAE+f,KAAK,GAAGgiE,EAAE,CAAChiE,KAAK;YACrD,OAAO,CACH/f,KAAK,EACL,IAAIu/E,QAAQ,CAAC,CAACuB,EAAE,GAAG/gE,KAAK,CAACs7C,KAAK,MAAM,IAAI,IAAIylB,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGzkB,IAAI,CAACyW,OAAO,EAAE,CAACgP,EAAE,GAAG/hE,KAAK,CAACw7C,KAAK,MAAM,IAAI,IAAIumB,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAGzlB,IAAI,CAAC0W,OAAO,CAAC,CACnJ;UACL,CAAC;UACD,IAAIiP,eAAe,GAAG;YAClB1pF,GAAG,EAAE,SAAAA,CAAU24E,GAAG,EAAE;cAAE,OAAO,CAACtP,UAAU,EAAE,IAAI4d,QAAQ,CAACtO,GAAG,CAACphF,GAAG,CAAC,CAAC;YAAE,CAAC;YACnE49C,OAAO,EAAE,SAAAA,CAAUwjC,GAAG,EAAE;cAAE,OAAO,CAACtP,UAAU,EAAE,IAAI4d,QAAQ,CAAC,CAAC,CAACM,OAAO,CAAC5O,GAAG,CAAC1iD,IAAI,CAAC,CAAC;YAAE,CAAC;YAClFqvC,KAAK,EAAEikB,QAAQ;YACf1f,KAAK,EAAE0f,QAAQ;YACf/f,UAAU,EAAE+f;UAChB,CAAC;UACDtzD,IAAI,CAACyzD,eAAe,CAAC,CAACjuE,OAAO,CAAC,UAAUod,MAAM,EAAE;YAC5CiwD,UAAU,CAACjwD,MAAM,CAAC,GAAG,UAAU8/C,GAAG,EAAE;cAChC,IAAIgR,MAAM,GAAG/wB,GAAG,CAAC+wB,MAAM;cACvB,IAAIA,MAAM,EAAE;gBACR,IAAIX,WAAW,GAAG,SAAAA,CAAUhc,SAAS,EAAE;kBACnC,IAAIrpD,IAAI,GAAG,QAAQ,GAAGg+D,MAAM,GAAG,GAAG,GAAGpe,SAAS,GAAG,GAAG,GAAGyJ,SAAS;kBAChE,OAAQ2c,MAAM,CAAChmE,IAAI,CAAC,KACfgmE,MAAM,CAAChmE,IAAI,CAAC,GAAG,IAAIsjE,QAAQ,CAAC,CAAC,CAAC;gBACvC,CAAC;gBACD,IAAI2C,YAAY,GAAGZ,WAAW,CAAC,EAAE,CAAC;gBAClC,IAAIa,cAAc,GAAGb,WAAW,CAAC,OAAO,CAAC;gBACzC,IAAIjkB,EAAE,GAAG2kB,eAAe,CAAC7wD,MAAM,CAAC,CAAC8/C,GAAG,CAAC;kBAAEmR,YAAY,GAAG/kB,EAAE,CAAC,CAAC,CAAC;kBAAEglB,aAAa,GAAGhlB,EAAE,CAAC,CAAC,CAAC;gBAClFikB,WAAW,CAACc,YAAY,CAAC11F,IAAI,IAAI,EAAE,CAAC,CAACslB,GAAG,CAACqwE,aAAa,CAAC;gBACvD,IAAI,CAACD,YAAY,CAAC9R,YAAY,EAAE;kBAC5B,IAAIn/C,MAAM,KAAK,OAAO,EAAE;oBACpBgxD,cAAc,CAACnwE,GAAG,CAACmvE,UAAU,CAAC;kBAClC,CAAC,MACI;oBACD,IAAImB,aAAa,GAAGnxD,MAAM,KAAK,OAAO,IAClCm1C,QAAQ,IACR2K,GAAG,CAAC1mE,MAAM,IACV25D,KAAK,CAAC/B,KAAK,CAAC1c,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEwrB,GAAG,CAAC,EAAE;sBAAE1mE,MAAM,EAAE;oBAAM,CAAC,CAAC,CAAC;oBAC/D,OAAO25D,KAAK,CAAC/yC,MAAM,CAAC,CAACy0B,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,CAAC0qC,IAAI,CAAC,UAAUtqC,GAAG,EAAE;sBAC5D,IAAI84B,MAAM,KAAK,OAAO,EAAE;wBACpB,IAAIm1C,QAAQ,IAAI2K,GAAG,CAAC1mE,MAAM,EAAE;0BACxB,OAAO+3E,aAAa,CAAC3/C,IAAI,CAAC,UAAU06B,EAAE,EAAE;4BACpC,IAAIklB,aAAa,GAAGllB,EAAE,CAACnwE,MAAM;4BAC7Bg1F,YAAY,CAACrC,OAAO,CAAC0C,aAAa,CAAC;4BACnC,OAAOlqF,GAAG;0BACd,CAAC,CAAC;wBACN;wBACA,IAAImqF,KAAK,GAAGvR,GAAG,CAAC1mE,MAAM,GAChBlS,GAAG,CAACnL,MAAM,CAACyD,GAAG,CAAC8jD,UAAU,CAAC,GAC1Bp8C,GAAG,CAACnL,MAAM;wBAChB,IAAI+jF,GAAG,CAAC1mE,MAAM,EAAE;0BACZ23E,YAAY,CAACrC,OAAO,CAAC2C,KAAK,CAAC;wBAC/B,CAAC,MACI;0BACDL,cAAc,CAACtC,OAAO,CAAC2C,KAAK,CAAC;wBACjC;sBACJ,CAAC,MACI,IAAIrxD,MAAM,KAAK,YAAY,EAAE;wBAC9B,IAAIsxD,QAAQ,GAAGpqF,GAAG;wBAClB,IAAIqqF,YAAY,GAAGzR,GAAG,CAAC1mE,MAAM;wBAC7B,OAAQk4E,QAAQ,IACZn4E,MAAM,CAACwe,MAAM,CAAC25D,QAAQ,EAAE;0BACpB5yF,GAAG,EAAE;4BACDyI,GAAG,EAAE,SAAAA,CAAA,EAAY;8BACb6pF,cAAc,CAACvC,MAAM,CAAC6C,QAAQ,CAAC9gB,UAAU,CAAC;8BAC1C,OAAO8gB,QAAQ,CAAC5yF,GAAG;4BACvB;0BACJ,CAAC;0BACD8xE,UAAU,EAAE;4BACRrpE,GAAG,EAAE,SAAAA,CAAA,EAAY;8BACb,IAAIqqF,IAAI,GAAGF,QAAQ,CAAC9gB,UAAU;8BAC9BwgB,cAAc,CAACvC,MAAM,CAAC+C,IAAI,CAAC;8BAC3B,OAAOA,IAAI;4BACf;0BACJ,CAAC;0BACD9pF,KAAK,EAAE;4BACHP,GAAG,EAAE,SAAAA,CAAA,EAAY;8BACboqF,YAAY,IAAIR,YAAY,CAACtC,MAAM,CAAC6C,QAAQ,CAAC9gB,UAAU,CAAC;8BACxD,OAAO8gB,QAAQ,CAAC5pF,KAAK;4BACzB;0BACJ;wBACJ,CAAC,CAAC;sBACV;sBACA,OAAOR,GAAG;oBACd,CAAC,CAAC;kBACN;gBACJ;cACJ;cACA,OAAO6rE,KAAK,CAAC/yC,MAAM,CAAC,CAACy0B,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;YAC/C,CAAC;UACL,CAAC,CAAC;UACF,OAAOmpF,UAAU;QACrB;MAAE,CAAC,CAAC;IACZ;EACJ,CAAC;EACD,SAASQ,oBAAoBA,CAACN,WAAW,EAAEvlB,MAAM,EAAE4lB,OAAO,EAAEF,OAAO,EAAE;IACjE,SAASmB,gBAAgBA,CAAC9lB,EAAE,EAAE;MAC1B,IAAI4iB,QAAQ,GAAG4B,WAAW,CAACxkB,EAAE,CAACpwE,IAAI,IAAI,EAAE,CAAC;MACzC,SAAS+nD,UAAUA,CAAC2R,GAAG,EAAE;QACrB,OAAOA,GAAG,IAAI,IAAI,GAAG0W,EAAE,CAACroB,UAAU,CAAC2R,GAAG,CAAC,GAAG,IAAI;MAClD;MACA,IAAIy8B,YAAY,GAAG,SAAAA,CAAUhzF,GAAG,EAAE;QAAE,OAAOitE,EAAE,CAAC0T,UAAU,IAAIzxB,OAAO,CAAClvD,GAAG,CAAC,GAClEA,GAAG,CAACkkB,OAAO,CAAC,UAAUlkB,GAAG,EAAE;UAAE,OAAO6vF,QAAQ,CAACE,MAAM,CAAC/vF,GAAG,CAAC;QAAE,CAAC,CAAC,GAC5D6vF,QAAQ,CAACE,MAAM,CAAC/vF,GAAG,CAAC;MAAE,CAAC;MAC7B,CAAC8xF,OAAO,IAAIF,OAAO,EAAE1tE,OAAO,CAAC,UAAU4kD,CAAC,EAAErgD,CAAC,EAAE;QACzC,IAAIwqE,MAAM,GAAGnB,OAAO,IAAIltC,UAAU,CAACktC,OAAO,CAACrpE,CAAC,CAAC,CAAC;QAC9C,IAAIyqE,MAAM,GAAGtB,OAAO,IAAIhtC,UAAU,CAACgtC,OAAO,CAACnpE,CAAC,CAAC,CAAC;QAC9C,IAAI8kD,GAAG,CAAC0lB,MAAM,EAAEC,MAAM,CAAC,KAAK,CAAC,EAAE;UAC3B,IAAID,MAAM,IAAI,IAAI,EACdD,YAAY,CAACC,MAAM,CAAC;UACxB,IAAIC,MAAM,IAAI,IAAI,EACdF,YAAY,CAACE,MAAM,CAAC;QAC5B;MACJ,CAAC,CAAC;IACN;IACAhnB,MAAM,CAACa,OAAO,CAAC7oD,OAAO,CAAC6uE,gBAAgB,CAAC;EAC5C;EAEA,IAAInK,OAAO,GAAK,YAAY;IACxB,SAAS/gD,KAAKA,CAAChrC,IAAI,EAAE4S,OAAO,EAAE;MAC1B,IAAIizD,KAAK,GAAG,IAAI;MAChB,IAAI,CAACihB,YAAY,GAAG,CAAC,CAAC;MACtB,IAAI,CAAC2D,KAAK,GAAG,CAAC;MACd,IAAI6L,IAAI,GAAGtrD,KAAK,CAACurD,YAAY;MAC7B,IAAI,CAAC1pB,QAAQ,GAAGj6D,OAAO,GAAGmmD,QAAQ,CAAC;QAC/BizB,MAAM,EAAEhhD,KAAK,CAACghD,MAAM;QAAElf,QAAQ,EAAE,IAAI;QACpC2D,SAAS,EAAE6lB,IAAI,CAAC7lB,SAAS;QAAEgP,WAAW,EAAE6W,IAAI,CAAC7W;MAAY,CAAC,EAAE7sE,OAAO,CAAC;MACxE,IAAI,CAAC49D,KAAK,GAAG;QACTC,SAAS,EAAE79D,OAAO,CAAC69D,SAAS;QAC5BgP,WAAW,EAAE7sE,OAAO,CAAC6sE;MACzB,CAAC;MACD,IAAIuM,MAAM,GAAGp5E,OAAO,CAACo5E,MAAM;MAC3B,IAAI,CAAC9e,SAAS,GAAG,CAAC,CAAC;MACnB,IAAI,CAAC+a,SAAS,GAAG,EAAE;MACnB,IAAI,CAACN,WAAW,GAAG,EAAE;MACrB,IAAI,CAAC1T,UAAU,GAAG,CAAC,CAAC;MACpB,IAAI,CAAC1H,KAAK,GAAG,IAAI;MACjB,IAAI,CAACsa,MAAM,GAAG,IAAI;MAClB,IAAIrmD,KAAK,GAAG;QACRmsC,WAAW,EAAE,IAAI;QACjBC,aAAa,EAAE,KAAK;QACpByhB,iBAAiB,EAAE,IAAI;QACvB7hB,YAAY,EAAE,KAAK;QACnB4gB,cAAc,EAAEpsB,GAAG;QACnB+L,cAAc,EAAE,IAAI;QACpBypB,UAAU,EAAEx1B,GAAG;QACfisB,aAAa,EAAE,IAAI;QACnBO,UAAU,EAAE,IAAI;QAChBrgB,cAAc,EAAE;MACpB,CAAC;MACD3sC,KAAK,CAACusC,cAAc,GAAG,IAAIpI,YAAY,CAAC,UAAUhjC,OAAO,EAAE;QACvDnB,KAAK,CAAC4sD,cAAc,GAAGzrD,OAAO;MAClC,CAAC,CAAC;MACFnB,KAAK,CAACysD,aAAa,GAAG,IAAItoB,YAAY,CAAC,UAAUsH,CAAC,EAAE1mC,MAAM,EAAE;QACxD/E,KAAK,CAACg2D,UAAU,GAAGjxD,MAAM;MAC7B,CAAC,CAAC;MACF,IAAI,CAAC6/B,MAAM,GAAG5kC,KAAK;MACnB,IAAI,CAACxgC,IAAI,GAAGA,IAAI;MAChB,IAAI,CAACihF,EAAE,GAAGjO,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE;QAAEsb,KAAK,EAAE,CAACvsB,eAAe,EAAEf,GAAG;MAAE,CAAC,CAAC;MAC1G,IAAI,CAACigB,EAAE,CAACqN,KAAK,CAACjb,SAAS,GAAGrY,QAAQ,CAAC,IAAI,CAACimB,EAAE,CAACqN,KAAK,CAACjb,SAAS,EAAE,UAAUA,SAAS,EAAE;QAC7E,OAAO,UAAUD,UAAU,EAAEqjB,OAAO,EAAE;UAClCzrD,KAAK,CAACwhD,GAAG,CAAC,YAAY;YAClB,IAAIhsD,KAAK,GAAGqlC,KAAK,CAACT,MAAM;YACxB,IAAI5kC,KAAK,CAACgsC,YAAY,EAAE;cACpB,IAAI,CAAChsC,KAAK,CAACmsC,WAAW,EAClBhI,YAAY,CAAChjC,OAAO,CAAC,CAAC,CAACsU,IAAI,CAACm9B,UAAU,CAAC;cAC3C,IAAIqjB,OAAO,EACPpjB,SAAS,CAACD,UAAU,CAAC;YAC7B,CAAC,MACI,IAAI5yC,KAAK,CAAC6tD,iBAAiB,EAAE;cAC9B7tD,KAAK,CAAC6tD,iBAAiB,CAAC17E,IAAI,CAACygE,UAAU,CAAC;cACxC,IAAIqjB,OAAO,EACPpjB,SAAS,CAACD,UAAU,CAAC;YAC7B,CAAC,MACI;cACDC,SAAS,CAACD,UAAU,CAAC;cACrB,IAAIsjB,IAAI,GAAG7wB,KAAK;cAChB,IAAI,CAAC4wB,OAAO,EACRpjB,SAAS,CAAC,SAAS1B,WAAWA,CAAA,EAAG;gBAC7B+kB,IAAI,CAACzV,EAAE,CAACqN,KAAK,CAAC3c,WAAW,CAACyB,UAAU,CAAC;gBACrCsjB,IAAI,CAACzV,EAAE,CAACqN,KAAK,CAAC3c,WAAW,CAACA,WAAW,CAAC;cAC1C,CAAC,CAAC;YACV;UACJ,CAAC,CAAC;QACN,CAAC;MACL,CAAC,CAAC;MACF,IAAI,CAACL,UAAU,GAAGuJ,2BAA2B,CAAC,IAAI,CAAC;MACnD,IAAI,CAAC5vC,KAAK,GAAG8oC,sBAAsB,CAAC,IAAI,CAAC;MACzC,IAAI,CAACkM,WAAW,GAAGmC,4BAA4B,CAAC,IAAI,CAAC;MACrD,IAAI,CAACgJ,OAAO,GAAGO,wBAAwB,CAAC,IAAI,CAAC;MAC7C,IAAI,CAAC5b,WAAW,GAAGuP,4BAA4B,CAAC,IAAI,CAAC;MACrD,IAAI,CAAC2B,EAAE,CAAC,eAAe,EAAE,UAAUH,EAAE,EAAE;QACnC,IAAIA,EAAE,CAAC6V,UAAU,GAAG,CAAC,EACjB5wF,OAAO,CAAComE,IAAI,CAAC,gDAAgD,GAAGtG,KAAK,CAAC7lE,IAAI,GAAG,0CAA0C,CAAC,CAAC,KAEzH+F,OAAO,CAAComE,IAAI,CAAC,+CAA+C,GAAGtG,KAAK,CAAC7lE,IAAI,GAAG,iDAAiD,CAAC;QAClI6lE,KAAK,CAACpc,KAAK,CAAC,CAAC;MACjB,CAAC,CAAC;MACF,IAAI,CAACw3B,EAAE,CAAC,SAAS,EAAE,UAAUH,EAAE,EAAE;QAC7B,IAAI,CAACA,EAAE,CAAC6V,UAAU,IAAI7V,EAAE,CAAC6V,UAAU,GAAG7V,EAAE,CAAC0G,UAAU,EAC/CzhF,OAAO,CAAComE,IAAI,CAAC,gBAAgB,GAAGtG,KAAK,CAAC7lE,IAAI,GAAG,gBAAgB,CAAC,CAAC,KAE/D+F,OAAO,CAAComE,IAAI,CAAC,WAAW,GAAGtG,KAAK,CAAC7lE,IAAI,GAAG,gDAAgD,GAAG8gF,EAAE,CAAC0G,UAAU,GAAG,EAAE,CAAC;MACtH,CAAC,CAAC;MACF,IAAI,CAAClX,OAAO,GAAGuS,SAAS,CAACjwE,OAAO,CAAC6sE,WAAW,CAAC;MAC7C,IAAI,CAACxS,kBAAkB,GAAG,UAAU71D,IAAI,EAAEk1D,UAAU,EAAE+V,QAAQ,EAAEgN,iBAAiB,EAAE;QAAE,OAAO,IAAIxpB,KAAK,CAACoa,WAAW,CAAC7oE,IAAI,EAAEk1D,UAAU,EAAE+V,QAAQ,EAAExc,KAAK,CAACgH,QAAQ,CAACgU,2BAA2B,EAAEwO,iBAAiB,CAAC;MAAE,CAAC;MAC/M,IAAI,CAAC3B,cAAc,GAAG,UAAU5M,EAAE,EAAE;QAChCjb,KAAK,CAACob,EAAE,CAAC,SAAS,CAAC,CAACpR,IAAI,CAACiR,EAAE,CAAC;QAC5BjT,WAAW,CACNvxD,MAAM,CAAC,UAAU+S,CAAC,EAAE;UAAE,OAAOA,CAAC,CAACrvB,IAAI,KAAK6lE,KAAK,CAAC7lE,IAAI,IAAIqvB,CAAC,KAAKw2C,KAAK,IAAI,CAACx2C,CAAC,CAAC+1C,MAAM,CAAC+oB,OAAO;QAAE,CAAC,CAAC,CAC1FlqF,GAAG,CAAC,UAAUorB,CAAC,EAAE;UAAE,OAAOA,CAAC,CAAC4xD,EAAE,CAAC,eAAe,CAAC,CAACpR,IAAI,CAACiR,EAAE,CAAC;QAAE,CAAC,CAAC;MACrE,CAAC;MACD,IAAI,CAAC8V,GAAG,CAACjG,sBAAsB,CAAC;MAChC,IAAI,CAACiG,GAAG,CAACxF,eAAe,CAAC;MACzB,IAAI,CAACwF,GAAG,CAACpC,uBAAuB,CAAC;MACjC,IAAI,CAACoC,GAAG,CAACnE,6BAA6B,CAAC;MACvC,IAAI,CAACjG,GAAG,GAAG5uE,MAAM,CAACwe,MAAM,CAAC,IAAI,EAAE;QAAEswC,IAAI,EAAE;UAAEvgE,KAAK,EAAE;QAAK;MAAE,CAAC,CAAC;MACzD6/E,MAAM,CAAC3kE,OAAO,CAAC,UAAUwvE,KAAK,EAAE;QAAE,OAAOA,KAAK,CAAChxB,KAAK,CAAC;MAAE,CAAC,CAAC;IAC7D;IACA76B,KAAK,CAACmnB,SAAS,CAAClpC,OAAO,GAAG,UAAU2iE,aAAa,EAAE;MAC/C,IAAIvvB,KAAK,CAACuvB,aAAa,CAAC,IAAIA,aAAa,GAAG,GAAG,EAC3C,MAAM,IAAI1rB,UAAU,CAACM,IAAI,CAAC,wCAAwC,CAAC;MACvEorB,aAAa,GAAGr3E,IAAI,CAAC6P,KAAK,CAACwnE,aAAa,GAAG,EAAE,CAAC,GAAG,EAAE;MACnD,IAAI,IAAI,CAACrf,KAAK,IAAI,IAAI,CAACnH,MAAM,CAACwH,aAAa,EACvC,MAAM,IAAI1M,UAAU,CAACiV,MAAM,CAAC,0CAA0C,CAAC;MAC3E,IAAI,CAACsV,KAAK,GAAGl2E,IAAI,CAACmE,GAAG,CAAC,IAAI,CAAC+xE,KAAK,EAAEmB,aAAa,CAAC;MAChD,IAAIxqD,QAAQ,GAAG,IAAI,CAAC6mD,SAAS;MAC7B,IAAI6O,eAAe,GAAG11D,QAAQ,CAAC9kB,MAAM,CAAC,UAAU0Y,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACsyD,IAAI,CAACr+D,OAAO,KAAK2iE,aAAa;MAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACnG,IAAIkL,eAAe,EACf,OAAOA,eAAe;MAC1BA,eAAe,GAAG,IAAI,IAAI,CAAC1L,OAAO,CAACQ,aAAa,CAAC;MACjDxqD,QAAQ,CAACzuB,IAAI,CAACmkF,eAAe,CAAC;MAC9B11D,QAAQ,CAAC3a,IAAI,CAAC4gE,iBAAiB,CAAC;MAChCyP,eAAe,CAAC1rD,MAAM,CAAC,CAAC,CAAC,CAAC;MAC1B,IAAI,CAACg6B,MAAM,CAACooB,UAAU,GAAG,KAAK;MAC9B,OAAOsJ,eAAe;IAC1B,CAAC;IACD9rD,KAAK,CAACmnB,SAAS,CAAC4kC,UAAU,GAAG,UAAUrqD,EAAE,EAAE;MACvC,IAAIm5B,KAAK,GAAG,IAAI;MAChB,OAAQ,IAAI,CAAC0G,KAAK,KAAK,IAAI,CAACnH,MAAM,CAACoH,YAAY,IAAIhI,GAAG,CAACiI,UAAU,IAAI,IAAI,CAACC,IAAI,CAAC,GAAIhgC,EAAE,CAAC,CAAC,GAAG,IAAIi4B,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAClI,IAAIsgC,KAAK,CAACT,MAAM,CAACoH,YAAY,EAAE;UAC3B,OAAOjnC,MAAM,CAAC,IAAI26B,UAAU,CAACjB,cAAc,CAAC4G,KAAK,CAACT,MAAM,CAACuH,WAAW,CAAC,CAAC;QAC1E;QACA,IAAI,CAAC9G,KAAK,CAACT,MAAM,CAACwH,aAAa,EAAE;UAC7B,IAAI,CAAC/G,KAAK,CAACgH,QAAQ,CAACC,QAAQ,EAAE;YAC1BvnC,MAAM,CAAC,IAAI26B,UAAU,CAACjB,cAAc,CAAC,CAAC,CAAC;YACvC;UACJ;UACA4G,KAAK,CAACjsD,IAAI,CAAC,CAAC,CAAC1T,KAAK,CAAC86D,GAAG,CAAC;QAC3B;QACA6E,KAAK,CAACT,MAAM,CAAC2H,cAAc,CAAC92B,IAAI,CAACtU,OAAO,EAAE4D,MAAM,CAAC;MACrD,CAAC,CAAC,CAAC0Q,IAAI,CAACvJ,EAAE,CAAC;IACf,CAAC;IACD1B,KAAK,CAACmnB,SAAS,CAACykC,GAAG,GAAG,UAAUjmB,EAAE,EAAE;MAChC,IAAI7kE,KAAK,GAAG6kE,EAAE,CAAC7kE,KAAK;QAAEswB,MAAM,GAAGu0C,EAAE,CAACv0C,MAAM;QAAEw0D,KAAK,GAAGjgB,EAAE,CAACigB,KAAK;QAAE5wF,IAAI,GAAG2wE,EAAE,CAAC3wE,IAAI;MAC1E,IAAIA,IAAI,EACJ,IAAI,CAACg3F,KAAK,CAAC;QAAElrF,KAAK,EAAEA,KAAK;QAAE9L,IAAI,EAAEA;MAAK,CAAC,CAAC;MAC5C,IAAIwmF,WAAW,GAAG,IAAI,CAACM,YAAY,CAACh7E,KAAK,CAAC,KAAK,IAAI,CAACg7E,YAAY,CAACh7E,KAAK,CAAC,GAAG,EAAE,CAAC;MAC7E06E,WAAW,CAAC7zE,IAAI,CAAC;QAAE7G,KAAK,EAAEA,KAAK;QAAEswB,MAAM,EAAEA,MAAM;QAAEw0D,KAAK,EAAEA,KAAK,IAAI,IAAI,GAAG,EAAE,GAAGA,KAAK;QAAE5wF,IAAI,EAAEA;MAAK,CAAC,CAAC;MACjGwmF,WAAW,CAAC//D,IAAI,CAAC,UAAUkK,CAAC,EAAEzsB,CAAC,EAAE;QAAE,OAAOysB,CAAC,CAACigE,KAAK,GAAG1sF,CAAC,CAAC0sF,KAAK;MAAE,CAAC,CAAC;MAC/D,OAAO,IAAI;IACf,CAAC;IACD5lD,KAAK,CAACmnB,SAAS,CAAC6kC,KAAK,GAAG,UAAUrmB,EAAE,EAAE;MAClC,IAAI7kE,KAAK,GAAG6kE,EAAE,CAAC7kE,KAAK;QAAE9L,IAAI,GAAG2wE,EAAE,CAAC3wE,IAAI;QAAEo8B,MAAM,GAAGu0C,EAAE,CAACv0C,MAAM;MACxD,IAAItwB,KAAK,IAAI,IAAI,CAACg7E,YAAY,CAACh7E,KAAK,CAAC,EAAE;QACnC,IAAI,CAACg7E,YAAY,CAACh7E,KAAK,CAAC,GAAG,IAAI,CAACg7E,YAAY,CAACh7E,KAAK,CAAC,CAACwQ,MAAM,CAAC,UAAU26E,EAAE,EAAE;UACrE,OAAO76D,MAAM,GAAG66D,EAAE,CAAC76D,MAAM,KAAKA,MAAM,GAChCp8B,IAAI,GAAGi3F,EAAE,CAACj3F,IAAI,KAAKA,IAAI,GACnB,KAAK;QACjB,CAAC,CAAC;MACN;MACA,OAAO,IAAI;IACf,CAAC;IACDgrC,KAAK,CAACmnB,SAAS,CAACv4C,IAAI,GAAG,YAAY;MAC/B,OAAOozE,SAAS,CAAC,IAAI,CAAC;IAC1B,CAAC;IACDhiD,KAAK,CAACmnB,SAAS,CAACmb,MAAM,GAAG,YAAY;MACjC,IAAI9sC,KAAK,GAAG,IAAI,CAAC4kC,MAAM;MACvB,IAAI1e,GAAG,GAAGmnB,WAAW,CAAC9R,OAAO,CAAC,IAAI,CAAC;MACnC,IAAIrV,GAAG,IAAI,CAAC,EACRmnB,WAAW,CAACvR,MAAM,CAAC5V,GAAG,EAAE,CAAC,CAAC;MAC9B,IAAI,IAAI,CAAC6lB,KAAK,EAAE;QACZ,IAAI;UACA,IAAI,CAACA,KAAK,CAAC9iB,KAAK,CAAC,CAAC;QACtB,CAAC,CACD,OAAOhF,CAAC,EAAE,CAAE;QACZ,IAAI,CAACoiC,MAAM,CAACta,KAAK,GAAG,IAAI;MAC5B;MACA/rC,KAAK,CAACusC,cAAc,GAAG,IAAIpI,YAAY,CAAC,UAAUhjC,OAAO,EAAE;QACvDnB,KAAK,CAAC4sD,cAAc,GAAGzrD,OAAO;MAClC,CAAC,CAAC;MACFnB,KAAK,CAACysD,aAAa,GAAG,IAAItoB,YAAY,CAAC,UAAUsH,CAAC,EAAE1mC,MAAM,EAAE;QACxD/E,KAAK,CAACg2D,UAAU,GAAGjxD,MAAM;MAC7B,CAAC,CAAC;IACN,CAAC;IACDyF,KAAK,CAACmnB,SAAS,CAAC1I,KAAK,GAAG,YAAY;MAChC,IAAI,CAAC6jB,MAAM,CAAC,CAAC;MACb,IAAI9sC,KAAK,GAAG,IAAI,CAAC4kC,MAAM;MACvB,IAAI,CAACyH,QAAQ,CAACC,QAAQ,GAAG,KAAK;MAC9BtsC,KAAK,CAACmsC,WAAW,GAAG,IAAIzM,UAAU,CAACjB,cAAc,CAAC,CAAC;MACnD,IAAIz+B,KAAK,CAACosC,aAAa,EACnBpsC,KAAK,CAACg2D,UAAU,CAACh2D,KAAK,CAACmsC,WAAW,CAAC;IAC3C,CAAC;IACD3hC,KAAK,CAACmnB,SAAS,CAACvsB,MAAM,GAAG,YAAY;MACjC,IAAIigC,KAAK,GAAG,IAAI;MAChB,IAAIqxB,YAAY,GAAG3rF,SAAS,CAAC3J,MAAM,GAAG,CAAC;MACvC,IAAI4+B,KAAK,GAAG,IAAI,CAAC4kC,MAAM;MACvB,OAAO,IAAIT,YAAY,CAAC,UAAUhjC,OAAO,EAAE4D,MAAM,EAAE;QAC/C,IAAI4xD,QAAQ,GAAG,SAAAA,CAAA,EAAY;UACvBtxB,KAAK,CAACpc,KAAK,CAAC,CAAC;UACb,IAAI86B,GAAG,GAAG1e,KAAK,CAAC2K,KAAK,CAACC,SAAS,CAACqd,cAAc,CAACjoB,KAAK,CAAC7lE,IAAI,CAAC;UAC1DukF,GAAG,CAAC9iB,SAAS,GAAG2H,IAAI,CAAC,YAAY;YAC7BmjB,kBAAkB,CAAC1mB,KAAK,CAAC2K,KAAK,EAAE3K,KAAK,CAAC7lE,IAAI,CAAC;YAC3C2hC,OAAO,CAAC,CAAC;UACb,CAAC,CAAC;UACF4iD,GAAG,CAAC36B,OAAO,GAAG81B,kBAAkB,CAACn6C,MAAM,CAAC;UACxCg/C,GAAG,CAACkJ,SAAS,GAAG5nB,KAAK,CAAC6nB,cAAc;QACxC,CAAC;QACD,IAAIwJ,YAAY,EACZ,MAAM,IAAIh3B,UAAU,CAACiS,eAAe,CAAC,sCAAsC,CAAC;QAChF,IAAI3xC,KAAK,CAACosC,aAAa,EAAE;UACrBpsC,KAAK,CAACusC,cAAc,CAAC92B,IAAI,CAACkhD,QAAQ,CAAC;QACvC,CAAC,MACI;UACDA,QAAQ,CAAC,CAAC;QACd;MACJ,CAAC,CAAC;IACN,CAAC;IACDnsD,KAAK,CAACmnB,SAAS,CAACilC,SAAS,GAAG,YAAY;MACpC,OAAO,IAAI,CAAC7qB,KAAK;IACrB,CAAC;IACDvhC,KAAK,CAACmnB,SAAS,CAACkb,MAAM,GAAG,YAAY;MACjC,OAAO,IAAI,CAACd,KAAK,KAAK,IAAI;IAC9B,CAAC;IACDvhC,KAAK,CAACmnB,SAAS,CAACklC,aAAa,GAAG,YAAY;MACxC,IAAI1qB,WAAW,GAAG,IAAI,CAACvH,MAAM,CAACuH,WAAW;MACzC,OAAOA,WAAW,IAAKA,WAAW,CAAC3sE,IAAI,KAAK,gBAAiB;IACjE,CAAC;IACDgrC,KAAK,CAACmnB,SAAS,CAACmlC,SAAS,GAAG,YAAY;MACpC,OAAO,IAAI,CAAClyB,MAAM,CAACuH,WAAW,KAAK,IAAI;IAC3C,CAAC;IACD3hC,KAAK,CAACmnB,SAAS,CAAColC,iBAAiB,GAAG,YAAY;MAC5C,OAAO,IAAI,CAACnyB,MAAM,CAACooB,UAAU;IACjC,CAAC;IACD5vE,MAAM,CAAC02C,cAAc,CAACtpB,KAAK,CAACmnB,SAAS,EAAE,QAAQ,EAAE;MAC7CvmD,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,IAAIi6D,KAAK,GAAG,IAAI;QAChB,OAAOhkC,IAAI,CAAC,IAAI,CAACoyC,UAAU,CAAC,CAAChwE,GAAG,CAAC,UAAUjE,IAAI,EAAE;UAAE,OAAO6lE,KAAK,CAACoO,UAAU,CAACj0E,IAAI,CAAC;QAAE,CAAC,CAAC;MACxF,CAAC;MACDm9E,UAAU,EAAE,KAAK;MACjB5iB,YAAY,EAAE;IAClB,CAAC,CAAC;IACFvvB,KAAK,CAACmnB,SAAS,CAACxwC,WAAW,GAAG,YAAY;MACtC,IAAIgqB,IAAI,GAAGsjD,sBAAsB,CAAC/1B,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC;MACxD,OAAO,IAAI,CAACisF,YAAY,CAACt+B,KAAK,CAAC,IAAI,EAAEvtB,IAAI,CAAC;IAC9C,CAAC;IACDX,KAAK,CAACmnB,SAAS,CAACqlC,YAAY,GAAG,UAAUpgF,IAAI,EAAEosE,MAAM,EAAE2L,SAAS,EAAE;MAC9D,IAAItpB,KAAK,GAAG,IAAI;MAChB,IAAIwpB,iBAAiB,GAAG7qB,GAAG,CAACwI,KAAK;MACjC,IAAI,CAACqiB,iBAAiB,IAAIA,iBAAiB,CAAChjB,EAAE,KAAK,IAAI,IAAIj1D,IAAI,CAAC2kD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAC/EszB,iBAAiB,GAAG,IAAI;MAC5B,IAAIoI,gBAAgB,GAAGrgF,IAAI,CAAC2kD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;MAC/C3kD,IAAI,GAAGA,IAAI,CAACyb,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;MAC7C,IAAI6kE,OAAO,EAAEprB,UAAU;MACvB,IAAI;QACAA,UAAU,GAAGkX,MAAM,CAACv/E,GAAG,CAAC,UAAUuzE,KAAK,EAAE;UACrC,IAAI2S,SAAS,GAAG3S,KAAK,YAAY3R,KAAK,CAAC56B,KAAK,GAAGusC,KAAK,CAACx3E,IAAI,GAAGw3E,KAAK;UACjE,IAAI,OAAO2S,SAAS,KAAK,QAAQ,EAC7B,MAAM,IAAI1pB,SAAS,CAAC,iFAAiF,CAAC;UAC1G,OAAO0pB,SAAS;QACpB,CAAC,CAAC;QACF,IAAI/yE,IAAI,IAAI,GAAG,IAAIA,IAAI,KAAKi3D,QAAQ,EAChCqpB,OAAO,GAAGrpB,QAAQ,CAAC,KAClB,IAAIj3D,IAAI,IAAI,IAAI,IAAIA,IAAI,IAAIk3D,SAAS,EACtCopB,OAAO,GAAGppB,SAAS,CAAC,KAEpB,MAAM,IAAIpO,UAAU,CAACiS,eAAe,CAAC,4BAA4B,GAAG/6D,IAAI,CAAC;QAC7E,IAAIi4E,iBAAiB,EAAE;UACnB,IAAIA,iBAAiB,CAACj4E,IAAI,KAAKi3D,QAAQ,IAAIqpB,OAAO,KAAKppB,SAAS,EAAE;YAC9D,IAAImpB,gBAAgB,EAAE;cAClBpI,iBAAiB,GAAG,IAAI;YAC5B,CAAC,MAEG,MAAM,IAAInvB,UAAU,CAACy3B,cAAc,CAAC,wFAAwF,CAAC;UACrI;UACA,IAAItI,iBAAiB,EAAE;YACnB/iB,UAAU,CAACjlD,OAAO,CAAC,UAAU8iE,SAAS,EAAE;cACpC,IAAIkF,iBAAiB,IAAIA,iBAAiB,CAAC/iB,UAAU,CAACvQ,OAAO,CAACouB,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE;gBAC7E,IAAIsN,gBAAgB,EAAE;kBAClBpI,iBAAiB,GAAG,IAAI;gBAC5B,CAAC,MAEG,MAAM,IAAInvB,UAAU,CAACy3B,cAAc,CAAC,QAAQ,GAAGxN,SAAS,GACpD,sCAAsC,CAAC;cACnD;YACJ,CAAC,CAAC;UACN;UACA,IAAIsN,gBAAgB,IAAIpI,iBAAiB,IAAI,CAACA,iBAAiB,CAAC1O,MAAM,EAAE;YACpE0O,iBAAiB,GAAG,IAAI;UAC5B;QACJ;MACJ,CAAC,CACD,OAAO5qC,CAAC,EAAE;QACN,OAAO4qC,iBAAiB,GACpBA,iBAAiB,CAAClnB,QAAQ,CAAC,IAAI,EAAE,UAAU8D,CAAC,EAAE1mC,MAAM,EAAE;UAAEA,MAAM,CAACkf,CAAC,CAAC;QAAE,CAAC,CAAC,GACrEgmB,SAAS,CAAChmB,CAAC,CAAC;MACpB;MACA,IAAImzC,gBAAgB,GAAGxI,qBAAqB,CAACtuC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE42C,OAAO,EAAEprB,UAAU,EAAE+iB,iBAAiB,EAAEF,SAAS,CAAC;MAChH,OAAQE,iBAAiB,GACrBA,iBAAiB,CAAClnB,QAAQ,CAACuvB,OAAO,EAAEE,gBAAgB,EAAE,MAAM,CAAC,GAC7DpzB,GAAG,CAACwI,KAAK,GACLzF,MAAM,CAAC/C,GAAG,CAACgL,SAAS,EAAE,YAAY;QAAE,OAAO3J,KAAK,CAACkxB,UAAU,CAACa,gBAAgB,CAAC;MAAE,CAAC,CAAC,GACjF,IAAI,CAACb,UAAU,CAACa,gBAAgB,CAAC;IAC7C,CAAC;IACD5sD,KAAK,CAACmnB,SAAS,CAACqlB,KAAK,GAAG,UAAUrI,SAAS,EAAE;MACzC,IAAI,CAACpV,MAAM,CAAC,IAAI,CAACka,UAAU,EAAE9E,SAAS,CAAC,EAAE;QACrC,MAAM,IAAIjP,UAAU,CAAC23B,YAAY,CAAC,QAAQ,GAAG1oB,SAAS,GAAG,iBAAiB,CAAC;MAC/E;MACA,OAAO,IAAI,CAAC8E,UAAU,CAAC9E,SAAS,CAAC;IACrC,CAAC;IACD,OAAOnkC,KAAK;EAChB,CAAC,CAAC,CAAE;EAEJ,IAAI8sD,gBAAgB,GAAG,OAAOv6B,MAAM,KAAK,WAAW,IAAI,YAAY,IAAIA,MAAM,GACxEA,MAAM,CAACw6B,UAAU,GACjB,cAAc;EACpB,IAAIC,UAAU,GAAK,YAAY;IAC3B,SAASA,UAAUA,CAAC3kB,SAAS,EAAE;MAC3B,IAAI,CAAC4kB,UAAU,GAAG5kB,SAAS;IAC/B;IACA2kB,UAAU,CAAC7lC,SAAS,CAACkhB,SAAS,GAAG,UAAU15C,CAAC,EAAE3zB,KAAK,EAAEs8E,QAAQ,EAAE;MAC3D,OAAO,IAAI,CAAC2V,UAAU,CAAC,CAACt+D,CAAC,IAAI,OAAOA,CAAC,KAAK,UAAU,GAAG;QAAEmkC,IAAI,EAAEnkC,CAAC;QAAE3zB,KAAK,EAAEA,KAAK;QAAEs8E,QAAQ,EAAEA;MAAS,CAAC,GAAG3oD,CAAC,CAAC;IAC7G,CAAC;IACDq+D,UAAU,CAAC7lC,SAAS,CAAC2lC,gBAAgB,CAAC,GAAG,YAAY;MACjD,OAAO,IAAI;IACf,CAAC;IACD,OAAOE,UAAU;EACrB,CAAC,CAAC,CAAE;EAEJ,SAASE,sBAAsBA,CAACtY,MAAM,EAAE6T,MAAM,EAAE;IAC5C5xD,IAAI,CAAC4xD,MAAM,CAAC,CAACpsE,OAAO,CAAC,UAAUkI,IAAI,EAAE;MACjC,IAAIyjE,QAAQ,GAAGpT,MAAM,CAACrwD,IAAI,CAAC,KAAKqwD,MAAM,CAACrwD,IAAI,CAAC,GAAG,IAAIsjE,QAAQ,CAAC,CAAC,CAAC;MAC9DI,WAAW,CAACD,QAAQ,EAAES,MAAM,CAAClkE,IAAI,CAAC,CAAC;IACvC,CAAC,CAAC;IACF,OAAOqwD,MAAM;EACjB;EAEA,SAASuY,SAASA,CAACC,OAAO,EAAE;IACxB,IAAIC,QAAQ,GAAG,KAAK;IACpB,IAAIC,YAAY,GAAG74F,SAAS;IAC5B,IAAIs4F,UAAU,GAAG,IAAIC,UAAU,CAAC,UAAUO,QAAQ,EAAE;MAChD,IAAIjJ,gBAAgB,GAAGtxB,eAAe,CAACo6B,OAAO,CAAC;MAC/C,SAASI,OAAOA,CAACjD,MAAM,EAAE;QACrB,IAAIjG,gBAAgB,EAAE;UAClB/kB,uBAAuB,CAAC,CAAC;QAC7B;QACA,IAAIkuB,IAAI,GAAG,SAAAA,CAAA,EAAY;UAAE,OAAOnxB,QAAQ,CAAC8wB,OAAO,EAAE;YAAE7C,MAAM,EAAEA,MAAM;YAAEvoB,KAAK,EAAE;UAAK,CAAC,CAAC;QAAE,CAAC;QACrF,IAAIlR,EAAE,GAAG0I,GAAG,CAACwI,KAAK,GAEVzF,MAAM,CAAC/C,GAAG,CAACgL,SAAS,EAAEipB,IAAI,CAAC,GAC7BA,IAAI,CAAC,CAAC;QACZ,IAAInJ,gBAAgB,EAAE;UAClBxzB,EAAE,CAAC7lB,IAAI,CAAC+vB,uBAAuB,EAAEA,uBAAuB,CAAC;QAC7D;QACA,OAAOlK,EAAE;MACb;MACA,IAAI48B,MAAM,GAAG,KAAK;MAClB,IAAIC,SAAS,GAAG,CAAC,CAAC;MAClB,IAAIC,UAAU,GAAG,CAAC,CAAC;MACnB,IAAIC,YAAY,GAAG;QACf,IAAIH,MAAMA,CAAA,EAAG;UACT,OAAOA,MAAM;QACjB,CAAC;QACD/mB,WAAW,EAAE,SAAAA,CAAA,EAAY;UACrB+mB,MAAM,GAAG,IAAI;UACb1Y,YAAY,CAACoB,cAAc,CAACzP,WAAW,CAACmnB,gBAAgB,CAAC;QAC7D;MACJ,CAAC;MACDP,QAAQ,CAACx9C,KAAK,IAAIw9C,QAAQ,CAACx9C,KAAK,CAAC89C,YAAY,CAAC;MAC9C,IAAIE,QAAQ,GAAG,KAAK;QAAEC,gBAAgB,GAAG,KAAK;MAC9C,SAASC,YAAYA,CAAA,EAAG;QACpB,OAAOp3D,IAAI,CAAC+2D,UAAU,CAAC,CAAC3xD,IAAI,CAAC,UAAU9jC,GAAG,EAAE;UACxC,OAAOw1F,SAAS,CAACx1F,GAAG,CAAC,IAAIwwF,aAAa,CAACgF,SAAS,CAACx1F,GAAG,CAAC,EAAEy1F,UAAU,CAACz1F,GAAG,CAAC,CAAC;QAC3E,CAAC,CAAC;MACN;MACA,IAAI21F,gBAAgB,GAAG,SAAAA,CAAUjhB,KAAK,EAAE;QACpCqgB,sBAAsB,CAACS,SAAS,EAAE9gB,KAAK,CAAC;QACxC,IAAIohB,YAAY,CAAC,CAAC,EAAE;UAChBC,OAAO,CAAC,CAAC;QACb;MACJ,CAAC;MACD,IAAIA,OAAO,GAAG,SAAAA,CAAA,EAAY;QACtB,IAAIH,QAAQ,IAAIL,MAAM,EAClB;QACJC,SAAS,GAAG,CAAC,CAAC;QACd,IAAIpD,MAAM,GAAG,CAAC,CAAC;QACf,IAAI5sC,GAAG,GAAG6vC,OAAO,CAACjD,MAAM,CAAC;QACzB,IAAI,CAACyD,gBAAgB,EAAE;UACnBhZ,YAAY,CAACF,gCAAgC,EAAEgZ,gBAAgB,CAAC;UAChEE,gBAAgB,GAAG,IAAI;QAC3B;QACAD,QAAQ,GAAG,IAAI;QACf3yF,OAAO,CAACu7B,OAAO,CAACgnB,GAAG,CAAC,CAAC1S,IAAI,CAAC,UAAUz1C,MAAM,EAAE;UACxC63F,QAAQ,GAAG,IAAI;UACfC,YAAY,GAAG93F,MAAM;UACrBu4F,QAAQ,GAAG,KAAK;UAChB,IAAIL,MAAM,EACN;UACJ,IAAIO,YAAY,CAAC,CAAC,EAAE;YAChBC,OAAO,CAAC,CAAC;UACb,CAAC,MACI;YACDP,SAAS,GAAG,CAAC,CAAC;YACdC,UAAU,GAAGrD,MAAM;YACnBgD,QAAQ,CAACz6B,IAAI,IAAIy6B,QAAQ,CAACz6B,IAAI,CAACt9D,MAAM,CAAC;UAC1C;QACJ,CAAC,EAAE,UAAUE,GAAG,EAAE;UACdq4F,QAAQ,GAAG,KAAK;UAChBV,QAAQ,GAAG,KAAK;UAChBE,QAAQ,CAACvyF,KAAK,IAAIuyF,QAAQ,CAACvyF,KAAK,CAACtF,GAAG,CAAC;UACrCm4F,YAAY,CAAClnB,WAAW,CAAC,CAAC;QAC9B,CAAC,CAAC;MACN,CAAC;MACDunB,OAAO,CAAC,CAAC;MACT,OAAOL,YAAY;IACvB,CAAC,CAAC;IACFd,UAAU,CAACM,QAAQ,GAAG,YAAY;MAAE,OAAOA,QAAQ;IAAE,CAAC;IACtDN,UAAU,CAACoB,QAAQ,GAAG,YAAY;MAAE,OAAOb,YAAY;IAAE,CAAC;IAC1D,OAAOP,UAAU;EACrB;EAEA,IAAIqB,OAAO;EACX,IAAI;IACAA,OAAO,GAAG;MACN3oB,SAAS,EAAElX,OAAO,CAACkX,SAAS,IAAIlX,OAAO,CAAC8/B,YAAY,IAAI9/B,OAAO,CAAC+/B,eAAe,IAAI//B,OAAO,CAACggC,WAAW;MACtG9Z,WAAW,EAAElmB,OAAO,CAACkmB,WAAW,IAAIlmB,OAAO,CAACigC;IAChD,CAAC;EACL,CAAC,CACD,OAAO/0C,CAAC,EAAE;IACN20C,OAAO,GAAG;MAAE3oB,SAAS,EAAE,IAAI;MAAEgP,WAAW,EAAE;IAAK,CAAC;EACpD;EAEA,IAAIz0C,KAAK,GAAG+gD,OAAO;EACnB9xB,KAAK,CAACjvB,KAAK,EAAE+tB,QAAQ,CAACA,QAAQ,CAAC,CAAC,CAAC,EAAEgI,kBAAkB,CAAC,EAAE;IACpDn7B,MAAM,EAAE,SAAAA,CAAU6zD,YAAY,EAAE;MAC5B,IAAIptB,EAAE,GAAG,IAAIrhC,KAAK,CAACyuD,YAAY,EAAE;QAAEzN,MAAM,EAAE;MAAG,CAAC,CAAC;MAChD,OAAO3f,EAAE,CAACzmC,MAAM,CAAC,CAAC;IACtB,CAAC;IACD8zD,MAAM,EAAE,SAAAA,CAAU15F,IAAI,EAAE;MACpB,OAAO,IAAIgrC,KAAK,CAAChrC,IAAI,EAAE;QAAEgsF,MAAM,EAAE;MAAG,CAAC,CAAC,CAACpyE,IAAI,CAAC,CAAC,CAACq8B,IAAI,CAAC,UAAUo2B,EAAE,EAAE;QAC7DA,EAAE,CAAC5iB,KAAK,CAAC,CAAC;QACV,OAAO,IAAI;MACf,CAAC,CAAC,CAACvjD,KAAK,CAAC,qBAAqB,EAAE,YAAY;QAAE,OAAO,KAAK;MAAE,CAAC,CAAC;IAClE,CAAC;IACDkmF,gBAAgB,EAAE,SAAAA,CAAU3jB,EAAE,EAAE;MAC5B,IAAI;QACA,OAAO2jB,gBAAgB,CAACphD,KAAK,CAACurD,YAAY,CAAC,CAACtgD,IAAI,CAACwyB,EAAE,CAAC;MACxD,CAAC,CACD,OAAOkI,EAAE,EAAE;QACP,OAAOlG,SAAS,CAAC,IAAIvK,UAAU,CAACd,UAAU,CAAC,CAAC,CAAC;MACjD;IACJ,CAAC;IACDwS,WAAW,EAAE,SAAAA,CAAA,EAAY;MACrB,SAASC,KAAKA,CAACv8C,OAAO,EAAE;QACpBmkC,MAAM,CAAC,IAAI,EAAEnkC,OAAO,CAAC;MACzB;MACA,OAAOu8C,KAAK;IAChB,CAAC;IAAE8nB,iBAAiB,EAAE,SAAAA,CAAUxK,SAAS,EAAE;MACvC,OAAO3qB,GAAG,CAACwI,KAAK,GACZzF,MAAM,CAAC/C,GAAG,CAACgL,SAAS,EAAE2f,SAAS,CAAC,GAChCA,SAAS,CAAC,CAAC;IACnB,CAAC;IAAE3C,GAAG,EAAEA,GAAG;IAAEoN,KAAK,EAAE,SAAAA,CAAUC,WAAW,EAAE;MACvC,OAAO,YAAY;QACf,IAAI;UACA,IAAI/9B,EAAE,GAAG2yB,aAAa,CAACoL,WAAW,CAAC3gC,KAAK,CAAC,IAAI,EAAE3tD,SAAS,CAAC,CAAC;UAC1D,IAAI,CAACuwD,EAAE,IAAI,OAAOA,EAAE,CAAC7lB,IAAI,KAAK,UAAU,EACpC,OAAO0uB,YAAY,CAAChjC,OAAO,CAACm6B,EAAE,CAAC;UACnC,OAAOA,EAAE;QACb,CAAC,CACD,OAAOrX,CAAC,EAAE;UACN,OAAOgmB,SAAS,CAAChmB,CAAC,CAAC;QACvB;MACJ,CAAC;IACL,CAAC;IAAEq1C,KAAK,EAAE,SAAAA,CAAUD,WAAW,EAAEluD,IAAI,EAAEq2B,IAAI,EAAE;MACzC,IAAI;QACA,IAAIlG,EAAE,GAAG2yB,aAAa,CAACoL,WAAW,CAAC3gC,KAAK,CAAC8I,IAAI,EAAEr2B,IAAI,IAAI,EAAE,CAAC,CAAC;QAC3D,IAAI,CAACmwB,EAAE,IAAI,OAAOA,EAAE,CAAC7lB,IAAI,KAAK,UAAU,EACpC,OAAO0uB,YAAY,CAAChjC,OAAO,CAACm6B,EAAE,CAAC;QACnC,OAAOA,EAAE;MACb,CAAC,CACD,OAAOrX,CAAC,EAAE;QACN,OAAOgmB,SAAS,CAAChmB,CAAC,CAAC;MACvB;IACJ,CAAC;IACDs1C,kBAAkB,EAAE;MAChBnuF,GAAG,EAAE,SAAAA,CAAA,EAAY;QAAE,OAAO44D,GAAG,CAACwI,KAAK,IAAI,IAAI;MAAE;IACjD,CAAC;IAAEwU,OAAO,EAAE,SAAAA,CAAUwY,iBAAiB,EAAEC,eAAe,EAAE;MACtD,IAAIlyE,OAAO,GAAG48C,YAAY,CAAChjC,OAAO,CAAC,OAAOq4D,iBAAiB,KAAK,UAAU,GACtEhvD,KAAK,CAAC2uD,iBAAiB,CAACK,iBAAiB,CAAC,GAC1CA,iBAAiB,CAAC,CACjBp1E,OAAO,CAACq1E,eAAe,IAAI,KAAK,CAAC;MACtC,OAAOz1B,GAAG,CAACwI,KAAK,GACZxI,GAAG,CAACwI,KAAK,CAACwU,OAAO,CAACz5D,OAAO,CAAC,GAC1BA,OAAO;IACf,CAAC;IACD3hB,OAAO,EAAEu+D,YAAY;IACrB1G,KAAK,EAAE;MACHryD,GAAG,EAAE,SAAAA,CAAA,EAAY;QAAE,OAAOqyD,KAAK;MAAE,CAAC;MAClCjtC,GAAG,EAAE,SAAAA,CAAU7kB,KAAK,EAAE;QAClBiyD,QAAQ,CAACjyD,KAAK,EAAEA,KAAK,KAAK,OAAO,GAAG,YAAY;UAAE,OAAO,IAAI;QAAE,CAAC,GAAGgiE,qBAAqB,CAAC;MAC7F;IACJ,CAAC;IACD1T,MAAM,EAAEA,MAAM;IAAEhB,MAAM,EAAEA,MAAM;IAAEQ,KAAK,EAAEA,KAAK;IAAEe,QAAQ,EAAEA,QAAQ;IAChEgY,MAAM,EAAEA,MAAM;IAAEiO,EAAE,EAAEjB,YAAY;IAAEmY,SAAS,EAAEA,SAAS;IAAED,sBAAsB,EAAEA,sBAAsB;IACtGt8B,YAAY,EAAEA,YAAY;IAAEK,YAAY,EAAEA,YAAY;IAAEM,YAAY,EAAEA,YAAY;IAAEE,YAAY,EAAEA,YAAY;IAAEO,SAAS,EAAEA,SAAS;IAAE6zB,aAAa,EAAEA,aAAa;IAAEngB,GAAG,EAAEA,GAAG;IAAElN,IAAI,EAAErI,MAAM;IAC1LuS,MAAM,EAAEA,MAAM;IACdse,MAAM,EAAE,EAAE;IACVne,WAAW,EAAEA,WAAW;IACxB7N,QAAQ,EAAEA,QAAQ;IAClBu2B,YAAY,EAAE6C,OAAO;IACrBc,MAAM,EAAE1sB,aAAa;IAAEvkD,OAAO,EAAEukD,aAAa,CAAC9oE,KAAK,CAAC,GAAG,CAAC,CACnDT,GAAG,CAAC,UAAUuV,CAAC,EAAE;MAAE,OAAO5U,QAAQ,CAAC4U,CAAC,CAAC;IAAE,CAAC,CAAC,CACzC2S,MAAM,CAAC,UAAU6sC,CAAC,EAAE3pC,CAAC,EAAEzD,CAAC,EAAE;MAAE,OAAOotC,CAAC,GAAI3pC,CAAC,GAAG9a,IAAI,CAAC05E,GAAG,CAAC,EAAE,EAAEriE,CAAC,GAAG,CAAC,CAAE;IAAE,CAAC;EAAE,CAAC,CAAC,CAAC;EACjFof,KAAK,CAACmvD,MAAM,GAAGtX,SAAS,CAAC73C,KAAK,CAACurD,YAAY,CAAC9W,WAAW,CAAC;EAExD,IAAI,OAAO3T,aAAa,KAAK,WAAW,IAAI,OAAOsuB,gBAAgB,KAAK,WAAW,EAAE;IACjFpa,YAAY,CAACF,gCAAgC,EAAE,UAAUua,YAAY,EAAE;MACnE,IAAI,CAACC,kBAAkB,EAAE;QACrB,IAAIC,OAAO;QACX,IAAIzsB,UAAU,EAAE;UACZysB,OAAO,GAAGp3B,QAAQ,CAACuI,WAAW,CAAC,aAAa,CAAC;UAC7C6uB,OAAO,CAACC,eAAe,CAACza,8BAA8B,EAAE,IAAI,EAAE,IAAI,EAAEsa,YAAY,CAAC;QACrF,CAAC,MACI;UACDE,OAAO,GAAG,IAAI3uB,WAAW,CAACmU,8BAA8B,EAAE;YACtDlU,MAAM,EAAEwuB;UACZ,CAAC,CAAC;QACN;QACAC,kBAAkB,GAAG,IAAI;QACzBxuB,aAAa,CAACyuB,OAAO,CAAC;QACtBD,kBAAkB,GAAG,KAAK;MAC9B;IACJ,CAAC,CAAC;IACFF,gBAAgB,CAACra,8BAA8B,EAAE,UAAUpP,EAAE,EAAE;MAC3D,IAAI9E,MAAM,GAAG8E,EAAE,CAAC9E,MAAM;MACtB,IAAI,CAACyuB,kBAAkB,EAAE;QACrBG,gBAAgB,CAAC5uB,MAAM,CAAC;MAC5B;IACJ,CAAC,CAAC;EACN;EACA,SAAS4uB,gBAAgBA,CAACC,WAAW,EAAE;IACnC,IAAIC,KAAK,GAAGL,kBAAkB;IAC9B,IAAI;MACAA,kBAAkB,GAAG,IAAI;MACzBta,YAAY,CAACoB,cAAc,CAACvR,IAAI,CAAC6qB,WAAW,CAAC;IACjD,CAAC,SACO;MACJJ,kBAAkB,GAAGK,KAAK;IAC9B;EACJ;EACA,IAAIL,kBAAkB,GAAG,KAAK;EAE9B,IAAI,OAAOM,gBAAgB,KAAK,WAAW,EAAE;IACzC,IAAIC,IAAI,GAAG,IAAID,gBAAgB,CAAC7a,8BAA8B,CAAC;IAC/D,IAAI,OAAO8a,IAAI,CAACC,KAAK,KAAK,UAAU,EAAE;MAClCD,IAAI,CAACC,KAAK,CAAC,CAAC;IAChB;IACA9a,YAAY,CAACF,gCAAgC,EAAE,UAAUib,YAAY,EAAE;MACnE,IAAI,CAACT,kBAAkB,EAAE;QACrBO,IAAI,CAACG,WAAW,CAACD,YAAY,CAAC;MAClC;IACJ,CAAC,CAAC;IACFF,IAAI,CAAChxC,SAAS,GAAG,UAAUi3B,EAAE,EAAE;MAC3B,IAAIA,EAAE,CAACt1E,IAAI,EACPivF,gBAAgB,CAAC3Z,EAAE,CAACt1E,IAAI,CAAC;IACjC,CAAC;EACL,CAAC,MACI,IAAI,OAAOwgC,IAAI,KAAK,WAAW,IAAI,OAAO+hC,SAAS,KAAK,WAAW,EAAE;IACtEiS,YAAY,CAACF,gCAAgC,EAAE,UAAUib,YAAY,EAAE;MACnE,IAAI;QACA,IAAI,CAACT,kBAAkB,EAAE;UACrB,IAAI,OAAO94C,YAAY,KAAK,WAAW,EAAE;YACrCA,YAAY,CAAC3e,OAAO,CAACk9C,8BAA8B,EAAErtD,IAAI,CAACC,SAAS,CAAC;cAChEsoE,IAAI,EAAE1mF,IAAI,CAAC2mF,MAAM,CAAC,CAAC;cACnBH,YAAY,EAAEA;YAClB,CAAC,CAAC,CAAC;UACP;UACA,IAAI,OAAO/uD,IAAI,CAAC,SAAS,CAAC,KAAK,QAAQ,EAAE;YACrCmtB,aAAa,CAAC,EAAE,EAAEntB,IAAI,CAAC,SAAS,CAAC,CAAChI,QAAQ,CAAC;cAAEm3D,mBAAmB,EAAE;YAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC9zE,OAAO,CAAC,UAAU7D,MAAM,EAAE;cACvG,OAAOA,MAAM,CAACw3E,WAAW,CAAC;gBACtB/xF,IAAI,EAAE82E,8BAA8B;gBACpCgb,YAAY,EAAEA;cAClB,CAAC,CAAC;YACN,CAAC,CAAC;UACN;QACJ;MACJ,CAAC,CACD,OAAOpqB,EAAE,EAAE,CAAE;IACjB,CAAC,CAAC;IACF,IAAI,OAAOypB,gBAAgB,KAAK,WAAW,EAAE;MACzCA,gBAAgB,CAAC,SAAS,EAAE,UAAUtZ,EAAE,EAAE;QACtC,IAAIA,EAAE,CAAC39E,GAAG,KAAK48E,8BAA8B,EAAE;UAC3C,IAAIv0E,IAAI,GAAGknB,IAAI,CAACnmB,KAAK,CAACu0E,EAAE,CAACt4C,QAAQ,CAAC;UAClC,IAAIh9B,IAAI,EACJivF,gBAAgB,CAACjvF,IAAI,CAACuvF,YAAY,CAAC;QAC3C;MACJ,CAAC,CAAC;IACN;IACA,IAAIK,WAAW,GAAGpvD,IAAI,CAACm3B,QAAQ,IAAI4K,SAAS,CAACstB,aAAa;IAC1D,IAAID,WAAW,EAAE;MACbA,WAAW,CAAChB,gBAAgB,CAAC,SAAS,EAAEkB,uBAAuB,CAAC;IACpE;EACJ;EACA,SAASA,uBAAuBA,CAAC3qB,EAAE,EAAE;IACjC,IAAInlE,IAAI,GAAGmlE,EAAE,CAACnlE,IAAI;IAClB,IAAIA,IAAI,IAAIA,IAAI,CAACvC,IAAI,KAAK82E,8BAA8B,EAAE;MACtD0a,gBAAgB,CAACjvF,IAAI,CAACuvF,YAAY,CAAC;IACvC;EACJ;EAEAp2B,YAAY,CAACZ,eAAe,GAAGlD,QAAQ;EACvCzC,QAAQ,CAACH,KAAK,EAAEkQ,qBAAqB,CAAC;EAEtC,IAAIotB,YAAY,GAAG,aAAa39E,MAAM,CAAC49E,MAAM,CAAC;IAC1CC,SAAS,EAAE,IAAI;IACfzwD,KAAK,EAAE+gD,OAAO;IACdoM,SAAS,EAAEA,SAAS;IACpB,SAAS,EAAEpM,OAAO;IAClB8G,QAAQ,EAAEA,QAAQ;IAClBI,WAAW,EAAEA,WAAW;IACxBU,aAAa,EAAEA;EACnB,CAAC,CAAC;EAEF56B,QAAQ,CAACgzB,OAAO,EAAEwP,YAAY,EAAE;IAAEt7C,OAAO,EAAE8rC;EAAQ,CAAC,CAAC;EAErD,OAAOA,OAAO;AAElB,CAAE,CAAC;;;;;;;;;;AC9kKH;AACA,CAAC,UAAUnzB,MAAM,EAAEC,OAAO,EAAE;EAC1B,KAA4D,GAAGA,OAAO,CAACrB,OAAO,CAAC,GAC7E,CAC+G;AACnH,CAAC,EAAE,IAAI,EAAG,UAAUA,OAAO,EAAE;EAAE,YAAY;;EAEzC,MAAMmkC,kBAAkB,GAAG,CAAC,CAAC;EAE7B,MAAMC,UAAU,GAAG,aAAah+E,MAAM,CAAC49E,MAAM,CAAC;IAC5CC,SAAS,EAAE,IAAI;IACf,SAAS,EAAEE;EACb,CAAC,CAAC;;EAEF;EACA,MAAME,GAAG,GAAGl/E,MAAM,CAAC,CAAC,CAAC;EACrB,MAAMm/E,GAAG,GAAGn/E,MAAM,CAAC,CAAC,CAAC;EACrB,MAAMo/E,GAAG,GAAGp/E,MAAM,CAAC,CAAC,CAAC;EACrB,MAAMq/E,GAAG,GAAGr/E,MAAM,CAAC,CAAC,CAAC;EACrB,MAAMs/E,IAAI,GAAGt/E,MAAM,CAAC,8EAA8E,CAAC;EACnG,MAAMu/E,KAAK,GAAGt+E,MAAM,CAAC49E,MAAM,CAAC;IAC1B7qE,CAAC,EAAEhU,MAAM,CAAC,CAAC,CAAC,CAAC;IACbo2E,CAAC,EAAEp2E,MAAM,CAAC,+EAA+E,CAAC;IAC1Fw/E,CAAC,EAAEx/E,MAAM,CAAC,+EAA+E,CAAC;IAC1F08C,CAAC,EAAE4iC,IAAI;IACPziF,CAAC,EAAEyiF,IAAI;IACPG,CAAC,EAAEz/E,MAAM,CAAC,CAAC,CAAC;IACZ0/E,EAAE,EAAE1/E,MAAM,CAAC,+EAA+E,CAAC;IAC3F2/E,EAAE,EAAE3/E,MAAM,CAAC,+EAA+E;EAC5F,CAAC,CAAC;EACF,MAAM4/E,SAAS,GAAG5/E,MAAM,CAAC,qEAAqE,CAAC;EAC/F,MAAM6/E,OAAO,GAAG7/E,MAAM,CAAC,+EAA+E,CAAC;EACvGA,MAAM,CAAC,8EAA8E,CAAC;EACtF,MAAM8/E,iBAAiB,GAAG9/E,MAAM,CAAC,+EAA+E,CAAC;EACjH,MAAM+/E,iBAAiB,GAAG//E,MAAM,CAAC,+EAA+E,CAAC;EACjH,MAAMggF,cAAc,GAAGhgF,MAAM,CAAC,8EAA8E,CAAC;EAC7G,MAAMigF,cAAc,GAAGjgF,MAAM,CAAC,+EAA+E,CAAC;EAC9G,MAAMkgF,aAAa,CAAC;IAClB5xF,WAAWA,CAAC0uB,CAAC,EAAEmjE,CAAC,EAAEC,CAAC,EAAEhoC,CAAC,EAAE;MACtB,IAAI,CAACp7B,CAAC,GAAGA,CAAC;MACV,IAAI,CAACmjE,CAAC,GAAGA,CAAC;MACV,IAAI,CAACC,CAAC,GAAGA,CAAC;MACV,IAAI,CAAChoC,CAAC,GAAGA,CAAC;IACZ;IACA,OAAOioC,UAAUA,CAAChkC,CAAC,EAAE;MACnB,IAAI,EAAEA,CAAC,YAAYikC,KAAK,CAAC,EAAE;QACzB,MAAM,IAAIx8B,SAAS,CAAC,0CAA0C,CAAC;MACjE;MACA,IAAIzH,CAAC,CAACv/C,MAAM,CAACwjF,KAAK,CAACC,IAAI,CAAC,EACtB,OAAOL,aAAa,CAACK,IAAI;MAC3B,OAAO,IAAIL,aAAa,CAAC7jC,CAAC,CAACr/B,CAAC,EAAEq/B,CAAC,CAAC8jC,CAAC,EAAEhB,GAAG,EAAEqB,GAAG,CAACnkC,CAAC,CAACr/B,CAAC,GAAGq/B,CAAC,CAAC8jC,CAAC,CAAC,CAAC;IACzD;IACA,OAAOM,aAAaA,CAACC,MAAM,EAAE;MAC3B,MAAMC,KAAK,GAAGC,WAAW,CAACF,MAAM,CAACp5F,GAAG,CAAE+0D,CAAC,IAAKA,CAAC,CAAC+jC,CAAC,CAAC,CAAC;MACjD,OAAOM,MAAM,CAACp5F,GAAG,CAAC,CAAC+0D,CAAC,EAAEptC,CAAC,KAAKotC,CAAC,CAACwkC,QAAQ,CAACF,KAAK,CAAC1xE,CAAC,CAAC,CAAC,CAAC;IACnD;IACA,OAAO6xE,UAAUA,CAACJ,MAAM,EAAE;MACxB,OAAO,IAAI,CAACD,aAAa,CAACC,MAAM,CAAC,CAACp5F,GAAG,CAAC,IAAI,CAAC+4F,UAAU,CAAC;IACxD;IACAvjF,MAAMA,CAACikF,KAAK,EAAE;MACZC,cAAc,CAACD,KAAK,CAAC;MACrB,MAAM;QAAE/jE,CAAC,EAAEikE,EAAE;QAAEd,CAAC,EAAEe,EAAE;QAAEd,CAAC,EAAEe;MAAG,CAAC,GAAG,IAAI;MACpC,MAAM;QAAEnkE,CAAC,EAAEokE,EAAE;QAAEjB,CAAC,EAAEkB,EAAE;QAAEjB,CAAC,EAAEkB;MAAG,CAAC,GAAGP,KAAK;MACrC,MAAMQ,IAAI,GAAGf,GAAG,CAACS,EAAE,GAAGK,EAAE,CAAC;MACzB,MAAME,IAAI,GAAGhB,GAAG,CAACY,EAAE,GAAGD,EAAE,CAAC;MACzB,MAAMM,IAAI,GAAGjB,GAAG,CAACU,EAAE,GAAGI,EAAE,CAAC;MACzB,MAAMI,IAAI,GAAGlB,GAAG,CAACa,EAAE,GAAGF,EAAE,CAAC;MACzB,OAAOI,IAAI,KAAKC,IAAI,IAAIC,IAAI,KAAKC,IAAI;IACvC;IACAC,MAAMA,CAAA,EAAG;MACP,OAAO,IAAIzB,aAAa,CAACM,GAAG,CAAC,CAAC,IAAI,CAACxjE,CAAC,CAAC,EAAE,IAAI,CAACmjE,CAAC,EAAE,IAAI,CAACC,CAAC,EAAEI,GAAG,CAAC,CAAC,IAAI,CAACpoC,CAAC,CAAC,CAAC;IACtE;IACAwpC,MAAMA,CAAA,EAAG;MACP,MAAM;QAAE5kE,CAAC,EAAEikE,EAAE;QAAEd,CAAC,EAAEe,EAAE;QAAEd,CAAC,EAAEe;MAAG,CAAC,GAAG,IAAI;MACpC,MAAM;QAAEntE;MAAE,CAAC,GAAGurE,KAAK;MACnB,MAAMsC,CAAC,GAAGrB,GAAG,CAACS,EAAE,GAAGA,EAAE,CAAC;MACtB,MAAMa,CAAC,GAAGtB,GAAG,CAACU,EAAE,GAAGA,EAAE,CAAC;MACtB,MAAMa,CAAC,GAAGvB,GAAG,CAACpB,GAAG,GAAGoB,GAAG,CAACW,EAAE,GAAGA,EAAE,CAAC,CAAC;MACjC,MAAMa,CAAC,GAAGxB,GAAG,CAACxsE,CAAC,GAAG6tE,CAAC,CAAC;MACpB,MAAMI,IAAI,GAAGhB,EAAE,GAAGC,EAAE;MACpB,MAAMgB,CAAC,GAAG1B,GAAG,CAACA,GAAG,CAACyB,IAAI,GAAGA,IAAI,CAAC,GAAGJ,CAAC,GAAGC,CAAC,CAAC;MACvC,MAAMK,CAAC,GAAGH,CAAC,GAAGF,CAAC;MACf,MAAMM,CAAC,GAAGD,CAAC,GAAGJ,CAAC;MACf,MAAMM,CAAC,GAAGL,CAAC,GAAGF,CAAC;MACf,MAAMQ,EAAE,GAAG9B,GAAG,CAAC0B,CAAC,GAAGE,CAAC,CAAC;MACrB,MAAMG,EAAE,GAAG/B,GAAG,CAAC2B,CAAC,GAAGE,CAAC,CAAC;MACrB,MAAMtrC,EAAE,GAAGypC,GAAG,CAAC0B,CAAC,GAAGG,CAAC,CAAC;MACrB,MAAMG,EAAE,GAAGhC,GAAG,CAAC4B,CAAC,GAAGD,CAAC,CAAC;MACrB,OAAO,IAAIjC,aAAa,CAACoC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEzrC,EAAE,CAAC;IAC1C;IACApuC,GAAGA,CAACo4E,KAAK,EAAE;MACTC,cAAc,CAACD,KAAK,CAAC;MACrB,MAAM;QAAE/jE,CAAC,EAAEikE,EAAE;QAAEd,CAAC,EAAEe,EAAE;QAAEd,CAAC,EAAEe,EAAE;QAAE/oC,CAAC,EAAEvB;MAAG,CAAC,GAAG,IAAI;MAC3C,MAAM;QAAE75B,CAAC,EAAEokE,EAAE;QAAEjB,CAAC,EAAEkB,EAAE;QAAEjB,CAAC,EAAEkB,EAAE;QAAElpC,CAAC,EAAEtB;MAAG,CAAC,GAAGiqC,KAAK;MAC5C,MAAMc,CAAC,GAAGrB,GAAG,CAAC,CAACU,EAAE,GAAGD,EAAE,KAAKI,EAAE,GAAGD,EAAE,CAAC,CAAC;MACpC,MAAMU,CAAC,GAAGtB,GAAG,CAAC,CAACU,EAAE,GAAGD,EAAE,KAAKI,EAAE,GAAGD,EAAE,CAAC,CAAC;MACpC,MAAMgB,CAAC,GAAG5B,GAAG,CAACsB,CAAC,GAAGD,CAAC,CAAC;MACpB,IAAIO,CAAC,KAAKlD,GAAG,EACX,OAAO,IAAI,CAAC0C,MAAM,CAAC,CAAC;MACtB,MAAMG,CAAC,GAAGvB,GAAG,CAACW,EAAE,GAAG/B,GAAG,GAAGtoC,EAAE,CAAC;MAC5B,MAAMkrC,CAAC,GAAGxB,GAAG,CAAC3pC,EAAE,GAAGuoC,GAAG,GAAGkC,EAAE,CAAC;MAC5B,MAAMY,CAAC,GAAGF,CAAC,GAAGD,CAAC;MACf,MAAMI,CAAC,GAAGL,CAAC,GAAGD,CAAC;MACf,MAAMQ,CAAC,GAAGL,CAAC,GAAGD,CAAC;MACf,MAAMO,EAAE,GAAG9B,GAAG,CAAC0B,CAAC,GAAGE,CAAC,CAAC;MACrB,MAAMG,EAAE,GAAG/B,GAAG,CAAC2B,CAAC,GAAGE,CAAC,CAAC;MACrB,MAAMtrC,EAAE,GAAGypC,GAAG,CAAC0B,CAAC,GAAGG,CAAC,CAAC;MACrB,MAAMG,EAAE,GAAGhC,GAAG,CAAC4B,CAAC,GAAGD,CAAC,CAAC;MACrB,OAAO,IAAIjC,aAAa,CAACoC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEzrC,EAAE,CAAC;IAC1C;IACA0rC,QAAQA,CAAC1B,KAAK,EAAE;MACd,OAAO,IAAI,CAACp4E,GAAG,CAACo4E,KAAK,CAACY,MAAM,CAAC,CAAC,CAAC;IACjC;IACAe,gBAAgBA,CAACC,CAAC,EAAE;MAClB,MAAMC,OAAO,GAAG,CAAC,GAAG,GAAG,GAAGD,CAAC;MAC3B,MAAMjC,MAAM,GAAG,EAAE;MACjB,IAAIrkC,CAAC,GAAG,IAAI;MACZ,IAAI/4D,IAAI,GAAG+4D,CAAC;MACZ,KAAK,IAAIQ,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAG+lC,OAAO,EAAE/lC,MAAM,EAAE,EAAE;QAC/Cv5D,IAAI,GAAG+4D,CAAC;QACRqkC,MAAM,CAAC1qF,IAAI,CAAC1S,IAAI,CAAC;QACjB,KAAK,IAAI2rB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,KAAK0zE,CAAC,GAAG,CAAC,CAAC,EAAE1zE,CAAC,EAAE,EAAE;UACrC3rB,IAAI,GAAGA,IAAI,CAACqlB,GAAG,CAAC0zC,CAAC,CAAC;UAClBqkC,MAAM,CAAC1qF,IAAI,CAAC1S,IAAI,CAAC;QACnB;QACA+4D,CAAC,GAAG/4D,IAAI,CAACs+F,MAAM,CAAC,CAAC;MACnB;MACA,OAAOlB,MAAM;IACf;IACAmC,IAAIA,CAAChmF,CAAC,EAAEimF,WAAW,EAAE;MACnB,IAAI,CAACA,WAAW,IAAI,IAAI,CAAChmF,MAAM,CAACojF,aAAa,CAAC6C,IAAI,CAAC,EACjDD,WAAW,GAAGxC,KAAK,CAACyC,IAAI;MAC1B,MAAMJ,CAAC,GAAIG,WAAW,IAAIA,WAAW,CAACE,YAAY,IAAK,CAAC;MACxD,IAAI,GAAG,GAAGL,CAAC,EAAE;QACX,MAAM,IAAI9hF,KAAK,CAAC,+DAA+D,CAAC;MAClF;MACA,IAAIoiF,WAAW,GAAGH,WAAW,IAAII,gBAAgB,CAACj0F,GAAG,CAAC6zF,WAAW,CAAC;MAClE,IAAI,CAACG,WAAW,EAAE;QAChBA,WAAW,GAAG,IAAI,CAACP,gBAAgB,CAACC,CAAC,CAAC;QACtC,IAAIG,WAAW,IAAIH,CAAC,KAAK,CAAC,EAAE;UAC1BM,WAAW,GAAG/C,aAAa,CAACY,UAAU,CAACmC,WAAW,CAAC;UACnDC,gBAAgB,CAAC7uE,GAAG,CAACyuE,WAAW,EAAEG,WAAW,CAAC;QAChD;MACF;MACA,IAAI5mC,CAAC,GAAG6jC,aAAa,CAACK,IAAI;MAC1B,IAAI4C,CAAC,GAAGjD,aAAa,CAAC6C,IAAI;MAC1B,MAAMH,OAAO,GAAG,CAAC,GAAG,GAAG,GAAGD,CAAC;MAC3B,MAAMS,UAAU,GAAG,CAAC,KAAKT,CAAC,GAAG,CAAC,CAAC;MAC/B,MAAMU,IAAI,GAAGrjF,MAAM,CAAC,CAAC,IAAI2iF,CAAC,GAAG,CAAC,CAAC;MAC/B,MAAMW,SAAS,GAAG,CAAC,IAAIX,CAAC;MACxB,MAAMY,OAAO,GAAGvjF,MAAM,CAAC2iF,CAAC,CAAC;MACzB,KAAK,IAAI9lC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAG+lC,OAAO,EAAE/lC,MAAM,EAAE,EAAE;QAC/C,MAAMroD,MAAM,GAAGqoD,MAAM,GAAGumC,UAAU;QAClC,IAAII,KAAK,GAAG1hF,MAAM,CAACjF,CAAC,GAAGwmF,IAAI,CAAC;QAC5BxmF,CAAC,KAAK0mF,OAAO;QACb,IAAIC,KAAK,GAAGJ,UAAU,EAAE;UACtBI,KAAK,IAAIF,SAAS;UAClBzmF,CAAC,IAAIsiF,GAAG;QACV;QACA,MAAMsE,OAAO,GAAGjvF,MAAM;QACtB,MAAMkvF,OAAO,GAAGlvF,MAAM,GAAGoD,IAAI,CAAC+kC,GAAG,CAAC6mD,KAAK,CAAC,GAAG,CAAC;QAC5C,MAAMG,KAAK,GAAG9mC,MAAM,GAAG,CAAC,KAAK,CAAC;QAC9B,MAAM+mC,KAAK,GAAGJ,KAAK,GAAG,CAAC;QACvB,IAAIA,KAAK,KAAK,CAAC,EAAE;UACfL,CAAC,GAAGA,CAAC,CAACx6E,GAAG,CAACk7E,eAAe,CAACF,KAAK,EAAEV,WAAW,CAACQ,OAAO,CAAC,CAAC,CAAC;QACzD,CAAC,MACI;UACHpnC,CAAC,GAAGA,CAAC,CAAC1zC,GAAG,CAACk7E,eAAe,CAACD,KAAK,EAAEX,WAAW,CAACS,OAAO,CAAC,CAAC,CAAC;QACzD;MACF;MACA,OAAOxD,aAAa,CAACY,UAAU,CAAC,CAACzkC,CAAC,EAAE8mC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5C;IACAW,QAAQA,CAACC,MAAM,EAAEjB,WAAW,EAAE;MAC5B,OAAO,IAAI,CAACD,IAAI,CAACmB,eAAe,CAACD,MAAM,EAAExE,KAAK,CAAC7iC,CAAC,CAAC,EAAEomC,WAAW,CAAC;IACjE;IACAmB,cAAcA,CAACF,MAAM,EAAE;MACrB,IAAIlnF,CAAC,GAAGmnF,eAAe,CAACD,MAAM,EAAExE,KAAK,CAAC7iC,CAAC,EAAE,KAAK,CAAC;MAC/C,MAAMylC,CAAC,GAAGjC,aAAa,CAAC6C,IAAI;MAC5B,MAAMmB,EAAE,GAAGhE,aAAa,CAACK,IAAI;MAC7B,IAAI1jF,CAAC,KAAKqiF,GAAG,EACX,OAAOgF,EAAE;MACX,IAAI,IAAI,CAACpnF,MAAM,CAAConF,EAAE,CAAC,IAAIrnF,CAAC,KAAKsiF,GAAG,EAC9B,OAAO,IAAI;MACb,IAAI,IAAI,CAACriF,MAAM,CAACqlF,CAAC,CAAC,EAChB,OAAO,IAAI,CAACU,IAAI,CAAChmF,CAAC,CAAC;MACrB,IAAIw/C,CAAC,GAAG6nC,EAAE;MACV,IAAI9N,CAAC,GAAG,IAAI;MACZ,OAAOv5E,CAAC,GAAGqiF,GAAG,EAAE;QACd,IAAIriF,CAAC,GAAGsiF,GAAG,EACT9iC,CAAC,GAAGA,CAAC,CAAC1zC,GAAG,CAACytE,CAAC,CAAC;QACdA,CAAC,GAAGA,CAAC,CAACwL,MAAM,CAAC,CAAC;QACd/kF,CAAC,KAAKsiF,GAAG;MACX;MACA,OAAO9iC,CAAC;IACV;IACA8nC,YAAYA,CAAA,EAAG;MACb,OAAO,IAAI,CAACF,cAAc,CAAC1E,KAAK,CAACE,CAAC,CAAC,CAAC3iF,MAAM,CAACojF,aAAa,CAACK,IAAI,CAAC;IAChE;IACA6D,aAAaA,CAAA,EAAG;MACd,IAAI/nC,CAAC,GAAG,IAAI,CAAC4nC,cAAc,CAAC1E,KAAK,CAAC7iC,CAAC,GAAG0iC,GAAG,CAAC,CAACwC,MAAM,CAAC,CAAC;MACnD,IAAIrC,KAAK,CAAC7iC,CAAC,GAAG0iC,GAAG,EACf/iC,CAAC,GAAGA,CAAC,CAAC1zC,GAAG,CAAC,IAAI,CAAC;MACjB,OAAO0zC,CAAC,CAACv/C,MAAM,CAACojF,aAAa,CAACK,IAAI,CAAC;IACrC;IACAM,QAAQA,CAACwD,IAAI,EAAE;MACb,MAAM;QAAErnE,CAAC;QAAEmjE,CAAC;QAAEC;MAAE,CAAC,GAAG,IAAI;MACxB,MAAMkE,GAAG,GAAG,IAAI,CAACxnF,MAAM,CAACojF,aAAa,CAACK,IAAI,CAAC;MAC3C,IAAI8D,IAAI,IAAI,IAAI,EACdA,IAAI,GAAGC,GAAG,GAAGjF,GAAG,GAAGkF,MAAM,CAACnE,CAAC,CAAC;MAC9B,MAAMoE,EAAE,GAAGhE,GAAG,CAACxjE,CAAC,GAAGqnE,IAAI,CAAC;MACxB,MAAMI,EAAE,GAAGjE,GAAG,CAACL,CAAC,GAAGkE,IAAI,CAAC;MACxB,MAAMK,EAAE,GAAGlE,GAAG,CAACJ,CAAC,GAAGiE,IAAI,CAAC;MACxB,IAAIC,GAAG,EACL,OAAOhE,KAAK,CAACC,IAAI;MACnB,IAAImE,EAAE,KAAKvF,GAAG,EACZ,MAAM,IAAIt+E,KAAK,CAAC,kBAAkB,CAAC;MACrC,OAAO,IAAIy/E,KAAK,CAACkE,EAAE,EAAEC,EAAE,CAAC;IAC1B;IACAE,kBAAkBA,CAAA,EAAG;MACnBC,UAAU,CAAC,CAAC;IACd;IACAC,gBAAgBA,CAAA,EAAG;MACjBD,UAAU,CAAC,CAAC;IACd;IACAE,iBAAiBA,CAAA,EAAG;MAClBF,UAAU,CAAC,CAAC;IACd;EACF;EACA1E,aAAa,CAAC6C,IAAI,GAAG,IAAI7C,aAAa,CAACX,KAAK,CAACG,EAAE,EAAEH,KAAK,CAACI,EAAE,EAAER,GAAG,EAAEqB,GAAG,CAACjB,KAAK,CAACG,EAAE,GAAGH,KAAK,CAACI,EAAE,CAAC,CAAC;EACzFO,aAAa,CAACK,IAAI,GAAG,IAAIL,aAAa,CAAChB,GAAG,EAAEC,GAAG,EAAEA,GAAG,EAAED,GAAG,CAAC;EAC1D,SAAS2E,eAAeA,CAACkB,SAAS,EAAEtlD,IAAI,EAAE;IACxC,MAAMulD,GAAG,GAAGvlD,IAAI,CAACkiD,MAAM,CAAC,CAAC;IACzB,OAAOoD,SAAS,GAAGC,GAAG,GAAGvlD,IAAI;EAC/B;EACA,SAASuhD,cAAcA,CAACD,KAAK,EAAE;IAC7B,IAAI,EAAEA,KAAK,YAAYb,aAAa,CAAC,EACnC,MAAM,IAAIp8B,SAAS,CAAC,wBAAwB,CAAC;EACjD;EACA,SAASmhC,cAAcA,CAAClE,KAAK,EAAE;IAC7B,IAAI,EAAEA,KAAK,YAAYmE,cAAc,CAAC,EACpC,MAAM,IAAIphC,SAAS,CAAC,yBAAyB,CAAC;EAClD;EACA,SAAS8gC,UAAUA,CAAA,EAAG;IACpB,MAAM,IAAI/jF,KAAK,CAAC,yCAAyC,CAAC;EAC5D;EACA,MAAMqkF,cAAc,CAAC;IACnB52F,WAAWA,CAAC62F,EAAE,EAAE;MACd,IAAI,CAACA,EAAE,GAAGA,EAAE;IACd;IACA,OAAOC,yBAAyBA,CAACC,EAAE,EAAE;MACnC,MAAM;QAAEjP;MAAE,CAAC,GAAGmJ,KAAK;MACnB,MAAMrzC,CAAC,GAAGs0C,GAAG,CAACX,OAAO,GAAGwF,EAAE,GAAGA,EAAE,CAAC;MAChC,MAAMC,EAAE,GAAG9E,GAAG,CAAC,CAACt0C,CAAC,GAAGizC,GAAG,IAAIa,cAAc,CAAC;MAC1C,IAAIttE,CAAC,GAAG1S,MAAM,CAAC,CAAC,CAAC,CAAC;MAClB,MAAMgiF,CAAC,GAAGxB,GAAG,CAAC,CAAC9tE,CAAC,GAAG0jE,CAAC,GAAGlqC,CAAC,IAAIs0C,GAAG,CAACt0C,CAAC,GAAGkqC,CAAC,CAAC,CAAC;MACvC,IAAI;QAAEnwE,OAAO,EAAEs/E,UAAU;QAAE/1F,KAAK,EAAEgjB;MAAE,CAAC,GAAGgzE,OAAO,CAACF,EAAE,EAAEtD,CAAC,CAAC;MACtD,IAAIyD,EAAE,GAAGjF,GAAG,CAAChuE,CAAC,GAAG6yE,EAAE,CAAC;MACpB,IAAI,CAACK,YAAY,CAACD,EAAE,CAAC,EACnBA,EAAE,GAAGjF,GAAG,CAAC,CAACiF,EAAE,CAAC;MACf,IAAI,CAACF,UAAU,EACb/yE,CAAC,GAAGizE,EAAE;MACR,IAAI,CAACF,UAAU,EACb7yE,CAAC,GAAGw5B,CAAC;MACP,MAAMy5C,EAAE,GAAGnF,GAAG,CAAC9tE,CAAC,IAAIw5B,CAAC,GAAGizC,GAAG,CAAC,GAAGc,cAAc,GAAG+B,CAAC,CAAC;MAClD,MAAM4D,EAAE,GAAGpzE,CAAC,GAAGA,CAAC;MAChB,MAAMqzE,EAAE,GAAGrF,GAAG,CAAC,CAAChuE,CAAC,GAAGA,CAAC,IAAIwvE,CAAC,CAAC;MAC3B,MAAM8D,EAAE,GAAGtF,GAAG,CAACmF,EAAE,GAAG7F,iBAAiB,CAAC;MACtC,MAAMiG,EAAE,GAAGvF,GAAG,CAACrB,GAAG,GAAGyG,EAAE,CAAC;MACxB,MAAMI,EAAE,GAAGxF,GAAG,CAACrB,GAAG,GAAGyG,EAAE,CAAC;MACxB,OAAO,IAAI1F,aAAa,CAACM,GAAG,CAACqF,EAAE,GAAGG,EAAE,CAAC,EAAExF,GAAG,CAACuF,EAAE,GAAGD,EAAE,CAAC,EAAEtF,GAAG,CAACsF,EAAE,GAAGE,EAAE,CAAC,EAAExF,GAAG,CAACqF,EAAE,GAAGE,EAAE,CAAC,CAAC;IAClF;IACA,OAAOE,WAAWA,CAACpmE,GAAG,EAAE;MACtBA,GAAG,GAAGqmE,WAAW,CAACrmE,GAAG,EAAE,EAAE,CAAC;MAC1B,MAAMsmE,EAAE,GAAGC,kBAAkB,CAACvmE,GAAG,CAACp4B,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;MAC/C,MAAM4+F,EAAE,GAAG,IAAI,CAACjB,yBAAyB,CAACe,EAAE,CAAC;MAC7C,MAAMG,EAAE,GAAGF,kBAAkB,CAACvmE,GAAG,CAACp4B,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MAChD,MAAM8+F,EAAE,GAAG,IAAI,CAACnB,yBAAyB,CAACkB,EAAE,CAAC;MAC7C,OAAO,IAAIpB,cAAc,CAACmB,EAAE,CAAC19E,GAAG,CAAC49E,EAAE,CAAC,CAAC;IACvC;IACA,OAAOC,OAAOA,CAAC3mE,GAAG,EAAE;MAClBA,GAAG,GAAGqmE,WAAW,CAACrmE,GAAG,EAAE,EAAE,CAAC;MAC1B,MAAM;QAAE7L,CAAC;QAAEoiE;MAAE,CAAC,GAAGmJ,KAAK;MACtB,MAAMkH,IAAI,GAAG,yEAAyE;MACtF,MAAMj0E,CAAC,GAAG4zE,kBAAkB,CAACvmE,GAAG,CAAC;MACjC,IAAI,CAAC6mE,UAAU,CAACC,iBAAiB,CAACn0E,CAAC,CAAC,EAAEqN,GAAG,CAAC,IAAI6lE,YAAY,CAAClzE,CAAC,CAAC,EAC3D,MAAM,IAAI3R,KAAK,CAAC4lF,IAAI,CAAC;MACvB,MAAMb,EAAE,GAAGpF,GAAG,CAAChuE,CAAC,GAAGA,CAAC,CAAC;MACrB,MAAMo0E,EAAE,GAAGpG,GAAG,CAACrB,GAAG,GAAGnrE,CAAC,GAAG4xE,EAAE,CAAC;MAC5B,MAAMiB,EAAE,GAAGrG,GAAG,CAACrB,GAAG,GAAGnrE,CAAC,GAAG4xE,EAAE,CAAC;MAC5B,MAAMkB,IAAI,GAAGtG,GAAG,CAACoG,EAAE,GAAGA,EAAE,CAAC;MACzB,MAAMG,IAAI,GAAGvG,GAAG,CAACqG,EAAE,GAAGA,EAAE,CAAC;MACzB,MAAMxuE,CAAC,GAAGmoE,GAAG,CAACxsE,CAAC,GAAGoiE,CAAC,GAAG0Q,IAAI,GAAGC,IAAI,CAAC;MAClC,MAAM;QAAE9gF,OAAO;QAAEzW,KAAK,EAAEw3F;MAAE,CAAC,GAAGC,UAAU,CAACzG,GAAG,CAACnoE,CAAC,GAAG0uE,IAAI,CAAC,CAAC;MACvD,MAAMG,EAAE,GAAG1G,GAAG,CAACwG,CAAC,GAAGH,EAAE,CAAC;MACtB,MAAMM,EAAE,GAAG3G,GAAG,CAACwG,CAAC,GAAGE,EAAE,GAAG7uE,CAAC,CAAC;MAC1B,IAAI2E,CAAC,GAAGwjE,GAAG,CAAC,CAAChuE,CAAC,GAAGA,CAAC,IAAI00E,EAAE,CAAC;MACzB,IAAIxB,YAAY,CAAC1oE,CAAC,CAAC,EACjBA,CAAC,GAAGwjE,GAAG,CAAC,CAACxjE,CAAC,CAAC;MACb,MAAMmjE,CAAC,GAAGK,GAAG,CAACoG,EAAE,GAAGO,EAAE,CAAC;MACtB,MAAM/uC,CAAC,GAAGooC,GAAG,CAACxjE,CAAC,GAAGmjE,CAAC,CAAC;MACpB,IAAI,CAACl6E,OAAO,IAAIy/E,YAAY,CAACttC,CAAC,CAAC,IAAI+nC,CAAC,KAAKjB,GAAG,EAC1C,MAAM,IAAIr+E,KAAK,CAAC4lF,IAAI,CAAC;MACvB,OAAO,IAAIvB,cAAc,CAAC,IAAIhF,aAAa,CAACljE,CAAC,EAAEmjE,CAAC,EAAEhB,GAAG,EAAE/mC,CAAC,CAAC,CAAC;IAC5D;IACAgvC,UAAUA,CAAA,EAAG;MACX,IAAI;QAAEpqE,CAAC;QAAEmjE,CAAC;QAAEC,CAAC;QAAEhoC;MAAE,CAAC,GAAG,IAAI,CAAC+sC,EAAE;MAC5B,MAAMyB,EAAE,GAAGpG,GAAG,CAACA,GAAG,CAACJ,CAAC,GAAGD,CAAC,CAAC,GAAGK,GAAG,CAACJ,CAAC,GAAGD,CAAC,CAAC,CAAC;MACvC,MAAM0G,EAAE,GAAGrG,GAAG,CAACxjE,CAAC,GAAGmjE,CAAC,CAAC;MACrB,MAAMkH,IAAI,GAAG7G,GAAG,CAACqG,EAAE,GAAGA,EAAE,CAAC;MACzB,MAAM;QAAEr3F,KAAK,EAAE83F;MAAQ,CAAC,GAAGL,UAAU,CAACzG,GAAG,CAACoG,EAAE,GAAGS,IAAI,CAAC,CAAC;MACrD,MAAME,EAAE,GAAG/G,GAAG,CAAC8G,OAAO,GAAGV,EAAE,CAAC;MAC5B,MAAMY,EAAE,GAAGhH,GAAG,CAAC8G,OAAO,GAAGT,EAAE,CAAC;MAC5B,MAAMY,IAAI,GAAGjH,GAAG,CAAC+G,EAAE,GAAGC,EAAE,GAAGpvC,CAAC,CAAC;MAC7B,IAAI4pC,CAAC;MACL,IAAI0D,YAAY,CAACttC,CAAC,GAAGqvC,IAAI,CAAC,EAAE;QAC1B,IAAIC,EAAE,GAAGlH,GAAG,CAACL,CAAC,GAAGN,OAAO,CAAC;QACzB,IAAI8H,EAAE,GAAGnH,GAAG,CAACxjE,CAAC,GAAG6iE,OAAO,CAAC;QACzB7iE,CAAC,GAAG0qE,EAAE;QACNvH,CAAC,GAAGwH,EAAE;QACN3F,CAAC,GAAGxB,GAAG,CAAC+G,EAAE,GAAGxH,iBAAiB,CAAC;MACjC,CAAC,MACI;QACHiC,CAAC,GAAGwF,EAAE;MACR;MACA,IAAI9B,YAAY,CAAC1oE,CAAC,GAAGyqE,IAAI,CAAC,EACxBtH,CAAC,GAAGK,GAAG,CAAC,CAACL,CAAC,CAAC;MACb,IAAI3tE,CAAC,GAAGguE,GAAG,CAAC,CAACJ,CAAC,GAAGD,CAAC,IAAI6B,CAAC,CAAC;MACxB,IAAI0D,YAAY,CAAClzE,CAAC,CAAC,EACjBA,CAAC,GAAGguE,GAAG,CAAC,CAAChuE,CAAC,CAAC;MACb,OAAOm0E,iBAAiB,CAACn0E,CAAC,CAAC;IAC7B;IACAo1E,KAAKA,CAAA,EAAG;MACN,OAAOljG,UAAU,CAAC,IAAI,CAAC0iG,UAAU,CAAC,CAAC,CAAC;IACtC;IACA5/F,QAAQA,CAAA,EAAG;MACT,OAAO,IAAI,CAACogG,KAAK,CAAC,CAAC;IACrB;IACA9qF,MAAMA,CAACikF,KAAK,EAAE;MACZkE,cAAc,CAAClE,KAAK,CAAC;MACrB,MAAM/sE,CAAC,GAAG,IAAI,CAACmxE,EAAE;MACjB,MAAM59F,CAAC,GAAGw5F,KAAK,CAACoE,EAAE;MAClB,MAAM0C,GAAG,GAAGrH,GAAG,CAACxsE,CAAC,CAACgJ,CAAC,GAAGz1B,CAAC,CAAC44F,CAAC,CAAC,KAAKK,GAAG,CAACxsE,CAAC,CAACmsE,CAAC,GAAG54F,CAAC,CAACy1B,CAAC,CAAC;MAC7C,MAAM8qE,GAAG,GAAGtH,GAAG,CAACxsE,CAAC,CAACmsE,CAAC,GAAG54F,CAAC,CAAC44F,CAAC,CAAC,KAAKK,GAAG,CAACxsE,CAAC,CAACgJ,CAAC,GAAGz1B,CAAC,CAACy1B,CAAC,CAAC;MAC7C,OAAO6qE,GAAG,IAAIC,GAAG;IACnB;IACAn/E,GAAGA,CAACo4E,KAAK,EAAE;MACTkE,cAAc,CAAClE,KAAK,CAAC;MACrB,OAAO,IAAImE,cAAc,CAAC,IAAI,CAACC,EAAE,CAACx8E,GAAG,CAACo4E,KAAK,CAACoE,EAAE,CAAC,CAAC;IAClD;IACA1C,QAAQA,CAAC1B,KAAK,EAAE;MACdkE,cAAc,CAAClE,KAAK,CAAC;MACrB,OAAO,IAAImE,cAAc,CAAC,IAAI,CAACC,EAAE,CAAC1C,QAAQ,CAAC1B,KAAK,CAACoE,EAAE,CAAC,CAAC;IACvD;IACArB,QAAQA,CAACC,MAAM,EAAE;MACf,OAAO,IAAImB,cAAc,CAAC,IAAI,CAACC,EAAE,CAACrB,QAAQ,CAACC,MAAM,CAAC,CAAC;IACrD;IACAE,cAAcA,CAACF,MAAM,EAAE;MACrB,OAAO,IAAImB,cAAc,CAAC,IAAI,CAACC,EAAE,CAAClB,cAAc,CAACF,MAAM,CAAC,CAAC;IAC3D;EACF;EACAmB,cAAc,CAACnC,IAAI,GAAG,IAAImC,cAAc,CAAChF,aAAa,CAAC6C,IAAI,CAAC;EAC5DmC,cAAc,CAAC3E,IAAI,GAAG,IAAI2E,cAAc,CAAChF,aAAa,CAACK,IAAI,CAAC;EAC5D,MAAM2C,gBAAgB,GAAG,IAAI3iC,OAAO,CAAC,CAAC;EACtC,MAAM+/B,KAAK,CAAC;IACVhyF,WAAWA,CAAC0uB,CAAC,EAAEmjE,CAAC,EAAE;MAChB,IAAI,CAACnjE,CAAC,GAAGA,CAAC;MACV,IAAI,CAACmjE,CAAC,GAAGA,CAAC;IACZ;IACA4H,cAAcA,CAAC3E,UAAU,EAAE;MACzB,IAAI,CAACJ,YAAY,GAAGI,UAAU;MAC9BF,gBAAgB,CAACj6D,MAAM,CAAC,IAAI,CAAC;IAC/B;IACA,OAAOu9D,OAAOA,CAAC3mE,GAAG,EAAiB;MAAA,IAAfmoE,MAAM,GAAAp5F,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,IAAI;MAC/B,MAAM;QAAEwnF,CAAC;QAAEoJ;MAAE,CAAC,GAAGD,KAAK;MACtB1/D,GAAG,GAAGqmE,WAAW,CAACrmE,GAAG,EAAE,EAAE,CAAC;MAC1B,MAAMooE,MAAM,GAAGpoE,GAAG,CAACp4B,KAAK,CAAC,CAAC;MAC1BwgG,MAAM,CAAC,EAAE,CAAC,GAAGpoE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI;MAC5B,MAAMsgE,CAAC,GAAG+H,eAAe,CAACD,MAAM,CAAC;MACjC,IAAID,MAAM,IAAI7H,CAAC,IAAIX,CAAC,EAClB,MAAM,IAAI3+E,KAAK,CAAC,sBAAsB,CAAC;MACzC,IAAI,CAACmnF,MAAM,IAAI7H,CAAC,IAAIP,SAAS,EAC3B,MAAM,IAAI/+E,KAAK,CAAC,2BAA2B,CAAC;MAC9C,MAAMsnF,EAAE,GAAG3H,GAAG,CAACL,CAAC,GAAGA,CAAC,CAAC;MACrB,MAAMiI,CAAC,GAAG5H,GAAG,CAAC2H,EAAE,GAAGhJ,GAAG,CAAC;MACvB,MAAM9mE,CAAC,GAAGmoE,GAAG,CAACpK,CAAC,GAAG+R,EAAE,GAAGhJ,GAAG,CAAC;MAC3B,IAAI;QAAEl5E,OAAO;QAAEzW,KAAK,EAAEwtB;MAAE,CAAC,GAAGwoE,OAAO,CAAC4C,CAAC,EAAE/vE,CAAC,CAAC;MACzC,IAAI,CAACpS,OAAO,EACV,MAAM,IAAIpF,KAAK,CAAC,qCAAqC,CAAC;MACxD,MAAMwnF,MAAM,GAAG,CAACrrE,CAAC,GAAGmiE,GAAG,MAAMA,GAAG;MAChC,MAAMmJ,aAAa,GAAG,CAACzoE,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,MAAM,CAAC;MAC5C,IAAIyoE,aAAa,KAAKD,MAAM,EAAE;QAC5BrrE,CAAC,GAAGwjE,GAAG,CAAC,CAACxjE,CAAC,CAAC;MACb;MACA,OAAO,IAAIsjE,KAAK,CAACtjE,CAAC,EAAEmjE,CAAC,CAAC;IACxB;IACA,aAAaoI,cAAcA,CAAC1+F,UAAU,EAAE;MACtC,OAAO,CAAC,MAAM2+F,oBAAoB,CAAC3+F,UAAU,CAAC,EAAE4+F,KAAK;IACvD;IACArB,UAAUA,CAAA,EAAG;MACX,MAAM1vF,KAAK,GAAGivF,iBAAiB,CAAC,IAAI,CAACxG,CAAC,CAAC;MACvCzoF,KAAK,CAAC,EAAE,CAAC,IAAI,IAAI,CAACslB,CAAC,GAAGmiE,GAAG,GAAG,IAAI,GAAG,CAAC;MACpC,OAAOznF,KAAK;IACd;IACAkwF,KAAKA,CAAA,EAAG;MACN,OAAOljG,UAAU,CAAC,IAAI,CAAC0iG,UAAU,CAAC,CAAC,CAAC;IACtC;IACAsB,QAAQA,CAAA,EAAG;MACT,MAAM;QAAEvI;MAAE,CAAC,GAAG,IAAI;MAClB,MAAMiI,CAAC,GAAG5H,GAAG,CAAC,CAACrB,GAAG,GAAGgB,CAAC,IAAIoE,MAAM,CAACpF,GAAG,GAAGgB,CAAC,CAAC,CAAC;MAC1C,OAAOwG,iBAAiB,CAACyB,CAAC,CAAC;IAC7B;IACAhE,aAAaA,CAAA,EAAG;MACd,OAAOlE,aAAa,CAACG,UAAU,CAAC,IAAI,CAAC,CAAC+D,aAAa,CAAC,CAAC;IACvD;IACAtnF,MAAMA,CAACikF,KAAK,EAAE;MACZ,OAAO,IAAI,CAAC/jE,CAAC,KAAK+jE,KAAK,CAAC/jE,CAAC,IAAI,IAAI,CAACmjE,CAAC,KAAKY,KAAK,CAACZ,CAAC;IACjD;IACAwB,MAAMA,CAAA,EAAG;MACP,OAAO,IAAIrB,KAAK,CAACE,GAAG,CAAC,CAAC,IAAI,CAACxjE,CAAC,CAAC,EAAE,IAAI,CAACmjE,CAAC,CAAC;IACxC;IACAx3E,GAAGA,CAACo4E,KAAK,EAAE;MACT,OAAOb,aAAa,CAACG,UAAU,CAAC,IAAI,CAAC,CAAC13E,GAAG,CAACu3E,aAAa,CAACG,UAAU,CAACU,KAAK,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC;IACvF;IACA4B,QAAQA,CAAC1B,KAAK,EAAE;MACd,OAAO,IAAI,CAACp4E,GAAG,CAACo4E,KAAK,CAACY,MAAM,CAAC,CAAC,CAAC;IACjC;IACAmC,QAAQA,CAACC,MAAM,EAAE;MACf,OAAO7D,aAAa,CAACG,UAAU,CAAC,IAAI,CAAC,CAACyD,QAAQ,CAACC,MAAM,EAAE,IAAI,CAAC,CAAClD,QAAQ,CAAC,CAAC;IACzE;EACF;EACAP,KAAK,CAACyC,IAAI,GAAG,IAAIzC,KAAK,CAACf,KAAK,CAACG,EAAE,EAAEH,KAAK,CAACI,EAAE,CAAC;EAC1CW,KAAK,CAACC,IAAI,GAAG,IAAID,KAAK,CAACpB,GAAG,EAAEC,GAAG,CAAC;EAChC,MAAMwJ,SAAS,CAAC;IACdr6F,WAAWA,CAAC49C,CAAC,EAAE15B,CAAC,EAAE;MAChB,IAAI,CAAC05B,CAAC,GAAGA,CAAC;MACV,IAAI,CAAC15B,CAAC,GAAGA,CAAC;MACV,IAAI,CAACo2E,cAAc,CAAC,CAAC;IACvB;IACA,OAAOpC,OAAOA,CAAC3mE,GAAG,EAAE;MAClB,MAAMnoB,KAAK,GAAGwuF,WAAW,CAACrmE,GAAG,EAAE,EAAE,CAAC;MAClC,MAAMqsB,CAAC,GAAGo0C,KAAK,CAACkG,OAAO,CAAC9uF,KAAK,CAACjQ,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC;MAClD,MAAM+qB,CAAC,GAAG01E,eAAe,CAACxwF,KAAK,CAACjQ,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;MAC9C,OAAO,IAAIkhG,SAAS,CAACz8C,CAAC,EAAE15B,CAAC,CAAC;IAC5B;IACAo2E,cAAcA,CAAA,EAAG;MACf,MAAM;QAAE18C,CAAC;QAAE15B;MAAE,CAAC,GAAG,IAAI;MACrB,IAAI,EAAE05B,CAAC,YAAYo0C,KAAK,CAAC,EACvB,MAAM,IAAIz/E,KAAK,CAAC,yBAAyB,CAAC;MAC5CmjF,eAAe,CAACxxE,CAAC,EAAE+sE,KAAK,CAAC7iC,CAAC,EAAE,KAAK,CAAC;MAClC,OAAO,IAAI;IACb;IACA0qC,UAAUA,CAAA,EAAG;MACX,MAAMyB,EAAE,GAAG,IAAI3iG,UAAU,CAAC,EAAE,CAAC;MAC7B2iG,EAAE,CAACx0E,GAAG,CAAC,IAAI,CAAC63B,CAAC,CAACk7C,UAAU,CAAC,CAAC,CAAC;MAC3ByB,EAAE,CAACx0E,GAAG,CAACsyE,iBAAiB,CAAC,IAAI,CAACn0E,CAAC,CAAC,EAAE,EAAE,CAAC;MACrC,OAAOq2E,EAAE;IACX;IACAjB,KAAKA,CAAA,EAAG;MACN,OAAOljG,UAAU,CAAC,IAAI,CAAC0iG,UAAU,CAAC,CAAC,CAAC;IACtC;EACF;EACA,SAAS0B,WAAWA,CAAA,EAAY;IAAA,SAAAz4D,IAAA,GAAAzhC,SAAA,CAAA3J,MAAA,EAAR8jG,MAAM,OAAAhiG,KAAA,CAAAspC,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAANy4D,MAAM,CAAAz4D,IAAA,IAAA1hC,SAAA,CAAA0hC,IAAA;IAAA;IAC5B,IAAI,CAACy4D,MAAM,CAACxnD,KAAK,CAAEvtB,CAAC,IAAKA,CAAC,YAAY9tB,UAAU,CAAC,EAC/C,MAAM,IAAI2a,KAAK,CAAC,0BAA0B,CAAC;IAC7C,IAAIkoF,MAAM,CAAC9jG,MAAM,KAAK,CAAC,EACrB,OAAO8jG,MAAM,CAAC,CAAC,CAAC;IAClB,MAAM9jG,MAAM,GAAG8jG,MAAM,CAACv5E,MAAM,CAAC,CAACwE,CAAC,EAAErB,GAAG,KAAKqB,CAAC,GAAGrB,GAAG,CAAC1tB,MAAM,EAAE,CAAC,CAAC;IAC3D,MAAMpB,MAAM,GAAG,IAAIqC,UAAU,CAACjB,MAAM,CAAC;IACrC,KAAK,IAAIgqB,CAAC,GAAG,CAAC,EAAEyrC,GAAG,GAAG,CAAC,EAAEzrC,CAAC,GAAG85E,MAAM,CAAC9jG,MAAM,EAAEgqB,CAAC,EAAE,EAAE;MAC/C,MAAM0D,GAAG,GAAGo2E,MAAM,CAAC95E,CAAC,CAAC;MACrBprB,MAAM,CAACwwB,GAAG,CAAC1B,GAAG,EAAE+nC,GAAG,CAAC;MACpBA,GAAG,IAAI/nC,GAAG,CAAC1tB,MAAM;IACnB;IACA,OAAOpB,MAAM;EACf;EACA,MAAMmlG,KAAK,GAAGjiG,KAAK,CAACC,IAAI,CAAC;IAAE/B,MAAM,EAAE;EAAI,CAAC,EAAE,CAACozB,CAAC,EAAEpJ,CAAC,KAAKA,CAAC,CAACznB,QAAQ,CAAC,EAAE,CAAC,CAACmI,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;EACpF,SAASjL,UAAUA,CAACukG,MAAM,EAAE;IAC1B,IAAI,EAAEA,MAAM,YAAY/iG,UAAU,CAAC,EACjC,MAAM,IAAI2a,KAAK,CAAC,qBAAqB,CAAC;IACxC,IAAIgf,GAAG,GAAG,EAAE;IACZ,KAAK,IAAI5Q,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGg6E,MAAM,CAAChkG,MAAM,EAAEgqB,CAAC,EAAE,EAAE;MACtC4Q,GAAG,IAAImpE,KAAK,CAACC,MAAM,CAACh6E,CAAC,CAAC,CAAC;IACzB;IACA,OAAO4Q,GAAG;EACZ;EACA,SAASl7B,UAAUA,CAACk7B,GAAG,EAAE;IACvB,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;MAC3B,MAAM,IAAIikC,SAAS,CAAC,mCAAmC,GAAG,OAAOjkC,GAAG,CAAC;IACvE;IACA,IAAIA,GAAG,CAAC56B,MAAM,GAAG,CAAC,EAChB,MAAM,IAAI4b,KAAK,CAAC,2CAA2C,CAAC;IAC9D,MAAM+9C,KAAK,GAAG,IAAI14D,UAAU,CAAC25B,GAAG,CAAC56B,MAAM,GAAG,CAAC,CAAC;IAC5C,KAAK,IAAIgqB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2vC,KAAK,CAAC35D,MAAM,EAAEgqB,CAAC,EAAE,EAAE;MACrC,MAAM2pC,CAAC,GAAG3pC,CAAC,GAAG,CAAC;MACf,MAAMi6E,OAAO,GAAGrpE,GAAG,CAACp4B,KAAK,CAACmxD,CAAC,EAAEA,CAAC,GAAG,CAAC,CAAC;MACnC,MAAM9vD,IAAI,GAAGgZ,MAAM,CAAC7Z,QAAQ,CAACihG,OAAO,EAAE,EAAE,CAAC;MACzC,IAAIpnF,MAAM,CAAC49C,KAAK,CAAC52D,IAAI,CAAC,IAAIA,IAAI,GAAG,CAAC,EAChC,MAAM,IAAI+X,KAAK,CAAC,uBAAuB,CAAC;MAC1C+9C,KAAK,CAAC3vC,CAAC,CAAC,GAAGnmB,IAAI;IACjB;IACA,OAAO81D,KAAK;EACd;EACA,SAASuqC,iBAAiBA,CAACjpC,GAAG,EAAE;IAC9B,MAAMj7D,MAAM,GAAG,EAAE;IACjB,MAAM46B,GAAG,GAAGqgC,GAAG,CAAC14D,QAAQ,CAAC,EAAE,CAAC,CAACmI,QAAQ,CAAC1K,MAAM,GAAG,CAAC,EAAE,GAAG,CAAC;IACtD,OAAON,UAAU,CAACk7B,GAAG,CAAC;EACxB;EACA,SAAS8mE,iBAAiBA,CAACzmC,GAAG,EAAE;IAC9B,OAAOipC,iBAAiB,CAACjpC,GAAG,CAAC,CAACjrD,OAAO,CAAC,CAAC;EACzC;EACA,SAASywF,YAAYA,CAACxlC,GAAG,EAAE;IACzB,OAAO,CAACsgC,GAAG,CAACtgC,GAAG,CAAC,GAAGi/B,GAAG,MAAMA,GAAG;EACjC;EACA,SAAS+I,eAAeA,CAACe,MAAM,EAAE;IAC/B,IAAI,EAAEA,MAAM,YAAY/iG,UAAU,CAAC,EACjC,MAAM,IAAI2a,KAAK,CAAC,qBAAqB,CAAC;IACxC,OAAOb,MAAM,CAAC,IAAI,GAAGtb,UAAU,CAACwB,UAAU,CAACc,IAAI,CAACiiG,MAAM,CAAC,CAACh0F,OAAO,CAAC,CAAC,CAAC,CAAC;EACrE;EACA,MAAMm0F,QAAQ,GAAGppF,MAAM,CAAC,oEAAoE,CAAC;EAC7F,SAASomF,kBAAkBA,CAAC1uF,KAAK,EAAE;IACjC,OAAO8oF,GAAG,CAAC0H,eAAe,CAACxwF,KAAK,CAAC,GAAG0xF,QAAQ,CAAC;EAC/C;EACA,SAAS5I,GAAGA,CAACxsE,CAAC,EAAe;IAAA,IAAbzsB,CAAC,GAAAqH,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG2wF,KAAK,CAACC,CAAC;IACzB,MAAMxwF,GAAG,GAAGglB,CAAC,GAAGzsB,CAAC;IACjB,OAAOyH,GAAG,IAAIkwF,GAAG,GAAGlwF,GAAG,GAAGzH,CAAC,GAAGyH,GAAG;EACnC;EACA,SAASu1F,MAAMA,CAAC8E,MAAM,EAAoB;IAAA,IAAlBC,MAAM,GAAA16F,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG2wF,KAAK,CAACC,CAAC;IACtC,IAAI6J,MAAM,KAAKnK,GAAG,IAAIoK,MAAM,IAAIpK,GAAG,EAAE;MACnC,MAAM,IAAIr+E,KAAK,CAAE,6CAA4CwoF,MAAO,QAAOC,MAAO,EAAC,CAAC;IACtF;IACA,IAAIt1E,CAAC,GAAGwsE,GAAG,CAAC6I,MAAM,EAAEC,MAAM,CAAC;IAC3B,IAAI/hG,CAAC,GAAG+hG,MAAM;IACd,IAAItsE,CAAC,GAAGkiE,GAAG;MAAEkJ,CAAC,GAAGjJ,GAAG;IACpB,OAAOnrE,CAAC,KAAKkrE,GAAG,EAAE;MAChB,MAAMqK,CAAC,GAAGhiG,CAAC,GAAGysB,CAAC;MACf,MAAMk4B,CAAC,GAAG3kD,CAAC,GAAGysB,CAAC;MACf,MAAM+rC,CAAC,GAAG/iC,CAAC,GAAGorE,CAAC,GAAGmB,CAAC;MACnBhiG,CAAC,GAAGysB,CAAC,EAAEA,CAAC,GAAGk4B,CAAC,EAAElvB,CAAC,GAAGorE,CAAC,EAAEA,CAAC,GAAGroC,CAAC;IAC5B;IACA,MAAMypC,GAAG,GAAGjiG,CAAC;IACb,IAAIiiG,GAAG,KAAKrK,GAAG,EACb,MAAM,IAAIt+E,KAAK,CAAC,wBAAwB,CAAC;IAC3C,OAAO2/E,GAAG,CAACxjE,CAAC,EAAEssE,MAAM,CAAC;EACvB;EACA,SAAS1I,WAAWA,CAAC6I,IAAI,EAAe;IAAA,IAAbptC,CAAC,GAAAztD,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG2wF,KAAK,CAACC,CAAC;IACpC,MAAMkK,GAAG,GAAG,IAAI3iG,KAAK,CAAC0iG,IAAI,CAACxkG,MAAM,CAAC;IAClC,MAAM0kG,cAAc,GAAGF,IAAI,CAACj6E,MAAM,CAAC,CAACC,GAAG,EAAEywC,GAAG,EAAEjxC,CAAC,KAAK;MAClD,IAAIixC,GAAG,KAAKg/B,GAAG,EACb,OAAOzvE,GAAG;MACZi6E,GAAG,CAACz6E,CAAC,CAAC,GAAGQ,GAAG;MACZ,OAAO+wE,GAAG,CAAC/wE,GAAG,GAAGywC,GAAG,EAAE7D,CAAC,CAAC;IAC1B,CAAC,EAAE8iC,GAAG,CAAC;IACP,MAAMyK,QAAQ,GAAGrF,MAAM,CAACoF,cAAc,EAAEttC,CAAC,CAAC;IAC1CotC,IAAI,CAACI,WAAW,CAAC,CAACp6E,GAAG,EAAEywC,GAAG,EAAEjxC,CAAC,KAAK;MAChC,IAAIixC,GAAG,KAAKg/B,GAAG,EACb,OAAOzvE,GAAG;MACZi6E,GAAG,CAACz6E,CAAC,CAAC,GAAGuxE,GAAG,CAAC/wE,GAAG,GAAGi6E,GAAG,CAACz6E,CAAC,CAAC,EAAEotC,CAAC,CAAC;MAC7B,OAAOmkC,GAAG,CAAC/wE,GAAG,GAAGywC,GAAG,EAAE7D,CAAC,CAAC;IAC1B,CAAC,EAAEutC,QAAQ,CAAC;IACZ,OAAOF,GAAG;EACZ;EACA,SAASI,IAAIA,CAAC9sE,CAAC,EAAE+sE,KAAK,EAAE;IACtB,MAAM;MAAEvK;IAAE,CAAC,GAAGD,KAAK;IACnB,IAAIvwF,GAAG,GAAGguB,CAAC;IACX,OAAO+sE,KAAK,EAAE,GAAG7K,GAAG,EAAE;MACpBlwF,GAAG,IAAIA,GAAG;MACVA,GAAG,IAAIwwF,CAAC;IACV;IACA,OAAOxwF,GAAG;EACZ;EACA,SAASg7F,WAAWA,CAAChtE,CAAC,EAAE;IACtB,MAAM;MAAEwiE;IAAE,CAAC,GAAGD,KAAK;IACnB,MAAM0K,GAAG,GAAGjqF,MAAM,CAAC,CAAC,CAAC;IACrB,MAAMkqF,IAAI,GAAGlqF,MAAM,CAAC,EAAE,CAAC;IACvB,MAAMmqF,IAAI,GAAGnqF,MAAM,CAAC,EAAE,CAAC;IACvB,MAAMoqF,IAAI,GAAGpqF,MAAM,CAAC,EAAE,CAAC;IACvB,MAAMqqF,IAAI,GAAGrqF,MAAM,CAAC,EAAE,CAAC;IACvB,MAAMsqF,EAAE,GAAIttE,CAAC,GAAGA,CAAC,GAAIwiE,CAAC;IACtB,MAAM+K,EAAE,GAAID,EAAE,GAAGttE,CAAC,GAAIwiE,CAAC;IACvB,MAAMgL,EAAE,GAAIV,IAAI,CAACS,EAAE,EAAEnL,GAAG,CAAC,GAAGmL,EAAE,GAAI/K,CAAC;IACnC,MAAMiL,EAAE,GAAIX,IAAI,CAACU,EAAE,EAAErL,GAAG,CAAC,GAAGniE,CAAC,GAAIwiE,CAAC;IAClC,MAAMkL,GAAG,GAAIZ,IAAI,CAACW,EAAE,EAAER,GAAG,CAAC,GAAGQ,EAAE,GAAIjL,CAAC;IACpC,MAAMmL,GAAG,GAAIb,IAAI,CAACY,GAAG,EAAER,IAAI,CAAC,GAAGQ,GAAG,GAAIlL,CAAC;IACvC,MAAMoL,GAAG,GAAId,IAAI,CAACa,GAAG,EAAER,IAAI,CAAC,GAAGQ,GAAG,GAAInL,CAAC;IACvC,MAAMqL,GAAG,GAAIf,IAAI,CAACc,GAAG,EAAER,IAAI,CAAC,GAAGQ,GAAG,GAAIpL,CAAC;IACvC,MAAMsL,IAAI,GAAIhB,IAAI,CAACe,GAAG,EAAER,IAAI,CAAC,GAAGQ,GAAG,GAAIrL,CAAC;IACxC,MAAMuL,IAAI,GAAIjB,IAAI,CAACgB,IAAI,EAAET,IAAI,CAAC,GAAGQ,GAAG,GAAIrL,CAAC;IACzC,MAAMwL,IAAI,GAAIlB,IAAI,CAACiB,IAAI,EAAEb,IAAI,CAAC,GAAGQ,GAAG,GAAIlL,CAAC;IACzC,MAAMyL,SAAS,GAAInB,IAAI,CAACkB,IAAI,EAAE5L,GAAG,CAAC,GAAGpiE,CAAC,GAAIwiE,CAAC;IAC3C,OAAO;MAAEyL,SAAS;MAAEV;IAAG,CAAC;EAC1B;EACA,SAAS/E,OAAOA,CAAC4C,CAAC,EAAE/vE,CAAC,EAAE;IACrB,MAAM6yE,EAAE,GAAG1K,GAAG,CAACnoE,CAAC,GAAGA,CAAC,GAAGA,CAAC,CAAC;IACzB,MAAM8yE,EAAE,GAAG3K,GAAG,CAAC0K,EAAE,GAAGA,EAAE,GAAG7yE,CAAC,CAAC;IAC3B,MAAMi5D,GAAG,GAAG0Y,WAAW,CAAC5B,CAAC,GAAG+C,EAAE,CAAC,CAACF,SAAS;IACzC,IAAIjuE,CAAC,GAAGwjE,GAAG,CAAC4H,CAAC,GAAG8C,EAAE,GAAG5Z,GAAG,CAAC;IACzB,MAAM8Z,GAAG,GAAG5K,GAAG,CAACnoE,CAAC,GAAG2E,CAAC,GAAGA,CAAC,CAAC;IAC1B,MAAMquE,KAAK,GAAGruE,CAAC;IACf,MAAMsuE,KAAK,GAAG9K,GAAG,CAACxjE,CAAC,GAAG6iE,OAAO,CAAC;IAC9B,MAAM0L,QAAQ,GAAGH,GAAG,KAAKhD,CAAC;IAC1B,MAAMoD,QAAQ,GAAGJ,GAAG,KAAK5K,GAAG,CAAC,CAAC4H,CAAC,CAAC;IAChC,MAAMqD,MAAM,GAAGL,GAAG,KAAK5K,GAAG,CAAC,CAAC4H,CAAC,GAAGvI,OAAO,CAAC;IACxC,IAAI0L,QAAQ,EACVvuE,CAAC,GAAGquE,KAAK;IACX,IAAIG,QAAQ,IAAIC,MAAM,EACpBzuE,CAAC,GAAGsuE,KAAK;IACX,IAAI5F,YAAY,CAAC1oE,CAAC,CAAC,EACjBA,CAAC,GAAGwjE,GAAG,CAAC,CAACxjE,CAAC,CAAC;IACb,OAAO;MAAE/W,OAAO,EAAEslF,QAAQ,IAAIC,QAAQ;MAAEh8F,KAAK,EAAEwtB;IAAE,CAAC;EACpD;EACA,SAASiqE,UAAUA,CAACoC,MAAM,EAAE;IAC1B,OAAO7D,OAAO,CAACrG,GAAG,EAAEkK,MAAM,CAAC;EAC7B;EACA,SAASqC,MAAMA,CAAC3mG,IAAI,EAAE;IACpB,OAAOy7F,GAAG,CAAC0H,eAAe,CAACnjG,IAAI,CAAC,EAAEw6F,KAAK,CAAC7iC,CAAC,CAAC;EAC5C;EACA,SAASgqC,UAAUA,CAACiF,EAAE,EAAEpB,EAAE,EAAE;IAC1B,IAAIoB,EAAE,CAAC1mG,MAAM,KAAKslG,EAAE,CAACtlG,MAAM,EAAE;MAC3B,OAAO,KAAK;IACd;IACA,KAAK,IAAIgqB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG08E,EAAE,CAAC1mG,MAAM,EAAEgqB,CAAC,EAAE,EAAE;MAClC,IAAI08E,EAAE,CAAC18E,CAAC,CAAC,KAAKs7E,EAAE,CAACt7E,CAAC,CAAC,EAAE;QACnB,OAAO,KAAK;MACd;IACF;IACA,OAAO,IAAI;EACb;EACA,SAASi3E,WAAWA,CAACrmE,GAAG,EAAE+rE,cAAc,EAAE;IACxC,MAAMl0F,KAAK,GAAGmoB,GAAG,YAAY35B,UAAU,GAAGA,UAAU,CAACc,IAAI,CAAC64B,GAAG,CAAC,GAAGl7B,UAAU,CAACk7B,GAAG,CAAC;IAChF,IAAI,OAAO+rE,cAAc,KAAK,QAAQ,IAAIl0F,KAAK,CAACzS,MAAM,KAAK2mG,cAAc,EACvE,MAAM,IAAI/qF,KAAK,CAAE,YAAW+qF,cAAe,QAAO,CAAC;IACrD,OAAOl0F,KAAK;EACd;EACA,SAASssF,eAAeA,CAAC9jC,GAAG,EAAEnkD,GAAG,EAAiB;IAAA,IAAfisF,MAAM,GAAAp5F,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,IAAI;IAC9C,IAAI,CAACmN,GAAG,EACN,MAAM,IAAI+nD,SAAS,CAAC,mBAAmB,CAAC;IAC1C,IAAI,OAAO5D,GAAG,KAAK,QAAQ,IAAIp+C,MAAM,CAAC+pF,aAAa,CAAC3rC,GAAG,CAAC,EACtDA,GAAG,GAAGlgD,MAAM,CAACkgD,GAAG,CAAC;IACnB,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAIA,GAAG,GAAGnkD,GAAG,EAAE;MACxC,IAAIisF,MAAM,EAAE;QACV,IAAI9I,GAAG,GAAGh/B,GAAG,EACX,OAAOA,GAAG;MACd,CAAC,MACI;QACH,IAAIg/B,GAAG,IAAIh/B,GAAG,EACZ,OAAOA,GAAG;MACd;IACF;IACA,MAAM,IAAI4D,SAAS,CAAC,yCAAyC,CAAC;EAChE;EACA,SAASgoC,gBAAgBA,CAACp0F,KAAK,EAAE;IAC/BA,KAAK,CAAC,CAAC,CAAC,IAAI,GAAG;IACfA,KAAK,CAAC,EAAE,CAAC,IAAI,GAAG;IAChBA,KAAK,CAAC,EAAE,CAAC,IAAI,EAAE;IACf,OAAOA,KAAK;EACd;EACA,SAASq0F,iBAAiBA,CAAClvF,CAAC,EAAE;IAC5B,OAAOqrF,eAAe,CAAC4D,gBAAgB,CAAC5F,WAAW,CAACrpF,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;EAC9D;EACA,SAASmvF,eAAeA,CAACxlG,GAAG,EAAE;IAC5BA,GAAG,GACD,OAAOA,GAAG,KAAK,QAAQ,IAAI,OAAOA,GAAG,KAAK,QAAQ,GAC9C2iG,iBAAiB,CAACnF,eAAe,CAACx9F,GAAG,EAAEo5F,SAAS,CAAC,CAAC,GAClDsG,WAAW,CAAC1/F,GAAG,CAAC;IACtB,IAAIA,GAAG,CAACvB,MAAM,KAAK,EAAE,EACnB,MAAM,IAAI4b,KAAK,CAAE,mBAAkB,CAAC;IACtC,OAAOra,GAAG;EACZ;EACA,SAASylG,cAAcA,CAACC,MAAM,EAAE;IAC9B,MAAMC,IAAI,GAAGL,gBAAgB,CAACI,MAAM,CAACzkG,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAClD,MAAMqsB,MAAM,GAAGo4E,MAAM,CAACzkG,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC;IACnC,MAAMs8F,MAAM,GAAG2H,MAAM,CAACS,IAAI,CAAC;IAC3B,MAAM1D,KAAK,GAAGnI,KAAK,CAACyC,IAAI,CAACe,QAAQ,CAACC,MAAM,CAAC;IACzC,MAAMqI,UAAU,GAAG3D,KAAK,CAACrB,UAAU,CAAC,CAAC;IACrC,OAAO;MAAE+E,IAAI;MAAEr4E,MAAM;MAAEiwE,MAAM;MAAE0E,KAAK;MAAE2D;IAAW,CAAC;EACpD;EACA,IAAIC,WAAW;EACf,SAASC,OAAOA,CAAA,EAAO;IACrB,IAAI,OAAOD,WAAW,KAAK,UAAU,EACnC,MAAM,IAAIxrF,KAAK,CAAC,kDAAkD,CAAC;IACrE,OAAOwrF,WAAW,CAAC,GAAAz9F,SAAI,CAAC;EAC1B;EACA,eAAe45F,oBAAoBA,CAAChiG,GAAG,EAAE;IACvC,OAAOylG,cAAc,CAAC,MAAM3xC,KAAK,CAACiyC,MAAM,CAACP,eAAe,CAACxlG,GAAG,CAAC,CAAC,CAAC;EACjE;EACA,SAASgmG,wBAAwBA,CAAChmG,GAAG,EAAE;IACrC,OAAOylG,cAAc,CAACK,OAAO,CAACN,eAAe,CAACxlG,GAAG,CAAC,CAAC,CAAC;EACtD;EACA,eAAeimG,YAAYA,CAAC5iG,UAAU,EAAE;IACtC,OAAO,CAAC,MAAM2+F,oBAAoB,CAAC3+F,UAAU,CAAC,EAAEuiG,UAAU;EAC5D;EACA,SAASM,gBAAgBA,CAAC7iG,UAAU,EAAE;IACpC,OAAO2iG,wBAAwB,CAAC3iG,UAAU,CAAC,CAACuiG,UAAU;EACxD;EACA,eAAe7mG,IAAIA,CAACtB,OAAO,EAAE4F,UAAU,EAAE;IACvC5F,OAAO,GAAGiiG,WAAW,CAACjiG,OAAO,CAAC;IAC9B,MAAM;MAAE6vB,MAAM;MAAEiwE,MAAM;MAAEqI;IAAW,CAAC,GAAG,MAAM5D,oBAAoB,CAAC3+F,UAAU,CAAC;IAC7E,MAAMqiD,CAAC,GAAGw/C,MAAM,CAAC,MAAMpxC,KAAK,CAACiyC,MAAM,CAACz4E,MAAM,EAAE7vB,OAAO,CAAC,CAAC;IACrD,MAAM0oG,CAAC,GAAGrM,KAAK,CAACyC,IAAI,CAACe,QAAQ,CAAC53C,CAAC,CAAC;IAChC,MAAM0gD,CAAC,GAAGlB,MAAM,CAAC,MAAMpxC,KAAK,CAACiyC,MAAM,CAACI,CAAC,CAACvF,UAAU,CAAC,CAAC,EAAEgF,UAAU,EAAEnoG,OAAO,CAAC,CAAC;IACzE,MAAMuuB,CAAC,GAAGguE,GAAG,CAACt0C,CAAC,GAAG0gD,CAAC,GAAG7I,MAAM,EAAExE,KAAK,CAAC7iC,CAAC,CAAC;IACtC,OAAO,IAAIisC,SAAS,CAACgE,CAAC,EAAEn6E,CAAC,CAAC,CAAC40E,UAAU,CAAC,CAAC;EACzC;EACA,SAASyF,QAAQA,CAAC5oG,OAAO,EAAE4F,UAAU,EAAE;IACrC5F,OAAO,GAAGiiG,WAAW,CAACjiG,OAAO,CAAC;IAC9B,MAAM;MAAE6vB,MAAM;MAAEiwE,MAAM;MAAEqI;IAAW,CAAC,GAAGI,wBAAwB,CAAC3iG,UAAU,CAAC;IAC3E,MAAMqiD,CAAC,GAAGw/C,MAAM,CAACY,OAAO,CAACx4E,MAAM,EAAE7vB,OAAO,CAAC,CAAC;IAC1C,MAAM0oG,CAAC,GAAGrM,KAAK,CAACyC,IAAI,CAACe,QAAQ,CAAC53C,CAAC,CAAC;IAChC,MAAM0gD,CAAC,GAAGlB,MAAM,CAACY,OAAO,CAACK,CAAC,CAACvF,UAAU,CAAC,CAAC,EAAEgF,UAAU,EAAEnoG,OAAO,CAAC,CAAC;IAC9D,MAAMuuB,CAAC,GAAGguE,GAAG,CAACt0C,CAAC,GAAG0gD,CAAC,GAAG7I,MAAM,EAAExE,KAAK,CAAC7iC,CAAC,CAAC;IACtC,OAAO,IAAIisC,SAAS,CAACgE,CAAC,EAAEn6E,CAAC,CAAC,CAAC40E,UAAU,CAAC,CAAC;EACzC;EACA,SAAS0F,mBAAmBA,CAACC,GAAG,EAAE9oG,OAAO,EAAEwiB,SAAS,EAAE;IACpDxiB,OAAO,GAAGiiG,WAAW,CAACjiG,OAAO,CAAC;IAC9B,IAAI,EAAEwiB,SAAS,YAAY65E,KAAK,CAAC,EAC/B75E,SAAS,GAAG65E,KAAK,CAACkG,OAAO,CAAC//E,SAAS,EAAE,KAAK,CAAC;IAC7C,MAAM;MAAEylC,CAAC;MAAE15B;IAAE,CAAC,GAAGu6E,GAAG,YAAYpE,SAAS,GAAGoE,GAAG,CAACnE,cAAc,CAAC,CAAC,GAAGD,SAAS,CAACnC,OAAO,CAACuG,GAAG,CAAC;IACzF,MAAMC,EAAE,GAAG9M,aAAa,CAAC6C,IAAI,CAACkB,cAAc,CAACzxE,CAAC,CAAC;IAC/C,OAAO;MAAE05B,CAAC;MAAE15B,CAAC;MAAEw6E,EAAE;MAAEC,GAAG,EAAExmF,SAAS;MAAEuI,GAAG,EAAE/qB;IAAQ,CAAC;EACnD;EACA,SAASipG,kBAAkBA,CAACzmF,SAAS,EAAEylC,CAAC,EAAE8gD,EAAE,EAAEd,MAAM,EAAE;IACpD,MAAMU,CAAC,GAAGlB,MAAM,CAACQ,MAAM,CAAC;IACxB,MAAMiB,EAAE,GAAGjN,aAAa,CAACG,UAAU,CAAC55E,SAAS,CAAC,CAACw9E,cAAc,CAAC2I,CAAC,CAAC;IAChE,MAAMQ,GAAG,GAAGlN,aAAa,CAACG,UAAU,CAACn0C,CAAC,CAAC,CAACvjC,GAAG,CAACwkF,EAAE,CAAC;IAC/C,OAAOC,GAAG,CAAC3K,QAAQ,CAACuK,EAAE,CAAC,CAAC/I,cAAc,CAAC1E,KAAK,CAACE,CAAC,CAAC,CAAC3iF,MAAM,CAACojF,aAAa,CAACK,IAAI,CAAC;EAC5E;EACA,eAAe8M,MAAMA,CAACN,GAAG,EAAE9oG,OAAO,EAAEwiB,SAAS,EAAE;IAC7C,MAAM;MAAEylC,CAAC;MAAE8gD,EAAE;MAAEh+E,GAAG;MAAEi+E;IAAI,CAAC,GAAGH,mBAAmB,CAACC,GAAG,EAAE9oG,OAAO,EAAEwiB,SAAS,CAAC;IACxE,MAAMylF,MAAM,GAAG,MAAM5xC,KAAK,CAACiyC,MAAM,CAACrgD,CAAC,CAACk7C,UAAU,CAAC,CAAC,EAAE6F,GAAG,CAAC7F,UAAU,CAAC,CAAC,EAAEp4E,GAAG,CAAC;IACxE,OAAOk+E,kBAAkB,CAACD,GAAG,EAAE/gD,CAAC,EAAE8gD,EAAE,EAAEd,MAAM,CAAC;EAC/C;EACA,SAASoB,UAAUA,CAACP,GAAG,EAAE9oG,OAAO,EAAEwiB,SAAS,EAAE;IAC3C,MAAM;MAAEylC,CAAC;MAAE8gD,EAAE;MAAEh+E,GAAG;MAAEi+E;IAAI,CAAC,GAAGH,mBAAmB,CAACC,GAAG,EAAE9oG,OAAO,EAAEwiB,SAAS,CAAC;IACxE,MAAMylF,MAAM,GAAGI,OAAO,CAACpgD,CAAC,CAACk7C,UAAU,CAAC,CAAC,EAAE6F,GAAG,CAAC7F,UAAU,CAAC,CAAC,EAAEp4E,GAAG,CAAC;IAC7D,OAAOk+E,kBAAkB,CAACD,GAAG,EAAE/gD,CAAC,EAAE8gD,EAAE,EAAEd,MAAM,CAAC;EAC/C;EACA,MAAMqB,IAAI,GAAG;IACX/E,oBAAoB,EAAEgE,wBAAwB;IAC9CC,YAAY,EAAEC,gBAAgB;IAC9BnnG,IAAI,EAAEsnG,QAAQ;IACdQ,MAAM,EAAEC;EACV,CAAC;EACD,eAAe14E,eAAeA,CAAC/qB,UAAU,EAAE4c,SAAS,EAAE;IACpD,MAAM;MAAE0lF;IAAK,CAAC,GAAG,MAAM3D,oBAAoB,CAAC3+F,UAAU,CAAC;IACvD,MAAMu+F,CAAC,GAAG9H,KAAK,CAACkG,OAAO,CAAC//E,SAAS,CAAC,CAACiiF,QAAQ,CAAC,CAAC;IAC7C,OAAO8E,UAAU,CAACC,UAAU,CAACtB,IAAI,EAAE/D,CAAC,CAAC;EACvC;EACA9H,KAAK,CAACyC,IAAI,CAACgF,cAAc,CAAC,CAAC,CAAC;EAC5B,SAAS2F,KAAKA,CAACluD,IAAI,EAAEmuD,GAAG,EAAEC,GAAG,EAAE;IAC7B,MAAMC,KAAK,GAAGrN,GAAG,CAAChhD,IAAI,IAAImuD,GAAG,GAAGC,GAAG,CAAC,CAAC;IACrCD,GAAG,GAAGnN,GAAG,CAACmN,GAAG,GAAGE,KAAK,CAAC;IACtBD,GAAG,GAAGpN,GAAG,CAACoN,GAAG,GAAGC,KAAK,CAAC;IACtB,OAAO,CAACF,GAAG,EAAEC,GAAG,CAAC;EACnB;EACA,SAASE,gBAAgBA,CAACC,MAAM,EAAEhK,MAAM,EAAE;IACxC,MAAM;MAAEvE;IAAE,CAAC,GAAGD,KAAK;IACnB,MAAM6I,CAAC,GAAGpE,eAAe,CAAC+J,MAAM,EAAEvO,CAAC,CAAC;IACpC,MAAMoN,CAAC,GAAG5I,eAAe,CAACD,MAAM,EAAEvE,CAAC,CAAC;IACpC,MAAMwO,GAAG,GAAGhuF,MAAM,CAAC,MAAM,CAAC;IAC1B,MAAMiuF,GAAG,GAAG7F,CAAC;IACb,IAAIuF,GAAG,GAAGxO,GAAG;IACb,IAAI+O,GAAG,GAAGhP,GAAG;IACb,IAAI0O,GAAG,GAAGxF,CAAC;IACX,IAAI+F,GAAG,GAAGhP,GAAG;IACb,IAAI3/C,IAAI,GAAG0/C,GAAG;IACd,IAAIkP,EAAE;IACN,KAAK,IAAIh2C,CAAC,GAAGp4C,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,EAAEo4C,CAAC,IAAI8mC,GAAG,EAAE9mC,CAAC,EAAE,EAAE;MAC3C,MAAMi2C,GAAG,GAAIzB,CAAC,IAAIx0C,CAAC,GAAI+mC,GAAG;MAC1B3/C,IAAI,IAAI6uD,GAAG;MACXD,EAAE,GAAGV,KAAK,CAACluD,IAAI,EAAEmuD,GAAG,EAAEC,GAAG,CAAC;MAC1BD,GAAG,GAAGS,EAAE,CAAC,CAAC,CAAC;MACXR,GAAG,GAAGQ,EAAE,CAAC,CAAC,CAAC;MACXA,EAAE,GAAGV,KAAK,CAACluD,IAAI,EAAE0uD,GAAG,EAAEC,GAAG,CAAC;MAC1BD,GAAG,GAAGE,EAAE,CAAC,CAAC,CAAC;MACXD,GAAG,GAAGC,EAAE,CAAC,CAAC,CAAC;MACX5uD,IAAI,GAAG6uD,GAAG;MACV,MAAMxM,CAAC,GAAG8L,GAAG,GAAGO,GAAG;MACnB,MAAMI,EAAE,GAAG9N,GAAG,CAACqB,CAAC,GAAGA,CAAC,CAAC;MACrB,MAAMC,CAAC,GAAG6L,GAAG,GAAGO,GAAG;MACnB,MAAMK,EAAE,GAAG/N,GAAG,CAACsB,CAAC,GAAGA,CAAC,CAAC;MACrB,MAAMI,CAAC,GAAGoM,EAAE,GAAGC,EAAE;MACjB,MAAMxM,CAAC,GAAG6L,GAAG,GAAGO,GAAG;MACnB,MAAMnM,CAAC,GAAG4L,GAAG,GAAGO,GAAG;MACnB,MAAMK,EAAE,GAAGhO,GAAG,CAACwB,CAAC,GAAGH,CAAC,CAAC;MACrB,MAAM4M,EAAE,GAAGjO,GAAG,CAACuB,CAAC,GAAGD,CAAC,CAAC;MACrB,MAAM4M,IAAI,GAAGF,EAAE,GAAGC,EAAE;MACpB,MAAME,KAAK,GAAGH,EAAE,GAAGC,EAAE;MACrBb,GAAG,GAAGpN,GAAG,CAACkO,IAAI,GAAGA,IAAI,CAAC;MACtBP,GAAG,GAAG3N,GAAG,CAACyN,GAAG,GAAGzN,GAAG,CAACmO,KAAK,GAAGA,KAAK,CAAC,CAAC;MACnChB,GAAG,GAAGnN,GAAG,CAAC8N,EAAE,GAAGC,EAAE,CAAC;MAClBL,GAAG,GAAG1N,GAAG,CAAC0B,CAAC,IAAIoM,EAAE,GAAG9N,GAAG,CAACwN,GAAG,GAAG9L,CAAC,CAAC,CAAC,CAAC;IACpC;IACAkM,EAAE,GAAGV,KAAK,CAACluD,IAAI,EAAEmuD,GAAG,EAAEC,GAAG,CAAC;IAC1BD,GAAG,GAAGS,EAAE,CAAC,CAAC,CAAC;IACXR,GAAG,GAAGQ,EAAE,CAAC,CAAC,CAAC;IACXA,EAAE,GAAGV,KAAK,CAACluD,IAAI,EAAE0uD,GAAG,EAAEC,GAAG,CAAC;IAC1BD,GAAG,GAAGE,EAAE,CAAC,CAAC,CAAC;IACXD,GAAG,GAAGC,EAAE,CAAC,CAAC,CAAC;IACX,MAAM;MAAEnD,SAAS;MAAEV;IAAG,CAAC,GAAGP,WAAW,CAACkE,GAAG,CAAC;IAC1C,MAAMU,GAAG,GAAGpO,GAAG,CAACsJ,IAAI,CAACmB,SAAS,EAAEjrF,MAAM,CAAC,CAAC,CAAC,CAAC,GAAGuqF,EAAE,CAAC;IAChD,OAAO/J,GAAG,CAACmN,GAAG,GAAGiB,GAAG,CAAC;EACvB;EACA,SAASC,iBAAiBA,CAACzG,CAAC,EAAE;IAC5B,OAAOzB,iBAAiB,CAACnG,GAAG,CAAC4H,CAAC,EAAE7I,KAAK,CAACC,CAAC,CAAC,CAAC;EAC3C;EACA,SAASsP,iBAAiBA,CAACC,IAAI,EAAE;IAC/B,MAAM3G,CAAC,GAAGlC,WAAW,CAAC6I,IAAI,EAAE,EAAE,CAAC;IAC/B3G,CAAC,CAAC,EAAE,CAAC,IAAI,GAAG;IACZ,OAAOF,eAAe,CAACE,CAAC,CAAC;EAC3B;EACA,MAAMoF,UAAU,GAAG;IACjBwB,YAAY,EAAE,kEAAkE;IAChFvB,UAAUA,CAAC5jG,UAAU,EAAE4c,SAAS,EAAE;MAChC,MAAM2hF,CAAC,GAAG0G,iBAAiB,CAACroF,SAAS,CAAC;MACtC,MAAM41C,CAAC,GAAG0vC,iBAAiB,CAACliG,UAAU,CAAC;MACvC,MAAMolG,EAAE,GAAGnB,gBAAgB,CAAC1F,CAAC,EAAE/rC,CAAC,CAAC;MACjC,IAAI4yC,EAAE,KAAK/P,GAAG,EACZ,MAAM,IAAIr+E,KAAK,CAAC,wCAAwC,CAAC;MAC3D,OAAOguF,iBAAiB,CAACI,EAAE,CAAC;IAC9B,CAAC;IACDC,cAAcA,CAACrlG,UAAU,EAAE;MACzB,OAAO2jG,UAAU,CAACC,UAAU,CAAC5jG,UAAU,EAAE2jG,UAAU,CAACwB,YAAY,CAAC;IACnE;EACF,CAAC;EACD,MAAMhpG,MAAM,GAAG;IACbiwF,IAAI,EAAEgJ,UAAU;IAChBkQ,GAAG,EAAE,OAAO9/D,IAAI,KAAK,QAAQ,IAAI,QAAQ,IAAIA,IAAI,GAAGA,IAAI,CAACrpC,MAAM,GAAGlD;EACpE,CAAC;EACD,MAAMw3D,KAAK,GAAG;IACZ51D,UAAU;IACVC,UAAU;IACVmkG,WAAW;IACXN,oBAAoB;IACpBhI,GAAG;IACH+D,MAAM;IACN6K,gBAAgB,EAAE,CAChB,kEAAkE,EAClE,kEAAkE,EAClE,kEAAkE,EAClE,kEAAkE,EAClE,kEAAkE,EAClE,kEAAkE,EAClE,kEAAkE,EAClE,kEAAkE,CACnE;IACDC,mBAAmB,EAAGtqG,IAAI,IAAK;MAC7BA,IAAI,GAAGmhG,WAAW,CAACnhG,IAAI,CAAC;MACxB,IAAIA,IAAI,CAACE,MAAM,GAAG,EAAE,IAAIF,IAAI,CAACE,MAAM,GAAG,IAAI,EACxC,MAAM,IAAI4b,KAAK,CAAC,uDAAuD,CAAC;MAC1E,OAAO2/E,GAAG,CAAC0H,eAAe,CAACnjG,IAAI,CAAC,EAAEw6F,KAAK,CAAC7iC,CAAC,GAAGyiC,GAAG,CAAC,GAAGA,GAAG;IACxD,CAAC;IACD1oD,WAAW,EAAE,SAAAA,CAAA,EAAsB;MAAA,IAArB64D,WAAW,GAAA1gG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,EAAE;MAC5B,IAAI5I,MAAM,CAACmpG,GAAG,EAAE;QACd,OAAOnpG,MAAM,CAACmpG,GAAG,CAAClpG,eAAe,CAAC,IAAIC,UAAU,CAACopG,WAAW,CAAC,CAAC;MAChE,CAAC,MACI,IAAItpG,MAAM,CAACiwF,IAAI,EAAE;QACpB,MAAM;UAAEx/C;QAAY,CAAC,GAAGzwC,MAAM,CAACiwF,IAAI;QACnC,OAAO,IAAI/vF,UAAU,CAACuwC,WAAW,CAAC64D,WAAW,CAAC,CAACziF,MAAM,CAAC;MACxD,CAAC,MACI;QACH,MAAM,IAAIhM,KAAK,CAAC,mDAAmD,CAAC;MACtE;IACF,CAAC;IACD0uF,gBAAgB,EAAEA,CAAA,KAAM;MACtB,OAAOj1C,KAAK,CAAC7jB,WAAW,CAAC,EAAE,CAAC;IAC9B,CAAC;IACD81D,MAAM,EAAE,eAAAA,CAAA,EAAuB;MAC7B,MAAMtoG,OAAO,GAAG6kG,WAAW,CAAC,GAAAl6F,SAAW,CAAC;MACxC,IAAI5I,MAAM,CAACmpG,GAAG,EAAE;QACd,MAAMtiF,MAAM,GAAG,MAAM7mB,MAAM,CAACmpG,GAAG,CAAC/oG,MAAM,CAACyC,MAAM,CAAC,SAAS,EAAE5E,OAAO,CAAC4oB,MAAM,CAAC;QACxE,OAAO,IAAI3mB,UAAU,CAAC2mB,MAAM,CAAC;MAC/B,CAAC,MACI,IAAI7mB,MAAM,CAACiwF,IAAI,EAAE;QACpB,OAAO/vF,UAAU,CAACc,IAAI,CAAChB,MAAM,CAACiwF,IAAI,CAACuZ,UAAU,CAAC,QAAQ,CAAC,CAACv5D,MAAM,CAAChyC,OAAO,CAAC,CAAC4E,MAAM,CAAC,CAAC,CAAC;MACnF,CAAC,MACI;QACH,MAAM,IAAIgY,KAAK,CAAC,8CAA8C,CAAC;MACjE;IACF,CAAC;IACD4uF,UAAUA,CAAA,EAAqC;MAAA,IAApCrM,UAAU,GAAAx0F,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,CAAC;MAAA,IAAE65F,KAAK,GAAA75F,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG0xF,KAAK,CAACyC,IAAI;MAC3C,MAAM2M,MAAM,GAAGjH,KAAK,CAAC3rF,MAAM,CAACwjF,KAAK,CAACyC,IAAI,CAAC,GAAG0F,KAAK,GAAG,IAAInI,KAAK,CAACmI,KAAK,CAACzrE,CAAC,EAAEyrE,KAAK,CAACtI,CAAC,CAAC;MAC7EuP,MAAM,CAAC3H,cAAc,CAAC3E,UAAU,CAAC;MACjCsM,MAAM,CAAC5L,QAAQ,CAAC1E,GAAG,CAAC;MACpB,OAAOsQ,MAAM;IACf,CAAC;IACDC,UAAU,EAAE7sG;EACd,CAAC;EACDme,MAAM,CAAC2uF,gBAAgB,CAACt1C,KAAK,EAAE;IAC7Bq1C,UAAU,EAAE;MACV/xC,YAAY,EAAE,KAAK;MACnB3uD,GAAGA,CAAA,EAAG;QACJ,OAAOo9F,WAAW;MACpB,CAAC;MACDh4E,GAAGA,CAACgF,GAAG,EAAE;QACP,IAAI,CAACgzE,WAAW,EACdA,WAAW,GAAGhzE,GAAG;MACrB;IACF;EACF,CAAC,CAAC;EAEFwhC,OAAO,CAAC0kC,KAAK,GAAGA,KAAK;EACrB1kC,OAAO,CAACqlC,aAAa,GAAGA,aAAa;EACrCrlC,OAAO,CAACylC,KAAK,GAAGA,KAAK;EACrBzlC,OAAO,CAACqqC,cAAc,GAAGA,cAAc;EACvCrqC,OAAO,CAAC8tC,SAAS,GAAGA,SAAS;EAC7B9tC,OAAO,CAAC2yC,UAAU,GAAGA,UAAU;EAC/B3yC,OAAO,CAAC4xC,YAAY,GAAGA,YAAY;EACnC5xC,OAAO,CAACjmC,eAAe,GAAGA,eAAe;EACzCimC,OAAO,CAACt1D,IAAI,GAAGA,IAAI;EACnBs1D,OAAO,CAAC0yC,IAAI,GAAGA,IAAI;EACnB1yC,OAAO,CAACP,KAAK,GAAGA,KAAK;EACrBO,OAAO,CAACwyC,MAAM,GAAGA,MAAM;EAEvBpsF,MAAM,CAAC02C,cAAc,CAACkD,OAAO,EAAE,YAAY,EAAE;IAAErrD,KAAK,EAAE;EAAK,CAAC,CAAC;AAE/D,CAAE,CAAC;;;;;;;;;;;;;;;;;ACn5BY,MAAMk5B,QAAQ,CAAW;EAOtCp6B,WAAWA,CAAA,EAAG;IAAAq6B,eAAA;IAAAA,eAAA;IAAAA,eAAA;IACZ,IAAI,CAACvd,OAAO,GAAG,IAAI3hB,OAAO,CAAC,CAACu7B,OAAO,EAAE4D,MAAM,KAAK;MAC9C,IAAI,CAACA,MAAM,GAAGA,MAAM;MACpB,IAAI,CAAC5D,OAAO,GAAGA,OAAO;IACxB,CAAC,CAAC;EACJ;EAIA,OAAOpf,QAAQA,CAAIpW,KAAS,EAAsB;IAChD,MAAMu5B,QAAQ,GAAG,IAAIL,QAAQ,CAAW,CAAC;IACzCK,QAAQ,CAAC/D,OAAO,CAACx1B,KAAK,CAAC;IACvB,OAAOu5B,QAAQ;EACjB;AACF;;;;;;;;;;;;;;;;;;;;;ACrByC;AACS;AACX;AAoFvC,MAAM8mE,cAAc,CAA8B;EAKhDvhG,WAAWA,CACF20E,MAA0E,EACzEr4C,QAAsC,EACtCklE,OAAgB,EAChBC,aAAuB,EAE/B;IAAA,IADQC,YAAY,GAAAphG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,GAAG;IAAA,KAJnBq0E,MAA0E,GAA1EA,MAA0E;IAAA,KACzEr4C,QAAsC,GAAtCA,QAAsC;IAAA,KACtCklE,OAAgB,GAAhBA,OAAgB;IAAA,KAChBC,aAAuB,GAAvBA,aAAuB;IAAA,KACvBC,YAAY,GAAZA,YAAY;IAAArnE,eAAA,wBATE,IAAIF,GAAG,CAAwB,CAAC;IAAAE,eAAA,kCAEtB,IAAIF,GAAG,CAAmC,CAAC;EAS7E;;EAEA;EACOwnE,OAAOA,CAAA,EAAG,CACjB;EAEA1hG,IAAIA,CAAA,EAAiB;IAAA,SAAA8hC,IAAA,GAAAzhC,SAAA,CAAA3J,MAAA,EAAb+pC,IAAI,OAAAjoC,KAAA,CAAAspC,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAAJtB,IAAI,CAAAsB,IAAA,IAAA1hC,SAAA,CAAA0hC,IAAA;IAAA;IACV,IAAI,CAAC+tD,WAAW,CAAC;MACf/xF,IAAI,EAAE,MAAM;MACZ0iC;IACF,CAAC,CAAC;EACJ;EAEAtxB,OAAOA,CAACwyF,WAA4B,EAAE;IACpC,MAAM;MAAEC,aAAa;MAAEC;IAAwB,CAAC,GAAG,IAAI;IAEvD,MAAMC,SAAS,GAAG/nE,6DAAgB,CAAC,CAAC;IACpC,MAAM9xB,OAAuB,GAAG;MAC9BlK,IAAI,EAAE,YAAY;MAClB+jG,SAAS;MACT,GAAGH;IACL,CAAC;IAED,MAAMI,YAAY,GAAG;MAAED;IAAU,CAAkB;;IAEnD;IACA,MAAMjlF,OAAqB,GAAG,IAAI3hB,OAAO,CAAC,CAACu7B,OAAO,EAAE4D,MAAM,KAAK;MAC7D3nB,MAAM,CAACyO,MAAM,CAAC4gF,YAAY,EAAE;QAAEtrE,OAAO;QAAE4D;MAAO,CAAC,CAAC;IAClD,CAAC,CAAC;IAEF,IAAI,OAAOpyB,OAAO,CAACw4B,IAAI,CAACx4B,OAAO,CAACw4B,IAAI,CAAC/pC,MAAM,GAAG,CAAC,CAAC,KAAK,UAAU,EAAE;MAC/DuR,OAAO,CAAC+5F,YAAY,GAAG,IAAI;MAE3B,MAAMxiE,QAAQ,GAAGv3B,OAAO,CAACw4B,IAAI,CAAC7gB,GAAG,CAAC,CAAsB;MACxDmiF,YAAY,CAACviE,QAAQ,GAAGA,QAAQ;MAChCqiE,uBAAuB,CAAC/7E,GAAG,CAAC0Z,QAAQ,EAAEuiE,YAAY,CAAC;IACrD;IAEAH,aAAa,CAAC97E,GAAG,CAACg8E,SAAS,EAAEC,YAAY,CAAC;IAC1CllF,OAAO,CACJ7hB,KAAK,CAAC,MAAMzG,SAAS,CAAC,CACtB+mE,OAAO,CAAC,MAAM;MACbsmC,aAAa,CAAClnE,MAAM,CAAConE,SAAS,CAAC;MAE/B,IAAIC,YAAY,CAACviE,QAAQ,EAAE;QACzBqiE,uBAAuB,CAACnnE,MAAM,CAACqnE,YAAY,CAACviE,QAAQ,CAAC;MACvD;IACF,CAAC,CAAC;IAEJ,IAAI,CAACswD,WAAW,CAAC7nF,OAAO,CAAC;IAEzB,OAAO4U,OAAO;EAChB;EAEAolF,cAAcA,CAACC,gBAAqC,EAAE;IACpDA,gBAAgB,CAACC,UAAU,GAAG,IAAI;IAElC,MAAM;MAAEL;IAAU,CAAC,GAAG,IAAI,CAACD,uBAAuB,CAACnhG,GAAG,CAACwhG,gBAAgB,CAAC,IAAI,CAAC,CAAC;IAC9E,IAAI,CAACJ,SAAS,EAAE;MACd;IACF;IAEA,IAAI,CAAChS,WAAW,CAAC;MACf/xF,IAAI,EAAE,gBAAgB;MACtB+jG;IACF,CAAC,CAAC;EACJ;EAEAM,SAASA,CAAC9hG,IAAgC,EAAE;IAC1C,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MAC5B,IAAI;QACFA,IAAI,GAAGknB,IAAI,CAACnmB,KAAK,CAACf,IAAI,EAAEgnB,kDAAa,CAAsB;MAC7D,CAAC,CAAC,OAAO9xB,GAAQ,EAAE;QACjBQ,oDAAa,CAAC,+CAA+C,EAAER,GAAG,CAAC;QACnE;MACF;IACF;IAEA,MAAM;MAAEosG,aAAa;MAAEL;IAAQ,CAAC,GAAG,IAAI;IACvC,IAAIjhG,IAAI,CAACihG,OAAO,KAAKA,OAAO,EAAE;MAC5B;IACF;IAEA,IAAIjhG,IAAI,CAACvC,IAAI,KAAK,QAAQ,IAAI,IAAI,CAACs+B,QAAQ,EAAE;MAC3C,IAAI,CAACA,QAAQ,CAAC/7B,IAAI,CAAConC,MAAM,CAAC;IAC5B;IACA,IAAIpnC,IAAI,CAACvC,IAAI,KAAK,gBAAgB,EAAE;MAClC,MAAMgkG,YAAY,GAAGH,aAAa,CAAClhG,GAAG,CAACJ,IAAI,CAACwhG,SAAS,CAAC;MACtD,IAAIC,YAAY,EAAE;QAChB,IAAIzhG,IAAI,CAACxF,KAAK,EAAE;UACdinG,YAAY,CAAC1nE,MAAM,CAAC/5B,IAAI,CAACxF,KAAK,CAAC;QACjC,CAAC,MAAM;UACLinG,YAAY,CAACtrE,OAAO,CAACn2B,IAAI,CAACk5B,QAAQ,CAAC;QACrC;MACF;IACF,CAAC,MAAM,IAAIl5B,IAAI,CAACvC,IAAI,KAAK,gBAAgB,EAAE;MAAA,IAAAskG,qBAAA;MACzC,MAAMN,YAAY,GAAGH,aAAa,CAAClhG,GAAG,CAACJ,IAAI,CAACwhG,SAAS,CAAC;MACtDC,YAAY,aAAZA,YAAY,gBAAAM,qBAAA,GAAZN,YAAY,CAAEviE,QAAQ,cAAA6iE,qBAAA,uBAAtBA,qBAAA,CAAAn7C,IAAA,CAAA66C,YAAY,EAAa,GAAGzhG,IAAI,CAACgiG,YAAY,CAAC;IAChD,CAAC,MAAM,IAAIhiG,IAAI,CAACvC,IAAI,KAAK,gBAAgB,EAAE;MAAA,IAAAwkG,WAAA;MACzC,MAAM,IAAIjwF,KAAK,EAAAiwF,WAAA,GAACjiG,IAAI,CAACxF,KAAK,cAAAynG,WAAA,uBAAVA,WAAA,CAAY7sG,OAAO,CAAC;IACtC;EACF;EAEQo6F,WAAWA,CAACxvF,IAAgB,EAAE;IACpCA,IAAI,CAACihG,OAAO,GAAG,IAAI,CAACA,OAAO;IAE3B,IAAIhkE,OAA4B,GAAGj9B,IAAI;IACvC,IAAI,IAAI,CAACkhG,aAAa,EAAE;MACtBjkE,OAAO,GAAG/V,IAAI,CAACC,SAAS,CAACnnB,IAAI,CAAC;IAChC;IAEA,IAAI,MAAM,IAAI,IAAI,CAACo0E,MAAM,EAAE;MAAE;MAC3B,IAAI,CAACA,MAAM,CAACob,WAAW,CAACvyD,OAAO,EAAE,IAAI,CAACkkE,YAAY,CAAC;IACrD,CAAC,MAAM;MACL,IAAI,CAAC/sB,MAAM,CAACob,WAAW,CAACvyD,OAAO,CAAC;IAClC;EACF;AACF;AAEO,SAASilE,eAAeA,CAC7BC,MAAoD,EACpDpmE,QAAsC,EACtCklE,OAAgB,EAChBE,YAAqB,EACrB;EACA,MAAMiB,SAAS,GAAG,IAAIpB,cAAc,CAAImB,MAAM,EAAEpmE,QAAQ,EAAEklE,OAAO,EAAEhtG,SAAS,EAAEktG,YAAY,CAAC;EAE3F,SAASkB,aAAaA,CAAAhqF,IAAA,EAA8C;IAAA,IAA7C;MAAErY;IAAwC,CAAC,GAAAqY,IAAA;IAChE+pF,SAAS,CAACN,SAAS,CAAC9hG,IAAI,CAAC;EAC3B;EAEAmiG,MAAM,CAACvT,gBAAgB,CAAC,SAAS,EAAEyT,aAAoB,CAAC,CAAC,CAAC;;EAE1DD,SAAS,CAAChB,OAAO,GAAG,MAAM;IACxBe,MAAM,CAACG,mBAAmB,CAAC,SAAS,EAAED,aAAoB,CAAC;EAC7D,CAAC;EAED,OAAOD,SAAS;AAClB;AAEO,SAASG,wBAAwBA,CACtC/tG,IAAY,EACZunC,QAAsC,EACtCymE,WAAuB,EACvBvB,OAAgB,EAChB;EACA,MAAMmB,SAAS,GAAG,IAAIpB,cAAc,CAACrpD,OAAO,CAAC,CAAC,EAAE5b,QAAQ,EAAEklE,OAAO,EAAE,IAAI,CAAC;EAExE,SAAStpD,OAAOA,CAAA,EAAG;IACjB;IACA,MAAM8qD,IAAI,GAAGjiE,IAAI,CAAC0U,MAAM,CAACwtD,OAAO,CAAC/qD,OAAO,CAAC;MAAEnjD;IAAK,CAAC,CAAC;IAElDiuG,IAAI,CAACX,SAAS,CAACa,WAAW,CAAE3iG,IAAgC,IAAK;MAC/DoiG,SAAS,CAACN,SAAS,CAAC9hG,IAAI,CAAC;IAC3B,CAAC,CAAC;;IAEF;IACAyiG,IAAI,CAACG,YAAY,CAACD,WAAW,CAAC,MAAM;MAClCP,SAAS,CAAChuB,MAAM,GAAGz8B,OAAO,CAAC,CAAC;MAC5ByqD,SAAS,CAAC1iG,IAAI,CAAC8iG,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAG,CAAC,CAAC;IACjC,CAAC,CAAC;IAEF,OAAOC,IAAI;EACb;EAEAL,SAAS,CAAC1iG,IAAI,CAAC8iG,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAG,CAAC,CAAC;EAE/B,OAAOJ,SAAS;AAClB;;;;;;;;;;;;;;;ACxQO,SAASr9F,cAAcA,CAAC3K,SAAiB,EAAmB;EACjE,MAAM,CACJohB,EAAE,EACFqb,UAAU,GAAG,KAAK;EAAE;EACpBnjC,OAAO,GAAG,SAAS,CACpB,GAAG0G,SAAS,CAAClB,KAAK,CAAC,GAAG,CAAC;EACxB,OAAO;IACLsiB,EAAE,EAAEvI,MAAM,CAACuI,EAAE,CAAC;IACdqb,UAAU,EAAEA,UAA8B;IAC1CnjC,OAAO,EAAEA;EACX,CAAC;AACH;AAEO,SAASqiC,cAAcA,CAAC9f,OAAwB,EAAE;EACvD,MAAM;IAAEuF,EAAE;IAAE9nB,OAAO;IAAEmjC;EAAW,CAAC,GAAG5gB,OAAO;EAC3C,OAAQ,GAAEuF,EAAG,IAAGqb,UAAW,IAAGnjC,OAAQ,EAAC;AACzC;;;;;;;;;;;;;;AClBO,SAASinC,YAAYA,CAAgBkoE,MAAS,EAAEC,MAAS,EAAW;EACzE,MAAMC,KAAK,GAAG,OAAOF,MAAM;EAC3B,MAAMG,KAAK,GAAG,OAAOF,MAAM;EAC3B,IAAIC,KAAK,KAAKC,KAAK,EAAE;IACnB,OAAO,KAAK;EACd;;EAEA;EACA,IAAID,KAAK,KAAK,QAAQ,IAAIF,MAAM,KAAK,IAAI,IAAIC,MAAM,KAAK,IAAI,EAAE;IAC5D,OAAOD,MAAM,KAAKC,MAAM;EAC1B;EAEA,MAAMG,QAAQ,GAAG/qG,KAAK,CAAC2uD,OAAO,CAACg8C,MAAM,CAAC;EACtC,MAAMK,QAAQ,GAAGhrG,KAAK,CAAC2uD,OAAO,CAACi8C,MAAM,CAAC;EAEtC,IAAIG,QAAQ,KAAKC,QAAQ,EAAE;IACzB,OAAO,KAAK;EACd;EAEA,IAAID,QAAQ,EAAE;IACZ,MAAME,MAAM,GAAGN,MAAe;IAC9B,MAAMO,MAAM,GAAGN,MAAe;IAE9B,IAAIK,MAAM,CAAC/sG,MAAM,KAAKgtG,MAAM,CAAChtG,MAAM,EAAE;MACnC,OAAO,KAAK;IACd;IAEA,OAAO+sG,MAAM,CAACzwD,KAAK,CAAC,CAAC2wD,OAAO,EAAEjjF,CAAC,KAAKua,YAAY,CAAC0oE,OAAO,EAAED,MAAM,CAAChjF,CAAC,CAAC,CAAC,CAAC;EACvE;EAEA,MAAMkjF,OAAO,GAAGT,MAAoB;EACpC,MAAMU,OAAO,GAAGT,MAAoB;EACpC,MAAMU,KAAK,GAAGpxF,MAAM,CAACikB,IAAI,CAACitE,OAAO,CAAC;EAElC,OAAOE,KAAK,CAAC9wD,KAAK,CAAE+wD,IAAI,IAAK9oE,YAAY,CAAC2oE,OAAO,CAACG,IAAI,CAAC,EAAEF,OAAO,CAACE,IAAI,CAAC,CAAC,CAAC;AAC1E;;;;;;;;;;;;;;ACnCO,SAASh1F,MAAMA,CAACynF,SAAkB,EAAE9gG,OAAgB,EAAE;EAC3D,IAAI,CAAC8gG,SAAS,EAAE;IACd,MAAM,IAAIlkF,KAAK,CAAC5c,OAAO,IAAI,kBAAkB,CAAC;EAChD;AACF;;;;;;;;;;;;;;;;;;;;;;ACJoC;AACK;AACF;AAEhC,MAAMsuG,aAAa,GAAG,SAAS;AAE/B,SAAS18E,aAAaA,CAAYrvB,GAAW,EAAEgJ,KAAU,EAAE;EAChE,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,CAAC+9B,UAAU,CAACglE,aAAa,CAAC,EAAE;IAChE,OAAOvyF,MAAM,CAACxQ,KAAK,CAAC/H,KAAK,CAAC,CAAC,CAAC,CAAC;EAC/B;EACA,OAAO+H,KAAK;AACd;AAEO,SAASgjG,SAASA,CAAChjG,KAAa,EAAE;EACvC,OAAOA,KAAK,KAAK,CAAC,EAAE,IAAIA,KAAK,GAAG,EAAE,GAAG,CAACA,KAAK,GAAGA,KAAK;AACrD;AAEO,SAASsJ,oBAAoBA,CAACtJ,KAAa,EAAE0wD,GAAW,EAAE;EAC/D,OAAQ1wD,KAAK,GAAGoJ,4CAAO,GAAII,sDAAW,CAACknD,GAAG,CAAC;AAC7C;AAEO,SAASnnD,sBAAsBA,CAACvJ,KAAa,EAAE0wD,GAAW,EAAE;EACjE,OAAQ1wD,KAAK,GAAGwJ,sDAAW,CAACknD,GAAG,CAAC,GAAItnD,4CAAO;AAC7C;AAEO,SAASgd,YAAYA,CAACle,KAAa,EAAE;EAC1C,IAAIlI,KAAK,GAAGwQ,MAAM,CAAC,CAAC,CAAC;EACrB,KAAK,MAAMyyF,YAAY,IAAIh8D,oDAAW,CAAC/+B,KAAK,CAAC,EAAE;IAC7C,MAAMg7F,YAAY,GAAG1yF,MAAM,CAACyyF,YAAY,CAAC;IACzC;IACAjjG,KAAK,GAAG,CAACA,KAAK,IAAIwQ,MAAM,CAAC,CAAC,CAAC,IAAI0yF,YAAY;EAC7C;EACA,OAAOljG,KAAK;AACd;AAEO,SAASmjG,eAAeA,CAACnjG,KAAa,EAAE;EAC7C,MAAMojG,YAAY,GAAGpjG,KAAK,CAAChI,QAAQ,CAAC,CAAC,CAAC;EACtC,OAAOorG,YAAY,CAAC3tG,MAAM;AAC5B;;;;;;;;;;;;ACtCyC;;AAEzC;AACA;AACA;AACA+a,MAAM,CAACw1C,SAAS,CAACq9C,MAAM,GAAG,SAASA,MAAMA,CAAA,EAAG;EAC1C,OAAQ,GAAEN,kDAAc,GAAE,IAAK,EAAC;AAClC,CAAC;;;;;;;;;;;;;;;;;;ACPM,SAAS5kE,qBAAqBA,CAAA,EAAoD;EACvF,MAAM0+B,SAAS,GAAG,IAAI5jD,GAAG,CAAI,CAAC;EAE9B,SAASqlB,WAAWA,CAACg+B,EAAK,EAAE;IAC1BO,SAAS,CAAC1jD,GAAG,CAACmjD,EAAE,CAAC;IAEjB,OAAO,MAAM;MACX99B,cAAc,CAAC89B,EAAE,CAAC;IACpB,CAAC;EACH;EAEA,SAAS99B,cAAcA,CAAC89B,EAAK,EAAE;IAC7BO,SAAS,CAACpjC,MAAM,CAAC6iC,EAAE,CAAC;EACtB;EAEA,SAASjwB,YAAYA,CAAA,EAAyB;IAAA,SAAAxL,IAAA,GAAAzhC,SAAA,CAAA3J,MAAA,EAArB+pC,IAAI,OAAAjoC,KAAA,CAAAspC,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAAJtB,IAAI,CAAAsB,IAAA,IAAA1hC,SAAA,CAAA0hC,IAAA;IAAA;IAC3B+7B,SAAS,CAAC3hD,OAAO,CAAEqjB,QAAQ,IAAK;MAC9BA,QAAQ,CAAC,GAAGiB,IAAI,CAAC;IACnB,CAAC,CAAC;EACJ;EAEA,SAAS8jE,YAAYA,CAAA,EAAG;IACtB,OAAO1oG,OAAO,CAACiiE,SAAS,CAACvjD,IAAI,CAAC;EAChC;EAEA,OAAO;IACL+yB,YAAY;IACZ/N,WAAW;IACXE,cAAc;IACd8kE;EACF,CAAC;AACH;AAKO,MAAMC,YAAY,CAAC;EAAAzkG,YAAA;IAAAq6B,eAAA,mBACL,IAAIF,GAAG,CAA0B,CAAC;EAAA;EAErD67C,EAAEA,CAACjhF,IAAY,EAAEsmE,OAA0B,EAAE;IAC3C,IAAI,CAACqpC,cAAc,CAAC3vG,IAAI,CAAC,CAACyqC,WAAW,CAAC67B,OAAO,CAAC;IAC9C,OAAO,IAAI;EACb;EAEAspC,cAAcA,CAAC5vG,IAAY,EAAEsmE,OAA0B,EAAE;IACvD,IAAI,CAACqpC,cAAc,CAAC3vG,IAAI,CAAC,CAAC2qC,cAAc,CAAC27B,OAAO,CAAC;IACjD,OAAO,IAAI;EACb;EAEAupC,IAAIA,CAAC7vG,IAAY,EAAgB;IAAA,SAAA8vG,KAAA,GAAAvkG,SAAA,CAAA3J,MAAA,EAAX+pC,IAAI,OAAAjoC,KAAA,CAAAosG,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAJpkE,IAAI,CAAAokE,KAAA,QAAAxkG,SAAA,CAAAwkG,KAAA;IAAA;IACxB,IAAI,CAACJ,cAAc,CAAC3vG,IAAI,CAAC,CAACw4C,YAAY,CAAC,GAAG7M,IAAI,CAAC;IAC/C,OAAO,IAAI;EACb;EAEQgkE,cAAcA,CAAC3vG,IAAY,EAAE;IACnC,IAAIysG,OAAO,GAAG,IAAI,CAACuD,QAAQ,CAACpkG,GAAG,CAAC5L,IAAI,CAAC;IACrC,IAAI,CAACysG,OAAO,EAAE;MACZA,OAAO,GAAGniE,qBAAqB,CAAC,CAAC;MACjC,IAAI,CAAC0lE,QAAQ,CAACh/E,GAAG,CAAChxB,IAAI,EAAEysG,OAAO,CAAC;IAClC;IAEA,OAAOA,OAAO;EAChB;AACF;;;;;;;;;;;;;;;;;;AC5DuD;AACf;AAEkB;AAE1D,IAAImB,SAAoB;AAEjB,SAASl8D,mBAAmBA,CAAA,EAAG;EACpC,IAAI,CAACk8D,SAAS,EAAE;IACd;IACAA,SAAS,GAAGF,sEAAe,CAAC1hE,IAAI,EAAgCvsC,SAAS,EAAEkxD,4DAAuB,CAAC;IACnGi9C,SAAS,CAAC1iG,IAAI,CAAC,CAAC;EAClB;AACF;AAEO,eAAeu1C,UAAUA,CAAgCwvD,UAAa,EAAgC;EAC3G,IAAI,CAACrC,SAAS,EAAE;IACd1sG,oDAAa,CAAC,wBAAwB,CAAC;IACvC,OAAOzB,SAAS;EAClB;EAAC,SAAAutC,IAAA,GAAAzhC,SAAA,CAAA3J,MAAA,EAJ+E+pC,IAAI,OAAAjoC,KAAA,CAAAspC,IAAA,OAAAA,IAAA,WAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;IAAJtB,IAAI,CAAAsB,IAAA,QAAA1hC,SAAA,CAAA0hC,IAAA;EAAA;EAMpF,OAAQ2gE,SAAS,CAACvzF,OAAO,CAAC;IACxBra,IAAI,EAAEiwG,UAAU;IAChBtkE;EACF,CAAC,CAAC;AACJ;;;;;;;;;;;;;;AC1BO,SAAS3sB,iBAAiBA,CAAC2R,CAAc,EAAEzsB,CAAc,EAAiB;EAAA,IAAfgsG,KAAK,GAAA3kG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,KAAK;EAC7E,IAAIY,KAAK,GAAGwkB,CAAC,CAAChf,SAAS,GAAGzN,CAAC,CAACyN,SAAS;EACrC,IAAIxF,KAAK,KAAK,CAAC,EAAE;IACfA,KAAK,GAAGwkB,CAAC,CAAC3J,EAAE,GAAG9iB,CAAC,CAAC8iB,EAAE,GAAG,CAAC,GAAG2J,CAAC,CAAC3J,EAAE,GAAG9iB,CAAC,CAAC8iB,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC;EAChD;EACA,OAAOkpF,KAAK,GAAG/jG,KAAK,GAAG,CAACA,KAAK;AAC/B;;;;;;;;;;;;;;ACRA,MAAMgkG,UAAU,GAAG;EACjB9xG,GAAG,EAAE,6CAA6C;EAClD,MAAM,EAAE,gDAAgD;EACxDmuF,GAAG,EAAE,wEAAwE;EAC7E4jB,IAAI,EAAE;AACR,CAAC;AAED,SAAS/wG,WAAWA,CAAC8M,KAAa,EAAE;EAClC,OAAOyR,MAAM,CAACC,MAAM,CAACsyF,UAAU,CAAC,CAAClpE,IAAI,CAAE5I,IAAI,IAAKA,IAAI,CAACnb,IAAI,CAAC/W,KAAK,CAAC,CAAC;AACnE;AAEA,SAAShM,cAAcA,CAACgM,KAAa,EAAE;EACrC,OAAOgkG,UAAU,CAAC3jB,GAAG,CAACtpE,IAAI,CAAC/W,KAAK,CAAC;AACnC;AAEA,SAAS9L,eAAeA,CAAC8L,KAAa,EAAE;EACtC,OAAOgkG,UAAU,CAACC,IAAI,CAACltF,IAAI,CAAC/W,KAAK,CAAC;AACpC;AAEA,SAAS/L,aAAaA,CAAC+L,KAAa,EAAE;EAAA,IAAAkkG,YAAA;EACpClkG,KAAK,GAAGA,KAAK,CAAC0mB,OAAO,CAAC,cAAc,EAAE,MAAM,CAAC,CAACA,OAAO,CAAC,cAAc,EAAE,MAAM,CAAC;EAC7E,QAAAw9E,YAAA,GAAOlkG,KAAK,CAACxH,KAAK,CAACwrG,UAAU,CAAC3jB,GAAG,CAAC,cAAA6jB,YAAA,gBAAAA,YAAA,GAA3BA,YAAA,CAA6B/3F,MAAM,cAAA+3F,YAAA,uBAAnCA,YAAA,CAAqCpwG,IAAI;AAClD;AAEA,SAASK,cAAcA,CAAC6L,KAAa,EAAE;EAAA,IAAAmkG,aAAA;EACrC,QAAAA,aAAA,GAAOnkG,KAAK,CAACxH,KAAK,CAACwrG,UAAU,CAACC,IAAI,CAAC,cAAAE,aAAA,gBAAAA,aAAA,GAA5BA,aAAA,CAA8Bh4F,MAAM,cAAAg4F,aAAA,uBAApCA,aAAA,CAAsCrwG,IAAI;AACnD;AAEA,SAASM,aAAaA,CAAC4L,KAAa,EAAE;EACpC,OAAOA,KAAK,CAAC0mB,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;AACrC;AAEA,iEAAe;EACbxzB,WAAW;EACXc,cAAc;EACdE,eAAe;EACfD,aAAa;EACbE,cAAc;EACdC;AACF,CAAC;;;;;;;;;;;;;;;;;;;;;ACvCiF;AACnC;AACb;AACG;AAIrC,MAAMgwG,WAAW,GAAG,KAAK,CAAC,CAAC;;AAEpB,eAAetmF,SAASA,CAAC4P,GAAiB,EAAEruB,IAAkB,EAAEN,IAAkB,EAAE;EACzF,MAAMslG,SAAS,GAAG,IAAI3rE,GAAG,CAAChL,GAAG,CAAC;EAC9B,IAAIruB,IAAI,EAAE;IACRoS,MAAM,CAACwI,OAAO,CAAC5a,IAAI,CAAC,CAAC6b,OAAO,CAACxD,IAAA,IAAkB;MAAA,IAAjB,CAAC1gB,GAAG,EAAEgJ,KAAK,CAAC,GAAA0X,IAAA;MACxC,IAAI1X,KAAK,KAAK1M,SAAS,EAAE;QACvB;MACF;MAEA,IAAIiE,KAAK,CAAC2uD,OAAO,CAAClmD,KAAK,CAAC,EAAE;QACxBA,KAAK,CAACkb,OAAO,CAAE+0B,IAAI,IAAK;UACtBo0D,SAAS,CAAC9nD,YAAY,CAAC+nD,MAAM,CAACttG,GAAG,EAAEi5C,IAAI,CAACj4C,QAAQ,CAAC,CAAC,CAAC;QACrD,CAAC,CAAC;MACJ,CAAC,MAAM;QACLqsG,SAAS,CAAC9nD,YAAY,CAAC13B,GAAG,CAAC7tB,GAAG,EAAEgJ,KAAK,CAAChI,QAAQ,CAAC,CAAC,CAAC;MACnD;IACF,CAAC,CAAC;EACJ;EAEA,MAAMugC,QAAQ,GAAG,MAAM9F,cAAc,CAAC4xE,SAAS,EAAEtlG,IAAI,CAAC;EAEtD,OAAOw5B,QAAQ,CAACE,IAAI,CAAC,CAAC;AACxB;AAEO,eAAehG,cAAcA,CAAC/E,GAAiB,EAAE3uB,IAAkB,EAAE0H,OAI3E,EAAE;EACD,MAAM;IACJ89F,OAAO,GAAGv/C,oDAAe;IACzBw/C,QAAQ,GAAG11E,oDAAe;IAC1B21E,iBAAiB,GAAGC;EACtB,CAAC,GAAGj+F,OAAO,aAAPA,OAAO,cAAPA,OAAO,GAAI,CAAC,CAAC;EAEjB,IAAIhS,OAAO,GAAG,gBAAgB;EAC9B,IAAImjB,UAA8B;EAElC,KAAK,IAAI6H,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI8kF,OAAO,EAAE9kF,CAAC,EAAE,EAAE;IACjC,IAAI;MAAA,IAAAklF,SAAA;MACF,IAAIllF,CAAC,GAAG,CAAC,EAAE;QACTo8B,+CAAQ,CAAE,kBAAiBp8B,CAAE,GAAE,EAAEiO,GAAG,CAAC11B,QAAQ,CAAC,CAAC,EAAE4f,UAAU,CAAC;MAC9D;MAEA,MAAMa,OAAO,GAAGlhB,KAAK,CAAC2uD,OAAO,CAACs+C,QAAQ,CAAC,IAAAG,SAAA,GACnCH,QAAQ,CAAC/kF,CAAC,GAAG,CAAC,CAAC,cAAAklF,SAAA,cAAAA,SAAA,GAAIH,QAAQ,CAACA,QAAQ,CAAC/uG,MAAM,GAAG,CAAC,CAAC,GAChD2S,IAAI,CAACqpB,GAAG,CAAC+yE,QAAQ,GAAG/kF,CAAC,EAAE2kF,WAAW,CAAC;MACvC,MAAM7rE,QAAQ,GAAG,MAAMqsE,gBAAgB,CAACl3E,GAAG,EAAE3uB,IAAI,EAAE0Z,OAAO,CAAC;MAC3Db,UAAU,GAAG2gB,QAAQ,CAACxiB,MAAM;MAE5B,IAAI6B,UAAU,IAAI,GAAG,EAAE;QACrB,MAAM;UAAE/d;QAAM,CAAC,GAAG,MAAM0+B,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC1+B,KAAK,CAAC,MAAMzG,SAAS,CAAC;QAC9D,MAAM,IAAI+d,KAAK,CAACxX,KAAK,aAALA,KAAK,cAALA,KAAK,GAAK,cAAa+d,UAAW,EAAC,CAAC;MACtD;MAEA,OAAO2gB,QAAQ;IACjB,CAAC,CAAC,OAAOhkC,GAAQ,EAAE;MAAA,IAAAC,YAAA;MACjBC,OAAO,GAAG,OAAOF,GAAG,KAAK,QAAQ,GAAGA,GAAG,IAAAC,YAAA,GAAGD,GAAG,CAACE,OAAO,cAAAD,YAAA,cAAAA,YAAA,GAAIC,OAAO;MAEhE,MAAMowG,eAAe,GAAGJ,iBAAiB,CAAChwG,OAAO,EAAEmjB,UAAU,CAAC;MAE9D,IAAIitF,eAAe,EAAE;QACnB,MAAM,IAAI3wF,uDAAc,CAACzf,OAAO,EAAEmjB,UAAU,CAAC;MAC/C;MAEA,IAAI6H,CAAC,GAAG8kF,OAAO,EAAE;QACf,MAAMvxF,kDAAK,CAACiyC,wDAAmB,GAAGxlC,CAAC,CAAC;MACtC;IACF;EACF;EAEA,MAAM,IAAIvL,uDAAc,CAACzf,OAAO,CAAC;AACnC;AAEO,eAAemwG,gBAAgBA,CAACl3E,GAAiB,EAAE3uB,IAAkB,EAA6B;EAAA,IAA3B0Z,OAAO,GAAArZ,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG0vB,oDAAe;EACrG,MAAMg2E,UAAU,GAAG,IAAIC,eAAe,CAAC,CAAC;EACxC,MAAMlqF,EAAE,GAAGq0C,UAAU,CAAC,MAAM;IAC1B41C,UAAU,CAACjvB,KAAK,CAAC,CAAC;EACpB,CAAC,EAAEp9D,OAAO,CAAC;EAEX,IAAI;IACF,OAAO,MAAM+f,KAAK,CAAC9K,GAAG,EAAE;MACtB,GAAG3uB,IAAI;MACPimG,MAAM,EAAEF,UAAU,CAACE,MAAM;MACzBr6D,KAAK,EAAE,UAAU,CAAE;IACrB,CAAC,CAAC;EACJ,CAAC,SAAS;IACRkwB,YAAY,CAAChgD,EAAE,CAAC;EAClB;AACF;AAEO,eAAeqd,iBAAiBA,CAACK,QAAkB,EAAE0sE,eAA0B,EAAE;EACtF,IAAI,CAAC1sE,QAAQ,CAAC2sE,EAAE,IAAK,EAACD,eAAe,aAAfA,eAAe,eAAfA,eAAe,CAAEvwG,QAAQ,CAAC6jC,QAAQ,CAACxiB,MAAM,CAAC,CAAC,EAAE;IAAA,IAAAovF,MAAA;IACjE;IACA,IAAI;MAAEtrG,KAAK;MAAE28C;IAAO,CAAC,GAAG,MAAMje,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC1+B,KAAK,CAAC,MAAMzG,SAAS,CAAC;IACpE,IAAI,CAACuG,KAAK,IAAI28C,MAAM,IAAIA,MAAM,CAAC/gD,MAAM,EAAE;MAAA,IAAA2vG,QAAA;MACrCvrG,KAAK,IAAAurG,QAAA,GAAG5uD,MAAM,CAAC,CAAC,CAAC,cAAA4uD,QAAA,uBAATA,QAAA,CAAW5lF,GAAG;IACxB;IAEA,MAAM,IAAItL,uDAAc,EAAAixF,MAAA,GAACtrG,KAAK,cAAAsrG,MAAA,cAAAA,MAAA,GAAK,cAAa5sE,QAAQ,CAACxiB,MAAO,EAAC,EAAEwiB,QAAQ,CAACxiB,MAAM,CAAC;EACrF;EACA,OAAOwiB,QAAQ;AACjB;AAEA,SAASmsE,mBAAmBA,CAACjwG,OAAgB,EAAEmjB,UAAmB,EAAE;EAClE,OAAOA,UAAU,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAACljB,QAAQ,CAACkjB,UAAU,CAAC;AACtD;;;;;;;;;;;;;;AClHe,SAASkhB,gBAAgBA,CAAA,EAAG;EACzC,OAAO/tB,IAAI,CAACC,GAAG,CAAC,CAAC,CAAChT,QAAQ,CAAC,EAAE,CAAC,GAAGoQ,IAAI,CAAC2mF,MAAM,CAAC,CAAC,CAAC/2F,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC;AACtE;;;;;;;;;;;;;;;;ACFqD;AACb;AAExC,MAAMqtG,IAAI,GAAGA,CAAA,KAAM,CACnB,CAAC;AAED,MAAMC,cAAc,GAAG,OAAOl4C,MAAM,KAAK,WAAW,GAAGg4C,qDAAQ,CAACh4C,MAAM,CAACm4C,KAAK,EAAE,IAAI,CAAC,GAAGF,IAAI;;AAE1F;AACAzlE,IAAI,CAACouD,gBAAgB,CAAC,OAAO,EAAEwX,gBAAgB,CAAC;AAChD;AACA5lE,IAAI,CAACouD,gBAAgB,CAAC,oBAAoB,EAAEwX,gBAAgB,CAAC;AAE7D,SAASA,gBAAgBA,CAACntD,CAAqC,EAAE;EAC/D;EACA,IAAIA,CAAC,YAAYotD,UAAU,IAAIptD,CAAC,CAAC7jD,OAAO,KAAK,oCAAoC,EAAE;IACjF;EACF;EAEA6jD,CAAC,CAACk7B,cAAc,CAAC,CAAC;EAElBmyB,WAAW,CAACrtD,CAAC,YAAYotD,UAAU,GAAIptD,CAAC,CAACz+C,KAAK,IAAIy+C,CAAC,CAAC7jD,OAAO,GAAI6jD,CAAC,CAAC3e,MAAM,CAAC;AAC1E;AAEO,SAASgsE,WAAWA,CAACpxG,GAAmB,EAAE;EAC/C;EACAqF,OAAO,CAACC,KAAK,CAACtF,GAAG,CAAC;EAElB,MAAME,OAAO,GAAG,OAAOF,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAGA,GAAG,CAACE,OAAO;EAC3D,MAAMkL,KAAK,GAAG,OAAOpL,GAAG,KAAK,QAAQ,GAAGA,GAAG,CAACoL,KAAK,GAAGrM,SAAS;EAE7D,IAAImB,OAAO,CAACmqC,QAAQ,CAAC,kCAAkC,CAAC,EAAE;IACxD;EACF;EAEA,IAAIyP,4CAAO,KAAK,aAAa,IAAIA,4CAAO,KAAK,SAAS,EAAE;IACtDk3D,cAAc,CAAE,GAAE1lD,oDAAgB,OAAOprD,OAAO,IAAKF,GAAI,KAAIoL,KAAM,EAAC,CAAC;EACvE;AACF;;;;;;;;;;;;;;;ACtCmD;AAEpC,SAAS7K,oBAAoBA,CAACc,QAAkB,EAAE;EAC/D,OAAOA,QAAQ,CAACH,MAAM,KAAK,CAAC,IAAIG,QAAQ,CAAC,CAAC,CAAC,CAACH,MAAM,KAAKyqD,2DAAsB;AAC/E;;;;;;;;;;;;;;;;;;;;;;;ACOO,SAASptC,oBAAoBA,CAAuB/e,UAAe,EAAEiD,GAAY,EAAsB;EAC5G,OAAOjD,UAAU,CAACisB,MAAM,CAAC,CAAC4lF,KAAyB,EAAEC,MAAS,KAAK;IACjED,KAAK,CAACC,MAAM,CAAC7uG,GAAG,CAAC,CAAC,GAAG6uG,MAAM;IAE3B,OAAOD,KAAK;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;AACR;AAEO,SAASE,OAAOA,CAAuB/xG,UAAe,EAAEiD,GAAY,EAAmB;EAC5F,OAAOjD,UAAU,CAACisB,MAAM,CAAC,CAAC4lF,KAAsB,EAAEC,MAAS,KAAK;IAC9D,MAAME,QAAQ,GAAGF,MAAM,CAAC7uG,GAAG,CAAC;IAE5B,IAAI,CAAC4uG,KAAK,CAACG,QAAQ,CAAC,EAAE;MACpBH,KAAK,CAACG,QAAQ,CAAC,GAAG,CAACF,MAAM,CAAC;IAC5B,CAAC,MAAM;MACLD,KAAK,CAACG,QAAQ,CAAC,CAAEv/F,IAAI,CAACq/F,MAAM,CAAC;IAC/B;IAEA,OAAOD,KAAK;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;AACR;AAEO,SAASI,SAASA,CACvBJ,KAAyB,EACzBrnE,QAAyF,EACrE;EACpB,OAAO9sB,MAAM,CAACikB,IAAI,CAACkwE,KAAK,CAAC,CAAC5lF,MAAM,CAAC,CAACimF,QAA4B,EAAEjvG,GAAG,EAAEmQ,KAAK,KAAK;IAC7E8+F,QAAQ,CAACjvG,GAAG,CAAC,GAAGunC,QAAQ,CAACqnE,KAAK,CAAC5uG,GAAG,CAAC,EAAEA,GAAG,EAAEmQ,KAAK,EAAEy+F,KAAK,CAAC;IACvD,OAAOK,QAAQ;EACjB,CAAC,EAAE,CAAC,CAAC,CAAC;AACR;AAEO,SAASh/E,IAAIA,CAAuBi/E,MAAS,EAAExwE,IAAS,EAAE;EAC/D,OAAOA,IAAI,CAAC1V,MAAM,CAAC,CAAC3rB,MAAM,EAAE2C,GAAG,KAAK;IAClC3C,MAAM,CAAC2C,GAAG,CAAC,GAAGkvG,MAAM,CAAClvG,GAAG,CAAC;IACzB,OAAO3C,MAAM;EACf,CAAC,EAAE,CAAC,CAAe,CAAC;AACtB;AAEO,SAAS8xG,UAAUA,CAAuBD,MAAS,EAAExwE,IAAS,EAAE;EACrE,OAAOA,IAAI,CAAC1V,MAAM,CAAC,CAAC3rB,MAAM,EAAE2C,GAAG,KAAK;IAClC,IAAIkvG,MAAM,CAAClvG,GAAG,CAAC,EAAE;MACf3C,MAAM,CAAC2C,GAAG,CAAC,GAAGkvG,MAAM,CAAClvG,GAAG,CAAC;IAC3B;IAEA,OAAO3C,MAAM;EACf,CAAC,EAAE,CAAC,CAAe,CAAC;AACtB;AAEO,SAAS0e,IAAIA,CAAsCmzF,MAAS,EAAExwE,IAAS,EAAc;EAC1F,MAAM0wE,UAAU,GAAG,IAAIntF,GAAG,CAACyc,IAAI,CAAC59B,GAAG,CAACH,MAAM,CAAC,CAAC;EAC5C,MAAM0uG,SAAS,GAAG50F,MAAM,CAACikB,IAAI,CAACwwE,MAAM,CAAC,CAClC/1F,MAAM,CAAEnZ,GAAG,IAAK,CAACovG,UAAU,CAACr4E,GAAG,CAAC/2B,GAAG,CAAC,CAA+B;EAEtE,OAAOiwB,IAAI,CAACi/E,MAAM,EAAEG,SAAS,CAAC;AAChC;AAEO,SAAStoF,aAAaA,CAAmBmoF,MAAS,EAAK;EAC5D,OAAOz0F,MAAM,CAACikB,IAAI,CAACwwE,MAAM,CAAC,CAAClmF,MAAM,CAAC,CAAC3rB,MAAM,EAAEiyG,SAAS,KAAK;IACvD,MAAMtvG,GAAG,GAAGsvG,SAAoB;IAChC,IAAIJ,MAAM,CAAClvG,GAAG,CAAC,KAAK1D,SAAS,EAAE;MAC7Be,MAAM,CAAC2C,GAAG,CAAY,GAAGkvG,MAAM,CAAClvG,GAAG,CAAC;IACtC;IACA,OAAO3C,MAAM;EACf,CAAC,EAAE,CAAC,CAAM,CAAC;AACb;AAEO,SAAS+wE,OAAOA,CACrBrxE,UAAe,EACfwyG,SAA0E,EAErE;EAAA,IADLt7F,IAAuD,GAAA7L,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,KAAK;EAE/D,SAASonG,aAAaA,CAAChiF,CAAI,EAAEzsB,CAAI,EAAE0uG,gBAA8C,EAAE1C,KAAc,EAAE;IACjG,MAAM2C,MAAM,GAAG,CAAC,OAAOD,gBAAgB,KAAK,UAAU,GAAGA,gBAAgB,CAACjiF,CAAC,CAAC,GAAGA,CAAC,CAACiiF,gBAAgB,CAAC,KAAK,CAAC;IACxG,MAAME,MAAM,GAAG,CAAC,OAAOF,gBAAgB,KAAK,UAAU,GAAGA,gBAAgB,CAAC1uG,CAAC,CAAC,GAAGA,CAAC,CAAC0uG,gBAAgB,CAAC,KAAK,CAAC;IAExG,IAAIC,MAAM,KAAKC,MAAM,EAAE,OAAO,CAAC;IAE/B,MAAMpR,SAAS,GAAGwO,KAAK,GAAG2C,MAAM,GAAGC,MAAM,GAAGD,MAAM,GAAGC,MAAM;IAC3D,OAAOpR,SAAS,GAAG,CAAC,GAAG,CAAC,CAAC;EAC3B;EAEA,IAAIh+F,KAAK,CAAC2uD,OAAO,CAACqgD,SAAS,CAAC,EAAE;IAC5B,MAAM,CAACK,KAAK,EAAEC,KAAK,CAAC,GAAGtvG,KAAK,CAAC2uD,OAAO,CAACj7C,IAAI,CAAC,GAAGA,IAAI,GAAG,CAACA,IAAI,EAAEA,IAAI,CAAC;IAChE,MAAM,CAAC67F,UAAU,EAAEC,UAAU,CAAC,GAAGR,SAAS;IAC1C,MAAMS,MAAM,GAAGJ,KAAK,KAAK,KAAK;IAC9B,MAAMK,MAAM,GAAGJ,KAAK,KAAK,KAAK;IAE9B,OAAO9yG,UAAU,CAACumB,IAAI,CAAC,CAACkK,CAAC,EAAEzsB,CAAC,KAAK;MAC/B,OAAOyuG,aAAa,CAAChiF,CAAC,EAAEzsB,CAAC,EAAE+uG,UAAU,EAAEE,MAAM,CAAC,IAAIR,aAAa,CAAChiF,CAAC,EAAEzsB,CAAC,EAAEgvG,UAAU,EAAEE,MAAM,CAAC;IAC3F,CAAC,CAAC;EACJ;EAEA,MAAMlD,KAAK,GAAG94F,IAAI,KAAK,KAAK;EAC5B,OAAOlX,UAAU,CAACumB,IAAI,CAAC,CAACkK,CAAC,EAAEzsB,CAAC,KAAK;IAC/B,OAAOyuG,aAAa,CAAChiF,CAAC,EAAEzsB,CAAC,EAAEwuG,SAAS,EAAExC,KAAK,CAAC;EAC9C,CAAC,CAAC;AACJ;AAEO,SAAS16B,MAAMA,CAAgBja,KAAU,EAAO;EACrD,OAAO73D,KAAK,CAACC,IAAI,CAAC,IAAIyhB,GAAG,CAACm2C,KAAK,CAAC,CAAC;AACnC;AAEO,SAAS/qD,OAAOA,CAAgB+qD,KAAU,EAAE;EACjD,OAAOA,KAAK,CAACj/C,MAAM,CAACvV,OAAO,CAAC;AAC9B;AAEO,SAASssG,oBAAoBA,CAAC1E,MAAa,EAAEC,MAAa,EAAE;EACjE,IAAID,MAAM,CAAC/sG,MAAM,KAAKgtG,MAAM,CAAChtG,MAAM,EAAE;IACnC,OAAO,KAAK;EACd;EAEA,OAAO+sG,MAAM,CAACzwD,KAAK,CAAC,CAAC9B,IAAI,EAAExwB,CAAC,KAAKwwB,IAAI,KAAKwyD,MAAM,CAAChjF,CAAC,CAAC,CAAC;AACtD;AAEO,SAASlnB,KAAKA,CAAgB62D,KAAU,EAAE+3C,SAAiB,EAAE;EAClE,MAAM9yG,MAAa,GAAG,EAAE;EACxB,KAAK,IAAIorB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG2vC,KAAK,CAAC35D,MAAM,EAAEgqB,CAAC,IAAI0nF,SAAS,EAAE;IAChD9yG,MAAM,CAACmS,IAAI,CAAC4oD,KAAK,CAACn3D,KAAK,CAACwnB,CAAC,EAAEA,CAAC,GAAG0nF,SAAS,CAAC,CAAC;EAC5C;EAEA,OAAO9yG,MAAM;AACf;AAEO,SAASiyB,SAASA,CAAItmB,KAAQ,EAAK;EACxC,IAAI,CAAConG,QAAQ,CAACpnG,KAAK,CAAC,EAAE;IACpB,OAAOA,KAAK;EACd;EAEA,IAAIzI,KAAK,CAAC2uD,OAAO,CAAClmD,KAAK,CAAC,EAAE;IACxB,OAAOA,KAAK,CAAClI,GAAG,CAACwuB,SAAS,CAAC;EAC7B;EAEA,OAAO7U,MAAM,CAACikB,IAAI,CAAC11B,KAAK,CAAC,CAACggB,MAAM,CAAC,CAACC,GAAG,EAAEjpB,GAAG,KAAK;IAC7CipB,GAAG,CAACjpB,GAAG,CAAY,GAAGsvB,SAAS,CAACtmB,KAAK,CAAChJ,GAAG,CAAY,CAAC;IACtD,OAAOipB,GAAG;EACZ,CAAC,EAAE,CAAC,CAAM,CAAC;AACb;AAEO,SAASonF,eAAeA,CAACrnG,KAAU,EAAuB;EAC/D,OAAOonG,QAAQ,CAACpnG,KAAK,CAAC,IAAI,CAACzI,KAAK,CAAC2uD,OAAO,CAAClmD,KAAK,CAAC;AACjD;AAEA,SAASonG,QAAQA,CAACpnG,KAAU,EAAmB;EAC7C;EACA,OAAO,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI;AACpD;AAEO,SAASsnG,QAAQA,CAAIl4C,KAAe,EAAEm4C,SAAyD,EAAiB;EACrH,IAAI19B,MAAM,GAAGza,KAAK,CAAC35D,MAAM;EAEzB,OAAOo0E,MAAM,EAAE,EAAE;IACf,IAAI09B,SAAS,CAACn4C,KAAK,CAACya,MAAM,CAAC,EAAEA,MAAM,EAAEza,KAAK,CAAC,EAAE;MAC3C,OAAOA,KAAK,CAACya,MAAM,CAAC;IACtB;EACF;EAEA,OAAOv2E,SAAS;AAClB;AAEO,SAAS4zB,KAAKA,CAAC0nB,KAAa,EAAEC,GAAW,EAAE;EAChD,MAAM1rB,GAAa,GAAG,EAAE;EACxB,KAAK,IAAI1D,CAAC,GAAGmvB,KAAK,EAAEnvB,CAAC,GAAGovB,GAAG,GAAG;IAC5B1rB,GAAG,CAAC3c,IAAI,CAACiZ,CAAC,EAAE,CAAC;EACf;EACA,OAAO0D,GAAG;AACZ;AAEO,SAAS6xB,kBAAkBA,CAAItf,IAAc,EAAEhkB,MAAe,EAAE;EACrE,OAAOgkB,IAAI,CAAC1V,MAAM,CAAC,CAACC,GAAG,EAAEjpB,GAAG,EAAEmQ,KAAK,KAAK;IACtC8Y,GAAG,CAACjpB,GAAG,CAAC,GAAGO,KAAK,CAAC2uD,OAAO,CAACx0C,MAAM,CAAC,GAAGA,MAAM,CAACvK,KAAK,CAAC,GAAGuK,MAAM;IACzD,OAAOuO,GAAG;EACZ,CAAC,EAAE,CAAC,CAAsB,CAAC;AAC7B;AAEO,SAAS27B,UAAUA,CAAuBwT,KAAU,EAAEp4D,GAAM,EAAU;EAC3E,OAAOo4D,KAAK,CAACt3D,GAAG,CAAEkI,KAAK,IAAKA,KAAK,CAAChJ,GAAG,CAAC,CAAC;AACzC;AAEO,SAASwwG,cAAcA,CAAIhF,MAAW,EAAEC,MAAW,EAAO;EAC/D,MAAMgF,IAAI,GAAG,IAAIxuF,GAAG,CAACwpF,MAAM,CAAC;EAE5B,OAAOD,MAAM,CAACryF,MAAM,CAAEu3F,OAAO,IAAK,CAACD,IAAI,CAAC15E,GAAG,CAAC25E,OAAO,CAAC,CAAC;AACvD;;;;;;;;;;;;;;;;AClMkC;AAE3B,SAAS3yG,aAAaA,CAACN,OAAe,EAAkB;EAC7D,IAAIsyB,0CAAK,EAAE;IAAA,SAAA8Z,IAAA,GAAAzhC,SAAA,CAAA3J,MAAA,EADqC+pC,IAAI,OAAAjoC,KAAA,CAAAspC,IAAA,OAAAA,IAAA,WAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAAJtB,IAAI,CAAAsB,IAAA,QAAA1hC,SAAA,CAAA0hC,IAAA;IAAA;IAElD;IACAlnC,OAAO,CAACC,KAAK,CAAE,WAAUpF,OAAQ,GAAE,EAAE,GAAG+qC,IAAI,CAAC;EAC/C;AACF;AAEO,SAASqc,QAAQA,CAACpnD,OAAY,EAAkB;EACrD,IAAIsyB,0CAAK,EAAE;IAAA,SAAA48E,KAAA,GAAAvkG,SAAA,CAAA3J,MAAA,EAD6B+pC,IAAI,OAAAjoC,KAAA,CAAAosG,KAAA,OAAAA,KAAA,WAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAJpkE,IAAI,CAAAokE,KAAA,QAAAxkG,SAAA,CAAAwkG,KAAA;IAAA;IAE1C;IACAhqG,OAAO,CAAC+tG,GAAG,CAAE,WAAUlzG,OAAQ,EAAC,EAAE,GAAG+qC,IAAI,CAAC;EAC5C;AACF;;;;;;;;;;;;;;;;ACdiE;AAEjE,MAAMooE,qBAA6B,GAAG,uBAAuB;AAEtD,SAASzgF,iBAAiBA,CAACuG,GAAW,EAAE;EAC7CA,GAAG,GAAGte,UAAU,CAACse,GAAG,CAAC;EAErB,MAAMm6E,UAAU,GAAI,GAAE5vE,2DAAuB,4BAA2BvK,GAAI,EAAC;EAE7E,IAAImM,iDAAY,EAAE;IAChB,OAAO/b,SAAS,CAAC+pF,UAAU,CAAC;EAC9B;EAEA,OAAO/pF,SAAS,CAAC4P,GAAG,CAAC,CAAC3zB,KAAK,CAAC,MAAM;IAChC,OAAO+jB,SAAS,CAAC+pF,UAAU,CAAC;EAC9B,CAAC,CAAC;AACJ;AAEO,SAASz4F,UAAUA,CAACse,GAAW,EAAE;EACtC,OAAOA,GAAG,CAAChH,OAAO,CAAC,SAAS,EAAEkhF,qBAAqB,CAAC;AACtD;AAEA,eAAe9pF,SAASA,CAAC4P,GAAW,EAAE;EACpC,MAAM6K,QAAQ,GAAG,MAAMC,KAAK,CAAC9K,GAAG,CAAC;EACjC,IAAI,CAAC6K,QAAQ,CAAC2sE,EAAE,EAAE;IAChB,MAAM7zF,KAAK,CAAE,cAAaknB,QAAQ,CAACxiB,MAAO,EAAC,CAAC;EAC9C;EACA,OAAOwiB,QAAQ,CAACE,IAAI,CAAC,CAAC;AACxB;;;;;;;;;;;;;;;;;AC5BqC;AAEH;AAElC,MAAMO,SAAS,GAAG,IAAI/f,GAAG,CAAW,CAAC;AAErC,IAAI6uF,SAAS,GAAG,IAAI;AAEb,SAAShgE,YAAYA,CAAC2yB,EAAU,EAAyB;EAAA,IAAvBstC,gBAAgB,GAAA3oG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAGq7D,EAAE;EAC5D,MAAMlhC,QAAQ,GAAG,IAAIL,iDAAQ,CAAC,CAAC;EAE/BF,SAAS,CAAC7f,GAAG,CAACogB,QAAQ,CAAC;EAEvBA,QAAQ,CAAC3d,OAAO,CAACkuB,IAAI,CAAC,MAAM;IAC1B9Q,SAAS,CAACS,MAAM,CAACF,QAAQ,CAAC;EAC5B,CAAC,CAAC;EAEFvmB,kDAAK,CAAC80F,SAAS,GAAGrtC,EAAE,GAAGstC,gBAAgB,CAAC,CAACj+D,IAAI,CAACvQ,QAAQ,CAAC/D,OAAO,CAAC;EAE/D,OAAO+D,QAAQ,CAAC3d,OAAO;AACzB;AAEO,SAASsrB,eAAeA,CAAC8gE,UAAmB,EAAE;EACnDF,SAAS,GAAGE,UAAU;EAEtB,IAAIA,UAAU,EAAE;IACdhvE,SAAS,CAAC9d,OAAO,CAAE0rE,CAAC,IAAKA,CAAC,CAACpxD,OAAO,CAAC,CAAC,CAAC;EACvC;AACF;;;;;;;;;;;;;;;;AC5BuC;AACK;AAE5C,MAAMyyE,iBAAiB,GAAG,CAACnpD,+CAAU;AAEtB,SAASxI,QAAQA,CAACgmB,EAAY,EAAE4rC,MAA6B,EAAEC,MAA2B,EAAE;EACzG,IAAI,CAACF,iBAAiB,EAAE;IACtB,OAAO3rC,EAAE,CAAC,CAAC;EACb;EAEA,IAAI;IACF,OAAOA,EAAE,CAAC,CAAC;EACb,CAAC,CAAC,OAAO/nE,GAAQ,EAAE;IACjB2zG,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG3zG,GAAG,CAAC;IACboxG,yDAAW,CAACpxG,GAAG,CAAC;IAChB,OAAOjB,SAAS;EAClB,CAAC,SAAS;IACR60G,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAG,CAAC;EACZ;AACF;;;;;;;;;;;;;;;;ACjBO,SAASC,QAAQA,CACtB7nE,EAAK,EACLk6B,EAAU,EAGV;EAAA,IAFA4tC,cAAc,GAAAjpG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,IAAI;EAAA,IACrBkpG,aAAa,GAAAlpG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,IAAI;EAEpB,IAAImpG,cAAkC;EAEtC,OAAO,YAA4B;IAAA,SAAA1nE,IAAA,GAAAzhC,SAAA,CAAA3J,MAAA,EAAxB+pC,IAAI,OAAAjoC,KAAA,CAAAspC,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAAJtB,IAAI,CAAAsB,IAAA,IAAA1hC,SAAA,CAAA0hC,IAAA;IAAA;IACb,IAAIynE,cAAc,EAAE;MAClB1tC,YAAY,CAAC0tC,cAAc,CAAC;MAC5BA,cAAc,GAAGj1G,SAAS;IAC5B,CAAC,MAAM,IAAI+0G,cAAc,EAAE;MACzB9nE,EAAE,CAAC,GAAGf,IAAI,CAAC;IACb;;IAEA;IACA+oE,cAAc,GAAG1oE,IAAI,CAACqvB,UAAU,CAAC,MAAM;MACrC,IAAIo5C,aAAa,EAAE;QACjB/nE,EAAE,CAAC,GAAGf,IAAI,CAAC;MACb;MAEA+oE,cAAc,GAAGj1G,SAAS;IAC5B,CAAC,EAAEmnE,EAAE,CAAC;EACR,CAAC;AACH;AAEO,SAAS4qC,QAAQA,CACtB9kE,EAAK,EACLk6B,EAAU,EAEV;EAAA,IADA4tC,cAAc,GAAAjpG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,IAAI;EAErB,IAAIopG,QAA4B;EAChC,IAAIC,SAAkB;EACtB,IAAIjpE,IAAmB;EAEvB,OAAO,YAA6B;IAClCipE,SAAS,GAAG,IAAI;IAAC,SAAA9E,KAAA,GAAAvkG,SAAA,CAAA3J,MAAA,EADRizG,KAAK,OAAAnxG,KAAA,CAAAosG,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAAL8E,KAAK,CAAA9E,KAAA,IAAAxkG,SAAA,CAAAwkG,KAAA;IAAA;IAEdpkE,IAAI,GAAGkpE,KAAK;IAEZ,IAAI,CAACF,QAAQ,EAAE;MACb,IAAIH,cAAc,EAAE;QAClBI,SAAS,GAAG,KAAK;QACjBloE,EAAE,CAAC,GAAGf,IAAI,CAAC;MACb;;MAEA;MACAgpE,QAAQ,GAAG3oE,IAAI,CAAC8gD,WAAW,CAAC,MAAM;QAChC,IAAI,CAAC8nB,SAAS,EAAE;UACd;UACA5oE,IAAI,CAAC+gD,aAAa,CAAC4nB,QAAS,CAAC;UAC7BA,QAAQ,GAAGl1G,SAAS;UACpB;QACF;QAEAm1G,SAAS,GAAG,KAAK;QACjBloE,EAAE,CAAC,GAAGf,IAAI,CAAC;MACb,CAAC,EAAEi7B,EAAE,CAAC;IACR;EACF,CAAC;AACH;AAEO,SAASkuC,mBAAmBA,CAA8BpoE,EAAK,EAAE;EACtE,OAAOqoE,YAAY,CAACC,SAAS,EAAEtoE,EAAE,CAAC;AACpC;AAEO,SAASqoE,YAAYA,CAA8BE,WAAsB,EAAEvoE,EAAK,EAAE;EACvF,IAAIwoE,OAAO,GAAG,KAAK;EACnB,IAAIvpE,IAAmB;EAEvB,OAAO,YAA6B;IAAA,SAAAwpE,KAAA,GAAA5pG,SAAA,CAAA3J,MAAA,EAAzBizG,KAAK,OAAAnxG,KAAA,CAAAyxG,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAALP,KAAK,CAAAO,KAAA,IAAA7pG,SAAA,CAAA6pG,KAAA;IAAA;IACdzpE,IAAI,GAAGkpE,KAAK;IAEZ,IAAI,CAACK,OAAO,EAAE;MACZA,OAAO,GAAG,IAAI;MAEdD,WAAW,CAAC,MAAM;QAChBC,OAAO,GAAG,KAAK;QACfxoE,EAAE,CAAC,GAAGf,IAAI,CAAC;MACb,CAAC,CAAC;IACJ;EACF,CAAC;AACH;AAEO,SAAS0pE,MAAMA,CAAC5sC,EAAsB,EAAE7jD,OAAgB,EAAE;EAC/D;EACA,IAAIonB,IAAI,CAACspE,mBAAmB,EAAE;IAC5B;IACAtpE,IAAI,CAACspE,mBAAmB,CAAC7sC,EAAE,EAAE;MAAE7jD;IAAQ,CAAC,CAAC;EAC3C,CAAC,MAAM;IACLowF,SAAS,CAACvsC,EAAE,CAAC;EACf;AACF;AAEO,MAAMtpD,KAAK,GAAIynD,EAAU,IAAK,IAAIxgE,OAAO,CAAQu7B,OAAO,IAAK;EAClE05B,UAAU,CAAC,MAAM15B,OAAO,CAAC,CAAC,EAAEilC,EAAE,CAAC;AACjC,CAAC,CAAC;AAEK,SAAS2uC,UAAUA,CAAA,EAAG;EAC3B,OAAO,IAAInvG,OAAO,CAAQu7B,OAAO,IAAK;IACpC6zE,OAAO,CAAC7zE,OAAO,CAAC;EAClB,CAAC,CAAC;AACJ;AAEA,MAAM8zE,4BAA4B,GAAG,EAAE,CAAC,CAAC;;AAEzC,IAAIC,gBAAqD;AACzD,IAAIC,wBAA6D;AACjE,IAAIC,sBAA0C;;AAE9C;AACA;AACO,SAASJ,OAAOA,CAAC9qE,QAA4B,EAA+B;EAAA,IAA7BmrE,mBAAmB,GAAAtqG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,KAAK;EAC/E,IAAI,CAACmqG,gBAAgB,EAAE;IACrBA,gBAAgB,GAAG,IAAItwF,GAAG,CAAC,CAACslB,QAAQ,CAAC,CAAC;IAEtCorE,qBAAqB,CAAC,MAAM;MAC1B,MAAMC,gBAAgB,GAAGL,gBAAiB;MAE1CA,gBAAgB,GAAGj2G,SAAS;MAC5Bk2G,wBAAwB,GAAGl2G,SAAS;MAEpC,IAAIm2G,sBAAsB,EAAE;QAC1B5uC,YAAY,CAAC4uC,sBAAsB,CAAC;QACpCA,sBAAsB,GAAGn2G,SAAS;MACpC;MAEAs2G,gBAAgB,CAAC1uF,OAAO,CAAEohD,EAAE,IAAKA,EAAE,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC;EACJ,CAAC,MAAM;IACLitC,gBAAgB,CAACpwF,GAAG,CAAColB,QAAQ,CAAC;EAChC;EAEA,IAAImrE,mBAAmB,EAAE;IACvB,IAAI,CAACF,wBAAwB,EAAE;MAC7BA,wBAAwB,GAAG,IAAIvwF,GAAG,CAAC,CAACslB,QAAQ,CAAC,CAAC;IAChD,CAAC,MAAM;MACLirE,wBAAwB,CAACrwF,GAAG,CAAColB,QAAQ,CAAC;IACxC;IAEA,IAAI,CAACkrE,sBAAsB,EAAE;MAC3BA,sBAAsB,GAAGp8C,MAAM,CAAC6B,UAAU,CAAC,MAAM;QAC/C,MAAM26C,uBAAuB,GAAGL,wBAAyB;QAEzD,IAAID,gBAAgB,EAAE;UACpBM,uBAAuB,CAAC3uF,OAAO,CAACquF,gBAAgB,CAAC9vE,MAAM,EAAE8vE,gBAAgB,CAAC;QAC5E;QACAC,wBAAwB,GAAGl2G,SAAS;QAEpC,IAAIm2G,sBAAsB,EAAE;UAC1B5uC,YAAY,CAAC4uC,sBAAsB,CAAC;UACpCA,sBAAsB,GAAGn2G,SAAS;QACpC;QAEAu2G,uBAAuB,CAAC3uF,OAAO,CAAEohD,EAAE,IAAKA,EAAE,CAAC,CAAC,CAAC;MAC/C,CAAC,EAAEgtC,4BAA4B,CAAC;IAClC;EACF;AACF;AAEA,IAAIQ,kBAAoD;AAEjD,SAASjB,SAASA,CAACtqE,QAA4B,EAAE;EACtD,IAAI,CAACurE,kBAAkB,EAAE;IACvBA,kBAAkB,GAAG,CAACvrE,QAAQ,CAAC;IAE/BtkC,OAAO,CAACu7B,OAAO,CAAC,CAAC,CAACsU,IAAI,CAAC,MAAM;MAC3B,MAAM8/D,gBAAgB,GAAGE,kBAAmB;MAC5CA,kBAAkB,GAAGx2G,SAAS;MAC9Bs2G,gBAAgB,CAAC1uF,OAAO,CAAEohD,EAAE,IAAKA,EAAE,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC;EACJ,CAAC,MAAM;IACLwtC,kBAAkB,CAACtjG,IAAI,CAAC+3B,QAAQ,CAAC;EACnC;AACF;AAEA,IAAIwrE,qBAAuD;AAEpD,SAASC,cAAcA,CAACzrE,QAA4B,EAAkB;EAAA,IAAhB0rE,MAAM,GAAA7qG,SAAA,CAAA3J,MAAA,QAAA2J,SAAA,QAAA9L,SAAA,GAAA8L,SAAA,MAAG,KAAK;EACzE,IAAI,CAAC2qG,qBAAqB,EAAE;IAC1BA,qBAAqB,GAAG,EAAE;IAC1B;IACAlqE,IAAI,CAACouD,gBAAgB,CAAC,cAAc,EAAE,MAAM;MAC1C8b,qBAAqB,CAAE7uF,OAAO,CAAEohD,EAAE,IAAKA,EAAE,CAAC,CAAC,CAAC;IAC9C,CAAC,CAAC;EACJ;EAEA,IAAI2tC,MAAM,EAAE;IACVF,qBAAqB,CAACvjG,IAAI,CAAC+3B,QAAQ,CAAC;EACtC,CAAC,MAAM;IACLwrE,qBAAqB,CAACG,OAAO,CAAC3rE,QAAQ,CAAC;EACzC;EAEA,OAAO,MAAM;IACXwrE,qBAAqB,GAAGA,qBAAqB,CAAE55F,MAAM,CAAEmsD,EAAE,IAAKA,EAAE,KAAK/9B,QAAQ,CAAC;EAChF,CAAC;AACH;AAEO,eAAe82C,OAAOA,CAAC/Y,EAAiB,EAAEksC,QAAgB,EAAExrF,QAAgB,EAAE;EACnF,IAAIyC,CAAC,GAAG,CAAC;EACT,IAAIprB,MAAM,GAAGioE,EAAE,CAAC,CAAC;EAEjB,OAAO,CAACjoE,MAAM,IAAIorB,CAAC,GAAGzC,QAAQ,EAAE;IAC9B,MAAMhK,KAAK,CAACw1F,QAAQ,CAAC;IAErB/oF,CAAC,EAAE;IACHprB,MAAM,GAAGioE,EAAE,CAAC,CAAC;EACf;EAEA,OAAOjoE,MAAM;AACf;;;;;;;;;;;;;;ACpNO,SAAS86C,WAAWA,CAACg7D,SAAiB,EAAE;EAC7C,OAAQ,QAAOA,SAAU,EAAC;AAC5B;;;;;;;;;;ACFA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;;;;WClCA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA,8BAA8B,keAAke;WAChgB;;;;;WCJA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA;;;;;WCpCA;WACA;WACA;WACA;;;;;UEHA;UACA","sources":["webpack://mytonwallet/./src/api/blockchains/index.ts","webpack://mytonwallet/./src/api/blockchains/ton/address.ts","webpack://mytonwallet/./src/api/blockchains/ton/auth.ts","webpack://mytonwallet/./src/api/blockchains/ton/constants.ts","webpack://mytonwallet/./src/api/blockchains/ton/contracts/NominatorPool.ts","webpack://mytonwallet/./src/api/blockchains/ton/index.ts","webpack://mytonwallet/./src/api/blockchains/ton/nfts.ts","webpack://mytonwallet/./src/api/blockchains/ton/other.ts","webpack://mytonwallet/./src/api/blockchains/ton/staking.ts","webpack://mytonwallet/./src/api/blockchains/ton/swap.ts","webpack://mytonwallet/./src/api/blockchains/ton/tokens.ts","webpack://mytonwallet/./src/api/blockchains/ton/transactions.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/apiV3.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/diesel.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/dns.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/encryption.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/index.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/metadata.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/sendExternal.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/tonCore.ts","webpack://mytonwallet/./src/api/blockchains/ton/util/tonapiio.ts","webpack://mytonwallet/./src/api/blockchains/ton/wallet.ts","webpack://mytonwallet/./src/api/common/accounts.ts","webpack://mytonwallet/./src/api/common/addresses.ts","webpack://mytonwallet/./src/api/common/backend.ts","webpack://mytonwallet/./src/api/common/cache.ts","webpack://mytonwallet/./src/api/common/dappPromises.ts","webpack://mytonwallet/./src/api/common/helpers.ts","webpack://mytonwallet/./src/api/common/txCallbacks.ts","webpack://mytonwallet/./src/api/common/utils.ts","webpack://mytonwallet/./src/api/db.ts","webpack://mytonwallet/./src/api/environment.ts","webpack://mytonwallet/./src/api/errors.ts","webpack://mytonwallet/./src/api/hooks.ts","webpack://mytonwallet/./src/api/methods/accounts.ts","webpack://mytonwallet/./src/api/methods/auth.ts","webpack://mytonwallet/./src/api/methods/dapps.ts","webpack://mytonwallet/./src/api/methods/index.ts","webpack://mytonwallet/./src/api/methods/init.ts","webpack://mytonwallet/./src/api/methods/nfts.ts","webpack://mytonwallet/./src/api/methods/other.ts","webpack://mytonwallet/./src/api/methods/polling.ts","webpack://mytonwallet/./src/api/methods/preload.ts","webpack://mytonwallet/./src/api/methods/prices.ts","webpack://mytonwallet/./src/api/methods/staking.ts","webpack://mytonwallet/./src/api/methods/swap.ts","webpack://mytonwallet/./src/api/methods/tokens.ts","webpack://mytonwallet/./src/api/methods/transactions.ts","webpack://mytonwallet/./src/api/methods/vesting.ts","webpack://mytonwallet/./src/api/methods/wallet.ts","webpack://mytonwallet/./src/api/providers/worker/provider.ts","webpack://mytonwallet/./src/api/storages/capacitorStorage.ts","webpack://mytonwallet/./src/api/storages/extension.ts","webpack://mytonwallet/./src/api/storages/idb.ts","webpack://mytonwallet/./src/api/storages/index.ts","webpack://mytonwallet/./src/api/storages/localStorage.ts","webpack://mytonwallet/./src/api/storages/types.ts","webpack://mytonwallet/./src/api/tonConnect/errors.ts","webpack://mytonwallet/./src/api/tonConnect/index.ts","webpack://mytonwallet/./src/api/tonConnect/sse.ts","webpack://mytonwallet/./src/api/tonConnect/types/index.ts","webpack://mytonwallet/./src/api/tonConnect/utils.ts","webpack://mytonwallet/./src/api/types/errors.ts","webpack://mytonwallet/./src/api/types/index.ts","webpack://mytonwallet/./src/api/types/misc.ts","webpack://mytonwallet/./src/config.ts","webpack://mytonwallet/./src/lib/aes-js/index.js","webpack://mytonwallet/./src/lib/confusables/characters.ts","webpack://mytonwallet/./src/lib/confusables/index.ts","webpack://mytonwallet/./src/lib/confusables/util.ts","webpack://mytonwallet/./src/lib/dexie/dexie.js","webpack://mytonwallet/./src/lib/noble-ed25519/index.js","webpack://mytonwallet/./src/util/Deferred.ts","webpack://mytonwallet/./src/util/PostMessageConnector.ts","webpack://mytonwallet/./src/util/account.ts","webpack://mytonwallet/./src/util/areDeepEqual.ts","webpack://mytonwallet/./src/util/assert.ts","webpack://mytonwallet/./src/util/bigint.ts","webpack://mytonwallet/./src/util/bigintPatch.ts","webpack://mytonwallet/./src/util/callbacks.ts","webpack://mytonwallet/./src/util/capacitorStorageProxy/connector.ts","webpack://mytonwallet/./src/util/compareActivities.ts","webpack://mytonwallet/./src/util/dns.ts","webpack://mytonwallet/./src/util/fetch.ts","webpack://mytonwallet/./src/util/generateUniqueId.ts","webpack://mytonwallet/./src/util/handleError.ts","webpack://mytonwallet/./src/util/isMnemonicPrivateKey.ts","webpack://mytonwallet/./src/util/iteratees.ts","webpack://mytonwallet/./src/util/logs.ts","webpack://mytonwallet/./src/util/metadata.ts","webpack://mytonwallet/./src/util/pauseOrFocus.ts","webpack://mytonwallet/./src/util/safeExec.ts","webpack://mytonwallet/./src/util/schedulers.ts","webpack://mytonwallet/./src/util/swap/buildSwapId.ts","webpack://mytonwallet/ignored|/media/hdd/Projects/Pet/Android/mytonwallet/node_modules/tweetnacl-util|buffer","webpack://mytonwallet/webpack/bootstrap","webpack://mytonwallet/webpack/runtime/chunk loaded","webpack://mytonwallet/webpack/runtime/compat get default export","webpack://mytonwallet/webpack/runtime/define property getters","webpack://mytonwallet/webpack/runtime/ensure chunk","webpack://mytonwallet/webpack/runtime/get javascript chunk filename","webpack://mytonwallet/webpack/runtime/get mini-css chunk filename","webpack://mytonwallet/webpack/runtime/global","webpack://mytonwallet/webpack/runtime/hasOwnProperty shorthand","webpack://mytonwallet/webpack/runtime/make namespace object","webpack://mytonwallet/webpack/runtime/publicPath","webpack://mytonwallet/webpack/runtime/importScripts chunk loading","webpack://mytonwallet/webpack/runtime/startup chunk dependencies","webpack://mytonwallet/webpack/before-startup","webpack://mytonwallet/webpack/startup","webpack://mytonwallet/webpack/after-startup"],"sourcesContent":["import * as ton from './ton';\n\nexport default {\n  ton,\n};\n","import { Address } from '@ton/core';\n\nimport type { ApiNetwork } from '../../types';\n\nimport dns from '../../../util/dns';\nimport { fetchAddressBook } from './util/apiV3';\nimport { dnsResolve } from './util/dns';\nimport { getTonClient, toBase64Address } from './util/tonCore';\nimport { getKnownAddressInfo } from '../../common/addresses';\nimport { DnsCategory } from './constants';\n\nconst TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\nconst VIP_DNS_COLLECTION = 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS';\nconst GRAM_DNS_COLLECTION = 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ';\n\nexport async function resolveAddress(network: ApiNetwork, address: string): Promise<{\n  address: string;\n  name?: string;\n  isMemoRequired?: boolean;\n  isScam?: boolean;\n} | undefined> {\n  const isDomain = dns.isDnsDomain(address);\n  let domain: string | undefined;\n\n  if (isDomain) {\n    const resolvedAddress = await resolveAddressByDomain(network, address);\n    if (!resolvedAddress) {\n      return undefined;\n    }\n\n    const addressBook = await fetchAddressBook(network, [resolvedAddress]);\n\n    domain = address;\n    address = addressBook[resolvedAddress].user_friendly;\n  }\n\n  const normalizedAddress = normalizeAddress(address);\n  const known = getKnownAddressInfo(normalizedAddress);\n\n  if (known) {\n    return {\n      address,\n      ...known,\n      name: domain ?? known.name,\n    };\n  }\n\n  return { address, name: domain };\n}\n\nasync function resolveAddressByDomain(network: ApiNetwork, domain: string) {\n  try {\n    let base: string;\n    let collection: string;\n    if (dns.isVipDnsDomain(domain)) {\n      base = dns.removeVipZone(domain)!;\n      collection = VIP_DNS_COLLECTION;\n    } else if (dns.isGramDnsDomain(domain)) {\n      base = dns.removeGramZone(domain)!;\n      collection = GRAM_DNS_COLLECTION;\n    } else {\n      base = dns.removeTonZone(domain);\n      collection = TON_DNS_COLLECTION;\n    }\n\n    const result = await dnsResolve(\n      getTonClient(network),\n      collection,\n      base,\n      DnsCategory.Wallet,\n    );\n\n    if (!(result instanceof Address)) {\n      return undefined;\n    }\n\n    return toBase64Address(result, undefined, network);\n  } catch (err: any) {\n    if (!err.message?.includes('exit_code')) {\n      throw err;\n    }\n    return undefined;\n  }\n}\n\nexport function normalizeAddress(address: string, network?: ApiNetwork) {\n  return toBase64Address(address, true, network);\n}\n","import * as tonWebMnemonic from 'tonweb-mnemonic';\nimport nacl from 'tweetnacl';\n\nimport { ApiCommonError } from '../../types';\n\nimport isMnemonicPrivateKey from '../../../util/isMnemonicPrivateKey';\nimport { logDebugError } from '../../../util/logs';\nimport { getAccountValue, setAccountValue } from '../../common/accounts';\nimport { bytesToHex, hexToBytes } from '../../common/utils';\n\nconst PBKDF2_IMPORT_KEY_ARGS = [\n  { name: 'PBKDF2' },\n  false,\n  ['deriveBits', 'deriveKey'],\n] as const;\n\nconst PBKDF2_DERIVE_KEY_ARGS = {\n  name: 'PBKDF2',\n  iterations: 100000, // Higher is more secure but slower\n  hash: 'SHA-256',\n};\n\nconst PBKDF2_DERIVE_KEY_TYPE = { name: 'AES-GCM', length: 256 };\n\nexport function generateMnemonic() {\n  return tonWebMnemonic.generateMnemonic();\n}\n\nexport function validateMnemonic(mnemonic: string[]) {\n  return tonWebMnemonic.validateMnemonic(mnemonic);\n}\n\nexport function privateKeyHexToKeyPair(privateKeyHex: string) {\n  return nacl.sign.keyPair.fromSeed(hexToBytes(privateKeyHex));\n}\n\nexport function mnemonicToKeyPair(mnemonic: string[]) {\n  return tonWebMnemonic.mnemonicToKeyPair(mnemonic);\n}\n\nexport async function encryptMnemonic(mnemonic: string[], password: string) {\n  const plaintext = mnemonic.join(',');\n  const salt = crypto.getRandomValues(new Uint8Array(16)); // generate a 128-bit salt\n  const keyMaterial = await crypto.subtle.importKey(\n    'raw',\n    new TextEncoder().encode(password),\n    ...PBKDF2_IMPORT_KEY_ARGS,\n  );\n  const key = await crypto.subtle.deriveKey(\n    {\n      salt,\n      ...PBKDF2_DERIVE_KEY_ARGS,\n    },\n    keyMaterial,\n    PBKDF2_DERIVE_KEY_TYPE,\n    false,\n    ['encrypt'],\n  );\n  const iv = crypto.getRandomValues(new Uint8Array(12)); // get 96-bit random iv\n  const ptUint8 = new TextEncoder().encode(plaintext); // encode plaintext as UTF-8\n  const ctBuffer = await crypto.subtle.encrypt({ name: 'AES-GCM', iv }, key, ptUint8); // encrypt plaintext using key\n  const ctArray = Array.from(new Uint8Array(ctBuffer)); // ciphertext as byte array\n  const ctBase64 = btoa(String.fromCharCode(...ctArray)); // encode ciphertext as base64\n  const ivHex = Array.from(iv).map((b) => (`00${b.toString(16)}`).slice(-2)).join(''); // iv as hex string\n  const saltHex = Array.from(salt).map((b) => (`00${b.toString(16)}`).slice(-2)).join(''); // salt as hex string\n\n  return `${saltHex}:${ivHex}:${ctBase64}`;\n}\n\nexport async function decryptMnemonic(encrypted: string, password: string) {\n  if (!encrypted.includes(':')) {\n    return decryptMnemonicLegacy(encrypted, password);\n  }\n\n  const [saltHex, ivHex, encryptedData] = encrypted.split(':');\n  const salt = new Uint8Array(saltHex.match(/.{2}/g)!.map((b) => parseInt(b, 16)));\n  const iv = new Uint8Array(ivHex.match(/.{2}/g)!.map((b) => parseInt(b, 16)));\n  const keyMaterial = await crypto.subtle.importKey(\n    'raw',\n    new TextEncoder().encode(password),\n    ...PBKDF2_IMPORT_KEY_ARGS,\n  );\n  const key = await crypto.subtle.deriveKey(\n    { salt, ...PBKDF2_DERIVE_KEY_ARGS },\n    keyMaterial,\n    PBKDF2_DERIVE_KEY_TYPE,\n    false,\n    ['decrypt'],\n  );\n  const ctStr = atob(encryptedData); // decode base64 ciphertext\n  const ctUint8 = new Uint8Array(ctStr.match(/[\\s\\S]/g)!.map((ch) => ch.charCodeAt(0))); // ciphertext as Uint8Array\n  const plainBuffer = await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ctUint8); // decrypt ciphertext using key\n  const plaintext = new TextDecoder().decode(plainBuffer); // decode password from UTF-8\n\n  return plaintext.split(',');\n}\n\nasync function decryptMnemonicLegacy(encrypted: string, password: string) {\n  const pwUtf8 = new TextEncoder().encode(password); // encode password as UTF-8\n  const pwHash = await crypto.subtle.digest('SHA-256', pwUtf8); // hash the password\n  const iv = encrypted.slice(0, 24).match(/.{2}/g)!.map((byte) => parseInt(byte, 16)); // get iv from ciphertext\n  const alg = { name: 'AES-GCM', iv: new Uint8Array(iv) }; // specify algorithm to use\n  const key = await crypto.subtle.importKey('raw', pwHash, alg, false, ['decrypt']); // use pw to generate key\n  const ctStr = atob(encrypted.slice(24)); // decode base64 ciphertext\n  const ctUint8 = new Uint8Array(ctStr.match(/[\\s\\S]/g)!.map((ch) => ch.charCodeAt(0))); // ciphertext as Uint8Array\n  const plainBuffer = await crypto.subtle.decrypt(alg, key, ctUint8); // decrypt ciphertext using key\n  const plaintext = new TextDecoder().decode(plainBuffer); // decode password from UTF-8\n\n  return plaintext.split(',');\n}\n\nexport async function fetchMnemonic(accountId: string, password: string) {\n  try {\n    const mnemonicEncrypted = await getAccountValue(accountId, 'mnemonicsEncrypted') as string;\n    const mnemonic = await decryptMnemonic(mnemonicEncrypted, password);\n\n    if (!mnemonicEncrypted.includes(':')) {\n      await tryMigratingMnemonicEncryption(accountId, mnemonic, password);\n    }\n\n    return mnemonic;\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n\n    return undefined;\n  }\n}\n\nasync function tryMigratingMnemonicEncryption(accountId: string, mnemonic: string[], password: string) {\n  try {\n    const mnemonicEncrypted = await encryptMnemonic(mnemonic, password);\n\n    // This is a defensive approach against potential corrupted encryption reported by some users\n    const decryptedMnemonic = await decryptMnemonic(mnemonicEncrypted, password)\n      .catch(() => undefined);\n\n    if (!password || !decryptedMnemonic) {\n      return { error: ApiCommonError.DebugError };\n    }\n\n    await Promise.all([\n      setAccountValue(accountId, 'mnemonicsEncrypted', mnemonicEncrypted),\n    ]);\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n\n  return undefined;\n}\n\nexport async function fetchPrivateKey(accountId: string, password: string) {\n  try {\n    const { secretKey: privateKey } = await fetchKeyPair(accountId, password) || {};\n\n    return privateKey;\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n\n    return undefined;\n  }\n}\n\nexport async function fetchKeyPair(accountId: string, password: string) {\n  try {\n    const mnemonic = await fetchMnemonic(accountId, password);\n    if (!mnemonic) {\n      return undefined;\n    }\n\n    return isMnemonicPrivateKey(mnemonic) ? privateKeyHexToKeyPair(mnemonic[0]) : await mnemonicToKeyPair(mnemonic);\n  } catch (err) {\n    logDebugError('fetchKeyPair', err);\n\n    return undefined;\n  }\n}\n\nexport async function rawSign(accountId: string, password: string, dataHex: string) {\n  const privateKey = await fetchPrivateKey(accountId, password);\n  if (!privateKey) {\n    return undefined;\n  }\n\n  const signature = nacl.sign.detached(hexToBytes(dataHex), privateKey);\n\n  return bytesToHex(signature);\n}\n\nexport async function verifyPassword(accountId: string, password: string) {\n  return Boolean(await fetchMnemonic(accountId, password));\n}\n","import type { ApiWalletVersion } from '../../types';\nimport type { ContractInfo, ContractName } from './types';\nimport { Workchain } from '../../types';\n\nexport const TOKEN_TRANSFER_TONCOIN_AMOUNT = 100000000n; // 0.1 TON\nexport const TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT = 1n; // 0.000000001 TON\nexport const NFT_TRANSFER_TONCOIN_AMOUNT = 100000000n; // 0.1 TON\nexport const NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT = 1n; // 0.000000001 TON\n\nexport const STAKE_COMMENT = 'd';\nexport const UNSTAKE_COMMENT = 'w';\n\nexport const ATTEMPTS = 5;\n\nexport const DEFAULT_DECIMALS = 9;\nexport const DEFAULT_IS_BOUNCEABLE = true;\nexport const WALLET_IS_BOUNCEABLE = false;\n\n// Fee may change, so we add 5% for more reliability. This is only safe for low-fee blockchains such as TON.\nexport const FEE_FACTOR = 1.05;\n\nexport const ALL_WALLET_VERSIONS: ApiWalletVersion[] = [\n  'simpleR1', 'simpleR2', 'simpleR3', 'v2R1', 'v2R2', 'v3R1', 'v3R2', 'v4R2', 'W5',\n];\n\nexport const WORKCHAIN = Workchain.BaseChain;\nexport const TRANSFER_TIMEOUT_SEC = 600; // 10 min.\n\nexport enum OpCode {\n  Comment = 0,\n  Encrypted = 0x2167da4b,\n}\n\nexport enum JettonOpCode {\n  Transfer = 0xf8a7ea5,\n  TransferNotification = 0x7362d09c,\n  InternalTransfer = 0x178d4519,\n  Excesses = 0xd53276db,\n  Burn = 0x595f07bc,\n  BurnNotification = 0x7bdd97de,\n}\n\nexport enum NftOpCode {\n  TransferOwnership = 0x5fcc3d14,\n  OwnershipAssigned = 0x05138d91,\n}\n\nexport enum LiquidStakingOpCode {\n  // Pool\n  RequestLoan = 0xe642c965,\n  LoanRepayment = 0xdfdca27b,\n  Deposit = 0x47d54391,\n  Withdraw = 0x319B0CDC,\n  Withdrawal = 0x0a77535c,\n  DeployController = 0xb27edcad,\n  Touch = 0x4bc7c2df,\n  Donate = 0x73affe21,\n  // NFT\n  DistributedAsset = 0xdb3b8abd,\n  // Jetton\n  Vote = 0x69fb306c,\n}\n\nexport enum VestingV1OpCode {\n  AddWhitelist = 0x7258a69b,\n}\n\nexport enum SingleNominatorOpCode {\n  Withdraw = 0x1000,\n  ChangeValidator = 0x1001,\n}\n\nexport enum DnsOpCode {\n  ChangeRecord = 0x4eb1f0f9,\n}\n\nexport enum OtherOpCode {\n  TokenBridgePaySwap = 0x8,\n}\n\nexport enum ContractType {\n  Wallet = 'wallet',\n  Staking = 'staking',\n}\n\nexport enum DnsCategory {\n  DnsNextResolver = 'dns_next_resolver',\n  Wallet = 'wallet',\n  Site = 'site',\n  BagId = 'storage',\n  Unknown = 'unknown',\n}\n\nexport const DNS_CATEGORY_HASH_MAP = {\n  dns_next_resolver: '19f02441ee588fdb26ee24b2568dd035c3c9206e11ab979be62e55558a1d17ff',\n  wallet: 'e8d44050873dba865aa7c170ab4cce64d90839a34dcfd6cf71d14e0205443b1b',\n  site: 'fbae041b02c41ed0fd8a4efb039bc780dd6af4a1f0c420f42561ae705dda43fe',\n  storage: '49a25f9feefaffecad0fcd30c50dc9331cff8b55ece53def6285c09e17e6f5d7',\n} as const;\n\nexport const DNS_ZONES_MAP = {\n  '.t.me': 'EQCA14o1-VWhS2efqoh_9M1b_A9DtKTuoqfmkn83AbJzwnPi',\n  '.ton': 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz',\n  '.vip': 'EQBWG4EBbPDv4Xj7xlPwzxd7hSyHMzwwLB5O6rY-0BBeaixS',\n  '.gram': 'EQAic3zPce496ukFDhbco28FVsKKl2WUX_iJwaL87CBxSiLQ',\n} as const;\n\nexport const KnownContracts: Record<ContractName, ContractInfo> = {\n  simpleR1: {\n    name: 'simpleR1',\n    hash: '3232dc55b02b3d2a9485adc151cf29c50b94c374d3571cb59390d761b87af8bd',\n    type: ContractType.Wallet,\n  },\n  simpleR2: {\n    name: 'simpleR2',\n    hash: '672ce2b01d2fd487a5e0528611e7e4fc11867148cc13ff772bd773b72fb368df',\n    type: ContractType.Wallet,\n  },\n  simpleR3: {\n    name: 'simpleR3',\n    hash: 'd95417233f66ae218317f533630cbbddc677d6d893d5722be6947c8fad8e9d52',\n    type: ContractType.Wallet,\n  },\n  v2R1: {\n    name: 'v2R1',\n    hash: 'fb3bd539b7e50166f1cfdc0bbd298b1c88f6b261fe5ee61343ea47ab4b256029',\n    type: ContractType.Wallet,\n  },\n  v2R2: {\n    name: 'v2R2',\n    hash: 'b584b6106753b7f34709df505be603e463a44ff6a85adf7fec4e26453c325983',\n    type: ContractType.Wallet,\n  },\n  v3R1: {\n    name: 'v3R1',\n    hash: '11d123ed5c2055128e75a9ef4cf1e837e6d14a9c079c39939885c78dc13626e6',\n    type: ContractType.Wallet,\n  },\n  v3R2: {\n    name: 'v3R2',\n    hash: 'df7bf014ee7ac0c38da19ef1b7fa054e2cc7a4513df1f1aa295109cf3606ac14',\n    type: ContractType.Wallet,\n  },\n  v4R1: {\n    name: 'v4R1',\n    hash: '1bc0dfa40956c911616f8a5db09ecc217601bae48d7d3f9311562c5afcb66dcf',\n    type: ContractType.Wallet,\n  },\n  v4R2: {\n    name: 'v4R2',\n    hash: '5659ce2300f4a09a37b0bdee41246ded52474f032c1d6ffce0d7d31b18b7b2b1',\n    type: ContractType.Wallet,\n  },\n  W5: {\n    name: 'W5',\n    hash: '7e94eaaeaaa423b9396e79747038c42edc4fe98dce65094071f0e0ad2df22fd5',\n    type: ContractType.Wallet,\n  },\n  highloadV2: {\n    name: 'highloadV2',\n    hash: 'fcd7d1f3b3847f0b9bd44bc64a2256c03450979dd1646a24fbc874b075392d6e',\n    type: ContractType.Wallet,\n  },\n  nominatorPool: {\n    name: 'nominatorPool',\n    hash: '26faa2d0fd2a8197ea36ded8dc50ad081cce5244207e9b05c08c1bb655527bff',\n    type: ContractType.Staking,\n  },\n  multisig: {\n    name: 'multisig',\n    hash: '45d890485cdd6b152bcbbe3fb2e16d2df82f6da840440a5b9f34ea13cb0b92d2',\n    type: ContractType.Wallet,\n  },\n  multisigV2: {\n    name: 'multisigV2',\n    hash: 'eb1323c5544d5bf26248dc427d108d722d5c2922dd97dd0bdf903c4cea73ca97',\n    type: ContractType.Wallet,\n  },\n  vesting: {\n    name: 'vesting',\n    hash: '69dc931958f7aa203c4a7bfcf263d25d2d828d573184b542a65dd55c8398ad83',\n    type: ContractType.Wallet,\n  },\n  multisigNew: {\n    name: 'multisigNew',\n    hash: '7cb3678880388acff45d74b2e7e7544caa8039d20b49f57c75b53c051b6fa30f',\n    type: ContractType.Wallet,\n  },\n  dedustPool: {\n    name: 'dedustPool',\n    hash: 'f216ded2b43d32e2d487db6fa6e4d2387f0ef1d7b53ec1ad85f0b4feb8e4ed62',\n    isSwapAllowed: true,\n  },\n  dedustVaultNative: {\n    name: 'dedustVaultNative',\n    hash: '64a42ad66688097422901ae6188670f0d6292ad3bdb4139289666f24187e86cb',\n    isSwapAllowed: true,\n  },\n  dedustVaultJetton: {\n    name: 'dedustVaultJetton',\n    hash: '5bc82f0c5972ccc6732e98cbe31ea4795da818f9e06c991331568182a8362307',\n    isSwapAllowed: true,\n  },\n  stonPtonWallet: {\n    name: 'stonPtonWallet',\n    hash: '6ccbf71a3ed9c7355f84a698a44a7406574bfb8aa34d4bbd86ab75ee9c994880',\n    isSwapAllowed: true,\n  },\n  stonRouter: {\n    name: 'stonRouter',\n    hash: '14ce618a0e9a94adc99fa6e975219ddd675425b30dfa9728f98714c8dc55f9da',\n    isSwapAllowed: true,\n  },\n  megatonWtonMaster: {\n    name: 'megatonWtonMaster',\n    hash: '4c9790d808ea4470614e021f76c40529efe2fbce8138da4284a29b5f1943ef19',\n    isSwapAllowed: true,\n  },\n  megatonRouter: {\n    name: 'megatonRouter',\n    hash: '5d5f0e3ed9602d1ba96006ead98cb5e9b53f49ce4a5cf675e06e4d440b7d267c',\n    isSwapAllowed: true,\n  },\n};\n","import type {\n  Cell, Contract, ContractProvider,\n} from '@ton/core';\nimport {\n  Address, beginCell, contractAddress, TupleReader,\n} from '@ton/core';\n\nexport type NominatorPoolConfig = {};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function nominatorPoolConfigToCell(config: NominatorPoolConfig): Cell {\n  return beginCell().endCell();\n}\n\nexport class NominatorPool implements Contract {\n  constructor(readonly address: Address, readonly init?: { code: Cell; data: Cell }) {}\n\n  static createFromAddress(address: Address) {\n    return new NominatorPool(address);\n  }\n\n  static createFromConfig(config: NominatorPoolConfig, code: Cell, workchain = 0) {\n    const data = nominatorPoolConfigToCell(config);\n    const init = { code, data };\n    return new NominatorPool(contractAddress(workchain, init), init);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async getListNominators(provider: ContractProvider): Promise<{\n    address: Address;\n    amount: bigint;\n    pendingDepositAmount: bigint;\n    withdrawRequested: boolean;\n  }[]> {\n    const res = await provider.get('list_nominators', []);\n    const tupleReader = (res.stack as TupleReader).readTuple();\n    const itemsArray = (tupleReader as any).items as bigint[][];\n\n    return itemsArray.map((items: bigint[]) => {\n      const tupleItems = items.map((value) => ({ type: 'int' as const, value }));\n      const tuple = new TupleReader(tupleItems);\n\n      const hash = tuple.readBigNumber().toString(16).padStart(64, '0');\n      const address = Address.parse(`0:${hash}`);\n      const amount = tuple.readBigNumber();\n      const pendingDepositAmount = tuple.readBigNumber();\n      const withdrawRequested = Boolean(tuple.readNumber());\n\n      return {\n        address,\n        amount,\n        pendingDepositAmount,\n        withdrawRequested,\n      };\n    });\n  }\n}\n","export {\n  encryptMnemonic,\n  decryptMnemonic,\n  fetchMnemonic,\n  generateMnemonic,\n  rawSign,\n  mnemonicToKeyPair,\n  validateMnemonic,\n  verifyPassword,\n  fetchPrivateKey,\n} from './auth';\nexport {\n  getAccountNfts,\n  getNftUpdates,\n  checkNftTransferDraft,\n  submitNftTransfers,\n} from './nfts';\nexport { oneCellFromBoc } from './util/tonCore';\nexport { buildTokenSlug } from './util';\nexport {\n  checkTransactionDraft,\n  getAccountNewestTxId,\n  getAccountTransactionSlice,\n  getTokenTransactionSlice,\n  submitTransfer,\n  waitPendingTransfer,\n  checkMultiTransactionDraft,\n  submitMultiTransfer,\n  getMergedTransactionSlice,\n  sendSignedMessage,\n  sendSignedMessages,\n  decryptComment,\n  waitUntilTransactionAppears,\n  fixTokenActivitiesAddressForm,\n  submitTransferWithDiesel,\n  fetchEstimateDiesel,\n} from './transactions';\nexport {\n  getAccountBalance,\n  pickAccountWallet,\n  pickBestWallet,\n  publicKeyToAddress,\n  resolveWalletVersion,\n  getWalletStateInit,\n  getWalletBalance,\n  getWalletSeqno,\n  isAddressInitialized,\n  isActiveSmartContract,\n  getWalletInfo,\n  pickWalletByAddress,\n  getWalletVersions,\n  getWalletVersionInfos,\n  getContractInfo,\n} from './wallet';\nexport {\n  checkStakeDraft,\n  checkUnstakeDraft,\n  submitStake,\n  submitUnstake,\n  getStakingState,\n} from './staking';\nexport {\n  packPayloadToBoc,\n  checkApiAvailability,\n} from './other';\nexport {\n  getAccountTokenBalances,\n  getTokenBalances,\n  getAddressTokenBalances,\n  fetchToken,\n  resolveTokenBySlug,\n} from './tokens';\nexport {\n  resolveTokenWalletAddress,\n  resolveTokenMinterAddress,\n} from './util/tonCore';\nexport {\n  parsePayloadBase64,\n} from './util/metadata';\nexport {\n  normalizeAddress,\n} from './address';\nexport {\n  validateDexSwapTransfers,\n} from './swap';\n","import type { NftItem } from 'tonapi-sdk-js';\nimport type { Cell } from '@ton/core';\nimport { Address, Builder } from '@ton/core';\n\nimport type { ApiNft, ApiNftUpdate } from '../../types';\nimport type { ApiCheckTransactionDraftResult } from './types';\n\nimport {\n  BURN_ADDRESS,\n  NFT_BATCH_SIZE,\n  NOTCOIN_EXCHANGERS,\n  NOTCOIN_FORWARD_TON_AMOUNT,\n  NOTCOIN_VOUCHERS_ADDRESS,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { compact } from '../../../util/iteratees';\nimport { generateQueryId } from './util';\nimport { buildNft } from './util/metadata';\nimport { fetchAccountEvents, fetchAccountNfts, fetchNftItems } from './util/tonapiio';\nimport { commentToBytes, packBytesAsSnake, toBase64Address } from './util/tonCore';\nimport { fetchStoredAccount, fetchStoredAddress } from '../../common/accounts';\nimport { NFT_TRANSFER_TONCOIN_AMOUNT, NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT, NftOpCode } from './constants';\nimport { checkMultiTransactionDraft, checkToAddress, submitMultiTransfer } from './transactions';\nimport { isActiveSmartContract } from './wallet';\n\nexport async function getAccountNfts(accountId: string, offset?: number, limit?: number): Promise<ApiNft[]> {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const rawNfts = await fetchAccountNfts(network, address, { offset, limit });\n  return compact(rawNfts.map((rawNft) => buildNft(network, rawNft)));\n}\n\nexport async function getNftUpdates(accountId: string, fromSec: number) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const events = await fetchAccountEvents(network, address, fromSec);\n  fromSec = events[0]?.timestamp ?? fromSec;\n  events.reverse();\n  const updates: ApiNftUpdate[] = [];\n\n  for (const event of events) {\n    for (const action of event.actions) {\n      let to: string;\n      let nftAddress: string;\n      let rawNft: NftItem | undefined;\n      const isPurchase = !!action.NftPurchase;\n\n      if (action.NftItemTransfer) {\n        const { sender, recipient, nft: rawNftAddress } = action.NftItemTransfer;\n        if (!sender || !recipient) continue;\n        to = toBase64Address(recipient.address, undefined, network);\n        nftAddress = toBase64Address(rawNftAddress, true, network);\n      } else if (action.NftPurchase) {\n        const { buyer } = action.NftPurchase;\n        to = toBase64Address(buyer.address, undefined, network);\n        rawNft = action.NftPurchase.nft;\n        if (!rawNft) {\n          continue;\n        }\n        nftAddress = toBase64Address(rawNft.address, true, network);\n      } else {\n        continue;\n      }\n\n      if (to === address) {\n        if (!rawNft) {\n          [rawNft] = await fetchNftItems(network, [nftAddress]);\n        }\n\n        if (rawNft) {\n          const nft = buildNft(network, rawNft);\n\n          if (nft) {\n            updates.push({\n              type: 'nftReceived',\n              accountId,\n              nftAddress,\n              nft,\n            });\n          }\n        }\n      } else if (!isPurchase && await isActiveSmartContract(network, to)) {\n        updates.push({\n          type: 'nftPutUpForSale',\n          accountId,\n          nftAddress,\n        });\n      } else {\n        updates.push({\n          type: 'nftSent',\n          accountId,\n          nftAddress,\n        });\n      }\n    }\n  }\n\n  return [fromSec, updates] as [number, ApiNftUpdate[]];\n}\n\nexport async function checkNftTransferDraft(options: {\n  accountId: string;\n  nftAddresses: string[];\n  toAddress: string;\n  comment?: string;\n}): Promise<ApiCheckTransactionDraftResult> {\n  const { accountId, nftAddresses, comment } = options;\n  let { toAddress } = options;\n\n  const { network } = parseAccountId(accountId);\n  const { address: fromAddress } = await fetchStoredAccount(accountId);\n\n  const checkAddressResult = await checkToAddress(network, toAddress);\n\n  if ('error' in checkAddressResult) {\n    return checkAddressResult;\n  }\n\n  toAddress = checkAddressResult.resolvedAddress!;\n\n  // We only need to check the first batch of a multi-transaction\n  const messages = nftAddresses.slice(0, NFT_BATCH_SIZE).map((nftAddress) => {\n    return {\n      payload: buildNftTransferPayload(fromAddress, toAddress, comment),\n      amount: NFT_TRANSFER_TONCOIN_AMOUNT,\n      toAddress: nftAddress,\n    };\n  });\n\n  const result = await checkMultiTransactionDraft(accountId, messages);\n\n  if ('error' in result) {\n    return result;\n  }\n\n  return {\n    ...result,\n    ...checkAddressResult,\n  };\n}\n\nexport async function submitNftTransfers(options: {\n  accountId: string;\n  password: string;\n  nftAddresses: string[];\n  toAddress: string;\n  comment?: string;\n  nfts?: ApiNft[];\n}) {\n  const {\n    accountId, password, nftAddresses, toAddress, comment, nfts,\n  } = options;\n\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const messages = nftAddresses.map((nftAddress, index) => {\n    const nft = nfts?.[index];\n    const isNotcoinBurn = nft?.collectionAddress === NOTCOIN_VOUCHERS_ADDRESS\n      && (toAddress === BURN_ADDRESS || NOTCOIN_EXCHANGERS.includes(toAddress as any));\n    const payload = isNotcoinBurn\n      ? buildNotcoinVoucherExchange(fromAddress, nftAddress, nft!.index)\n      : buildNftTransferPayload(fromAddress, toAddress, comment);\n\n    return {\n      payload,\n      amount: NFT_TRANSFER_TONCOIN_AMOUNT,\n      toAddress: nftAddress,\n    };\n  });\n\n  return submitMultiTransfer(accountId, password, messages);\n}\n\nfunction buildNotcoinVoucherExchange(fromAddress: string, nftAddress: string, nftIndex: number) {\n  // eslint-disable-next-line no-bitwise\n  const first4Bits = Address.parse(nftAddress).hash.readUint8() >> 4;\n  const toAddress = NOTCOIN_EXCHANGERS[first4Bits];\n\n  const payload = new Builder()\n    .storeUint(0x5fec6642, 32)\n    .storeUint(nftIndex, 64)\n    .endCell();\n\n  return buildNftTransferPayload(fromAddress, toAddress, payload, NOTCOIN_FORWARD_TON_AMOUNT);\n}\n\nfunction buildNftTransferPayload(\n  fromAddress: string,\n  toAddress: string,\n  payload?: string | Cell,\n  forwardAmount = NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT,\n) {\n  let builder = new Builder()\n    .storeUint(NftOpCode.TransferOwnership, 32)\n    .storeUint(generateQueryId(), 64)\n    .storeAddress(Address.parse(toAddress))\n    .storeAddress(Address.parse(fromAddress))\n    .storeBit(false) // null custom_payload\n    .storeCoins(forwardAmount);\n\n  let forwardPayload: Cell | Uint8Array | undefined;\n\n  if (payload) {\n    if (typeof payload === 'string') {\n      const bytes = commentToBytes(payload);\n      const freeBytes = Math.floor(builder.availableBits / 8);\n      forwardPayload = packBytesAsSnake(bytes, freeBytes);\n    } else {\n      forwardPayload = payload;\n    }\n  }\n\n  if (forwardPayload instanceof Uint8Array) {\n    builder.storeBit(0);\n    builder = builder.storeBuffer(Buffer.from(forwardPayload));\n  } else {\n    builder = builder.storeMaybeRef(forwardPayload);\n  }\n\n  return builder.endCell();\n}\n","import { Builder, Cell } from '@ton/core';\n\nimport type { ApiNetwork } from '../../types';\n\nimport { getTonClient } from './util/tonCore';\n\nexport function packPayloadToBoc(payload: string | Uint8Array) {\n  let cell = new Cell();\n  if (payload) {\n    if (payload instanceof Cell) {\n      cell = payload;\n    } else if (typeof payload === 'string') {\n      if (payload.length > 0) {\n        cell = new Builder()\n          .storeUint(0, 32)\n          .storeStringTail(payload)\n          .asCell();\n      }\n    } else {\n      cell = new Builder()\n        .storeBuffer(Buffer.from(payload))\n        .asCell();\n    }\n  }\n  return cell.toBoc().toString('base64');\n}\n\nexport async function checkApiAvailability(network: ApiNetwork) {\n  try {\n    await getTonClient(network).getMasterchainInfo();\n    return true;\n  } catch (err: any) {\n    return false;\n  }\n}\n","import { Address } from '@ton/core';\n\nimport type {\n  ApiBackendStakingState,\n  ApiNetwork,\n  ApiStakingState,\n  ApiStakingType,\n} from '../../types';\nimport type { ApiCheckTransactionDraftResult, ApiSubmitTransferResult, TonTransferParams } from './types';\nimport { ApiCommonError, ApiLiquidUnstakeMode, ApiTransactionDraftError } from '../../types';\n\nimport {\n  LIQUID_JETTON, LIQUID_POOL, ONE_TON, VALIDATION_PERIOD_MS,\n} from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { bigintDivideToNumber, bigintMultiplyToNumber } from '../../../util/bigint';\nimport { fromDecimal } from '../../../util/decimals';\nimport {\n  buildLiquidStakingDepositBody,\n  buildLiquidStakingWithdrawBody,\n  getTokenBalance,\n  getTonClient,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonCore';\nimport { NominatorPool } from './contracts/NominatorPool';\nimport { fetchStoredAddress } from '../../common/accounts';\nimport { getAccountCache, getStakingCommonCache, updateAccountCache } from '../../common/cache';\nimport { apiDb } from '../../db';\nimport { STAKE_COMMENT, UNSTAKE_COMMENT } from './constants';\nimport { checkTransactionDraft, submitTransfer } from './transactions';\nimport { isAddressInitialized } from './wallet';\n\nexport async function checkStakeDraft(\n  accountId: string,\n  amount: bigint,\n  backendState: ApiBackendStakingState,\n) {\n  const staked = await getStakingState(accountId, backendState);\n\n  let type: ApiStakingType;\n  let result: ApiCheckTransactionDraftResult;\n\n  if (staked?.type === 'nominators' && amount >= ONE_TON) {\n    type = 'nominators';\n\n    const poolAddress = backendState.nominatorsPool.address;\n    amount += ONE_TON;\n\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: poolAddress,\n      amount,\n      data: STAKE_COMMENT,\n    });\n  } else if (amount < ONE_TON) {\n    return { error: ApiTransactionDraftError.InvalidAmount };\n  } else {\n    type = 'liquid';\n\n    const body = buildLiquidStakingDepositBody();\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: LIQUID_POOL,\n      amount,\n      data: body,\n    });\n  }\n\n  return {\n    ...result,\n    type,\n  };\n}\n\nexport async function checkUnstakeDraft(\n  accountId: string,\n  amount: bigint,\n  backendState: ApiBackendStakingState,\n) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n  const commonData = getStakingCommonCache();\n  const staked = await getStakingState(accountId, backendState);\n\n  let type: ApiStakingType;\n  let result: ApiCheckTransactionDraftResult;\n  let tokenAmount: bigint | undefined;\n\n  if (staked.type === 'nominators') {\n    type = 'nominators';\n\n    const poolAddress = backendState.nominatorsPool.address;\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: poolAddress,\n      amount: ONE_TON,\n      data: UNSTAKE_COMMENT,\n    });\n  } else if (staked.type === 'liquid') {\n    type = 'liquid';\n\n    if (amount > staked.amount) {\n      return { error: ApiTransactionDraftError.InsufficientBalance };\n    } else if (amount === staked.amount) {\n      tokenAmount = staked.tokenAmount;\n    } else {\n      tokenAmount = bigintDivideToNumber(amount, commonData.liquid.currentRate);\n    }\n\n    const params = await buildLiquidStakingWithdraw(network, address, tokenAmount);\n    result = await checkTransactionDraft({\n      accountId,\n      toAddress: params.toAddress,\n      amount: params.amount,\n      data: params.payload,\n    });\n  } else {\n    return { error: ApiCommonError.Unexpected };\n  }\n\n  return {\n    ...result,\n    type,\n    tokenAmount,\n  };\n}\n\nexport async function submitStake(\n  accountId: string,\n  password: string,\n  amount: bigint,\n  type: ApiStakingType,\n  backendState: ApiBackendStakingState,\n) {\n  let result: ApiSubmitTransferResult;\n\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  if (type === 'liquid') {\n    amount += ONE_TON;\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: LIQUID_POOL,\n      amount,\n      data: buildLiquidStakingDepositBody(),\n    });\n  } else {\n    const poolAddress = backendState.nominatorsPool.address;\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: toBase64Address(poolAddress, true, network),\n      amount,\n      data: STAKE_COMMENT,\n    });\n  }\n\n  if (!('error' in result)) {\n    updateAccountCache(accountId, address, { stakedAt: Date.now() });\n  }\n\n  return result;\n}\n\nexport async function submitUnstake(\n  accountId: string,\n  password: string,\n  type: ApiStakingType,\n  amount: bigint,\n  backendState: ApiBackendStakingState,\n) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const staked = await getStakingState(accountId, backendState);\n\n  let result: ApiSubmitTransferResult;\n\n  if (type === 'liquid') {\n    const mode = staked.type === 'liquid' && !staked.instantAvailable\n      ? ApiLiquidUnstakeMode.BestRate\n      : ApiLiquidUnstakeMode.Default;\n\n    const params = await buildLiquidStakingWithdraw(network, address, amount, mode);\n\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: params.toAddress,\n      amount: params.amount,\n      data: params.payload,\n    });\n  } else {\n    const poolAddress = backendState.nominatorsPool.address;\n    result = await submitTransfer({\n      accountId,\n      password,\n      toAddress: toBase64Address(poolAddress, true, network),\n      amount: ONE_TON,\n      data: UNSTAKE_COMMENT,\n    });\n  }\n\n  return result;\n}\n\nexport async function buildLiquidStakingWithdraw(\n  network: ApiNetwork,\n  address: string,\n  amount: bigint,\n  mode: ApiLiquidUnstakeMode = ApiLiquidUnstakeMode.Default,\n): Promise<TonTransferParams> {\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, address, LIQUID_JETTON);\n\n  const payload = buildLiquidStakingWithdrawBody({\n    amount,\n    responseAddress: address,\n    fillOrKill: mode === ApiLiquidUnstakeMode.Instant,\n    waitTillRoundEnd: mode === ApiLiquidUnstakeMode.BestRate,\n  });\n\n  return {\n    amount: ONE_TON,\n    toAddress: tokenWalletAddress,\n    payload,\n  };\n}\n\nexport async function getStakingState(\n  accountId: string,\n  backendState: ApiBackendStakingState,\n): Promise<ApiStakingState> {\n  const commonData = getStakingCommonCache();\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const { currentRate, collection } = commonData.liquid;\n  const tokenBalance = await getLiquidStakingTokenBalance(accountId);\n  let unstakeAmount = 0n;\n\n  if (collection) {\n    const nfts = await apiDb.nfts.where({\n      accountId,\n      collectionAddress: collection,\n    }).toArray();\n\n    for (const nft of nfts) {\n      const billAmount = nft.name?.match(/Bill for (?<amount>[\\d.]+) Pool Jetton/)?.groups?.amount;\n      if (billAmount) {\n        unstakeAmount += fromDecimal(billAmount);\n      }\n    }\n  }\n\n  const { loyaltyType, shouldUseNominators } = backendState;\n\n  const accountCache = getAccountCache(accountId, address);\n  const stakedAt = Math.max(accountCache.stakedAt ?? 0, backendState.stakedAt ?? 0);\n\n  const isInstantUnstake = Date.now() - stakedAt > VALIDATION_PERIOD_MS;\n  const liquidAvailable = isInstantUnstake ? commonData.liquid.available : 0n;\n\n  let liquidApy = commonData.liquid.apy;\n  if (loyaltyType && loyaltyType in commonData.liquid.loyaltyApy) {\n    liquidApy = commonData.liquid.loyaltyApy[loyaltyType];\n  }\n\n  if (tokenBalance > 0n || unstakeAmount > 0n) {\n    const fullTokenAmount = tokenBalance + unstakeAmount;\n    const amount = bigintMultiplyToNumber(fullTokenAmount, currentRate);\n\n    return {\n      type: 'liquid',\n      tokenAmount: tokenBalance,\n      amount,\n      unstakeRequestAmount: unstakeAmount,\n      apy: liquidApy,\n      instantAvailable: liquidAvailable,\n    };\n  }\n\n  const poolAddress = backendState.nominatorsPool.address;\n\n  if (backendState.type === 'nominators') {\n    const nominatorPool = getPoolContract(network, poolAddress);\n    const nominators = await nominatorPool.getListNominators();\n    const addressObject = Address.parse(address);\n    const currentNominator = nominators.find((n) => n.address.equals(addressObject));\n\n    if (currentNominator) {\n      return {\n        type: 'nominators',\n        amount: backendState.balance,\n        pendingDepositAmount: currentNominator.pendingDepositAmount,\n        isUnstakeRequested: currentNominator.withdrawRequested,\n      };\n    }\n  }\n\n  if (shouldUseNominators) {\n    return {\n      type: 'nominators',\n      amount: 0n,\n      pendingDepositAmount: 0n,\n      isUnstakeRequested: false,\n    };\n  } else {\n    return {\n      type: 'liquid',\n      tokenAmount: 0n,\n      amount: 0n,\n      unstakeRequestAmount: 0n,\n      apy: liquidApy,\n      instantAvailable: liquidAvailable,\n    };\n  }\n}\n\nfunction getPoolContract(network: ApiNetwork, poolAddress: string) {\n  return getTonClient(network).open(new NominatorPool(Address.parse(poolAddress)));\n}\n\nasync function getLiquidStakingTokenBalance(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  if (network !== 'mainnet') {\n    return 0n;\n  }\n\n  const address = await fetchStoredAddress(accountId);\n  const walletAddress = await resolveTokenWalletAddress(network, address, LIQUID_JETTON);\n  const isInitialized = await isAddressInitialized(network, walletAddress);\n\n  if (!isInitialized) {\n    return 0n;\n  }\n\n  return getTokenBalance(network, walletAddress);\n}\n","import type { ApiNetwork, ApiSwapBuildRequest, ApiTokensTransferPayload } from '../../types';\nimport type { TonTransferParams } from './types';\n\nimport { SWAP_FEE_ADDRESS, TON_SYMBOL } from '../../../config';\nimport { assert } from '../../../util/assert';\nimport { fromDecimal } from '../../../util/decimals';\nimport { parsePayloadBase64 } from './util/metadata';\nimport { resolveTokenWalletAddress, toBase64Address } from './util/tonCore';\nimport { findTokenByMinter } from './tokens';\nimport { getContractInfo } from './wallet';\n\nconst MEGATON_WTON_MINTER = 'EQCajaUU1XXSAjTD-xOV7pE49fGtg4q8kF3ELCOJtGvQFQ2C';\nconst MAX_NETWORK_FEE = 1000000000n; // 1 TON\n\nexport async function validateDexSwapTransfers(\n  network: ApiNetwork,\n  address: string,\n  request: ApiSwapBuildRequest,\n  transfers: TonTransferParams[],\n) {\n  assert(transfers.length <= 2);\n\n  const [mainTransfer, feeTransfer] = transfers;\n\n  if (request.from === TON_SYMBOL) {\n    const maxAmount = fromDecimal(request.fromAmount) + MAX_NETWORK_FEE;\n    const { isSwapAllowed, codeHash } = await getContractInfo(network, mainTransfer.toAddress);\n\n    assert(!!isSwapAllowed, `Not allowed swap contract: ${codeHash} ${mainTransfer.toAddress}`);\n    assert(mainTransfer.amount <= maxAmount);\n\n    if (feeTransfer) {\n      assert(feeTransfer.amount <= mainTransfer.amount);\n      assert(feeTransfer.amount + mainTransfer.amount < maxAmount);\n      assert(toBase64Address(feeTransfer.toAddress, false) === SWAP_FEE_ADDRESS);\n    }\n  } else {\n    const token = findTokenByMinter(request.from)!;\n    assert(!!token);\n\n    const maxAmount = fromDecimal(request.fromAmount, token.decimals);\n    const maxTonAmount = MAX_NETWORK_FEE;\n\n    const walletAddress = await resolveTokenWalletAddress(network, address, token.minterAddress!);\n    const parsedPayload = await parsePayloadBase64(network, mainTransfer.toAddress, mainTransfer.payload as string);\n\n    let destination: string;\n    let tokenAmount = 0n;\n\n    if (mainTransfer.toAddress === MEGATON_WTON_MINTER) {\n      destination = mainTransfer.toAddress;\n      assert(mainTransfer.toAddress === token.minterAddress);\n    } else {\n      assert(mainTransfer.toAddress === walletAddress);\n      assert(['tokens:transfer', 'tokens:transfer-non-standard'].includes(parsedPayload.type));\n\n      ({ amount: tokenAmount, destination } = parsedPayload as ApiTokensTransferPayload);\n      assert(tokenAmount <= maxAmount);\n    }\n\n    assert(mainTransfer.amount < maxTonAmount);\n\n    const { isSwapAllowed } = await getContractInfo(network, destination);\n\n    assert(!!isSwapAllowed);\n\n    if (feeTransfer) {\n      const feePayload = await parsePayloadBase64(network, feeTransfer.toAddress, feeTransfer.payload as string);\n\n      assert(feeTransfer.amount + mainTransfer.amount < maxTonAmount);\n      assert(feeTransfer.toAddress === walletAddress);\n      assert(['tokens:transfer', 'tokens:transfer-non-standard'].includes(feePayload.type));\n\n      const { amount: tokenFeeAmount, destination: feeDestination } = feePayload as ApiTokensTransferPayload;\n\n      assert(tokenAmount + tokenFeeAmount <= maxAmount);\n      assert(toBase64Address(feeDestination, false) === SWAP_FEE_ADDRESS);\n    }\n  }\n}\n","import type { JettonBalance } from 'tonapi-sdk-js';\nimport { Address } from '@ton/core';\n\nimport type {\n  ApiBaseToken, ApiNetwork, ApiToken, ApiTokenSimple,\n} from '../../types';\nimport type { AnyPayload, ApiTransactionExtra, JettonMetadata } from './types';\n\nimport { DEFAULT_DECIMAL_PLACES, TON_SYMBOL, TONCOIN_SLUG } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { logDebugError } from '../../../util/logs';\nimport { fixIpfsUrl } from '../../../util/metadata';\nimport { buildTokenSlug } from './util';\nimport {\n  fetchJettonMetadata,\n  fixBase64ImageData,\n  parseJettonWalletMsgBody,\n} from './util/metadata';\nimport { fetchJettonBalances } from './util/tonapiio';\nimport {\n  buildTokenTransferBody,\n  getTonClient,\n  resolveTokenMinterAddress,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonCore';\nimport { JettonWallet } from './contracts/JettonWallet';\nimport { fetchStoredAddress } from '../../common/accounts';\nimport {\n  DEFAULT_DECIMALS,\n  TOKEN_TRANSFER_TONCOIN_AMOUNT,\n  TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT,\n} from './constants';\n\nexport type TokenBalanceParsed = {\n  slug: string;\n  balance: bigint;\n  token: ApiTokenSimple;\n  jettonWallet: string;\n};\n\nconst KNOWN_TOKENS: ApiBaseToken[] = [\n  {\n    slug: TONCOIN_SLUG,\n    name: 'Toncoin',\n    cmcSlug: TONCOIN_SLUG,\n    symbol: TON_SYMBOL,\n    decimals: DEFAULT_DECIMAL_PLACES,\n  },\n];\n\nconst knownTokens = {} as Record<string, ApiToken>;\naddKnownTokens(KNOWN_TOKENS);\n\nexport async function getAccountTokenBalances(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return getTokenBalances(network, address);\n}\n\nexport async function getTokenBalances(network: ApiNetwork, address: string) {\n  const balancesRaw: Array<JettonBalance> = await fetchJettonBalances(network, address);\n  return balancesRaw.map((balance) => parseTokenBalance(network, balance)).filter(Boolean);\n}\n\nexport async function getAddressTokenBalances(address: string, network: ApiNetwork) {\n  const balancesRaw: Array<JettonBalance> = await fetchJettonBalances(network, address);\n  return balancesRaw.map((balance) => parseTokenBalance(network, balance)).filter(Boolean);\n}\n\nfunction parseTokenBalance(network: ApiNetwork, balanceRaw: JettonBalance): TokenBalanceParsed | undefined {\n  if (!balanceRaw.jetton) {\n    return undefined;\n  }\n\n  try {\n    const { balance, jetton, wallet_address: walletAddress } = balanceRaw;\n    const minterAddress = toBase64Address(jetton.address, true, network);\n    const token = buildTokenByMetadata(minterAddress, jetton);\n\n    return {\n      slug: token.slug,\n      balance: BigInt(balance),\n      token,\n      jettonWallet: toBase64Address(walletAddress.address, undefined, network),\n    };\n  } catch (err) {\n    logDebugError('parseTokenBalance', err);\n    return undefined;\n  }\n}\n\nexport function parseTokenTransaction(\n  network: ApiNetwork,\n  tx: ApiTransactionExtra,\n  slug: string,\n  walletAddress: string,\n): ApiTransactionExtra | undefined {\n  const { extraData } = tx;\n  if (!extraData?.body) {\n    return undefined;\n  }\n\n  const parsedData = parseJettonWalletMsgBody(network, extraData.body);\n  if (!parsedData) {\n    return undefined;\n  }\n\n  const {\n    operation, jettonAmount, address, comment, encryptedComment,\n  } = parsedData;\n  const isIncoming = operation === 'InternalTransfer';\n\n  const fromAddress = isIncoming ? (address ?? tx.fromAddress) : walletAddress;\n  const toAddress = isIncoming ? walletAddress : address!;\n  const normalizedAddress = toBase64Address(isIncoming ? fromAddress : toAddress, true);\n\n  return {\n    ...tx,\n    slug,\n    fromAddress,\n    toAddress,\n    normalizedAddress,\n    amount: isIncoming ? jettonAmount : -jettonAmount,\n    comment,\n    encryptedComment,\n    isIncoming,\n  };\n}\n\nexport async function buildTokenTransfer(\n  network: ApiNetwork,\n  tokenAddress: string,\n  fromAddress: string,\n  toAddress: string,\n  amount: bigint,\n  payload?: AnyPayload,\n) {\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, fromAddress, tokenAddress);\n  const realTokenAddress = await resolveTokenMinterAddress(network, tokenWalletAddress);\n  if (tokenAddress !== realTokenAddress) {\n    throw new Error('Invalid contract');\n  }\n\n  const tokenWallet = getTokenWallet(network, tokenWalletAddress);\n\n  payload = buildTokenTransferBody({\n    tokenAmount: amount,\n    toAddress,\n    forwardAmount: TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT,\n    forwardPayload: payload,\n    responseAddress: fromAddress,\n  });\n\n  return {\n    tokenWallet,\n    amount: TOKEN_TRANSFER_TONCOIN_AMOUNT,\n    toAddress: tokenWalletAddress,\n    payload,\n  };\n}\n\nexport function resolveTokenBySlug(slug: string) {\n  return knownTokens[slug]!;\n}\n\nexport function findTokenByMinter(minter: string) {\n  return Object.values(knownTokens).find((token) => token.minterAddress === minter);\n}\n\nexport function getTokenWallet(network: ApiNetwork, tokenAddress: string) {\n  return getTonClient(network).open(new JettonWallet(Address.parse(tokenAddress)));\n}\n\nexport function getKnownTokens() {\n  return knownTokens;\n}\n\nexport function addKnownTokens(tokens: ApiBaseToken[]) {\n  for (const token of tokens) {\n    if (token.slug in knownTokens) continue;\n\n    addKnownToken({\n      ...token,\n      quote: {\n        slug: token.slug,\n        price: 0,\n        priceUsd: 0,\n        percentChange24h: 0,\n      },\n    });\n  }\n}\n\nexport function addKnownToken(token: ApiToken) {\n  knownTokens[token.slug] = token;\n}\n\nexport async function fetchToken(network: ApiNetwork, address: string) {\n  const metadata = await fetchJettonMetadata(network, address);\n\n  return buildTokenByMetadata(address, metadata);\n}\n\nfunction buildTokenByMetadata(address: string, metadata: JettonMetadata): ApiBaseToken {\n  const {\n    name,\n    symbol,\n    image,\n    image_data: imageData,\n    decimals,\n  } = metadata;\n\n  return {\n    slug: buildTokenSlug(address),\n    name,\n    symbol,\n    decimals: decimals === undefined ? DEFAULT_DECIMALS : Number(decimals),\n    minterAddress: address,\n    image: (image && fixIpfsUrl(image)) || (imageData && fixBase64ImageData(imageData)) || undefined,\n  };\n}\n","import type { OpenedContract } from '@ton/core';\nimport {\n  beginCell, Cell, external, internal, SendMode, storeMessage,\n} from '@ton/core';\n\nimport type { DieselStatus } from '../../../global/types';\nimport type {\n  ApiActivity,\n  ApiAnyDisplayError,\n  ApiNetwork,\n  ApiNft,\n  ApiSignedTransfer,\n  ApiTransaction,\n  ApiTransactionActivity,\n  ApiTransactionType,\n  ApiTxIdBySlug,\n} from '../../types';\nimport type { JettonWallet } from './contracts/JettonWallet';\nimport type {\n  AnyPayload,\n  ApiCheckTransactionDraftResult,\n  ApiSubmitMultiTransferResult,\n  ApiSubmitTransferResult,\n  ApiSubmitTransferWithDieselResult,\n  ApiTransactionExtra,\n  TonTransferParams,\n} from './types';\nimport type { TonWallet } from './util/tonCore';\nimport { ApiCommonError, ApiTransactionDraftError, ApiTransactionError } from '../../types';\n\nimport { DIESEL_ADDRESS, ONE_TON, TONCOIN_SLUG } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { bigintMultiplyToNumber } from '../../../util/bigint';\nimport { compareActivities } from '../../../util/compareActivities';\nimport { fromDecimal } from '../../../util/decimals';\nimport { buildCollectionByKey, omit } from '../../../util/iteratees';\nimport { logDebugError } from '../../../util/logs';\nimport { pause } from '../../../util/schedulers';\nimport withCacheAsync from '../../../util/withCacheAsync';\nimport { parseTxId } from './util';\nimport { fetchAddressBook, fetchLatestTxId, fetchTransactions } from './util/apiV3';\nimport { decryptMessageComment, encryptMessageComment } from './util/encryption';\nimport { buildNft, parseWalletTransactionBody } from './util/metadata';\nimport { sendExternal } from './util/sendExternal';\nimport { fetchNftItems } from './util/tonapiio';\nimport {\n  commentToBytes,\n  getTonClient,\n  getTonWalletContract,\n  getWalletPublicKey,\n  packBytesAsSnake,\n  packBytesAsSnakeForEncryptedData,\n  parseAddress,\n  parseBase64,\n  resolveTokenWalletAddress,\n  toBase64Address,\n} from './util/tonCore';\nimport { fetchStoredAccount, fetchStoredAddress } from '../../common/accounts';\nimport { callBackendGet } from '../../common/backend';\nimport { updateTransactionMetadata } from '../../common/helpers';\nimport { base64ToBytes, isKnownStakingPool } from '../../common/utils';\nimport { ApiServerError, handleServerError } from '../../errors';\nimport { resolveAddress } from './address';\nimport { fetchKeyPair, fetchPrivateKey } from './auth';\nimport {\n  ATTEMPTS, FEE_FACTOR, STAKE_COMMENT, TRANSFER_TIMEOUT_SEC, UNSTAKE_COMMENT,\n} from './constants';\nimport {\n  buildTokenTransfer, findTokenByMinter, parseTokenTransaction, resolveTokenBySlug,\n} from './tokens';\nimport {\n  getContractInfo, getWalletBalance, getWalletInfo, pickAccountWallet,\n} from './wallet';\n\nconst GET_TRANSACTIONS_LIMIT = 50;\nconst GET_TRANSACTIONS_MAX_LIMIT = 100;\nconst WAIT_TRANSFER_TIMEOUT = 5 * 60 * 1000; // 5 min\nconst WAIT_TRANSFER_PAUSE = 1000; // 1 sec.\nconst WAIT_TRANSACTION_PAUSE = 500; // 0.5 sec.\n\nconst MAX_BALANCE_WITH_CHECK_DIESEL = 220000000n; // 0.22 TON\nconst PENDING_DIESEL_TIMEOUT = 15 * 60 * 1000; // 15 min\n\nconst pendingTransfers: Record<string, {\n  timestamp: number;\n  seqno: number;\n  promise: Promise<any>;\n}> = {};\n\nexport const checkHasTransaction = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  const transactions = await fetchTransactions(network, address, 1);\n  return Boolean(transactions.length);\n});\n\nexport async function checkTransactionDraft(\n  options: {\n    accountId: string;\n    toAddress: string;\n    amount: bigint;\n    tokenAddress?: string;\n    data?: AnyPayload;\n    stateInit?: Cell;\n    shouldEncrypt?: boolean;\n    isBase64Data?: boolean;\n  },\n): Promise<ApiCheckTransactionDraftResult> {\n  const {\n    accountId,\n    tokenAddress,\n    stateInit,\n    shouldEncrypt,\n    isBase64Data,\n  } = options;\n  let { toAddress, amount, data } = options;\n\n  const { network } = parseAccountId(accountId);\n\n  let result: ApiCheckTransactionDraftResult = {};\n\n  try {\n    result = await checkToAddress(network, toAddress);\n\n    if ('error' in result) {\n      return result;\n    }\n\n    toAddress = result.resolvedAddress!;\n\n    const { isInitialized } = await getContractInfo(network, toAddress);\n\n    if (result.isBounceable && !isInitialized) {\n      result.isToAddressNew = !(await checkHasTransaction(network, toAddress));\n      return {\n        ...result,\n        error: ApiTransactionDraftError.InactiveContract,\n      };\n    }\n\n    result.resolvedAddress = toAddress;\n\n    if (amount < 0n) {\n      return {\n        ...result,\n        error: ApiTransactionDraftError.InvalidAmount,\n      };\n    }\n\n    const wallet = await pickAccountWallet(accountId);\n    if (!wallet) {\n      return {\n        ...result,\n        error: ApiCommonError.Unexpected,\n      };\n    }\n\n    if (typeof data === 'string' && isBase64Data) {\n      data = base64ToBytes(data);\n    }\n\n    if (data && typeof data === 'string' && shouldEncrypt) {\n      const toPublicKey = await getWalletPublicKey(network, toAddress);\n      if (!toPublicKey) {\n        return {\n          ...result,\n          error: ApiTransactionDraftError.WalletNotInitialized,\n        };\n      }\n    }\n\n    const account = await fetchStoredAccount(accountId);\n    const { address } = account;\n\n    if (data && typeof data === 'string' && !isBase64Data) {\n      data = commentToBytes(data);\n    }\n\n    let tokenBalance: bigint | undefined;\n\n    if (!tokenAddress) {\n      if (data instanceof Uint8Array) {\n        data = shouldEncrypt ? packBytesAsSnakeForEncryptedData(data) : packBytesAsSnake(data);\n      }\n    } else {\n      const tokenAmount: bigint = amount;\n      let tokenWallet: OpenedContract<JettonWallet>;\n      ({\n        tokenWallet,\n        amount,\n        toAddress,\n        payload: data,\n      } = await buildTokenTransfer(network, tokenAddress, address, toAddress, amount, data));\n\n      tokenBalance = await tokenWallet!.getJettonBalance();\n      if (tokenBalance < tokenAmount!) {\n        return {\n          ...result,\n          error: ApiTransactionDraftError.InsufficientBalance,\n        };\n      }\n    }\n\n    const { transaction } = await signTransaction({\n      network,\n      wallet,\n      toAddress,\n      amount,\n      payload: data,\n      stateInit,\n      shouldEncrypt,\n    });\n\n    const realFee = await calculateFee(network, wallet, transaction, account.isInitialized);\n    result.fee = bigintMultiplyToNumber(realFee, FEE_FACTOR);\n\n    const balance = await getWalletBalance(network, wallet);\n\n    const isFullTonBalance = !tokenAddress && balance === amount;\n    const isEnoughBalance = isFullTonBalance\n      ? balance > realFee\n      : balance >= amount + realFee;\n\n    if (network === 'mainnet' && tokenAddress && balance < MAX_BALANCE_WITH_CHECK_DIESEL) {\n      const {\n        status: dieselStatus,\n        amount: dieselAmount,\n        isAwaitingNotExpiredPrevious,\n      } = await fetchEstimateDiesel(accountId, tokenAddress) || {};\n\n      if (!isEnoughBalance || isAwaitingNotExpiredPrevious) {\n        result.dieselStatus = dieselStatus;\n        result.dieselAmount = dieselAmount;\n\n        if (dieselStatus !== 'not-available') {\n          return result;\n        }\n      }\n    }\n\n    if (!isEnoughBalance) {\n      return {\n        ...result,\n        error: ApiTransactionDraftError.InsufficientBalance,\n      };\n    }\n\n    return result;\n  } catch (err: any) {\n    return {\n      ...handleServerError(err),\n      ...result,\n    };\n  }\n}\n\nfunction estimateDiesel(address: string, tokenAddress: string) {\n  return callBackendGet<{\n    status: DieselStatus;\n    amount?: string;\n    pendingCreatedAt?: string;\n  }>('/diesel/estimate', { address, tokenAddress });\n}\n\nexport async function checkToAddress(network: ApiNetwork, toAddress: string) {\n  const result: {\n    addressName?: string;\n    isScam?: boolean;\n    resolvedAddress?: string;\n    isToAddressNew?: boolean;\n    isBounceable?: boolean;\n    isMemoRequired?: boolean;\n  } = {};\n\n  const resolved = await resolveAddress(network, toAddress);\n  if (resolved) {\n    result.addressName = resolved.name;\n    result.resolvedAddress = resolved.address;\n    result.isMemoRequired = resolved.isMemoRequired;\n    result.isScam = resolved.isScam;\n    toAddress = resolved.address;\n  } else {\n    return {\n      ...result,\n      error: ApiTransactionDraftError.DomainNotResolved,\n    };\n  }\n\n  const {\n    isValid, isUserFriendly, isTestOnly, isBounceable,\n  } = parseAddress(toAddress);\n\n  result.isBounceable = isBounceable;\n\n  if (!isValid) {\n    return {\n      ...result,\n      error: ApiTransactionDraftError.InvalidToAddress,\n    };\n  }\n\n  const regex = /[+=/]/;\n  const isUrlSafe = !regex.test(toAddress);\n\n  if (!isUserFriendly || !isUrlSafe || (network === 'mainnet' && isTestOnly)) {\n    return {\n      ...result,\n      error: ApiTransactionDraftError.InvalidAddressFormat,\n    };\n  }\n\n  return result;\n}\n\nexport async function submitTransfer(options: {\n  accountId: string;\n  password: string;\n  toAddress: string;\n  amount: bigint;\n  data?: AnyPayload;\n  tokenAddress?: string;\n  stateInit?: Cell;\n  shouldEncrypt?: boolean;\n  isBase64Data?: boolean;\n}): Promise<ApiSubmitTransferResult> {\n  const {\n    accountId,\n    password,\n    tokenAddress,\n    stateInit,\n    shouldEncrypt,\n    isBase64Data,\n  } = options;\n\n  let { toAddress, amount, data } = options;\n\n  const { network } = parseAccountId(accountId);\n\n  try {\n    const [wallet, account, keyPair] = await Promise.all([\n      pickAccountWallet(accountId),\n      fetchStoredAccount(accountId),\n      fetchKeyPair(accountId, password),\n    ]);\n    const { address: fromAddress } = account;\n    const { publicKey, secretKey } = keyPair!;\n\n    let encryptedComment: string | undefined;\n\n    if (typeof data === 'string') {\n      ({ payload: data, encryptedComment } = await stringToPayload({\n        network, toAddress, fromAddress, data, secretKey, publicKey, shouldEncrypt, isBase64Data,\n      }));\n    }\n\n    if (!tokenAddress) {\n      if (data instanceof Uint8Array) {\n        data = shouldEncrypt ? packBytesAsSnakeForEncryptedData(data) : packBytesAsSnake(data);\n      }\n    } else {\n      ({\n        amount,\n        toAddress,\n        payload: data,\n      } = await buildTokenTransfer(network, tokenAddress, fromAddress, toAddress, amount, data));\n    }\n\n    await waitPendingTransfer(network, fromAddress);\n\n    const { balance } = await getWalletInfo(network, wallet!);\n    const isFullTonBalance = !tokenAddress && balance === amount;\n\n    const { seqno, transaction } = await signTransaction({\n      network,\n      wallet,\n      toAddress,\n      amount,\n      payload: data,\n      stateInit,\n      privateKey: secretKey,\n      isFullBalance: isFullTonBalance,\n      shouldEncrypt,\n    });\n\n    const fee = await calculateFee(network, wallet!, transaction, account.isInitialized);\n\n    const isEnoughBalance = isFullTonBalance\n      ? balance > fee\n      : balance >= amount + fee;\n\n    if (!isEnoughBalance) {\n      return { error: ApiTransactionError.InsufficientBalance };\n    }\n\n    const client = getTonClient(network);\n    const { msgHash, boc } = await sendExternal(client, wallet!, transaction);\n\n    addPendingTransfer(network, fromAddress, seqno, boc);\n\n    return {\n      amount, seqno, encryptedComment, toAddress, msgHash,\n    };\n  } catch (err: any) {\n    logDebugError('submitTransfer', err);\n\n    return { error: resolveTransactionError(err) };\n  }\n}\n\nexport async function submitTransferWithDiesel(options: {\n  accountId: string;\n  password: string;\n  toAddress: string;\n  amount: bigint;\n  data?: AnyPayload;\n  tokenAddress: string;\n  shouldEncrypt?: boolean;\n  dieselAmount: bigint;\n}): Promise<ApiSubmitTransferWithDieselResult> {\n  const {\n    toAddress,\n    amount,\n    accountId,\n    password,\n    tokenAddress,\n    shouldEncrypt,\n    dieselAmount,\n  } = options;\n\n  let { data } = options;\n\n  const { network } = parseAccountId(accountId);\n\n  const [account, keyPair] = await Promise.all([\n    fetchStoredAccount(accountId),\n    fetchKeyPair(accountId, password),\n  ]);\n\n  const { address: fromAddress } = account;\n  const { publicKey, secretKey } = keyPair!;\n\n  let encryptedComment: string | undefined;\n\n  if (typeof data === 'string') {\n    ({ payload: data, encryptedComment } = await stringToPayload({\n      network, toAddress, fromAddress, data, secretKey, publicKey, shouldEncrypt,\n    }));\n  }\n\n  const messages: TonTransferParams[] = [\n    omit(await buildTokenTransfer(network, tokenAddress, fromAddress, toAddress, amount, data), ['tokenWallet']),\n    omit(await buildTokenTransfer(network, tokenAddress, fromAddress, DIESEL_ADDRESS, dieselAmount), ['tokenWallet']),\n  ];\n\n  const result = await submitMultiTransfer(accountId, password, messages, undefined, true);\n\n  return { ...result, encryptedComment };\n}\n\nasync function stringToPayload({\n  network, toAddress, data, shouldEncrypt, publicKey, secretKey, fromAddress, isBase64Data,\n}: {\n  network: ApiNetwork;\n  data: string;\n  shouldEncrypt?: boolean;\n  toAddress: string;\n  publicKey: Uint8Array;\n  secretKey: Uint8Array;\n  fromAddress: string;\n  isBase64Data?: boolean;\n}): Promise<{\n    payload?: Uint8Array | Cell;\n    encryptedComment?: string;\n  }> {\n  let payload: Uint8Array | Cell | undefined;\n  let encryptedComment: string | undefined;\n\n  if (!data) {\n    payload = undefined;\n  } else if (isBase64Data) {\n    payload = parseBase64(data);\n  } else if (shouldEncrypt) {\n    const toPublicKey = (await getWalletPublicKey(network, toAddress))!;\n    payload = await encryptMessageComment(data, publicKey, toPublicKey, secretKey, fromAddress);\n    encryptedComment = Buffer.from(payload.slice(4)).toString('base64');\n  } else {\n    payload = commentToBytes(data);\n  }\n\n  return { payload, encryptedComment };\n}\n\nexport function resolveTransactionError(error: any): ApiAnyDisplayError | string {\n  if (error instanceof ApiServerError) {\n    if (error.message.includes('exitcode=35,')) {\n      return ApiTransactionError.IncorrectDeviceTime;\n    } else if (error.statusCode === 400) {\n      return error.message;\n    } else if (error.displayError) {\n      return error.displayError;\n    }\n  }\n  return ApiTransactionError.UnsuccesfulTransfer;\n}\n\nasync function signTransaction({\n  network,\n  wallet,\n  toAddress,\n  amount,\n  payload,\n  stateInit,\n  privateKey = new Uint8Array(64),\n  isFullBalance,\n  expireAt,\n  shouldEncrypt,\n}: {\n  network: ApiNetwork;\n  wallet: TonWallet;\n  toAddress: string;\n  amount: bigint;\n  payload?: AnyPayload;\n  stateInit?: Cell;\n  privateKey?: Uint8Array;\n  isFullBalance?: boolean;\n  expireAt?: number;\n  shouldEncrypt?: boolean;\n}) {\n  const { seqno } = await getWalletInfo(network, wallet);\n\n  if (!expireAt) {\n    expireAt = Math.round(Date.now() / 1000) + TRANSFER_TIMEOUT_SEC;\n  }\n\n  if (payload instanceof Uint8Array) {\n    payload = shouldEncrypt\n      ? packBytesAsSnakeForEncryptedData(payload) as Cell\n      : packBytesAsSnake(payload, 0) as Cell;\n  }\n\n  const init = stateInit ? {\n    code: stateInit.refs[0],\n    data: stateInit.refs[1],\n  } : undefined;\n\n  const sendMode = isFullBalance\n    ? SendMode.CARRY_ALL_REMAINING_BALANCE\n    : SendMode.PAY_GAS_SEPARATELY + SendMode.IGNORE_ERRORS;\n\n  const transaction = wallet.createTransfer({\n    seqno,\n    secretKey: Buffer.from(privateKey),\n    messages: [internal({\n      value: amount,\n      to: toAddress,\n      body: payload,\n      init,\n      bounce: parseAddress(toAddress).isBounceable,\n    })],\n    sendMode,\n    timeout: expireAt,\n  });\n\n  return { seqno, transaction };\n}\n\nexport async function getAccountNewestTxId(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return fetchNewestTxId(network, address);\n}\n\nexport async function getAccountTransactionSlice(\n  accountId: string,\n  toTxId?: string,\n  fromTxId?: string,\n  limit?: number,\n) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  let transactions = await fetchTransactions(\n    network, address, limit ?? GET_TRANSACTIONS_LIMIT, toTxId, fromTxId,\n  );\n\n  transactions = await Promise.all(\n    transactions.map((transaction) => parseWalletTransactionBody(network, transaction)),\n  );\n\n  await populateTransactions(network, transactions);\n\n  return transactions\n    .map(updateTransactionType)\n    .map(updateTransactionMetadata)\n    .map(omitExtraData)\n    .map(transactionToActivity);\n}\n\nasync function populateTransactions(network: ApiNetwork, transactions: ApiTransactionExtra[]) {\n  const nftAddresses = new Set<string>();\n  const addressesForFixFormat = new Set<string>();\n\n  for (const { extraData: { parsedPayload } } of transactions) {\n    if (parsedPayload?.type === 'nft:ownership-assigned') {\n      nftAddresses.add(parsedPayload.nftAddress);\n      addressesForFixFormat.add(parsedPayload.prevOwner);\n    } else if (parsedPayload?.type === 'nft:transfer') {\n      nftAddresses.add(parsedPayload.nftAddress);\n      addressesForFixFormat.add(parsedPayload.newOwner);\n    }\n  }\n\n  if (nftAddresses.size) {\n    const [rawNfts, addressBook] = await Promise.all([\n      fetchNftItems(network, [...nftAddresses]),\n      fetchAddressBook(network, [...addressesForFixFormat]),\n    ]);\n\n    const nfts = rawNfts\n      .map((rawNft) => buildNft(network, rawNft))\n      .filter(Boolean) as ApiNft[];\n\n    const nftsByAddress = buildCollectionByKey(nfts, 'address');\n\n    for (const transaction of transactions) {\n      const { extraData: { parsedPayload } } = transaction;\n\n      if (parsedPayload?.type === 'nft:ownership-assigned') {\n        const nft = nftsByAddress[parsedPayload.nftAddress];\n        transaction.nft = nft;\n        if (nft?.isScam) {\n          transaction.metadata = { ...transaction.metadata, isScam: true };\n        } else {\n          transaction.fromAddress = addressBook[parsedPayload.prevOwner].user_friendly;\n        }\n      } else if (parsedPayload?.type === 'nft:transfer') {\n        const nft = nftsByAddress[parsedPayload.nftAddress];\n        transaction.nft = nft;\n        if (nft?.isScam) {\n          transaction.metadata = { ...transaction.metadata, isScam: true };\n        } else {\n          transaction.toAddress = addressBook[parsedPayload.newOwner].user_friendly;\n        }\n      }\n    }\n  }\n}\n\nexport async function getMergedTransactionSlice(accountId: string, lastTxIds: ApiTxIdBySlug, limit: number) {\n  // eslint-disable-next-line prefer-const\n  let { toncoin: lastTonTxId, ...tokenLastTxIds } = lastTxIds;\n  const tonTxs = await getAccountTransactionSlice(accountId, lastTonTxId, undefined, limit);\n\n  if (!tonTxs.length) {\n    return [];\n  }\n\n  lastTonTxId = tonTxs[tonTxs.length - 1].txId;\n  const lastTonTxLt = parseTxId(lastTonTxId).lt;\n\n  const results = await Promise.all(Object.entries(tokenLastTxIds).map(([slug, lastTxId]) => {\n    if (lastTxId && parseTxId(lastTxId).lt < lastTonTxLt) {\n      return [];\n    }\n\n    return getTokenTransactionSlice(accountId, slug, lastTxId, lastTonTxId, GET_TRANSACTIONS_MAX_LIMIT);\n  }));\n\n  const allTxs = [...tonTxs, ...results.flat()];\n  allTxs.sort(compareActivities);\n\n  return allTxs;\n}\n\nexport async function getTokenTransactionSlice(\n  accountId: string,\n  tokenSlug: string,\n  toTxId?: string,\n  fromTxId?: string,\n  limit?: number,\n): Promise<ApiTransactionActivity[]> {\n  if (tokenSlug === TONCOIN_SLUG) {\n    return getAccountTransactionSlice(accountId, toTxId, fromTxId, limit);\n  }\n\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  const minterAddress = resolveTokenBySlug(tokenSlug).minterAddress!;\n  const tokenWalletAddress = await resolveTokenWalletAddress(network, address, minterAddress);\n\n  const transactions = await fetchTransactions(\n    network, tokenWalletAddress, limit ?? GET_TRANSACTIONS_LIMIT, toTxId, fromTxId,\n  );\n\n  return transactions\n    .map((tx) => parseTokenTransaction(network, tx, tokenSlug, address))\n    .filter(Boolean)\n    .map(updateTransactionMetadata)\n    .map(omitExtraData)\n    .map(transactionToActivity);\n}\n\nfunction omitExtraData(tx: ApiTransactionExtra): ApiTransaction {\n  return omit(tx, ['extraData']);\n}\n\nfunction updateTransactionType(transaction: ApiTransactionExtra) {\n  const { amount, extraData } = transaction;\n  let { comment } = transaction;\n\n  const normalizedFromAddress = toBase64Address(transaction.fromAddress, true);\n  const normalizedToAddress = toBase64Address(transaction.toAddress, true);\n\n  let type: ApiTransactionType | undefined;\n\n  if (isKnownStakingPool(normalizedFromAddress) && amount > ONE_TON) {\n    type = 'unstake';\n  } else if (isKnownStakingPool(normalizedToAddress)) {\n    if (comment === STAKE_COMMENT) {\n      type = 'stake';\n    } else if (comment === UNSTAKE_COMMENT) {\n      type = 'unstakeRequest';\n    }\n  } else if (extraData?.parsedPayload && !transaction.metadata?.isScam) {\n    const payload = extraData.parsedPayload;\n\n    if (payload.type === 'tokens:burn' && payload.isLiquidUnstakeRequest) {\n      type = 'unstakeRequest';\n    } else if (payload.type === 'liquid-staking:deposit') {\n      type = 'stake';\n    } else if (payload.type === 'liquid-staking:withdrawal' || payload.type === 'liquid-staking:withdrawal-nft') {\n      type = 'unstake';\n    } else if (payload.type === 'nft:transfer') {\n      type = 'nftTransferred';\n      comment = payload.comment;\n    } else if (payload.type === 'nft:ownership-assigned') {\n      type = 'nftReceived';\n      comment = payload.comment;\n    }\n  }\n\n  return {\n    ...transaction,\n    type,\n    comment,\n  };\n}\n\nfunction transactionToActivity(transaction: ApiTransaction): ApiTransactionActivity {\n  return {\n    ...transaction,\n    kind: 'transaction',\n    id: transaction.txId,\n  };\n}\n\nexport async function checkMultiTransactionDraft(\n  accountId: string,\n  messages: TonTransferParams[],\n  withDiesel = false,\n) {\n  const { network } = parseAccountId(accountId);\n\n  const result: {\n    fee?: bigint;\n    totalAmount?: bigint;\n  } = {};\n\n  let totalAmount: bigint = 0n;\n\n  const account = await fetchStoredAccount(accountId);\n\n  try {\n    for (const { toAddress, amount } of messages) {\n      if (amount < 0n) {\n        return { ...result, error: ApiTransactionDraftError.InvalidAmount };\n      }\n\n      const isMainnet = network === 'mainnet';\n      const { isValid, isTestOnly } = parseAddress(toAddress);\n\n      if (!isValid || (isMainnet && isTestOnly)) {\n        return { ...result, error: ApiTransactionDraftError.InvalidToAddress };\n      }\n      totalAmount += amount;\n    }\n\n    const wallet = await pickAccountWallet(accountId);\n\n    if (!wallet) {\n      return { ...result, error: ApiCommonError.Unexpected };\n    }\n\n    const { balance } = await getWalletInfo(network, wallet);\n\n    const { transaction } = await signMultiTransaction(network, wallet, messages);\n\n    const realFee = await calculateFee(network, wallet, transaction, account.isInitialized);\n\n    // TODO Should be `0` for `withDiesel`?\n    result.totalAmount = totalAmount;\n    result.fee = bigintMultiplyToNumber(realFee, FEE_FACTOR);\n\n    if (!withDiesel && balance < totalAmount + realFee) {\n      return { ...result, error: ApiTransactionDraftError.InsufficientBalance };\n    }\n\n    return result as { fee: bigint; totalAmount: bigint };\n  } catch (err: any) {\n    return handleServerError(err);\n  }\n}\n\nexport async function submitMultiTransfer(\n  accountId: string,\n  password: string,\n  messages: TonTransferParams[],\n  expireAt?: number,\n  withDiesel = false,\n): Promise<ApiSubmitMultiTransferResult> {\n  const { network } = parseAccountId(accountId);\n\n  try {\n    const [wallet, account, privateKey] = await Promise.all([\n      pickAccountWallet(accountId),\n      fetchStoredAccount(accountId),\n      fetchPrivateKey(accountId, password),\n    ]);\n\n    const { address: fromAddress } = account;\n\n    let totalAmount = 0n;\n    messages.forEach((message) => {\n      totalAmount += BigInt(message.amount);\n    });\n\n    await waitPendingTransfer(network, fromAddress);\n\n    const { balance } = await getWalletInfo(network, wallet!);\n\n    const { seqno, transaction } = await signMultiTransaction(\n      network, wallet!, messages, privateKey, expireAt,\n    );\n\n    if (!withDiesel) {\n      const fee = await calculateFee(network, wallet!, transaction, account.isInitialized);\n      if (balance < totalAmount + fee) {\n        return { error: ApiTransactionError.InsufficientBalance };\n      }\n    }\n\n    const client = getTonClient(network);\n    const { msgHash, boc } = await sendExternal(client, wallet!, transaction, withDiesel);\n\n    if (!withDiesel) {\n      addPendingTransfer(network, fromAddress, seqno, boc);\n    }\n\n    const clearedMessages = messages.map((message) => {\n      if (typeof message.payload !== 'string' && typeof message.payload !== 'undefined') {\n        return omit(message, ['payload']);\n      }\n      return message;\n    });\n\n    return {\n      seqno,\n      amount: totalAmount.toString(),\n      messages: clearedMessages,\n      boc,\n      msgHash,\n    };\n  } catch (err) {\n    logDebugError('submitMultiTransfer', err);\n    return { error: resolveTransactionError(err) };\n  }\n}\n\nasync function signMultiTransaction(\n  network: ApiNetwork,\n  wallet: TonWallet,\n  messages: TonTransferParams[],\n  privateKey: Uint8Array = new Uint8Array(64),\n  expireAt?: number,\n) {\n  const { seqno } = await getWalletInfo(network, wallet);\n  if (!expireAt) {\n    expireAt = Math.round(Date.now() / 1000) + TRANSFER_TIMEOUT_SEC;\n  }\n\n  const preparedMessages = messages.map((message) => {\n    const {\n      amount, toAddress, stateInit, isBase64Payload,\n    } = message;\n    let { payload } = message;\n\n    if (isBase64Payload && typeof payload === 'string') {\n      payload = Cell.fromBase64(payload);\n    }\n\n    const init = stateInit ? {\n      code: stateInit.refs[0],\n      data: stateInit.refs[1],\n    } : undefined;\n\n    return internal({\n      value: amount,\n      to: toAddress,\n      body: payload as Cell | string | undefined, // TODO Fix Uint8Array type\n      bounce: parseAddress(toAddress).isBounceable,\n      init,\n    });\n  });\n\n  const transaction = wallet.createTransfer({\n    seqno,\n    secretKey: Buffer.from(privateKey),\n    messages: preparedMessages,\n    sendMode: SendMode.PAY_GAS_SEPARATELY + SendMode.IGNORE_ERRORS,\n    timeout: expireAt,\n  });\n\n  const externalMessage = toExternalMessage(wallet, seqno, transaction);\n\n  return { seqno, transaction, externalMessage };\n}\n\nfunction toExternalMessage(\n  contract: TonWallet,\n  seqno: number,\n  body: Cell,\n) {\n  return beginCell()\n    .storeWritable(\n      storeMessage(\n        external({\n          to: contract.address,\n          init: seqno === 0 ? contract.init : undefined,\n          body,\n        }),\n      ),\n    )\n    .endCell();\n}\n\nfunction addPendingTransfer(network: ApiNetwork, address: string, seqno: number, boc: string) {\n  const key = buildPendingTransferKey(network, address);\n  const timestamp = Date.now();\n  const promise = retrySendBoc({\n    network, address, boc, seqno, timestamp,\n  });\n\n  pendingTransfers[key] = {\n    timestamp,\n    seqno,\n    promise,\n  };\n}\n\nasync function retrySendBoc({\n  network, address, boc, seqno, timestamp,\n}: {\n  network: ApiNetwork;\n  address: string;\n  boc: string;\n  seqno: number;\n  timestamp: number;\n}) {\n  const tonClient = getTonClient(network);\n  const waitUntil = timestamp + WAIT_TRANSFER_TIMEOUT;\n\n  while (Date.now() < waitUntil) {\n    const error = await tonClient.sendFile(boc).catch((err) => String(err));\n\n    // Errors mean that `seqno` was changed or not enough of balance\n    if (error?.includes('exitcode=33') || error?.includes('inbound external message rejected by account')) {\n      return;\n    }\n\n    await pause(WAIT_TRANSFER_PAUSE);\n    const walletInfo = await getWalletInfo(network, address).catch(() => undefined);\n\n    // seqno here may change before exit code appears\n    if (walletInfo && walletInfo.seqno > seqno) {\n      return;\n    }\n\n    await pause(WAIT_TRANSFER_PAUSE);\n  }\n}\n\nexport async function waitPendingTransfer(network: ApiNetwork, address: string) {\n  const key = buildPendingTransferKey(network, address);\n  const pendingTransfer = pendingTransfers[key];\n  if (!pendingTransfer) return;\n\n  await pendingTransfer.promise;\n\n  delete pendingTransfers[key];\n}\n\nfunction buildPendingTransferKey(network: ApiNetwork, address: string) {\n  return `${network}:${address}`;\n}\n\nasync function calculateFee(network: ApiNetwork, wallet: TonWallet, transaction: Cell, isInitialized?: boolean) {\n  // eslint-disable-next-line no-null/no-null\n  const { code = null, data = null } = !isInitialized ? wallet.init : {};\n\n  const { source_fees: fees } = await getTonClient(network).estimateExternalMessageFee(wallet.address, {\n    body: transaction,\n    initCode: code,\n    initData: data,\n    ignoreSignature: true,\n  });\n\n  return BigInt(fees.in_fwd_fee + fees.storage_fee + fees.gas_fee + fees.fwd_fee);\n}\n\nexport async function sendSignedMessage(accountId: string, message: ApiSignedTransfer) {\n  const { network } = parseAccountId(accountId);\n  const { address: fromAddress, publicKey, version } = await fetchStoredAccount(accountId);\n  const client = getTonClient(network);\n  const wallet = client.open(getTonWalletContract(publicKey, version!));\n\n  const { base64, seqno } = message;\n  const { msgHash, boc } = await sendExternal(client, wallet, Cell.fromBase64(base64));\n\n  addPendingTransfer(network, fromAddress, seqno, boc);\n\n  return msgHash;\n}\n\nexport async function sendSignedMessages(accountId: string, messages: ApiSignedTransfer[]) {\n  const { network } = parseAccountId(accountId);\n  const { address: fromAddress, publicKey, version } = await fetchStoredAccount(accountId);\n  const client = getTonClient(network);\n  const wallet = client.open(getTonWalletContract(publicKey, version!));\n\n  const attempts = ATTEMPTS + messages.length;\n  let index = 0;\n  let attempt = 0;\n\n  let firstBoc: string | undefined;\n\n  const msgHashes: string[] = [];\n  while (index < messages.length && attempt < attempts) {\n    const { base64, seqno } = messages[index];\n    try {\n      await waitPendingTransfer(network, fromAddress);\n\n      const { msgHash, boc } = await sendExternal(client, wallet, Cell.fromBase64(base64));\n      msgHashes.push(msgHash);\n\n      if (index === 0) {\n        firstBoc = boc;\n      }\n\n      addPendingTransfer(network, fromAddress, seqno, boc);\n\n      index++;\n    } catch (err) {\n      logDebugError('sendSignedMessages', err);\n    }\n    attempt++;\n  }\n\n  return { successNumber: index, firstBoc, msgHashes };\n}\n\nexport async function decryptComment(\n  accountId: string, encryptedComment: string, fromAddress: string, password: string,\n) {\n  const keyPair = await fetchKeyPair(accountId, password);\n  if (!keyPair) {\n    return undefined;\n  }\n\n  const { secretKey, publicKey } = keyPair;\n\n  const buffer = Buffer.from(encryptedComment, 'base64');\n\n  return decryptMessageComment(buffer, publicKey, secretKey, fromAddress);\n}\n\nexport async function waitUntilTransactionAppears(network: ApiNetwork, address: string, txId: string) {\n  const { lt } = parseTxId(txId);\n\n  if (lt === 0) {\n    return;\n  }\n\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const latestTxId = await fetchLatestTxId(network, address);\n    if (latestTxId && parseTxId(latestTxId).lt >= lt) {\n      return;\n    }\n    await pause(WAIT_TRANSACTION_PAUSE);\n  }\n}\n\nexport async function fetchNewestTxId(network: ApiNetwork, address: string) {\n  const transactions = await fetchTransactions(network, address, 1);\n\n  if (!transactions.length) {\n    return undefined;\n  }\n\n  return transactions[0].txId;\n}\n\nexport async function fixTokenActivitiesAddressForm(network: ApiNetwork, activities: ApiActivity[]) {\n  const tokenAddresses: Set<string> = new Set();\n\n  for (const activity of activities) {\n    if (activity.kind === 'transaction' && activity.slug !== TONCOIN_SLUG) {\n      tokenAddresses.add(activity.fromAddress);\n      tokenAddresses.add(activity.toAddress);\n    }\n  }\n\n  if (!tokenAddresses.size) {\n    return;\n  }\n\n  const addressBook = await fetchAddressBook(network, Array.from(tokenAddresses));\n\n  for (const activity of activities) {\n    if (activity.kind === 'transaction' && activity.slug !== TONCOIN_SLUG) {\n      activity.fromAddress = addressBook[activity.fromAddress].user_friendly;\n      activity.toAddress = addressBook[activity.toAddress].user_friendly;\n    }\n  }\n}\n\nexport async function fetchEstimateDiesel(accountId: string, tokenAddress: string) {\n  const { network } = parseAccountId(accountId);\n  if (network !== 'mainnet') return undefined;\n\n  const wallet = await pickAccountWallet(accountId);\n  if (!wallet) return undefined;\n\n  const account = await fetchStoredAccount(accountId);\n  const { address } = account;\n  const balance = await getWalletBalance(network, wallet);\n\n  if (balance >= MAX_BALANCE_WITH_CHECK_DIESEL) return undefined;\n\n  const {\n    status,\n    amount,\n    pendingCreatedAt,\n  } = await estimateDiesel(address, tokenAddress);\n  const { decimals } = findTokenByMinter(tokenAddress)!;\n\n  const isAwaitingNotExpiredPrevious = Boolean(\n    pendingCreatedAt\n      && Date.now() - new Date(pendingCreatedAt).getTime() > PENDING_DIESEL_TIMEOUT,\n  );\n\n  return {\n    status,\n    amount: amount ? fromDecimal(amount, decimals) : undefined,\n    pendingCreatedAt,\n    isAwaitingNotExpiredPrevious,\n  };\n}\n","import type { ApiNetwork } from '../../../types';\nimport type { ApiTransactionExtra } from '../types';\n\nimport {\n  TONCOIN_SLUG,\n  TONHTTPAPI_V3_MAINNET_API_URL,\n  TONHTTPAPI_V3_TESTNET_API_URL,\n} from '../../../../config';\nimport { fetchJson } from '../../../../util/fetch';\nimport { omitUndefined, split } from '../../../../util/iteratees';\nimport { getEnvironment } from '../../../environment';\nimport { parseTxId, stringifyTxId } from './index';\nimport { toBase64Address } from './tonCore';\n\ntype AddressBook = Record<string, { user_friendly: string }>;\n\nconst ADDRESS_BOOK_CHUNK_SIZE = 128;\n\nexport async function fetchTransactions(\n  network: ApiNetwork,\n  address: string,\n  limit: number,\n  toTxId?: string,\n  fromTxId?: string,\n): Promise<ApiTransactionExtra[]> {\n  const fromLt = fromTxId ? parseTxId(fromTxId).lt.toString() : undefined;\n  const toLt = toTxId ? parseTxId(toTxId).lt.toString() : undefined;\n\n  const data: {\n    transactions: any[];\n    address_book: AddressBook;\n  } = await callApiV3(network, '/transactions', {\n    account: address,\n    limit,\n    start_lt: fromLt,\n    end_lt: toLt,\n    sort: 'desc',\n  });\n\n  let { transactions: rawTransactions } = data;\n  const { address_book: addressBook } = data;\n\n  if (!rawTransactions.length) {\n    return [];\n  }\n\n  if (limit > 1) {\n    if (fromLt && rawTransactions[rawTransactions.length - 1].lt === fromLt) {\n      rawTransactions.pop();\n    }\n\n    if (toLt && rawTransactions[0]?.lt === toLt) {\n      rawTransactions = rawTransactions.slice(1);\n    }\n  }\n\n  return rawTransactions\n    .map((rawTx) => parseRawTransaction(network, rawTx, addressBook))\n    .flat();\n}\n\nfunction parseRawTransaction(network: ApiNetwork, rawTx: any, addressBook: AddressBook): ApiTransactionExtra[] {\n  const {\n    now,\n    lt,\n    hash,\n    total_fees: fee,\n    description: {\n      compute_ph: {\n        exit_code: exitCode,\n      },\n    },\n  } = rawTx;\n\n  const txId = stringifyTxId({ lt, hash });\n  const timestamp = now as number * 1000;\n  const isIncoming = !!rawTx.in_msg.source;\n  const inMsgHash = rawTx.in_msg.hash;\n  const msgs: any[] = isIncoming ? [rawTx.in_msg] : rawTx.out_msgs;\n\n  if (!msgs.length) return [];\n\n  return msgs.map((msg, i) => {\n    const { source, destination, value } = msg;\n    const fromAddress = addressBook[source].user_friendly;\n    const toAddress = addressBook[destination].user_friendly;\n    const normalizedAddress = toBase64Address(isIncoming ? source : destination, true, network);\n\n    return omitUndefined({\n      txId: msgs.length > 1 ? `${txId}:${i + 1}` : txId,\n      timestamp,\n      isIncoming,\n      fromAddress,\n      toAddress,\n      amount: isIncoming ? BigInt(value) : -BigInt(value),\n      slug: TONCOIN_SLUG,\n      fee: BigInt(fee),\n      inMsgHash,\n      normalizedAddress,\n      shouldHide: exitCode ? true : undefined,\n      extraData: {\n        body: getRawBody(msg),\n      },\n    });\n  });\n}\n\nexport async function fetchLatestTxId(network: ApiNetwork, address: string): Promise<string | undefined> {\n  const { transactions }: { transactions: any[] } = await callApiV3(network, '/transactions', {\n    account: address,\n    limit: 1,\n    sort: 'desc',\n  });\n\n  if (!transactions.length) {\n    return undefined;\n  }\n\n  const { lt, hash } = transactions[0];\n\n  return stringifyTxId({ lt, hash });\n}\n\nfunction getRawBody(msg: any) {\n  if (!msg.message_content) return undefined;\n  return msg.message_content.body;\n}\n\nexport async function fetchAddressBook(network: ApiNetwork, addresses: string[]): Promise<AddressBook> {\n  const chunks = split(addresses, ADDRESS_BOOK_CHUNK_SIZE);\n\n  const results = await Promise.all(chunks.map((chunk) => {\n    return callApiV3(network, '/addressBook', {\n      address: chunk,\n    });\n  }));\n\n  return results.reduce((acc, value) => {\n    return Object.assign(acc, value);\n  }, {} as AddressBook);\n}\n\nexport async function fixAddressFormat(network: ApiNetwork, address: string): Promise<string> {\n  const result: { address_book: Record<string, string> } = await callApiV3(network, '/addressBook', { address });\n  return result.address_book[address];\n}\n\nfunction callApiV3(network: ApiNetwork, path: string, data?: AnyLiteral) {\n  const { apiHeaders, tonhttpapiMainnetKey, tonhttpapiTestnetKey } = getEnvironment();\n  const baseUrl = network === 'testnet' ? TONHTTPAPI_V3_TESTNET_API_URL : TONHTTPAPI_V3_MAINNET_API_URL;\n  const apiKey = network === 'testnet' ? tonhttpapiTestnetKey : tonhttpapiMainnetKey;\n\n  return fetchJson(`${baseUrl}${path}`, data, {\n    headers: {\n      ...(apiKey && { 'X-Api-Key': apiKey }),\n      ...apiHeaders,\n    },\n  });\n}\n","import { callBackendPost } from '../../../common/backend';\n\nconst DIESEL_URL = '/diesel';\n\nexport function dieselSendBoc(boc: string) {\n  return callBackendPost(`${DIESEL_URL}/sendBoc`, { boc });\n}\n","/* Source https://github.com/toncenter/tonweb/blob/master/src/contract/dns/DnsUtils.js */\nimport type { Cell, Slice } from '@ton/core';\nimport { Address, Builder } from '@ton/core';\n\nimport type { TonClient } from './TonClient';\n\nimport { sha256 } from '../../../common/utils';\nimport { DnsCategory } from '../constants';\n\nexport type DnsResult = Cell | Address | string | undefined;\n\nasync function categoryToBigInt(category?: string) {\n  if (!category) return 0n; // all categories\n  const categoryBytes = new TextEncoder().encode(category);\n  const categoryHashHex = Buffer.from(await sha256(categoryBytes)).toString('hex');\n  return BigInt(`0x${categoryHashHex}`);\n}\n\nfunction parseSmartContractAddressImpl(cell: Cell, prefix0: number, prefix1: number): Address | undefined {\n  const slice = cell.asSlice();\n\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 !== prefix0 || byte1 !== prefix1) {\n    throw new Error('Invalid dns record value prefix');\n  }\n\n  return parseAddress(slice);\n}\n\nfunction parseSmartContractAddressRecord(cell: Cell): Address | undefined {\n  return parseSmartContractAddressImpl(cell, 0x9f, 0xd3);\n}\n\nfunction parseNextResolverRecord(cell: Cell): Address | undefined {\n  return parseSmartContractAddressImpl(cell, 0xba, 0x93);\n}\n\nfunction parseStorageBagIdRecord(cell: Cell): string {\n  const slice = cell.asSlice();\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 !== 0x74 || byte1 !== 0x73) {\n    throw new Error('Invalid dns record value prefix');\n  }\n\n  const buffer = slice.loadBuffer(4);\n  return buffer.toString('hex');\n}\n\nfunction parseSiteRecord(cell: Cell): string {\n  const slice = cell.asSlice();\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 === 0xad || byte1 === 0x01) {\n    return parseAdnlAddressRecord(cell);\n  } else {\n    return parseStorageBagIdRecord(cell);\n  }\n}\n\nfunction parseAdnlAddressRecord(cell: Cell): string {\n  const slice = cell.asSlice();\n  const byte0 = slice.loadUint(8);\n  const byte1 = slice.loadUint(8);\n\n  if (byte0 !== 0xad || byte1 !== 0x01) {\n    throw new Error('Invalid dns record value prefix');\n  }\n\n  const buffer = slice.loadBuffer(4);\n  return buffer.toString('hex');\n}\n\nasync function dnsResolveImpl(\n  client: TonClient,\n  dnsAddress: string,\n  rawDomainBytes: Uint8Array,\n  category?: DnsCategory,\n  oneStep?: boolean,\n): Promise<DnsResult> {\n  const len = rawDomainBytes.length * 8;\n\n  const domainCell = new Builder()\n    .storeBuffer(Buffer.from(rawDomainBytes))\n    .asCell();\n\n  const categoryBN = await categoryToBigInt(category);\n  const { stack } = await client.callGetMethod(Address.parse(dnsAddress), 'dnsresolve', [\n    { type: 'slice', cell: domainCell },\n    { type: 'int', value: BigInt(categoryBN.toString()) },\n  ]);\n\n  const resultLen = stack.readNumber();\n\n  let cell: Cell | undefined;\n\n  try {\n    cell = stack.readCell();\n  } catch (err) {\n    // Do nothing\n  }\n\n  if (resultLen === 0) {\n    return undefined; // domain cannot be resolved\n  }\n\n  if (resultLen % 8 !== 0) {\n    throw new Error('domain split not at a component boundary');\n  }\n  // if (rawDomainBytes[resultLen] !== 0) {\n  //     throw new Error('domain split not at a component boundary');\n  // }\n  if (resultLen > len) {\n    throw new Error(`invalid response ${resultLen}/${len}`);\n  } else if (resultLen === len) {\n    if (category === DnsCategory.DnsNextResolver) {\n      return cell ? parseNextResolverRecord(cell) : undefined;\n    } else if (category === DnsCategory.Wallet) {\n      return cell ? parseSmartContractAddressRecord(cell) : undefined;\n    } else if (category === DnsCategory.Site) {\n      return cell ? parseSiteRecord(cell) : undefined;\n    } else if (category === DnsCategory.BagId) {\n      return cell ? parseStorageBagIdRecord(cell) : undefined;\n    } else {\n      return cell;\n    }\n  } else if (!cell) {\n    return undefined; // domain cannot be resolved\n  } else {\n    const nextAddress = parseNextResolverRecord(cell)!;\n    if (oneStep) {\n      if (category === DnsCategory.DnsNextResolver) {\n        return nextAddress;\n      } else {\n        return undefined;\n      }\n    } else {\n      return dnsResolveImpl(client, nextAddress.toString(), rawDomainBytes.slice(resultLen / 8), category, false);\n    }\n  }\n}\n\nfunction domainToBytes(domain: string): Uint8Array {\n  if (!domain || !domain.length) {\n    throw new Error('empty domain');\n  }\n  if (domain === '.') {\n    return new Uint8Array([0]);\n  }\n\n  domain = domain.toLowerCase();\n\n  for (let i = 0; i < domain.length; i++) {\n    if (domain.charCodeAt(i) <= 32) {\n      throw new Error('bytes in range 0..32 are not allowed in domain names');\n    }\n  }\n\n  for (let i = 0; i < domain.length; i++) {\n    const s = domain.substring(i, i + 1);\n    for (let c = 127; c <= 159; c++) { // another control codes range\n      if (s === String.fromCharCode(c)) {\n        throw new Error('bytes in range 127..159 are not allowed in domain names');\n      }\n    }\n  }\n\n  const arr = domain.split('.');\n\n  arr.forEach((part) => {\n    if (!part.length) {\n      throw new Error('domain name cannot have an empty component');\n    }\n  });\n\n  let rawDomain = `${arr.reverse().join('\\0')}\\0`;\n  if (rawDomain.length < 126) {\n    rawDomain = `\\0${rawDomain}`;\n  }\n\n  return new TextEncoder().encode(rawDomain);\n}\n\nexport function dnsResolve(\n  client: TonClient,\n  rootDnsAddress: string,\n  domain: string,\n  category?: DnsCategory,\n  oneStep?: boolean,\n): Promise<DnsResult> {\n  const rawDomainBytes = domainToBytes(domain);\n\n  return dnsResolveImpl(client, rootDnsAddress, rawDomainBytes, category, oneStep);\n}\n\nfunction parseAddress(slice: Slice): Address | undefined {\n  slice.loadUint(3);\n  let n = slice.loadUintBig(8);\n  if (n > 127n) { // Maybe it's not necessary?\n    n -= 256n;\n  }\n\n  const hashPart = slice.loadUintBig(256);\n  if (`${n.toString(10)}:${hashPart.toString(16)}` === '0:0') {\n    return undefined;\n  }\n  const s = `${n.toString(10)}:${hashPart.toString(16).padStart(64, '0')}`;\n  return Address.parse(s);\n}\n","// This JS library implements TON message comment encryption and decryption for Web\n// Reference C++ code - SimpleEncryptionV2 - https://github.com/ton-blockchain/ton/blob/cc0eb453cb3bf69f92693160103d33112856c056/tonlib/tonlib/keys/SimpleEncryption.cpp#L110\n// Dependencies:\n// - TonWeb 0.0.60\n// - aes-js - 3.1.2 - https://github.com/ricmoo/aes-js/releases/tag/v3.1.2 - for aes-cbc without padding\n// - noble-ed25519 - 1.7.3 - // https://github.com/paulmillr/noble-ed25519/releases/tag/1.7.3 - for getSharedKey\n\nimport type { Address } from '@ton/core';\n\nimport { OpCode } from '../constants';\nimport { toBase64Address } from './tonCore';\n\nconst ed25519 = require('../../../../lib/noble-ed25519');\nconst aesjs = require('../../../../lib/aes-js');\n\nasync function hmacSha512(key: Uint8Array, data: Uint8Array): Promise<Uint8Array> {\n  const hmacAlgo = { name: 'HMAC', hash: 'SHA-512' };\n  const hmacKey = await crypto.subtle.importKey('raw', key, hmacAlgo, false, ['sign']);\n  const signature = await crypto.subtle.sign(hmacAlgo, hmacKey, data);\n  const result = new Uint8Array(signature);\n  if (result.length !== 512 / 8) throw new Error();\n  return result;\n}\n\nfunction getAesCbcState(hash: Uint8Array): Promise<any> {\n  if (hash.length < 48) throw new Error();\n  const key = hash.slice(0, 32);\n  const iv = hash.slice(32, 32 + 16);\n\n  // Note that native crypto.subtle AES-CBC not suitable here because\n  // even if the data IS a multiple of 16 bytes, padding will still be added\n  // So we use aes-js\n\n  // eslint-disable-next-line new-cap\n  return new aesjs.ModeOfOperation.cbc(key, iv);\n}\n\nfunction getRandomPrefix(dataLength: number, minPadding: number): Uint8Array {\n  // eslint-disable-next-line no-bitwise\n  const prefixLength = ((minPadding + 15 + dataLength) & -16) - dataLength;\n  const prefix = crypto.getRandomValues(new Uint8Array(prefixLength));\n  prefix[0] = prefixLength;\n  if ((prefixLength + dataLength) % 16 !== 0) throw new Error();\n  return prefix;\n}\n\nfunction combineSecrets(a: Uint8Array, b: Uint8Array) {\n  return hmacSha512(a, b);\n}\n\nasync function encryptDataWithPrefix(data: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array) {\n  if (data.length % 16 !== 0) throw new Error();\n  const dataHash = await combineSecrets(salt, data);\n  const msgKey = dataHash.slice(0, 16);\n\n  const res = new Uint8Array(data.length + 16);\n  res.set(msgKey, 0);\n\n  const cbcStateSecret = await combineSecrets(sharedSecret, msgKey);\n  const encrypted = (await getAesCbcState(cbcStateSecret)).encrypt(data);\n  res.set(encrypted, 16);\n\n  return res;\n}\n\nasync function encryptDataImpl(data: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array) {\n  const prefix = await getRandomPrefix(data.length, 16);\n  const combined = new Uint8Array(prefix.length + data.length);\n  combined.set(prefix, 0);\n  combined.set(data, prefix.length);\n  return encryptDataWithPrefix(combined, sharedSecret, salt);\n}\n\nexport async function encryptData(\n  data: Uint8Array, myPublicKey: Uint8Array, theirPublicKey: Uint8Array, privateKey: Uint8Array, salt: Uint8Array,\n) {\n  const sharedSecret = await ed25519.getSharedSecret(privateKey, theirPublicKey);\n\n  const encrypted = await encryptDataImpl(data, sharedSecret, salt);\n  const prefixedEncrypted = new Uint8Array(myPublicKey.length + encrypted.length);\n  for (let i = 0; i < myPublicKey.length; i++) {\n    // eslint-disable-next-line no-bitwise\n    prefixedEncrypted[i] = theirPublicKey[i] ^ myPublicKey[i];\n  }\n  prefixedEncrypted.set(encrypted, myPublicKey.length);\n  return prefixedEncrypted;\n}\n\nexport async function encryptMessageComment(\n  comment: string,\n  myPublicKey: Uint8Array,\n  theirPublicKey: Uint8Array,\n  myPrivateKey: Uint8Array,\n  senderAddress: Address | string,\n) {\n  if (!comment || !comment.length) throw new Error('empty comment');\n\n  if (myPrivateKey.length === 64) {\n    myPrivateKey = myPrivateKey.slice(0, 32); // convert nacl private key\n  }\n\n  const commentBytes = new TextEncoder().encode(comment);\n\n  const salt = new TextEncoder().encode(toBase64Address(senderAddress, true));\n\n  const encryptedBytes = await encryptData(commentBytes, myPublicKey, theirPublicKey, myPrivateKey, salt);\n\n  const payload = new Uint8Array(encryptedBytes.length + 4);\n\n  const buffer = Buffer.alloc(4);\n  buffer.writeUInt32BE(OpCode.Encrypted);\n\n  payload.set(buffer, 0);\n  payload.set(encryptedBytes, 4);\n\n  return payload;\n}\n\nasync function doDecrypt(\n  cbcStateSecret: Uint8Array, msgKey: Uint8Array, encryptedData: Uint8Array, salt: Uint8Array,\n): Promise<Uint8Array> {\n  const decryptedData = (await getAesCbcState(cbcStateSecret)).decrypt(encryptedData);\n  const dataHash = await combineSecrets(salt, decryptedData);\n  const gotMsgKey = dataHash.slice(0, 16);\n  if (msgKey.join(',') !== gotMsgKey.join(',')) {\n    throw new Error('Failed to decrypt: hash mismatch');\n  }\n  const prefixLength = decryptedData[0];\n  if (prefixLength > decryptedData.length || prefixLength < 16) {\n    throw new Error('Failed to decrypt: invalid prefix size');\n  }\n  return decryptedData.slice(prefixLength);\n}\n\nasync function decryptDataImpl(\n  encryptedData: Uint8Array, sharedSecret: Uint8Array, salt: Uint8Array,\n): Promise<Uint8Array> {\n  if (encryptedData.length < 16) throw new Error('Failed to decrypt: data is too small');\n  if (encryptedData.length % 16 !== 0) throw new Error('Failed to decrypt: data size is not divisible by 16');\n  const msgKey = encryptedData.slice(0, 16);\n  const data = encryptedData.slice(16);\n  const cbcStateSecret = await combineSecrets(sharedSecret, msgKey);\n  const res = await doDecrypt(cbcStateSecret, msgKey, data, salt);\n  return res;\n}\n\nexport async function decryptData(data: Uint8Array, publicKey: Uint8Array, privateKey: Uint8Array, salt: Uint8Array) {\n  if (data.length < publicKey.length) {\n    throw new Error('Failed to decrypt: data is too small');\n  }\n  const theirPublicKey = new Uint8Array(publicKey.length);\n  for (let i = 0; i < publicKey.length; i++) {\n    // eslint-disable-next-line no-bitwise\n    theirPublicKey[i] = data[i] ^ publicKey[i];\n  }\n  const sharedSecret = await ed25519.getSharedSecret(privateKey, theirPublicKey);\n\n  const decrypted = await decryptDataImpl(data.slice(publicKey.length), sharedSecret, salt);\n  return decrypted;\n}\n\nexport async function decryptMessageComment(\n  encryptedData: Uint8Array, myPublicKey: Uint8Array, myPrivateKey: Uint8Array, senderAddress: Address | string,\n) {\n  if (myPrivateKey.length === 64) {\n    myPrivateKey = myPrivateKey.slice(0, 32); // convert nacl private key\n  }\n\n  const salt = new TextEncoder().encode(toBase64Address(senderAddress, true));\n\n  const decryptedBytes = await decryptData(encryptedData, myPublicKey, myPrivateKey, salt);\n  return new TextDecoder().decode(decryptedBytes);\n}\n","import { bigintRandom, bigintReviver } from '../../../../util/bigint';\n\nexport function cloneDeep<T>(value: T): T {\n  return JSON.parse(JSON.stringify(value), bigintReviver);\n}\n\nexport function stringifyTxId({ lt, hash }: { lt: number | string; hash: string }) {\n  return `${lt}:${hash}`;\n}\n\nexport function parseTxId(txId: string): { lt: number; hash: string } {\n  const [lt, hash] = txId.split(':');\n  return { lt: Number(lt), hash };\n}\n\nexport function buildTokenSlug(minterAddress: string) {\n  const addressPart = minterAddress.replace(/[^a-z\\d]/gi, '').slice(0, 10);\n  return `ton-${addressPart}`.toLowerCase();\n}\n\nexport function generateQueryId() {\n  return bigintRandom(8);\n}\n","import type { NftItem } from 'tonapi-sdk-js';\nimport type { DictionaryValue } from '@ton/core';\nimport { BitReader } from '@ton/core/dist/boc/BitReader';\nimport { BitString } from '@ton/core/dist/boc/BitString';\nimport { Builder } from '@ton/core/dist/boc/Builder';\nimport { Cell } from '@ton/core/dist/boc/Cell';\nimport { Slice } from '@ton/core/dist/boc/Slice';\nimport { Dictionary } from '@ton/core/dist/dict/Dictionary';\n\nimport type { ApiNetwork, ApiNft, ApiParsedPayload } from '../../../types';\nimport type { DnsCategory } from '../constants';\nimport type { ApiTransactionExtra, JettonMetadata } from '../types';\n\nimport {\n  DEBUG,\n  LIQUID_JETTON,\n  NFT_FRAGMENT_COLLECTIONS,\n} from '../../../../config';\nimport { pick, range } from '../../../../util/iteratees';\nimport { logDebugError } from '../../../../util/logs';\nimport { fetchJsonMetadata, fixIpfsUrl } from '../../../../util/metadata';\nimport { checkHasScamLink, checkIsTrustedCollection } from '../../../common/addresses';\nimport { base64ToString, sha256 } from '../../../common/utils';\nimport {\n  DNS_CATEGORY_HASH_MAP,\n  DnsOpCode,\n  JettonOpCode,\n  LiquidStakingOpCode,\n  NftOpCode,\n  OpCode,\n  OtherOpCode,\n  SingleNominatorOpCode,\n  VestingV1OpCode,\n} from '../constants';\nimport { fixAddressFormat } from './apiV3';\nimport { buildTokenSlug } from './index';\nimport { fetchNftItems } from './tonapiio';\nimport {\n  getDnsItemDomain, getJettonMinterData, resolveTokenMinterAddress, toBase64Address,\n} from './tonCore';\n\nconst OFFCHAIN_CONTENT_PREFIX = 0x01;\nconst SNAKE_PREFIX = 0x00;\n\nexport function parseJettonWalletMsgBody(network: ApiNetwork, body?: string) {\n  if (!body) return undefined;\n\n  try {\n    let slice = Cell.fromBase64(body).beginParse();\n    const opCode = slice.loadUint(32);\n    const queryId = slice.loadUint(64);\n\n    if (opCode !== JettonOpCode.Transfer && opCode !== JettonOpCode.InternalTransfer) {\n      return undefined;\n    }\n\n    const jettonAmount = slice.loadCoins();\n    const address = slice.loadMaybeAddress();\n    const responseAddress = slice.loadMaybeAddress();\n    let forwardAmount: bigint | undefined;\n    let comment: string | undefined;\n    let encryptedComment: string | undefined;\n\n    if (responseAddress) {\n      if (opCode === JettonOpCode.Transfer) {\n        slice.loadBit();\n      }\n      forwardAmount = slice.loadCoins();\n      const isSeparateCell = slice.remainingBits && slice.loadBit();\n      if (isSeparateCell && slice.remainingRefs) {\n        slice = slice.loadRef().beginParse();\n      }\n      if (slice.remainingBits > 32) {\n        const forwardOpCode = slice.loadUint(32);\n        if (forwardOpCode === OpCode.Comment) {\n          const buffer = readSnakeBytes(slice);\n          comment = buffer.toString('utf-8');\n        } else if (forwardOpCode === OpCode.Encrypted) {\n          const buffer = readSnakeBytes(slice);\n          encryptedComment = buffer.toString('base64');\n        }\n      }\n    }\n\n    return {\n      operation: JettonOpCode[opCode] as keyof typeof JettonOpCode,\n      queryId,\n      jettonAmount,\n      responseAddress,\n      address: address ? toBase64Address(address, undefined, network) : undefined,\n      forwardAmount,\n      comment,\n      encryptedComment,\n    };\n  } catch (err) {\n    logDebugError('parseJettonWalletMsgBody', err);\n  }\n\n  return undefined;\n}\n\nexport function fixBase64ImageData(data: string) {\n  const decodedData = base64ToString(data);\n  if (decodedData.includes('<svg')) {\n    return `data:image/svg+xml;base64,${data}`;\n  }\n  return `data:image/png;base64,${data}`;\n}\n\nconst dictSnakeBufferValue: DictionaryValue<Buffer> = {\n  parse: (slice) => {\n    const buffer = Buffer.from('');\n\n    const sliceToVal = (s: Slice, v: Buffer, isFirst: boolean) => {\n      if (isFirst && s.loadUint(8) !== SNAKE_PREFIX) {\n        throw new Error('Only snake format is supported');\n      }\n\n      v = Buffer.concat([v, s.loadBuffer(s.remainingBits / 8)]);\n      if (s.remainingRefs === 1) {\n        v = sliceToVal(s.loadRef().beginParse(), v, false);\n      }\n\n      return v;\n    };\n\n    return sliceToVal(slice.loadRef().beginParse() as any, buffer, true);\n  },\n  serialize: () => {\n    // pass\n  },\n};\n\nconst jettonOnChainMetadataSpec: {\n  [key in keyof JettonMetadata]: 'utf8' | 'ascii' | undefined;\n} = {\n  uri: 'ascii',\n  name: 'utf8',\n  description: 'utf8',\n  image: 'ascii',\n  symbol: 'utf8',\n  decimals: 'utf8',\n};\n\nexport async function fetchJettonMetadata(network: ApiNetwork, address: string) {\n  const { content } = await getJettonMinterData(network, address);\n\n  let metadata: JettonMetadata;\n\n  const slice = content.asSlice();\n  const prefix = slice.loadUint(8);\n\n  if (prefix === OFFCHAIN_CONTENT_PREFIX) {\n    const bytes = readSnakeBytes(slice);\n    const contentUri = bytes.toString('utf-8');\n    metadata = await fetchJettonOffchainMetadata(contentUri);\n  } else {\n    // On-chain content\n    metadata = await parseJettonOnchainMetadata(slice);\n    if (metadata.uri) {\n      // Semi-chain content\n      const offchainMetadata = await fetchJettonOffchainMetadata(metadata.uri);\n      metadata = { ...offchainMetadata, ...metadata };\n    }\n  }\n\n  return metadata;\n}\n\nexport async function parseJettonOnchainMetadata(slice: Slice): Promise<JettonMetadata> {\n  const dict = slice.loadDict(Dictionary.Keys.Buffer(32), dictSnakeBufferValue);\n\n  const res: { [s in keyof JettonMetadata]?: string } = {};\n\n  for (const [key, value] of Object.entries(jettonOnChainMetadataSpec)) {\n    const sha256Key = Buffer.from(await sha256(Buffer.from(key, 'ascii')));\n    const val = dict.get(sha256Key)?.toString(value);\n\n    if (val) {\n      res[key as keyof JettonMetadata] = val;\n    }\n  }\n\n  return res as JettonMetadata;\n}\n\nexport async function fetchJettonOffchainMetadata(uri: string): Promise<JettonMetadata> {\n  const metadata = await fetchJsonMetadata(uri);\n  return pick(metadata, ['name', 'description', 'symbol', 'decimals', 'image', 'image_data']);\n}\n\nexport async function parseWalletTransactionBody(\n  network: ApiNetwork, transaction: ApiTransactionExtra,\n): Promise<ApiTransactionExtra> {\n  const body = transaction.extraData?.body;\n  if (!body || transaction.comment || transaction.encryptedComment) {\n    return transaction;\n  }\n\n  try {\n    const slice = dataToSlice(body);\n\n    if (slice.remainingBits > 32) {\n      const address = transaction.isIncoming ? transaction.fromAddress : transaction.toAddress;\n\n      const parsedPayload = await parsePayloadSlice(\n        network, address, slice, false, transaction,\n      );\n      transaction.extraData!.parsedPayload = parsedPayload;\n\n      if (parsedPayload?.type === 'comment') {\n        transaction = {\n          ...transaction,\n          comment: parsedPayload.comment,\n        };\n      } else if (parsedPayload?.type === 'encrypted-comment') {\n        transaction = {\n          ...transaction,\n          encryptedComment: parsedPayload.encryptedComment,\n        };\n      }\n    }\n  } catch (err) {\n    logDebugError('parseTransactionBody', err);\n  }\n\n  return transaction;\n}\n\nexport async function parsePayloadBase64(\n  network: ApiNetwork,\n  address: string,\n  base64: string,\n): Promise<ApiParsedPayload> {\n  const slice = dataToSlice(base64);\n  const result: ApiParsedPayload = { type: 'unknown', base64 };\n\n  if (!slice) return result;\n\n  return await parsePayloadSlice(network, address, slice, true) ?? result;\n}\n\nexport async function parsePayloadSlice(\n  network: ApiNetwork,\n  address: string,\n  slice: Slice,\n  shouldLoadItems?: boolean,\n  transactionDebug?: ApiTransactionExtra,\n): Promise<ApiParsedPayload | undefined> {\n  let opCode: number | undefined;\n  try {\n    opCode = slice.loadUint(32);\n\n    if (opCode === OpCode.Comment) {\n      const buffer = readSnakeBytes(slice);\n      const comment = buffer.toString('utf-8');\n      return { type: 'comment', comment };\n    } else if (opCode === OpCode.Encrypted) {\n      const buffer = readSnakeBytes(slice);\n      const encryptedComment = buffer.toString('base64');\n      return { type: 'encrypted-comment', encryptedComment };\n    } else if (slice.remainingBits < 64) {\n      return undefined;\n    }\n\n    const queryId = slice.loadUintBig(64);\n\n    switch (opCode) {\n      case JettonOpCode.Transfer: {\n        const minterAddress = await resolveTokenMinterAddress(network, address);\n        const slug = buildTokenSlug(minterAddress);\n\n        const amount = slice.loadCoins();\n        const destination = slice.loadAddress();\n        const responseDestination = slice.loadMaybeAddress();\n\n        if (!responseDestination) {\n          return {\n            type: 'tokens:transfer-non-standard',\n            queryId,\n            destination: toBase64Address(destination, undefined, network),\n            amount,\n            slug,\n          };\n        }\n\n        const customPayload = slice.loadMaybeRef();\n        const forwardAmount = slice.loadCoins();\n        let forwardPayload = slice.loadMaybeRef();\n        if (!forwardPayload && slice.remainingBits) {\n          const builder = new Builder().storeBits(slice.loadBits(slice.remainingBits));\n          range(0, slice.remainingRefs).forEach(() => {\n            builder.storeRef(slice.loadRef());\n          });\n          forwardPayload = builder.endCell();\n        }\n\n        return {\n          type: 'tokens:transfer',\n          queryId,\n          amount,\n          destination: toBase64Address(destination, undefined, network),\n          responseDestination: toBase64Address(responseDestination, undefined, network),\n          customPayload: customPayload?.toBoc().toString('base64'),\n          forwardAmount,\n          forwardPayload: forwardPayload?.toBoc().toString('base64'),\n          slug,\n        };\n      }\n      case NftOpCode.TransferOwnership: {\n        const newOwner = slice.loadAddress();\n        const responseDestination = slice.loadAddress();\n        const customPayload = slice.loadMaybeRef();\n        const forwardAmount = slice.loadCoins();\n        const forwardPayload = readForwardPayloadCell(slice);\n        const comment = forwardPayload ? readComment(forwardPayload.asSlice()) : undefined;\n\n        let nft: ApiNft | undefined;\n        if (shouldLoadItems) {\n          const [rawNft] = await fetchNftItems(network, [address]);\n          if (rawNft) {\n            nft = buildNft(network, rawNft);\n          }\n        }\n\n        return {\n          type: 'nft:transfer',\n          queryId,\n          newOwner: toBase64Address(newOwner, undefined, network),\n          responseDestination: toBase64Address(responseDestination, undefined, network),\n          customPayload: customPayload?.toBoc().toString('base64'),\n          forwardAmount,\n          forwardPayload: forwardPayload?.toBoc().toString('base64'),\n          nftAddress: address,\n          nftName: nft?.name,\n          nft,\n          comment,\n        };\n      }\n      case NftOpCode.OwnershipAssigned: {\n        const prevOwner = slice.loadAddress();\n        const forwardPayload = readForwardPayloadCell(slice);\n        const comment = forwardPayload ? readComment(forwardPayload.asSlice()) : undefined;\n\n        let nft: ApiNft | undefined;\n        if (shouldLoadItems) {\n          const [rawNft] = await fetchNftItems(network, [address]);\n          if (rawNft) {\n            nft = buildNft(network, rawNft);\n          }\n        }\n\n        return {\n          type: 'nft:ownership-assigned',\n          queryId,\n          prevOwner: toBase64Address(prevOwner, undefined, network),\n          comment,\n          nftAddress: address,\n          nft,\n        };\n      }\n      case JettonOpCode.Burn: {\n        const minterAddress = await resolveTokenMinterAddress(network, address);\n        const slug = buildTokenSlug(minterAddress);\n\n        const amount = slice.loadCoins();\n        const addressObj = slice.loadAddress();\n        const customPayload = slice.loadMaybeRef();\n        const isLiquidUnstakeRequest = minterAddress === LIQUID_JETTON;\n\n        return {\n          type: 'tokens:burn',\n          queryId,\n          amount,\n          address: toBase64Address(addressObj, undefined, network),\n          customPayload: customPayload?.toBoc().toString('base64'),\n          slug,\n          isLiquidUnstakeRequest,\n        };\n      }\n      case LiquidStakingOpCode.DistributedAsset: {\n        return {\n          type: 'liquid-staking:withdrawal-nft',\n          queryId,\n        };\n      }\n      case LiquidStakingOpCode.Withdrawal: {\n        return {\n          type: 'liquid-staking:withdrawal',\n          queryId,\n        };\n      }\n      case LiquidStakingOpCode.Deposit: {\n        let appId: bigint | undefined;\n        if (slice.remainingBits > 0) {\n          appId = slice.loadUintBig(64);\n        }\n        return {\n          type: 'liquid-staking:deposit',\n          queryId,\n          appId,\n        };\n      }\n      case VestingV1OpCode.AddWhitelist: {\n        const toAddress = slice.loadAddress();\n        const addressString = shouldLoadItems\n          ? await fixAddressFormat(network, toAddress.toRawString())\n          : '';\n\n        return {\n          type: 'vesting:add-whitelist',\n          queryId,\n          address: addressString,\n        };\n      }\n      case SingleNominatorOpCode.Withdraw: {\n        const amount = slice.loadCoins();\n        return {\n          type: 'single-nominator:withdraw',\n          queryId,\n          amount,\n        };\n      }\n      case SingleNominatorOpCode.ChangeValidator: {\n        const toAddress = slice.loadAddress();\n        const addressString = shouldLoadItems\n          ? await fixAddressFormat(network, toAddress.toRawString())\n          : '';\n\n        return {\n          type: 'single-nominator:change-validator',\n          queryId,\n          address: addressString,\n        };\n      }\n      case LiquidStakingOpCode.Vote: {\n        const votingAddress = slice.loadAddress();\n        const expirationDate = slice.loadUint(48);\n        const vote = slice.loadBit();\n        const needConfirmation = slice.loadBit();\n\n        return {\n          type: 'liquid-staking:vote',\n          queryId,\n          votingAddress: toBase64Address(votingAddress, true),\n          expirationDate,\n          vote,\n          needConfirmation,\n        };\n      }\n      case DnsOpCode.ChangeRecord: {\n        const hash = slice.loadBuffer(32).toString('hex');\n        const category = Object.entries(DNS_CATEGORY_HASH_MAP)\n          .find(([, value]) => hash === value)?.[0] as DnsCategory ?? 'unknown';\n        const toAddress = slice.loadAddress();\n        const domain = shouldLoadItems\n          ? await getDnsItemDomain(network, toAddress)\n          : '';\n\n        if (category === 'wallet') {\n          if (slice.remainingRefs > 0) {\n            const dataSlice = slice.loadRef().beginParse();\n            slice.endParse();\n\n            const dataAddress = dataSlice.loadAddress();\n            const flags = dataSlice.loadUint(8);\n\n            const addressString = shouldLoadItems\n              ? await fixAddressFormat(network, dataAddress.toRawString())\n              : '';\n\n            return {\n              type: 'dns:change-record',\n              queryId,\n              record: {\n                type: 'wallet',\n                value: addressString,\n                flags,\n              },\n              domain,\n            };\n          } else {\n            return {\n              type: 'dns:change-record',\n              queryId,\n              record: {\n                type: 'wallet',\n                value: undefined,\n              },\n              domain,\n            };\n          }\n        } else if (slice.remainingRefs > 0) {\n          const value = slice.loadRef();\n          return {\n            type: 'dns:change-record',\n            queryId,\n            record: category === 'unknown' ? {\n              type: 'unknown',\n              key: hash,\n              value: value.toBoc().toString('base64'),\n            } : {\n              type: category,\n              value: value.toBoc().toString('base64'),\n            },\n            domain,\n          };\n        } else {\n          return {\n            type: 'dns:change-record',\n            queryId,\n            record: category === 'unknown' ? {\n              type: 'unknown',\n              key: hash,\n            } : {\n              type: category,\n            },\n            domain,\n          };\n        }\n      }\n      case OtherOpCode.TokenBridgePaySwap: {\n        const swapId = slice.loadBuffer(32).toString('hex');\n        return {\n          type: 'token-bridge:pay-swap',\n          queryId,\n          swapId,\n        };\n      }\n    }\n  } catch (err) {\n    if (DEBUG) {\n      const debugTxString = transactionDebug\n        && `${transactionDebug.txId} ${new Date(transactionDebug.timestamp)}`;\n      const opCodeHex = `0x${opCode?.toString(16).padStart(8, '0')}`;\n      logDebugError('parsePayload', opCodeHex, debugTxString, '\\n', err);\n    }\n  }\n\n  return undefined;\n}\n\nfunction dataToSlice(data: string | Buffer | Uint8Array): Slice {\n  let buffer: Buffer;\n  if (typeof data === 'string') {\n    buffer = Buffer.from(data, 'base64');\n  } else if (data instanceof Buffer) {\n    buffer = data;\n  } else {\n    buffer = Buffer.from(data);\n  }\n\n  try {\n    return Cell.fromBoc(buffer)[0].beginParse();\n  } catch (err: any) {\n    if (err?.message !== 'Invalid magic') {\n      throw err;\n    }\n  }\n\n  return new Slice(new BitReader(new BitString(buffer, 0, buffer.length * 8)), []);\n}\n\nfunction readComment(slice: Slice) {\n  if (slice.remainingBits < 32) {\n    return undefined;\n  }\n\n  const opCode = slice.loadUint(32);\n  if (opCode !== OpCode.Comment || (!slice.remainingBits && !slice.remainingRefs)) {\n    return undefined;\n  }\n\n  const buffer = readSnakeBytes(slice);\n  return buffer.toString('utf-8');\n}\n\nfunction readForwardPayloadCell(slice: Slice) {\n  let forwardPayload = slice.loadBit() && slice.remainingRefs ? slice.loadRef() : undefined;\n\n  if (!forwardPayload && slice.remainingBits) {\n    const builder = new Builder().storeBits(slice.loadBits(slice.remainingBits));\n    range(0, slice.remainingRefs).forEach(() => {\n      builder.storeRef(slice.loadRef());\n    });\n    forwardPayload = builder.endCell();\n  }\n\n  return forwardPayload ?? undefined;\n}\n\nexport function readSnakeBytes(slice: Slice) {\n  let buffer = Buffer.alloc(0);\n\n  while (slice.remainingBits >= 8) {\n    buffer = Buffer.concat([buffer, slice.loadBuffer(slice.remainingBits / 8)]);\n    if (slice.remainingRefs) {\n      slice = slice.loadRef().beginParse();\n    } else {\n      break;\n    }\n  }\n\n  return buffer;\n}\n\nexport function buildNft(network: ApiNetwork, rawNft: NftItem): ApiNft | undefined {\n  if (!rawNft.metadata) {\n    return undefined;\n  }\n\n  try {\n    const {\n      address,\n      index,\n      collection,\n      metadata,\n      previews,\n      sale,\n      trust,\n    } = rawNft;\n\n    const {\n      name, image, description, render_type: renderType,\n    } = metadata as {\n      name?: string;\n      image?: string;\n      description?: string;\n      render_type?: string;\n    };\n\n    const collectionAddress = collection && toBase64Address(collection.address, true, network);\n    let hasScamLink = false;\n\n    if (!collectionAddress || !checkIsTrustedCollection(collectionAddress)) {\n      for (const text of [name, description].filter(Boolean)) {\n        if (checkHasScamLink(text)) {\n          hasScamLink = true;\n        }\n      }\n    }\n\n    const isScam = hasScamLink || description === 'SCAM' || trust === 'blacklist';\n    const isHidden = renderType === 'hidden' || isScam;\n    const imageFromPreview = previews!.find((x) => x.resolution === '1500x1500')!.url;\n\n    return {\n      index,\n      name,\n      address: toBase64Address(address, true, network),\n      image: fixIpfsUrl(imageFromPreview || image || ''),\n      thumbnail: previews!.find((x) => x.resolution === '500x500')!.url,\n      isOnSale: Boolean(sale),\n      isHidden,\n      isScam,\n      description,\n      ...(collection && {\n        collectionAddress: toBase64Address(collection.address, true, network),\n        collectionName: collection.name,\n        isOnFragment: NFT_FRAGMENT_COLLECTIONS.has(collection.address),\n      }),\n    };\n  } catch (err) {\n    logDebugError('buildNft', err);\n    return undefined;\n  }\n}\n","import type { Cell } from '@ton/core';\nimport { beginCell, external, storeMessage } from '@ton/core';\n\nimport type { TonClient } from './TonClient';\nimport type { TonWallet } from './tonCore';\n\nimport { dieselSendBoc } from './diesel';\n\nexport async function sendExternal(\n  client: TonClient,\n  wallet: TonWallet,\n  message: Cell,\n  withDiesel?: boolean,\n) {\n  const {\n    address,\n    init,\n  } = wallet;\n\n  let neededInit: { data: Cell; code: Cell } | undefined;\n  if (init && !await client.isContractDeployed(address)) {\n    neededInit = init;\n  }\n\n  const ext = external({\n    to: address,\n    init: neededInit ? {\n      code: neededInit.code,\n      data: neededInit.data,\n    } : undefined,\n    body: message,\n  });\n\n  const cell = beginCell()\n    .store(storeMessage(ext))\n    .endCell();\n\n  const msgHash = cell.hash().toString('base64');\n  const boc = cell.toBoc().toString('base64');\n\n  if (withDiesel) {\n    await dieselSendBoc(boc);\n  } else {\n    await client.sendFile(boc);\n  }\n\n  return {\n    boc,\n    msgHash,\n  };\n}\n","import type { OpenedContract } from '@ton/core';\nimport { Address, Builder, Cell } from '@ton/core';\nimport axios from 'axios';\nimport { WalletContractV1R1 } from '@ton/ton/dist/wallets/WalletContractV1R1';\nimport { WalletContractV1R2 } from '@ton/ton/dist/wallets/WalletContractV1R2';\nimport { WalletContractV1R3 } from '@ton/ton/dist/wallets/WalletContractV1R3';\nimport { WalletContractV2R1 } from '@ton/ton/dist/wallets/WalletContractV2R1';\nimport { WalletContractV2R2 } from '@ton/ton/dist/wallets/WalletContractV2R2';\nimport { WalletContractV3R1 } from '@ton/ton/dist/wallets/WalletContractV3R1';\nimport { WalletContractV3R2 } from '@ton/ton/dist/wallets/WalletContractV3R2';\nimport { WalletContractV4 } from '@ton/ton/dist/wallets/WalletContractV4';\nimport { WalletContractV5R1 } from '@ton/ton/dist/wallets/WalletContractV5R1';\n\nimport type { ApiDnsZone, ApiNetwork, ApiWalletVersion } from '../../../types';\nimport type { TokenTransferBodyParams } from '../types';\n\nimport {\n  DEFAULT_TIMEOUT,\n  TONHTTPAPI_MAINNET_API_KEY,\n  TONHTTPAPI_MAINNET_URL,\n  TONHTTPAPI_TESTNET_API_KEY,\n  TONHTTPAPI_TESTNET_URL,\n} from '../../../../config';\nimport axiosFetchAdapter from '../../../../lib/axios-fetch-adapter';\nimport { logDebugError } from '../../../../util/logs';\nimport withCacheAsync from '../../../../util/withCacheAsync';\nimport { DnsItem } from '../contracts/DnsItem';\nimport { JettonMinter } from '../contracts/JettonMaster';\nimport { JettonWallet } from '../contracts/JettonWallet';\nimport { hexToBytes } from '../../../common/utils';\nimport { getEnvironment } from '../../../environment';\nimport {\n  DEFAULT_IS_BOUNCEABLE,\n  DNS_ZONES_MAP,\n  JettonOpCode,\n  LiquidStakingOpCode,\n  OpCode,\n  WORKCHAIN,\n} from '../constants';\nimport { generateQueryId } from './index';\n\nimport { TonClient } from './TonClient';\n\nexport type TonWalletType = typeof WalletContractV1R1\n| typeof WalletContractV1R2\n| typeof WalletContractV1R3\n| typeof WalletContractV2R1\n| typeof WalletContractV2R2\n| typeof WalletContractV3R1\n| typeof WalletContractV3R2\n| typeof WalletContractV4\n| typeof WalletContractV5R1;\n\nexport type TonWallet = OpenedContract<WalletContractV1R1\n| WalletContractV1R2\n| WalletContractV1R3\n| WalletContractV2R1\n| WalletContractV2R2\n| WalletContractV3R1\n| WalletContractV3R2\n| WalletContractV4\n| WalletContractV5R1>;\n\naxios.defaults.adapter = axiosFetchAdapter;\n\nconst TON_MAX_COMMENT_BYTES = 127;\n\nlet clientByNetwork: Record<ApiNetwork, TonClient> | undefined;\n\nexport const walletClassMap: Record<ApiWalletVersion, TonWalletType> = {\n  simpleR1: WalletContractV1R1,\n  simpleR2: WalletContractV1R2,\n  simpleR3: WalletContractV1R3,\n  v2R1: WalletContractV2R1,\n  v2R2: WalletContractV2R2,\n  v3R1: WalletContractV3R1,\n  v3R2: WalletContractV3R2,\n  v4R2: WalletContractV4,\n  W5: WalletContractV5R1,\n};\n\nexport function getTonClient(network: ApiNetwork = 'mainnet') {\n  if (!clientByNetwork) {\n    clientByNetwork = {\n      mainnet: new TonClient({\n        endpoint: TONHTTPAPI_MAINNET_URL,\n        timeout: DEFAULT_TIMEOUT,\n        apiKey: TONHTTPAPI_MAINNET_API_KEY,\n        headers: getEnvironment().apiHeaders,\n      }),\n      testnet: new TonClient({\n        endpoint: TONHTTPAPI_TESTNET_URL,\n        timeout: DEFAULT_TIMEOUT,\n        apiKey: TONHTTPAPI_TESTNET_API_KEY,\n        headers: getEnvironment().apiHeaders,\n      }),\n    };\n  }\n\n  return clientByNetwork[network];\n}\n\nexport function getTonWalletContract(publicKeyHex: string, version: ApiWalletVersion) {\n  const walletClass = walletClassMap[version];\n  if (!walletClass) {\n    throw new Error('Unsupported wallet contract version');\n  }\n\n  const publicKey = Buffer.from(hexToBytes(publicKeyHex));\n  return walletClass.create({ workchain: WORKCHAIN, publicKey });\n}\n\nexport const resolveTokenWalletAddress = withCacheAsync(\n  async (network: ApiNetwork, address: string, minterAddress: string) => {\n    const minter = getTonClient(network).open(new JettonMinter(Address.parse(minterAddress)));\n    const walletAddress = await minter.getWalletAddress(Address.parse(address));\n    return toBase64Address(walletAddress, true, network);\n  },\n);\n\nexport const resolveTokenMinterAddress = withCacheAsync(async (network: ApiNetwork, tokenWalletAddress: string) => {\n  const tokenWallet = getTonClient(network).open(new JettonWallet(Address.parse(tokenWalletAddress)));\n  const data = await tokenWallet.getWalletData();\n  return toBase64Address(data.minter, true, network);\n});\n\nexport const getWalletPublicKey = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  try {\n    const res = await getTonClient(network).callGetMethod(Address.parse(address), 'get_public_key');\n    const bigintKey = res.stack.readBigNumber();\n    const hex = bigintKey.toString(16).padStart(64, '0');\n    return hexToBytes(hex);\n  } catch (err) {\n    logDebugError('getWalletPublicKey', err);\n    return undefined;\n  }\n});\n\nexport function getJettonMinterData(network: ApiNetwork, address: string) {\n  const contract = getTonClient(network).open(new JettonMinter(Address.parse(address)));\n  return contract.getJettonData();\n}\n\nexport function oneCellFromBoc(bytes: Uint8Array) {\n  return Cell.fromBoc(Buffer.from(bytes));\n}\n\nexport function toBase64Address(address: Address | string, isBounceable = DEFAULT_IS_BOUNCEABLE, network?: ApiNetwork) {\n  if (typeof address === 'string') {\n    address = Address.parse(address);\n  }\n  return address.toString({\n    urlSafe: true,\n    bounceable: isBounceable,\n    testOnly: network === 'testnet',\n  });\n}\n\nexport function toRawAddress(address: Address | string) {\n  if (typeof address === 'string') {\n    address = Address.parse(address);\n  }\n  return address.toRawString();\n}\n\nexport function buildTokenTransferBody(params: TokenTransferBodyParams) {\n  const {\n    queryId, tokenAmount, toAddress, responseAddress, forwardAmount,\n  } = params;\n  let forwardPayload = params.forwardPayload;\n\n  let builder = new Builder()\n    .storeUint(JettonOpCode.Transfer, 32)\n    .storeUint(queryId || generateQueryId(), 64)\n    .storeCoins(tokenAmount)\n    .storeAddress(Address.parse(toAddress))\n    .storeAddress(Address.parse(responseAddress))\n    .storeBit(false)\n    .storeCoins(forwardAmount ?? 0n);\n\n  if (forwardPayload instanceof Uint8Array) {\n    const freeBytes = Math.round(builder.availableBits / 8);\n    forwardPayload = packBytesAsSnake(forwardPayload, freeBytes);\n  }\n\n  if (!forwardPayload) {\n    builder.storeBit(false);\n  } else if (typeof forwardPayload === 'string') {\n    builder = builder.storeBit(false)\n      .storeUint(0, 32)\n      .storeBuffer(Buffer.from(forwardPayload));\n  } else if (forwardPayload instanceof Uint8Array) {\n    builder = builder.storeBit(false)\n      .storeBuffer(Buffer.from(forwardPayload));\n  } else {\n    builder = builder.storeBit(true)\n      .storeRef(forwardPayload);\n  }\n\n  return builder.endCell();\n}\n\nexport function parseBase64(base64: string) {\n  try {\n    return Cell.fromBase64(base64);\n  } catch (err) {\n    logDebugError('parseBase64', err);\n    return Uint8Array.from(Buffer.from(base64, 'base64'));\n  }\n}\n\nexport function commentToBytes(comment: string): Uint8Array {\n  const buffer = Buffer.from(comment);\n  const bytes = new Uint8Array(buffer.length + 4);\n\n  const startBuffer = Buffer.alloc(4);\n  startBuffer.writeUInt32BE(OpCode.Comment);\n  bytes.set(startBuffer, 0);\n  bytes.set(buffer, 4);\n\n  return bytes;\n}\n\nexport function packBytesAsSnake(bytes: Uint8Array, maxBytes = TON_MAX_COMMENT_BYTES): Uint8Array | Cell {\n  const buffer = Buffer.from(bytes);\n  if (buffer.length <= maxBytes) {\n    return bytes;\n  }\n\n  return packBytesAsSnakeCell(bytes);\n}\n\nexport function packBytesAsSnakeCell(bytes: Uint8Array): Cell {\n  const buffer = Buffer.from(bytes);\n\n  const mainBuilder = new Builder();\n  let prevBuilder: Builder | undefined;\n  let currentBuilder = mainBuilder;\n\n  for (const [i, byte] of buffer.entries()) {\n    if (currentBuilder.availableBits < 8) {\n      prevBuilder?.storeRef(currentBuilder);\n\n      prevBuilder = currentBuilder;\n      currentBuilder = new Builder();\n    }\n\n    currentBuilder = currentBuilder.storeUint(byte, 8);\n\n    if (i === buffer.length - 1) {\n      prevBuilder?.storeRef(currentBuilder);\n    }\n  }\n\n  return mainBuilder.asCell();\n}\n\nfunction createNestedCell(data: Uint8Array, maxCellSize: number): Cell {\n  const builder = new Builder();\n  const dataSlice = Buffer.from(data.slice(0, maxCellSize));\n\n  builder.storeBuffer(dataSlice);\n\n  if (data.length > maxCellSize) {\n    const remainingData = data.slice(maxCellSize);\n    builder.storeRef(createNestedCell(remainingData, maxCellSize));\n  }\n\n  return builder.endCell();\n}\n\nexport function packBytesAsSnakeForEncryptedData(data: Uint8Array): Uint8Array | Cell {\n  const ROOT_BUILDER_BYTES = 39;\n  const MAX_CELLS_AMOUNT = 16;\n\n  const rootBuilder = new Builder();\n  rootBuilder.storeBuffer(Buffer.from(data.slice(0, Math.min(data.length, ROOT_BUILDER_BYTES))));\n\n  if (data.length > ROOT_BUILDER_BYTES + MAX_CELLS_AMOUNT * TON_MAX_COMMENT_BYTES) {\n    throw new Error('Input text is too long');\n  }\n\n  rootBuilder.storeRef(createNestedCell(Buffer.from(data.slice(ROOT_BUILDER_BYTES)), TON_MAX_COMMENT_BYTES));\n\n  return rootBuilder.endCell();\n}\n\nexport function buildLiquidStakingDepositBody(queryId?: number) {\n  return new Builder()\n    .storeUint(LiquidStakingOpCode.Deposit, 32)\n    .storeUint(queryId || 0, 64)\n    .asCell();\n}\n\nexport function buildLiquidStakingWithdrawBody(options: {\n  queryId?: number;\n  amount: bigint;\n  responseAddress: string;\n  waitTillRoundEnd?: boolean; // opposite of request_immediate_withdrawal\n  fillOrKill?: boolean;\n}) {\n  const {\n    queryId, amount, responseAddress, waitTillRoundEnd, fillOrKill,\n  } = options;\n\n  const customPayload = buildLiquidStakingWithdrawCustomPayload(waitTillRoundEnd, fillOrKill);\n\n  return new Builder()\n    .storeUint(JettonOpCode.Burn, 32)\n    .storeUint(queryId ?? 0, 64)\n    .storeCoins(amount)\n    .storeAddress(Address.parse(responseAddress))\n    .storeBit(1)\n    .storeRef(customPayload)\n    .asCell();\n}\n\nexport function buildLiquidStakingWithdrawCustomPayload(waitTillRoundEnd?: boolean, fillOrKill?: boolean) {\n  return new Builder()\n    .storeUint(Number(waitTillRoundEnd), 1)\n    .storeUint(Number(fillOrKill), 1)\n    .asCell();\n}\n\nexport function getTokenBalance(network: ApiNetwork, walletAddress: string) {\n  const tokenWallet = getTonClient(network).open(new JettonWallet(Address.parse(walletAddress)));\n  return tokenWallet.getJettonBalance();\n}\n\nexport function parseAddress(address: string): {\n  isValid: boolean;\n  isRaw?: boolean;\n  isUserFriendly?: boolean;\n  isBounceable?: boolean;\n  isTestOnly?: boolean;\n  address?: Address;\n} {\n  try {\n    if (Address.isRaw(address)) {\n      return {\n        address: Address.parseRaw(address),\n        isRaw: true,\n        isValid: true,\n      };\n    } else if (Address.isFriendly(address)) {\n      return {\n        ...Address.parseFriendly(address),\n        isUserFriendly: true,\n        isValid: true,\n      };\n    }\n  } catch (err) {\n    // Do nothing\n  }\n\n  return { isValid: false };\n}\n\nexport function getIsRawAddress(address: string) {\n  return Boolean(parseAddress(address).isRaw);\n}\n\nexport async function getDnsItemDomain(network: ApiNetwork, address: Address | string) {\n  if (typeof address === 'string') address = Address.parse(address);\n\n  const contract = getTonClient(network)\n    .open(new DnsItem(address));\n  const nftData = await contract.getNftData();\n  const collectionAddress = toBase64Address(nftData.collectionAddress, true);\n\n  const zone = Object.entries(DNS_ZONES_MAP)\n    .find(([, collection]) => collection === collectionAddress)?.[0] as ApiDnsZone | undefined;\n\n  const base = zone === '.t.me'\n    ? await contract.getTelemintDomain()\n    : await contract.getDomain();\n\n  return `${base}${zone}`;\n}\n","import { Api, HttpClient } from 'tonapi-sdk-js';\n\nimport type { ApiNetwork } from '../../../types';\n\nimport { TONAPIIO_MAINNET_URL, TONAPIIO_TESTNET_URL } from '../../../../config';\nimport { fetchWithRetry } from '../../../../util/fetch';\nimport { getEnvironment } from '../../../environment';\n\nconst MAX_LIMIT = 500;\nconst EVENTS_LIMIT = 100;\n\nlet apiByNetwork: Record<ApiNetwork, Api<unknown>> | undefined;\n\nfunction getApi(network: ApiNetwork) {\n  if (!apiByNetwork) {\n    const headers = {\n      ...getEnvironment().apiHeaders,\n      'Content-Type': 'application/json',\n    };\n\n    apiByNetwork = {\n      mainnet: new Api(new HttpClient({\n        baseUrl: TONAPIIO_MAINNET_URL,\n        baseApiParams: { headers },\n        customFetch: fetchWithRetry as typeof fetch,\n      })),\n      testnet: new Api(new HttpClient({\n        baseUrl: TONAPIIO_TESTNET_URL,\n        baseApiParams: { headers },\n        customFetch: fetchWithRetry as typeof fetch,\n      })),\n    };\n  }\n\n  return apiByNetwork[network];\n}\n\nexport async function fetchJettonBalances(network: ApiNetwork, account: string) {\n  return (await getApi(network).accounts.getAccountJettonsBalances(account)).balances;\n}\n\nexport async function fetchNftItems(network: ApiNetwork, addresses: string[]) {\n  return (await getApi(network).nft.getNftItemsByAddresses({\n    account_ids: addresses,\n  })).nft_items;\n}\n\nexport async function fetchAccountNfts(network: ApiNetwork, address: string, options?: {\n  collection?: string;\n  offset?: number;\n  limit?: number;\n}) {\n  const { collection, offset, limit } = options ?? {};\n\n  return (await getApi(network).accounts.getAccountNftItems(\n    address,\n    {\n      offset: offset ?? 0,\n      limit: limit ?? MAX_LIMIT,\n      indirect_ownership: true,\n      collection,\n    },\n  )).nft_items;\n}\n\nexport async function fetchAccountEvents(network: ApiNetwork, address: string, fromSec: number, limit?: number) {\n  return (await getApi(network).accounts.getAccountEvents(address, {\n    limit: limit ?? EVENTS_LIMIT,\n    start_date: fromSec,\n  })).events;\n}\n","import { beginCell, storeStateInit } from '@ton/core';\n\nimport type { ApiNetwork, ApiWalletVersion } from '../../types';\nimport type { ContractInfo, WalletInfo } from './types';\nimport type { TonWallet } from './util/tonCore';\n\nimport { DEFAULT_WALLET_VERSION } from '../../../config';\nimport { parseAccountId } from '../../../util/account';\nimport { pick } from '../../../util/iteratees';\nimport withCacheAsync from '../../../util/withCacheAsync';\nimport { stringifyTxId } from './util';\nimport { fetchJettonBalances } from './util/tonapiio';\nimport {\n  getTonClient, toBase64Address, walletClassMap,\n} from './util/tonCore';\nimport { fetchStoredAccount, fetchStoredAddress } from '../../common/accounts';\nimport { base64ToBytes, hexToBytes, sha256 } from '../../common/utils';\nimport { ALL_WALLET_VERSIONS, KnownContracts, WORKCHAIN } from './constants';\n\nexport const isAddressInitialized = withCacheAsync(\n  async (network: ApiNetwork, walletOrAddress: TonWallet | string) => {\n    return (await getWalletInfo(network, walletOrAddress)).isInitialized;\n  },\n);\n\nexport const isActiveSmartContract = withCacheAsync(async (network: ApiNetwork, address: string) => {\n  const { isInitialized, isWallet } = await getWalletInfo(network, address);\n  return isInitialized ? !isWallet : undefined;\n}, (value) => value !== undefined);\n\nexport function publicKeyToAddress(\n  network: ApiNetwork,\n  publicKey: Uint8Array,\n  walletVersion: ApiWalletVersion,\n) {\n  const wallet = buildWallet(network, publicKey, walletVersion);\n  return toBase64Address(wallet.address, false, network);\n}\n\nexport function buildWallet(network: ApiNetwork, publicKey: Uint8Array, walletVersion: ApiWalletVersion): TonWallet {\n  const client = getTonClient(network);\n  const WalletClass = walletClassMap[walletVersion]!;\n  return client.open(\n    WalletClass.create({\n      publicKey: Buffer.from(publicKey),\n      workchain: WORKCHAIN,\n    }),\n  );\n}\n\nexport async function getWalletInfo(network: ApiNetwork, walletOrAddress: TonWallet | string): Promise<{\n  isInitialized: boolean;\n  isWallet: boolean;\n  seqno: number;\n  balance: bigint;\n  lastTxId?: string;\n}> {\n  const address = typeof walletOrAddress === 'string'\n    ? walletOrAddress\n    : toBase64Address(walletOrAddress.address, undefined, network);\n\n  const {\n    account_state: accountState,\n    wallet: isWallet,\n    seqno = 0,\n    balance,\n    last_transaction_id: {\n      lt,\n      hash,\n    },\n  } = await getTonClient(network).getWalletInfo(address);\n\n  return {\n    isInitialized: accountState === 'active',\n    isWallet,\n    seqno,\n    balance: BigInt(balance || '0'),\n    lastTxId: lt === '0'\n      ? undefined\n      : stringifyTxId({ lt, hash }),\n  };\n}\n\nexport async function getContractInfo(network: ApiNetwork, address: string): Promise<{\n  isInitialized: boolean;\n  isSwapAllowed?: boolean;\n  isWallet?: boolean;\n  contractInfo?: ContractInfo;\n  codeHash?: string;\n}> {\n  const data = await getTonClient(network).getAddressInfo(address);\n\n  const { code, state } = data;\n\n  const codeHash = Buffer.from(await sha256(base64ToBytes(code))).toString('hex');\n  const contractInfo = Object.values(KnownContracts).find((info) => info.hash === codeHash);\n\n  const isInitialized = state === 'active';\n  const isWallet = state === 'active' ? contractInfo?.type === 'wallet' : undefined;\n  const isSwapAllowed = contractInfo?.isSwapAllowed;\n\n  return {\n    isInitialized,\n    isWallet,\n    isSwapAllowed,\n    contractInfo,\n    codeHash,\n  };\n}\n\nexport async function getAccountBalance(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return getWalletBalance(network, address);\n}\n\nexport async function getWalletBalance(network: ApiNetwork, walletOrAddress: TonWallet | string): Promise<bigint> {\n  return (await getWalletInfo(network, walletOrAddress)).balance;\n}\n\nexport async function getWalletSeqno(network: ApiNetwork, walletOrAddress: TonWallet | string): Promise<number> {\n  const { seqno } = await getWalletInfo(network, walletOrAddress);\n  return seqno || 0;\n}\n\nexport async function pickBestWallet(network: ApiNetwork, publicKey: Uint8Array): Promise<{\n  wallet: TonWallet;\n  version: ApiWalletVersion;\n  balance: bigint;\n}> {\n  const allWallets = await getWalletVersionInfos(network, publicKey);\n  const defaultWallet = allWallets.filter(({ version }) => version === DEFAULT_WALLET_VERSION)[0];\n\n  if (defaultWallet.lastTxId) {\n    return defaultWallet;\n  }\n\n  const withBiggestBalance = allWallets.reduce<typeof allWallets[0] | undefined>((best, current) => {\n    return current.balance > (best?.balance ?? 0n) ? current : best;\n  }, undefined);\n\n  if (withBiggestBalance) {\n    return withBiggestBalance;\n  }\n\n  const withLastTx = allWallets.find(({ lastTxId }) => !!lastTxId);\n\n  if (withLastTx) {\n    return withLastTx;\n  }\n\n  // Workaround for NOT holders who do not have transactions\n  const v4Wallet = allWallets.find(({ version }) => version === 'v4R2')!;\n  const v4JettonBalances = await fetchJettonBalances(network, v4Wallet.address);\n  if (v4JettonBalances.length > 0) {\n    return v4Wallet;\n  }\n\n  return defaultWallet;\n}\n\nexport function getWalletVersionInfos(\n  network: ApiNetwork,\n  publicKey: Uint8Array,\n  versions: ApiWalletVersion[] = ALL_WALLET_VERSIONS,\n): Promise<WalletInfo[]> {\n  return Promise.all(versions.map(async (version) => {\n    const wallet = buildWallet(network, publicKey, version);\n    const address = toBase64Address(wallet.address, false, network);\n    const walletInfo = await getWalletInfo(network, wallet);\n\n    return {\n      wallet,\n      address,\n      version,\n      ...pick(walletInfo, ['isInitialized', 'balance', 'lastTxId']),\n    };\n  }));\n}\n\nexport function getWalletVersions(\n  network: ApiNetwork,\n  publicKey: Uint8Array,\n  versions: ApiWalletVersion[] = ALL_WALLET_VERSIONS,\n): {\n    wallet: TonWallet;\n    address: string;\n    version: ApiWalletVersion;\n  }[] {\n  return versions.map((version) => {\n    const wallet = buildWallet(network, publicKey, version);\n    const address = toBase64Address(wallet.address, false, network);\n\n    return {\n      wallet,\n      address,\n      version,\n    };\n  });\n}\n\nexport async function getWalletStateInit(accountId: string) {\n  const wallet = await pickAccountWallet(accountId);\n\n  return beginCell()\n    .storeWritable(storeStateInit(wallet!.init))\n    .endCell();\n}\n\nexport function pickWalletByAddress(network: ApiNetwork, publicKey: Uint8Array, address: string) {\n  address = toBase64Address(address, false, network);\n\n  const allWallets = getWalletVersions(network, publicKey);\n\n  return allWallets.find((w) => w.address === address)!;\n}\n\nexport async function pickAccountWallet(accountId: string) {\n  const { network } = parseAccountId(accountId);\n\n  const { publicKey, version } = await fetchStoredAccount(accountId);\n\n  const publicKeyBytes = hexToBytes(publicKey);\n\n  return buildWallet(network, publicKeyBytes, version);\n}\n\nexport function resolveWalletVersion(wallet: TonWallet) {\n  return Object.entries(walletClassMap)\n    .find(([, walletClass]) => wallet instanceof walletClass)?.[0];\n}\n","import type { StorageKey } from '../storages/types';\nimport type { ApiAccount, ApiNetwork } from '../types';\n\nimport { buildAccountId, parseAccountId } from '../../util/account';\nimport { storage } from '../storages';\n\nconst MIN_ACCOUNT_NUMBER = 0;\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let loginResolve: AnyFunction;\nconst loginPromise = new Promise<void>((resolve) => {\n  loginResolve = resolve;\n});\n\nexport async function getAccountIds(): Promise<string[]> {\n  return Object.keys(await storage.getItem('accounts') || {});\n}\n\nexport async function getAccountIdWithMnemonic() {\n  const byId = await fetchStoredAccounts();\n\n  return Object.entries(byId).find(([,account]) => !account.ledger)?.[0];\n}\n\nexport async function getNewAccountId(network: ApiNetwork) {\n  const ids = (await getAccountIds()).map((accountId) => parseAccountId(accountId).id);\n  const id = ids.length === 0 ? MIN_ACCOUNT_NUMBER : Math.max(...ids) + 1;\n  return buildAccountId({\n    id,\n    network,\n    blockchain: 'ton',\n  });\n}\n\nexport async function fetchStoredPublicKey(accountId: string): Promise<string> {\n  return (await fetchStoredAccount(accountId)).publicKey;\n}\n\nexport async function fetchStoredAddress(accountId: string): Promise<string> {\n  return (await fetchStoredAccount(accountId)).address;\n}\n\nexport function fetchStoredAccount(accountId: string): Promise<ApiAccount> {\n  return getAccountValue(accountId, 'accounts');\n}\n\nexport function fetchStoredAccounts(): Promise<Record<string, ApiAccount>> {\n  return storage.getItem('accounts');\n}\n\nexport async function updateStoredAccount(accountId: string, partial: Partial<ApiAccount>): Promise<void> {\n  const account = await fetchStoredAccount(accountId);\n  return setAccountValue(accountId, 'accounts', {\n    ...account,\n    ...partial,\n  });\n}\n\nexport async function getAccountValue(accountId: string, key: StorageKey) {\n  return (await storage.getItem(key))?.[accountId];\n}\n\nexport async function removeAccountValue(accountId: string, key: StorageKey) {\n  const data = await storage.getItem(key);\n  if (!data) return;\n\n  const { [accountId]: removedValue, ...restData } = data;\n  await storage.setItem(key, restData);\n}\n\nexport async function setAccountValue(accountId: string, key: StorageKey, value: any) {\n  const data = await storage.getItem(key);\n  await storage.setItem(key, { ...data, [accountId]: value });\n}\n\nexport async function removeNetworkAccountsValue(network: string, key: StorageKey) {\n  const data = await storage.getItem(key);\n  if (!data) return;\n\n  for (const accountId of Object.keys(data)) {\n    if (parseAccountId(accountId).network === network) {\n      delete data[accountId];\n    }\n  }\n\n  await storage.setItem(key, data);\n}\n\nexport async function getCurrentNetwork() {\n  const accountId = await getCurrentAccountId();\n  if (!accountId) return undefined;\n  return parseAccountId(accountId).network;\n}\n\nexport async function getCurrentAccountIdOrFail() {\n  const accountId = await getCurrentAccountId();\n  if (!accountId) {\n    throw new Error('The user is not authorized in the wallet');\n  }\n  return accountId;\n}\n\nexport function getCurrentAccountId(): Promise<string | undefined> {\n  return storage.getItem('currentAccountId');\n}\n\nexport function waitLogin() {\n  return loginPromise;\n}\n","import type { ApiAddressInfo, ApiKnownAddresses } from '../types';\n\nimport { RE_LINK_TEMPLATE, RE_TG_BOT_MENTION } from '../../config';\nimport { cleanText } from '../../lib/confusables';\nimport { logDebugError } from '../../util/logs';\nimport { callBackendGet } from './backend';\n\nlet knownAddresses: ApiKnownAddresses = {};\nlet scamMarkers: RegExp[] = [];\nlet trustedSites: Set<string> = new Set();\nlet trustedCollections: Set<string> = new Set();\n\nexport async function tryUpdateKnownAddresses() {\n  try {\n    const data = await callBackendGet<{\n      knownAddresses: Record<string, ApiKnownAddresses>;\n      scamMarkers: string[];\n      trustedSites: string[];\n      trustedCollections: string[];\n    }>('/known-addresses');\n\n    knownAddresses = data.knownAddresses;\n    scamMarkers = data.scamMarkers.map((x) => new RegExp(x, 'i'));\n    trustedSites = new Set(data.trustedSites);\n    trustedCollections = new Set(data.trustedCollections);\n  } catch (err) {\n    logDebugError('tryUpdateKnownAddresses', err);\n  }\n}\n\nexport function getKnownAddresses() {\n  return knownAddresses;\n}\n\nexport function getScamMarkers() {\n  return scamMarkers;\n}\n\nexport function getKnownAddressInfo(address: string): ApiAddressInfo | undefined {\n  return knownAddresses[address];\n}\n\nexport function checkIsTrustedSite(domain: string) {\n  return trustedSites.has(domain.toLowerCase());\n}\n\nexport function checkIsTrustedCollection(address: string) {\n  return trustedCollections.has(address);\n}\n\nexport function checkHasScamLink(text: string) {\n  const matches = cleanText(text).matchAll(RE_LINK_TEMPLATE);\n\n  for (const match of matches) {\n    const host = match.groups?.host;\n    if (host && !checkIsTrustedSite(host)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function checkHasTelegramBotMention(text: string) {\n  return RE_TG_BOT_MENTION.test(cleanText(text));\n}\n","import { BRILLIANT_API_BASE_URL } from '../../config';\nimport { fetchJson, handleFetchErrors } from '../../util/fetch';\n\nconst BAD_REQUEST_CODE = 400;\n\nexport async function callBackendPost<T>(path: string, data: AnyLiteral, options?: {\n  authToken?: string;\n  isAllowBadRequest?: boolean;\n  method?: string;\n}): Promise<T> {\n  const { authToken, isAllowBadRequest, method } = options ?? {};\n\n  const response = await fetch(`${BRILLIANT_API_BASE_URL}${path}`, {\n    method: method ?? 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      ...(authToken && { 'X-Auth-Token': authToken }),\n    },\n    body: JSON.stringify(data),\n  });\n\n  await handleFetchErrors(response, isAllowBadRequest ? [BAD_REQUEST_CODE] : undefined);\n\n  return response.json();\n}\n\nexport function callBackendGet<T = any>(path: string, data?: AnyLiteral, headers?: HeadersInit): Promise<T> {\n  const url = new URL(`${BRILLIANT_API_BASE_URL}${path}`);\n\n  return fetchJson(url, data, { headers });\n}\n","import type { ApiStakingCommonData } from '../types';\n\nexport type AccountCache = { stakedAt?: number };\n\nlet stakingCommonCache: ApiStakingCommonData;\nconst accountCache: Record<string, AccountCache> = {};\n\nexport function getAccountCache(accountId: string, address: string) {\n  return accountCache[`${accountId}:${address}`] ?? {};\n}\n\nexport function updateAccountCache(accountId: string, address: string, partial: Partial<AccountCache>) {\n  const key = `${accountId}:${address}`;\n  accountCache[key] = { ...accountCache[key], ...partial };\n}\n\nexport function setStakingCommonCache(data: ApiStakingCommonData) {\n  stakingCommonCache = data;\n}\n\nexport function getStakingCommonCache() {\n  return stakingCommonCache;\n}\n","import generateUniqueId from '../../util/generateUniqueId';\nimport { ApiUserRejectsError } from '../errors';\n\nconst deferreds = new Map<string, Deferred>();\n\nclass Deferred<T = any> {\n  resolve!: AnyToVoidFunction;\n\n  reject!: AnyToVoidFunction;\n\n  promise = new Promise<T>((resolve, reject) => {\n    this.resolve = resolve;\n    this.reject = reject;\n  });\n}\n\nexport function createDappPromise(promiseId = generateUniqueId()) {\n  const deferred = new Deferred();\n\n  deferreds.set(promiseId, deferred);\n\n  const { promise } = deferred;\n\n  return { promiseId, promise };\n}\n\nexport function resolveDappPromise(promiseId: string, value?: any) {\n  const deferred = deferreds.get(promiseId);\n  if (!deferred) {\n    return;\n  }\n\n  deferred.resolve(value);\n  deferreds.delete(promiseId);\n}\n\nexport function rejectDappPromise(promiseId: string, reason: string = 'Unknown rejection reason') {\n  const deferred = deferreds.get(promiseId);\n  if (!deferred) {\n    return;\n  }\n\n  deferred.reject(new ApiUserRejectsError(reason));\n  deferreds.delete(promiseId);\n}\n\nexport function rejectAllDappPromises(message: string) {\n  Array.from(deferreds.keys()).forEach((id) => {\n    rejectDappPromise(id, message);\n  });\n}\n","import type blockchains from '../blockchains';\nimport type { ApiTransactionExtra } from '../blockchains/ton/types';\nimport type { ApiDbSseConnection } from '../db';\nimport type { StorageKey } from '../storages/types';\nimport type {\n  AccountIdParsed,\n  ApiAccount,\n  ApiLocalTransactionParams,\n  ApiTransaction,\n  ApiTransactionActivity,\n  OnApiUpdate,\n} from '../types';\n\nimport { IS_CAPACITOR, IS_EXTENSION, MAIN_ACCOUNT_ID } from '../../config';\nimport { buildAccountId, parseAccountId } from '../../util/account';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { assert } from '../../util/assert';\nimport { logDebugError } from '../../util/logs';\nimport { toBase64Address } from '../blockchains/ton/util/tonCore';\nimport { getEnvironment } from '../environment';\nimport { storage } from '../storages';\nimport capacitorStorage from '../storages/capacitorStorage';\nimport idbStorage from '../storages/idb';\nimport {\n  checkHasScamLink, checkHasTelegramBotMention, getKnownAddresses, getScamMarkers,\n} from './addresses';\nimport { hexToBytes } from './utils';\n\nlet localCounter = 0;\nconst getNextLocalId = () => `${Date.now()}|${localCounter++}`;\n\nconst actualStateVersion = 16;\nlet migrationEnsurePromise: Promise<void>;\n\nexport function resolveBlockchainKey(accountId: string) {\n  return parseAccountId(accountId).blockchain;\n}\n\nexport function toInternalAccountId(accountId: string) {\n  return buildInternalAccountId(parseAccountId(accountId));\n}\n\nexport function buildInternalAccountId(account: Omit<AccountIdParsed, 'network'>) {\n  const { id, blockchain } = account;\n  return `${id}-${blockchain}`;\n}\n\nexport function buildLocalTransaction(\n  params: ApiLocalTransactionParams,\n  normalizedAddress: string,\n): ApiTransactionActivity {\n  const { amount, ...restParams } = params;\n\n  const transaction: ApiTransaction = updateTransactionMetadata({\n    ...restParams,\n    txId: getNextLocalId(),\n    timestamp: Date.now(),\n    isIncoming: false,\n    amount: -amount,\n    normalizedAddress,\n    extraData: {},\n  });\n\n  return {\n    ...transaction,\n    id: transaction.txId,\n    kind: 'transaction',\n  };\n}\n\nexport function updateTransactionMetadata(transaction: ApiTransactionExtra): ApiTransactionExtra {\n  const {\n    normalizedAddress, comment, type, isIncoming, nft,\n  } = transaction;\n  let { metadata = {} } = transaction;\n\n  const isNftTransfer = type === 'nftTransferred' || type === 'nftReceived' || Boolean(nft);\n  const knownAddresses = getKnownAddresses();\n  const hasScamMarkers = comment ? getScamMarkers().some((sm) => sm.test(comment)) : false;\n  const shouldCheckComment = !hasScamMarkers && comment && isIncoming\n    && (isNftTransfer || comment.toLowerCase().includes('claim'));\n  const hasScamInComment = shouldCheckComment\n    ? (checkHasScamLink(comment) || checkHasTelegramBotMention(comment))\n    : false;\n\n  if (normalizedAddress in knownAddresses) {\n    metadata = { ...metadata, ...knownAddresses[normalizedAddress] };\n  }\n\n  if (hasScamMarkers || hasScamInComment) {\n    metadata.isScam = true;\n  }\n\n  return { ...transaction, metadata };\n}\n\nlet currentOnUpdate: OnApiUpdate | undefined;\n\nexport function connectUpdater(onUpdate: OnApiUpdate) {\n  currentOnUpdate = onUpdate;\n}\n\nexport function disconnectUpdater() {\n  currentOnUpdate = undefined;\n}\n\nexport function isUpdaterAlive(onUpdate: OnApiUpdate) {\n  return currentOnUpdate === onUpdate;\n}\n\nexport function startStorageMigration(onUpdate: OnApiUpdate, ton: typeof blockchains.ton) {\n  migrationEnsurePromise = migrateStorage(onUpdate, ton)\n    .catch((err) => {\n      logDebugError('Migration error', err);\n      currentOnUpdate?.({\n        type: 'showError',\n        error: 'Migration error',\n      });\n    });\n  return migrationEnsurePromise;\n}\n\nexport function waitStorageMigration() {\n  return migrationEnsurePromise;\n}\n\nexport async function migrateStorage(onUpdate: OnApiUpdate, ton: typeof blockchains.ton) {\n  let version = Number(await storage.getItem('stateVersion', true));\n\n  if (version === actualStateVersion) {\n    return;\n  }\n\n  if (IS_CAPACITOR && !version) {\n    if (await storage.getItem('accounts' as StorageKey, true)) {\n      // Fix broken version\n      version = 10;\n    } else {\n      // Prepare for migration to secure storage\n      const idbVersion = await idbStorage.getItem('stateVersion');\n      if (idbVersion) {\n        version = Number(idbVersion);\n      }\n    }\n  }\n\n  // Migration to chrome.storage\n  if (IS_EXTENSION && !version && !(await storage.getItem('addresses' as StorageKey))) {\n    version = await idbStorage.getItem('stateVersion');\n\n    if (version) {\n      // Switching from IndexedDB to `chrome.storage.local`\n      const idbData = await idbStorage.getAll!();\n      await storage.setMany!(idbData);\n    }\n  }\n\n  if (!version) {\n    await storage.setItem('stateVersion', actualStateVersion);\n    return;\n  }\n\n  // First version (v1)\n  if (!version) {\n    // Support multi-accounts\n    const mnemonicEncrypted = await storage.getItem('mnemonicEncrypted' as StorageKey);\n    if (mnemonicEncrypted) {\n      await storage.setItem('mnemonicsEncrypted', JSON.stringify({\n        [MAIN_ACCOUNT_ID]: mnemonicEncrypted,\n      }));\n      await storage.removeItem('mnemonicEncrypted' as StorageKey);\n    }\n\n    // Change accountId format ('0' -> '0-ton', '1-ton-mainnet' -> '1-ton')\n    if (!mnemonicEncrypted) {\n      for (const field of ['mnemonicsEncrypted', 'addresses', 'publicKeys'] as StorageKey[]) {\n        const raw = await storage.getItem(field);\n        if (!raw) continue;\n\n        const oldItem = JSON.parse(raw);\n        const newItem = Object.entries(oldItem).reduce((prevValue, [accountId, data]) => {\n          prevValue[toInternalAccountId(accountId)] = data;\n          return prevValue;\n        }, {} as any);\n\n        await storage.setItem(field, JSON.stringify(newItem));\n      }\n    }\n\n    version = 1;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 1) {\n    const addresses = await storage.getItem('addresses' as StorageKey) as string | undefined;\n    if (addresses && addresses.includes('-undefined')) {\n      for (const field of ['mnemonicsEncrypted', 'addresses', 'publicKeys'] as StorageKey[]) {\n        const newValue = (await storage.getItem(field) as string).replace('-undefined', '-ton');\n        await storage.setItem(field, newValue);\n      }\n    }\n\n    version = 2;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version >= 2 && version <= 4) {\n    for (const key of ['addresses', 'mnemonicsEncrypted', 'publicKeys', 'dapps'] as StorageKey[]) {\n      const rawData = await storage.getItem(key);\n      if (typeof rawData === 'string') {\n        await storage.setItem(key, JSON.parse(rawData));\n      }\n    }\n\n    version = 5;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 5) {\n    const dapps = await storage.getItem('dapps');\n    if (dapps) {\n      for (const accountDapps of Object.values(dapps) as any[]) {\n        for (const dapp of Object.values(accountDapps) as any[]) {\n          dapp.connectedAt = 1;\n        }\n      }\n      await storage.setItem('dapps', dapps);\n    }\n\n    version = 6;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 6) {\n    for (const key of ['addresses', 'mnemonicsEncrypted', 'publicKeys', 'accounts', 'dapps'] as StorageKey[]) {\n      let data = await storage.getItem(key) as AnyLiteral;\n      if (!data) continue;\n\n      data = Object.entries(data).reduce((byAccountId, [internalAccountId, accountData]) => {\n        const parsed = parseAccountId(internalAccountId);\n        const mainnetAccountId = buildAccountId({ ...parsed, network: 'mainnet' });\n        const testnetAccountId = buildAccountId({ ...parsed, network: 'testnet' });\n        return {\n          ...byAccountId,\n          [mainnetAccountId]: accountData,\n          [testnetAccountId]: accountData,\n        };\n      }, {} as AnyLiteral);\n\n      await storage.setItem(key, data);\n    }\n\n    version = 7;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 7) {\n    const addresses = (await storage.getItem('addresses' as StorageKey)) as Record<string, string> | undefined;\n\n    if (addresses) {\n      const publicKeys = (await storage.getItem('publicKeys' as StorageKey)) as Record<string, string>;\n      const accounts = (await storage.getItem('accounts') ?? {}) as Record<string, ApiAccount>;\n\n      for (const [accountId, oldAddress] of Object.entries(addresses)) {\n        const newAddress = toBase64Address(oldAddress, false);\n\n        accounts[accountId] = {\n          ...accounts[accountId],\n          address: newAddress,\n          publicKey: publicKeys[accountId],\n        };\n\n        onUpdate({\n          type: 'updateAccount',\n          accountId,\n          partial: {\n            address: newAddress,\n          },\n        });\n      }\n\n      await storage.setItem('accounts', accounts);\n\n      await storage.removeItem('addresses' as StorageKey);\n      await storage.removeItem('publicKeys' as StorageKey);\n    }\n\n    version = 8;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 8) {\n    if (getEnvironment().isSseSupported) {\n      const dapps = await storage.getItem('dapps');\n\n      if (dapps) {\n        const items: ApiDbSseConnection[] = [];\n\n        for (const accountDapps of Object.values(dapps) as any[]) {\n          for (const dapp of Object.values(accountDapps) as any[]) {\n            if (dapp.sse?.appClientId) {\n              items.push({ clientId: dapp.sse?.appClientId });\n            }\n          }\n        }\n      }\n    }\n\n    version = 9;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 9) {\n    if (IS_CAPACITOR) {\n      const data = await idbStorage.getAll!();\n\n      for (const [key, value] of Object.entries(data)) {\n        await capacitorStorage.setItem(key as StorageKey, value);\n        const newValue = await capacitorStorage.getItem(key as StorageKey, true);\n\n        if (!areDeepEqual(value, newValue)) {\n          throw new Error('Migration error!');\n        }\n      }\n      await idbStorage.clear();\n    }\n\n    version = 10;\n    await storage.setItem('stateVersion', version);\n  }\n\n  let isIosKeychainModeMigrated = false;\n  if (getEnvironment().isIosApp && version >= 10 && version <= 13) {\n    await iosBackupAndMigrateKeychainMode();\n    isIosKeychainModeMigrated = true;\n  }\n\n  if (version === 10 || version === 11 || version === 12) {\n    const accounts: Record<string, {\n      publicKey: string;\n      address: string;\n      version?: string;\n    }> | undefined = await storage.getItem('accounts', true);\n\n    if (accounts) {\n      for (const account of Object.values(accounts)) {\n        const { publicKey, address, version: walletVersion } = account;\n\n        if (walletVersion || !publicKey) continue;\n\n        const publicKeyBytes = hexToBytes(publicKey);\n        const walletInfo = ton.pickWalletByAddress('mainnet', publicKeyBytes, address);\n\n        account.version = walletInfo.version;\n      }\n\n      await storage.setItem('accounts', accounts);\n    }\n\n    version = 13;\n    await storage.setItem('stateVersion', version);\n  }\n\n  if (version === 13) {\n    const accounts: Record<string, {\n      publicKey: string;\n      address: string;\n      version?: string;\n    }> | undefined = await storage.getItem('accounts', true);\n\n    if (accounts) {\n      for (const [accountId, account] of Object.entries(accounts)) {\n        const { network } = parseAccountId(accountId);\n        if (network === 'testnet') {\n          account.address = toBase64Address(account.address, false, network);\n\n          onUpdate({\n            type: 'updateAccount',\n            accountId,\n            partial: {\n              address: account.address,\n            },\n          });\n        }\n      }\n\n      await storage.setItem('accounts', accounts);\n    }\n  }\n\n  if (version === 14 || version === 15) {\n    if (getEnvironment().isIosApp && !isIosKeychainModeMigrated) {\n      await iosBackupAndMigrateKeychainMode();\n    }\n\n    version = 16;\n    await storage.setItem('stateVersion', version);\n  }\n}\n\nasync function iosBackupAndMigrateKeychainMode() {\n  const keys = await capacitorStorage.getKeys();\n\n  if (keys?.length) {\n    const items: [string, any][] = [];\n\n    for (const key of keys) {\n      if (key.startsWith('backup_')) {\n        continue;\n      }\n\n      const backupKey = `backup_${key}` as StorageKey;\n      const value = await capacitorStorage.getItem(key as StorageKey, true);\n\n      assert(value !== undefined, 'Empty value!');\n      await capacitorStorage.setItem(backupKey, value);\n      const backupValue = await capacitorStorage.getItem(backupKey);\n      assert(areDeepEqual(value, backupValue), 'Data has not been saved!');\n\n      items.push([key, value]);\n    }\n\n    for (const [key, value] of items) {\n      let shouldRewrite = false;\n      await capacitorStorage.setItem(key as StorageKey, value).catch(() => {\n        shouldRewrite = true;\n      });\n\n      if (shouldRewrite) {\n        await capacitorStorage.removeItem(key as StorageKey);\n        await capacitorStorage.setItem(key as StorageKey, value);\n      }\n    }\n  }\n}\n","import type { ApiTransactionActivity } from '../types';\n\nimport { createCallbackManager } from '../../util/callbacks';\n\nexport const txCallbacks = createCallbackManager();\n\nexport function whenTxComplete(normalizedAddress: string, amount: bigint) {\n  return new Promise<{ result: boolean; transaction: ApiTransactionActivity }>((resolve) => {\n    txCallbacks.addCallback(\n      function callback(transaction: ApiTransactionActivity) {\n        if (transaction.normalizedAddress === normalizedAddress && transaction.amount === -amount) {\n          txCallbacks.removeCallback(callback);\n          resolve({ result: true, transaction });\n        }\n      },\n    );\n  });\n}\n","import { STAKING_POOLS } from '../../config';\n\nexport function sha256(bytes: Uint8Array) {\n  return crypto.subtle.digest('SHA-256', bytes);\n}\n\nexport function bytesToHex(bytes: Uint8Array) {\n  return Buffer.from(bytes).toString('hex');\n}\n\nexport function hexToBytes(hex: string) {\n  return Uint8Array.from(Buffer.from(hex, 'hex'));\n}\n\nexport function bytesToBase64(bytes: Uint8Array) {\n  return Buffer.from(bytes).toString('base64');\n}\n\nexport function base64ToBytes(base64: string) {\n  return Uint8Array.from(Buffer.from(base64, 'base64'));\n}\n\nexport function base64ToString(base64: string) {\n  return Buffer.from(base64, 'base64').toString('utf-8');\n}\n\nexport function isKnownStakingPool(address: string) {\n  return STAKING_POOLS.some((poolPart) => address.endsWith(poolPart));\n}\n","import type { ApiNft } from './types';\n\nimport Dexie from '../lib/dexie/dexie';\nimport Table = Dexie.Table;\n\nexport type ApiDbNft = ApiNft & {\n  accountId: string;\n  collectionAddress: string;\n};\n\nexport type ApiDbSseConnection = {\n  clientId: string;\n};\n\nconst DB_NANE = 'tables';\n\nexport class ApiDb extends Dexie {\n  nfts!: Table<ApiDbNft>;\n\n  constructor() {\n    super(DB_NANE);\n    this.version(1).stores({\n      nfts: '[accountId+address], accountId, address, collectionAddress',\n    });\n    this.version(2).stores({\n      sseConnections: '&clientId',\n    });\n  }\n}\n\nexport const apiDb = new ApiDb();\n","/*\n * This module is to be used instead of /src/util/environment.ts\n * when `window` is not available (e.g. in a web worker).\n */\nimport type { ApiInitArgs } from './types';\n\nimport {\n  ELECTRON_TONHTTPAPI_MAINNET_API_KEY,\n  ELECTRON_TONHTTPAPI_TESTNET_API_KEY,\n  IS_CAPACITOR,\n  IS_EXTENSION,\n  TONHTTPAPI_MAINNET_API_KEY,\n  TONHTTPAPI_TESTNET_API_KEY,\n} from '../config';\n\nconst ELECTRON_ORIGIN = 'file://';\n\nlet environment: ApiInitArgs & {\n  isDappSupported: boolean;\n  isSseSupported: boolean;\n  apiHeaders?: AnyLiteral;\n  tonhttpapiMainnetKey?: string;\n  tonhttpapiTestnetKey?: string;\n};\n\nexport function setEnvironment(args: ApiInitArgs) {\n  environment = {\n    ...args,\n    isDappSupported: IS_EXTENSION || IS_CAPACITOR || args.isElectron,\n    isSseSupported: args.isElectron || (IS_CAPACITOR && !args.isNativeBottomSheet),\n    // eslint-disable-next-line no-restricted-globals\n    apiHeaders: { 'X-App-Origin': args.isElectron ? ELECTRON_ORIGIN : self?.origin },\n    tonhttpapiMainnetKey: args.isElectron ? ELECTRON_TONHTTPAPI_MAINNET_API_KEY : TONHTTPAPI_MAINNET_API_KEY,\n    tonhttpapiTestnetKey: args.isElectron ? ELECTRON_TONHTTPAPI_TESTNET_API_KEY : TONHTTPAPI_TESTNET_API_KEY,\n  };\n  return environment;\n}\n\nexport function getEnvironment() {\n  return environment;\n}\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from './types';\nimport { ApiCommonError, ApiTransactionError } from './types';\n\nexport class ApiBaseError extends Error {\n  constructor(message?: string, public displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.name = this.constructor.name;\n  }\n}\n\nexport class ApiUserRejectsError extends ApiBaseError {\n  constructor(message: string = 'Canceled by the user') {\n    super(message);\n  }\n}\n\nexport class ApiServerError extends ApiBaseError {\n  constructor(message: string, public statusCode?: number) {\n    super(message, ApiCommonError.ServerError);\n  }\n}\n\nexport class ApiUnsupportedVersionError extends ApiBaseError {\n  constructor(message: string) {\n    super(message, ApiCommonError.UnsupportedVersion);\n  }\n}\n\nexport class ApiHardwareBlindSigningNotEnabled extends ApiBaseError {\n  constructor(message: string = 'Blind signing not enabled') {\n    super(message, ApiTransactionError.HardwareBlindSigningNotEnabled);\n  }\n}\n\nexport class AbortOperationError extends ApiBaseError {\n  constructor(message: string = 'Abort operation') {\n    super(message);\n  }\n}\n\nexport function maybeApiErrors(fn: AnyAsyncFunction) {\n  return async (...args: any) => {\n    try {\n      return await fn(...args);\n    } catch (err) {\n      return handleServerError(err);\n    }\n  };\n}\n\nexport function handleServerError(err: any) {\n  if (err instanceof ApiServerError) {\n    return { error: err.displayError! };\n  }\n  throw err;\n}\n","import { logDebugError } from '../util/logs';\n\ninterface Hooks {\n  onFirstLogin: AnyFunction;\n  onFullLogout: AnyFunction;\n  onWindowNeeded: AnyFunction;\n  onDappDisconnected: (accountId: string, origin: string) => any;\n  onDappsChanged: AnyFunction;\n  onSwapCreated: (accountId: string, fromTimestamp: number) => any;\n}\n\nconst hooks: Partial<{\n  [K in keyof Hooks]: Hooks[K][];\n}> = {};\n\nexport function addHooks(partial: Partial<Hooks>) {\n  for (const [name, hook] of Object.entries(partial) as Entries<Hooks>) {\n    hooks[name] = (hooks[name] ?? []).concat([hook]);\n  }\n}\n\nexport async function callHook<T extends keyof Hooks>(name: T, ...args: Parameters<Hooks[T]>) {\n  for (const hook of hooks[name] ?? []) {\n    try {\n      // @ts-ignore\n      await hook(...args);\n    } catch (err) {\n      logDebugError(`callHooks:${name}`, err);\n    }\n  }\n}\n","import type { ApiAccount, ApiTxIdBySlug } from '../types';\n\nimport { IS_EXTENSION } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { fetchStoredAccount, loginResolve } from '../common/accounts';\nimport { waitStorageMigration } from '../common/helpers';\nimport { callHook } from '../hooks';\nimport { storage } from '../storages';\nimport { deactivateAccountDapp, deactivateAllDapps, onActiveDappAccountUpdated } from './dapps';\nimport {\n  sendUpdateTokens,\n  setupBalanceBasedPolling,\n  setupStakingPolling,\n  setupVestingPolling,\n  setupWalletVersionsPolling,\n} from './polling';\n\nlet activeAccountId: string | undefined;\n\nexport async function activateAccount(accountId: string, newestTxIds?: ApiTxIdBySlug) {\n  await waitStorageMigration();\n\n  const prevAccountId = activeAccountId;\n  const isFirstLogin = !prevAccountId;\n\n  activeAccountId = accountId;\n  await storage.setItem('currentAccountId', accountId);\n  loginResolve();\n\n  if (IS_EXTENSION) {\n    if (prevAccountId && parseAccountId(prevAccountId).network !== parseAccountId(accountId).network) {\n      deactivateAllDapps();\n    }\n\n    void callHook('onFirstLogin');\n\n    onActiveDappAccountUpdated(accountId);\n  }\n\n  if (isFirstLogin) {\n    sendUpdateTokens();\n  }\n\n  void setupBalanceBasedPolling(accountId, newestTxIds);\n  void setupStakingPolling(accountId);\n  void setupWalletVersionsPolling(accountId);\n  void setupVestingPolling(accountId);\n}\n\nexport function deactivateAllAccounts() {\n  deactivateCurrentAccount();\n  activeAccountId = undefined;\n\n  if (IS_EXTENSION) {\n    deactivateAllDapps();\n    void callHook('onFullLogout');\n  }\n}\n\nexport function deactivateCurrentAccount() {\n  if (IS_EXTENSION) {\n    deactivateAccountDapp(activeAccountId!);\n  }\n}\n\nexport function isAccountActive(accountId: string) {\n  return activeAccountId === accountId;\n}\n\nexport function fetchAccount(accountId: string): Promise<ApiAccount> {\n  return fetchStoredAccount(accountId);\n}\n\nexport function getActiveAccountId() {\n  return activeAccountId;\n}\n","import type { LedgerWalletInfo } from '../../util/ledger/types';\nimport type { TonWallet } from '../blockchains/ton/util/tonCore';\nimport type {\n  ApiAccount, ApiNetwork, ApiTxIdBySlug, ApiWalletVersion,\n} from '../types';\nimport { ApiCommonError } from '../types';\n\nimport { DEFAULT_WALLET_VERSION } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport isMnemonicPrivateKey from '../../util/isMnemonicPrivateKey';\nimport blockchains from '../blockchains';\nimport { privateKeyHexToKeyPair } from '../blockchains/ton/auth';\nimport { toBase64Address } from '../blockchains/ton/util/tonCore';\nimport {\n  fetchStoredAccount,\n  getAccountIds,\n  getAccountValue,\n  getNewAccountId,\n  removeAccountValue,\n  removeNetworkAccountsValue,\n  setAccountValue,\n} from '../common/accounts';\nimport { bytesToHex, hexToBytes } from '../common/utils';\nimport { apiDb } from '../db';\nimport { getEnvironment } from '../environment';\nimport { handleServerError } from '../errors';\nimport { storage } from '../storages';\nimport { activateAccount, deactivateAllAccounts, deactivateCurrentAccount } from './accounts';\nimport { removeAccountDapps, removeAllDapps, removeNetworkDapps } from './dapps';\n\nexport function generateMnemonic() {\n  return blockchains.ton.generateMnemonic();\n}\n\nexport async function createWallet(\n  network: ApiNetwork,\n  mnemonic: string[],\n  password: string,\n  version?: ApiWalletVersion,\n) {\n  if (!version) version = DEFAULT_WALLET_VERSION;\n\n  const {\n    mnemonicToKeyPair,\n    publicKeyToAddress,\n  } = blockchains.ton;\n\n  if (!await validateMnemonic(mnemonic)) {\n    throw new Error('Invalid mnemonic');\n  }\n\n  const { publicKey } = await mnemonicToKeyPair(mnemonic);\n  const address = publicKeyToAddress(network, publicKey, version);\n\n  const accountId = await getNewAccountId(network);\n  const result = await storeAccount(accountId, mnemonic, password, {\n    address,\n    publicKey: bytesToHex(publicKey),\n    version,\n  });\n\n  if ('error' in result) {\n    return result as { error: string };\n  }\n\n  void activateAccount(accountId);\n\n  return {\n    accountId,\n    address,\n  };\n}\n\nexport function validateMnemonic(mnemonic: string[]) {\n  return blockchains.ton.validateMnemonic(mnemonic);\n}\n\nexport async function importMnemonic(network: ApiNetwork, mnemonic: string[], password: string) {\n  const {\n    mnemonicToKeyPair,\n    pickBestWallet,\n  } = blockchains.ton;\n\n  const isPrivateKey = isMnemonicPrivateKey(mnemonic);\n\n  if (!isMnemonicPrivateKey(mnemonic) && !await validateMnemonic(mnemonic)) {\n    throw new Error('Invalid mnemonic');\n  }\n\n  const { publicKey } = isPrivateKey ? privateKeyHexToKeyPair(mnemonic[0]) : await mnemonicToKeyPair(mnemonic);\n  let wallet: TonWallet;\n  let version: ApiWalletVersion;\n\n  try {\n    ({ wallet, version } = await pickBestWallet(network, publicKey));\n  } catch (err: any) {\n    return handleServerError(err);\n  }\n\n  const address = toBase64Address(wallet.address, false, network);\n\n  const accountId: string = await getNewAccountId(network);\n  const result = await storeAccount(accountId, mnemonic, password, {\n    publicKey: bytesToHex(publicKey),\n    address,\n    version,\n  });\n\n  if ('error' in result) {\n    return result as { error: string };\n  }\n\n  void activateAccount(accountId);\n\n  return {\n    accountId,\n    address,\n  };\n}\n\nexport async function importLedgerWallet(network: ApiNetwork, walletInfo: LedgerWalletInfo) {\n  const accountId: string = await getNewAccountId(network);\n  const {\n    publicKey, address, index, driver, deviceId, deviceName, version,\n  } = walletInfo;\n\n  await storeHardwareAccount(accountId, {\n    address,\n    publicKey,\n    version,\n    ledger: {\n      index,\n      driver,\n      deviceId,\n      deviceName,\n    },\n  });\n  void activateAccount(accountId);\n\n  return { accountId, address, walletInfo };\n}\n\nexport async function importNewWalletVersion(accountId: string, version: ApiWalletVersion) {\n  const { publicKeyToAddress } = blockchains.ton;\n  const { network } = parseAccountId(accountId);\n\n  const account = await fetchStoredAccount(accountId);\n  const mnemonicEncrypted = await getAccountValue(accountId, 'mnemonicsEncrypted');\n  const publicKey = hexToBytes(account.publicKey);\n\n  const newAddress = publicKeyToAddress(network, publicKey, version);\n  const newAccountId = await getNewAccountId(network);\n  const newAccount: ApiAccount = {\n    address: newAddress,\n    publicKey: account.publicKey,\n    version,\n  };\n\n  await Promise.all([\n    setAccountValue(newAccountId, 'mnemonicsEncrypted', mnemonicEncrypted),\n    setAccountValue(newAccountId, 'accounts', newAccount),\n  ]);\n\n  void activateAccount(newAccountId);\n\n  return {\n    accountId: newAccountId,\n    address: newAddress,\n  };\n}\n\nfunction storeHardwareAccount(accountId: string, account?: ApiAccount) {\n  return setAccountValue(accountId, 'accounts', account);\n}\n\nasync function storeAccount(accountId: string, mnemonic: string[], password: string, account: ApiAccount) {\n  const mnemonicEncrypted = await blockchains.ton.encryptMnemonic(mnemonic, password);\n\n  // This is a defensive approach against potential corrupted encryption reported by some users\n  const decryptedMnemonic = await blockchains.ton.decryptMnemonic(mnemonicEncrypted, password)\n    .catch(() => undefined);\n\n  if (!password || !decryptedMnemonic) {\n    return { error: ApiCommonError.DebugError };\n  }\n\n  await Promise.all([\n    setAccountValue(accountId, 'mnemonicsEncrypted', mnemonicEncrypted),\n    setAccountValue(accountId, 'accounts', account),\n  ]);\n\n  return {};\n}\n\nexport async function removeNetworkAccounts(network: ApiNetwork) {\n  deactivateAllAccounts();\n\n  await Promise.all([\n    removeNetworkAccountsValue(network, 'mnemonicsEncrypted'),\n    removeNetworkAccountsValue(network, 'accounts'),\n    getEnvironment().isDappSupported && removeNetworkDapps(network),\n  ]);\n}\n\nexport async function resetAccounts() {\n  deactivateAllAccounts();\n\n  await Promise.all([\n    storage.removeItem('mnemonicsEncrypted'),\n    storage.removeItem('accounts'),\n    storage.removeItem('currentAccountId'),\n    getEnvironment().isDappSupported && removeAllDapps(),\n    apiDb.nfts.clear(),\n  ]);\n}\n\nexport async function removeAccount(accountId: string, nextAccountId: string, newestTxIds?: ApiTxIdBySlug) {\n  await Promise.all([\n    removeAccountValue(accountId, 'mnemonicsEncrypted'),\n    removeAccountValue(accountId, 'accounts'),\n    getEnvironment().isDappSupported && removeAccountDapps(accountId),\n    apiDb.nfts.where({ accountId }).delete(),\n  ]);\n\n  deactivateCurrentAccount();\n  await activateAccount(nextAccountId, newestTxIds);\n}\n\nexport async function changePassword(oldPassword: string, password: string) {\n  for (const accountId of await getAccountIds()) {\n    const mnemonic = await blockchains.ton.fetchMnemonic(accountId, oldPassword);\n    if (!mnemonic) {\n      throw new Error('Incorrect password');\n    }\n\n    const encryptedMnemonic = await blockchains.ton.encryptMnemonic(mnemonic, password);\n    await setAccountValue(accountId, 'mnemonicsEncrypted', encryptedMnemonic);\n  }\n}\n","import type {\n  ApiDapp, ApiDappsState, ApiNetwork, ApiSite, OnApiUpdate,\n} from '../types';\n\nimport { buildAccountId, parseAccountId } from '../../util/account';\nimport {\n  getAccountValue, removeAccountValue, removeNetworkAccountsValue, setAccountValue,\n} from '../common/accounts';\nimport { callBackendGet } from '../common/backend';\nimport { isUpdaterAlive } from '../common/helpers';\nimport { callHook } from '../hooks';\nimport { storage } from '../storages';\n\nconst activeDappByAccountId: Record<string, string> = {};\n\nlet onUpdate: OnApiUpdate;\n\nexport function initDapps(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport function onActiveDappAccountUpdated(accountId: string) {\n  const activeDappOrigin = getActiveDapp(accountId);\n\n  onUpdate({\n    type: 'updateActiveDapp',\n    accountId,\n    origin: activeDappOrigin,\n  });\n}\n\nexport function activateDapp(accountId: string, origin: string) {\n  const oldAccountId = findActiveDappAccount(origin);\n  activeDappByAccountId[accountId] = origin;\n\n  // The method can be called in headless mode (tonConnect:reconnect)\n  if (!onUpdate || !isUpdaterAlive(onUpdate)) {\n    return;\n  }\n\n  if (oldAccountId) {\n    onUpdate({\n      type: 'updateActiveDapp',\n      accountId: oldAccountId,\n    });\n  }\n\n  onUpdate({\n    type: 'updateActiveDapp',\n    accountId,\n    origin,\n  });\n}\n\nexport function getActiveDapp(accountId: string) {\n  return activeDappByAccountId[accountId];\n}\n\nexport function deactivateDapp(origin: string) {\n  const accountId = findActiveDappAccount(origin);\n  if (!accountId) {\n    return false;\n  }\n\n  deactivateAccountDapp(accountId);\n\n  return true;\n}\n\nexport function findActiveDappAccount(origin: string) {\n  return Object.keys(activeDappByAccountId).find((acc) => origin === activeDappByAccountId[acc]);\n}\n\nexport function deactivateAccountDapp(accountId: string) {\n  const activeOrigin = activeDappByAccountId[accountId];\n  if (!activeOrigin) {\n    return false;\n  }\n\n  delete activeDappByAccountId[accountId];\n\n  if (onUpdate && isUpdaterAlive(onUpdate)) {\n    onUpdate({\n      type: 'updateActiveDapp',\n      accountId,\n    });\n  }\n\n  return true;\n}\n\nexport function deactivateAllDapps() {\n  for (const [accountId, value] of Object.entries(activeDappByAccountId)) {\n    if (!value) {\n      continue;\n    }\n\n    delete activeDappByAccountId[accountId];\n\n    onUpdate({\n      type: 'updateActiveDapp',\n      accountId,\n    });\n  }\n}\n\nexport function isDappActive(accountId: string, origin: string) {\n  return activeDappByAccountId[accountId] === origin;\n}\n\nexport async function updateDapp(accountId: string, origin: string, updater: (dapp: ApiDapp) => ApiDapp) {\n  const dapp = await getDapp(accountId, origin);\n  await addDapp(accountId, updater(dapp!));\n}\n\nexport async function getDapp(accountId: string, origin: string): Promise<ApiDapp | undefined> {\n  return (await getAccountValue(accountId, 'dapps'))[origin];\n}\n\nexport async function addDapp(accountId: string, dapp: ApiDapp) {\n  const dapps = await getDappsByOrigin(accountId);\n  dapps[dapp.origin] = dapp;\n  await setAccountValue(accountId, 'dapps', dapps);\n}\n\nexport async function deleteDapp(accountId: string, origin: string, dontNotifyDapp?: boolean) {\n  const dapps = await getDappsByOrigin(accountId);\n  if (!(origin in dapps)) {\n    return false;\n  }\n\n  if (isDappActive(accountId, origin)) {\n    deactivateAccountDapp(accountId);\n  }\n\n  delete dapps[origin];\n  await setAccountValue(accountId, 'dapps', dapps);\n\n  if (onUpdate && isUpdaterAlive(onUpdate)) {\n    onUpdate({\n      type: 'dappDisconnect',\n      accountId,\n      origin,\n    });\n  }\n\n  if (!dontNotifyDapp) {\n    await callHook('onDappDisconnected', accountId, origin);\n  }\n\n  await callHook('onDappsChanged');\n\n  return true;\n}\n\nexport async function deleteAllDapps(accountId: string) {\n  deactivateAccountDapp(accountId);\n\n  const origins = Object.keys(await getDappsByOrigin(accountId));\n  await setAccountValue(accountId, 'dapps', {});\n\n  origins.forEach((origin) => {\n    onUpdate({\n      type: 'dappDisconnect',\n      accountId,\n      origin,\n    });\n    void callHook('onDappDisconnected', accountId, origin);\n  });\n\n  await callHook('onDappsChanged');\n}\n\nexport async function getDapps(accountId: string): Promise<ApiDapp[]> {\n  return Object.values(await getDappsByOrigin(accountId));\n}\n\nexport async function getDappsByOrigin(accountId: string): Promise<Record<string, ApiDapp>> {\n  return await getAccountValue(accountId, 'dapps') || {};\n}\n\nexport async function findLastConnectedAccount(network: ApiNetwork, origin: string) {\n  const dapps = await getDappsState() || {};\n\n  let connectedAt = 0;\n  let lastConnectedAccountId: string | undefined;\n\n  Object.entries(dapps).forEach(([accountId, byOrigin]) => {\n    if (!(origin in byOrigin)) return;\n\n    if ((byOrigin[origin].connectedAt) > connectedAt) {\n      connectedAt = byOrigin[origin].connectedAt;\n      lastConnectedAccountId = accountId;\n    }\n  });\n\n  if (!lastConnectedAccountId) {\n    return undefined;\n  }\n\n  return buildAccountId({ ...parseAccountId(lastConnectedAccountId), network });\n}\n\nexport function getDappsState(): Promise<ApiDappsState | undefined> {\n  return storage.getItem('dapps');\n}\n\nexport async function removeAccountDapps(accountId: string) {\n  await removeAccountValue(accountId, 'dapps');\n\n  void callHook('onDappsChanged');\n}\n\nexport async function removeAllDapps() {\n  await storage.removeItem('dapps');\n\n  await callHook('onDappsChanged');\n}\n\nexport function removeNetworkDapps(network: ApiNetwork) {\n  return removeNetworkAccountsValue(network, 'dapps');\n}\n\nexport function getSseLastEventId(): Promise<string | undefined> {\n  return storage.getItem('sseLastEventId');\n}\n\nexport function setSseLastEventId(lastEventId: string) {\n  return storage.setItem('sseLastEventId', lastEventId);\n}\n\nexport function loadExploreSites(): Promise<ApiSite[]> {\n  return callBackendGet('/dapp/catalog');\n}\n","import '../../util/bigintPatch';\n\nexport * from './auth';\nexport * from './wallet';\nexport * from './transactions';\nexport * from './nfts';\nexport * from './polling';\nexport * from './accounts';\nexport * from './staking';\nexport * from './tokens';\nexport {\n  initDapps,\n  getActiveDapp,\n  getDapps,\n  getDappsByOrigin,\n  deleteDapp,\n  deleteAllDapps,\n  deactivateDapp,\n  loadExploreSites,\n} from './dapps';\nexport {\n  startSseConnection,\n} from '../tonConnect/sse';\nexport * from './swap';\nexport * from './other';\nexport * from './prices';\nexport * from './preload';\nexport * from './vesting';\n","import type { ApiInitArgs, OnApiUpdate } from '../types';\n\nimport { IS_CAPACITOR } from '../../config';\nimport { initWindowConnector } from '../../util/capacitorStorageProxy/connector';\nimport blockchains from '../blockchains';\nimport { connectUpdater, startStorageMigration } from '../common/helpers';\nimport { setEnvironment } from '../environment';\nimport { addHooks } from '../hooks';\nimport * as tonConnect from '../tonConnect';\nimport * as tonConnectSse from '../tonConnect/sse';\nimport * as methods from '.';\n\naddHooks({\n  onDappDisconnected: tonConnectSse.sendSseDisconnect,\n  onDappsChanged: tonConnectSse.resetupSseConnection,\n});\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport default async function init(onUpdate: OnApiUpdate, args: ApiInitArgs) {\n  connectUpdater(onUpdate);\n  const environment = setEnvironment(args);\n\n  if (IS_CAPACITOR) {\n    initWindowConnector();\n  }\n\n  methods.initPolling(onUpdate, methods.isAccountActive);\n  methods.initTransactions(onUpdate);\n  methods.initStaking();\n  methods.initSwap(onUpdate);\n  methods.initNfts(onUpdate);\n\n  if (environment.isDappSupported) {\n    methods.initDapps(onUpdate);\n    tonConnect.initTonConnect(onUpdate);\n  }\n\n  if (environment.isSseSupported) {\n    tonConnectSse.initSse(onUpdate);\n  }\n\n  await startStorageMigration(onUpdate, blockchains.ton);\n\n  if (environment.isSseSupported) {\n    void tonConnectSse.resetupSseConnection();\n  }\n}\n","import type { ApiDbNft } from '../db';\nimport type { ApiNft, ApiUpdate, OnApiUpdate } from '../types';\n\nimport { TONCOIN_SLUG } from '../../config';\nimport blockchains from '../blockchains';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { resolveBlockchainKey } from '../common/helpers';\nimport { apiDb } from '../db';\nimport { createLocalTransaction } from './transactions';\n\nlet onUpdate: OnApiUpdate;\n\nexport function initNfts(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport function fetchNfts(accountId: string) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  return blockchain.getAccountNfts(accountId);\n}\n\nexport async function processNftUpdates(accountId: string, updates: ApiUpdate[]) {\n  updates.filter((update) => !(update.type === 'nftReceived' && update.nft.isHidden)).forEach(onUpdate);\n\n  for (const update of updates) {\n    if (update.type === 'nftSent') {\n      const key = [accountId, update.nftAddress];\n      await apiDb.nfts.delete(key);\n    } else if (update.type === 'nftReceived') {\n      const dbNft = convertToDbEntity(accountId, update.nft);\n      await apiDb.nfts.put(dbNft);\n    } else if (update.type === 'nftPutUpForSale') {\n      const key = [accountId, update.nftAddress];\n      await apiDb.nfts.update(key, { isOnSale: true });\n    }\n  }\n}\n\nexport async function updateAccountNfts(accountId: string, nfts: ApiNft[]) {\n  onUpdate({\n    type: 'updateNfts',\n    accountId,\n    nfts,\n  });\n\n  const dbNfts = nfts.map((nft) => convertToDbEntity(accountId, nft));\n\n  await apiDb.nfts.where({ accountId }).delete();\n  await apiDb.nfts.bulkPut(dbNfts);\n}\n\nfunction convertToDbEntity(accountId: string, nft: ApiNft): ApiDbNft {\n  return {\n    ...nft,\n    collectionAddress: nft.collectionAddress ?? '',\n    accountId,\n  };\n}\n\nexport function checkNftTransferDraft(options: {\n  accountId: string;\n  nftAddresses: string[];\n  toAddress: string;\n  comment?: string;\n}) {\n  const blockchain = blockchains[resolveBlockchainKey(options.accountId)!];\n\n  return blockchain.checkNftTransferDraft(options);\n}\n\nexport async function submitNftTransfers(\n  accountId: string,\n  password: string,\n  nftAddresses: string[],\n  toAddress: string,\n  comment?: string,\n  nfts?: ApiNft[],\n  fee = 0n,\n) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const result = await blockchain.submitNftTransfers({\n    accountId, password, nftAddresses, toAddress, comment, nfts,\n  });\n\n  if ('error' in result) {\n    return result;\n  }\n\n  for (const [i, message] of result.messages.entries()) {\n    createLocalTransaction(accountId, {\n      amount: message.amount,\n      fromAddress,\n      toAddress: message.toAddress,\n      comment,\n      fee,\n      slug: TONCOIN_SLUG,\n      inMsgHash: result.msgHash,\n      type: 'nftTransferred',\n      nft: nfts?.[i],\n    });\n  }\n\n  return result;\n}\n","import nacl, { randomBytes } from 'tweetnacl';\n\nimport type { AccountCache } from '../common/cache';\nimport type { ApiBlockchainKey, ApiNetwork } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { setIsAppFocused } from '../../util/pauseOrFocus';\nimport blockchains from '../blockchains';\nimport { fetchStoredAccount, fetchStoredAccounts, updateStoredAccount } from '../common/accounts';\nimport { updateAccountCache } from '../common/cache';\nimport { storage } from '../storages';\n\nconst SIGN_MESSAGE = Buffer.from('MyTonWallet_AuthToken_n6i0k4w8pb');\nlet clientId: string | undefined;\n\nexport function checkApiAvailability(options: {\n  accountId: string;\n} | {\n  network: ApiNetwork;\n  blockchainKey: ApiBlockchainKey;\n}) {\n  let network: ApiNetwork;\n  let blockchainKey: ApiBlockchainKey;\n  if ('network' in options) {\n    ({ network, blockchainKey } = options);\n  } else {\n    ({ network, blockchain: blockchainKey } = parseAccountId(options.accountId));\n  }\n\n  const blockchain = blockchains[blockchainKey];\n\n  return blockchain.checkApiAvailability(network);\n}\n\nexport async function getBackendAuthToken(accountId: string, password: string) {\n  const account = await fetchStoredAccount(accountId);\n  let authToken = account.authToken;\n\n  if (!authToken) {\n    const privateKey = await blockchains.ton.fetchPrivateKey(accountId, password);\n    const signature = nacl.sign.detached(SIGN_MESSAGE, privateKey!);\n    authToken = Buffer.from(signature).toString('base64');\n\n    await updateStoredAccount(accountId, { authToken });\n  }\n\n  if (!account.isInitialized) {\n    authToken += `:${account.publicKey}`;\n  }\n\n  return authToken;\n}\n\nexport async function getClientId() {\n  clientId = await storage.getItem('clientId');\n  if (!clientId) {\n    clientId = Buffer.from(randomBytes(10)).toString('hex');\n    await storage.setItem('clientId', clientId);\n  }\n  return clientId;\n}\n\nexport async function fetchAccountConfigForDebugPurposesOnly() {\n  try {\n    const [accounts, mnemonicsEncrypted, stateVersion] = await Promise.all([\n      fetchStoredAccounts(),\n      storage.getItem('mnemonicsEncrypted'),\n      storage.getItem('stateVersion'),\n    ]);\n\n    return JSON.stringify({ accounts, mnemonicsEncrypted, stateVersion });\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n\n    return undefined;\n  }\n}\n\nexport function ping() {\n  return true;\n}\n\nexport function updateAccountMemoryCache(accountId: string, address: string, partial: Partial<AccountCache>) {\n  updateAccountCache(accountId, address, partial);\n}\n\nexport { setIsAppFocused };\n","import type { TokenBalanceParsed } from '../blockchains/ton/tokens';\nimport type {\n  ApiBackendStakingState,\n  ApiBalanceBySlug,\n  ApiBaseCurrency,\n  ApiBaseToken,\n  ApiCountryCode,\n  ApiNftUpdate,\n  ApiStakingCommonData,\n  ApiStakingState,\n  ApiSwapAsset,\n  ApiTokenPrice,\n  ApiTransactionActivity,\n  ApiTxIdBySlug,\n  ApiVestingInfo,\n  ApiWalletInfo,\n  OnApiUpdate,\n} from '../types';\n\nimport { DEFAULT_PRICE_CURRENCY, POPULAR_WALLET_VERSIONS, TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { compareActivities } from '../../util/compareActivities';\nimport { buildCollectionByKey, omit } from '../../util/iteratees';\nimport { logDebugError } from '../../util/logs';\nimport { pauseOrFocus } from '../../util/pauseOrFocus';\nimport blockchains from '../blockchains';\nimport { addKnownToken, addKnownTokens, getKnownTokens } from '../blockchains/ton/tokens';\nimport { fetchStoredAccount, updateStoredAccount } from '../common/accounts';\nimport { tryUpdateKnownAddresses } from '../common/addresses';\nimport { callBackendGet } from '../common/backend';\nimport { getStakingCommonCache } from '../common/cache';\nimport { isUpdaterAlive, resolveBlockchainKey } from '../common/helpers';\nimport { txCallbacks } from '../common/txCallbacks';\nimport { hexToBytes } from '../common/utils';\nimport { AbortOperationError } from '../errors';\nimport { processNftUpdates, updateAccountNfts } from './nfts';\nimport { resolveDataPreloadPromise } from './preload';\nimport { getBaseCurrency } from './prices';\nimport { getBackendStakingState, tryUpdateStakingCommonData } from './staking';\nimport { swapGetAssets, swapReplaceTransactionsByRanges } from './swap';\nimport { fetchVestings } from './vesting';\n\ntype IsAccountActiveFn = (accountId: string) => boolean;\n\ntype AccountBalanceCache = {\n  balance?: bigint;\n  tokenBalances?: ApiBalanceBySlug;\n};\n\nconst SEC = 1000;\nconst BALANCE_BASED_INTERVAL = 1.1 * SEC;\nconst BALANCE_BASED_INTERVAL_WHEN_NOT_FOCUSED = 10 * SEC;\nconst STAKING_INTERVAL = 5 * SEC;\nconst STAKING_INTERVAL_WHEN_NOT_FOCUSED = 10 * SEC;\nconst BACKEND_INTERVAL = 30 * SEC;\nconst LONG_BACKEND_INTERVAL = 60 * SEC;\nconst NFT_FULL_INTERVAL = 60 * SEC;\nconst VERSIONS_INTERVAL = 5 * 60 * SEC;\nconst VERSIONS_INTERVAL_WHEN_NOT_FOCUSED = 15 * 60 * SEC;\nconst VESTING_INTERVAL = 10 * SEC;\nconst VESTING_INTERVAL_WHEN_NOT_FOCUSED = 60 * SEC;\nconst INCORRECT_TIME_DIFF = 30 * SEC;\n\nconst FIRST_TRANSACTIONS_LIMIT = 50;\nconst DOUBLE_CHECK_TOKENS_PAUSE = 30 * SEC;\n\nlet onUpdate: OnApiUpdate;\nlet isAccountActive: IsAccountActiveFn;\n\nconst prices: {\n  baseCurrency: ApiBaseCurrency;\n  bySlug: Record<string, ApiTokenPrice>;\n} = {\n  baseCurrency: DEFAULT_PRICE_CURRENCY,\n  bySlug: {},\n};\n\nconst lastBalanceCache: Record<string, AccountBalanceCache> = {};\n\nexport async function initPolling(_onUpdate: OnApiUpdate, _isAccountActive: IsAccountActiveFn) {\n  onUpdate = _onUpdate;\n  isAccountActive = _isAccountActive;\n\n  await tryUpdatePrices();\n\n  Promise.allSettled([\n    tryUpdateKnownAddresses(),\n    tryUpdateTokens(_onUpdate),\n    tryLoadSwapTokens(_onUpdate),\n    tryUpdateStakingCommonData(),\n  ]).then(() => resolveDataPreloadPromise());\n\n  void tryUpdateConfig(_onUpdate);\n\n  void setupBackendPolling();\n  void setupLongBackendPolling();\n}\n\nfunction registerNewTokens(tokenBalances: TokenBalanceParsed[]) {\n  const tokens = getKnownTokens();\n  let areNewTokensFound = false;\n\n  for (const { token } of tokenBalances.filter(Boolean)) {\n    if (token.slug in tokens) continue;\n\n    areNewTokensFound = true;\n    addKnownToken({\n      ...token,\n      quote: prices.bySlug[token.slug] || {\n        slug: token.slug,\n        price: 0.0,\n        priceUsd: 0.0,\n        percentChange24h: 0.0,\n      },\n    });\n  }\n\n  if (areNewTokensFound) {\n    sendUpdateTokens();\n  }\n}\n\nexport async function setupBalanceBasedPolling(accountId: string, newestTxIds: ApiTxIdBySlug = {}) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  delete lastBalanceCache[accountId];\n\n  const { network } = parseAccountId(accountId);\n  const account = await fetchStoredAccount(accountId);\n  const { address } = account;\n  let { isInitialized } = account;\n\n  let nftFromSec = Math.round(Date.now() / 1000);\n  let nftUpdates: ApiNftUpdate[];\n  let lastNftFullUpdate = 0;\n  let doubleCheckTokensTime: number | undefined;\n  let tokenBalances: TokenBalanceParsed[] | undefined;\n\n  const localOnUpdate = onUpdate;\n\n  async function updateBalance(cache: AccountBalanceCache) {\n    const walletInfo = await blockchain.getWalletInfo(network, address);\n    const { balance, lastTxId } = walletInfo ?? {};\n    const isToncoinBalanceChanged = balance !== undefined && balance !== cache?.balance;\n    const balancesToUpdate: ApiBalanceBySlug = {};\n\n    if (isToncoinBalanceChanged) {\n      balancesToUpdate[TONCOIN_SLUG] = balance;\n\n      lastBalanceCache[accountId] = {\n        ...lastBalanceCache[accountId],\n        balance,\n      };\n    }\n\n    return {\n      lastTxId, isToncoinBalanceChanged, balancesToUpdate,\n    };\n  }\n\n  async function updateNfts(isToncoinBalanceChanged: boolean) {\n    if (Date.now() - lastNftFullUpdate < NFT_FULL_INTERVAL) {\n      // Partial update\n      if (isToncoinBalanceChanged) {\n        const nftResult = await blockchain.getNftUpdates(accountId, nftFromSec).catch(logAndRescue);\n\n        throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n        if (nftResult) {\n          [nftFromSec, nftUpdates] = nftResult;\n          void processNftUpdates(accountId, nftUpdates);\n        }\n      }\n    } else {\n      // Full update\n      const nfts = await blockchain.getAccountNfts(accountId).catch(logAndRescue);\n      lastNftFullUpdate = Date.now();\n\n      throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n      if (nfts) {\n        nftFromSec = Math.round(Date.now() / 1000);\n        void updateAccountNfts(accountId, nfts);\n      }\n    }\n  }\n\n  async function updateTokenBalances(\n    isToncoinBalanceChanged: boolean,\n    cache: AccountBalanceCache,\n    balancesToUpdate: ApiBalanceBySlug,\n  ) {\n    const changedTokenSlugs: string[] = [];\n\n    if (isToncoinBalanceChanged || (doubleCheckTokensTime && doubleCheckTokensTime < Date.now())) {\n      doubleCheckTokensTime = isToncoinBalanceChanged ? Date.now() + DOUBLE_CHECK_TOKENS_PAUSE : undefined;\n      tokenBalances = await blockchain.getAccountTokenBalances(accountId).catch(logAndRescue);\n\n      throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n      if (tokenBalances) {\n        registerNewTokens(tokenBalances);\n\n        tokenBalances.forEach(({ slug, balance: tokenBalance }) => {\n          const cachedBalance = cache?.tokenBalances && cache.tokenBalances[slug];\n          if (cachedBalance === tokenBalance) return;\n\n          changedTokenSlugs.push(slug);\n          balancesToUpdate[slug] = tokenBalance;\n        });\n\n        lastBalanceCache[accountId] = {\n          ...lastBalanceCache[accountId],\n          tokenBalances: Object.fromEntries(tokenBalances.map(\n            ({ slug, balance: tokenBalance }) => [slug, tokenBalance],\n          )),\n        };\n      }\n\n      if (Object.keys(balancesToUpdate).length > 0) {\n        onUpdate({\n          type: 'updateBalances',\n          accountId,\n          balancesToUpdate,\n        });\n      }\n    }\n\n    onUpdate({ type: 'updatingStatus', kind: 'balance', isUpdating: false });\n\n    return changedTokenSlugs;\n  }\n\n  async function updateActivities(isToncoinBalanceChanged: boolean, changedTokenSlugs: string[], lastTxId?: string) {\n    if (isToncoinBalanceChanged || changedTokenSlugs.length) {\n      if (lastTxId) {\n        await blockchain.waitUntilTransactionAppears(network, address, lastTxId);\n      }\n\n      const newTxIds = await processNewActivities(accountId, newestTxIds, changedTokenSlugs, tokenBalances);\n      newestTxIds = { ...newestTxIds, ...newTxIds };\n    }\n\n    onUpdate({ type: 'updatingStatus', kind: 'activities', isUpdating: false });\n  }\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      onUpdate({ type: 'updatingStatus', kind: 'activities', isUpdating: true });\n      onUpdate({ type: 'updatingStatus', kind: 'balance', isUpdating: true });\n\n      const cache = lastBalanceCache[accountId];\n\n      const {\n        lastTxId,\n        isToncoinBalanceChanged,\n        balancesToUpdate,\n      } = await updateBalance(cache);\n\n      throwErrorIfUpdaterNotAlive(localOnUpdate, accountId);\n\n      const changedTokenSlugs = await updateTokenBalances(isToncoinBalanceChanged, cache, balancesToUpdate);\n\n      await Promise.all([\n        updateActivities(isToncoinBalanceChanged, changedTokenSlugs, lastTxId),\n        updateNfts(isToncoinBalanceChanged),\n      ]);\n\n      if (isToncoinBalanceChanged && !isInitialized && await blockchain.isAddressInitialized(network, address)) {\n        isInitialized = true;\n        await updateStoredAccount(accountId, { isInitialized });\n      }\n    } catch (err) {\n      if (err instanceof AbortOperationError) {\n        return;\n      }\n      logDebugError('setupBalanceBasedPolling', err);\n    }\n\n    await pauseOrFocus(BALANCE_BASED_INTERVAL, BALANCE_BASED_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n\nfunction throwErrorIfUpdaterNotAlive(localOnUpdate: OnApiUpdate, accountId: string) {\n  if (!isAlive(localOnUpdate, accountId)) {\n    throw new AbortOperationError();\n  }\n}\n\nexport async function setupStakingPolling(accountId: string) {\n  const { blockchain: blockchainKey, network } = parseAccountId(accountId);\n  const blockchain = blockchains[blockchainKey];\n\n  if (network !== 'mainnet') {\n    return;\n  }\n\n  const localOnUpdate = onUpdate;\n  let lastState: {\n    stakingCommonData: ApiStakingCommonData;\n    backendStakingState: ApiBackendStakingState;\n    stakingState: ApiStakingState;\n  } | undefined;\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      const stakingCommonData = getStakingCommonCache();\n      const backendStakingState = await getBackendStakingState(accountId);\n      const stakingState = await blockchain.getStakingState(accountId, backendStakingState);\n\n      if (!isAlive(localOnUpdate, accountId)) return;\n\n      const state = {\n        stakingCommonData,\n        backendStakingState,\n        stakingState,\n      };\n\n      if (!areDeepEqual(state, lastState)) {\n        lastState = state;\n        onUpdate({\n          type: 'updateStaking',\n          accountId,\n          ...state,\n        });\n      }\n    } catch (err) {\n      logDebugError('setupStakingPolling', err);\n    }\n\n    await pauseOrFocus(STAKING_INTERVAL, STAKING_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n\nasync function processNewActivities(\n  accountId: string,\n  newestTxIds: ApiTxIdBySlug,\n  tokenSlugs: string[],\n  tokenBalances?: TokenBalanceParsed[],\n): Promise<ApiTxIdBySlug> {\n  const { network, blockchain } = parseAccountId(accountId);\n  const activeBlockchain = blockchains[blockchain];\n\n  const chunks: ApiTransactionActivity[][] = [];\n  const result: [string, string | undefined][] = [];\n\n  // Process TON transactions first\n  {\n    const slug = TONCOIN_SLUG;\n    let newestTxId = newestTxIds[slug];\n\n    const transactions = await activeBlockchain.getTokenTransactionSlice(\n      accountId, slug, undefined, newestTxId, FIRST_TRANSACTIONS_LIMIT,\n    );\n\n    if (transactions.length) {\n      newestTxId = transactions[0]!.txId;\n      chunks.push(transactions);\n    }\n\n    result.push([slug, newestTxId]);\n\n    // Find affected token wallets\n    const tokenBalanceByAddress = buildCollectionByKey(tokenBalances ?? [], 'jettonWallet');\n    transactions.forEach(({ isIncoming, toAddress, fromAddress }) => {\n      const address = isIncoming ? fromAddress : toAddress;\n      const tokenBalance: TokenBalanceParsed | undefined = tokenBalanceByAddress[address];\n\n      if (tokenBalance && !tokenSlugs.includes(tokenBalance.slug)) {\n        tokenSlugs = tokenSlugs.concat([tokenBalance.slug]);\n      }\n    });\n  }\n\n  // Process token transactions\n  await Promise.all(tokenSlugs.map(async (slug) => {\n    let newestTxId = newestTxIds[slug];\n\n    const transactions = await activeBlockchain.getTokenTransactionSlice(\n      accountId, slug, undefined, newestTxId, FIRST_TRANSACTIONS_LIMIT,\n    );\n\n    if (transactions.length) {\n      newestTxId = transactions[0]!.txId;\n      chunks.push(transactions);\n    }\n\n    result.push([slug, newestTxId]);\n  }));\n\n  const allTransactions = chunks.flat().sort(compareActivities);\n\n  const isFirstRun = !Object.keys(newestTxIds).length;\n  const activities = await swapReplaceTransactionsByRanges(accountId, allTransactions, chunks, isFirstRun);\n\n  allTransactions.slice().reverse().forEach((transaction) => {\n    txCallbacks.runCallbacks(transaction);\n  });\n\n  await activeBlockchain.fixTokenActivitiesAddressForm(network, activities);\n\n  onUpdate({\n    type: 'newActivities',\n    activities,\n    accountId,\n  });\n\n  return Object.fromEntries(result);\n}\n\nexport async function setupBackendPolling() {\n  const localOnUpdate = onUpdate;\n\n  while (isUpdaterAlive(localOnUpdate)) {\n    await pauseOrFocus(BACKEND_INTERVAL);\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    try {\n      await tryUpdatePrices(localOnUpdate);\n      await tryUpdateTokens(localOnUpdate);\n    } catch (err) {\n      logDebugError('setupBackendPolling', err);\n    }\n  }\n}\n\nexport async function setupLongBackendPolling() {\n  const localOnUpdate = onUpdate;\n\n  while (isUpdaterAlive(localOnUpdate)) {\n    await pauseOrFocus(LONG_BACKEND_INTERVAL);\n\n    await Promise.all([\n      tryUpdateKnownAddresses(),\n      tryUpdateStakingCommonData(),\n      tryUpdateConfig(localOnUpdate),\n    ]);\n  }\n}\n\nexport async function tryUpdatePrices(localOnUpdate?: OnApiUpdate) {\n  if (!localOnUpdate) {\n    localOnUpdate = onUpdate;\n  }\n\n  try {\n    const baseCurrency = await getBaseCurrency();\n    const pricesData = await callBackendGet<Record<string, ApiTokenPrice>>('/prices/current', {\n      base: baseCurrency,\n    });\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    prices.bySlug = buildCollectionByKey(Object.values(pricesData), 'slug');\n    prices.baseCurrency = baseCurrency;\n  } catch (err) {\n    logDebugError('tryUpdatePrices', err);\n  }\n}\n\nexport async function tryUpdateTokens(localOnUpdate?: OnApiUpdate) {\n  if (!localOnUpdate) {\n    localOnUpdate = onUpdate;\n  }\n\n  try {\n    const tokens = await callBackendGet<ApiBaseToken[]>('/known-tokens');\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    addKnownTokens(tokens);\n\n    sendUpdateTokens();\n  } catch (err) {\n    logDebugError('tryUpdateTokens', err);\n  }\n}\n\nexport async function tryLoadSwapTokens(localOnUpdate?: OnApiUpdate) {\n  if (!localOnUpdate) {\n    localOnUpdate = onUpdate;\n  }\n\n  try {\n    const assets = await swapGetAssets();\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    const tokens = assets.reduce((acc: Record<string, ApiSwapAsset>, asset) => {\n      acc[asset.slug] = {\n        ...asset,\n        contract: asset.contract ?? asset.slug,\n        price: prices.bySlug[asset.slug]?.price ?? 0,\n      };\n      return acc;\n    }, {});\n\n    onUpdate({\n      type: 'updateSwapTokens',\n      tokens,\n    });\n  } catch (err) {\n    logDebugError('tryLoadSwapTokens', err);\n  }\n}\n\nexport async function tryUpdateConfig(localOnUpdate: OnApiUpdate) {\n  try {\n    const {\n      isLimited,\n      isCopyStorageEnabled = false,\n      supportAccountsCount = 1,\n      now: serverUtc,\n      country: countryCode,\n    } = await callBackendGet<{\n      isLimited: boolean;\n      isCopyStorageEnabled?: boolean;\n      supportAccountsCount?: number;\n      now: number;\n      country: ApiCountryCode;\n    }>('/utils/get-config');\n\n    if (!isUpdaterAlive(localOnUpdate)) return;\n\n    onUpdate({\n      type: 'updateConfig',\n      isLimited,\n      isCopyStorageEnabled,\n      supportAccountsCount,\n      countryCode,\n    });\n\n    const localUtc = (new Date()).getTime();\n    if (Math.abs(serverUtc - localUtc) > INCORRECT_TIME_DIFF) {\n      onUpdate({\n        type: 'incorrectTime',\n      });\n    }\n  } catch (err) {\n    logDebugError('tryUpdateRegion', err);\n  }\n}\n\nexport function sendUpdateTokens() {\n  const tokens = getKnownTokens();\n  Object.values(tokens).forEach((token) => {\n    if (token.slug in prices.bySlug) {\n      token.quote = prices.bySlug[token.slug];\n    }\n  });\n\n  onUpdate({\n    type: 'updateTokens',\n    tokens,\n    baseCurrency: prices.baseCurrency,\n  });\n}\n\nfunction isAlive(localOnUpdate: OnApiUpdate, accountId: string) {\n  return isUpdaterAlive(localOnUpdate) && isAccountActive(accountId);\n}\n\nfunction logAndRescue(err: Error) {\n  logDebugError('Polling error', err);\n\n  return undefined;\n}\n\nexport async function setupWalletVersionsPolling(accountId: string) {\n  const { ton } = blockchains;\n\n  const localOnUpdate = onUpdate;\n\n  const {\n    address, publicKey, version, isInitialized,\n  } = await fetchStoredAccount(accountId);\n  const publicKeyBytes = hexToBytes(publicKey);\n  const { network } = parseAccountId(accountId);\n\n  const versions = POPULAR_WALLET_VERSIONS.filter((value) => value !== version);\n  let lastResult: ApiWalletInfo[] | undefined;\n\n  let shouldCheckV4 = false;\n  let v4HasTokens: boolean | undefined;\n\n  if (version === 'W5' && !isInitialized) {\n    const { lastTxId } = await ton.getWalletInfo(network, address);\n    shouldCheckV4 = !lastTxId;\n  }\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      const allWalletInfos = (await ton.getWalletVersionInfos(network, publicKeyBytes, versions))\n        .map((versionInfo) => omit(versionInfo, ['wallet']));\n      const filteredInfos: ApiWalletInfo[] = [];\n\n      for (const walletInfo of allWalletInfos) {\n        if (!!walletInfo.lastTxId || walletInfo.version === 'W5') {\n          filteredInfos.push(walletInfo);\n        } else if (walletInfo.version === 'v4R2' && !walletInfo.lastTxId && shouldCheckV4) {\n          if (v4HasTokens === undefined) {\n            v4HasTokens = !!(await ton.getTokenBalances(network, walletInfo.address)).length;\n          }\n\n          if (v4HasTokens) {\n            filteredInfos.push(walletInfo);\n          }\n        }\n      }\n\n      if (!isAlive(localOnUpdate, accountId)) return;\n\n      if (!areDeepEqual(allWalletInfos, lastResult)) {\n        lastResult = allWalletInfos;\n        onUpdate({\n          type: 'updateWalletVersions',\n          accountId,\n          currentVersion: version,\n          versions: filteredInfos,\n        });\n      }\n    } catch (err) {\n      logDebugError('setupWalletVersionsPolling', err);\n    }\n\n    await pauseOrFocus(VERSIONS_INTERVAL, VERSIONS_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n\nexport async function setupVestingPolling(accountId: string) {\n  const localOnUpdate = onUpdate;\n  let lastVestingInfo: ApiVestingInfo[] | undefined;\n\n  while (isAlive(localOnUpdate, accountId)) {\n    try {\n      const vestingInfo = await fetchVestings(accountId);\n\n      if (!isAlive(localOnUpdate, accountId)) return;\n      if (!areDeepEqual(lastVestingInfo, vestingInfo)) {\n        lastVestingInfo = vestingInfo;\n        onUpdate({\n          type: 'updateVesting',\n          accountId,\n          vestingInfo,\n        });\n      }\n    } catch (err) {\n      logDebugError('setupVestingPolling', err);\n    }\n\n    await pauseOrFocus(VESTING_INTERVAL, VESTING_INTERVAL_WHEN_NOT_FOCUSED);\n  }\n}\n","let resolvePromise: Function;\nconst preloadPromise = new Promise((resolve) => {\n  resolvePromise = resolve;\n});\n\nexport function resolveDataPreloadPromise() {\n  resolvePromise();\n}\n\nexport async function waitDataPreload() {\n  await preloadPromise;\n}\n","import type { ApiBaseCurrency, ApiHistoryList, ApiPriceHistoryPeriod } from '../types';\n\nimport { DEFAULT_PRICE_CURRENCY, TON_SYMBOL } from '../../config';\nimport { callBackendGet } from '../common/backend';\nimport { storage } from '../storages';\nimport { waitDataPreload } from './preload';\nimport { resolveTokenBySlug } from './tokens';\n\nexport async function getBaseCurrency() {\n  return (await storage.getItem('baseCurrency')) ?? DEFAULT_PRICE_CURRENCY;\n}\n\nexport function setBaseCurrency(currency: ApiBaseCurrency) {\n  return storage.setItem('baseCurrency', currency);\n}\n\nexport async function fetchPriceHistory(\n  slug: string,\n  period: ApiPriceHistoryPeriod,\n  baseCurrency: ApiBaseCurrency = DEFAULT_PRICE_CURRENCY,\n): Promise<ApiHistoryList | undefined> {\n  await waitDataPreload();\n  const token = resolveTokenBySlug(slug);\n\n  if (!token) {\n    return [];\n  }\n\n  return callBackendGet(`/prices/chart/${token.minterAddress ?? TON_SYMBOL}`, {\n    base: baseCurrency,\n    period,\n  });\n}\n","import type {\n  ApiBackendStakingState,\n  ApiStakingCommonData,\n  ApiStakingHistory,\n  ApiStakingType,\n} from '../types';\n\nimport { APP_ENV, APP_VERSION, TONCOIN_SLUG } from '../../config';\nimport { fromDecimal } from '../../util/decimals';\nimport { logDebugError } from '../../util/logs';\nimport blockchains from '../blockchains';\nimport { STAKE_COMMENT, UNSTAKE_COMMENT } from '../blockchains/ton/constants';\nimport { fetchStoredAccount, fetchStoredAddress } from '../common/accounts';\nimport { callBackendGet } from '../common/backend';\nimport { setStakingCommonCache } from '../common/cache';\nimport { resolveBlockchainKey } from '../common/helpers';\nimport { isKnownStakingPool } from '../common/utils';\nimport { getEnvironment } from '../environment';\nimport { getClientId } from './other';\nimport { createLocalTransaction } from './transactions';\n\nconst CACHE_TTL = 5000; // 5 s.\nlet backendStakingStateByAddress: Record<string, [number, ApiBackendStakingState]> = {};\n\n// let onUpdate: OnApiUpdate;\n\nexport function initStaking() {\n  // onUpdate = _onUpdate;\n}\n\nexport async function checkStakeDraft(accountId: string, amount: bigint) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  const backendState = await getBackendStakingState(accountId);\n  return blockchain.checkStakeDraft(accountId, amount, backendState!);\n}\n\nexport async function checkUnstakeDraft(accountId: string, amount: bigint) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  const backendState = await getBackendStakingState(accountId);\n  return blockchain.checkUnstakeDraft(accountId, amount, backendState!);\n}\n\nexport async function submitStake(\n  accountId: string, password: string, amount: bigint, type: ApiStakingType, fee?: bigint,\n) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const backendState = await getBackendStakingState(accountId);\n  const result = await blockchain.submitStake(\n    accountId, password, amount, type, backendState!,\n  );\n  if ('error' in result) {\n    return false;\n  }\n\n  onStakingChangeExpected();\n\n  const localTransaction = createLocalTransaction(accountId, {\n    amount: result.amount,\n    fromAddress,\n    toAddress: result.toAddress,\n    comment: STAKE_COMMENT,\n    fee: fee || 0n,\n    type: 'stake',\n    slug: TONCOIN_SLUG,\n    inMsgHash: result.msgHash,\n  });\n\n  return {\n    ...result,\n    txId: localTransaction.txId,\n  };\n}\n\nexport async function submitUnstake(\n  accountId: string,\n  password: string,\n  type: ApiStakingType,\n  amount: bigint,\n  fee?: bigint,\n) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  const backendState = await getBackendStakingState(accountId);\n  const result = await blockchain.submitUnstake(accountId, password, type, amount, backendState!);\n  if ('error' in result) {\n    return false;\n  }\n\n  onStakingChangeExpected();\n\n  const localTransaction = createLocalTransaction(accountId, {\n    amount: result.amount,\n    fromAddress,\n    toAddress: result.toAddress,\n    comment: UNSTAKE_COMMENT,\n    fee: fee || 0n,\n    type: 'unstakeRequest',\n    slug: TONCOIN_SLUG,\n    inMsgHash: result.msgHash,\n  });\n\n  return {\n    ...result,\n    txId: localTransaction.txId,\n  };\n}\n\nexport async function getBackendStakingState(accountId: string): Promise<ApiBackendStakingState> {\n  const { address } = await fetchStoredAccount(accountId);\n  const state = await fetchBackendStakingState(address);\n  return {\n    ...state,\n    nominatorsPool: {\n      ...state.nominatorsPool,\n      start: state.nominatorsPool.start * 1000,\n      end: state.nominatorsPool.end * 1000,\n    },\n  };\n}\n\nexport async function fetchBackendStakingState(address: string): Promise<ApiBackendStakingState> {\n  const cacheItem = backendStakingStateByAddress[address];\n  if (cacheItem && cacheItem[0] > Date.now()) {\n    return cacheItem[1];\n  }\n\n  const headers: AnyLiteral = {\n    ...getEnvironment().apiHeaders,\n    'X-App-Version': APP_VERSION,\n    'X-App-ClientID': await getClientId(),\n    'X-App-Env': APP_ENV,\n  };\n\n  const stakingState = await callBackendGet(`/staking/state/${address}`, undefined, headers);\n  stakingState.balance = fromDecimal(stakingState.balance);\n  stakingState.totalProfit = fromDecimal(stakingState.totalProfit);\n\n  if (!isKnownStakingPool(stakingState.nominatorsPool.address)) {\n    throw Error('Unexpected pool address, likely a malicious activity');\n  }\n\n  backendStakingStateByAddress[address] = [Date.now() + CACHE_TTL, stakingState];\n\n  return stakingState;\n}\n\nexport async function getStakingHistory(\n  accountId: string, limit?: number, offset?: number,\n): Promise<ApiStakingHistory> {\n  const address = await fetchStoredAddress(accountId);\n  return callBackendGet(`/staking/profits/${address}`, { limit, offset });\n}\n\nexport function onStakingChangeExpected() {\n  backendStakingStateByAddress = {};\n}\n\nexport async function tryUpdateStakingCommonData() {\n  try {\n    const data = await callBackendGet('/staking/common');\n    data.round.start *= 1000;\n    data.round.end *= 1000;\n    data.round.unlock *= 1000;\n    data.prevRound.start *= 1000;\n    data.prevRound.end *= 1000;\n    data.prevRound.unlock *= 1000;\n    data.liquid.available = fromDecimal(data.liquid.available);\n\n    setStakingCommonCache(data as ApiStakingCommonData);\n  } catch (err) {\n    logDebugError('tryUpdateLiquidStakingState', err);\n  }\n}\n\nexport async function getStakingState(accountId: string) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const backendState = await getBackendStakingState(accountId);\n  const state = await blockchain.getStakingState(accountId, backendState);\n\n  return { backendState, state };\n}\n","import type { TonTransferParams } from '../blockchains/ton/types';\nimport type {\n  ApiActivity,\n  ApiNetwork,\n  ApiSwapActivity,\n  ApiSwapAsset,\n  ApiSwapBuildRequest,\n  ApiSwapBuildResponse,\n  ApiSwapCexCreateTransactionRequest,\n  ApiSwapCexCreateTransactionResponse,\n  ApiSwapCexEstimateRequest,\n  ApiSwapCexEstimateResponse,\n  ApiSwapEstimateRequest,\n  ApiSwapEstimateResponse,\n  ApiSwapHistoryItem,\n  ApiSwapPairAsset,\n  ApiSwapTonAsset,\n  ApiSwapTransfer,\n  ApiTransaction,\n  ApiTransactionActivity,\n  OnApiUpdate,\n} from '../types';\n\nimport { TON_SYMBOL, TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { assert } from '../../util/assert';\nimport { fromDecimal } from '../../util/decimals';\nimport { logDebugError } from '../../util/logs';\nimport { pause } from '../../util/schedulers';\nimport { buildSwapId } from '../../util/swap/buildSwapId';\nimport blockchains from '../blockchains';\nimport { buildTokenSlug, parseTxId } from '../blockchains/ton/util';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { callBackendGet, callBackendPost } from '../common/backend';\nimport { callHook } from '../hooks';\nimport { getBackendAuthToken } from './other';\nimport { resolveTokenBySlug } from './tokens';\n\nexport type SwapHistoryRange = {\n  asset: string;\n  fromLt: number;\n  toLt: number;\n  fromTime: number;\n  toTime: number;\n};\n\ntype LtRange = [number, number];\n\nconst SWAP_MAX_LT = 50;\nconst SWAP_WAITING_TIME = 5 * 60 * 1_000; // 5 min\nconst SWAP_WAITING_PAUSE = 1_000; // 1 sec\nconst MAX_OLD_SWAP_ID = 41276;\n\nconst ton = blockchains.ton;\n\nlet onUpdate: OnApiUpdate;\n\nexport function initSwap(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function swapBuildTransfer(\n  accountId: string,\n  password: string,\n  request: ApiSwapBuildRequest,\n) {\n  const { network } = parseAccountId(accountId);\n  const authToken = await getBackendAuthToken(accountId, password);\n\n  const address = await fetchStoredAddress(accountId);\n  const { id, transfers } = await swapBuild(authToken, request);\n\n  const transferList = transfers.map((transfer) => ({\n    ...transfer,\n    amount: BigInt(transfer.amount),\n    isBase64Payload: true,\n  }));\n\n  await ton.validateDexSwapTransfers(network, address, request, transferList);\n\n  const result = await ton.checkMultiTransactionDraft(accountId, transferList, request.shouldTryDiesel);\n\n  if ('error' in result) {\n    return result;\n  }\n\n  return { ...result, id, transfers };\n}\n\nexport async function swapSubmit(\n  accountId: string,\n  password: string,\n  transfers: ApiSwapTransfer[],\n  historyItem: ApiSwapHistoryItem,\n  withDiesel?: boolean,\n) {\n  const address = await fetchStoredAddress(accountId);\n  const transferList = transfers.map((transfer) => ({\n    ...transfer,\n    amount: BigInt(transfer.amount),\n    isBase64Payload: true,\n  }));\n\n  const result = await ton.submitMultiTransfer(\n    accountId, password, transferList, undefined, withDiesel,\n  );\n\n  if ('error' in result) {\n    return result;\n  }\n\n  const from = getSwapItemSlug(historyItem, historyItem.from);\n  const to = getSwapItemSlug(historyItem, historyItem.to);\n\n  const swap: ApiSwapActivity = {\n    ...historyItem,\n    id: buildSwapId(historyItem.id),\n    from,\n    to,\n    kind: 'swap',\n  };\n\n  const authToken = await getBackendAuthToken(accountId, password);\n\n  await callBackendPost(`/swap/history/${address}/${historyItem.id}/update`, {\n    msgHash: result.msgHash,\n  }, {\n    method: 'PATCH',\n    authToken,\n  });\n\n  onUpdate({\n    type: 'newActivities',\n    accountId,\n    activities: [swap],\n  });\n\n  void callHook('onSwapCreated', accountId, swap.timestamp - 1);\n\n  return result;\n}\n\nfunction getSwapItemSlug(item: ApiSwapHistoryItem, asset: string) {\n  if (asset === TON_SYMBOL) return TONCOIN_SLUG;\n  if (item.cex) return asset;\n  return buildTokenSlug(asset);\n}\n\nexport async function swapReplaceTransactions(\n  accountId: string,\n  transactions: ApiTransactionActivity[],\n  network: ApiNetwork,\n  slug?: string,\n): Promise<ApiActivity[]> {\n  if (!transactions.length || network === 'testnet') {\n    return transactions;\n  }\n\n  try {\n    const address = await fetchStoredAddress(accountId);\n    const asset = slug ? resolveTokenBySlug(slug).minterAddress ?? TON_SYMBOL : undefined;\n    const {\n      fromLt, toLt, fromTime, toTime,\n    } = buildSwapHistoryRange(transactions);\n\n    const swaps = await swapGetHistory(address, {\n      fromLt,\n      toLt,\n      fromTimestamp: fromTime,\n      toTimestamp: toTime,\n      asset,\n    });\n\n    if (!swaps.length) {\n      return transactions;\n    }\n\n    return replaceTransactions(transactions, swaps);\n  } catch (err) {\n    logDebugError('swapReplaceTransactions', err);\n    return transactions;\n  }\n}\n\nexport async function swapReplaceTransactionsByRanges(\n  accountId: string,\n  transactions: ApiTransactionActivity[],\n  chunks: ApiTransactionActivity[][],\n  isFirstLoad?: boolean,\n): Promise<ApiActivity[]> {\n  transactions = transactions.slice();\n\n  const { network } = parseAccountId(accountId);\n\n  if (!chunks.length || network === 'testnet') {\n    return transactions;\n  }\n\n  try {\n    const address = await fetchStoredAddress(accountId);\n\n    if (!isFirstLoad) {\n      await waitPendingDexSwap(address);\n    }\n\n    const ranges = chunks.map((txs) => buildSwapHistoryRange(txs));\n    const swaps = await swapGetHistoryByRanges(address, ranges);\n\n    if (!swaps.length) {\n      return transactions;\n    }\n\n    return replaceTransactions(transactions, swaps);\n  } catch (err) {\n    logDebugError('swapReplaceTransactionsByRanges', err);\n    return transactions;\n  }\n}\n\nfunction replaceTransactions(transactions: ApiTransactionActivity[], swaps: ApiSwapHistoryItem[]) {\n  const result: ApiActivity[] = [];\n  const hiddenTxIds = new Set<string>();\n\n  const skipLtRanges: LtRange[] = []; // TODO Remove it after applying correcting script in backend\n\n  for (const swap of swaps) {\n    swap.txIds?.forEach((txId) => {\n      hiddenTxIds.add(txId);\n    });\n\n    if (swap.lt && Number(swap.id) < MAX_OLD_SWAP_ID) {\n      skipLtRanges.push([swap.lt, swap.lt + SWAP_MAX_LT]);\n    }\n\n    const swapActivity = swapItemToActivity(swap);\n\n    result.push(swapActivity);\n  }\n\n  for (let transaction of transactions) {\n    const [ltString, hash] = transaction.txId.split(':');\n    const lt = Number(ltString);\n    const shortenedTxId = `${lt}:${hash}`;\n\n    const shouldHide = Boolean(\n      hiddenTxIds.has(shortenedTxId)\n      || skipLtRanges.find(([startLt, endLt]) => lt >= startLt && lt <= endLt),\n    );\n\n    if (shouldHide) {\n      transaction = { ...transaction, shouldHide };\n    }\n    result.push(transaction);\n  }\n\n  return result;\n}\n\nasync function waitPendingDexSwap(address: string) {\n  const waitUntil = Date.now() + SWAP_WAITING_TIME;\n\n  while (Date.now() < waitUntil) {\n    const pendingSwaps = await swapGetHistory(address, {\n      status: 'pending',\n      isCex: false,\n    });\n\n    if (!pendingSwaps.length) {\n      break;\n    }\n\n    const areAllStale = pendingSwaps.every((swap) => (\n      Date.now() - swap.timestamp > SWAP_WAITING_TIME * 2\n    ));\n    if (areAllStale) {\n      break;\n    }\n\n    await pause(SWAP_WAITING_PAUSE);\n  }\n}\n\nfunction buildSwapHistoryRange(transactions: ApiTransaction[]): SwapHistoryRange {\n  const firstLt = parseTxId(transactions[0].txId).lt;\n  const lastLt = parseTxId(transactions[transactions.length - 1].txId).lt;\n\n  const firstTimestamp = transactions[0].timestamp;\n  const lastTimestamp = transactions[transactions.length - 1].timestamp;\n\n  const [fromLt, fromTime] = firstLt > lastLt ? [lastLt, lastTimestamp] : [firstLt, firstTimestamp];\n  const [toLt, toTime] = firstLt > lastLt ? [firstLt, firstTimestamp] : [lastLt, lastTimestamp];\n\n  const slug = transactions[0].slug;\n  const asset = slug === TONCOIN_SLUG ? TON_SYMBOL : resolveTokenBySlug(slug).minterAddress!;\n\n  return {\n    asset,\n    fromLt: Math.floor(fromLt / 100) * 100,\n    toLt,\n    fromTime,\n    toTime,\n  };\n}\n\nexport async function fetchSwaps(accountId: string, ids: string[]) {\n  const address = await fetchStoredAddress(accountId);\n  const results = await Promise.allSettled(\n    ids.map((id) => swapGetHistoryItem(address, id.replace('swap:', ''))),\n  );\n\n  return results\n    .map((result) => (result.status === 'fulfilled' ? result.value : undefined))\n    .filter(Boolean)\n    .map(swapItemToActivity);\n}\n\nexport function swapItemToActivity(swap: ApiSwapHistoryItem): ApiSwapActivity {\n  return {\n    ...swap,\n    id: buildSwapId(swap.id),\n    kind: 'swap',\n    from: getSwapItemSlug(swap, swap.from),\n    to: getSwapItemSlug(swap, swap.to),\n  };\n}\n\nexport function swapEstimate(request: ApiSwapEstimateRequest): Promise<ApiSwapEstimateResponse | { error: string }> {\n  return callBackendPost('/swap/ton/estimate', request, {\n    isAllowBadRequest: true,\n  });\n}\n\nexport function swapBuild(authToken: string, request: ApiSwapBuildRequest): Promise<ApiSwapBuildResponse> {\n  return callBackendPost('/swap/ton/build', {\n    ...request,\n    isMsgHashMode: true,\n  }, {\n    authToken,\n  });\n}\n\nexport function swapGetAssets(): Promise<ApiSwapAsset[]> {\n  return callBackendGet('/swap/assets');\n}\n\nexport function swapGetTonCurrencies(): Promise<ApiSwapTonAsset[]> {\n  return callBackendGet('/swap/ton/tokens');\n}\n\nexport function swapGetPairs(symbolOrMinter: string): Promise<ApiSwapPairAsset[]> {\n  return callBackendGet('/swap/pairs', { asset: symbolOrMinter });\n}\n\nexport function swapGetHistory(address: string, params: {\n  fromLt?: number;\n  toLt?: number;\n  fromTimestamp?: number;\n  toTimestamp?: number;\n  status?: ApiSwapHistoryItem['status'];\n  isCex?: boolean;\n  asset?: string;\n}): Promise<ApiSwapHistoryItem[]> {\n  return callBackendGet(`/swap/history/${address}`, params);\n}\n\nexport function swapGetHistoryByRanges(address: string, ranges: SwapHistoryRange[]): Promise<ApiSwapHistoryItem[]> {\n  return callBackendPost(`/swap/history-ranges/${address}`, { ranges });\n}\n\nexport function swapGetHistoryItem(address: string, id: string): Promise<ApiSwapHistoryItem> {\n  return callBackendGet(`/swap/history/${address}/${id}`);\n}\n\nexport function swapCexEstimate(request: ApiSwapCexEstimateRequest): Promise<ApiSwapCexEstimateResponse> {\n  return callBackendPost('/swap/cex/estimate', request, { isAllowBadRequest: true });\n}\n\nexport function swapCexValidateAddress(params: { slug: string; address: string }): Promise<{\n  result: boolean;\n  message?: string;\n}> {\n  return callBackendGet('/swap/cex/validate-address', params);\n}\n\nexport async function swapCexCreateTransaction(\n  accountId: string,\n  password: string,\n  request: ApiSwapCexCreateTransactionRequest,\n): Promise<{\n    swap: ApiSwapHistoryItem;\n    activity: ApiSwapActivity;\n    transfer?: TonTransferParams;\n  }> {\n  const authToken = await getBackendAuthToken(accountId, password);\n\n  const { swap } = await callBackendPost<ApiSwapCexCreateTransactionResponse>('/swap/cex/createTransaction', request, {\n    authToken,\n  });\n  const activity = swapItemToActivity(swap);\n\n  let transfer: {\n    toAddress: string;\n    amount: bigint;\n  } | undefined;\n\n  if (request.from === TON_SYMBOL) {\n    transfer = {\n      toAddress: swap.cex!.payinAddress,\n      amount: fromDecimal(swap.fromAmount),\n    };\n\n    assert(transfer.amount <= fromDecimal(request.fromAmount));\n  }\n\n  onUpdate({\n    type: 'newActivities',\n    accountId,\n    activities: [activity],\n  });\n\n  void callHook('onSwapCreated', accountId, swap.timestamp - 1);\n\n  return { swap, activity, transfer };\n}\n","import type { ApiNetwork } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport blockchains from '../blockchains';\n\nexport function fetchToken(accountId: string, address: string) {\n  const { network, blockchain: blockchainKey } = parseAccountId(accountId);\n  const blockchain = blockchains[blockchainKey];\n\n  return blockchain.fetchToken(network, address);\n}\n\nexport function resolveTokenBySlug(slug: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.resolveTokenBySlug(slug);\n}\n\nexport function resolveTokenWalletAddress(network: ApiNetwork, address: string, minterAddress: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.resolveTokenWalletAddress(network, address, minterAddress);\n}\n\nexport function resolveTokenMinterAddress(network: ApiNetwork, tokenWalletAddress: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.resolveTokenMinterAddress(network, tokenWalletAddress);\n}\n\nexport function buildTokenSlug(address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.buildTokenSlug(address);\n}\n\nexport function fetchTokenBalances(accountId: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getAccountTokenBalances(accountId);\n}\n\nexport function fetchTokenBalancesByAddress(address: string, network: ApiNetwork) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getAddressTokenBalances(address, network);\n}\n","import type { ApiSubmitTransferResult, ApiSubmitTransferWithDieselResult } from '../blockchains/ton/types';\nimport type {\n  ApiLocalTransactionParams,\n  ApiSignedTransfer,\n  ApiSubmitTransferOptions,\n  ApiTxIdBySlug,\n  OnApiUpdate,\n} from '../types';\n\nimport { TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { logDebugError } from '../../util/logs';\nimport blockchains from '../blockchains';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { buildLocalTransaction, resolveBlockchainKey } from '../common/helpers';\nimport { handleServerError } from '../errors';\nimport { swapReplaceTransactions } from './swap';\nimport { buildTokenSlug } from './tokens';\n\nlet onUpdate: OnApiUpdate;\n\nexport function initTransactions(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function fetchTokenActivitySlice(accountId: string, slug: string, fromTxId?: string, limit?: number) {\n  const { network, blockchain } = parseAccountId(accountId);\n  const activeBlockchain = blockchains[blockchain];\n  try {\n    const transactions = await activeBlockchain.getTokenTransactionSlice(accountId, slug, fromTxId, undefined, limit);\n    const activities = await swapReplaceTransactions(accountId, transactions, network, slug);\n    await activeBlockchain.fixTokenActivitiesAddressForm(network, activities);\n    return activities;\n  } catch (err) {\n    logDebugError('fetchTokenActivitySlice', err);\n    return handleServerError(err);\n  }\n}\n\nexport async function fetchAllActivitySlice(accountId: string, lastTxIds: ApiTxIdBySlug, limit: number) {\n  const { network, blockchain } = parseAccountId(accountId);\n  const activeBlockchain = blockchains[blockchain];\n  try {\n    const transactions = await activeBlockchain.getMergedTransactionSlice(accountId, lastTxIds, limit);\n    const activities = await swapReplaceTransactions(accountId, transactions, network);\n    await activeBlockchain.fixTokenActivitiesAddressForm(network, activities);\n    return activities;\n  } catch (err) {\n    logDebugError('fetchAllActivitySlice', err);\n    return handleServerError(err);\n  }\n}\n\nexport function checkTransactionDraft(options: {\n  accountId: string;\n  tokenAddress?: string;\n  toAddress: string;\n  amount: bigint;\n  data?: string;\n  shouldEncrypt?: boolean;\n  isBase64Data?: boolean;\n}) {\n  const blockchain = blockchains[resolveBlockchainKey(options.accountId)!];\n\n  return blockchain.checkTransactionDraft(options);\n}\n\nexport async function submitTransfer(options: ApiSubmitTransferOptions, shouldCreateLocalTransaction = true) {\n  const {\n    accountId, password, toAddress, amount, tokenAddress, comment, fee, shouldEncrypt, isBase64Data,\n    withDiesel, dieselAmount,\n  } = options;\n\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n  const fromAddress = await fetchStoredAddress(accountId);\n\n  let result: ApiSubmitTransferResult | ApiSubmitTransferWithDieselResult;\n\n  if (withDiesel) {\n    result = await blockchain.submitTransferWithDiesel({\n      accountId,\n      password,\n      toAddress,\n      amount,\n      tokenAddress: tokenAddress!,\n      data: comment,\n      shouldEncrypt,\n      dieselAmount: dieselAmount!,\n    });\n  } else {\n    result = await blockchain.submitTransfer({\n      accountId,\n      password,\n      toAddress,\n      amount,\n      tokenAddress,\n      data: comment,\n      shouldEncrypt,\n      isBase64Data,\n    });\n  }\n\n  if ('error' in result) {\n    return result;\n  }\n\n  const { encryptedComment, msgHash } = result;\n\n  if (!shouldCreateLocalTransaction) {\n    return result;\n  }\n\n  const slug = tokenAddress ? buildTokenSlug(tokenAddress) : TONCOIN_SLUG;\n\n  const localTransaction = createLocalTransaction(accountId, {\n    amount,\n    fromAddress,\n    toAddress,\n    comment: shouldEncrypt ? undefined : comment,\n    encryptedComment,\n    fee: fee || 0n,\n    slug,\n    inMsgHash: msgHash,\n  });\n\n  return {\n    ...result,\n    txId: localTransaction.txId,\n  };\n}\n\nexport async function waitLastTransfer(accountId: string) {\n  const blockchain = blockchains.ton;\n\n  const { network } = parseAccountId(accountId);\n  const address = await fetchStoredAddress(accountId);\n\n  return blockchain.waitPendingTransfer(network, address);\n}\n\nexport async function sendSignedTransferMessage(accountId: string, message: ApiSignedTransfer) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  const msgHash = await blockchain.sendSignedMessage(accountId, message);\n\n  const localTransaction = createLocalTransaction(accountId, {\n    ...message.params,\n    inMsgHash: msgHash,\n  });\n\n  return localTransaction.txId;\n}\n\nexport async function sendSignedTransferMessages(accountId: string, messages: ApiSignedTransfer[]) {\n  const blockchain = blockchains.ton;\n\n  const result = await blockchain.sendSignedMessages(accountId, messages);\n\n  for (let i = 0; i < result.successNumber; i++) {\n    createLocalTransaction(accountId, {\n      ...messages[i].params,\n      inMsgHash: result.msgHashes[i],\n    });\n  }\n\n  return result;\n}\n\nexport function decryptComment(accountId: string, encryptedComment: string, fromAddress: string, password: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.decryptComment(accountId, encryptedComment, fromAddress, password);\n}\n\nexport function createLocalTransaction(accountId: string, params: ApiLocalTransactionParams) {\n  const { blockchain: blockchainKey, network } = parseAccountId(accountId);\n  const blockchain = blockchains[blockchainKey];\n\n  const { toAddress } = params;\n\n  const normalizedAddress = params.normalizedAddress ?? blockchain.normalizeAddress(toAddress, network);\n\n  const localTransaction = buildLocalTransaction(params, normalizedAddress);\n\n  onUpdate({\n    type: 'newLocalTransaction',\n    transaction: localTransaction,\n    accountId,\n  });\n\n  return localTransaction;\n}\n\nexport function fetchDieselState(accountId: string, tokenAddress: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.fetchEstimateDiesel(accountId, tokenAddress);\n}\n","import type { ApiVestingInfo } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { fetchStoredAddress } from '../common/accounts';\nimport { callBackendGet } from '../common/backend';\n\nexport async function fetchVestings(accountId: string) {\n  const { network } = parseAccountId(accountId);\n  const isTestnet = network === 'testnet';\n  const address = await fetchStoredAddress(accountId);\n\n  return callBackendGet<ApiVestingInfo[]>(`/vesting/${address}`, { isTestnet });\n}\n","import * as tonWebMnemonic from 'tonweb-mnemonic';\n\nimport type { ApiNetwork } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport blockchains from '../blockchains';\nimport {\n  fetchStoredAddress,\n  getAccountIdWithMnemonic,\n} from '../common/accounts';\nimport * as dappPromises from '../common/dappPromises';\nimport { resolveBlockchainKey } from '../common/helpers';\n\nconst ton = blockchains.ton;\n\nexport function getMnemonic(accountId: string, password: string) {\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  return blockchain.fetchMnemonic(accountId, password);\n}\n\nexport function getMnemonicWordList() {\n  return tonWebMnemonic.wordlists.default;\n}\n\nexport async function verifyPassword(password: string) {\n  const accountId = await getAccountIdWithMnemonic();\n  if (!accountId) {\n    throw new Error('The user is not authorized in the wallet');\n  }\n\n  const blockchain = blockchains[resolveBlockchainKey(accountId)!];\n\n  return blockchain.verifyPassword(accountId, password);\n}\n\nexport function confirmDappRequest(promiseId: string, data: any) {\n  dappPromises.resolveDappPromise(promiseId, data);\n}\n\nexport function confirmDappRequestConnect(promiseId: string, data: {\n  password?: string;\n  accountId?: string;\n  signature?: string;\n}) {\n  dappPromises.resolveDappPromise(promiseId, data);\n}\n\nexport function cancelDappRequest(promiseId: string, reason?: string) {\n  dappPromises.rejectDappPromise(promiseId, reason);\n}\n\nexport async function getWalletSeqno(accountId: string, address?: string) {\n  const { network } = parseAccountId(accountId);\n  if (!address) {\n    address = await fetchStoredAddress(accountId);\n  }\n  return ton.getWalletSeqno(network, address);\n}\n\nexport function fetchAddress(accountId: string) {\n  return fetchStoredAddress(accountId);\n}\n\nexport function isWalletInitialized(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.isAddressInitialized(network, address);\n}\n\nexport function getWalletBalance(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getWalletBalance(network, address);\n}\n\nexport function getContractInfo(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getContractInfo(network, address);\n}\n\nexport function getWalletInfo(network: ApiNetwork, address: string) {\n  const blockchain = blockchains.ton;\n\n  return blockchain.getWalletInfo(network, address);\n}\n","import type {\n  MethodArgs, Methods,\n} from '../../methods/types';\nimport type { TonConnectMethodArgs, TonConnectMethods } from '../../tonConnect/types/misc';\nimport type {\n  ApiInitArgs, OnApiUpdate,\n} from '../../types';\n\nimport { createPostMessageInterface } from '../../../util/createPostMessageInterface';\nimport * as methods from '../../methods';\nimport init from '../../methods/init';\nimport * as tonConnectApi from '../../tonConnect';\n\ncreatePostMessageInterface((name: string, origin?: string, ...args: any[]) => {\n  if (name === 'init') {\n    return init(args[0] as OnApiUpdate, args[1] as ApiInitArgs);\n  } else {\n    if (name.startsWith('tonConnect_')) {\n      name = name.replace('tonConnect_', '');\n      const method = tonConnectApi[name as keyof TonConnectMethods];\n      // @ts-ignore\n      return method(...args as TonConnectMethodArgs<keyof TonConnectMethods>);\n    }\n\n    const method = methods[name as keyof Methods];\n\n    // @ts-ignore\n    return method(...args as MethodArgs<keyof Methods>);\n  }\n});\n","import type { Storage, StorageKey } from './types';\n\nimport { bigintReviver } from '../../util/bigint';\nimport { callWindow } from '../../util/capacitorStorageProxy/connector';\n\nconst storage: Storage & {\n  getKeys: () => Promise<string[] | undefined>;\n} = {\n  async getItem(key: StorageKey) {\n    const result = await callWindow('getItem', key);\n    return result ? JSON.parse(result, bigintReviver) : undefined;\n  },\n\n  async setItem(key: StorageKey, value: any) {\n    await callWindow('setItem', key, JSON.stringify(value));\n  },\n\n  async removeItem(key: StorageKey) {\n    await callWindow('removeItem', key);\n  },\n\n  async clear() {\n    await callWindow('clear');\n  },\n\n  async getKeys() {\n    const result = await callWindow('keys');\n\n    return result?.value;\n  },\n};\n\nexport default storage;\n","import type { Storage } from './types';\n\nimport { IS_EXTENSION } from '../../config';\n\n// eslint-disable-next-line no-restricted-globals\nconst storage = IS_EXTENSION ? self.chrome.storage.local : undefined;\n\nexport default ((storage && {\n  getItem: async (key) => (await storage.get(key))?.[key],\n  setItem: (key, value) => storage.set({ [key]: value }),\n  removeItem: storage.remove.bind(storage),\n  clear: storage.clear.bind(storage),\n  getAll: storage.get.bind(storage),\n  setMany: storage.set.bind(storage),\n  getMany: storage.get.bind(storage),\n}) || {}) as Storage;\n","import * as idb from 'idb-keyval';\n\nimport type { Storage, StorageKey } from './types';\n\nimport { INDEXED_DB_NAME, INDEXED_DB_STORE_NAME } from '../../config';\nimport { fromKeyValueArrays } from '../../util/iteratees';\n\nconst store = idb.createStore(INDEXED_DB_NAME, INDEXED_DB_STORE_NAME);\n\nexport default {\n  getItem: (name: StorageKey) => idb.get(name, store),\n  setItem: (name: StorageKey, value: any) => idb.set(name, value, store),\n  removeItem: (name: StorageKey) => idb.del(name, store),\n  clear: () => idb.clear(store),\n  getAll: async () => {\n    const keys = await idb.keys(store) as string[];\n    const values = await idb.getMany(keys, store);\n    return fromKeyValueArrays(keys, values);\n  },\n  getMany: async (keys) => {\n    const values = await idb.getMany(keys, store);\n    return fromKeyValueArrays(keys, values);\n  },\n  setMany: (items) => {\n    return idb.setMany(Object.entries(items), store);\n  },\n} as Storage;\n","import { StorageType } from './types';\n\nimport { IS_CAPACITOR, IS_EXTENSION } from '../../config';\nimport capacitorStorage from './capacitorStorage';\nimport extensionStorage from './extension';\nimport idb from './idb';\nimport localStorage from './localStorage';\n\nexport const storage = IS_EXTENSION ? extensionStorage : IS_CAPACITOR ? capacitorStorage : idb;\n\nexport default {\n  [StorageType.IndexedDb]: idb,\n  [StorageType.LocalStorage]: localStorage,\n  [StorageType.ExtensionLocal]: extensionStorage,\n  [StorageType.CapacitorStorage]: capacitorStorage,\n};\n","import type { Storage } from './types';\n\nimport { pick } from '../../util/iteratees';\n\nfunction withPromise(fn: AnyFunction) {\n  return (...args: any) => Promise.resolve(fn(...args));\n}\n\nexport default (typeof localStorage === 'object' ? {\n  getItem: withPromise(localStorage.getItem),\n  setItem: localStorage.setItem,\n  removeItem: localStorage.removeItem,\n  clear: localStorage.clear,\n  getAll: withPromise(() => ({ ...localStorage })),\n  getMany: withPromise((keys: string[]) => pick(localStorage, keys)),\n  setMany: (items: AnyLiteral) => {\n    Object.assign(localStorage, items);\n  },\n} : {}) as Storage;\n","export enum StorageType {\n  IndexedDb,\n  LocalStorage,\n  ExtensionLocal,\n  CapacitorStorage,\n}\n\nexport interface Storage {\n  getItem(name: StorageKey, force?: boolean): Promise<any>;\n\n  setItem(name: StorageKey, value: any): Promise<void>;\n\n  removeItem(name: StorageKey): Promise<void>;\n\n  clear(): Promise<void>;\n\n  getAll?(): Promise<AnyLiteral>;\n\n  setMany?(items: AnyLiteral): Promise<void>;\n\n  getMany?(keys: string[]): Promise<AnyLiteral>;\n}\n\nexport type StorageKey = 'mnemonicsEncrypted'\n| 'accounts'\n| 'stateVersion'\n| 'currentAccountId'\n| 'clientId'\n| 'baseCurrency'\n// For extension\n| 'dapps'\n| 'dappMethods:lastAccountId'\n| 'windowId'\n| 'windowState'\n| 'isTonMagicEnabled'\n| 'isTonProxyEnabled'\n| 'isDeeplinkHookEnabled'\n// For TonConnect SSE\n| 'sseLastEventId';\n","// eslint-disable-next-line max-classes-per-file\nimport type { ApiAnyDisplayError } from '../types';\nimport type { AllErrorCodes } from './types';\nimport { ApiTransactionError } from '../types';\nimport { CONNECT_EVENT_ERROR_CODES } from './types';\n\nimport { ApiBaseError } from '../errors';\n\nexport class TonConnectError extends ApiBaseError {\n  code: number;\n\n  constructor(message: string, code: AllErrorCodes = 0, displayError?: ApiAnyDisplayError) {\n    super(message);\n    this.code = code;\n    this.displayError = displayError;\n  }\n}\n\nexport class ManifestContentError extends TonConnectError {\n  constructor(message = 'Manifest content error') {\n    super(message, CONNECT_EVENT_ERROR_CODES.MANIFEST_CONTENT_ERROR);\n  }\n}\n\nexport class UnknownError extends TonConnectError {\n  constructor(message = 'Unknown error.') {\n    super(message, 0);\n  }\n}\n\nexport class BadRequestError extends TonConnectError {\n  constructor(message = 'Bad request', displayError?: ApiAnyDisplayError) {\n    super(message, 1, displayError);\n  }\n}\n\nexport class UnknownAppError extends TonConnectError {\n  constructor(message = 'Unknown app error') {\n    super(message, 100);\n  }\n}\n\nexport class UserRejectsError extends TonConnectError {\n  constructor(message = 'The user rejected the action') {\n    super(message, 300);\n  }\n}\n\nexport class InsufficientBalance extends BadRequestError {\n  constructor(message = 'Insufficient balance') {\n    super(message, ApiTransactionError.InsufficientBalance);\n  }\n}\n","import { Address, Cell } from '@ton/core';\nimport type {\n  ConnectEventError,\n  ConnectItemReply,\n  ConnectRequest,\n  DisconnectRpcRequest,\n  DisconnectRpcResponse,\n  SendTransactionRpcRequest,\n  SendTransactionRpcResponse,\n  SignDataRpcRequest,\n  TonProofItem,\n  TonProofItemReplySuccess,\n} from '@tonconnect/protocol';\nimport { CHAIN } from '@tonconnect/protocol';\nimport nacl from 'tweetnacl';\n\nimport type {\n  ApiAnyDisplayError,\n  ApiDappMetadata,\n  ApiDappRequest,\n  ApiNetwork,\n  ApiSignedTransfer,\n  OnApiUpdate,\n} from '../types';\nimport type {\n  ApiTonConnectProof, LocalConnectEvent, TransactionPayload, TransactionPayloadMessage,\n} from './types';\nimport { ApiCommonError, ApiTransactionError } from '../types';\nimport { CONNECT_EVENT_ERROR_CODES, SEND_TRANSACTION_ERROR_CODES, SIGN_DATA_ERROR_CODES } from './types';\n\nimport { IS_EXTENSION, TONCOIN_SLUG } from '../../config';\nimport { parseAccountId } from '../../util/account';\nimport { areDeepEqual } from '../../util/areDeepEqual';\nimport { logDebugError } from '../../util/logs';\nimport { fetchJsonMetadata } from '../../util/metadata';\nimport safeExec from '../../util/safeExec';\nimport blockchains from '../blockchains';\nimport { parsePayloadBase64 } from '../blockchains/ton';\nimport { fetchKeyPair } from '../blockchains/ton/auth';\nimport {\n  getIsRawAddress, getWalletPublicKey, toBase64Address, toRawAddress,\n} from '../blockchains/ton/util/tonCore';\nimport { getContractInfo } from '../blockchains/ton/wallet';\nimport {\n  fetchStoredAccount,\n  fetchStoredAddress,\n  fetchStoredPublicKey,\n  getCurrentAccountId,\n  getCurrentAccountIdOrFail,\n} from '../common/accounts';\nimport { getKnownAddressInfo } from '../common/addresses';\nimport { createDappPromise } from '../common/dappPromises';\nimport { isUpdaterAlive } from '../common/helpers';\nimport { bytesToBase64, hexToBytes, sha256 } from '../common/utils';\nimport * as apiErrors from '../errors';\nimport { ApiServerError } from '../errors';\nimport { callHook } from '../hooks';\nimport {\n  activateDapp,\n  addDapp,\n  deactivateAccountDapp,\n  deactivateDapp,\n  deleteDapp,\n  findLastConnectedAccount,\n  getDapp,\n  getDappsByOrigin,\n  updateDapp,\n} from '../methods/dapps';\nimport { createLocalTransaction } from '../methods/transactions';\nimport * as errors from './errors';\nimport { UnknownAppError } from './errors';\nimport { isValidString, isValidUrl } from './utils';\n\nconst BLANK_GIF_DATA_URL = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n\nconst ton = blockchains.ton;\n\nlet resolveInit: AnyFunction;\nconst initPromise = new Promise((resolve) => {\n  resolveInit = resolve;\n});\n\nlet onPopupUpdate: OnApiUpdate;\n\nexport function initTonConnect(_onPopupUpdate: OnApiUpdate) {\n  onPopupUpdate = _onPopupUpdate;\n  resolveInit();\n}\n\nexport async function connect(\n  request: ApiDappRequest,\n  message: ConnectRequest,\n  id: number,\n): Promise<LocalConnectEvent> {\n  try {\n    await openExtensionPopup(true);\n\n    onPopupUpdate({\n      type: 'dappLoading',\n      connectionType: 'connect',\n      isSse: request && 'sseOptions' in request,\n    });\n\n    const dappMetadata = await fetchDappMetadata(message.manifestUrl);\n\n    if (!IS_EXTENSION) {\n      request.origin = dappMetadata.origin;\n    }\n\n    const { origin } = await validateRequest(request, true);\n\n    const addressItem = message.items.find(({ name }) => name === 'ton_addr');\n    const proofItem = message.items.find(({ name }) => name === 'ton_proof') as TonProofItem | undefined;\n    const proof = proofItem ? {\n      timestamp: Math.round(Date.now() / 1000),\n      domain: new URL(origin).host,\n      payload: proofItem.payload,\n    } : undefined;\n\n    if (!addressItem) {\n      throw new errors.BadRequestError(\"Missing 'ton_addr'\");\n    }\n\n    let accountId = await getCurrentAccountOrFail();\n\n    const { promiseId, promise } = createDappPromise();\n\n    const dapp = {\n      ...dappMetadata,\n      origin,\n      connectedAt: Date.now(),\n      ...('sseOptions' in request && {\n        sse: request.sseOptions,\n      }),\n    };\n\n    onPopupUpdate({\n      type: 'dappConnect',\n      promiseId,\n      accountId,\n      dapp,\n      permissions: {\n        address: true,\n        proof: !!proof,\n      },\n      proof,\n    });\n\n    const promiseResult: {\n      accountId?: string;\n      password?: string;\n      signature?: string;\n    } | undefined = await promise;\n\n    accountId = promiseResult!.accountId!;\n    request.accountId = accountId;\n    await addDapp(accountId, dapp);\n\n    const result = await reconnect(request, id);\n\n    if (result.event === 'connect' && proof) {\n      const address = await fetchStoredAddress(accountId);\n      const { password, signature } = promiseResult!;\n\n      let proofReplyItem: TonProofItemReplySuccess;\n      if (password) {\n        proofReplyItem = await signTonProof(accountId, password!, address, proof!);\n      } else {\n        proofReplyItem = buildTonProofReplyItem(proof, signature!);\n      }\n\n      result.payload.items.push(proofReplyItem);\n    }\n\n    onPopupUpdate({ type: 'updateDapps' });\n    onPopupUpdate({ type: 'dappConnectComplete' });\n\n    return result;\n  } catch (err) {\n    logDebugError('tonConnect:connect', err);\n\n    safeExec(() => {\n      onPopupUpdate({\n        type: 'dappCloseLoading',\n      });\n    });\n\n    return formatConnectError(id, err as Error);\n  }\n}\n\nexport async function reconnect(request: ApiDappRequest, id: number): Promise<LocalConnectEvent> {\n  try {\n    const { origin, accountId } = await validateRequest(request);\n\n    activateDapp(accountId, origin);\n    const currentDapp = await getDapp(accountId, origin);\n    if (!currentDapp) {\n      throw new UnknownAppError();\n    }\n    await updateDapp(accountId, origin, (dapp) => ({ ...dapp, connectedAt: Date.now() }));\n\n    const address = await fetchStoredAddress(accountId);\n    const items: ConnectItemReply[] = [\n      await buildTonAddressReplyItem(accountId, address),\n    ];\n\n    return {\n      event: 'connect',\n      id,\n      payload: { items },\n    };\n  } catch (e) {\n    logDebugError('tonConnect:reconnect', e);\n    return formatConnectError(id, e as Error);\n  }\n}\n\nexport async function disconnect(\n  request: ApiDappRequest,\n  message: DisconnectRpcRequest,\n): Promise<DisconnectRpcResponse> {\n  try {\n    const { origin, accountId } = await validateRequest(request);\n\n    await deleteDapp(accountId, origin, true);\n    deactivateAccountDapp(accountId);\n    onPopupUpdate({ type: 'updateDapps' });\n  } catch (err) {\n    logDebugError('tonConnect:disconnect', err);\n  }\n  return {\n    id: message.id,\n    result: {},\n  };\n}\n\nexport async function sendTransaction(\n  request: ApiDappRequest,\n  message: SendTransactionRpcRequest,\n): Promise<SendTransactionRpcResponse> {\n  try {\n    const { origin, accountId } = await validateRequest(request);\n    const { network } = parseAccountId(accountId);\n\n    const txPayload = JSON.parse(message.params[0]) as TransactionPayload;\n    const { messages, network: dappNetworkRaw } = txPayload;\n\n    if (messages.length > 4) {\n      throw new errors.BadRequestError('Payload contains more than 4 messages, which exceeds limit');\n    }\n\n    const dappNetwork = dappNetworkRaw\n      ? (dappNetworkRaw === CHAIN.MAINNET ? 'mainnet' : 'testnet')\n      : undefined;\n    let validUntil = txPayload.valid_until;\n    if (validUntil && validUntil > 10 ** 10) {\n      // If milliseconds were passed instead of seconds\n      validUntil = Math.round(validUntil / 1000);\n    }\n\n    const account = await fetchStoredAccount(accountId);\n    const isLedger = !!account.ledger;\n\n    let vestingAddress: string | undefined;\n\n    if (txPayload.from && toBase64Address(txPayload.from) !== toBase64Address(account.address)) {\n      const publicKey = hexToBytes(account.publicKey);\n      if (isLedger && await checkIsHisVestingWallet(network, publicKey, txPayload.from)) {\n        vestingAddress = txPayload.from;\n      } else {\n        throw new errors.BadRequestError(undefined, ApiTransactionError.WrongAddress);\n      }\n    }\n\n    if (dappNetwork && network !== dappNetwork) {\n      throw new errors.BadRequestError(undefined, ApiTransactionError.WrongNetwork);\n    }\n\n    await openExtensionPopup(true);\n\n    onPopupUpdate({\n      type: 'dappLoading',\n      connectionType: 'sendTransaction',\n      accountId,\n      isSse: Boolean('sseOptions' in request && request.sseOptions),\n    });\n\n    const {\n      preparedMessages,\n      checkResult,\n    } = await checkTransactionMessages(accountId, messages, network);\n\n    const dapp = (await getDappsByOrigin(accountId))[origin];\n    const transactionsForRequest = await prepareTransactionForRequest(network, messages);\n\n    const { promiseId, promise } = createDappPromise();\n\n    onPopupUpdate({\n      type: 'dappSendTransactions',\n      promiseId,\n      accountId,\n      dapp,\n      transactions: transactionsForRequest,\n      fee: checkResult.fee!,\n      vestingAddress,\n    });\n\n    // eslint-disable-next-line prefer-const\n    const response: string | ApiSignedTransfer[] = await promise;\n\n    if (validUntil && validUntil < (Date.now() / 1000)) {\n      throw new errors.BadRequestError('The confirmation timeout has expired');\n    }\n\n    let boc: string | undefined;\n    let successNumber: number | undefined;\n    let error: string | undefined;\n    let msgHashes: string[] = [];\n\n    if (isLedger) {\n      const signedTransfers = response as ApiSignedTransfer[];\n      const submitResult = await ton.sendSignedMessages(accountId, signedTransfers);\n      boc = submitResult.firstBoc;\n      successNumber = submitResult.successNumber;\n      msgHashes = submitResult.msgHashes;\n\n      if (successNumber > 0) {\n        if (successNumber < messages.length) {\n          onPopupUpdate({\n            type: 'showError',\n            error: ApiTransactionError.PartialTransactionFailure,\n          });\n        }\n      } else {\n        error = 'Failed transfers';\n      }\n    } else {\n      const password = response as string;\n      const submitResult = await ton.submitMultiTransfer(accountId, password!, preparedMessages, validUntil);\n      if ('error' in submitResult) {\n        error = submitResult.error;\n      } else {\n        boc = submitResult.boc;\n        successNumber = messages.length;\n        msgHashes = [submitResult.msgHash];\n      }\n    }\n\n    if (error) {\n      throw new errors.UnknownError(error);\n    }\n\n    const fromAddress = await fetchStoredAddress(accountId);\n    const successTransactions = transactionsForRequest.slice(0, successNumber!);\n\n    successTransactions.forEach(({ amount, normalizedAddress, payload }, index) => {\n      const comment = payload?.type === 'comment' ? payload.comment : undefined;\n      const msgHash = isLedger ? msgHashes[index] : msgHashes[0];\n      createLocalTransaction(accountId, {\n        amount,\n        fromAddress,\n        toAddress: normalizedAddress,\n        comment,\n        fee: checkResult.fee!,\n        slug: TONCOIN_SLUG,\n        inMsgHash: msgHash,\n      });\n    });\n\n    return {\n      result: boc!,\n      id: message.id,\n    };\n  } catch (err) {\n    logDebugError('tonConnect:sendTransaction', err);\n\n    safeExec(() => {\n      onPopupUpdate({\n        type: 'dappCloseLoading',\n      });\n    });\n\n    let code = SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR;\n    let errorMessage = 'Unhandled error';\n    let displayError: ApiAnyDisplayError | undefined;\n\n    if (err instanceof apiErrors.ApiUserRejectsError) {\n      code = SEND_TRANSACTION_ERROR_CODES.USER_REJECTS_ERROR;\n      errorMessage = err.message;\n    } else if (err instanceof errors.TonConnectError) {\n      code = err.code;\n      errorMessage = err.message;\n      displayError = err.displayError;\n    } else if (err instanceof ApiServerError) {\n      displayError = err.displayError;\n    } else {\n      displayError = ApiCommonError.Unexpected;\n    }\n\n    if (onPopupUpdate && isUpdaterAlive(onPopupUpdate) && displayError) {\n      onPopupUpdate({\n        type: 'showError',\n        error: displayError,\n      });\n    }\n    return {\n      error: {\n        code,\n        message: errorMessage,\n      },\n      id: message.id,\n    };\n  }\n}\n\nasync function checkIsHisVestingWallet(network: ApiNetwork, ownerPublicKey: Uint8Array, address: string) {\n  const [info, publicKey] = await Promise.all([\n    getContractInfo(network, address),\n    getWalletPublicKey(network, address),\n  ]);\n\n  return info.contractInfo?.name === 'vesting' && areDeepEqual(ownerPublicKey, publicKey);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function signData(request: ApiDappRequest, message: SignDataRpcRequest) {\n  return {\n    error: {\n      code: SIGN_DATA_ERROR_CODES.METHOD_NOT_SUPPORTED,\n      message: 'Method not supported',\n    },\n    id: message.id,\n  };\n}\n\nasync function checkTransactionMessages(accountId: string, messages: TransactionPayloadMessage[], network: ApiNetwork) {\n  const preparedMessages = messages.map((msg) => {\n    const {\n      address,\n      amount,\n      payload,\n      stateInit,\n    } = msg;\n\n    return {\n      toAddress: getIsRawAddress(address) ? toBase64Address(address, true, network) : address,\n      amount: BigInt(amount),\n      payload: payload ? Cell.fromBase64(payload) : undefined,\n      stateInit: stateInit ? Cell.fromBase64(stateInit) : undefined,\n    };\n  });\n\n  const checkResult = await ton.checkMultiTransactionDraft(accountId, preparedMessages);\n  if ('error' in checkResult) {\n    onPopupUpdate({\n      type: 'showError',\n      error: checkResult.error,\n    });\n    throw new errors.BadRequestError(checkResult.error);\n  }\n\n  return {\n    preparedMessages,\n    checkResult,\n  };\n}\n\nfunction prepareTransactionForRequest(network: ApiNetwork, messages: TransactionPayloadMessage[]) {\n  return Promise.all(messages.map(\n    async ({\n      address,\n      amount,\n      payload: rawPayload,\n      stateInit,\n    }) => {\n      const toAddress = getIsRawAddress(address) ? toBase64Address(address, true, network) : address;\n      // Fix address format for `waitTxComplete` to work properly\n      const normalizedAddress = toBase64Address(address, undefined, network);\n      const payload = rawPayload ? await parsePayloadBase64(network, toAddress, rawPayload) : undefined;\n      const { isScam } = getKnownAddressInfo(normalizedAddress) || {};\n\n      return {\n        toAddress,\n        amount: BigInt(amount),\n        rawPayload,\n        payload,\n        stateInit,\n        normalizedAddress,\n        isScam,\n      };\n    },\n  ));\n}\n\nexport async function deactivate(request: ApiDappRequest) {\n  try {\n    const { origin } = await validateRequest(request, true);\n\n    deactivateDapp(origin);\n  } catch (err) {\n    logDebugError('tonConnect:deactivate', err);\n  }\n}\n\nfunction formatConnectError(id: number, error: Error): ConnectEventError {\n  let code = CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR;\n  let message = 'Unhandled error';\n\n  if (error instanceof apiErrors.ApiUserRejectsError) {\n    code = CONNECT_EVENT_ERROR_CODES.USER_REJECTS_ERROR;\n    message = error.message;\n  } else if (error instanceof errors.TonConnectError) {\n    code = error.code;\n    message = error.message;\n  }\n\n  return {\n    id,\n    event: 'connect_error',\n    payload: {\n      code,\n      message,\n    },\n  };\n}\n\nasync function buildTonAddressReplyItem(accountId: string, address: string): Promise<ConnectItemReply> {\n  const { network } = parseAccountId(accountId);\n\n  const [stateInit, publicKey] = await Promise.all([\n    ton.getWalletStateInit(accountId),\n    fetchStoredPublicKey(accountId),\n  ]);\n  return {\n    name: 'ton_addr',\n    address: toRawAddress(address),\n    network: network === 'mainnet' ? CHAIN.MAINNET : CHAIN.TESTNET,\n    publicKey,\n    walletStateInit: stateInit\n      .toBoc({ idx: true, crc32: true })\n      .toString('base64'),\n  };\n}\n\nasync function signTonProof(\n  accountId: string,\n  password: string,\n  walletAddress: string,\n  proof: ApiTonConnectProof,\n): Promise<TonProofItemReplySuccess> {\n  const keyPair = await fetchKeyPair(accountId, password);\n  const { timestamp, domain, payload } = proof;\n\n  const timestampBuffer = Buffer.allocUnsafe(8);\n  timestampBuffer.writeBigInt64LE(BigInt(timestamp));\n\n  const domainBuffer = Buffer.from(domain);\n  const domainLengthBuffer = Buffer.allocUnsafe(4);\n  domainLengthBuffer.writeInt32LE(domainBuffer.byteLength);\n\n  const address = Address.parse(walletAddress);\n\n  const addressWorkchainBuffer = Buffer.allocUnsafe(4);\n  addressWorkchainBuffer.writeInt32BE(address.workChain);\n\n  const addressBuffer = Buffer.concat([\n    addressWorkchainBuffer,\n    address.hash,\n  ]);\n\n  const messageBuffer = Buffer.concat([\n    Buffer.from('ton-proof-item-v2/', 'utf8'),\n    addressBuffer,\n    domainLengthBuffer,\n    domainBuffer,\n    timestampBuffer,\n    Buffer.from(payload),\n  ]);\n\n  const bufferToSign = Buffer.concat([\n    Buffer.from('ffff', 'hex'),\n    Buffer.from('ton-connect', 'utf8'),\n    Buffer.from(await sha256(messageBuffer)),\n  ]);\n\n  const signature = nacl.sign.detached(\n    Buffer.from(await sha256(bufferToSign)),\n    keyPair!.secretKey,\n  );\n\n  return buildTonProofReplyItem(proof, bytesToBase64(signature));\n}\n\nfunction buildTonProofReplyItem(proof: ApiTonConnectProof, signature: string): TonProofItemReplySuccess {\n  const { timestamp, domain, payload } = proof;\n  const domainBuffer = Buffer.from(domain);\n\n  return {\n    name: 'ton_proof',\n    proof: {\n      timestamp,\n      domain: {\n        lengthBytes: domainBuffer.byteLength,\n        value: domainBuffer.toString('utf8'),\n      },\n      signature,\n      payload,\n    },\n  };\n}\n\nexport async function fetchDappMetadata(manifestUrl: string, origin?: string): Promise<ApiDappMetadata> {\n  try {\n    const data = await fetchJsonMetadata(manifestUrl);\n\n    const { url, name, iconUrl } = await data;\n    const safeIconUrl = iconUrl.startsWith('data:') ? BLANK_GIF_DATA_URL : iconUrl;\n    if (!isValidUrl(url) || !isValidString(name) || !isValidUrl(safeIconUrl)) {\n      throw new Error('Invalid data');\n    }\n\n    return {\n      origin: origin ?? new URL(url).origin,\n      url,\n      name,\n      iconUrl: safeIconUrl,\n      manifestUrl,\n    };\n  } catch (err) {\n    logDebugError('fetchDapp', err);\n    throw new errors.ManifestContentError();\n  }\n}\n\nasync function validateRequest(request: ApiDappRequest, skipConnection = false) {\n  const { origin } = request;\n  if (!origin) {\n    throw new errors.BadRequestError('Invalid origin');\n  }\n\n  let accountId = '';\n  if (request.accountId) {\n    accountId = request.accountId;\n  } else if (!skipConnection) {\n    const { network } = parseAccountId(await getCurrentAccountIdOrFail());\n    const lastAccountId = await findLastConnectedAccount(network, origin);\n    if (!lastAccountId) {\n      throw new errors.BadRequestError('The connection is outdated, try relogin');\n    }\n    accountId = lastAccountId;\n  }\n\n  return { origin, accountId };\n}\n\nasync function openExtensionPopup(force?: boolean) {\n  if (!IS_EXTENSION || (!force && onPopupUpdate && isUpdaterAlive(onPopupUpdate))) {\n    return false;\n  }\n\n  await callHook('onWindowNeeded');\n  await initPromise;\n\n  return true;\n}\n\nasync function getCurrentAccountOrFail() {\n  const accountId = await getCurrentAccountId();\n  if (!accountId) {\n    throw new errors.BadRequestError('The user is not authorized in the wallet');\n  }\n  return accountId;\n}\n","import type {\n  AppRequest,\n  ConnectEvent,\n  ConnectRequest,\n  DeviceInfo,\n  DisconnectEvent,\n  RpcRequests,\n} from '@tonconnect/protocol';\nimport nacl, { randomBytes } from 'tweetnacl';\n\nimport type { ApiDappRequest, ApiSseOptions, OnApiUpdate } from '../types';\n\nimport { parseAccountId } from '../../util/account';\nimport { handleFetchErrors } from '../../util/fetch';\nimport { extractKey } from '../../util/iteratees';\nimport { logDebug, logDebugError } from '../../util/logs';\nimport safeExec from '../../util/safeExec';\nimport { getCurrentNetwork, waitLogin } from '../common/accounts';\nimport { bytesToHex } from '../common/utils';\nimport { getDappsState, getSseLastEventId, setSseLastEventId } from '../methods/dapps';\nimport * as tonConnect from './index';\n\ntype SseDapp = {\n  accountId: string;\n  origin: string;\n} & ApiSseOptions;\n\ntype ReturnStrategy = 'back' | 'none' | string;\n\nconst BRIDGE_URL = 'https://tonconnectbridge.mytonwallet.org/bridge';\nconst TTL_SEC = 300;\nconst NONCE_SIZE = 24;\nconst MAX_CONFIRM_DURATION = 60 * 1000;\n\nlet sseEventSource: EventSource | undefined;\nlet sseDapps: SseDapp[] = [];\nlet delayedReturnParams: {\n  validUntil: number;\n  url: string;\n  isFromInAppBrowser?: boolean;\n} | undefined;\n\nlet onUpdate: OnApiUpdate;\n\nexport function initSse(_onUpdate: OnApiUpdate) {\n  onUpdate = _onUpdate;\n}\n\nexport async function startSseConnection({ url, deviceInfo, isFromInAppBrowser }: {\n  url: string;\n  deviceInfo: DeviceInfo;\n  isFromInAppBrowser?: boolean;\n}): Promise<ReturnStrategy | undefined> {\n  const { searchParams: params, origin } = new URL(url);\n\n  const ret: ReturnStrategy = params.get('ret') || 'back';\n  const version = Number(params.get('v') as string);\n  const appClientId = params.get('id') as string;\n  // `back` strategy cannot be implemented\n  const shouldOpenUrl = ret !== 'back' && ret !== 'none';\n  const r = params.get('r');\n\n  if (!r) {\n    if (shouldOpenUrl) {\n      delayedReturnParams = {\n        validUntil: Date.now() + MAX_CONFIRM_DURATION,\n        url: ret,\n        isFromInAppBrowser,\n      };\n    }\n    return undefined;\n  }\n\n  const connectRequest: ConnectRequest | null = safeExec(() => JSON.parse(r)) || JSON.parse(decodeURIComponent(r));\n\n  logDebug('SSE Start connection:', {\n    version, appClientId, connectRequest, ret, origin,\n  });\n\n  const { secretKey: secretKeyArray, publicKey: publicKeyArray } = nacl.box.keyPair();\n  const secretKey = bytesToHex(secretKeyArray);\n  const clientId = bytesToHex(publicKeyArray);\n\n  const lastOutputId = 0;\n  const request: ApiDappRequest = {\n    sseOptions: {\n      clientId,\n      appClientId,\n      secretKey,\n      lastOutputId,\n    },\n  };\n\n  await waitLogin();\n\n  if (!connectRequest) {\n    onUpdate({\n      type: 'showError',\n      error: 'Invalid TON Connect link',\n    });\n\n    return undefined;\n  }\n\n  const result = await tonConnect.connect(request, connectRequest, lastOutputId) as ConnectEvent;\n  if (result.event === 'connect') {\n    result.payload.device = deviceInfo;\n  }\n\n  await sendMessage(result, secretKey, clientId, appClientId);\n\n  if (result.event !== 'connect_error') {\n    await resetupSseConnection();\n  }\n\n  if (!shouldOpenUrl) {\n    return undefined;\n  }\n\n  return ret;\n}\n\nexport async function resetupSseConnection() {\n  closeEventSource();\n\n  const [lastEventId, dappsState, network] = await Promise.all([\n    getSseLastEventId(),\n    getDappsState(),\n    getCurrentNetwork(),\n  ]);\n\n  if (!dappsState || !network) {\n    return;\n  }\n\n  sseDapps = Object.entries(dappsState).reduce((result, [accountId, dapps]) => {\n    if (parseAccountId(accountId).network === network) {\n      for (const dapp of Object.values(dapps)) {\n        if (dapp.sse?.clientId) {\n          result.push({\n            ...dapp.sse,\n            accountId,\n            origin: dapp.origin,\n          });\n        }\n      }\n    }\n    return result;\n  }, [] as SseDapp[]);\n\n  const clientIds = extractKey(sseDapps, 'clientId').filter(Boolean);\n  if (!clientIds.length) {\n    return;\n  }\n\n  if (sseEventSource) {\n    safeExec(() => {\n      sseEventSource!.close();\n    });\n    sseEventSource = undefined;\n  }\n\n  sseEventSource = openEventSource(clientIds, lastEventId);\n\n  sseEventSource.onopen = () => {\n    logDebug('EventSource opened');\n  };\n\n  sseEventSource.onerror = (e) => {\n    logDebugError('EventSource', e.type);\n  };\n\n  sseEventSource.onmessage = async (event) => {\n    const { from, message: encryptedMessage } = JSON.parse(event.data);\n\n    const sseDapp = sseDapps.find(({ appClientId }) => appClientId === from);\n    if (!sseDapp) {\n      logDebug(`Dapp with clientId ${from} not found`);\n      return;\n    }\n\n    const {\n      accountId, clientId, appClientId, secretKey, origin, lastOutputId,\n    } = sseDapp;\n    const message = decryptMessage(encryptedMessage, appClientId, secretKey) as AppRequest<keyof RpcRequests>;\n\n    logDebug('SSE Event:', message);\n\n    await setSseLastEventId(event.lastEventId);\n    const sseOptions = {\n      clientId,\n      appClientId,\n      secretKey,\n      lastOutputId,\n    };\n\n    // @ts-ignore\n    const result = await tonConnect[message.method]({ origin, accountId, sseOptions }, message);\n\n    await sendMessage(result, secretKey, clientId, appClientId);\n\n    if (delayedReturnParams) {\n      const { validUntil, url, isFromInAppBrowser } = delayedReturnParams;\n      if (validUntil > Date.now()) {\n        onUpdate({ type: 'openUrl', url, isExternal: !isFromInAppBrowser });\n      }\n      delayedReturnParams = undefined;\n    }\n  };\n}\n\nexport async function sendSseDisconnect(accountId: string, origin: string) {\n  const sseDapp = sseDapps.find((dapp) => dapp.origin === origin && dapp.accountId === accountId);\n  if (!sseDapp) return;\n\n  const { secretKey, clientId, appClientId } = sseDapp;\n  const lastOutputId = sseDapp.lastOutputId + 1;\n\n  const response: DisconnectEvent = {\n    event: 'disconnect',\n    id: lastOutputId,\n    payload: {},\n  };\n\n  await sendMessage(response, secretKey, clientId, appClientId);\n}\n\nfunction sendMessage(\n  message: AnyLiteral, secretKey: string, clientId: string, toId: string, topic?: 'signTransaction' | 'signData',\n) {\n  const buffer = Buffer.from(JSON.stringify(message));\n  const encryptedMessage = encryptMessage(buffer, toId, secretKey);\n  return sendRawMessage(encryptedMessage, clientId, toId, topic);\n}\n\nasync function sendRawMessage(body: string, clientId: string, toId: string, topic?: 'signTransaction' | 'signData') {\n  const url = new URL(`${BRIDGE_URL}/message`);\n  url.searchParams.set('client_id', clientId);\n  url.searchParams.set('to', toId);\n  url.searchParams.set('ttl', TTL_SEC.toString());\n  if (topic) {\n    url.searchParams.set('topic', topic);\n  }\n\n  const response = await fetch(url, { method: 'POST', body });\n  await handleFetchErrors(response);\n}\n\nfunction closeEventSource() {\n  if (!sseEventSource) return;\n\n  sseEventSource.close();\n  sseEventSource = undefined;\n}\n\nfunction openEventSource(clientIds: string[], lastEventId?: string) {\n  const url = new URL(`${BRIDGE_URL}/events`);\n  url.searchParams.set('client_id', clientIds.join(','));\n  if (lastEventId) {\n    url.searchParams.set('last_event_id', lastEventId);\n  }\n  return new EventSource(url);\n}\n\nfunction encryptMessage(message: Uint8Array, publicKey: string, secretKey: string) {\n  const nonce = randomBytes(NONCE_SIZE);\n  const encrypted = nacl.box(\n    message, nonce, Buffer.from(publicKey, 'hex'), Buffer.from(secretKey, 'hex'),\n  );\n  return Buffer.concat([nonce, encrypted]).toString('base64');\n}\n\nfunction decryptMessage(message: string, publicKey: string, secretKey: string) {\n  const fullBuffer = Buffer.from(message, 'base64');\n  const nonce = fullBuffer.subarray(0, NONCE_SIZE);\n  const encrypted = fullBuffer.subarray(NONCE_SIZE);\n  const decrypted = nacl.box.open(\n    encrypted,\n    nonce,\n    Buffer.from(publicKey, 'hex'),\n    Buffer.from(secretKey, 'hex'),\n  );\n  const jsonText = new TextDecoder('utf-8').decode(decrypted!);\n  return JSON.parse(jsonText);\n}\n","import type {\n  CHAIN, ConnectEventError, ConnectItemReply, DeviceInfo,\n} from '@tonconnect/protocol';\n\nexport interface LocalConnectEventSuccess {\n  event: 'connect';\n  id: number;\n  payload: {\n    items: ConnectItemReply[];\n    device?: DeviceInfo; // We add it later in contentScript.js\n  };\n}\n\nexport interface TransactionPayload {\n  valid_until?: number;\n  network?: CHAIN;\n  from?: string; // https://github.com/ton-blockchain/ton-connect/blob/main/wallet-guidelines.md#multi-accounts\n  messages: TransactionPayloadMessage[];\n}\n\nexport interface TransactionPayloadMessage {\n  address: string;\n  amount: string;\n  payload?: string;\n  stateInit?: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum CONNECT_EVENT_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  MANIFEST_NOT_FOUND_ERROR = 2,\n  MANIFEST_CONTENT_ERROR = 3,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SEND_TRANSACTION_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport enum SIGN_DATA_ERROR_CODES {\n  UNKNOWN_ERROR = 0,\n  BAD_REQUEST_ERROR = 1,\n  UNKNOWN_APP_ERROR = 100,\n  USER_REJECTS_ERROR = 300,\n  METHOD_NOT_SUPPORTED = 400,\n}\n\nexport type AllErrorCodes = CONNECT_EVENT_ERROR_CODES | SEND_TRANSACTION_ERROR_CODES | SIGN_DATA_ERROR_CODES;\nexport type LocalConnectEvent = LocalConnectEventSuccess | ConnectEventError;\n\nexport interface ApiTonConnectProof {\n  timestamp: number;\n  domain: string;\n  payload: string;\n}\n","export function isValidString(value: any, maxLength = 100) {\n  return typeof value === 'string' && value.length <= maxLength;\n}\n\nexport function isValidUrl(url: string) {\n  const isString = isValidString(url, 255);\n  if (!isString) return false;\n\n  try {\n    // eslint-disable-next-line no-new\n    new URL(url);\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n","export enum ApiCommonError {\n  Unexpected = 'Unexpected',\n  ServerError = 'ServerError',\n  DebugError = 'DebugError',\n  UnsupportedVersion = 'UnsupportedVersion',\n}\n\nexport enum ApiTransactionDraftError {\n  InvalidAmount = 'InvalidAmount',\n  InvalidToAddress = 'InvalidToAddress',\n  InsufficientBalance = 'InsufficientBalance',\n  DomainNotResolved = 'DomainNotResolved',\n  WalletNotInitialized = 'WalletNotInitialized',\n  InvalidAddressFormat = 'InvalidAddressFormat',\n  InactiveContract = 'InactiveContract',\n}\n\nexport enum ApiTransactionError {\n  PartialTransactionFailure = 'PartialTransactionFailure',\n  IncorrectDeviceTime = 'IncorrectDeviceTime',\n  InsufficientBalance = 'InsufficientBalance',\n  UnsuccesfulTransfer = 'UnsuccesfulTransfer',\n  NotSupportedHardwareOperation = 'NotSupportedHardwareOperation',\n  HardwareBlindSigningNotEnabled = 'HardwareBlindSigningNotEnabled',\n  WrongAddress = 'WrongAddress',\n  WrongNetwork = 'WrongNetwork',\n}\n\nexport type ApiAnyDisplayError = ApiCommonError | ApiTransactionDraftError | ApiTransactionError;\n","export * from './updates';\nexport * from './misc';\nexport * from './payload';\nexport * from './errors';\nexport * from './backend';\nexport * from './storage';\nexport * from './activity';\n","import type { DNS_ZONES_MAP } from '../blockchains/ton/constants';\nimport type { ApiParsedPayload } from './payload';\nimport type { ApiSseOptions } from './storage';\n\nexport type ApiWalletVersion = 'simpleR1'\n| 'simpleR2'\n| 'simpleR3'\n| 'v2R1'\n| 'v2R2'\n| 'v3R1'\n| 'v3R2'\n| 'v4R2'\n| 'W5';\n\nexport type ApiBlockchainKey = 'ton';\nexport type ApiNetwork = 'mainnet' | 'testnet';\nexport type ApiLedgerDriver = 'HID' | 'USB';\n\nexport interface AccountIdParsed {\n  id: number;\n  blockchain: ApiBlockchainKey;\n  network: ApiNetwork;\n}\n\nexport interface ApiInitArgs {\n  isElectron: boolean;\n  isNativeBottomSheet: boolean;\n  isIosApp: boolean;\n  isAndroidApp: boolean;\n}\n\nexport interface ApiBaseToken {\n  name: string;\n  symbol: string;\n  slug: string;\n  decimals: number;\n  minterAddress?: string;\n  image?: string;\n  isPopular?: boolean;\n  keywords?: string[];\n  cmcSlug?: string;\n  color?: string;\n}\n\nexport interface ApiToken extends ApiBaseToken {\n  quote: ApiTokenPrice;\n}\n\nexport interface ApiTokenPrice {\n  slug: string;\n  price: number;\n  priceUsd: number;\n  percentChange24h: number;\n}\n\nexport type ApiKnownAddresses = Record<string, ApiAddressInfo>;\n\nexport interface ApiAddressInfo {\n  name?: string;\n  isScam?: boolean;\n  isMemoRequired?: boolean;\n}\n\nexport type ApiTxIdBySlug = Record<string, string | undefined>;\nexport type ApiTransactionType = 'stake' | 'unstake' | 'unstakeRequest' | 'swap'\n| 'nftTransferred' | 'nftReceived' | undefined;\n\nexport interface ApiTransaction {\n  txId: string;\n  timestamp: number;\n  amount: bigint;\n  fromAddress: string;\n  toAddress: string;\n  comment?: string;\n  encryptedComment?: string;\n  fee: bigint;\n  slug: string;\n  isIncoming: boolean;\n  normalizedAddress: string;\n  inMsgHash: string;\n  shouldHide?: boolean;\n  type?: ApiTransactionType;\n  metadata?: ApiTransactionMetadata;\n  nft?: ApiNft;\n}\n\nexport interface ApiTransactionMetadata extends ApiAddressInfo {\n}\n\nexport interface ApiNft {\n  index: number;\n  name?: string;\n  address: string;\n  thumbnail: string;\n  image: string;\n  description?: string;\n  collectionName?: string;\n  collectionAddress?: string;\n  isOnSale: boolean;\n  isHidden?: boolean;\n  isOnFragment?: boolean;\n  isScam?: boolean;\n}\n\nexport type ApiHistoryList = Array<[number, number]>;\nexport type ApiTokenSimple = Omit<ApiToken, 'quote'>;\n\nexport type ApiStakingType = 'nominators' | 'liquid';\n\nexport type ApiStakingState = {\n  type: 'nominators';\n  amount: bigint;\n  pendingDepositAmount: bigint;\n  isUnstakeRequested: boolean;\n} | {\n  type: 'liquid';\n  tokenAmount: bigint;\n  amount: bigint;\n  unstakeRequestAmount: bigint;\n  apy: number;\n  instantAvailable: bigint;\n};\n\nexport interface ApiNominatorsPool {\n  address: string;\n  apy: number;\n  start: number;\n  end: number;\n}\n\nexport interface ApiBackendStakingState {\n  balance: bigint;\n  totalProfit: bigint;\n  type?: ApiStakingType;\n  nominatorsPool: ApiNominatorsPool;\n  loyaltyType?: ApiLoyaltyType;\n  shouldUseNominators?: boolean;\n  stakedAt?: number;\n}\n\nexport type ApiStakingHistory = {\n  timestamp: number;\n  profit: string;\n}[];\n\nexport interface ApiDappPermissions {\n  isAddressRequired?: boolean;\n  isPasswordRequired?: boolean;\n}\n\nexport type ApiDappRequest = {\n  origin?: string;\n  accountId?: string;\n  sseOptions?: ApiSseOptions;\n} | {\n  origin: string;\n  accountId: string;\n};\n\nexport interface ApiDappTransfer {\n  toAddress: string;\n  amount: bigint;\n  rawPayload?: string;\n  payload?: ApiParsedPayload;\n  stateInit?: string;\n  isScam?: boolean;\n}\n\nexport interface ApiSubmitTransferOptions {\n  accountId: string;\n  password: string;\n  toAddress: string;\n  amount: bigint;\n  comment?: string;\n  tokenAddress?: string;\n  fee?: bigint;\n  shouldEncrypt?: boolean;\n  isBase64Data?: boolean;\n  withDiesel?: boolean;\n  dieselAmount?: bigint;\n}\n\nexport enum Workchain {\n  MasterChain = -1,\n  BaseChain = 0,\n}\n\nexport interface ApiSignedTransfer {\n  base64: string;\n  seqno: number;\n  params: Omit<ApiLocalTransactionParams, 'inMsgHash'>;\n}\n\nexport type ApiLocalTransactionParams = Omit<\nApiTransaction, 'txId' | 'timestamp' | 'isIncoming' | 'normalizedAddress'\n> & {\n  normalizedAddress?: string;\n};\n\nexport type ApiBaseCurrency = 'USD' | 'EUR' | 'RUB' | 'CNY' | 'BTC' | 'TON';\n\nexport enum ApiLiquidUnstakeMode {\n  Default,\n  Instant,\n  BestRate,\n}\n\nexport type ApiLoyaltyType = 'black' | 'platinum' | 'gold' | 'silver' | 'standard';\n\nexport type ApiBalanceBySlug = Record<string, bigint>;\n\nexport type ApiWalletInfo = {\n  address: string;\n  version: ApiWalletVersion;\n  balance: bigint;\n  isInitialized: boolean;\n  lastTxId?: string;\n};\n\nexport type ApiDnsZone = keyof typeof DNS_ZONES_MAP;\n\n// Country codes from ISO-3166-1 spec\nexport type ApiCountryCode = 'AF' | 'AX' | 'AL' | 'DZ' | 'AS' | 'AD' | 'AO' | 'AI' | 'AQ' | 'AG' | 'AR'\n| 'AM' | 'AW' | 'AU' | 'AT' | 'AZ' | 'BS' | 'BH' | 'BD' | 'BB' | 'BY' | 'BE' | 'BZ' | 'BJ' | 'BM'\n| 'BT' | 'BO' | 'BQ' | 'BA' | 'BW' | 'BV' | 'BR' | 'IO' | 'BN' | 'BG' | 'BF' | 'BI' | 'CV' | 'KH'\n| 'CM' | 'CA' | 'KY' | 'CF' | 'TD' | 'CL' | 'CN' | 'CX' | 'CC' | 'CO' | 'KM' | 'CG' | 'CD' | 'CK'\n| 'CR' | 'CI' | 'HR' | 'CU' | 'CW' | 'CY' | 'CZ' | 'DK' | 'DJ' | 'DM' | 'DO' | 'EC' | 'EG' | 'SV'\n| 'GQ' | 'ER' | 'EE' | 'SZ' | 'ET' | 'FK' | 'FO' | 'FJ' | 'FI' | 'FR' | 'GF' | 'PF' | 'TF' | 'GA'\n| 'GM' | 'GE' | 'DE' | 'GH' | 'GI' | 'GR' | 'GL' | 'GD' | 'GP' | 'GU' | 'GT' | 'GG' | 'GN' | 'GW'\n| 'GY' | 'HT' | 'HM' | 'VA' | 'HN' | 'HK' | 'HU' | 'IS' | 'IN' | 'ID' | 'IR' | 'IQ' | 'IE' | 'IM'\n| 'IL' | 'IT' | 'JM' | 'JP' | 'JE' | 'JO' | 'KZ' | 'KE' | 'KI' | 'KP' | 'KR' | 'KW' | 'KG' | 'LA'\n| 'LV' | 'LB' | 'LS' | 'LR' | 'LY' | 'LI' | 'LT' | 'LU' | 'MO' | 'MG' | 'MW' | 'MY' | 'MV' | 'ML'\n| 'MT' | 'MH' | 'MQ' | 'MR' | 'MU' | 'YT' | 'MX' | 'FM' | 'MD' | 'MC' | 'MN' | 'ME' | 'MS' | 'MA'\n| 'MZ' | 'MM' | 'NA' | 'NR' | 'NP' | 'NL' | 'NC' | 'NZ' | 'NI' | 'NE' | 'NG' | 'NU' | 'NF' | 'MP'\n| 'NO' | 'OM' | 'PK' | 'PW' | 'PS' | 'PA' | 'PG' | 'PY' | 'PE' | 'PH' | 'PN' | 'PL' | 'PT' | 'PR'\n| 'QA' | 'MK' | 'RO' | 'RU' | 'RW' | 'RE' | 'BL' | 'SH' | 'KN' | 'LC' | 'MF' | 'PM' | 'VC' | 'WS'\n| 'SM' | 'ST' | 'SA' | 'SN' | 'RS' | 'SC' | 'SL' | 'SG' | 'SX' | 'SK' | 'SI' | 'SB' | 'SO' | 'ZA'\n| 'GS' | 'SS' | 'ES' | 'LK' | 'SD' | 'SR' | 'SJ' | 'SE' | 'CH' | 'SY' | 'TW' | 'TJ' | 'TZ' | 'TH'\n| 'TL' | 'TG' | 'TK' | 'TO' | 'TT' | 'TN' | 'TR' | 'TM' | 'TC' | 'TV' | 'UG' | 'UA' | 'AE' | 'GB'\n| 'US' | 'UM' | 'UY' | 'UZ' | 'VU' | 'VE' | 'VN' | 'VG' | 'VI' | 'WF' | 'EH' | 'YE' | 'ZM' | 'ZW';\n","import type { ApiBaseCurrency, ApiSwapAsset, ApiWalletVersion } from './api/types';\nimport type { LangItem, TokenPeriod } from './global/types';\n\nexport const APP_ENV = process.env.APP_ENV;\n\nexport const APP_NAME = process.env.APP_NAME || 'MyTonWallet';\nexport const APP_VERSION = process.env.APP_VERSION!;\nexport const APP_ENV_MARKER = APP_ENV === 'staging' ? 'Beta' : APP_ENV === 'development' ? 'Dev' : undefined;\n\nexport const DEBUG = APP_ENV !== 'production' && APP_ENV !== 'perf' && APP_ENV !== 'test';\nexport const DEBUG_MORE = false;\n\nexport const IS_PRODUCTION = APP_ENV === 'production';\nexport const IS_TEST = APP_ENV === 'test';\nexport const IS_PERF = APP_ENV === 'perf';\nexport const IS_EXTENSION = process.env.IS_EXTENSION === '1';\nexport const IS_FIREFOX_EXTENSION = process.env.IS_FIREFOX_EXTENSION === '1';\nexport const IS_PACKAGED_ELECTRON = process.env.IS_PACKAGED_ELECTRON === '1';\nexport const IS_CAPACITOR = process.env.IS_CAPACITOR === '1';\nexport const IS_ANDROID_DIRECT = process.env.IS_ANDROID_DIRECT === '1';\n\nexport const ELECTRON_HOST_URL = 'https://dumb-host';\nexport const INACTIVE_MARKER = '[Inactive]';\nexport const PRODUCTION_URL = 'https://mytonwallet.app';\nexport const BETA_URL = 'https://beta.mytonwallet.app';\nexport const APP_REPO_URL = 'https://github.com/mytonwalletorg/mytonwallet';\nexport const BASE_URL = process.env.BASE_URL;\n\nexport const BOT_USERNAME = process.env.BOT_USERNAME || 'MyTonWalletBot';\n\nexport const SWAP_FEE_ADDRESS = process.env.SWAP_FEE_ADDRESS || 'UQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0GOp';\n\nexport const STRICTERDOM_ENABLED = DEBUG && !IS_PACKAGED_ELECTRON;\n\nexport const DEBUG_ALERT_MSG = 'Shoot!\\nSomething went wrong, please see the error details in Dev Tools Console.';\n\nexport const PIN_LENGTH = 4;\nexport const NATIVE_BIOMETRICS_USERNAME = 'MyTonWallet';\nexport const NATIVE_BIOMETRICS_SERVER = 'https://mytonwallet.app';\n\nexport const MNEMONIC_COUNT = 24;\nexport const PRIVATE_KEY_HEX_LENGTH = 64;\nexport const MNEMONIC_CHECK_COUNT = 3;\n\nexport const MOBILE_SCREEN_MAX_WIDTH = 700; // px\n\nexport const ANIMATION_END_DELAY = 50;\n\nexport const ANIMATED_STICKER_TINY_SIZE_PX = 70;\nexport const ANIMATED_STICKER_SMALL_SIZE_PX = 110;\nexport const ANIMATED_STICKER_MIDDLE_SIZE_PX = 120;\nexport const ANIMATED_STICKER_DEFAULT_PX = 150;\nexport const ANIMATED_STICKER_BIG_SIZE_PX = 156;\nexport const ANIMATED_STICKER_HUGE_SIZE_PX = 192;\n\nexport const TON_SYMBOL = 'TON';\n\nexport const DEFAULT_LANDSCAPE_ACTION_TAB_ID = 0;\n\nexport const DEFAULT_DECIMAL_PLACES = 9;\nexport const WHOLE_PART_DELIMITER = ' '; // https://www.compart.com/en/unicode/U+202F\n\nexport const DEFAULT_SLIPPAGE_VALUE = 5;\n\nexport const GLOBAL_STATE_CACHE_DISABLED = false;\nexport const GLOBAL_STATE_CACHE_KEY = 'mytonwallet-global-state';\n\nexport const ANIMATION_LEVEL_MIN = 0;\nexport const ANIMATION_LEVEL_MED = 1;\nexport const ANIMATION_LEVEL_MAX = 2;\nexport const ANIMATION_LEVEL_DEFAULT = ANIMATION_LEVEL_MAX;\nexport const THEME_DEFAULT = 'system';\n\nexport const MAIN_ACCOUNT_ID = '0-ton-mainnet';\n\nexport const TONHTTPAPI_MAINNET_URL = process.env.TONHTTPAPI_MAINNET_URL\n  || 'https://tonhttpapi.mytonwallet.org/api/v2/jsonRPC';\nexport const TONHTTPAPI_MAINNET_API_KEY = process.env.TONHTTPAPI_MAINNET_API_KEY;\nexport const ELECTRON_TONHTTPAPI_MAINNET_API_KEY = process.env.ELECTRON_TONHTTPAPI_MAINNET_API_KEY;\nexport const TONHTTPAPI_V3_MAINNET_API_URL = process.env.TONHTTPAPI_V3_MAINNET_API_KEY\n  || 'https://tonhttpapi-v3.mytonwallet.org/api/v3';\nexport const TONAPIIO_MAINNET_URL = process.env.TONAPIIO_MAINNET_URL || 'https://tonapiio.mytonwallet.org';\n\nexport const TONHTTPAPI_TESTNET_URL = process.env.TONHTTPAPI_TESTNET_URL\n  || 'https://tonhttpapi-testnet.mytonwallet.org/api/v2/jsonRPC';\nexport const TONHTTPAPI_TESTNET_API_KEY = process.env.TONHTTPAPI_TESTNET_API_KEY;\nexport const ELECTRON_TONHTTPAPI_TESTNET_API_KEY = process.env.ELECTRON_TONHTTPAPI_TESTNET_API_KEY;\nexport const TONHTTPAPI_V3_TESTNET_API_URL = process.env.TONHTTPAPI_V3_TESTNET_API_KEY\n  || 'https://tonhttpapi-v3-testnet.mytonwallet.org/api/v3';\nexport const TONAPIIO_TESTNET_URL = process.env.TONAPIIO_TESTNET_URL || 'https://tonapiio-testnet.mytonwallet.org';\n\nexport const BRILLIANT_API_BASE_URL = process.env.BRILLIANT_API_BASE_URL || 'https://api.mytonwallet.org';\n\nexport const FRACTION_DIGITS = 9;\nexport const SHORT_FRACTION_DIGITS = 2;\n\nexport const SUPPORT_USERNAME = 'MyTonWalletSupport';\nexport const MY_TON_WALLET_PROMO_URL = 'https://mytonwallet.io';\nexport const TELEGRAM_WEB_URL = 'https://web.telegram.org/a/';\nexport const TON_EXPLORER_BASE_MAINNET_URL = 'https://tonviewer.com/';\nexport const TON_EXPLORER_BASE_TESTNET_URL = 'https://testnet.tonviewer.com/';\nexport const TON_EXPLORER_NAME = 'Tonviewer';\nexport const TOKEN_EXPLORER_MAINNET_URL = 'https://tonviewer.com/{address}?section=jetton';\nexport const TOKEN_EXPLORER_TESTNET_URL = 'https://testnet.tonviewer.com/{address}?section=jetton';\nexport const TOKEN_EXPLORER_NAME = 'TonViewer';\nexport const GETGEMS_BASE_MAINNET_URL = 'https://getgems.io/';\nexport const GETGEMS_BASE_TESTNET_URL = 'https://testnet.getgems.io/';\nexport const EMPTY_HASH_VALUE = 'NOHASH';\n\nexport const CHANGELLY_SUPPORT_EMAIL = 'support@changelly.com';\nexport const CHANGELLY_LIVE_CHAT_URL = 'https://changelly.com/';\nexport const CHANGELLY_SECURITY_EMAIL = 'security@changelly.com';\nexport const CHANGELLY_TERMS_OF_USE = 'https://changelly.com/terms-of-use';\nexport const CHANGELLY_PRIVACY_POLICY = 'https://changelly.com/privacy-policy';\nexport const CHANGELLY_AML_KYC = 'https://changelly.com/aml-kyc';\nexport const CHANGELLY_WAITING_DEADLINE = 3 * 60 * 60 * 1000; // 3 hour\n\nexport const TONCOIN_SLUG = 'toncoin';\nexport const DEFAULT_SWAP_SECOND_TOKEN_SLUG = 'ton-eqcxe6mutq'; // USD₮\nexport const DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG = 'usdtrx';\n\nexport const PROXY_HOSTS = process.env.PROXY_HOSTS;\n\nexport const TINY_TRANSFER_MAX_COST = 0.01;\n\nexport const LANG_CACHE_NAME = 'mtw-lang-125';\n\nexport const LANG_LIST: LangItem[] = [{\n  langCode: 'en',\n  name: 'English',\n  nativeName: 'English',\n  rtl: false,\n}, {\n  langCode: 'es',\n  name: 'Spanish',\n  nativeName: 'Español',\n  rtl: false,\n}, {\n  langCode: 'ru',\n  name: 'Russian',\n  nativeName: 'Русский',\n  rtl: false,\n}, {\n  langCode: 'zh-Hans',\n  name: 'Chinese (Simplified)',\n  nativeName: '简体',\n  rtl: false,\n}, {\n  langCode: 'zh-Hant',\n  name: 'Chinese (Traditional)',\n  nativeName: '繁體',\n  rtl: false,\n}, {\n  langCode: 'tr',\n  name: 'Turkish',\n  nativeName: 'Türkçe',\n  rtl: false,\n}, {\n  langCode: 'de',\n  name: 'German',\n  nativeName: 'Deutsch',\n  rtl: false,\n}, {\n  langCode: 'th',\n  name: 'Thai',\n  nativeName: 'ไทย',\n  rtl: false,\n}, {\n  langCode: 'uk',\n  name: 'Ukrainian',\n  nativeName: 'Українська',\n  rtl: false,\n}, {\n  langCode: 'pl',\n  name: 'Polish',\n  nativeName: 'Polski',\n  rtl: false,\n}];\n\nexport const STAKING_CYCLE_DURATION_MS = 131072000; // 36.4 hours\nexport const VALIDATION_PERIOD_MS = 65536000; // 18.2 h.\nexport const ONE_TON = 1000000000n;\nexport const MIN_BALANCE_FOR_UNSTAKE = 1020000000n; // 1.02 TON\nexport const STAKING_FORWARD_AMOUNT = ONE_TON;\nexport const DEFAULT_FEE = 15000000n; // 0.015 TON\n\nexport const STAKING_POOLS = process.env.STAKING_POOLS ? process.env.STAKING_POOLS.split(' ') : [];\nexport const LIQUID_POOL = process.env.LIQUID_POOL || 'EQD2_4d91M4TVbEBVyBF8J1UwpMJc361LKVCz6bBlffMW05o';\nexport const LIQUID_JETTON = process.env.LIQUID_JETTON || 'EQCqC6EhRJ_tpWngKxL6dV0k6DSnRUrs9GSVkLbfdCqsj6TE';\nexport const STAKING_MIN_AMOUNT = ONE_TON;\nexport const NOMINATORS_STAKING_MIN_AMOUNT = ONE_TON * 10001n;\n\nexport const TONCONNECT_PROTOCOL_VERSION = 2;\nexport const TONCONNECT_WALLET_JSBRIDGE_KEY = 'mytonwallet';\n\nexport const NFT_FRAGMENT_COLLECTIONS = new Set([\n  '0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2', // Anonymous Telegram Numbers\n  '0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2', // Telegram Usernames\n]);\n\nexport const TON_DNS_COLLECTION = 'EQC3dNlesgVD8YbAazcauIrXBPfiVhMMr5YYk2in0Mtsz0Bz';\nexport const MYCOIN_TOKEN = 'EQCFVNlRb-NHHDQfv3Q9xvDXBLJlay855_xREsq5ZDX6KN-w';\nexport const MYCOIN_SLUG = 'ton-eqcfvnlrbn';\nexport const MYCOIN_TOKEN_TESTNET = 'kQAWlxpEbwhCDFX9gp824ee2xVBhAh5VRSGWfbNFDddAbQoQ';\nexport const MYCOIN_SLUG_TESTNET = 'ton-kqawlxpebw';\n\nexport const TOKEN_INFO = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TON_SYMBOL,\n    slug: TONCOIN_SLUG,\n    cmcSlug: TONCOIN_SLUG,\n    quote: {\n      slug: TONCOIN_SLUG,\n      price: 1.95,\n      priceUsd: 1.95,\n      percentChange24h: 0,\n    },\n    decimals: DEFAULT_DECIMAL_PLACES,\n  },\n};\n\nexport const TON_BLOCKCHAIN = 'ton';\n\nexport const INIT_SWAP_ASSETS: Record<string, ApiSwapAsset> = {\n  toncoin: {\n    name: 'Toncoin',\n    symbol: TON_SYMBOL,\n    blockchain: TON_BLOCKCHAIN,\n    slug: TONCOIN_SLUG,\n    decimals: DEFAULT_DECIMAL_PLACES,\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n  'ton-eqcxe6mutq': {\n    name: 'Tether USD',\n    symbol: 'USD₮',\n    blockchain: TON_BLOCKCHAIN,\n    slug: 'ton-eqcxe6mutq',\n    decimals: 9,\n    // eslint-disable-next-line max-len\n    image: 'https://cache.tonapi.io/imgproxy/T3PB4s7oprNVaJkwqbGg54nexKE0zzKhcrPv8jcWYzU/rs:fill:200:200:1/g:no/aHR0cHM6Ly90ZXRoZXIudG8vaW1hZ2VzL2xvZ29DaXJjbGUucG5n.webp',\n    contract: 'EQCxE6mUtQJKFnGfaROTKOt1lZbDiiX1kCixRv7Nw2Id_sDs',\n    price: 0,\n    priceUsd: 0,\n    isPopular: true,\n  },\n};\n\nexport const MULTITAB_DATA_CHANNEL_NAME = 'mtw-multitab';\nexport const ACTIVE_TAB_STORAGE_KEY = 'mtw-active-tab';\n\nexport const INDEXED_DB_NAME = 'keyval-store';\nexport const INDEXED_DB_STORE_NAME = 'keyval';\n\nexport const WINDOW_PROVIDER_CHANNEL = 'windowProvider';\n\nexport const MIN_ASSETS_TAB_VIEW = 5;\n\nexport const DEFAULT_PRICE_CURRENCY = 'USD';\nexport const SHORT_CURRENCY_SYMBOL_MAP = {\n  USD: '$',\n  EUR: '€',\n  RUB: '₽',\n  CNY: '¥',\n};\nexport const CURRENCY_LIST: { value: ApiBaseCurrency; name: string }[] = [\n  {\n    value: 'USD',\n    name: 'US Dollar',\n  }, {\n    value: 'EUR',\n    name: 'Euro',\n  }, {\n    value: 'RUB',\n    name: 'Ruble',\n  }, {\n    value: 'CNY',\n    name: 'Yuan',\n  }, {\n    value: 'BTC',\n    name: 'Bitcoin',\n  }, {\n    value: TON_SYMBOL,\n    name: 'Toncoin',\n  },\n];\n\nexport const BURN_ADDRESS = 'UQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJKZ';\n\nexport const DEFAULT_WALLET_VERSION: ApiWalletVersion = 'W5';\nexport const POPULAR_WALLET_VERSIONS: ApiWalletVersion[] = ['v3R1', 'v3R2', 'v4R2', 'W5'];\n\nexport const DEFAULT_TIMEOUT = 10000;\nexport const DEFAULT_RETRIES = 3;\nexport const DEFAULT_ERROR_PAUSE = 500;\n\nexport const HISTORY_PERIODS: TokenPeriod[] = ['1D', '7D', '1M', '3M', '1Y', 'ALL'];\n\nexport const BROWSER_HISTORY_LIMIT = 10;\n\nexport const NFT_BATCH_SIZE = 4;\nexport const NOTCOIN_VOUCHERS_ADDRESS = 'EQDmkj65Ab_m0aZaW8IpKw4kYqIgITw_HRstYEkVQ6NIYCyW';\nexport const BURN_CHUNK_DURATION_APPROX_SEC = 30;\nexport const NOTCOIN_FORWARD_TON_AMOUNT = 30000000n; // 0.03 TON\nexport const NOTCOIN_EXCHANGERS = [\n  'EQAPZauWVPUcm2hUJT9n36pxznEhl46rEn1bzBXN0RY_yiy2',\n  'EQASgm0Qv3h2H2mF0W06ikPqYq2ctT3dyXMJH_svbEKKB3iZ',\n  'EQArlmP-RhVIG2yAFGZyPZfM3m0YccxmpvoRi6sgRzWnAA0s',\n  'EQA6pL-spYqZp1Ck6o3rpY45Cl-bvLMW_j3qdVejOkUWpLnm',\n  'EQBJ_ehYjumQKbXfWUue1KHKXdTm1GuYJB0Fj2ST_DwORvpd',\n  'EQBRmYSjxh9xlZpUqEmGjF5UjukI9v_Cm2kCTu4CoBn3XkOD',\n  'EQBkiqncd7AFT5_23H-RoA2Vynk-Nzq_dLoeMVRthAU9RF0p',\n  'EQB_OzTHXbztABe0QHgr4PtAV8T64LR6aDunXgaAoihOdxwO',\n  'EQCL-x5kLg6tKVNGryItTuj6tG3FH5mhUEu0xRqQc-kbEmbe',\n  'EQCZh2yJ46RaQH3AYmjEA8SMMXi77Oein4-3lvqkHseIAhD-',\n  'EQChKo5IK3iNqUHUGDB9gtzjCjMTPtmsFqekuCA2MdreVEyu',\n  'EQC6DNCBv076TIliRMfOt20RpbS7rNKDfSky3WrFEapFt8AH',\n  'EQDE_XFZOYae_rl3ZMsgBCtRSmYhl8B4y2BZEP7oiGBDhlgy',\n  'EQDddqpGA2ePXQF47A2DSL3GF6ZzIVmimfM2d16cdymy2noT',\n  'EQDv0hNNAamhYltCh3pTJrq3oRB9RW2ZhEYkTP6fhj5BtZNu',\n  'EQD2mP7zgO7-imUJhqYry3i07aJ_SR53DaokMupfAAobt0Xw',\n] as const;\n\nexport const CLAIM_ADDRESS = 'EQB3zOTvPi1PmwdcTpqSfFKZnhi1GNKEVJM-LdoAirdLtash';\nexport const CLAIM_AMOUNT = 30000000n; // 0.03 TON\nexport const CLAIM_COMMENT = 'claim';\n\n// eslint-disable-next-line max-len\nexport const RE_LINK_TEMPLATE = /((ftp|https?):\\/\\/)?(?<host>(www\\\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)/g;\n// eslint-disable-next-line max-len\nexport const RE_TG_BOT_MENTION = /telegram[:\\s-]*((@[a-z0-9_]+)|(https:\\/\\/)?(t\\.me|telegram\\.me|telegram\\.dog)\\/[a-z0-9_]+)/mig;\n\nexport const DIESEL_ADDRESS = process.env.DIESEL_ADDRESS || 'EQDUkQbpTVIgt7v66-JTFR-3-eXRFz_4V66F-Ufn6vOg0D5s';\nexport const DIESEL_TOKENS = new Set([\n  'ton-eqcxe6mutq', // USDT\n  'ton-eqavlwfdxg', // Notcoin\n  'ton-eqcvxjy4eg', // DOGS\n]);\n","// Version 3.1.2\n/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */\n(function(root) {\n  \"use strict\";\n\n  function checkInt(value) {\n    return (parseInt(value) === value);\n  }\n\n  function checkInts(arrayish) {\n    if (!checkInt(arrayish.length)) { return false; }\n\n    for (var i = 0; i < arrayish.length; i++) {\n      if (!checkInt(arrayish[i]) || arrayish[i] < 0 || arrayish[i] > 255) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  function coerceArray(arg, copy) {\n\n    // ArrayBuffer view\n    if (arg.buffer && arg.name === 'Uint8Array') {\n\n      if (copy) {\n        if (arg.slice) {\n          arg = arg.slice();\n        } else {\n          arg = Array.prototype.slice.call(arg);\n        }\n      }\n\n      return arg;\n    }\n\n    // It's an array; check it is a valid representation of a byte\n    if (Array.isArray(arg)) {\n      if (!checkInts(arg)) {\n        throw new Error('Array contains invalid value: ' + arg);\n      }\n\n      return new Uint8Array(arg);\n    }\n\n    // Something else, but behaves like an array (maybe a Buffer? Arguments?)\n    if (checkInt(arg.length) && checkInts(arg)) {\n      return new Uint8Array(arg);\n    }\n\n    throw new Error('unsupported array-like object');\n  }\n\n  function createArray(length) {\n    return new Uint8Array(length);\n  }\n\n  function copyArray(sourceArray, targetArray, targetStart, sourceStart, sourceEnd) {\n    if (sourceStart != null || sourceEnd != null) {\n      if (sourceArray.slice) {\n        sourceArray = sourceArray.slice(sourceStart, sourceEnd);\n      } else {\n        sourceArray = Array.prototype.slice.call(sourceArray, sourceStart, sourceEnd);\n      }\n    }\n    targetArray.set(sourceArray, targetStart);\n  }\n\n\n\n  var convertUtf8 = (function() {\n    function toBytes(text) {\n      var result = [], i = 0;\n      text = encodeURI(text);\n      while (i < text.length) {\n        var c = text.charCodeAt(i++);\n\n        // if it is a % sign, encode the following 2 bytes as a hex value\n        if (c === 37) {\n          result.push(parseInt(text.substr(i, 2), 16))\n          i += 2;\n\n          // otherwise, just the actual byte\n        } else {\n          result.push(c)\n        }\n      }\n\n      return coerceArray(result);\n    }\n\n    function fromBytes(bytes) {\n      var result = [], i = 0;\n\n      while (i < bytes.length) {\n        var c = bytes[i];\n\n        if (c < 128) {\n          result.push(String.fromCharCode(c));\n          i++;\n        } else if (c > 191 && c < 224) {\n          result.push(String.fromCharCode(((c & 0x1f) << 6) | (bytes[i + 1] & 0x3f)));\n          i += 2;\n        } else {\n          result.push(String.fromCharCode(((c & 0x0f) << 12) | ((bytes[i + 1] & 0x3f) << 6) | (bytes[i + 2] & 0x3f)));\n          i += 3;\n        }\n      }\n\n      return result.join('');\n    }\n\n    return {\n      toBytes: toBytes,\n      fromBytes: fromBytes,\n    }\n  })();\n\n  var convertHex = (function() {\n    function toBytes(text) {\n      var result = [];\n      for (var i = 0; i < text.length; i += 2) {\n        result.push(parseInt(text.substr(i, 2), 16));\n      }\n\n      return result;\n    }\n\n    // http://ixti.net/development/javascript/2011/11/11/base64-encodedecode-of-utf8-in-browser-with-js.html\n    var Hex = '0123456789abcdef';\n\n    function fromBytes(bytes) {\n      var result = [];\n      for (var i = 0; i < bytes.length; i++) {\n        var v = bytes[i];\n        result.push(Hex[(v & 0xf0) >> 4] + Hex[v & 0x0f]);\n      }\n      return result.join('');\n    }\n\n    return {\n      toBytes: toBytes,\n      fromBytes: fromBytes,\n    }\n  })();\n\n\n  // Number of rounds by keysize\n  var numberOfRounds = {16: 10, 24: 12, 32: 14}\n\n  // Round constant words\n  var rcon = [0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, 0xc5, 0x91];\n\n  // S-box and Inverse S-box (S is for Substitution)\n  var S = [0x63, 0x7c, 0x77, 0x7b, 0xf2, 0x6b, 0x6f, 0xc5, 0x30, 0x01, 0x67, 0x2b, 0xfe, 0xd7, 0xab, 0x76, 0xca, 0x82, 0xc9, 0x7d, 0xfa, 0x59, 0x47, 0xf0, 0xad, 0xd4, 0xa2, 0xaf, 0x9c, 0xa4, 0x72, 0xc0, 0xb7, 0xfd, 0x93, 0x26, 0x36, 0x3f, 0xf7, 0xcc, 0x34, 0xa5, 0xe5, 0xf1, 0x71, 0xd8, 0x31, 0x15, 0x04, 0xc7, 0x23, 0xc3, 0x18, 0x96, 0x05, 0x9a, 0x07, 0x12, 0x80, 0xe2, 0xeb, 0x27, 0xb2, 0x75, 0x09, 0x83, 0x2c, 0x1a, 0x1b, 0x6e, 0x5a, 0xa0, 0x52, 0x3b, 0xd6, 0xb3, 0x29, 0xe3, 0x2f, 0x84, 0x53, 0xd1, 0x00, 0xed, 0x20, 0xfc, 0xb1, 0x5b, 0x6a, 0xcb, 0xbe, 0x39, 0x4a, 0x4c, 0x58, 0xcf, 0xd0, 0xef, 0xaa, 0xfb, 0x43, 0x4d, 0x33, 0x85, 0x45, 0xf9, 0x02, 0x7f, 0x50, 0x3c, 0x9f, 0xa8, 0x51, 0xa3, 0x40, 0x8f, 0x92, 0x9d, 0x38, 0xf5, 0xbc, 0xb6, 0xda, 0x21, 0x10, 0xff, 0xf3, 0xd2, 0xcd, 0x0c, 0x13, 0xec, 0x5f, 0x97, 0x44, 0x17, 0xc4, 0xa7, 0x7e, 0x3d, 0x64, 0x5d, 0x19, 0x73, 0x60, 0x81, 0x4f, 0xdc, 0x22, 0x2a, 0x90, 0x88, 0x46, 0xee, 0xb8, 0x14, 0xde, 0x5e, 0x0b, 0xdb, 0xe0, 0x32, 0x3a, 0x0a, 0x49, 0x06, 0x24, 0x5c, 0xc2, 0xd3, 0xac, 0x62, 0x91, 0x95, 0xe4, 0x79, 0xe7, 0xc8, 0x37, 0x6d, 0x8d, 0xd5, 0x4e, 0xa9, 0x6c, 0x56, 0xf4, 0xea, 0x65, 0x7a, 0xae, 0x08, 0xba, 0x78, 0x25, 0x2e, 0x1c, 0xa6, 0xb4, 0xc6, 0xe8, 0xdd, 0x74, 0x1f, 0x4b, 0xbd, 0x8b, 0x8a, 0x70, 0x3e, 0xb5, 0x66, 0x48, 0x03, 0xf6, 0x0e, 0x61, 0x35, 0x57, 0xb9, 0x86, 0xc1, 0x1d, 0x9e, 0xe1, 0xf8, 0x98, 0x11, 0x69, 0xd9, 0x8e, 0x94, 0x9b, 0x1e, 0x87, 0xe9, 0xce, 0x55, 0x28, 0xdf, 0x8c, 0xa1, 0x89, 0x0d, 0xbf, 0xe6, 0x42, 0x68, 0x41, 0x99, 0x2d, 0x0f, 0xb0, 0x54, 0xbb, 0x16];\n  var Si =[0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81, 0xf3, 0xd7, 0xfb, 0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e, 0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb, 0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23, 0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e, 0x08, 0x2e, 0xa1, 0x66, 0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25, 0x72, 0xf8, 0xf6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xd4, 0xa4, 0x5c, 0xcc, 0x5d, 0x65, 0xb6, 0x92, 0x6c, 0x70, 0x48, 0x50, 0xfd, 0xed, 0xb9, 0xda, 0x5e, 0x15, 0x46, 0x57, 0xa7, 0x8d, 0x9d, 0x84, 0x90, 0xd8, 0xab, 0x00, 0x8c, 0xbc, 0xd3, 0x0a, 0xf7, 0xe4, 0x58, 0x05, 0xb8, 0xb3, 0x45, 0x06, 0xd0, 0x2c, 0x1e, 0x8f, 0xca, 0x3f, 0x0f, 0x02, 0xc1, 0xaf, 0xbd, 0x03, 0x01, 0x13, 0x8a, 0x6b, 0x3a, 0x91, 0x11, 0x41, 0x4f, 0x67, 0xdc, 0xea, 0x97, 0xf2, 0xcf, 0xce, 0xf0, 0xb4, 0xe6, 0x73, 0x96, 0xac, 0x74, 0x22, 0xe7, 0xad, 0x35, 0x85, 0xe2, 0xf9, 0x37, 0xe8, 0x1c, 0x75, 0xdf, 0x6e, 0x47, 0xf1, 0x1a, 0x71, 0x1d, 0x29, 0xc5, 0x89, 0x6f, 0xb7, 0x62, 0x0e, 0xaa, 0x18, 0xbe, 0x1b, 0xfc, 0x56, 0x3e, 0x4b, 0xc6, 0xd2, 0x79, 0x20, 0x9a, 0xdb, 0xc0, 0xfe, 0x78, 0xcd, 0x5a, 0xf4, 0x1f, 0xdd, 0xa8, 0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f, 0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93, 0xc9, 0x9c, 0xef, 0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb, 0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61, 0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6, 0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d];\n\n  // Transformations for encryption\n  var T1 = [0xc66363a5, 0xf87c7c84, 0xee777799, 0xf67b7b8d, 0xfff2f20d, 0xd66b6bbd, 0xde6f6fb1, 0x91c5c554, 0x60303050, 0x02010103, 0xce6767a9, 0x562b2b7d, 0xe7fefe19, 0xb5d7d762, 0x4dababe6, 0xec76769a, 0x8fcaca45, 0x1f82829d, 0x89c9c940, 0xfa7d7d87, 0xeffafa15, 0xb25959eb, 0x8e4747c9, 0xfbf0f00b, 0x41adadec, 0xb3d4d467, 0x5fa2a2fd, 0x45afafea, 0x239c9cbf, 0x53a4a4f7, 0xe4727296, 0x9bc0c05b, 0x75b7b7c2, 0xe1fdfd1c, 0x3d9393ae, 0x4c26266a, 0x6c36365a, 0x7e3f3f41, 0xf5f7f702, 0x83cccc4f, 0x6834345c, 0x51a5a5f4, 0xd1e5e534, 0xf9f1f108, 0xe2717193, 0xabd8d873, 0x62313153, 0x2a15153f, 0x0804040c, 0x95c7c752, 0x46232365, 0x9dc3c35e, 0x30181828, 0x379696a1, 0x0a05050f, 0x2f9a9ab5, 0x0e070709, 0x24121236, 0x1b80809b, 0xdfe2e23d, 0xcdebeb26, 0x4e272769, 0x7fb2b2cd, 0xea75759f, 0x1209091b, 0x1d83839e, 0x582c2c74, 0x341a1a2e, 0x361b1b2d, 0xdc6e6eb2, 0xb45a5aee, 0x5ba0a0fb, 0xa45252f6, 0x763b3b4d, 0xb7d6d661, 0x7db3b3ce, 0x5229297b, 0xdde3e33e, 0x5e2f2f71, 0x13848497, 0xa65353f5, 0xb9d1d168, 0x00000000, 0xc1eded2c, 0x40202060, 0xe3fcfc1f, 0x79b1b1c8, 0xb65b5bed, 0xd46a6abe, 0x8dcbcb46, 0x67bebed9, 0x7239394b, 0x944a4ade, 0x984c4cd4, 0xb05858e8, 0x85cfcf4a, 0xbbd0d06b, 0xc5efef2a, 0x4faaaae5, 0xedfbfb16, 0x864343c5, 0x9a4d4dd7, 0x66333355, 0x11858594, 0x8a4545cf, 0xe9f9f910, 0x04020206, 0xfe7f7f81, 0xa05050f0, 0x783c3c44, 0x259f9fba, 0x4ba8a8e3, 0xa25151f3, 0x5da3a3fe, 0x804040c0, 0x058f8f8a, 0x3f9292ad, 0x219d9dbc, 0x70383848, 0xf1f5f504, 0x63bcbcdf, 0x77b6b6c1, 0xafdada75, 0x42212163, 0x20101030, 0xe5ffff1a, 0xfdf3f30e, 0xbfd2d26d, 0x81cdcd4c, 0x180c0c14, 0x26131335, 0xc3ecec2f, 0xbe5f5fe1, 0x359797a2, 0x884444cc, 0x2e171739, 0x93c4c457, 0x55a7a7f2, 0xfc7e7e82, 0x7a3d3d47, 0xc86464ac, 0xba5d5de7, 0x3219192b, 0xe6737395, 0xc06060a0, 0x19818198, 0x9e4f4fd1, 0xa3dcdc7f, 0x44222266, 0x542a2a7e, 0x3b9090ab, 0x0b888883, 0x8c4646ca, 0xc7eeee29, 0x6bb8b8d3, 0x2814143c, 0xa7dede79, 0xbc5e5ee2, 0x160b0b1d, 0xaddbdb76, 0xdbe0e03b, 0x64323256, 0x743a3a4e, 0x140a0a1e, 0x924949db, 0x0c06060a, 0x4824246c, 0xb85c5ce4, 0x9fc2c25d, 0xbdd3d36e, 0x43acacef, 0xc46262a6, 0x399191a8, 0x319595a4, 0xd3e4e437, 0xf279798b, 0xd5e7e732, 0x8bc8c843, 0x6e373759, 0xda6d6db7, 0x018d8d8c, 0xb1d5d564, 0x9c4e4ed2, 0x49a9a9e0, 0xd86c6cb4, 0xac5656fa, 0xf3f4f407, 0xcfeaea25, 0xca6565af, 0xf47a7a8e, 0x47aeaee9, 0x10080818, 0x6fbabad5, 0xf0787888, 0x4a25256f, 0x5c2e2e72, 0x381c1c24, 0x57a6a6f1, 0x73b4b4c7, 0x97c6c651, 0xcbe8e823, 0xa1dddd7c, 0xe874749c, 0x3e1f1f21, 0x964b4bdd, 0x61bdbddc, 0x0d8b8b86, 0x0f8a8a85, 0xe0707090, 0x7c3e3e42, 0x71b5b5c4, 0xcc6666aa, 0x904848d8, 0x06030305, 0xf7f6f601, 0x1c0e0e12, 0xc26161a3, 0x6a35355f, 0xae5757f9, 0x69b9b9d0, 0x17868691, 0x99c1c158, 0x3a1d1d27, 0x279e9eb9, 0xd9e1e138, 0xebf8f813, 0x2b9898b3, 0x22111133, 0xd26969bb, 0xa9d9d970, 0x078e8e89, 0x339494a7, 0x2d9b9bb6, 0x3c1e1e22, 0x15878792, 0xc9e9e920, 0x87cece49, 0xaa5555ff, 0x50282878, 0xa5dfdf7a, 0x038c8c8f, 0x59a1a1f8, 0x09898980, 0x1a0d0d17, 0x65bfbfda, 0xd7e6e631, 0x844242c6, 0xd06868b8, 0x824141c3, 0x299999b0, 0x5a2d2d77, 0x1e0f0f11, 0x7bb0b0cb, 0xa85454fc, 0x6dbbbbd6, 0x2c16163a];\n  var T2 = [0xa5c66363, 0x84f87c7c, 0x99ee7777, 0x8df67b7b, 0x0dfff2f2, 0xbdd66b6b, 0xb1de6f6f, 0x5491c5c5, 0x50603030, 0x03020101, 0xa9ce6767, 0x7d562b2b, 0x19e7fefe, 0x62b5d7d7, 0xe64dabab, 0x9aec7676, 0x458fcaca, 0x9d1f8282, 0x4089c9c9, 0x87fa7d7d, 0x15effafa, 0xebb25959, 0xc98e4747, 0x0bfbf0f0, 0xec41adad, 0x67b3d4d4, 0xfd5fa2a2, 0xea45afaf, 0xbf239c9c, 0xf753a4a4, 0x96e47272, 0x5b9bc0c0, 0xc275b7b7, 0x1ce1fdfd, 0xae3d9393, 0x6a4c2626, 0x5a6c3636, 0x417e3f3f, 0x02f5f7f7, 0x4f83cccc, 0x5c683434, 0xf451a5a5, 0x34d1e5e5, 0x08f9f1f1, 0x93e27171, 0x73abd8d8, 0x53623131, 0x3f2a1515, 0x0c080404, 0x5295c7c7, 0x65462323, 0x5e9dc3c3, 0x28301818, 0xa1379696, 0x0f0a0505, 0xb52f9a9a, 0x090e0707, 0x36241212, 0x9b1b8080, 0x3ddfe2e2, 0x26cdebeb, 0x694e2727, 0xcd7fb2b2, 0x9fea7575, 0x1b120909, 0x9e1d8383, 0x74582c2c, 0x2e341a1a, 0x2d361b1b, 0xb2dc6e6e, 0xeeb45a5a, 0xfb5ba0a0, 0xf6a45252, 0x4d763b3b, 0x61b7d6d6, 0xce7db3b3, 0x7b522929, 0x3edde3e3, 0x715e2f2f, 0x97138484, 0xf5a65353, 0x68b9d1d1, 0x00000000, 0x2cc1eded, 0x60402020, 0x1fe3fcfc, 0xc879b1b1, 0xedb65b5b, 0xbed46a6a, 0x468dcbcb, 0xd967bebe, 0x4b723939, 0xde944a4a, 0xd4984c4c, 0xe8b05858, 0x4a85cfcf, 0x6bbbd0d0, 0x2ac5efef, 0xe54faaaa, 0x16edfbfb, 0xc5864343, 0xd79a4d4d, 0x55663333, 0x94118585, 0xcf8a4545, 0x10e9f9f9, 0x06040202, 0x81fe7f7f, 0xf0a05050, 0x44783c3c, 0xba259f9f, 0xe34ba8a8, 0xf3a25151, 0xfe5da3a3, 0xc0804040, 0x8a058f8f, 0xad3f9292, 0xbc219d9d, 0x48703838, 0x04f1f5f5, 0xdf63bcbc, 0xc177b6b6, 0x75afdada, 0x63422121, 0x30201010, 0x1ae5ffff, 0x0efdf3f3, 0x6dbfd2d2, 0x4c81cdcd, 0x14180c0c, 0x35261313, 0x2fc3ecec, 0xe1be5f5f, 0xa2359797, 0xcc884444, 0x392e1717, 0x5793c4c4, 0xf255a7a7, 0x82fc7e7e, 0x477a3d3d, 0xacc86464, 0xe7ba5d5d, 0x2b321919, 0x95e67373, 0xa0c06060, 0x98198181, 0xd19e4f4f, 0x7fa3dcdc, 0x66442222, 0x7e542a2a, 0xab3b9090, 0x830b8888, 0xca8c4646, 0x29c7eeee, 0xd36bb8b8, 0x3c281414, 0x79a7dede, 0xe2bc5e5e, 0x1d160b0b, 0x76addbdb, 0x3bdbe0e0, 0x56643232, 0x4e743a3a, 0x1e140a0a, 0xdb924949, 0x0a0c0606, 0x6c482424, 0xe4b85c5c, 0x5d9fc2c2, 0x6ebdd3d3, 0xef43acac, 0xa6c46262, 0xa8399191, 0xa4319595, 0x37d3e4e4, 0x8bf27979, 0x32d5e7e7, 0x438bc8c8, 0x596e3737, 0xb7da6d6d, 0x8c018d8d, 0x64b1d5d5, 0xd29c4e4e, 0xe049a9a9, 0xb4d86c6c, 0xfaac5656, 0x07f3f4f4, 0x25cfeaea, 0xafca6565, 0x8ef47a7a, 0xe947aeae, 0x18100808, 0xd56fbaba, 0x88f07878, 0x6f4a2525, 0x725c2e2e, 0x24381c1c, 0xf157a6a6, 0xc773b4b4, 0x5197c6c6, 0x23cbe8e8, 0x7ca1dddd, 0x9ce87474, 0x213e1f1f, 0xdd964b4b, 0xdc61bdbd, 0x860d8b8b, 0x850f8a8a, 0x90e07070, 0x427c3e3e, 0xc471b5b5, 0xaacc6666, 0xd8904848, 0x05060303, 0x01f7f6f6, 0x121c0e0e, 0xa3c26161, 0x5f6a3535, 0xf9ae5757, 0xd069b9b9, 0x91178686, 0x5899c1c1, 0x273a1d1d, 0xb9279e9e, 0x38d9e1e1, 0x13ebf8f8, 0xb32b9898, 0x33221111, 0xbbd26969, 0x70a9d9d9, 0x89078e8e, 0xa7339494, 0xb62d9b9b, 0x223c1e1e, 0x92158787, 0x20c9e9e9, 0x4987cece, 0xffaa5555, 0x78502828, 0x7aa5dfdf, 0x8f038c8c, 0xf859a1a1, 0x80098989, 0x171a0d0d, 0xda65bfbf, 0x31d7e6e6, 0xc6844242, 0xb8d06868, 0xc3824141, 0xb0299999, 0x775a2d2d, 0x111e0f0f, 0xcb7bb0b0, 0xfca85454, 0xd66dbbbb, 0x3a2c1616];\n  var T3 = [0x63a5c663, 0x7c84f87c, 0x7799ee77, 0x7b8df67b, 0xf20dfff2, 0x6bbdd66b, 0x6fb1de6f, 0xc55491c5, 0x30506030, 0x01030201, 0x67a9ce67, 0x2b7d562b, 0xfe19e7fe, 0xd762b5d7, 0xabe64dab, 0x769aec76, 0xca458fca, 0x829d1f82, 0xc94089c9, 0x7d87fa7d, 0xfa15effa, 0x59ebb259, 0x47c98e47, 0xf00bfbf0, 0xadec41ad, 0xd467b3d4, 0xa2fd5fa2, 0xafea45af, 0x9cbf239c, 0xa4f753a4, 0x7296e472, 0xc05b9bc0, 0xb7c275b7, 0xfd1ce1fd, 0x93ae3d93, 0x266a4c26, 0x365a6c36, 0x3f417e3f, 0xf702f5f7, 0xcc4f83cc, 0x345c6834, 0xa5f451a5, 0xe534d1e5, 0xf108f9f1, 0x7193e271, 0xd873abd8, 0x31536231, 0x153f2a15, 0x040c0804, 0xc75295c7, 0x23654623, 0xc35e9dc3, 0x18283018, 0x96a13796, 0x050f0a05, 0x9ab52f9a, 0x07090e07, 0x12362412, 0x809b1b80, 0xe23ddfe2, 0xeb26cdeb, 0x27694e27, 0xb2cd7fb2, 0x759fea75, 0x091b1209, 0x839e1d83, 0x2c74582c, 0x1a2e341a, 0x1b2d361b, 0x6eb2dc6e, 0x5aeeb45a, 0xa0fb5ba0, 0x52f6a452, 0x3b4d763b, 0xd661b7d6, 0xb3ce7db3, 0x297b5229, 0xe33edde3, 0x2f715e2f, 0x84971384, 0x53f5a653, 0xd168b9d1, 0x00000000, 0xed2cc1ed, 0x20604020, 0xfc1fe3fc, 0xb1c879b1, 0x5bedb65b, 0x6abed46a, 0xcb468dcb, 0xbed967be, 0x394b7239, 0x4ade944a, 0x4cd4984c, 0x58e8b058, 0xcf4a85cf, 0xd06bbbd0, 0xef2ac5ef, 0xaae54faa, 0xfb16edfb, 0x43c58643, 0x4dd79a4d, 0x33556633, 0x85941185, 0x45cf8a45, 0xf910e9f9, 0x02060402, 0x7f81fe7f, 0x50f0a050, 0x3c44783c, 0x9fba259f, 0xa8e34ba8, 0x51f3a251, 0xa3fe5da3, 0x40c08040, 0x8f8a058f, 0x92ad3f92, 0x9dbc219d, 0x38487038, 0xf504f1f5, 0xbcdf63bc, 0xb6c177b6, 0xda75afda, 0x21634221, 0x10302010, 0xff1ae5ff, 0xf30efdf3, 0xd26dbfd2, 0xcd4c81cd, 0x0c14180c, 0x13352613, 0xec2fc3ec, 0x5fe1be5f, 0x97a23597, 0x44cc8844, 0x17392e17, 0xc45793c4, 0xa7f255a7, 0x7e82fc7e, 0x3d477a3d, 0x64acc864, 0x5de7ba5d, 0x192b3219, 0x7395e673, 0x60a0c060, 0x81981981, 0x4fd19e4f, 0xdc7fa3dc, 0x22664422, 0x2a7e542a, 0x90ab3b90, 0x88830b88, 0x46ca8c46, 0xee29c7ee, 0xb8d36bb8, 0x143c2814, 0xde79a7de, 0x5ee2bc5e, 0x0b1d160b, 0xdb76addb, 0xe03bdbe0, 0x32566432, 0x3a4e743a, 0x0a1e140a, 0x49db9249, 0x060a0c06, 0x246c4824, 0x5ce4b85c, 0xc25d9fc2, 0xd36ebdd3, 0xacef43ac, 0x62a6c462, 0x91a83991, 0x95a43195, 0xe437d3e4, 0x798bf279, 0xe732d5e7, 0xc8438bc8, 0x37596e37, 0x6db7da6d, 0x8d8c018d, 0xd564b1d5, 0x4ed29c4e, 0xa9e049a9, 0x6cb4d86c, 0x56faac56, 0xf407f3f4, 0xea25cfea, 0x65afca65, 0x7a8ef47a, 0xaee947ae, 0x08181008, 0xbad56fba, 0x7888f078, 0x256f4a25, 0x2e725c2e, 0x1c24381c, 0xa6f157a6, 0xb4c773b4, 0xc65197c6, 0xe823cbe8, 0xdd7ca1dd, 0x749ce874, 0x1f213e1f, 0x4bdd964b, 0xbddc61bd, 0x8b860d8b, 0x8a850f8a, 0x7090e070, 0x3e427c3e, 0xb5c471b5, 0x66aacc66, 0x48d89048, 0x03050603, 0xf601f7f6, 0x0e121c0e, 0x61a3c261, 0x355f6a35, 0x57f9ae57, 0xb9d069b9, 0x86911786, 0xc15899c1, 0x1d273a1d, 0x9eb9279e, 0xe138d9e1, 0xf813ebf8, 0x98b32b98, 0x11332211, 0x69bbd269, 0xd970a9d9, 0x8e89078e, 0x94a73394, 0x9bb62d9b, 0x1e223c1e, 0x87921587, 0xe920c9e9, 0xce4987ce, 0x55ffaa55, 0x28785028, 0xdf7aa5df, 0x8c8f038c, 0xa1f859a1, 0x89800989, 0x0d171a0d, 0xbfda65bf, 0xe631d7e6, 0x42c68442, 0x68b8d068, 0x41c38241, 0x99b02999, 0x2d775a2d, 0x0f111e0f, 0xb0cb7bb0, 0x54fca854, 0xbbd66dbb, 0x163a2c16];\n  var T4 = [0x6363a5c6, 0x7c7c84f8, 0x777799ee, 0x7b7b8df6, 0xf2f20dff, 0x6b6bbdd6, 0x6f6fb1de, 0xc5c55491, 0x30305060, 0x01010302, 0x6767a9ce, 0x2b2b7d56, 0xfefe19e7, 0xd7d762b5, 0xababe64d, 0x76769aec, 0xcaca458f, 0x82829d1f, 0xc9c94089, 0x7d7d87fa, 0xfafa15ef, 0x5959ebb2, 0x4747c98e, 0xf0f00bfb, 0xadadec41, 0xd4d467b3, 0xa2a2fd5f, 0xafafea45, 0x9c9cbf23, 0xa4a4f753, 0x727296e4, 0xc0c05b9b, 0xb7b7c275, 0xfdfd1ce1, 0x9393ae3d, 0x26266a4c, 0x36365a6c, 0x3f3f417e, 0xf7f702f5, 0xcccc4f83, 0x34345c68, 0xa5a5f451, 0xe5e534d1, 0xf1f108f9, 0x717193e2, 0xd8d873ab, 0x31315362, 0x15153f2a, 0x04040c08, 0xc7c75295, 0x23236546, 0xc3c35e9d, 0x18182830, 0x9696a137, 0x05050f0a, 0x9a9ab52f, 0x0707090e, 0x12123624, 0x80809b1b, 0xe2e23ddf, 0xebeb26cd, 0x2727694e, 0xb2b2cd7f, 0x75759fea, 0x09091b12, 0x83839e1d, 0x2c2c7458, 0x1a1a2e34, 0x1b1b2d36, 0x6e6eb2dc, 0x5a5aeeb4, 0xa0a0fb5b, 0x5252f6a4, 0x3b3b4d76, 0xd6d661b7, 0xb3b3ce7d, 0x29297b52, 0xe3e33edd, 0x2f2f715e, 0x84849713, 0x5353f5a6, 0xd1d168b9, 0x00000000, 0xeded2cc1, 0x20206040, 0xfcfc1fe3, 0xb1b1c879, 0x5b5bedb6, 0x6a6abed4, 0xcbcb468d, 0xbebed967, 0x39394b72, 0x4a4ade94, 0x4c4cd498, 0x5858e8b0, 0xcfcf4a85, 0xd0d06bbb, 0xefef2ac5, 0xaaaae54f, 0xfbfb16ed, 0x4343c586, 0x4d4dd79a, 0x33335566, 0x85859411, 0x4545cf8a, 0xf9f910e9, 0x02020604, 0x7f7f81fe, 0x5050f0a0, 0x3c3c4478, 0x9f9fba25, 0xa8a8e34b, 0x5151f3a2, 0xa3a3fe5d, 0x4040c080, 0x8f8f8a05, 0x9292ad3f, 0x9d9dbc21, 0x38384870, 0xf5f504f1, 0xbcbcdf63, 0xb6b6c177, 0xdada75af, 0x21216342, 0x10103020, 0xffff1ae5, 0xf3f30efd, 0xd2d26dbf, 0xcdcd4c81, 0x0c0c1418, 0x13133526, 0xecec2fc3, 0x5f5fe1be, 0x9797a235, 0x4444cc88, 0x1717392e, 0xc4c45793, 0xa7a7f255, 0x7e7e82fc, 0x3d3d477a, 0x6464acc8, 0x5d5de7ba, 0x19192b32, 0x737395e6, 0x6060a0c0, 0x81819819, 0x4f4fd19e, 0xdcdc7fa3, 0x22226644, 0x2a2a7e54, 0x9090ab3b, 0x8888830b, 0x4646ca8c, 0xeeee29c7, 0xb8b8d36b, 0x14143c28, 0xdede79a7, 0x5e5ee2bc, 0x0b0b1d16, 0xdbdb76ad, 0xe0e03bdb, 0x32325664, 0x3a3a4e74, 0x0a0a1e14, 0x4949db92, 0x06060a0c, 0x24246c48, 0x5c5ce4b8, 0xc2c25d9f, 0xd3d36ebd, 0xacacef43, 0x6262a6c4, 0x9191a839, 0x9595a431, 0xe4e437d3, 0x79798bf2, 0xe7e732d5, 0xc8c8438b, 0x3737596e, 0x6d6db7da, 0x8d8d8c01, 0xd5d564b1, 0x4e4ed29c, 0xa9a9e049, 0x6c6cb4d8, 0x5656faac, 0xf4f407f3, 0xeaea25cf, 0x6565afca, 0x7a7a8ef4, 0xaeaee947, 0x08081810, 0xbabad56f, 0x787888f0, 0x25256f4a, 0x2e2e725c, 0x1c1c2438, 0xa6a6f157, 0xb4b4c773, 0xc6c65197, 0xe8e823cb, 0xdddd7ca1, 0x74749ce8, 0x1f1f213e, 0x4b4bdd96, 0xbdbddc61, 0x8b8b860d, 0x8a8a850f, 0x707090e0, 0x3e3e427c, 0xb5b5c471, 0x6666aacc, 0x4848d890, 0x03030506, 0xf6f601f7, 0x0e0e121c, 0x6161a3c2, 0x35355f6a, 0x5757f9ae, 0xb9b9d069, 0x86869117, 0xc1c15899, 0x1d1d273a, 0x9e9eb927, 0xe1e138d9, 0xf8f813eb, 0x9898b32b, 0x11113322, 0x6969bbd2, 0xd9d970a9, 0x8e8e8907, 0x9494a733, 0x9b9bb62d, 0x1e1e223c, 0x87879215, 0xe9e920c9, 0xcece4987, 0x5555ffaa, 0x28287850, 0xdfdf7aa5, 0x8c8c8f03, 0xa1a1f859, 0x89898009, 0x0d0d171a, 0xbfbfda65, 0xe6e631d7, 0x4242c684, 0x6868b8d0, 0x4141c382, 0x9999b029, 0x2d2d775a, 0x0f0f111e, 0xb0b0cb7b, 0x5454fca8, 0xbbbbd66d, 0x16163a2c];\n\n  // Transformations for decryption\n  var T5 = [0x51f4a750, 0x7e416553, 0x1a17a4c3, 0x3a275e96, 0x3bab6bcb, 0x1f9d45f1, 0xacfa58ab, 0x4be30393, 0x2030fa55, 0xad766df6, 0x88cc7691, 0xf5024c25, 0x4fe5d7fc, 0xc52acbd7, 0x26354480, 0xb562a38f, 0xdeb15a49, 0x25ba1b67, 0x45ea0e98, 0x5dfec0e1, 0xc32f7502, 0x814cf012, 0x8d4697a3, 0x6bd3f9c6, 0x038f5fe7, 0x15929c95, 0xbf6d7aeb, 0x955259da, 0xd4be832d, 0x587421d3, 0x49e06929, 0x8ec9c844, 0x75c2896a, 0xf48e7978, 0x99583e6b, 0x27b971dd, 0xbee14fb6, 0xf088ad17, 0xc920ac66, 0x7dce3ab4, 0x63df4a18, 0xe51a3182, 0x97513360, 0x62537f45, 0xb16477e0, 0xbb6bae84, 0xfe81a01c, 0xf9082b94, 0x70486858, 0x8f45fd19, 0x94de6c87, 0x527bf8b7, 0xab73d323, 0x724b02e2, 0xe31f8f57, 0x6655ab2a, 0xb2eb2807, 0x2fb5c203, 0x86c57b9a, 0xd33708a5, 0x302887f2, 0x23bfa5b2, 0x02036aba, 0xed16825c, 0x8acf1c2b, 0xa779b492, 0xf307f2f0, 0x4e69e2a1, 0x65daf4cd, 0x0605bed5, 0xd134621f, 0xc4a6fe8a, 0x342e539d, 0xa2f355a0, 0x058ae132, 0xa4f6eb75, 0x0b83ec39, 0x4060efaa, 0x5e719f06, 0xbd6e1051, 0x3e218af9, 0x96dd063d, 0xdd3e05ae, 0x4de6bd46, 0x91548db5, 0x71c45d05, 0x0406d46f, 0x605015ff, 0x1998fb24, 0xd6bde997, 0x894043cc, 0x67d99e77, 0xb0e842bd, 0x07898b88, 0xe7195b38, 0x79c8eedb, 0xa17c0a47, 0x7c420fe9, 0xf8841ec9, 0x00000000, 0x09808683, 0x322bed48, 0x1e1170ac, 0x6c5a724e, 0xfd0efffb, 0x0f853856, 0x3daed51e, 0x362d3927, 0x0a0fd964, 0x685ca621, 0x9b5b54d1, 0x24362e3a, 0x0c0a67b1, 0x9357e70f, 0xb4ee96d2, 0x1b9b919e, 0x80c0c54f, 0x61dc20a2, 0x5a774b69, 0x1c121a16, 0xe293ba0a, 0xc0a02ae5, 0x3c22e043, 0x121b171d, 0x0e090d0b, 0xf28bc7ad, 0x2db6a8b9, 0x141ea9c8, 0x57f11985, 0xaf75074c, 0xee99ddbb, 0xa37f60fd, 0xf701269f, 0x5c72f5bc, 0x44663bc5, 0x5bfb7e34, 0x8b432976, 0xcb23c6dc, 0xb6edfc68, 0xb8e4f163, 0xd731dcca, 0x42638510, 0x13972240, 0x84c61120, 0x854a247d, 0xd2bb3df8, 0xaef93211, 0xc729a16d, 0x1d9e2f4b, 0xdcb230f3, 0x0d8652ec, 0x77c1e3d0, 0x2bb3166c, 0xa970b999, 0x119448fa, 0x47e96422, 0xa8fc8cc4, 0xa0f03f1a, 0x567d2cd8, 0x223390ef, 0x87494ec7, 0xd938d1c1, 0x8ccaa2fe, 0x98d40b36, 0xa6f581cf, 0xa57ade28, 0xdab78e26, 0x3fadbfa4, 0x2c3a9de4, 0x5078920d, 0x6a5fcc9b, 0x547e4662, 0xf68d13c2, 0x90d8b8e8, 0x2e39f75e, 0x82c3aff5, 0x9f5d80be, 0x69d0937c, 0x6fd52da9, 0xcf2512b3, 0xc8ac993b, 0x10187da7, 0xe89c636e, 0xdb3bbb7b, 0xcd267809, 0x6e5918f4, 0xec9ab701, 0x834f9aa8, 0xe6956e65, 0xaaffe67e, 0x21bccf08, 0xef15e8e6, 0xbae79bd9, 0x4a6f36ce, 0xea9f09d4, 0x29b07cd6, 0x31a4b2af, 0x2a3f2331, 0xc6a59430, 0x35a266c0, 0x744ebc37, 0xfc82caa6, 0xe090d0b0, 0x33a7d815, 0xf104984a, 0x41ecdaf7, 0x7fcd500e, 0x1791f62f, 0x764dd68d, 0x43efb04d, 0xccaa4d54, 0xe49604df, 0x9ed1b5e3, 0x4c6a881b, 0xc12c1fb8, 0x4665517f, 0x9d5eea04, 0x018c355d, 0xfa877473, 0xfb0b412e, 0xb3671d5a, 0x92dbd252, 0xe9105633, 0x6dd64713, 0x9ad7618c, 0x37a10c7a, 0x59f8148e, 0xeb133c89, 0xcea927ee, 0xb761c935, 0xe11ce5ed, 0x7a47b13c, 0x9cd2df59, 0x55f2733f, 0x1814ce79, 0x73c737bf, 0x53f7cdea, 0x5ffdaa5b, 0xdf3d6f14, 0x7844db86, 0xcaaff381, 0xb968c43e, 0x3824342c, 0xc2a3405f, 0x161dc372, 0xbce2250c, 0x283c498b, 0xff0d9541, 0x39a80171, 0x080cb3de, 0xd8b4e49c, 0x6456c190, 0x7bcb8461, 0xd532b670, 0x486c5c74, 0xd0b85742];\n  var T6 = [0x5051f4a7, 0x537e4165, 0xc31a17a4, 0x963a275e, 0xcb3bab6b, 0xf11f9d45, 0xabacfa58, 0x934be303, 0x552030fa, 0xf6ad766d, 0x9188cc76, 0x25f5024c, 0xfc4fe5d7, 0xd7c52acb, 0x80263544, 0x8fb562a3, 0x49deb15a, 0x6725ba1b, 0x9845ea0e, 0xe15dfec0, 0x02c32f75, 0x12814cf0, 0xa38d4697, 0xc66bd3f9, 0xe7038f5f, 0x9515929c, 0xebbf6d7a, 0xda955259, 0x2dd4be83, 0xd3587421, 0x2949e069, 0x448ec9c8, 0x6a75c289, 0x78f48e79, 0x6b99583e, 0xdd27b971, 0xb6bee14f, 0x17f088ad, 0x66c920ac, 0xb47dce3a, 0x1863df4a, 0x82e51a31, 0x60975133, 0x4562537f, 0xe0b16477, 0x84bb6bae, 0x1cfe81a0, 0x94f9082b, 0x58704868, 0x198f45fd, 0x8794de6c, 0xb7527bf8, 0x23ab73d3, 0xe2724b02, 0x57e31f8f, 0x2a6655ab, 0x07b2eb28, 0x032fb5c2, 0x9a86c57b, 0xa5d33708, 0xf2302887, 0xb223bfa5, 0xba02036a, 0x5ced1682, 0x2b8acf1c, 0x92a779b4, 0xf0f307f2, 0xa14e69e2, 0xcd65daf4, 0xd50605be, 0x1fd13462, 0x8ac4a6fe, 0x9d342e53, 0xa0a2f355, 0x32058ae1, 0x75a4f6eb, 0x390b83ec, 0xaa4060ef, 0x065e719f, 0x51bd6e10, 0xf93e218a, 0x3d96dd06, 0xaedd3e05, 0x464de6bd, 0xb591548d, 0x0571c45d, 0x6f0406d4, 0xff605015, 0x241998fb, 0x97d6bde9, 0xcc894043, 0x7767d99e, 0xbdb0e842, 0x8807898b, 0x38e7195b, 0xdb79c8ee, 0x47a17c0a, 0xe97c420f, 0xc9f8841e, 0x00000000, 0x83098086, 0x48322bed, 0xac1e1170, 0x4e6c5a72, 0xfbfd0eff, 0x560f8538, 0x1e3daed5, 0x27362d39, 0x640a0fd9, 0x21685ca6, 0xd19b5b54, 0x3a24362e, 0xb10c0a67, 0x0f9357e7, 0xd2b4ee96, 0x9e1b9b91, 0x4f80c0c5, 0xa261dc20, 0x695a774b, 0x161c121a, 0x0ae293ba, 0xe5c0a02a, 0x433c22e0, 0x1d121b17, 0x0b0e090d, 0xadf28bc7, 0xb92db6a8, 0xc8141ea9, 0x8557f119, 0x4caf7507, 0xbbee99dd, 0xfda37f60, 0x9ff70126, 0xbc5c72f5, 0xc544663b, 0x345bfb7e, 0x768b4329, 0xdccb23c6, 0x68b6edfc, 0x63b8e4f1, 0xcad731dc, 0x10426385, 0x40139722, 0x2084c611, 0x7d854a24, 0xf8d2bb3d, 0x11aef932, 0x6dc729a1, 0x4b1d9e2f, 0xf3dcb230, 0xec0d8652, 0xd077c1e3, 0x6c2bb316, 0x99a970b9, 0xfa119448, 0x2247e964, 0xc4a8fc8c, 0x1aa0f03f, 0xd8567d2c, 0xef223390, 0xc787494e, 0xc1d938d1, 0xfe8ccaa2, 0x3698d40b, 0xcfa6f581, 0x28a57ade, 0x26dab78e, 0xa43fadbf, 0xe42c3a9d, 0x0d507892, 0x9b6a5fcc, 0x62547e46, 0xc2f68d13, 0xe890d8b8, 0x5e2e39f7, 0xf582c3af, 0xbe9f5d80, 0x7c69d093, 0xa96fd52d, 0xb3cf2512, 0x3bc8ac99, 0xa710187d, 0x6ee89c63, 0x7bdb3bbb, 0x09cd2678, 0xf46e5918, 0x01ec9ab7, 0xa8834f9a, 0x65e6956e, 0x7eaaffe6, 0x0821bccf, 0xe6ef15e8, 0xd9bae79b, 0xce4a6f36, 0xd4ea9f09, 0xd629b07c, 0xaf31a4b2, 0x312a3f23, 0x30c6a594, 0xc035a266, 0x37744ebc, 0xa6fc82ca, 0xb0e090d0, 0x1533a7d8, 0x4af10498, 0xf741ecda, 0x0e7fcd50, 0x2f1791f6, 0x8d764dd6, 0x4d43efb0, 0x54ccaa4d, 0xdfe49604, 0xe39ed1b5, 0x1b4c6a88, 0xb8c12c1f, 0x7f466551, 0x049d5eea, 0x5d018c35, 0x73fa8774, 0x2efb0b41, 0x5ab3671d, 0x5292dbd2, 0x33e91056, 0x136dd647, 0x8c9ad761, 0x7a37a10c, 0x8e59f814, 0x89eb133c, 0xeecea927, 0x35b761c9, 0xede11ce5, 0x3c7a47b1, 0x599cd2df, 0x3f55f273, 0x791814ce, 0xbf73c737, 0xea53f7cd, 0x5b5ffdaa, 0x14df3d6f, 0x867844db, 0x81caaff3, 0x3eb968c4, 0x2c382434, 0x5fc2a340, 0x72161dc3, 0x0cbce225, 0x8b283c49, 0x41ff0d95, 0x7139a801, 0xde080cb3, 0x9cd8b4e4, 0x906456c1, 0x617bcb84, 0x70d532b6, 0x74486c5c, 0x42d0b857];\n  var T7 = [0xa75051f4, 0x65537e41, 0xa4c31a17, 0x5e963a27, 0x6bcb3bab, 0x45f11f9d, 0x58abacfa, 0x03934be3, 0xfa552030, 0x6df6ad76, 0x769188cc, 0x4c25f502, 0xd7fc4fe5, 0xcbd7c52a, 0x44802635, 0xa38fb562, 0x5a49deb1, 0x1b6725ba, 0x0e9845ea, 0xc0e15dfe, 0x7502c32f, 0xf012814c, 0x97a38d46, 0xf9c66bd3, 0x5fe7038f, 0x9c951592, 0x7aebbf6d, 0x59da9552, 0x832dd4be, 0x21d35874, 0x692949e0, 0xc8448ec9, 0x896a75c2, 0x7978f48e, 0x3e6b9958, 0x71dd27b9, 0x4fb6bee1, 0xad17f088, 0xac66c920, 0x3ab47dce, 0x4a1863df, 0x3182e51a, 0x33609751, 0x7f456253, 0x77e0b164, 0xae84bb6b, 0xa01cfe81, 0x2b94f908, 0x68587048, 0xfd198f45, 0x6c8794de, 0xf8b7527b, 0xd323ab73, 0x02e2724b, 0x8f57e31f, 0xab2a6655, 0x2807b2eb, 0xc2032fb5, 0x7b9a86c5, 0x08a5d337, 0x87f23028, 0xa5b223bf, 0x6aba0203, 0x825ced16, 0x1c2b8acf, 0xb492a779, 0xf2f0f307, 0xe2a14e69, 0xf4cd65da, 0xbed50605, 0x621fd134, 0xfe8ac4a6, 0x539d342e, 0x55a0a2f3, 0xe132058a, 0xeb75a4f6, 0xec390b83, 0xefaa4060, 0x9f065e71, 0x1051bd6e, 0x8af93e21, 0x063d96dd, 0x05aedd3e, 0xbd464de6, 0x8db59154, 0x5d0571c4, 0xd46f0406, 0x15ff6050, 0xfb241998, 0xe997d6bd, 0x43cc8940, 0x9e7767d9, 0x42bdb0e8, 0x8b880789, 0x5b38e719, 0xeedb79c8, 0x0a47a17c, 0x0fe97c42, 0x1ec9f884, 0x00000000, 0x86830980, 0xed48322b, 0x70ac1e11, 0x724e6c5a, 0xfffbfd0e, 0x38560f85, 0xd51e3dae, 0x3927362d, 0xd9640a0f, 0xa621685c, 0x54d19b5b, 0x2e3a2436, 0x67b10c0a, 0xe70f9357, 0x96d2b4ee, 0x919e1b9b, 0xc54f80c0, 0x20a261dc, 0x4b695a77, 0x1a161c12, 0xba0ae293, 0x2ae5c0a0, 0xe0433c22, 0x171d121b, 0x0d0b0e09, 0xc7adf28b, 0xa8b92db6, 0xa9c8141e, 0x198557f1, 0x074caf75, 0xddbbee99, 0x60fda37f, 0x269ff701, 0xf5bc5c72, 0x3bc54466, 0x7e345bfb, 0x29768b43, 0xc6dccb23, 0xfc68b6ed, 0xf163b8e4, 0xdccad731, 0x85104263, 0x22401397, 0x112084c6, 0x247d854a, 0x3df8d2bb, 0x3211aef9, 0xa16dc729, 0x2f4b1d9e, 0x30f3dcb2, 0x52ec0d86, 0xe3d077c1, 0x166c2bb3, 0xb999a970, 0x48fa1194, 0x642247e9, 0x8cc4a8fc, 0x3f1aa0f0, 0x2cd8567d, 0x90ef2233, 0x4ec78749, 0xd1c1d938, 0xa2fe8cca, 0x0b3698d4, 0x81cfa6f5, 0xde28a57a, 0x8e26dab7, 0xbfa43fad, 0x9de42c3a, 0x920d5078, 0xcc9b6a5f, 0x4662547e, 0x13c2f68d, 0xb8e890d8, 0xf75e2e39, 0xaff582c3, 0x80be9f5d, 0x937c69d0, 0x2da96fd5, 0x12b3cf25, 0x993bc8ac, 0x7da71018, 0x636ee89c, 0xbb7bdb3b, 0x7809cd26, 0x18f46e59, 0xb701ec9a, 0x9aa8834f, 0x6e65e695, 0xe67eaaff, 0xcf0821bc, 0xe8e6ef15, 0x9bd9bae7, 0x36ce4a6f, 0x09d4ea9f, 0x7cd629b0, 0xb2af31a4, 0x23312a3f, 0x9430c6a5, 0x66c035a2, 0xbc37744e, 0xcaa6fc82, 0xd0b0e090, 0xd81533a7, 0x984af104, 0xdaf741ec, 0x500e7fcd, 0xf62f1791, 0xd68d764d, 0xb04d43ef, 0x4d54ccaa, 0x04dfe496, 0xb5e39ed1, 0x881b4c6a, 0x1fb8c12c, 0x517f4665, 0xea049d5e, 0x355d018c, 0x7473fa87, 0x412efb0b, 0x1d5ab367, 0xd25292db, 0x5633e910, 0x47136dd6, 0x618c9ad7, 0x0c7a37a1, 0x148e59f8, 0x3c89eb13, 0x27eecea9, 0xc935b761, 0xe5ede11c, 0xb13c7a47, 0xdf599cd2, 0x733f55f2, 0xce791814, 0x37bf73c7, 0xcdea53f7, 0xaa5b5ffd, 0x6f14df3d, 0xdb867844, 0xf381caaf, 0xc43eb968, 0x342c3824, 0x405fc2a3, 0xc372161d, 0x250cbce2, 0x498b283c, 0x9541ff0d, 0x017139a8, 0xb3de080c, 0xe49cd8b4, 0xc1906456, 0x84617bcb, 0xb670d532, 0x5c74486c, 0x5742d0b8];\n  var T8 = [0xf4a75051, 0x4165537e, 0x17a4c31a, 0x275e963a, 0xab6bcb3b, 0x9d45f11f, 0xfa58abac, 0xe303934b, 0x30fa5520, 0x766df6ad, 0xcc769188, 0x024c25f5, 0xe5d7fc4f, 0x2acbd7c5, 0x35448026, 0x62a38fb5, 0xb15a49de, 0xba1b6725, 0xea0e9845, 0xfec0e15d, 0x2f7502c3, 0x4cf01281, 0x4697a38d, 0xd3f9c66b, 0x8f5fe703, 0x929c9515, 0x6d7aebbf, 0x5259da95, 0xbe832dd4, 0x7421d358, 0xe0692949, 0xc9c8448e, 0xc2896a75, 0x8e7978f4, 0x583e6b99, 0xb971dd27, 0xe14fb6be, 0x88ad17f0, 0x20ac66c9, 0xce3ab47d, 0xdf4a1863, 0x1a3182e5, 0x51336097, 0x537f4562, 0x6477e0b1, 0x6bae84bb, 0x81a01cfe, 0x082b94f9, 0x48685870, 0x45fd198f, 0xde6c8794, 0x7bf8b752, 0x73d323ab, 0x4b02e272, 0x1f8f57e3, 0x55ab2a66, 0xeb2807b2, 0xb5c2032f, 0xc57b9a86, 0x3708a5d3, 0x2887f230, 0xbfa5b223, 0x036aba02, 0x16825ced, 0xcf1c2b8a, 0x79b492a7, 0x07f2f0f3, 0x69e2a14e, 0xdaf4cd65, 0x05bed506, 0x34621fd1, 0xa6fe8ac4, 0x2e539d34, 0xf355a0a2, 0x8ae13205, 0xf6eb75a4, 0x83ec390b, 0x60efaa40, 0x719f065e, 0x6e1051bd, 0x218af93e, 0xdd063d96, 0x3e05aedd, 0xe6bd464d, 0x548db591, 0xc45d0571, 0x06d46f04, 0x5015ff60, 0x98fb2419, 0xbde997d6, 0x4043cc89, 0xd99e7767, 0xe842bdb0, 0x898b8807, 0x195b38e7, 0xc8eedb79, 0x7c0a47a1, 0x420fe97c, 0x841ec9f8, 0x00000000, 0x80868309, 0x2bed4832, 0x1170ac1e, 0x5a724e6c, 0x0efffbfd, 0x8538560f, 0xaed51e3d, 0x2d392736, 0x0fd9640a, 0x5ca62168, 0x5b54d19b, 0x362e3a24, 0x0a67b10c, 0x57e70f93, 0xee96d2b4, 0x9b919e1b, 0xc0c54f80, 0xdc20a261, 0x774b695a, 0x121a161c, 0x93ba0ae2, 0xa02ae5c0, 0x22e0433c, 0x1b171d12, 0x090d0b0e, 0x8bc7adf2, 0xb6a8b92d, 0x1ea9c814, 0xf1198557, 0x75074caf, 0x99ddbbee, 0x7f60fda3, 0x01269ff7, 0x72f5bc5c, 0x663bc544, 0xfb7e345b, 0x4329768b, 0x23c6dccb, 0xedfc68b6, 0xe4f163b8, 0x31dccad7, 0x63851042, 0x97224013, 0xc6112084, 0x4a247d85, 0xbb3df8d2, 0xf93211ae, 0x29a16dc7, 0x9e2f4b1d, 0xb230f3dc, 0x8652ec0d, 0xc1e3d077, 0xb3166c2b, 0x70b999a9, 0x9448fa11, 0xe9642247, 0xfc8cc4a8, 0xf03f1aa0, 0x7d2cd856, 0x3390ef22, 0x494ec787, 0x38d1c1d9, 0xcaa2fe8c, 0xd40b3698, 0xf581cfa6, 0x7ade28a5, 0xb78e26da, 0xadbfa43f, 0x3a9de42c, 0x78920d50, 0x5fcc9b6a, 0x7e466254, 0x8d13c2f6, 0xd8b8e890, 0x39f75e2e, 0xc3aff582, 0x5d80be9f, 0xd0937c69, 0xd52da96f, 0x2512b3cf, 0xac993bc8, 0x187da710, 0x9c636ee8, 0x3bbb7bdb, 0x267809cd, 0x5918f46e, 0x9ab701ec, 0x4f9aa883, 0x956e65e6, 0xffe67eaa, 0xbccf0821, 0x15e8e6ef, 0xe79bd9ba, 0x6f36ce4a, 0x9f09d4ea, 0xb07cd629, 0xa4b2af31, 0x3f23312a, 0xa59430c6, 0xa266c035, 0x4ebc3774, 0x82caa6fc, 0x90d0b0e0, 0xa7d81533, 0x04984af1, 0xecdaf741, 0xcd500e7f, 0x91f62f17, 0x4dd68d76, 0xefb04d43, 0xaa4d54cc, 0x9604dfe4, 0xd1b5e39e, 0x6a881b4c, 0x2c1fb8c1, 0x65517f46, 0x5eea049d, 0x8c355d01, 0x877473fa, 0x0b412efb, 0x671d5ab3, 0xdbd25292, 0x105633e9, 0xd647136d, 0xd7618c9a, 0xa10c7a37, 0xf8148e59, 0x133c89eb, 0xa927eece, 0x61c935b7, 0x1ce5ede1, 0x47b13c7a, 0xd2df599c, 0xf2733f55, 0x14ce7918, 0xc737bf73, 0xf7cdea53, 0xfdaa5b5f, 0x3d6f14df, 0x44db8678, 0xaff381ca, 0x68c43eb9, 0x24342c38, 0xa3405fc2, 0x1dc37216, 0xe2250cbc, 0x3c498b28, 0x0d9541ff, 0xa8017139, 0x0cb3de08, 0xb4e49cd8, 0x56c19064, 0xcb84617b, 0x32b670d5, 0x6c5c7448, 0xb85742d0];\n\n  // Transformations for decryption key expansion\n  var U1 = [0x00000000, 0x0e090d0b, 0x1c121a16, 0x121b171d, 0x3824342c, 0x362d3927, 0x24362e3a, 0x2a3f2331, 0x70486858, 0x7e416553, 0x6c5a724e, 0x62537f45, 0x486c5c74, 0x4665517f, 0x547e4662, 0x5a774b69, 0xe090d0b0, 0xee99ddbb, 0xfc82caa6, 0xf28bc7ad, 0xd8b4e49c, 0xd6bde997, 0xc4a6fe8a, 0xcaaff381, 0x90d8b8e8, 0x9ed1b5e3, 0x8ccaa2fe, 0x82c3aff5, 0xa8fc8cc4, 0xa6f581cf, 0xb4ee96d2, 0xbae79bd9, 0xdb3bbb7b, 0xd532b670, 0xc729a16d, 0xc920ac66, 0xe31f8f57, 0xed16825c, 0xff0d9541, 0xf104984a, 0xab73d323, 0xa57ade28, 0xb761c935, 0xb968c43e, 0x9357e70f, 0x9d5eea04, 0x8f45fd19, 0x814cf012, 0x3bab6bcb, 0x35a266c0, 0x27b971dd, 0x29b07cd6, 0x038f5fe7, 0x0d8652ec, 0x1f9d45f1, 0x119448fa, 0x4be30393, 0x45ea0e98, 0x57f11985, 0x59f8148e, 0x73c737bf, 0x7dce3ab4, 0x6fd52da9, 0x61dc20a2, 0xad766df6, 0xa37f60fd, 0xb16477e0, 0xbf6d7aeb, 0x955259da, 0x9b5b54d1, 0x894043cc, 0x87494ec7, 0xdd3e05ae, 0xd33708a5, 0xc12c1fb8, 0xcf2512b3, 0xe51a3182, 0xeb133c89, 0xf9082b94, 0xf701269f, 0x4de6bd46, 0x43efb04d, 0x51f4a750, 0x5ffdaa5b, 0x75c2896a, 0x7bcb8461, 0x69d0937c, 0x67d99e77, 0x3daed51e, 0x33a7d815, 0x21bccf08, 0x2fb5c203, 0x058ae132, 0x0b83ec39, 0x1998fb24, 0x1791f62f, 0x764dd68d, 0x7844db86, 0x6a5fcc9b, 0x6456c190, 0x4e69e2a1, 0x4060efaa, 0x527bf8b7, 0x5c72f5bc, 0x0605bed5, 0x080cb3de, 0x1a17a4c3, 0x141ea9c8, 0x3e218af9, 0x302887f2, 0x223390ef, 0x2c3a9de4, 0x96dd063d, 0x98d40b36, 0x8acf1c2b, 0x84c61120, 0xaef93211, 0xa0f03f1a, 0xb2eb2807, 0xbce2250c, 0xe6956e65, 0xe89c636e, 0xfa877473, 0xf48e7978, 0xdeb15a49, 0xd0b85742, 0xc2a3405f, 0xccaa4d54, 0x41ecdaf7, 0x4fe5d7fc, 0x5dfec0e1, 0x53f7cdea, 0x79c8eedb, 0x77c1e3d0, 0x65daf4cd, 0x6bd3f9c6, 0x31a4b2af, 0x3fadbfa4, 0x2db6a8b9, 0x23bfa5b2, 0x09808683, 0x07898b88, 0x15929c95, 0x1b9b919e, 0xa17c0a47, 0xaf75074c, 0xbd6e1051, 0xb3671d5a, 0x99583e6b, 0x97513360, 0x854a247d, 0x8b432976, 0xd134621f, 0xdf3d6f14, 0xcd267809, 0xc32f7502, 0xe9105633, 0xe7195b38, 0xf5024c25, 0xfb0b412e, 0x9ad7618c, 0x94de6c87, 0x86c57b9a, 0x88cc7691, 0xa2f355a0, 0xacfa58ab, 0xbee14fb6, 0xb0e842bd, 0xea9f09d4, 0xe49604df, 0xf68d13c2, 0xf8841ec9, 0xd2bb3df8, 0xdcb230f3, 0xcea927ee, 0xc0a02ae5, 0x7a47b13c, 0x744ebc37, 0x6655ab2a, 0x685ca621, 0x42638510, 0x4c6a881b, 0x5e719f06, 0x5078920d, 0x0a0fd964, 0x0406d46f, 0x161dc372, 0x1814ce79, 0x322bed48, 0x3c22e043, 0x2e39f75e, 0x2030fa55, 0xec9ab701, 0xe293ba0a, 0xf088ad17, 0xfe81a01c, 0xd4be832d, 0xdab78e26, 0xc8ac993b, 0xc6a59430, 0x9cd2df59, 0x92dbd252, 0x80c0c54f, 0x8ec9c844, 0xa4f6eb75, 0xaaffe67e, 0xb8e4f163, 0xb6edfc68, 0x0c0a67b1, 0x02036aba, 0x10187da7, 0x1e1170ac, 0x342e539d, 0x3a275e96, 0x283c498b, 0x26354480, 0x7c420fe9, 0x724b02e2, 0x605015ff, 0x6e5918f4, 0x44663bc5, 0x4a6f36ce, 0x587421d3, 0x567d2cd8, 0x37a10c7a, 0x39a80171, 0x2bb3166c, 0x25ba1b67, 0x0f853856, 0x018c355d, 0x13972240, 0x1d9e2f4b, 0x47e96422, 0x49e06929, 0x5bfb7e34, 0x55f2733f, 0x7fcd500e, 0x71c45d05, 0x63df4a18, 0x6dd64713, 0xd731dcca, 0xd938d1c1, 0xcb23c6dc, 0xc52acbd7, 0xef15e8e6, 0xe11ce5ed, 0xf307f2f0, 0xfd0efffb, 0xa779b492, 0xa970b999, 0xbb6bae84, 0xb562a38f, 0x9f5d80be, 0x91548db5, 0x834f9aa8, 0x8d4697a3];\n  var U2 = [0x00000000, 0x0b0e090d, 0x161c121a, 0x1d121b17, 0x2c382434, 0x27362d39, 0x3a24362e, 0x312a3f23, 0x58704868, 0x537e4165, 0x4e6c5a72, 0x4562537f, 0x74486c5c, 0x7f466551, 0x62547e46, 0x695a774b, 0xb0e090d0, 0xbbee99dd, 0xa6fc82ca, 0xadf28bc7, 0x9cd8b4e4, 0x97d6bde9, 0x8ac4a6fe, 0x81caaff3, 0xe890d8b8, 0xe39ed1b5, 0xfe8ccaa2, 0xf582c3af, 0xc4a8fc8c, 0xcfa6f581, 0xd2b4ee96, 0xd9bae79b, 0x7bdb3bbb, 0x70d532b6, 0x6dc729a1, 0x66c920ac, 0x57e31f8f, 0x5ced1682, 0x41ff0d95, 0x4af10498, 0x23ab73d3, 0x28a57ade, 0x35b761c9, 0x3eb968c4, 0x0f9357e7, 0x049d5eea, 0x198f45fd, 0x12814cf0, 0xcb3bab6b, 0xc035a266, 0xdd27b971, 0xd629b07c, 0xe7038f5f, 0xec0d8652, 0xf11f9d45, 0xfa119448, 0x934be303, 0x9845ea0e, 0x8557f119, 0x8e59f814, 0xbf73c737, 0xb47dce3a, 0xa96fd52d, 0xa261dc20, 0xf6ad766d, 0xfda37f60, 0xe0b16477, 0xebbf6d7a, 0xda955259, 0xd19b5b54, 0xcc894043, 0xc787494e, 0xaedd3e05, 0xa5d33708, 0xb8c12c1f, 0xb3cf2512, 0x82e51a31, 0x89eb133c, 0x94f9082b, 0x9ff70126, 0x464de6bd, 0x4d43efb0, 0x5051f4a7, 0x5b5ffdaa, 0x6a75c289, 0x617bcb84, 0x7c69d093, 0x7767d99e, 0x1e3daed5, 0x1533a7d8, 0x0821bccf, 0x032fb5c2, 0x32058ae1, 0x390b83ec, 0x241998fb, 0x2f1791f6, 0x8d764dd6, 0x867844db, 0x9b6a5fcc, 0x906456c1, 0xa14e69e2, 0xaa4060ef, 0xb7527bf8, 0xbc5c72f5, 0xd50605be, 0xde080cb3, 0xc31a17a4, 0xc8141ea9, 0xf93e218a, 0xf2302887, 0xef223390, 0xe42c3a9d, 0x3d96dd06, 0x3698d40b, 0x2b8acf1c, 0x2084c611, 0x11aef932, 0x1aa0f03f, 0x07b2eb28, 0x0cbce225, 0x65e6956e, 0x6ee89c63, 0x73fa8774, 0x78f48e79, 0x49deb15a, 0x42d0b857, 0x5fc2a340, 0x54ccaa4d, 0xf741ecda, 0xfc4fe5d7, 0xe15dfec0, 0xea53f7cd, 0xdb79c8ee, 0xd077c1e3, 0xcd65daf4, 0xc66bd3f9, 0xaf31a4b2, 0xa43fadbf, 0xb92db6a8, 0xb223bfa5, 0x83098086, 0x8807898b, 0x9515929c, 0x9e1b9b91, 0x47a17c0a, 0x4caf7507, 0x51bd6e10, 0x5ab3671d, 0x6b99583e, 0x60975133, 0x7d854a24, 0x768b4329, 0x1fd13462, 0x14df3d6f, 0x09cd2678, 0x02c32f75, 0x33e91056, 0x38e7195b, 0x25f5024c, 0x2efb0b41, 0x8c9ad761, 0x8794de6c, 0x9a86c57b, 0x9188cc76, 0xa0a2f355, 0xabacfa58, 0xb6bee14f, 0xbdb0e842, 0xd4ea9f09, 0xdfe49604, 0xc2f68d13, 0xc9f8841e, 0xf8d2bb3d, 0xf3dcb230, 0xeecea927, 0xe5c0a02a, 0x3c7a47b1, 0x37744ebc, 0x2a6655ab, 0x21685ca6, 0x10426385, 0x1b4c6a88, 0x065e719f, 0x0d507892, 0x640a0fd9, 0x6f0406d4, 0x72161dc3, 0x791814ce, 0x48322bed, 0x433c22e0, 0x5e2e39f7, 0x552030fa, 0x01ec9ab7, 0x0ae293ba, 0x17f088ad, 0x1cfe81a0, 0x2dd4be83, 0x26dab78e, 0x3bc8ac99, 0x30c6a594, 0x599cd2df, 0x5292dbd2, 0x4f80c0c5, 0x448ec9c8, 0x75a4f6eb, 0x7eaaffe6, 0x63b8e4f1, 0x68b6edfc, 0xb10c0a67, 0xba02036a, 0xa710187d, 0xac1e1170, 0x9d342e53, 0x963a275e, 0x8b283c49, 0x80263544, 0xe97c420f, 0xe2724b02, 0xff605015, 0xf46e5918, 0xc544663b, 0xce4a6f36, 0xd3587421, 0xd8567d2c, 0x7a37a10c, 0x7139a801, 0x6c2bb316, 0x6725ba1b, 0x560f8538, 0x5d018c35, 0x40139722, 0x4b1d9e2f, 0x2247e964, 0x2949e069, 0x345bfb7e, 0x3f55f273, 0x0e7fcd50, 0x0571c45d, 0x1863df4a, 0x136dd647, 0xcad731dc, 0xc1d938d1, 0xdccb23c6, 0xd7c52acb, 0xe6ef15e8, 0xede11ce5, 0xf0f307f2, 0xfbfd0eff, 0x92a779b4, 0x99a970b9, 0x84bb6bae, 0x8fb562a3, 0xbe9f5d80, 0xb591548d, 0xa8834f9a, 0xa38d4697];\n  var U3 = [0x00000000, 0x0d0b0e09, 0x1a161c12, 0x171d121b, 0x342c3824, 0x3927362d, 0x2e3a2436, 0x23312a3f, 0x68587048, 0x65537e41, 0x724e6c5a, 0x7f456253, 0x5c74486c, 0x517f4665, 0x4662547e, 0x4b695a77, 0xd0b0e090, 0xddbbee99, 0xcaa6fc82, 0xc7adf28b, 0xe49cd8b4, 0xe997d6bd, 0xfe8ac4a6, 0xf381caaf, 0xb8e890d8, 0xb5e39ed1, 0xa2fe8cca, 0xaff582c3, 0x8cc4a8fc, 0x81cfa6f5, 0x96d2b4ee, 0x9bd9bae7, 0xbb7bdb3b, 0xb670d532, 0xa16dc729, 0xac66c920, 0x8f57e31f, 0x825ced16, 0x9541ff0d, 0x984af104, 0xd323ab73, 0xde28a57a, 0xc935b761, 0xc43eb968, 0xe70f9357, 0xea049d5e, 0xfd198f45, 0xf012814c, 0x6bcb3bab, 0x66c035a2, 0x71dd27b9, 0x7cd629b0, 0x5fe7038f, 0x52ec0d86, 0x45f11f9d, 0x48fa1194, 0x03934be3, 0x0e9845ea, 0x198557f1, 0x148e59f8, 0x37bf73c7, 0x3ab47dce, 0x2da96fd5, 0x20a261dc, 0x6df6ad76, 0x60fda37f, 0x77e0b164, 0x7aebbf6d, 0x59da9552, 0x54d19b5b, 0x43cc8940, 0x4ec78749, 0x05aedd3e, 0x08a5d337, 0x1fb8c12c, 0x12b3cf25, 0x3182e51a, 0x3c89eb13, 0x2b94f908, 0x269ff701, 0xbd464de6, 0xb04d43ef, 0xa75051f4, 0xaa5b5ffd, 0x896a75c2, 0x84617bcb, 0x937c69d0, 0x9e7767d9, 0xd51e3dae, 0xd81533a7, 0xcf0821bc, 0xc2032fb5, 0xe132058a, 0xec390b83, 0xfb241998, 0xf62f1791, 0xd68d764d, 0xdb867844, 0xcc9b6a5f, 0xc1906456, 0xe2a14e69, 0xefaa4060, 0xf8b7527b, 0xf5bc5c72, 0xbed50605, 0xb3de080c, 0xa4c31a17, 0xa9c8141e, 0x8af93e21, 0x87f23028, 0x90ef2233, 0x9de42c3a, 0x063d96dd, 0x0b3698d4, 0x1c2b8acf, 0x112084c6, 0x3211aef9, 0x3f1aa0f0, 0x2807b2eb, 0x250cbce2, 0x6e65e695, 0x636ee89c, 0x7473fa87, 0x7978f48e, 0x5a49deb1, 0x5742d0b8, 0x405fc2a3, 0x4d54ccaa, 0xdaf741ec, 0xd7fc4fe5, 0xc0e15dfe, 0xcdea53f7, 0xeedb79c8, 0xe3d077c1, 0xf4cd65da, 0xf9c66bd3, 0xb2af31a4, 0xbfa43fad, 0xa8b92db6, 0xa5b223bf, 0x86830980, 0x8b880789, 0x9c951592, 0x919e1b9b, 0x0a47a17c, 0x074caf75, 0x1051bd6e, 0x1d5ab367, 0x3e6b9958, 0x33609751, 0x247d854a, 0x29768b43, 0x621fd134, 0x6f14df3d, 0x7809cd26, 0x7502c32f, 0x5633e910, 0x5b38e719, 0x4c25f502, 0x412efb0b, 0x618c9ad7, 0x6c8794de, 0x7b9a86c5, 0x769188cc, 0x55a0a2f3, 0x58abacfa, 0x4fb6bee1, 0x42bdb0e8, 0x09d4ea9f, 0x04dfe496, 0x13c2f68d, 0x1ec9f884, 0x3df8d2bb, 0x30f3dcb2, 0x27eecea9, 0x2ae5c0a0, 0xb13c7a47, 0xbc37744e, 0xab2a6655, 0xa621685c, 0x85104263, 0x881b4c6a, 0x9f065e71, 0x920d5078, 0xd9640a0f, 0xd46f0406, 0xc372161d, 0xce791814, 0xed48322b, 0xe0433c22, 0xf75e2e39, 0xfa552030, 0xb701ec9a, 0xba0ae293, 0xad17f088, 0xa01cfe81, 0x832dd4be, 0x8e26dab7, 0x993bc8ac, 0x9430c6a5, 0xdf599cd2, 0xd25292db, 0xc54f80c0, 0xc8448ec9, 0xeb75a4f6, 0xe67eaaff, 0xf163b8e4, 0xfc68b6ed, 0x67b10c0a, 0x6aba0203, 0x7da71018, 0x70ac1e11, 0x539d342e, 0x5e963a27, 0x498b283c, 0x44802635, 0x0fe97c42, 0x02e2724b, 0x15ff6050, 0x18f46e59, 0x3bc54466, 0x36ce4a6f, 0x21d35874, 0x2cd8567d, 0x0c7a37a1, 0x017139a8, 0x166c2bb3, 0x1b6725ba, 0x38560f85, 0x355d018c, 0x22401397, 0x2f4b1d9e, 0x642247e9, 0x692949e0, 0x7e345bfb, 0x733f55f2, 0x500e7fcd, 0x5d0571c4, 0x4a1863df, 0x47136dd6, 0xdccad731, 0xd1c1d938, 0xc6dccb23, 0xcbd7c52a, 0xe8e6ef15, 0xe5ede11c, 0xf2f0f307, 0xfffbfd0e, 0xb492a779, 0xb999a970, 0xae84bb6b, 0xa38fb562, 0x80be9f5d, 0x8db59154, 0x9aa8834f, 0x97a38d46];\n  var U4 = [0x00000000, 0x090d0b0e, 0x121a161c, 0x1b171d12, 0x24342c38, 0x2d392736, 0x362e3a24, 0x3f23312a, 0x48685870, 0x4165537e, 0x5a724e6c, 0x537f4562, 0x6c5c7448, 0x65517f46, 0x7e466254, 0x774b695a, 0x90d0b0e0, 0x99ddbbee, 0x82caa6fc, 0x8bc7adf2, 0xb4e49cd8, 0xbde997d6, 0xa6fe8ac4, 0xaff381ca, 0xd8b8e890, 0xd1b5e39e, 0xcaa2fe8c, 0xc3aff582, 0xfc8cc4a8, 0xf581cfa6, 0xee96d2b4, 0xe79bd9ba, 0x3bbb7bdb, 0x32b670d5, 0x29a16dc7, 0x20ac66c9, 0x1f8f57e3, 0x16825ced, 0x0d9541ff, 0x04984af1, 0x73d323ab, 0x7ade28a5, 0x61c935b7, 0x68c43eb9, 0x57e70f93, 0x5eea049d, 0x45fd198f, 0x4cf01281, 0xab6bcb3b, 0xa266c035, 0xb971dd27, 0xb07cd629, 0x8f5fe703, 0x8652ec0d, 0x9d45f11f, 0x9448fa11, 0xe303934b, 0xea0e9845, 0xf1198557, 0xf8148e59, 0xc737bf73, 0xce3ab47d, 0xd52da96f, 0xdc20a261, 0x766df6ad, 0x7f60fda3, 0x6477e0b1, 0x6d7aebbf, 0x5259da95, 0x5b54d19b, 0x4043cc89, 0x494ec787, 0x3e05aedd, 0x3708a5d3, 0x2c1fb8c1, 0x2512b3cf, 0x1a3182e5, 0x133c89eb, 0x082b94f9, 0x01269ff7, 0xe6bd464d, 0xefb04d43, 0xf4a75051, 0xfdaa5b5f, 0xc2896a75, 0xcb84617b, 0xd0937c69, 0xd99e7767, 0xaed51e3d, 0xa7d81533, 0xbccf0821, 0xb5c2032f, 0x8ae13205, 0x83ec390b, 0x98fb2419, 0x91f62f17, 0x4dd68d76, 0x44db8678, 0x5fcc9b6a, 0x56c19064, 0x69e2a14e, 0x60efaa40, 0x7bf8b752, 0x72f5bc5c, 0x05bed506, 0x0cb3de08, 0x17a4c31a, 0x1ea9c814, 0x218af93e, 0x2887f230, 0x3390ef22, 0x3a9de42c, 0xdd063d96, 0xd40b3698, 0xcf1c2b8a, 0xc6112084, 0xf93211ae, 0xf03f1aa0, 0xeb2807b2, 0xe2250cbc, 0x956e65e6, 0x9c636ee8, 0x877473fa, 0x8e7978f4, 0xb15a49de, 0xb85742d0, 0xa3405fc2, 0xaa4d54cc, 0xecdaf741, 0xe5d7fc4f, 0xfec0e15d, 0xf7cdea53, 0xc8eedb79, 0xc1e3d077, 0xdaf4cd65, 0xd3f9c66b, 0xa4b2af31, 0xadbfa43f, 0xb6a8b92d, 0xbfa5b223, 0x80868309, 0x898b8807, 0x929c9515, 0x9b919e1b, 0x7c0a47a1, 0x75074caf, 0x6e1051bd, 0x671d5ab3, 0x583e6b99, 0x51336097, 0x4a247d85, 0x4329768b, 0x34621fd1, 0x3d6f14df, 0x267809cd, 0x2f7502c3, 0x105633e9, 0x195b38e7, 0x024c25f5, 0x0b412efb, 0xd7618c9a, 0xde6c8794, 0xc57b9a86, 0xcc769188, 0xf355a0a2, 0xfa58abac, 0xe14fb6be, 0xe842bdb0, 0x9f09d4ea, 0x9604dfe4, 0x8d13c2f6, 0x841ec9f8, 0xbb3df8d2, 0xb230f3dc, 0xa927eece, 0xa02ae5c0, 0x47b13c7a, 0x4ebc3774, 0x55ab2a66, 0x5ca62168, 0x63851042, 0x6a881b4c, 0x719f065e, 0x78920d50, 0x0fd9640a, 0x06d46f04, 0x1dc37216, 0x14ce7918, 0x2bed4832, 0x22e0433c, 0x39f75e2e, 0x30fa5520, 0x9ab701ec, 0x93ba0ae2, 0x88ad17f0, 0x81a01cfe, 0xbe832dd4, 0xb78e26da, 0xac993bc8, 0xa59430c6, 0xd2df599c, 0xdbd25292, 0xc0c54f80, 0xc9c8448e, 0xf6eb75a4, 0xffe67eaa, 0xe4f163b8, 0xedfc68b6, 0x0a67b10c, 0x036aba02, 0x187da710, 0x1170ac1e, 0x2e539d34, 0x275e963a, 0x3c498b28, 0x35448026, 0x420fe97c, 0x4b02e272, 0x5015ff60, 0x5918f46e, 0x663bc544, 0x6f36ce4a, 0x7421d358, 0x7d2cd856, 0xa10c7a37, 0xa8017139, 0xb3166c2b, 0xba1b6725, 0x8538560f, 0x8c355d01, 0x97224013, 0x9e2f4b1d, 0xe9642247, 0xe0692949, 0xfb7e345b, 0xf2733f55, 0xcd500e7f, 0xc45d0571, 0xdf4a1863, 0xd647136d, 0x31dccad7, 0x38d1c1d9, 0x23c6dccb, 0x2acbd7c5, 0x15e8e6ef, 0x1ce5ede1, 0x07f2f0f3, 0x0efffbfd, 0x79b492a7, 0x70b999a9, 0x6bae84bb, 0x62a38fb5, 0x5d80be9f, 0x548db591, 0x4f9aa883, 0x4697a38d];\n\n  function convertToInt32(bytes) {\n    var result = [];\n    for (var i = 0; i < bytes.length; i += 4) {\n      result.push(\n        (bytes[i    ] << 24) |\n        (bytes[i + 1] << 16) |\n        (bytes[i + 2] <<  8) |\n        bytes[i + 3]\n      );\n    }\n    return result;\n  }\n\n  var AES = function(key) {\n    if (!(this instanceof AES)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    Object.defineProperty(this, 'key', {\n      value: coerceArray(key, true)\n    });\n\n    this._prepare();\n  }\n\n\n  AES.prototype._prepare = function() {\n\n    var rounds = numberOfRounds[this.key.length];\n    if (rounds == null) {\n      throw new Error('invalid key size (must be 16, 24 or 32 bytes)');\n    }\n\n    // encryption round keys\n    this._Ke = [];\n\n    // decryption round keys\n    this._Kd = [];\n\n    for (var i = 0; i <= rounds; i++) {\n      this._Ke.push([0, 0, 0, 0]);\n      this._Kd.push([0, 0, 0, 0]);\n    }\n\n    var roundKeyCount = (rounds + 1) * 4;\n    var KC = this.key.length / 4;\n\n    // convert the key into ints\n    var tk = convertToInt32(this.key);\n\n    // copy values into round key arrays\n    var index;\n    for (var i = 0; i < KC; i++) {\n      index = i >> 2;\n      this._Ke[index][i % 4] = tk[i];\n      this._Kd[rounds - index][i % 4] = tk[i];\n    }\n\n    // key expansion (fips-197 section 5.2)\n    var rconpointer = 0;\n    var t = KC, tt;\n    while (t < roundKeyCount) {\n      tt = tk[KC - 1];\n      tk[0] ^= ((S[(tt >> 16) & 0xFF] << 24) ^\n        (S[(tt >>  8) & 0xFF] << 16) ^\n        (S[ tt        & 0xFF] <<  8) ^\n        S[(tt >> 24) & 0xFF]        ^\n        (rcon[rconpointer] << 24));\n      rconpointer += 1;\n\n      // key expansion (for non-256 bit)\n      if (KC != 8) {\n        for (var i = 1; i < KC; i++) {\n          tk[i] ^= tk[i - 1];\n        }\n\n        // key expansion for 256-bit keys is \"slightly different\" (fips-197)\n      } else {\n        for (var i = 1; i < (KC / 2); i++) {\n          tk[i] ^= tk[i - 1];\n        }\n        tt = tk[(KC / 2) - 1];\n\n        tk[KC / 2] ^= (S[ tt        & 0xFF]        ^\n          (S[(tt >>  8) & 0xFF] <<  8) ^\n          (S[(tt >> 16) & 0xFF] << 16) ^\n          (S[(tt >> 24) & 0xFF] << 24));\n\n        for (var i = (KC / 2) + 1; i < KC; i++) {\n          tk[i] ^= tk[i - 1];\n        }\n      }\n\n      // copy values into round key arrays\n      var i = 0, r, c;\n      while (i < KC && t < roundKeyCount) {\n        r = t >> 2;\n        c = t % 4;\n        this._Ke[r][c] = tk[i];\n        this._Kd[rounds - r][c] = tk[i++];\n        t++;\n      }\n    }\n\n    // inverse-cipher-ify the decryption round key (fips-197 section 5.3)\n    for (var r = 1; r < rounds; r++) {\n      for (var c = 0; c < 4; c++) {\n        tt = this._Kd[r][c];\n        this._Kd[r][c] = (U1[(tt >> 24) & 0xFF] ^\n          U2[(tt >> 16) & 0xFF] ^\n          U3[(tt >>  8) & 0xFF] ^\n          U4[ tt        & 0xFF]);\n      }\n    }\n  }\n\n  AES.prototype.encrypt = function(plaintext) {\n    if (plaintext.length != 16) {\n      throw new Error('invalid plaintext size (must be 16 bytes)');\n    }\n\n    var rounds = this._Ke.length - 1;\n    var a = [0, 0, 0, 0];\n\n    // convert plaintext to (ints ^ key)\n    var t = convertToInt32(plaintext);\n    for (var i = 0; i < 4; i++) {\n      t[i] ^= this._Ke[0][i];\n    }\n\n    // apply round transforms\n    for (var r = 1; r < rounds; r++) {\n      for (var i = 0; i < 4; i++) {\n        a[i] = (T1[(t[ i         ] >> 24) & 0xff] ^\n          T2[(t[(i + 1) % 4] >> 16) & 0xff] ^\n          T3[(t[(i + 2) % 4] >>  8) & 0xff] ^\n          T4[ t[(i + 3) % 4]        & 0xff] ^\n          this._Ke[r][i]);\n      }\n      t = a.slice();\n    }\n\n    // the last round is special\n    var result = createArray(16), tt;\n    for (var i = 0; i < 4; i++) {\n      tt = this._Ke[rounds][i];\n      result[4 * i    ] = (S[(t[ i         ] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n      result[4 * i + 1] = (S[(t[(i + 1) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n      result[4 * i + 2] = (S[(t[(i + 2) % 4] >>  8) & 0xff] ^ (tt >>  8)) & 0xff;\n      result[4 * i + 3] = (S[ t[(i + 3) % 4]        & 0xff] ^  tt       ) & 0xff;\n    }\n\n    return result;\n  }\n\n  AES.prototype.decrypt = function(ciphertext) {\n    if (ciphertext.length != 16) {\n      throw new Error('invalid ciphertext size (must be 16 bytes)');\n    }\n\n    var rounds = this._Kd.length - 1;\n    var a = [0, 0, 0, 0];\n\n    // convert plaintext to (ints ^ key)\n    var t = convertToInt32(ciphertext);\n    for (var i = 0; i < 4; i++) {\n      t[i] ^= this._Kd[0][i];\n    }\n\n    // apply round transforms\n    for (var r = 1; r < rounds; r++) {\n      for (var i = 0; i < 4; i++) {\n        a[i] = (T5[(t[ i          ] >> 24) & 0xff] ^\n          T6[(t[(i + 3) % 4] >> 16) & 0xff] ^\n          T7[(t[(i + 2) % 4] >>  8) & 0xff] ^\n          T8[ t[(i + 1) % 4]        & 0xff] ^\n          this._Kd[r][i]);\n      }\n      t = a.slice();\n    }\n\n    // the last round is special\n    var result = createArray(16), tt;\n    for (var i = 0; i < 4; i++) {\n      tt = this._Kd[rounds][i];\n      result[4 * i    ] = (Si[(t[ i         ] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n      result[4 * i + 1] = (Si[(t[(i + 3) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n      result[4 * i + 2] = (Si[(t[(i + 2) % 4] >>  8) & 0xff] ^ (tt >>  8)) & 0xff;\n      result[4 * i + 3] = (Si[ t[(i + 1) % 4]        & 0xff] ^  tt       ) & 0xff;\n    }\n\n    return result;\n  }\n\n\n  /**\n   *  Mode Of Operation - Electonic Codebook (ECB)\n   */\n  var ModeOfOperationECB = function(key) {\n    if (!(this instanceof ModeOfOperationECB)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Electronic Code Block\";\n    this.name = \"ecb\";\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationECB.prototype.encrypt = function(plaintext) {\n    plaintext = coerceArray(plaintext);\n\n    if ((plaintext.length % 16) !== 0) {\n      throw new Error('invalid plaintext size (must be multiple of 16 bytes)');\n    }\n\n    var ciphertext = createArray(plaintext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < plaintext.length; i += 16) {\n      copyArray(plaintext, block, 0, i, i + 16);\n      block = this._aes.encrypt(block);\n      copyArray(block, ciphertext, i);\n    }\n\n    return ciphertext;\n  }\n\n  ModeOfOperationECB.prototype.decrypt = function(ciphertext) {\n    ciphertext = coerceArray(ciphertext);\n\n    if ((ciphertext.length % 16) !== 0) {\n      throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');\n    }\n\n    var plaintext = createArray(ciphertext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < ciphertext.length; i += 16) {\n      copyArray(ciphertext, block, 0, i, i + 16);\n      block = this._aes.decrypt(block);\n      copyArray(block, plaintext, i);\n    }\n\n    return plaintext;\n  }\n\n\n  /**\n   *  Mode Of Operation - Cipher Block Chaining (CBC)\n   */\n  var ModeOfOperationCBC = function(key, iv) {\n    if (!(this instanceof ModeOfOperationCBC)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Cipher Block Chaining\";\n    this.name = \"cbc\";\n\n    if (!iv) {\n      iv = createArray(16);\n\n    } else if (iv.length != 16) {\n      throw new Error('invalid initialation vector size (must be 16 bytes)');\n    }\n\n    this._lastCipherblock = coerceArray(iv, true);\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationCBC.prototype.encrypt = function(plaintext) {\n    plaintext = coerceArray(plaintext);\n\n    if ((plaintext.length % 16) !== 0) {\n      throw new Error('invalid plaintext size (must be multiple of 16 bytes)');\n    }\n\n    var ciphertext = createArray(plaintext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < plaintext.length; i += 16) {\n      copyArray(plaintext, block, 0, i, i + 16);\n\n      for (var j = 0; j < 16; j++) {\n        block[j] ^= this._lastCipherblock[j];\n      }\n\n      this._lastCipherblock = this._aes.encrypt(block);\n      copyArray(this._lastCipherblock, ciphertext, i);\n    }\n\n    return ciphertext;\n  }\n\n  ModeOfOperationCBC.prototype.decrypt = function(ciphertext) {\n    ciphertext = coerceArray(ciphertext);\n\n    if ((ciphertext.length % 16) !== 0) {\n      throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');\n    }\n\n    var plaintext = createArray(ciphertext.length);\n    var block = createArray(16);\n\n    for (var i = 0; i < ciphertext.length; i += 16) {\n      copyArray(ciphertext, block, 0, i, i + 16);\n      block = this._aes.decrypt(block);\n\n      for (var j = 0; j < 16; j++) {\n        plaintext[i + j] = block[j] ^ this._lastCipherblock[j];\n      }\n\n      copyArray(ciphertext, this._lastCipherblock, 0, i, i + 16);\n    }\n\n    return plaintext;\n  }\n\n\n  /**\n   *  Mode Of Operation - Cipher Feedback (CFB)\n   */\n  var ModeOfOperationCFB = function(key, iv, segmentSize) {\n    if (!(this instanceof ModeOfOperationCFB)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Cipher Feedback\";\n    this.name = \"cfb\";\n\n    if (!iv) {\n      iv = createArray(16);\n\n    } else if (iv.length != 16) {\n      throw new Error('invalid initialation vector size (must be 16 size)');\n    }\n\n    if (!segmentSize) { segmentSize = 1; }\n\n    this.segmentSize = segmentSize;\n\n    this._shiftRegister = coerceArray(iv, true);\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationCFB.prototype.encrypt = function(plaintext) {\n    if ((plaintext.length % this.segmentSize) != 0) {\n      throw new Error('invalid plaintext size (must be segmentSize bytes)');\n    }\n\n    var encrypted = coerceArray(plaintext, true);\n\n    var xorSegment;\n    for (var i = 0; i < encrypted.length; i += this.segmentSize) {\n      xorSegment = this._aes.encrypt(this._shiftRegister);\n      for (var j = 0; j < this.segmentSize; j++) {\n        encrypted[i + j] ^= xorSegment[j];\n      }\n\n      // Shift the register\n      copyArray(this._shiftRegister, this._shiftRegister, 0, this.segmentSize);\n      copyArray(encrypted, this._shiftRegister, 16 - this.segmentSize, i, i + this.segmentSize);\n    }\n\n    return encrypted;\n  }\n\n  ModeOfOperationCFB.prototype.decrypt = function(ciphertext) {\n    if ((ciphertext.length % this.segmentSize) != 0) {\n      throw new Error('invalid ciphertext size (must be segmentSize bytes)');\n    }\n\n    var plaintext = coerceArray(ciphertext, true);\n\n    var xorSegment;\n    for (var i = 0; i < plaintext.length; i += this.segmentSize) {\n      xorSegment = this._aes.encrypt(this._shiftRegister);\n\n      for (var j = 0; j < this.segmentSize; j++) {\n        plaintext[i + j] ^= xorSegment[j];\n      }\n\n      // Shift the register\n      copyArray(this._shiftRegister, this._shiftRegister, 0, this.segmentSize);\n      copyArray(ciphertext, this._shiftRegister, 16 - this.segmentSize, i, i + this.segmentSize);\n    }\n\n    return plaintext;\n  }\n\n  /**\n   *  Mode Of Operation - Output Feedback (OFB)\n   */\n  var ModeOfOperationOFB = function(key, iv) {\n    if (!(this instanceof ModeOfOperationOFB)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Output Feedback\";\n    this.name = \"ofb\";\n\n    if (!iv) {\n      iv = createArray(16);\n\n    } else if (iv.length != 16) {\n      throw new Error('invalid initialation vector size (must be 16 bytes)');\n    }\n\n    this._lastPrecipher = coerceArray(iv, true);\n    this._lastPrecipherIndex = 16;\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationOFB.prototype.encrypt = function(plaintext) {\n    var encrypted = coerceArray(plaintext, true);\n\n    for (var i = 0; i < encrypted.length; i++) {\n      if (this._lastPrecipherIndex === 16) {\n        this._lastPrecipher = this._aes.encrypt(this._lastPrecipher);\n        this._lastPrecipherIndex = 0;\n      }\n      encrypted[i] ^= this._lastPrecipher[this._lastPrecipherIndex++];\n    }\n\n    return encrypted;\n  }\n\n  // Decryption is symetric\n  ModeOfOperationOFB.prototype.decrypt = ModeOfOperationOFB.prototype.encrypt;\n\n\n  /**\n   *  Counter object for CTR common mode of operation\n   */\n  var Counter = function(initialValue) {\n    if (!(this instanceof Counter)) {\n      throw Error('Counter must be instanitated with `new`');\n    }\n\n    // We allow 0, but anything false-ish uses the default 1\n    if (initialValue !== 0 && !initialValue) { initialValue = 1; }\n\n    if (typeof(initialValue) === 'number') {\n      this._counter = createArray(16);\n      this.setValue(initialValue);\n\n    } else {\n      this.setBytes(initialValue);\n    }\n  }\n\n  Counter.prototype.setValue = function(value) {\n    if (typeof(value) !== 'number' || parseInt(value) != value) {\n      throw new Error('invalid counter value (must be an integer)');\n    }\n\n    // We cannot safely handle numbers beyond the safe range for integers\n    if (value > Number.MAX_SAFE_INTEGER) {\n      throw new Error('integer value out of safe range');\n    }\n\n    for (var index = 15; index >= 0; --index) {\n      this._counter[index] = value % 256;\n      value = parseInt(value / 256);\n    }\n  }\n\n  Counter.prototype.setBytes = function(bytes) {\n    bytes = coerceArray(bytes, true);\n\n    if (bytes.length != 16) {\n      throw new Error('invalid counter bytes size (must be 16 bytes)');\n    }\n\n    this._counter = bytes;\n  };\n\n  Counter.prototype.increment = function() {\n    for (var i = 15; i >= 0; i--) {\n      if (this._counter[i] === 255) {\n        this._counter[i] = 0;\n      } else {\n        this._counter[i]++;\n        break;\n      }\n    }\n  }\n\n\n  /**\n   *  Mode Of Operation - Counter (CTR)\n   */\n  var ModeOfOperationCTR = function(key, counter) {\n    if (!(this instanceof ModeOfOperationCTR)) {\n      throw Error('AES must be instanitated with `new`');\n    }\n\n    this.description = \"Counter\";\n    this.name = \"ctr\";\n\n    if (!(counter instanceof Counter)) {\n      counter = new Counter(counter)\n    }\n\n    this._counter = counter;\n\n    this._remainingCounter = null;\n    this._remainingCounterIndex = 16;\n\n    this._aes = new AES(key);\n  }\n\n  ModeOfOperationCTR.prototype.encrypt = function(plaintext) {\n    var encrypted = coerceArray(plaintext, true);\n\n    for (var i = 0; i < encrypted.length; i++) {\n      if (this._remainingCounterIndex === 16) {\n        this._remainingCounter = this._aes.encrypt(this._counter._counter);\n        this._remainingCounterIndex = 0;\n        this._counter.increment();\n      }\n      encrypted[i] ^= this._remainingCounter[this._remainingCounterIndex++];\n    }\n\n    return encrypted;\n  }\n\n  // Decryption is symetric\n  ModeOfOperationCTR.prototype.decrypt = ModeOfOperationCTR.prototype.encrypt;\n\n\n  ///////////////////////\n  // Padding\n\n  // See:https://tools.ietf.org/html/rfc2315\n  function pkcs7pad(data) {\n    data = coerceArray(data, true);\n    var padder = 16 - (data.length % 16);\n    var result = createArray(data.length + padder);\n    copyArray(data, result);\n    for (var i = data.length; i < result.length; i++) {\n      result[i] = padder;\n    }\n    return result;\n  }\n\n  function pkcs7strip(data) {\n    data = coerceArray(data, true);\n    if (data.length < 16) { throw new Error('PKCS#7 invalid length'); }\n\n    var padder = data[data.length - 1];\n    if (padder > 16) { throw new Error('PKCS#7 padding byte out of range'); }\n\n    var length = data.length - padder;\n    for (var i = 0; i < padder; i++) {\n      if (data[length + i] !== padder) {\n        throw new Error('PKCS#7 invalid padding byte');\n      }\n    }\n\n    var result = createArray(length);\n    copyArray(data, result, 0, 0, length);\n    return result;\n  }\n\n  ///////////////////////\n  // Exporting\n\n\n  // The block cipher\n  var aesjs = {\n    AES: AES,\n    Counter: Counter,\n\n    ModeOfOperation: {\n      ecb: ModeOfOperationECB,\n      cbc: ModeOfOperationCBC,\n      cfb: ModeOfOperationCFB,\n      ofb: ModeOfOperationOFB,\n      ctr: ModeOfOperationCTR\n    },\n\n    utils: {\n      hex: convertHex,\n      utf8: convertUtf8\n    },\n\n    padding: {\n      pkcs7: {\n        pad: pkcs7pad,\n        strip: pkcs7strip\n      }\n    },\n\n    _arrayTest: {\n      coerceArray: coerceArray,\n      createArray: createArray,\n      copyArray: copyArray,\n    }\n  };\n\n\n  // node.js\n  if (typeof exports !== 'undefined') {\n    module.exports = aesjs\n\n    // RequireJS/AMD\n    // http://www.requirejs.org/docs/api.html\n    // https://github.com/amdjs/amdjs-api/wiki/AMD\n  } else if (typeof(define) === 'function' && define.amd) {\n    define([], function() { return aesjs; });\n\n    // Web Browsers\n  } else {\n\n    // If there was an existing library at \"aesjs\" make sure it's still available\n    if (root.aesjs) {\n      aesjs._aesjs = root.aesjs;\n    }\n\n    root.aesjs = aesjs;\n  }\n\n\n})(this);\n","export const characters = new Map<string, string>([\n  [' ', ' '],\n  ['0', '⓿'],\n  ['1', '11⓵➊⑴¹𝟏𝟙１𝟷𝟣⒈𝟭1➀₁①❶⥠'],\n  ['2', '⓶⒉⑵➋ƻ²ᒿ𝟚２𝟮𝟤ᒾ𝟸Ƨ𝟐②ᴤ₂➁❷ᘝƨ'],\n  ['3', '³ȝჳⳌꞫ𝟑ℨ𝟛𝟯𝟥Ꝫ➌ЗȜ⓷ӠƷ３𝟹⑶⒊ʒʓǯǮƺ𝕴ᶾзᦡ➂③₃ᶚᴣᴟ❸ҘҙӬӡӭӟӞ'],\n  ['4', '𝟰𝟺𝟦𝟒➍ҶᏎ𝟜ҷ⓸ҸҹӴӵᶣ４чㄩ⁴➃₄④❹Ӌ⑷⒋'],\n  ['5', '𝟱⓹➎Ƽ𝟓𝟻𝟝𝟧５➄₅⑤⁵❺ƽ⑸⒌'],\n  ['6', 'Ⳓ🄇𝟼Ꮾ𝟲𝟞𝟨𝟔➏⓺Ϭϭ⁶б６ᧈ⑥➅₆❻⑹⒍'],\n  ['7', '𝟕𝟟𝟩𝟳𝟽🄈⓻𐓒➐７⁷⑦₇❼➆⑺⒎'],\n  ['8', '𐌚🄉➑⓼８𝟠𝟪৪⁸₈𝟴➇⑧❽𝟾𝟖⑻⒏'],\n  ['9', '൭Ꝯ𝝑𝞋𝟅🄊𝟡𝟵Ⳋ⓽➒੧৭୨９𝟫𝟿𝟗⁹₉Գ➈⑨❾⑼⒐'],\n  ['10', '⓾❿➉➓🔟⑩⑽⒑'],\n  ['11', '⑪⑾⒒⓫'],\n  ['12', '⑫⑿⒓⓬'],\n  ['13', '⑬⒀⒔⓭'],\n  ['14', '⑭⒁⒕⓮'],\n  ['15', '⑮⒂⒖⓯'],\n  ['16', '⑯⒃⒗⓰'],\n  ['17', '⑰⒄⒘⓱'],\n  ['18', '⑱⒅⒙⓲'],\n  ['19', '⑲⒆⒚⓳'],\n  ['20', '⑳⒇⒛⓴'],\n  ['ae', 'æ'],\n  ['OE', 'Œ'],\n  ['oe', 'œ'],\n  ['pi', 'ᒆ'],\n  ['Nj', 'ǋ'],\n  ['AE', 'ᴁ'],\n  ['A', '𝑨𝔄ᗄ𝖠𝗔ꓯ𝞐🄐🄰Ꭿ𐊠𝕬𝜜𝐴ꓮᎪ𝚨ꭺ𝝖🅐Å∀🇦₳🅰𝒜𝘈𝐀𝔸дǺᗅⒶＡΑᾋᗩĂÃÅǍȀȂĀȺĄʌΛλƛᴀᴬДАልÄₐᕱªǞӒΆẠẢẦẨẬẮẰẲẴẶᾸᾹᾺΆᾼᾈᾉᾊᾌᾍᾎᾏἈἉἊἋἌἍἎἏḀȦǠӐÀÁÂẤẪ𝛢𝓐𝙰𝘼ᗩ'],\n  ['a', '∂⍺ⓐձǟᵃᶏ⒜аɒａαȃȁคǎმäɑāɐąᾄẚạảǡầẵḁȧӑӓãåάὰάăẩằẳặᾀᾁᾂᾃᾅᾆᾰᾱᾲᾳᾴᶐᾶᾷἀἁἂἃἄἅἆἇᾇậắàáâấẫǻⱥ𝐚𝑎𝒂𝒶𝓪𝔞𝕒𝖆𝖺𝗮𝘢𝙖𝚊𝛂𝛼𝜶𝝰𝞪⍶'],\n  ['B', '🄑𝔙𝖁ꞵ𝛃𝛽𝜷𝝱𝞫Ᏸ𐌁𝑩𝕭🄱𐊡𝖡𝘽ꓐ𝗕𝘉𝜝𐊂𝚩𝐁𝛣𝝗𝐵𝙱𝔹Ᏼᏼ𝞑Ꞵ𝔅🅑฿𝓑ᗿᗾᗽ🅱ⒷＢвϐᗷƁ乃ßცჩ๖βɮБՅ๒ᙖʙᴮᵇጌḄℬΒВẞḂḆɃദᗹᗸᵝᙞᙟᙝᛒᙗᙘᴃ🇧'],\n  ['b', 'ꮟᏏ𝐛𝘣𝒷𝔟𝓫𝖇𝖻𝑏𝙗𝕓𝒃𝗯𝚋♭ᑳᒈｂᖚᕹᕺⓑḃḅҍъḇƃɓƅᖯƄЬᑲþƂ⒝ЪᶀᑿᒀᒂᒁᑾьƀҌѢѣᔎ'],\n  ['C', 'ꞆႠ℃🄒ᏟⲤ🄲ꓚ𐊢𐌂🅲𐐕🅒☾ČÇⒸＣↃƇᑕㄈ¢८↻ĈϾՇȻᙅᶜ⒞ĆҀĊ©टƆℂℭϹС匚ḈҪʗᑖᑡᑢᑣᑤᑥⅭ𝐂𝐶𝑪𝒞𝓒𝕮𝖢𝗖𝘊𝘾ᔍ'],\n  ['c', '🝌ｃⅽ𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌ᴄϲⲥсꮯ𐐽ⲥ𐐽ꮯĉｃⓒćčċçҁƈḉȼↄсርᴄϲҫ꒝ςɽϛ𝙲ᑦ᧚𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌₵🇨ᥴᒼⅽ'],\n  ['D', '🄓Ꭰ🄳𝔡𝖉𝔻𝗗𝘋𝙳𝐷𝓓𝐃𝑫𝕯𝖣𝔇𝘿ꭰⅅ𝒟ꓓ🅳🅓ⒹＤƉᗪƊÐԺᴅᴰↁḊĐÞⅮᗞᑯĎḌḐḒḎᗫᗬᗟᗠᶛᴆ🇩'],\n  ['d', 'Ꮷ𝔡𝖉ᑯꓒ𝓭ᵭ₫ԃⓓｄḋďḍḑḓḏđƌɖɗᵈ⒟ԁⅾᶁԀᑺᑻᑼᑽᒄᑰᑱᶑ𝕕𝖽𝑑𝘥𝒅𝙙𝐝𝗱𝚍ⅆ𝒹ʠժ'],\n  ['E', '£ᙓ⋿∃ⴺꓱ𝐄𝐸𝔈𝕰𝖤𝘌𝙴𝛦𝜠ꭼ🄔🄴𝙀𝔼𐊆𝚬ꓰ𝝚𝞔𝓔𝑬𝗘🅴🅔ⒺΈＥƎἝᕮƐモЄᴇᴱᵉÉ乇ЁɆꂅ€ÈℰΕЕⴹᎬĒĔĖĘĚÊËԐỀẾỄỂẼḔḖẺȄȆẸỆȨḜḘḚἘἙἚἛἜῈΈӖὲέЀϵ🇪'],\n  ['e', 'əәⅇꬲꞓ⋴𝛆𝛜𝜀𝜖𝜺𝝐𝝴𝞊𝞮𝟄ⲉꮛ𐐩ꞒⲈ⍷𝑒𝓮𝕖𝖊𝘦𝗲𝚎𝙚𝒆𝔢𝖾𝐞Ҿҿⓔｅ⒠èᧉéᶒêɘἔềếễ૯ǝєεēҽɛểẽḕḗĕėëẻěȅȇẹệȩɇₑęḝḙḛ℮еԑѐӗᥱёἐἑἒἓἕℯ'],\n  ['F', 'ᖵꘘꓞꟻᖷ𝐅𝐹𝑭𝔽𝕱𝖥𝗙𝙁𝙵𝟊℉🄕🄵𐊇𝔉𝘍𐊥ꓝꞘ🅵🅕𝓕ⒻＦғҒᖴƑԲϝቻḞℱϜ₣🇫Ⅎ'],\n  ['f', '𝐟ᵮ𝑓𝒇𝒻𝓯𝔣𝕗𝖿𝗳𝙛𝚏ꬵꞙẝ𝖋ⓕｆƒḟʃբᶠ⒡ſꊰʄ∱ᶂ𝘧'],\n  ['G', '𝗚𝘎🄖ꓖᏳ🄶Ꮐᏻ𝔾𝓖𝑮𝕲ꮐ𝒢𝙂𝖦𝙶𝔊𝐺𝐆🅶🅖ⒼＧɢƓʛĢᘜᴳǴĠԌĜḠĞǦǤԍ₲🇬⅁'],\n  ['g', 'ᶃᶢⓖｇǵĝḡğġǧģց૭ǥɠﻭﻮᵍ⒢ℊɡᧁ𝐠𝑔𝒈𝓰𝔤𝕘𝖌𝗀𝗴𝘨𝙜𝚐'],\n  ['H', 'Ἤ🄗𝆦🄷𝜢ꓧ𝘏𝐻𝝜𝖧𐋏𝗛ꮋℍᎻℌⲎ𝑯𝞖🅷🅗ዞǶԋⒽＨĤᚺḢḦȞḤḨḪĦⱧҢңҤῊΉῌἨἩἪἫἭἮἯᾘᾙᾚᾛᾜᾝᾞᾟӉӈҥΉн卄♓𝓗ℋН𝐇𝙃𝙷ʜ𝛨Η𝚮ᕼӇᴴᵸ🇭'],\n  ['h', 'ꞕ৸𝕳ꚕᏲℏӊԊꜧᏂҺ⒣ђⓗｈĥḣḧȟḥḩḫẖħⱨհһከኩኪካɦℎ𝐡𝒉𝒽𝓱𝔥𝕙𝖍𝗁𝗵𝘩𝙝𝚑իʰᑋᗁɧんɥ'],\n  ['I', 'ⲒἿ🄘🄸ЇꀤᏆ🅸🅘إﺇٳأﺃٲٵⒾＩ៸ÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗェエῘῙῚΊἸἹἺἻἼἽἾⅠΪΊɪᶦᑊᥣ𝛪𝐈𝙄𝙸𝓵𝙡𝐼ᴵ𝚰𝑰🇮'],\n  ['i', '⍳ℹⅈ𝑖𝒊𝒾ı𝚤ɩιιͺ𝛊𝜄𝜾𝞲ꙇӏꭵᎥⓘｉìíîĩīĭïḯỉǐȉȋịḭῐῑῒΐῖῗἰἱἲⅰⅼ∣ⵏ￨׀ا١۱ߊᛁἳἴἵɨіὶίᶖ𝔦𝚒𝝸𝗂𝐢𝕚𝖎𝗶𝘪𝙞ίⁱᵢ𝓲⒤'],\n  ['J', '𝐉𝐽𝑱𝒥𝓙𝔍𝕁𝕵𝖩𝗝𝘑𝙅𝙹ꞲͿꓙ🄙🄹🅹🅙ⒿＪЈʝᒍנﾌĴʆวلյʖᴊᴶﻝጋɈⱼՂๅႱįᎫȷ丿ℐℑᒘᒙᒚᒛᒴᒵᒎᒏ🇯'],\n  ['j', '𝚥ꭻⅉⓙｊϳʲ⒥ɉĵǰјڶᶨ𝒿𝘫𝗷𝑗𝙟𝔧𝒋𝗃𝓳𝕛𝚓𝖏𝐣'],\n  ['K', '𝐊ꝄꝀ𝐾𝑲𝓚𝕶𝖪𝙺𝚱𝝟🄚𝗞🄺𝜥𝘒ꓗ𝙆𝕂Ⲕ𝔎𝛫Ꮶ𝞙𝒦🅺🅚₭ⓀＫĸḰќƘкҠκқҟӄʞҚКҡᴋᴷᵏ⒦ᛕЌጕḲΚKҜҝҞĶḴǨⱩϗӃ🇰'],\n  ['k', 'ⓚꝁｋḱǩḳķḵƙⱪᶄ𝐤𝘬𝗄𝕜𝜅𝜘𝜿𝝒𝝹𝞌𝞳𝙠𝚔𝑘𝒌ϰ𝛋𝛞𝟆𝗸𝓴𝓀'],\n  ['L', '𝐋𝐿𝔏𝕃𝕷𝖫𝗟𝘓𝙇ﴼ🄛🄻𐐛Ⳑ𝑳𝙻𐑃𝓛ⳑꮮᏞꓡ🅻🅛ﺈ└ⓁւＬĿᒪ乚ՆʟꓶιԼᴸˡĹረḶₗΓլĻᄂⅬℒⱢᥧᥨᒻᒶᒷᶫﺎᒺᒹᒸᒫ⎳ㄥŁⱠﺄȽ🇱'],\n  ['l', 'ⓛｌŀĺľḷḹļӀℓḽḻłﾚɭƚɫⱡ|Ɩ⒧ʅǀוןΙІ｜ᶩӏ𝓘𝕀𝖨𝗜𝘐𝐥𝑙𝒍𝓁𝔩𝕝𝖑𝗅𝗹𝘭𝚕𝜤𝝞ı𝚤ɩι𝛊𝜄𝜾𝞲'],\n  ['M', 'ꮇ🄜🄼𐌑𐊰ꓟⲘᎷ🅼🅜ⓂＭмṂ൱ᗰ州ᘻო๓♏ʍᙏᴍᴹᵐ⒨ḾМṀ௱ⅯℳΜϺᛖӍӎ𝐌𝑀𝑴𝓜𝔐𝕄𝕸𝖬𝗠𝘔𝙈𝙼𝚳𝛭𝜧𝝡𝞛🇲'],\n  ['m', '₥ᵯ𝖒𝐦𝗆𝔪𝕞𝓂ⓜｍനᙢ൩ḿṁⅿϻṃጠɱ៳ᶆ𝙢𝓶𝚖𝑚𝗺᧕᧗'],\n  ['N', '𝇙𝇚𝇜🄝𝆧𝙉🄽ℕꓠ𝛮𝝢𝙽𝚴𝑵𝑁Ⲛ𝐍𝒩𝞜𝗡𝘕𝜨𝓝𝖭🅽₦🅝ЙЍⓃҋ៷ＮᴎɴƝᑎ几иՈռИהЛπᴺᶰŃ刀ክṄⁿÑПΝᴨոϖǸŇṆŅṊṈทŊӢӣӤӥћѝйᥢҊᴻ🇳'],\n  ['n', 'ոռח𝒏𝓷𝙣𝑛𝖓𝔫𝗇𝚗𝗻ᥒⓝήｎǹᴒńñᾗηṅňṇɲņṋṉղຖՌƞŋ⒩ภกɳпŉлԉȠἠἡῃդᾐᾑᾒᾓᾔᾕᾖῄῆῇῂἢἣἤἥἦἧὴήበቡቢባቤብቦȵ𝛈𝜂𝜼𝝶𝞰𝕟𝘯𝐧𝓃ᶇᵰᥥ∩'],\n  [\n    'O',\n    // eslint-disable-next-line max-len\n    '𝜽⭘🔿ꭴ⭕⏺🄁🄀Ꭴ𝚯𝚹𝛩𝛳𝜣𝜭𝝝𝝧𝞗𝞡ⴱᎾᏫ⍬𝞱𝝷𝛉𝟎𝜃θ𝟘𝑂𝑶𝓞𝔒𝕆𝕺𝗢𝘖𝙊𝛰㈇ꄲ🄞🔾🄾𐊒𝟬ꓳⲞ𐐄𐊫𐓂𝞞🅞⍥◯ⵁ⊖０⊝𝝤Ѳϴ𝚶𝜪ѺӦӨӪΌʘ𝐎ǑÒŎÓÔÕȌȎㇿ❍ⓄＯὋロ❤૦⊕ØФԾΘƠᴼᵒ⒪ŐÖₒ¤◊Φ〇ΟОՕଠഠ௦סỒỐỖỔṌȬṎŌṐṒȮȰȪỎỜỚỠỞỢỌỘǪǬǾƟⵔ߀៰⍜⎔⎕⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧀⧁⧂⧃ὈὉὊὌὍ',\n  ],\n  [\n    'o',\n    // eslint-disable-next-line max-len\n    'ంಂംං૦௦۵ℴ𝑜𝒐𝖔ꬽ𝝄𝛔𝜎𝝈𝞂ჿ𝚘০୦ዐ𝛐𝗈𝞼ဝⲟ𝙤၀𐐬𝔬𐓪𝓸🇴⍤○ϙ🅾𝒪𝖮𝟢𝟶𝙾𝘰𝗼𝕠𝜊𝐨𝝾𝞸ᐤⓞѳ᧐ᥲðｏఠᦞՓòөӧóºōôǒȏŏồốȍỗổõσṍȭṏὄṑṓȯȫ๏ᴏőöѻоዐǭȱ০୦٥౦೦൦๐໐οօᴑ०੦ỏơờớỡởợọộǫøǿɵծὀὁόὸόὂὃὅ',\n  ],\n  ['P', '🄟🄿ꓑ𝚸𝙿𝞠𝙋ꮲⲢ𝒫𝝦𝑃𝑷𝗣𝐏𐊕𝜬𝘗𝓟𝖯𝛲Ꮲ🅟Ҏ🅿ⓅＰƤᑭ尸Ṗրφքᴘᴾᵖ⒫ṔｱקРየᴩⱣℙΡῬᑸᑶᑷᑹᑬᑮ🇵₱'],\n  ['p', 'ⲣҏ℗ⓟｐṕṗƥᵽῥρрƿǷῤ⍴𝓹𝓅𝐩𝑝𝒑𝔭𝕡𝖕𝗉𝗽𝘱𝙥𝚙𝛒𝝆𝞺𝜌𝞀'],\n  ['Q', '🅀🄠Ꝗ🆀🅠ⓆＱℚⵕԚ𝐐𝑄𝑸𝒬𝓠𝚀𝘘𝙌𝖰𝕼𝔔𝗤🇶'],\n  ['q', '𝓆ꝗ𝗾ⓠｑգ⒬۹զᑫɋɊԛ𝗊𝑞𝘲𝕢𝚚𝒒𝖖𝐪𝔮𝓺𝙦'],\n  ['R', '℞🄡℟ꭱᏒ𐒴ꮢᎡꓣ🆁🅡ⓇＲᴙȒʀᖇя尺ŔЯરƦᴿዪṚɌʁℛℜℝṘŘȐṜŖṞⱤ𝐑𝑅𝑹𝓡𝕽𝖱𝗥𝘙𝙍𝚁ᚱ🇷ᴚ'],\n  ['r', '𝚛ꭇᣴℾ𝚪𝛤𝜞𝝘𝞒ⲄГᎱᒥꭈⲅꮁⓡｒŕṙřȑȓṛṝŗгՐɾᥬṟɍʳ⒭ɼѓᴦᶉ𝐫𝑟𝒓𝓇𝓻𝔯𝕣𝖗𝗋𝗿𝘳𝙧ᵲґᵣ'],\n  ['S', '🅂🄪🄢ꇙ𝓢𝗦Ꮪ𝒮Ꮥ𝚂𝐒ꓢ𝖲𝔖𝙎𐊖𝕾𐐠𝘚𝕊𝑆𝑺🆂🅢ⓈＳṨŞֆՏȘˢ⒮ЅṠŠŚṤŜṦṢടᔕᔖᔢᔡᔣᔤ'],\n  ['s', 'ᣵⓢꜱ𐑈ꮪｓśṥŝṡšṧʂṣṩѕşșȿᶊక𝐬𝑠𝒔𝓈𝓼𝔰𝕤𝖘𝗌𝘀𝘴𝙨𝚜ގ🇸'],\n  ['T', '🅃🄣七ፒ𝜯🆃𐌕𝚻𝛵𝕋𝕿𝑻𐊱𐊗𝖳𝙏🝨𝝩𝞣𝚃𝘛𝑇ꓔ⟙𝐓Ⲧ𝗧⊤𝔗Ꭲꭲ𝒯🅣⏇⏉ⓉＴтҬҭƬイŦԵτᴛᵀｲፕϮŤ⊥ƮΤТ下ṪṬȚŢṰṮ丅丁ᐪ𝛕𝜏𝝉𝞃𝞽𝓣ㄒ🇹ጥ'],\n  ['t', 'ⓣｔṫẗťṭțȶ੮էʇ†ţṱṯƭŧᵗ⒯ʈեƫ𝐭𝑡𝒕𝓉𝓽𝔱𝕥𝖙𝗍𝘁𝘵𝙩𝚝ナ'],\n  ['U', '🅄Џ🄤ሀꓴ𐓎꒤🆄🅤ŨŬŮᑗᑘǓǕǗǙⓊＵȖᑌ凵ƱմԱꓵЦŪՄƲᙀᵁᵘ⒰ŰપÜՍÙÚÛṸṺǛỦȔƯỪỨỮỬỰỤṲŲṶṴɄᥩᑧ∪ᘮ⋃𝐔𝑈𝑼𝒰𝓤𝔘𝕌𝖀𝖴𝗨𝘜𝙐𝚄🇺'],\n  ['u', '𝘂𝘶𝙪𝚞ꞟꭎꭒ𝛖𝜐𝝊𝞄𝞾𐓶ὺύⓤｕùũūừṷṹŭǖữᥙǚǜὗυΰนսʊǘǔúůᴜűųยûṻцሁüᵾᵤµʋủȕȗưứửựụṳṵʉῠῡῢΰῦῧὐὑϋύὒὓὔὕὖᥔ𝐮𝑢𝒖𝓊𝓾𝔲𝕦𝖚𝗎ᶙ'],\n  ['V', '𝑉𝒱𝕍𝗩🄥🅅ꓦ𝑽𝖵𝘝Ꮩ𝚅𝙑𝐕🆅🅥ⓋＶᐯѴᵛ⒱۷ṾⅴⅤṼ٧ⴸѶᐺᐻ🇻𝓥'],\n  ['v', '∨⌄⋁ⅴ𝐯𝑣𝒗𝓋𝔳𝕧𝖛𝗏ꮩሀⓥｖ𝜐𝝊ṽṿ౮งѵעᴠνטᵥѷ៴ᘁ𝙫𝚟𝛎𝜈𝝂𝝼𝞶𝘷𝘃𝓿'],\n  ['W', '𝐖𝑊𝓦𝔚𝕎𝖂𝖶𝗪𝙒𝚆🄦🅆ᏔᎳ𝑾ꓪ𝒲𝘞🆆Ⓦ🅦ｗＷẂᾧᗯᥕ山ѠຟచաЩШώщฬшᙎᵂʷ⒲ฝሠẄԜẀŴẆẈധᘺѿᙡƜ₩🇼'],\n  ['w', '𝐰ꝡ𝑤𝒘𝓌𝔀𝔴𝕨𝖜𝗐𝘄𝘸𝙬𝚠աẁꮃẃⓦ⍵ŵẇẅẘẉⱳὼὠὡὢὣωὤὥὦὧῲῳῴῶῷⱲѡԝᴡώᾠᾡᾢᾣᾤᾥᾦɯ𝝕𝟉𝞏'],\n  ['X', 'ꭓꭕ𝛘𝜒𝝌𝞆𝟀ⲭ🞨𝑿𝛸🄧🞩🞪🅇🞫🞬𐌗Ⲭꓫ𝖃𝞦𝘟𐊐𝚾𝝬𝜲Ꭓ𐌢𝖷𝑋𝕏𝔛𐊴𝗫🆇🅧❌Ⓧ𝓧ＸẊ᙭χㄨ𝒳ӾჯӼҳЖΧҲᵡˣ⒳אሸẌꊼⅩХ╳᙮ᕁᕽⅹᚷⵝ𝙓𝚇乂𝐗🇽'],\n  ['x', '᙮ⅹ𝑥𝒙𝓍𝔵𝕩𝖝𝗑𝘅ᕁᕽⓧｘхẋ×ₓ⤫⤬⨯ẍᶍ𝙭ӽ𝘹𝐱𝚡⨰ﾒ𝔁'],\n  ['Y', '𝒴🄨𝓨𝔜𝖄𝖸𝘠𝙔𝚼𝛶𝝪𝞤УᎩᎽⲨ𝚈𝑌𝗬𝐘ꓬ𝒀𝜰𐊲🆈🅨ⓎＹὛƳㄚʏ⅄ϔ￥¥ՎϓγץӲЧЎሃŸɎϤΥϒҮỲÝŶỸȲẎỶỴῨῩῪΎὙὝὟΫΎӮӰҰұ𝕐🇾'],\n  ['y', '𝐲𝑦𝒚𝓎𝔂𝔶𝕪𝖞𝗒𝘆𝘺𝙮𝚢ʏỿꭚγℽ𝛄𝛾𝜸𝝲𝞬🅈ᎽᎩⓨｙỳýŷỹȳẏÿỷуყẙỵƴɏᵞɣʸᶌү⒴ӳӱӯўУʎ'],\n  ['Z', '🄩🅉ꓜ𝗭𝐙☡Ꮓ𝘡🆉🅩ⓏＺẔƵ乙ẐȤᶻ⒵ŹℤΖŻŽẒⱫ🇿'],\n  ['z', '𝑍𝒁𝒵𝓩𝖹𝙕𝚉𝚭𝛧𝜡𝝛𝞕ᵶꮓ𝐳𝑧𝒛𝓏𝔃𝔷𝕫𝖟𝗓𝘇𝘻𝙯𝚣ⓩｚźẑżžẓẕƶȥɀᴢጊʐⱬᶎʑᙆ'],\n]);\n","// Original repo: https://github.com/gc/confusables\n\nimport { checkLNP, clean } from './util';\nimport { characters } from './characters';\n\nconst alphabetMap = new Map<string, string[]>();\nconst confusablesMap = new Map<string, string>();\n\nfor (const [base, alts] of characters.entries()) {\n  alphabetMap.set(base, [...alts]);\n\n  for (const char of alts) {\n    confusablesMap.set(char, base);\n  }\n}\n\nexport function cleanText(str: string) {\n  if (checkLNP(str)) return str;\n\n  let newStr = '';\n\n  for (const char of clean(str)) {\n    newStr += confusablesMap.get(char) || char;\n  }\n\n  return newStr;\n}\n","/* eslint-disable max-len, no-misleading-character-class, no-control-regex, operator-linebreak */\n/** @copyright Mathias Bynens <https://mathiasbynens.be/>. MIT license. */\nconst RE_SYMBOL_WITH_COMBINING_MARKS =\n  /([\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])([\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F]+)/g;\n/** @copyright Mathias Bynens <https://mathiasbynens.be/>. MIT license. */\nconst RE_LINEBREAK_COMBINING_MARKS =\n  /[\\0-\\x08\\x0E-\\x1F\\x7F-\\x84\\x86-\\x9F\\u0300-\\u034E\\u0350-\\u035B\\u0363-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u061C\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D4-\\u08E1\\u08E3-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u1A17-\\u1A1B\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFB-\\u1DFF\\u200C\\u200E\\u200F\\u202A-\\u202E\\u2066-\\u206F\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3035\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C5\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFFF9-\\uFFFB]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDDCA-\\uDDCC\\uDE2C-\\uDE37\\uDE3E\\uDEDF-\\uDEEA\\uDF00-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC35-\\uDC46\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDDDC\\uDDDD\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD807[\\uDC2F-\\uDC36\\uDC38-\\uDC3F\\uDC92-\\uDCA7\\uDCA9-\\uDCB6]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E\\uDCA0-\\uDCA3]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uDB40[\\uDC01\\uDC20-\\uDC7F\\uDD00-\\uDDEF]/g;\nconst RE_SPACE_CHARS = /[\\n\\r]/g;\nconst RE_FAKE_DOTS = /[\\u0702\\u0701\\u2024\\u00B7\\u02D9\\u0971\\u1427\\u18DF\\u22C5\\u2027]/g;\nconst RE_EMPTY_CHARS = /[\\u200B-\\u200D\\uFEFF\\u2063]/g;\n/* eslint-enable max-len, no-misleading-character-class, no-control-regex, operator-linebreak */\n\n/** Skippable characters that are not confusables */\nexport const checkLNPRegex = /^(?:[~`!@#%^&*(){}[\\];:\"'<,.>?/\\\\|_+=-]|[a-zA-Z0-9\\s])+$/;\n\nexport function checkLNP(str: string) {\n  return checkLNPRegex.test(str);\n}\n\n/**\n * Utility function to call 2 other functions which remove Combining Marks/Invisible characters\n * @param str The text to clean.\n */\nexport function clean(str: string) {\n  return str\n    .replace(RE_LINEBREAK_COMBINING_MARKS, '')\n    .replace(RE_SYMBOL_WITH_COMBINING_MARKS, '$1')\n    .replace(RE_SPACE_CHARS, ' ')\n    .replace(RE_FAKE_DOTS, '.')\n    .replace(RE_EMPTY_CHARS, '');\n}\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.4, Tue May 30 2023\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Dexie = factory());\n})(this, (function () { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    var __assign = function() {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __spreadArray(to, from, pack) {\n        if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n            if (ar || !(i in from)) {\n                if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n                ar[i] = from[i];\n            }\n        }\n        return to.concat(ar || Array.prototype.slice.call(from));\n    }\n\n    var _global = typeof globalThis !== 'undefined' ? globalThis :\n        typeof self !== 'undefined' ? self :\n            typeof window !== 'undefined' ? window :\n                global;\n\n    var keys = Object.keys;\n    var isArray = Array.isArray;\n    if (typeof Promise !== 'undefined' && !_global.Promise) {\n        _global.Promise = Promise;\n    }\n    function extend(obj, extension) {\n        if (typeof extension !== 'object')\n            return obj;\n        keys(extension).forEach(function (key) {\n            obj[key] = extension[key];\n        });\n        return obj;\n    }\n    var getProto = Object.getPrototypeOf;\n    var _hasOwn = {}.hasOwnProperty;\n    function hasOwn(obj, prop) {\n        return _hasOwn.call(obj, prop);\n    }\n    function props(proto, extension) {\n        if (typeof extension === 'function')\n            extension = extension(getProto(proto));\n        (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n            setProp(proto, key, extension[key]);\n        });\n    }\n    var defineProperty = Object.defineProperty;\n    function setProp(obj, prop, functionOrGetSet, options) {\n        defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n            { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n            { value: functionOrGetSet, configurable: true, writable: true }, options));\n    }\n    function derive(Child) {\n        return {\n            from: function (Parent) {\n                Child.prototype = Object.create(Parent.prototype);\n                setProp(Child.prototype, \"constructor\", Child);\n                return {\n                    extend: props.bind(null, Child.prototype)\n                };\n            }\n        };\n    }\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    function getPropertyDescriptor(obj, prop) {\n        var pd = getOwnPropertyDescriptor(obj, prop);\n        var proto;\n        return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n    }\n    var _slice = [].slice;\n    function slice(args, start, end) {\n        return _slice.call(args, start, end);\n    }\n    function override(origFunc, overridedFactory) {\n        return overridedFactory(origFunc);\n    }\n    function assert(b) {\n        if (!b)\n            throw new Error(\"Assertion Failed\");\n    }\n    function asap$1(fn) {\n        if (_global.setImmediate)\n            setImmediate(fn);\n        else\n            setTimeout(fn, 0);\n    }\n    function arrayToObject(array, extractor) {\n        return array.reduce(function (result, item, i) {\n            var nameAndValue = extractor(item, i);\n            if (nameAndValue)\n                result[nameAndValue[0]] = nameAndValue[1];\n            return result;\n        }, {});\n    }\n    function tryCatch(fn, onerror, args) {\n        try {\n            fn.apply(null, args);\n        }\n        catch (ex) {\n            onerror && onerror(ex);\n        }\n    }\n    function getByKeyPath(obj, keyPath) {\n        if (hasOwn(obj, keyPath))\n            return obj[keyPath];\n        if (!keyPath)\n            return obj;\n        if (typeof keyPath !== 'string') {\n            var rv = [];\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                var val = getByKeyPath(obj, keyPath[i]);\n                rv.push(val);\n            }\n            return rv;\n        }\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var innerObj = obj[keyPath.substr(0, period)];\n            return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n        }\n        return undefined;\n    }\n    function setByKeyPath(obj, keyPath, value) {\n        if (!obj || keyPath === undefined)\n            return;\n        if ('isFrozen' in Object && Object.isFrozen(obj))\n            return;\n        if (typeof keyPath !== 'string' && 'length' in keyPath) {\n            assert(typeof value !== 'string' && 'length' in value);\n            for (var i = 0, l = keyPath.length; i < l; ++i) {\n                setByKeyPath(obj, keyPath[i], value[i]);\n            }\n        }\n        else {\n            var period = keyPath.indexOf('.');\n            if (period !== -1) {\n                var currentKeyPath = keyPath.substr(0, period);\n                var remainingKeyPath = keyPath.substr(period + 1);\n                if (remainingKeyPath === \"\")\n                    if (value === undefined) {\n                        if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                            obj.splice(currentKeyPath, 1);\n                        else\n                            delete obj[currentKeyPath];\n                    }\n                    else\n                        obj[currentKeyPath] = value;\n                else {\n                    var innerObj = obj[currentKeyPath];\n                    if (!innerObj || !hasOwn(obj, currentKeyPath))\n                        innerObj = (obj[currentKeyPath] = {});\n                    setByKeyPath(innerObj, remainingKeyPath, value);\n                }\n            }\n            else {\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                        obj.splice(keyPath, 1);\n                    else\n                        delete obj[keyPath];\n                }\n                else\n                    obj[keyPath] = value;\n            }\n        }\n    }\n    function delByKeyPath(obj, keyPath) {\n        if (typeof keyPath === 'string')\n            setByKeyPath(obj, keyPath, undefined);\n        else if ('length' in keyPath)\n            [].map.call(keyPath, function (kp) {\n                setByKeyPath(obj, kp, undefined);\n            });\n    }\n    function shallowClone(obj) {\n        var rv = {};\n        for (var m in obj) {\n            if (hasOwn(obj, m))\n                rv[m] = obj[m];\n        }\n        return rv;\n    }\n    var concat = [].concat;\n    function flatten(a) {\n        return concat.apply([], a);\n    }\n    var intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n        .split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\n    var intrinsicTypes = intrinsicTypeNames.map(function (t) { return _global[t]; });\n    arrayToObject(intrinsicTypeNames, function (x) { return [x, true]; });\n    var circularRefs = null;\n    function deepClone(any) {\n        circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n        var rv = innerDeepClone(any);\n        circularRefs = null;\n        return rv;\n    }\n    function innerDeepClone(any) {\n        if (!any || typeof any !== 'object')\n            return any;\n        var rv = circularRefs && circularRefs.get(any);\n        if (rv)\n            return rv;\n        if (isArray(any)) {\n            rv = [];\n            circularRefs && circularRefs.set(any, rv);\n            for (var i = 0, l = any.length; i < l; ++i) {\n                rv.push(innerDeepClone(any[i]));\n            }\n        }\n        else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n            rv = any;\n        }\n        else {\n            var proto = getProto(any);\n            rv = proto === Object.prototype ? {} : Object.create(proto);\n            circularRefs && circularRefs.set(any, rv);\n            for (var prop in any) {\n                if (hasOwn(any, prop)) {\n                    rv[prop] = innerDeepClone(any[prop]);\n                }\n            }\n        }\n        return rv;\n    }\n    var toString = {}.toString;\n    function toStringTag(o) {\n        return toString.call(o).slice(8, -1);\n    }\n    var iteratorSymbol = typeof Symbol !== 'undefined' ?\n        Symbol.iterator :\n        '@@iterator';\n    var getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n        var i;\n        return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n    } : function () { return null; };\n    var NO_CHAR_ARRAY = {};\n    function getArrayOf(arrayLike) {\n        var i, a, x, it;\n        if (arguments.length === 1) {\n            if (isArray(arrayLike))\n                return arrayLike.slice();\n            if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n                return [arrayLike];\n            if ((it = getIteratorOf(arrayLike))) {\n                a = [];\n                while ((x = it.next()), !x.done)\n                    a.push(x.value);\n                return a;\n            }\n            if (arrayLike == null)\n                return [arrayLike];\n            i = arrayLike.length;\n            if (typeof i === 'number') {\n                a = new Array(i);\n                while (i--)\n                    a[i] = arrayLike[i];\n                return a;\n            }\n            return [arrayLike];\n        }\n        i = arguments.length;\n        a = new Array(i);\n        while (i--)\n            a[i] = arguments[i];\n        return a;\n    }\n    var isAsyncFunction = typeof Symbol !== 'undefined'\n        ? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n        : function () { return false; };\n\n    var debug = typeof location !== 'undefined' &&\n        /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\n    function setDebug(value, filter) {\n        debug = value;\n        libraryFilter = filter;\n    }\n    var libraryFilter = function () { return true; };\n    var NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\n    function getErrorWithStack() {\n        if (NEEDS_THROW_FOR_STACK)\n            try {\n                getErrorWithStack.arguments;\n                throw new Error();\n            }\n            catch (e) {\n                return e;\n            }\n        return new Error();\n    }\n    function prettyStack(exception, numIgnoredFrames) {\n        var stack = exception.stack;\n        if (!stack)\n            return \"\";\n        numIgnoredFrames = (numIgnoredFrames || 0);\n        if (stack.indexOf(exception.name) === 0)\n            numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n        return stack.split('\\n')\n            .slice(numIgnoredFrames)\n            .filter(libraryFilter)\n            .map(function (frame) { return \"\\n\" + frame; })\n            .join('');\n    }\n\n    var dexieErrorNames = [\n        'Modify',\n        'Bulk',\n        'OpenFailed',\n        'VersionChange',\n        'Schema',\n        'Upgrade',\n        'InvalidTable',\n        'MissingAPI',\n        'NoSuchDatabase',\n        'InvalidArgument',\n        'SubTransaction',\n        'Unsupported',\n        'Internal',\n        'DatabaseClosed',\n        'PrematureCommit',\n        'ForeignAwait'\n    ];\n    var idbDomErrorNames = [\n        'Unknown',\n        'Constraint',\n        'Data',\n        'TransactionInactive',\n        'ReadOnly',\n        'Version',\n        'NotFound',\n        'InvalidState',\n        'InvalidAccess',\n        'Abort',\n        'Timeout',\n        'QuotaExceeded',\n        'Syntax',\n        'DataClone'\n    ];\n    var errorList = dexieErrorNames.concat(idbDomErrorNames);\n    var defaultTexts = {\n        VersionChanged: \"Database version changed by other database connection\",\n        DatabaseClosed: \"Database has been closed\",\n        Abort: \"Transaction aborted\",\n        TransactionInactive: \"Transaction has already completed or failed\",\n        MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n    };\n    function DexieError(name, msg) {\n        this._e = getErrorWithStack();\n        this.name = name;\n        this.message = msg;\n    }\n    derive(DexieError).from(Error).extend({\n        stack: {\n            get: function () {\n                return this._stack ||\n                    (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n            }\n        },\n        toString: function () { return this.name + \": \" + this.message; }\n    });\n    function getMultiErrorMessage(msg, failures) {\n        return msg + \". Errors: \" + Object.keys(failures)\n            .map(function (key) { return failures[key].toString(); })\n            .filter(function (v, i, s) { return s.indexOf(v) === i; })\n            .join('\\n');\n    }\n    function ModifyError(msg, failures, successCount, failedKeys) {\n        this._e = getErrorWithStack();\n        this.failures = failures;\n        this.failedKeys = failedKeys;\n        this.successCount = successCount;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(ModifyError).from(DexieError);\n    function BulkError(msg, failures) {\n        this._e = getErrorWithStack();\n        this.name = \"BulkError\";\n        this.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n        this.failuresByPos = failures;\n        this.message = getMultiErrorMessage(msg, failures);\n    }\n    derive(BulkError).from(DexieError);\n    var errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\n    var BaseException = DexieError;\n    var exceptions = errorList.reduce(function (obj, name) {\n        var fullName = name + \"Error\";\n        function DexieError(msgOrInner, inner) {\n            this._e = getErrorWithStack();\n            this.name = fullName;\n            if (!msgOrInner) {\n                this.message = defaultTexts[name] || fullName;\n                this.inner = null;\n            }\n            else if (typeof msgOrInner === 'string') {\n                this.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n                this.inner = inner || null;\n            }\n            else if (typeof msgOrInner === 'object') {\n                this.message = msgOrInner.name + \" \" + msgOrInner.message;\n                this.inner = msgOrInner;\n            }\n        }\n        derive(DexieError).from(BaseException);\n        obj[name] = DexieError;\n        return obj;\n    }, {});\n    exceptions.Syntax = SyntaxError;\n    exceptions.Type = TypeError;\n    exceptions.Range = RangeError;\n    var exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n        obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    function mapError(domError, message) {\n        if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n            return domError;\n        var rv = new exceptionMap[domError.name](message || domError.message, domError);\n        if (\"stack\" in domError) {\n            setProp(rv, \"stack\", { get: function () {\n                    return this.inner.stack;\n                } });\n        }\n        return rv;\n    }\n    var fullNameExceptions = errorList.reduce(function (obj, name) {\n        if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n            obj[name + \"Error\"] = exceptions[name];\n        return obj;\n    }, {});\n    fullNameExceptions.ModifyError = ModifyError;\n    fullNameExceptions.DexieError = DexieError;\n    fullNameExceptions.BulkError = BulkError;\n\n    function nop() { }\n    function mirror(val) { return val; }\n    function pureFunctionChain(f1, f2) {\n        if (f1 == null || f1 === mirror)\n            return f2;\n        return function (val) {\n            return f2(f1(val));\n        };\n    }\n    function callBoth(on1, on2) {\n        return function () {\n            on1.apply(this, arguments);\n            on2.apply(this, arguments);\n        };\n    }\n    function hookCreatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res !== undefined)\n                arguments[0] = res;\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res2 !== undefined ? res2 : res;\n        };\n    }\n    function hookDeletingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            f1.apply(this, arguments);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = this.onerror = null;\n            f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        };\n    }\n    function hookUpdatingChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function (modifications) {\n            var res = f1.apply(this, arguments);\n            extend(modifications, res);\n            var onsuccess = this.onsuccess,\n            onerror = this.onerror;\n            this.onsuccess = null;\n            this.onerror = null;\n            var res2 = f2.apply(this, arguments);\n            if (onsuccess)\n                this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n            if (onerror)\n                this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n            return res === undefined ?\n                (res2 === undefined ? undefined : res2) :\n                (extend(res, res2));\n        };\n    }\n    function reverseStoppableEventChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            if (f2.apply(this, arguments) === false)\n                return false;\n            return f1.apply(this, arguments);\n        };\n    }\n    function promisableChain(f1, f2) {\n        if (f1 === nop)\n            return f2;\n        return function () {\n            var res = f1.apply(this, arguments);\n            if (res && typeof res.then === 'function') {\n                var thiz = this, i = arguments.length, args = new Array(i);\n                while (i--)\n                    args[i] = arguments[i];\n                return res.then(function () {\n                    return f2.apply(thiz, args);\n                });\n            }\n            return f2.apply(this, arguments);\n        };\n    }\n\n    var INTERNAL = {};\n    var LONG_STACKS_CLIP_LIMIT = 100,\n    MAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n        [] :\n        (function () {\n            var globalP = Promise.resolve();\n            if (typeof crypto === 'undefined' || !crypto.subtle)\n                return [globalP, getProto(globalP), globalP];\n            var nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n            return [\n                nativeP,\n                getProto(nativeP),\n                globalP\n            ];\n        })(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\n    var NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\n    var patchGlobalPromise = !!resolvedGlobalPromise;\n    var stack_being_generated = false;\n    var schedulePhysicalTick = resolvedGlobalPromise ?\n        function () { resolvedGlobalPromise.then(physicalTick); }\n        :\n            _global.setImmediate ?\n                setImmediate.bind(null, physicalTick) :\n                _global.MutationObserver ?\n                    function () {\n                        var hiddenDiv = document.createElement(\"div\");\n                        (new MutationObserver(function () {\n                            physicalTick();\n                            hiddenDiv = null;\n                        })).observe(hiddenDiv, { attributes: true });\n                        hiddenDiv.setAttribute('i', '1');\n                    } :\n                    function () { setTimeout(physicalTick, 0); };\n    var asap = function (callback, args) {\n        microtickQueue.push([callback, args]);\n        if (needsNewPhysicalTick) {\n            schedulePhysicalTick();\n            needsNewPhysicalTick = false;\n        }\n    };\n    var isOutsideMicroTick = true,\n    needsNewPhysicalTick = true,\n    unhandledErrors = [],\n    rejectingErrors = [],\n    currentFulfiller = null, rejectionMapper = mirror;\n    var globalPSD = {\n        id: 'global',\n        global: true,\n        ref: 0,\n        unhandleds: [],\n        onunhandled: globalError,\n        pgp: false,\n        env: {},\n        finalize: function () {\n            this.unhandleds.forEach(function (uh) {\n                try {\n                    globalError(uh[0], uh[1]);\n                }\n                catch (e) { }\n            });\n        }\n    };\n    var PSD = globalPSD;\n    var microtickQueue = [];\n    var numScheduledCalls = 0;\n    var tickFinalizers = [];\n    function DexiePromise(fn) {\n        if (typeof this !== 'object')\n            throw new TypeError('Promises must be constructed via new');\n        this._listeners = [];\n        this.onuncatched = nop;\n        this._lib = false;\n        var psd = (this._PSD = PSD);\n        if (debug) {\n            this._stackHolder = getErrorWithStack();\n            this._prev = null;\n            this._numPrev = 0;\n        }\n        if (typeof fn !== 'function') {\n            if (fn !== INTERNAL)\n                throw new TypeError('Not a function');\n            this._state = arguments[1];\n            this._value = arguments[2];\n            if (this._state === false)\n                handleRejection(this, this._value);\n            return;\n        }\n        this._state = null;\n        this._value = null;\n        ++psd.ref;\n        executePromiseTask(this, fn);\n    }\n    var thenProp = {\n        get: function () {\n            var psd = PSD, microTaskId = totalEchoes;\n            function then(onFulfilled, onRejected) {\n                var _this = this;\n                var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n                var cleanup = possibleAwait && !decrementExpectedAwaits();\n                var rv = new DexiePromise(function (resolve, reject) {\n                    propagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n                });\n                debug && linkToPreviousPromise(rv, this);\n                return rv;\n            }\n            then.prototype = INTERNAL;\n            return then;\n        },\n        set: function (value) {\n            setProp(this, 'then', value && value.prototype === INTERNAL ?\n                thenProp :\n                {\n                    get: function () {\n                        return value;\n                    },\n                    set: thenProp.set\n                });\n        }\n    };\n    props(DexiePromise.prototype, {\n        then: thenProp,\n        _then: function (onFulfilled, onRejected) {\n            propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n        },\n        catch: function (onRejected) {\n            if (arguments.length === 1)\n                return this.then(null, onRejected);\n            var type = arguments[0], handler = arguments[1];\n            return typeof type === 'function' ? this.then(null, function (err) {\n                return err instanceof type ? handler(err) : PromiseReject(err);\n            })\n                : this.then(null, function (err) {\n                    return err && err.name === type ? handler(err) : PromiseReject(err);\n                });\n        },\n        finally: function (onFinally) {\n            return this.then(function (value) {\n                onFinally();\n                return value;\n            }, function (err) {\n                onFinally();\n                return PromiseReject(err);\n            });\n        },\n        stack: {\n            get: function () {\n                if (this._stack)\n                    return this._stack;\n                try {\n                    stack_being_generated = true;\n                    var stacks = getStack(this, [], MAX_LONG_STACKS);\n                    var stack = stacks.join(\"\\nFrom previous: \");\n                    if (this._state !== null)\n                        this._stack = stack;\n                    return stack;\n                }\n                finally {\n                    stack_being_generated = false;\n                }\n            }\n        },\n        timeout: function (ms, msg) {\n            var _this = this;\n            return ms < Infinity ?\n                new DexiePromise(function (resolve, reject) {\n                    var handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n                    _this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n                }) : this;\n        }\n    });\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n        setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\n    globalPSD.env = snapShot();\n    function Listener(onFulfilled, onRejected, resolve, reject, zone) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n        this.psd = zone;\n    }\n    props(DexiePromise, {\n        all: function () {\n            var values = getArrayOf.apply(null, arguments)\n                .map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                if (values.length === 0)\n                    resolve([]);\n                var remaining = values.length;\n                values.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n                    values[i] = x;\n                    if (!--remaining)\n                        resolve(values);\n                }, reject); });\n            });\n        },\n        resolve: function (value) {\n            if (value instanceof DexiePromise)\n                return value;\n            if (value && typeof value.then === 'function')\n                return new DexiePromise(function (resolve, reject) {\n                    value.then(resolve, reject);\n                });\n            var rv = new DexiePromise(INTERNAL, true, value);\n            linkToPreviousPromise(rv, currentFulfiller);\n            return rv;\n        },\n        reject: PromiseReject,\n        race: function () {\n            var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(function (resolve, reject) {\n                values.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n            });\n        },\n        PSD: {\n            get: function () { return PSD; },\n            set: function (value) { return PSD = value; }\n        },\n        totalEchoes: { get: function () { return totalEchoes; } },\n        newPSD: newScope,\n        usePSD: usePSD,\n        scheduler: {\n            get: function () { return asap; },\n            set: function (value) { asap = value; }\n        },\n        rejectionMapper: {\n            get: function () { return rejectionMapper; },\n            set: function (value) { rejectionMapper = value; }\n        },\n        follow: function (fn, zoneProps) {\n            return new DexiePromise(function (resolve, reject) {\n                return newScope(function (resolve, reject) {\n                    var psd = PSD;\n                    psd.unhandleds = [];\n                    psd.onunhandled = reject;\n                    psd.finalize = callBoth(function () {\n                        var _this = this;\n                        run_at_end_of_this_or_next_physical_tick(function () {\n                            _this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n                        });\n                    }, psd.finalize);\n                    fn();\n                }, zoneProps, resolve, reject);\n            });\n        }\n    });\n    if (NativePromise) {\n        if (NativePromise.allSettled)\n            setProp(DexiePromise, \"allSettled\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve) {\n                    if (possiblePromises.length === 0)\n                        resolve([]);\n                    var remaining = possiblePromises.length;\n                    var results = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n                        .then(function () { return --remaining || resolve(results); }); });\n                });\n            });\n        if (NativePromise.any && typeof AggregateError !== 'undefined')\n            setProp(DexiePromise, \"any\", function () {\n                var possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n                return new DexiePromise(function (resolve, reject) {\n                    if (possiblePromises.length === 0)\n                        reject(new AggregateError([]));\n                    var remaining = possiblePromises.length;\n                    var failures = new Array(remaining);\n                    possiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n                        failures[i] = failure;\n                        if (!--remaining)\n                            reject(new AggregateError(failures));\n                    }); });\n                });\n            });\n    }\n    function executePromiseTask(promise, fn) {\n        try {\n            fn(function (value) {\n                if (promise._state !== null)\n                    return;\n                if (value === promise)\n                    throw new TypeError('A promise cannot be resolved with itself.');\n                var shouldExecuteTick = promise._lib && beginMicroTickScope();\n                if (value && typeof value.then === 'function') {\n                    executePromiseTask(promise, function (resolve, reject) {\n                        value instanceof DexiePromise ?\n                            value._then(resolve, reject) :\n                            value.then(resolve, reject);\n                    });\n                }\n                else {\n                    promise._state = true;\n                    promise._value = value;\n                    propagateAllListeners(promise);\n                }\n                if (shouldExecuteTick)\n                    endMicroTickScope();\n            }, handleRejection.bind(null, promise));\n        }\n        catch (ex) {\n            handleRejection(promise, ex);\n        }\n    }\n    function handleRejection(promise, reason) {\n        rejectingErrors.push(reason);\n        if (promise._state !== null)\n            return;\n        var shouldExecuteTick = promise._lib && beginMicroTickScope();\n        reason = rejectionMapper(reason);\n        promise._state = false;\n        promise._value = reason;\n        debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n            var origProp = getPropertyDescriptor(reason, \"stack\");\n            reason._promise = promise;\n            setProp(reason, \"stack\", {\n                get: function () {\n                    return stack_being_generated ?\n                        origProp && (origProp.get ?\n                            origProp.get.apply(reason) :\n                            origProp.value) :\n                        promise.stack;\n                }\n            });\n        });\n        addPossiblyUnhandledError(promise);\n        propagateAllListeners(promise);\n        if (shouldExecuteTick)\n            endMicroTickScope();\n    }\n    function propagateAllListeners(promise) {\n        var listeners = promise._listeners;\n        promise._listeners = [];\n        for (var i = 0, len = listeners.length; i < len; ++i) {\n            propagateToListener(promise, listeners[i]);\n        }\n        var psd = promise._PSD;\n        --psd.ref || psd.finalize();\n        if (numScheduledCalls === 0) {\n            ++numScheduledCalls;\n            asap(function () {\n                if (--numScheduledCalls === 0)\n                    finalizePhysicalTick();\n            }, []);\n        }\n    }\n    function propagateToListener(promise, listener) {\n        if (promise._state === null) {\n            promise._listeners.push(listener);\n            return;\n        }\n        var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n        if (cb === null) {\n            return (promise._state ? listener.resolve : listener.reject)(promise._value);\n        }\n        ++listener.psd.ref;\n        ++numScheduledCalls;\n        asap(callListener, [cb, promise, listener]);\n    }\n    function callListener(cb, promise, listener) {\n        try {\n            currentFulfiller = promise;\n            var ret, value = promise._value;\n            if (promise._state) {\n                ret = cb(value);\n            }\n            else {\n                if (rejectingErrors.length)\n                    rejectingErrors = [];\n                ret = cb(value);\n                if (rejectingErrors.indexOf(value) === -1)\n                    markErrorAsHandled(promise);\n            }\n            listener.resolve(ret);\n        }\n        catch (e) {\n            listener.reject(e);\n        }\n        finally {\n            currentFulfiller = null;\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n            --listener.psd.ref || listener.psd.finalize();\n        }\n    }\n    function getStack(promise, stacks, limit) {\n        if (stacks.length === limit)\n            return stacks;\n        var stack = \"\";\n        if (promise._state === false) {\n            var failure = promise._value, errorName, message;\n            if (failure != null) {\n                errorName = failure.name || \"Error\";\n                message = failure.message || failure;\n                stack = prettyStack(failure, 0);\n            }\n            else {\n                errorName = failure;\n                message = \"\";\n            }\n            stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n        }\n        if (debug) {\n            stack = prettyStack(promise._stackHolder, 2);\n            if (stack && stacks.indexOf(stack) === -1)\n                stacks.push(stack);\n            if (promise._prev)\n                getStack(promise._prev, stacks, limit);\n        }\n        return stacks;\n    }\n    function linkToPreviousPromise(promise, prev) {\n        var numPrev = prev ? prev._numPrev + 1 : 0;\n        if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n            promise._prev = prev;\n            promise._numPrev = numPrev;\n        }\n    }\n    function physicalTick() {\n        beginMicroTickScope() && endMicroTickScope();\n    }\n    function beginMicroTickScope() {\n        var wasRootExec = isOutsideMicroTick;\n        isOutsideMicroTick = false;\n        needsNewPhysicalTick = false;\n        return wasRootExec;\n    }\n    function endMicroTickScope() {\n        var callbacks, i, l;\n        do {\n            while (microtickQueue.length > 0) {\n                callbacks = microtickQueue;\n                microtickQueue = [];\n                l = callbacks.length;\n                for (i = 0; i < l; ++i) {\n                    var item = callbacks[i];\n                    item[0].apply(null, item[1]);\n                }\n            }\n        } while (microtickQueue.length > 0);\n        isOutsideMicroTick = true;\n        needsNewPhysicalTick = true;\n    }\n    function finalizePhysicalTick() {\n        var unhandledErrs = unhandledErrors;\n        unhandledErrors = [];\n        unhandledErrs.forEach(function (p) {\n            p._PSD.onunhandled.call(null, p._value, p);\n        });\n        var finalizers = tickFinalizers.slice(0);\n        var i = finalizers.length;\n        while (i)\n            finalizers[--i]();\n    }\n    function run_at_end_of_this_or_next_physical_tick(fn) {\n        function finalizer() {\n            fn();\n            tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n        }\n        tickFinalizers.push(finalizer);\n        ++numScheduledCalls;\n        asap(function () {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n    function addPossiblyUnhandledError(promise) {\n        if (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n            unhandledErrors.push(promise);\n    }\n    function markErrorAsHandled(promise) {\n        var i = unhandledErrors.length;\n        while (i)\n            if (unhandledErrors[--i]._value === promise._value) {\n                unhandledErrors.splice(i, 1);\n                return;\n            }\n    }\n    function PromiseReject(reason) {\n        return new DexiePromise(INTERNAL, false, reason);\n    }\n    function wrap(fn, errorCatcher) {\n        var psd = PSD;\n        return function () {\n            var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n            try {\n                switchToZone(psd, true);\n                return fn.apply(this, arguments);\n            }\n            catch (e) {\n                errorCatcher && errorCatcher(e);\n            }\n            finally {\n                switchToZone(outerScope, false);\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n    }\n    var task = { awaits: 0, echoes: 0, id: 0 };\n    var taskCounter = 0;\n    var zoneStack = [];\n    var zoneEchoes = 0;\n    var totalEchoes = 0;\n    var zone_id_counter = 0;\n    function newScope(fn, props, a1, a2) {\n        var parent = PSD, psd = Object.create(parent);\n        psd.parent = parent;\n        psd.ref = 0;\n        psd.global = false;\n        psd.id = ++zone_id_counter;\n        var globalEnv = globalPSD.env;\n        psd.env = patchGlobalPromise ? {\n            Promise: DexiePromise,\n            PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n            all: DexiePromise.all,\n            race: DexiePromise.race,\n            allSettled: DexiePromise.allSettled,\n            any: DexiePromise.any,\n            resolve: DexiePromise.resolve,\n            reject: DexiePromise.reject,\n            nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n            gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n        } : {};\n        if (props)\n            extend(psd, props);\n        ++parent.ref;\n        psd.finalize = function () {\n            --this.parent.ref || this.parent.finalize();\n        };\n        var rv = usePSD(psd, fn, a1, a2);\n        if (psd.ref === 0)\n            psd.finalize();\n        return rv;\n    }\n    function incrementExpectedAwaits() {\n        if (!task.id)\n            task.id = ++taskCounter;\n        ++task.awaits;\n        task.echoes += ZONE_ECHO_LIMIT;\n        return task.id;\n    }\n    function decrementExpectedAwaits() {\n        if (!task.awaits)\n            return false;\n        if (--task.awaits === 0)\n            task.id = 0;\n        task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n        return true;\n    }\n    if (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n        incrementExpectedAwaits = decrementExpectedAwaits = nop;\n    }\n    function onPossibleParallellAsync(possiblePromise) {\n        if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n            incrementExpectedAwaits();\n            return possiblePromise.then(function (x) {\n                decrementExpectedAwaits();\n                return x;\n            }, function (e) {\n                decrementExpectedAwaits();\n                return rejection(e);\n            });\n        }\n        return possiblePromise;\n    }\n    function zoneEnterEcho(targetZone) {\n        ++totalEchoes;\n        if (!task.echoes || --task.echoes === 0) {\n            task.echoes = task.id = 0;\n        }\n        zoneStack.push(PSD);\n        switchToZone(targetZone, true);\n    }\n    function zoneLeaveEcho() {\n        var zone = zoneStack[zoneStack.length - 1];\n        zoneStack.pop();\n        switchToZone(zone, false);\n    }\n    function switchToZone(targetZone, bEnteringZone) {\n        var currentZone = PSD;\n        if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n            enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n        }\n        if (targetZone === PSD)\n            return;\n        PSD = targetZone;\n        if (currentZone === globalPSD)\n            globalPSD.env = snapShot();\n        if (patchGlobalPromise) {\n            var GlobalPromise_1 = globalPSD.env.Promise;\n            var targetEnv = targetZone.env;\n            nativePromiseProto.then = targetEnv.nthen;\n            GlobalPromise_1.prototype.then = targetEnv.gthen;\n            if (currentZone.global || targetZone.global) {\n                Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n                GlobalPromise_1.all = targetEnv.all;\n                GlobalPromise_1.race = targetEnv.race;\n                GlobalPromise_1.resolve = targetEnv.resolve;\n                GlobalPromise_1.reject = targetEnv.reject;\n                if (targetEnv.allSettled)\n                    GlobalPromise_1.allSettled = targetEnv.allSettled;\n                if (targetEnv.any)\n                    GlobalPromise_1.any = targetEnv.any;\n            }\n        }\n    }\n    function snapShot() {\n        var GlobalPromise = _global.Promise;\n        return patchGlobalPromise ? {\n            Promise: GlobalPromise,\n            PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n            all: GlobalPromise.all,\n            race: GlobalPromise.race,\n            allSettled: GlobalPromise.allSettled,\n            any: GlobalPromise.any,\n            resolve: GlobalPromise.resolve,\n            reject: GlobalPromise.reject,\n            nthen: nativePromiseProto.then,\n            gthen: GlobalPromise.prototype.then\n        } : {};\n    }\n    function usePSD(psd, fn, a1, a2, a3) {\n        var outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn(a1, a2, a3);\n        }\n        finally {\n            switchToZone(outerScope, false);\n        }\n    }\n    function enqueueNativeMicroTask(job) {\n        nativePromiseThen.call(resolvedNativePromise, job);\n    }\n    function nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n        return typeof fn !== 'function' ? fn : function () {\n            var outerZone = PSD;\n            if (possibleAwait)\n                incrementExpectedAwaits();\n            switchToZone(zone, true);\n            try {\n                return fn.apply(this, arguments);\n            }\n            finally {\n                switchToZone(outerZone, false);\n                if (cleanup)\n                    enqueueNativeMicroTask(decrementExpectedAwaits);\n            }\n        };\n    }\n    function getPatchedPromiseThen(origThen, zone) {\n        return function (onResolved, onRejected) {\n            return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n        };\n    }\n    var UNHANDLEDREJECTION = \"unhandledrejection\";\n    function globalError(err, promise) {\n        var rv;\n        try {\n            rv = promise.onuncatched(err);\n        }\n        catch (e) { }\n        if (rv !== false)\n            try {\n                var event, eventData = { promise: promise, reason: err };\n                if (_global.document && document.createEvent) {\n                    event = document.createEvent('Event');\n                    event.initEvent(UNHANDLEDREJECTION, true, true);\n                    extend(event, eventData);\n                }\n                else if (_global.CustomEvent) {\n                    event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                    extend(event, eventData);\n                }\n                if (event && _global.dispatchEvent) {\n                    dispatchEvent(event);\n                    if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                        try {\n                            _global.onunhandledrejection(event);\n                        }\n                        catch (_) { }\n                }\n                if (debug && event && !event.defaultPrevented) {\n                    console.warn(\"Unhandled rejection: \" + (err.stack || err));\n                }\n            }\n            catch (e) { }\n    }\n    var rejection = DexiePromise.reject;\n\n    function tempTransaction(db, mode, storeNames, fn) {\n        if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n            if (db._state.openComplete) {\n                return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n            }\n            if (!db._state.isBeingOpened) {\n                if (!db._options.autoOpen)\n                    return rejection(new exceptions.DatabaseClosed());\n                db.open().catch(nop);\n            }\n            return db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n        }\n        else {\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db._close();\n                    return db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n                }\n                return rejection(ex);\n            }\n            return trans._promise(mode, function (resolve, reject) {\n                return newScope(function () {\n                    PSD.trans = trans;\n                    return fn(resolve, reject, trans);\n                });\n            }).then(function (result) {\n                return trans._completion.then(function () { return result; });\n            });\n        }\n    }\n\n    var DEXIE_VERSION = '3.2.4';\n    var maxString = String.fromCharCode(65535);\n    var minKey = -Infinity;\n    var INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\n    var STRING_EXPECTED = \"String expected.\";\n    var connections = [];\n    var isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\n    var hasIEDeleteObjectStoreBug = isIEOrEdge;\n    var hangsOnDeleteLargeKeyRange = isIEOrEdge;\n    var dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\n    var DBNAMES_DB = '__dbnames';\n    var READONLY = 'readonly';\n    var READWRITE = 'readwrite';\n\n    function combine(filter1, filter2) {\n        return filter1 ?\n            filter2 ?\n                function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n                filter1 :\n            filter2;\n    }\n\n    var AnyRange = {\n        type: 3 ,\n        lower: -Infinity,\n        lowerOpen: false,\n        upper: [[]],\n        upperOpen: false\n    };\n\n    function workaroundForUndefinedPrimKey(keyPath) {\n        return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n            ? function (obj) {\n                if (obj[keyPath] === undefined && (keyPath in obj)) {\n                    obj = deepClone(obj);\n                    delete obj[keyPath];\n                }\n                return obj;\n            }\n            : function (obj) { return obj; };\n    }\n\n    var Table =  (function () {\n        function Table() {\n        }\n        Table.prototype._trans = function (mode, fn, writeLocked) {\n            var trans = this._tx || PSD.trans;\n            var tableName = this.name;\n            function checkTableInTransaction(resolve, reject, trans) {\n                if (!trans.schema[tableName])\n                    throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n                return fn(trans.idbtrans, trans);\n            }\n            var wasRootExec = beginMicroTickScope();\n            try {\n                return trans && trans.db === this.db ?\n                    trans === PSD.trans ?\n                        trans._promise(mode, checkTableInTransaction, writeLocked) :\n                        newScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n                    tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n            }\n            finally {\n                if (wasRootExec)\n                    endMicroTickScope();\n            }\n        };\n        Table.prototype.get = function (keyOrCrit, cb) {\n            var _this = this;\n            if (keyOrCrit && keyOrCrit.constructor === Object)\n                return this.where(keyOrCrit).first(cb);\n            return this._trans('readonly', function (trans) {\n                return _this.core.get({ trans: trans, key: keyOrCrit })\n                    .then(function (res) { return _this.hook.reading.fire(res); });\n            }).then(cb);\n        };\n        Table.prototype.where = function (indexOrCrit) {\n            if (typeof indexOrCrit === 'string')\n                return new this.db.WhereClause(this, indexOrCrit);\n            if (isArray(indexOrCrit))\n                return new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n            var keyPaths = keys(indexOrCrit);\n            if (keyPaths.length === 1)\n                return this\n                    .where(keyPaths[0])\n                    .equals(indexOrCrit[keyPaths[0]]);\n            var compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n                return ix.compound &&\n                    keyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n                    ix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n            })[0];\n            if (compoundIndex && this.db._maxKey !== maxString)\n                return this\n                    .where(compoundIndex.name)\n                    .equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n            if (!compoundIndex && debug)\n                console.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n                    (\"compound index [\" + keyPaths.join('+') + \"]\"));\n            var idxByName = this.schema.idxByName;\n            var idb = this.db._deps.indexedDB;\n            function equals(a, b) {\n                try {\n                    return idb.cmp(a, b) === 0;\n                }\n                catch (e) {\n                    return false;\n                }\n            }\n            var _a = keyPaths.reduce(function (_a, keyPath) {\n                var prevIndex = _a[0], prevFilterFn = _a[1];\n                var index = idxByName[keyPath];\n                var value = indexOrCrit[keyPath];\n                return [\n                    prevIndex || index,\n                    prevIndex || !index ?\n                        combine(prevFilterFn, index && index.multi ?\n                            function (x) {\n                                var prop = getByKeyPath(x, keyPath);\n                                return isArray(prop) && prop.some(function (item) { return equals(value, item); });\n                            } : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n                        : prevFilterFn\n                ];\n            }, [null, null]), idx = _a[0], filterFunction = _a[1];\n            return idx ?\n                this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                    .filter(filterFunction) :\n                compoundIndex ?\n                    this.filter(filterFunction) :\n                    this.where(keyPaths).equals('');\n        };\n        Table.prototype.filter = function (filterFunction) {\n            return this.toCollection().and(filterFunction);\n        };\n        Table.prototype.count = function (thenShortcut) {\n            return this.toCollection().count(thenShortcut);\n        };\n        Table.prototype.offset = function (offset) {\n            return this.toCollection().offset(offset);\n        };\n        Table.prototype.limit = function (numRows) {\n            return this.toCollection().limit(numRows);\n        };\n        Table.prototype.each = function (callback) {\n            return this.toCollection().each(callback);\n        };\n        Table.prototype.toArray = function (thenShortcut) {\n            return this.toCollection().toArray(thenShortcut);\n        };\n        Table.prototype.toCollection = function () {\n            return new this.db.Collection(new this.db.WhereClause(this));\n        };\n        Table.prototype.orderBy = function (index) {\n            return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n                \"[\" + index.join('+') + \"]\" :\n                index));\n        };\n        Table.prototype.reverse = function () {\n            return this.toCollection().reverse();\n        };\n        Table.prototype.mapToClass = function (constructor) {\n            this.schema.mappedClass = constructor;\n            var readHook = function (obj) {\n                if (!obj)\n                    return obj;\n                var res = Object.create(constructor.prototype);\n                for (var m in obj)\n                    if (hasOwn(obj, m))\n                        try {\n                            res[m] = obj[m];\n                        }\n                        catch (_) { }\n                return res;\n            };\n            if (this.schema.readHook) {\n                this.hook.reading.unsubscribe(this.schema.readHook);\n            }\n            this.schema.readHook = readHook;\n            this.hook(\"reading\", readHook);\n            return constructor;\n        };\n        Table.prototype.defineClass = function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return this.mapToClass(Class);\n        };\n        Table.prototype.add = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n            }).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.update = function (keyOrObject, modifications) {\n            if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n                var key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n                if (key === undefined)\n                    return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n                try {\n                    if (typeof modifications !== \"function\") {\n                        keys(modifications).forEach(function (keyPath) {\n                            setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                        });\n                    }\n                    else {\n                        modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                    }\n                }\n                catch (_a) {\n                }\n                return this.where(\":id\").equals(key).modify(modifications);\n            }\n            else {\n                return this.where(\":id\").equals(keyOrObject).modify(modifications);\n            }\n        };\n        Table.prototype.put = function (obj, key) {\n            var _this = this;\n            var _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n            var objToAdd = obj;\n            if (keyPath && auto) {\n                objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n            }\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n                .then(function (lastResult) {\n                if (keyPath) {\n                    try {\n                        setByKeyPath(obj, keyPath, lastResult);\n                    }\n                    catch (_) { }\n                }\n                return lastResult;\n            });\n        };\n        Table.prototype.delete = function (key) {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.clear = function () {\n            var _this = this;\n            return this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n                .then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n        };\n        Table.prototype.bulkGet = function (keys) {\n            var _this = this;\n            return this._trans('readonly', function (trans) {\n                return _this.core.getMany({\n                    keys: keys,\n                    trans: trans\n                }).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n            });\n        };\n        Table.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToAdd = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkPut = function (objects, keysOrOptions, options) {\n            var _this = this;\n            var keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n            options = options || (keys ? undefined : keysOrOptions);\n            var wantResults = options ? options.allKeys : undefined;\n            return this._trans('readwrite', function (trans) {\n                var _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n                if (keyPath && keys)\n                    throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n                if (keys && keys.length !== objects.length)\n                    throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n                var numObjects = objects.length;\n                var objectsToPut = keyPath && auto ?\n                    objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                    objects;\n                return _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n                    .then(function (_a) {\n                    var numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n                    var result = wantResults ? results : lastResult;\n                    if (numFailures === 0)\n                        return result;\n                    throw new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n                });\n            });\n        };\n        Table.prototype.bulkDelete = function (keys) {\n            var _this = this;\n            var numKeys = keys.length;\n            return this._trans('readwrite', function (trans) {\n                return _this.core.mutate({ trans: trans, type: 'delete', keys: keys });\n            }).then(function (_a) {\n                var numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n                if (numFailures === 0)\n                    return lastResult;\n                throw new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + numKeys + \" operations failed\", failures);\n            });\n        };\n        return Table;\n    }());\n\n    function Events(ctx) {\n        var evs = {};\n        var rv = function (eventName, subscriber) {\n            if (subscriber) {\n                var i = arguments.length, args = new Array(i - 1);\n                while (--i)\n                    args[i - 1] = arguments[i];\n                evs[eventName].subscribe.apply(null, args);\n                return ctx;\n            }\n            else if (typeof (eventName) === 'string') {\n                return evs[eventName];\n            }\n        };\n        rv.addEventType = add;\n        for (var i = 1, l = arguments.length; i < l; ++i) {\n            add(arguments[i]);\n        }\n        return rv;\n        function add(eventName, chainFunction, defaultFunction) {\n            if (typeof eventName === 'object')\n                return addConfiguredEvents(eventName);\n            if (!chainFunction)\n                chainFunction = reverseStoppableEventChain;\n            if (!defaultFunction)\n                defaultFunction = nop;\n            var context = {\n                subscribers: [],\n                fire: defaultFunction,\n                subscribe: function (cb) {\n                    if (context.subscribers.indexOf(cb) === -1) {\n                        context.subscribers.push(cb);\n                        context.fire = chainFunction(context.fire, cb);\n                    }\n                },\n                unsubscribe: function (cb) {\n                    context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                    context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n                }\n            };\n            evs[eventName] = rv[eventName] = context;\n            return context;\n        }\n        function addConfiguredEvents(cfg) {\n            keys(cfg).forEach(function (eventName) {\n                var args = cfg[eventName];\n                if (isArray(args)) {\n                    add(eventName, cfg[eventName][0], cfg[eventName][1]);\n                }\n                else if (args === 'asap') {\n                    var context = add(eventName, mirror, function fire() {\n                        var i = arguments.length, args = new Array(i);\n                        while (i--)\n                            args[i] = arguments[i];\n                        context.subscribers.forEach(function (fn) {\n                            asap$1(function fireEvent() {\n                                fn.apply(null, args);\n                            });\n                        });\n                    });\n                }\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid event config\");\n            });\n        }\n    }\n\n    function makeClassConstructor(prototype, constructor) {\n        derive(constructor).from({ prototype: prototype });\n        return constructor;\n    }\n\n    function createTableConstructor(db) {\n        return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n            this.db = db;\n            this._tx = trans;\n            this.name = name;\n            this.schema = tableSchema;\n            this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n                \"creating\": [hookCreatingChain, nop],\n                \"reading\": [pureFunctionChain, mirror],\n                \"updating\": [hookUpdatingChain, nop],\n                \"deleting\": [hookDeletingChain, nop]\n            });\n        });\n    }\n\n    function isPlainKeyRange(ctx, ignoreLimitFilter) {\n        return !(ctx.filter || ctx.algorithm || ctx.or) &&\n            (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n    }\n    function addFilter(ctx, fn) {\n        ctx.filter = combine(ctx.filter, fn);\n    }\n    function addReplayFilter(ctx, factory, isLimitFilter) {\n        var curr = ctx.replayFilter;\n        ctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n        ctx.justLimit = isLimitFilter && !curr;\n    }\n    function addMatchFilter(ctx, fn) {\n        ctx.isMatch = combine(ctx.isMatch, fn);\n    }\n    function getIndexOrStore(ctx, coreSchema) {\n        if (ctx.isPrimKey)\n            return coreSchema.primaryKey;\n        var index = coreSchema.getIndexByKeyPath(ctx.index);\n        if (!index)\n            throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n        return index;\n    }\n    function openCursor(ctx, coreTable, trans) {\n        var index = getIndexOrStore(ctx, coreTable.schema);\n        return coreTable.openCursor({\n            trans: trans,\n            values: !ctx.keysOnly,\n            reverse: ctx.dir === 'prev',\n            unique: !!ctx.unique,\n            query: {\n                index: index,\n                range: ctx.range\n            }\n        });\n    }\n    function iter(ctx, fn, coreTrans, coreTable) {\n        var filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n        if (!ctx.or) {\n            return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n        }\n        else {\n            var set_1 = {};\n            var union = function (item, cursor, advance) {\n                if (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n                    var primaryKey = cursor.primaryKey;\n                    var key = '' + primaryKey;\n                    if (key === '[object ArrayBuffer]')\n                        key = '' + new Uint8Array(primaryKey);\n                    if (!hasOwn(set_1, key)) {\n                        set_1[key] = true;\n                        fn(item, cursor, advance);\n                    }\n                }\n            };\n            return Promise.all([\n                ctx.or._iterate(union, coreTrans),\n                iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n            ]);\n        }\n    }\n    function iterate(cursorPromise, filter, fn, valueMapper) {\n        var mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n        var wrappedFn = wrap(mappedFn);\n        return cursorPromise.then(function (cursor) {\n            if (cursor) {\n                return cursor.start(function () {\n                    var c = function () { return cursor.continue(); };\n                    if (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n                        wrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n                    c();\n                });\n            }\n        });\n    }\n\n    function cmp(a, b) {\n        try {\n            var ta = type(a);\n            var tb = type(b);\n            if (ta !== tb) {\n                if (ta === 'Array')\n                    return 1;\n                if (tb === 'Array')\n                    return -1;\n                if (ta === 'binary')\n                    return 1;\n                if (tb === 'binary')\n                    return -1;\n                if (ta === 'string')\n                    return 1;\n                if (tb === 'string')\n                    return -1;\n                if (ta === 'Date')\n                    return 1;\n                if (tb !== 'Date')\n                    return NaN;\n                return -1;\n            }\n            switch (ta) {\n                case 'number':\n                case 'Date':\n                case 'string':\n                    return a > b ? 1 : a < b ? -1 : 0;\n                case 'binary': {\n                    return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n                }\n                case 'Array':\n                    return compareArrays(a, b);\n            }\n        }\n        catch (_a) { }\n        return NaN;\n    }\n    function compareArrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            var res = cmp(a[i], b[i]);\n            if (res !== 0)\n                return res;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function compareUint8Arrays(a, b) {\n        var al = a.length;\n        var bl = b.length;\n        var l = al < bl ? al : bl;\n        for (var i = 0; i < l; ++i) {\n            if (a[i] !== b[i])\n                return a[i] < b[i] ? -1 : 1;\n        }\n        return al === bl ? 0 : al < bl ? -1 : 1;\n    }\n    function type(x) {\n        var t = typeof x;\n        if (t !== 'object')\n            return t;\n        if (ArrayBuffer.isView(x))\n            return 'binary';\n        var tsTag = toStringTag(x);\n        return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n    }\n    function getUint8Array(a) {\n        if (a instanceof Uint8Array)\n            return a;\n        if (ArrayBuffer.isView(a))\n            return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n        return new Uint8Array(a);\n    }\n\n    var Collection =  (function () {\n        function Collection() {\n        }\n        Collection.prototype._read = function (fn, cb) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readonly', fn).then(cb);\n        };\n        Collection.prototype._write = function (fn) {\n            var ctx = this._ctx;\n            return ctx.error ?\n                ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n                ctx.table._trans('readwrite', fn, \"locked\");\n        };\n        Collection.prototype._addAlgorithm = function (fn) {\n            var ctx = this._ctx;\n            ctx.algorithm = combine(ctx.algorithm, fn);\n        };\n        Collection.prototype._iterate = function (fn, coreTrans) {\n            return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n        };\n        Collection.prototype.clone = function (props) {\n            var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n            if (props)\n                extend(ctx, props);\n            rv._ctx = ctx;\n            return rv;\n        };\n        Collection.prototype.raw = function () {\n            this._ctx.valueMapper = null;\n            return this;\n        };\n        Collection.prototype.each = function (fn) {\n            var ctx = this._ctx;\n            return this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n        };\n        Collection.prototype.count = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                var coreTable = ctx.table.core;\n                if (isPlainKeyRange(ctx, true)) {\n                    return coreTable.count({\n                        trans: trans,\n                        query: {\n                            index: getIndexOrStore(ctx, coreTable.schema),\n                            range: ctx.range\n                        }\n                    }).then(function (count) { return Math.min(count, ctx.limit); });\n                }\n                else {\n                    var count = 0;\n                    return iter(ctx, function () { ++count; return false; }, trans, coreTable)\n                        .then(function () { return count; });\n                }\n            }).then(cb);\n        };\n        Collection.prototype.sortBy = function (keyPath, cb) {\n            var parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n            function getval(obj, i) {\n                if (i)\n                    return getval(obj[parts[i]], i - 1);\n                return obj[lastPart];\n            }\n            var order = this._ctx.dir === \"next\" ? 1 : -1;\n            function sorter(a, b) {\n                var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n                return aVal < bVal ? -order : aVal > bVal ? order : 0;\n            }\n            return this.toArray(function (a) {\n                return a.sort(sorter);\n            }).then(cb);\n        };\n        Collection.prototype.toArray = function (cb) {\n            var _this = this;\n            return this._read(function (trans) {\n                var ctx = _this._ctx;\n                if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                    var valueMapper_1 = ctx.valueMapper;\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        limit: ctx.limit,\n                        values: true,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    }).then(function (_a) {\n                        var result = _a.result;\n                        return valueMapper_1 ? result.map(valueMapper_1) : result;\n                    });\n                }\n                else {\n                    var a_1 = [];\n                    return iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n                }\n            }, cb);\n        };\n        Collection.prototype.offset = function (offset) {\n            var ctx = this._ctx;\n            if (offset <= 0)\n                return this;\n            ctx.offset += offset;\n            if (isPlainKeyRange(ctx)) {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function (cursor, advance) {\n                        if (offsetLeft === 0)\n                            return true;\n                        if (offsetLeft === 1) {\n                            --offsetLeft;\n                            return false;\n                        }\n                        advance(function () {\n                            cursor.advance(offsetLeft);\n                            offsetLeft = 0;\n                        });\n                        return false;\n                    };\n                });\n            }\n            else {\n                addReplayFilter(ctx, function () {\n                    var offsetLeft = offset;\n                    return function () { return (--offsetLeft < 0); };\n                });\n            }\n            return this;\n        };\n        Collection.prototype.limit = function (numRows) {\n            this._ctx.limit = Math.min(this._ctx.limit, numRows);\n            addReplayFilter(this._ctx, function () {\n                var rowsLeft = numRows;\n                return function (cursor, advance, resolve) {\n                    if (--rowsLeft <= 0)\n                        advance(resolve);\n                    return rowsLeft >= 0;\n                };\n            }, true);\n            return this;\n        };\n        Collection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n            addFilter(this._ctx, function (cursor, advance, resolve) {\n                if (filterFunction(cursor.value)) {\n                    advance(resolve);\n                    return bIncludeStopEntry;\n                }\n                else {\n                    return true;\n                }\n            });\n            return this;\n        };\n        Collection.prototype.first = function (cb) {\n            return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.last = function (cb) {\n            return this.reverse().first(cb);\n        };\n        Collection.prototype.filter = function (filterFunction) {\n            addFilter(this._ctx, function (cursor) {\n                return filterFunction(cursor.value);\n            });\n            addMatchFilter(this._ctx, filterFunction);\n            return this;\n        };\n        Collection.prototype.and = function (filter) {\n            return this.filter(filter);\n        };\n        Collection.prototype.or = function (indexName) {\n            return new this.db.WhereClause(this._ctx.table, indexName, this);\n        };\n        Collection.prototype.reverse = function () {\n            this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n            if (this._ondirectionchange)\n                this._ondirectionchange(this._ctx.dir);\n            return this;\n        };\n        Collection.prototype.desc = function () {\n            return this.reverse();\n        };\n        Collection.prototype.eachKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n        };\n        Collection.prototype.eachUniqueKey = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.eachKey(cb);\n        };\n        Collection.prototype.eachPrimaryKey = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n        };\n        Collection.prototype.keys = function (cb) {\n            var ctx = this._ctx;\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.key);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.primaryKeys = function (cb) {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                return this._read(function (trans) {\n                    var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                    return ctx.table.core.query({\n                        trans: trans,\n                        values: false,\n                        limit: ctx.limit,\n                        query: {\n                            index: index,\n                            range: ctx.range\n                        }\n                    });\n                }).then(function (_a) {\n                    var result = _a.result;\n                    return result;\n                }).then(cb);\n            }\n            ctx.keysOnly = !ctx.isMatch;\n            var a = [];\n            return this.each(function (item, cursor) {\n                a.push(cursor.primaryKey);\n            }).then(function () {\n                return a;\n            }).then(cb);\n        };\n        Collection.prototype.uniqueKeys = function (cb) {\n            this._ctx.unique = \"unique\";\n            return this.keys(cb);\n        };\n        Collection.prototype.firstKey = function (cb) {\n            return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n        };\n        Collection.prototype.lastKey = function (cb) {\n            return this.reverse().firstKey(cb);\n        };\n        Collection.prototype.distinct = function () {\n            var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n            if (!idx || !idx.multi)\n                return this;\n            var set = {};\n            addFilter(this._ctx, function (cursor) {\n                var strKey = cursor.primaryKey.toString();\n                var found = hasOwn(set, strKey);\n                set[strKey] = true;\n                return !found;\n            });\n            return this;\n        };\n        Collection.prototype.modify = function (changes) {\n            var _this = this;\n            var ctx = this._ctx;\n            return this._write(function (trans) {\n                var modifyer;\n                if (typeof changes === 'function') {\n                    modifyer = changes;\n                }\n                else {\n                    var keyPaths = keys(changes);\n                    var numKeys = keyPaths.length;\n                    modifyer = function (item) {\n                        var anythingModified = false;\n                        for (var i = 0; i < numKeys; ++i) {\n                            var keyPath = keyPaths[i], val = changes[keyPath];\n                            if (getByKeyPath(item, keyPath) !== val) {\n                                setByKeyPath(item, keyPath, val);\n                                anythingModified = true;\n                            }\n                        }\n                        return anythingModified;\n                    };\n                }\n                var coreTable = ctx.table.core;\n                var _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n                var limit = _this.db._options.modifyChunkSize || 200;\n                var totalFailures = [];\n                var successCount = 0;\n                var failedKeys = [];\n                var applyMutateResult = function (expectedCount, res) {\n                    var failures = res.failures, numFailures = res.numFailures;\n                    successCount += expectedCount - numFailures;\n                    for (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n                        var pos = _a[_i];\n                        totalFailures.push(failures[pos]);\n                    }\n                };\n                return _this.clone().primaryKeys().then(function (keys) {\n                    var nextChunk = function (offset) {\n                        var count = Math.min(limit, keys.length - offset);\n                        return coreTable.getMany({\n                            trans: trans,\n                            keys: keys.slice(offset, offset + count),\n                            cache: \"immutable\"\n                        }).then(function (values) {\n                            var addValues = [];\n                            var putValues = [];\n                            var putKeys = outbound ? [] : null;\n                            var deleteKeys = [];\n                            for (var i = 0; i < count; ++i) {\n                                var origValue = values[i];\n                                var ctx_1 = {\n                                    value: deepClone(origValue),\n                                    primKey: keys[offset + i]\n                                };\n                                if (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n                                    if (ctx_1.value == null) {\n                                        deleteKeys.push(keys[offset + i]);\n                                    }\n                                    else if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n                                        deleteKeys.push(keys[offset + i]);\n                                        addValues.push(ctx_1.value);\n                                    }\n                                    else {\n                                        putValues.push(ctx_1.value);\n                                        if (outbound)\n                                            putKeys.push(keys[offset + i]);\n                                    }\n                                }\n                            }\n                            var criteria = isPlainKeyRange(ctx) &&\n                                ctx.limit === Infinity &&\n                                (typeof changes !== 'function' || changes === deleteCallback) && {\n                                index: ctx.index,\n                                range: ctx.range\n                            };\n                            return Promise.resolve(addValues.length > 0 &&\n                                coreTable.mutate({ trans: trans, type: 'add', values: addValues })\n                                    .then(function (res) {\n                                    for (var pos in res.failures) {\n                                        deleteKeys.splice(parseInt(pos), 1);\n                                    }\n                                    applyMutateResult(addValues.length, res);\n                                })).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'put',\n                                    keys: putKeys,\n                                    values: putValues,\n                                    criteria: criteria,\n                                    changeSpec: typeof changes !== 'function'\n                                        && changes\n                                }).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                                coreTable.mutate({\n                                    trans: trans,\n                                    type: 'delete',\n                                    keys: deleteKeys,\n                                    criteria: criteria\n                                }).then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n                                return keys.length > offset + count && nextChunk(offset + limit);\n                            });\n                        });\n                    };\n                    return nextChunk(0).then(function () {\n                        if (totalFailures.length > 0)\n                            throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                        return keys.length;\n                    });\n                });\n            });\n        };\n        Collection.prototype.delete = function () {\n            var ctx = this._ctx, range = ctx.range;\n            if (isPlainKeyRange(ctx) &&\n                ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n             {\n                return this._write(function (trans) {\n                    var primaryKey = ctx.table.core.schema.primaryKey;\n                    var coreRange = range;\n                    return ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n                        return ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n                            .then(function (_a) {\n                            var failures = _a.failures; _a.lastResult; _a.results; var numFailures = _a.numFailures;\n                            if (numFailures)\n                                throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n                            return count - numFailures;\n                        });\n                    });\n                });\n            }\n            return this.modify(deleteCallback);\n        };\n        return Collection;\n    }());\n    var deleteCallback = function (value, ctx) { return ctx.value = null; };\n\n    function createCollectionConstructor(db) {\n        return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n            this.db = db;\n            var keyRange = AnyRange, error = null;\n            if (keyRangeGenerator)\n                try {\n                    keyRange = keyRangeGenerator();\n                }\n                catch (ex) {\n                    error = ex;\n                }\n            var whereCtx = whereClause._ctx;\n            var table = whereCtx.table;\n            var readingHook = table.hook.reading.fire;\n            this._ctx = {\n                table: table,\n                index: whereCtx.index,\n                isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n                range: keyRange,\n                keysOnly: false,\n                dir: \"next\",\n                unique: \"\",\n                algorithm: null,\n                filter: null,\n                replayFilter: null,\n                justLimit: true,\n                isMatch: null,\n                offset: 0,\n                limit: Infinity,\n                error: error,\n                or: whereCtx.or,\n                valueMapper: readingHook !== mirror ? readingHook : null\n            };\n        });\n    }\n\n    function simpleCompare(a, b) {\n        return a < b ? -1 : a === b ? 0 : 1;\n    }\n    function simpleCompareReverse(a, b) {\n        return a > b ? -1 : a === b ? 0 : 1;\n    }\n\n    function fail(collectionOrWhereClause, err, T) {\n        var collection = collectionOrWhereClause instanceof WhereClause ?\n            new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n            collectionOrWhereClause;\n        collection._ctx.error = T ? new T(err) : new TypeError(err);\n        return collection;\n    }\n    function emptyCollection(whereClause) {\n        return new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n    }\n    function upperFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toUpperCase(); } :\n            function (s) { return s.toLowerCase(); };\n    }\n    function lowerFactory(dir) {\n        return dir === \"next\" ?\n            function (s) { return s.toLowerCase(); } :\n            function (s) { return s.toUpperCase(); };\n    }\n    function nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n        var length = Math.min(key.length, lowerNeedle.length);\n        var llp = -1;\n        for (var i = 0; i < length; ++i) {\n            var lwrKeyChar = lowerKey[i];\n            if (lwrKeyChar !== lowerNeedle[i]) {\n                if (cmp(key[i], upperNeedle[i]) < 0)\n                    return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n                if (cmp(key[i], lowerNeedle[i]) < 0)\n                    return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n                if (llp >= 0)\n                    return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n                return null;\n            }\n            if (cmp(key[i], lwrKeyChar) < 0)\n                llp = i;\n        }\n        if (length < lowerNeedle.length && dir === \"next\")\n            return key + upperNeedle.substr(key.length);\n        if (length < key.length && dir === \"prev\")\n            return key.substr(0, upperNeedle.length);\n        return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n    }\n    function addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n        var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n        if (!needles.every(function (s) { return typeof s === 'string'; })) {\n            return fail(whereClause, STRING_EXPECTED);\n        }\n        function initDirection(dir) {\n            upper = upperFactory(dir);\n            lower = lowerFactory(dir);\n            compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n            var needleBounds = needles.map(function (needle) {\n                return { lower: lower(needle), upper: upper(needle) };\n            }).sort(function (a, b) {\n                return compare(a.lower, b.lower);\n            });\n            upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n            lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n            direction = dir;\n            nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n        }\n        initDirection(\"next\");\n        var c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n        c._ondirectionchange = function (direction) {\n            initDirection(direction);\n        };\n        var firstPossibleNeedle = 0;\n        c._addAlgorithm(function (cursor, advance, resolve) {\n            var key = cursor.key;\n            if (typeof key !== 'string')\n                return false;\n            var lowerKey = lower(key);\n            if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n                return true;\n            }\n            else {\n                var lowestPossibleCasing = null;\n                for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                    var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                    if (casing === null && lowestPossibleCasing === null)\n                        firstPossibleNeedle = i + 1;\n                    else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                        lowestPossibleCasing = casing;\n                    }\n                }\n                if (lowestPossibleCasing !== null) {\n                    advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n                }\n                else {\n                    advance(resolve);\n                }\n                return false;\n            }\n        });\n        return c;\n    }\n    function createRange(lower, upper, lowerOpen, upperOpen) {\n        return {\n            type: 2 ,\n            lower: lower,\n            upper: upper,\n            lowerOpen: lowerOpen,\n            upperOpen: upperOpen\n        };\n    }\n    function rangeEqual(value) {\n        return {\n            type: 1 ,\n            lower: value,\n            upper: value\n        };\n    }\n\n    var WhereClause =  (function () {\n        function WhereClause() {\n        }\n        Object.defineProperty(WhereClause.prototype, \"Collection\", {\n            get: function () {\n                return this._ctx.table.db.Collection;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n            includeLower = includeLower !== false;\n            includeUpper = includeUpper === true;\n            try {\n                if ((this._cmp(lower, upper) > 0) ||\n                    (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                    return emptyCollection(this);\n                return new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n        };\n        WhereClause.prototype.equals = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return rangeEqual(value); });\n        };\n        WhereClause.prototype.above = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, true); });\n        };\n        WhereClause.prototype.aboveOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(value, undefined, false); });\n        };\n        WhereClause.prototype.below = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n        };\n        WhereClause.prototype.belowOrEqual = function (value) {\n            if (value == null)\n                return fail(this, INVALID_KEY_ARGUMENT);\n            return new this.Collection(this, function () { return createRange(undefined, value); });\n        };\n        WhereClause.prototype.startsWith = function (str) {\n            if (typeof str !== 'string')\n                return fail(this, STRING_EXPECTED);\n            return this.between(str, str + maxString, true, true);\n        };\n        WhereClause.prototype.startsWithIgnoreCase = function (str) {\n            if (str === \"\")\n                return this.startsWith(str);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n        };\n        WhereClause.prototype.equalsIgnoreCase = function (str) {\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n        };\n        WhereClause.prototype.anyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n        };\n        WhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return emptyCollection(this);\n            return addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n        };\n        WhereClause.prototype.anyOf = function () {\n            var _this = this;\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            var compare = this._cmp;\n            try {\n                set.sort(compare);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            var c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n            c._ondirectionchange = function (direction) {\n                compare = (direction === \"next\" ?\n                    _this._ascending :\n                    _this._descending);\n                set.sort(compare);\n            };\n            var i = 0;\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (compare(key, set[i]) > 0) {\n                    ++i;\n                    if (i === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (compare(key, set[i]) === 0) {\n                    return true;\n                }\n                else {\n                    advance(function () { cursor.continue(set[i]); });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.notEqual = function (value) {\n            return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.noneOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (set.length === 0)\n                return new this.Collection(this);\n            try {\n                set.sort(this._ascending);\n            }\n            catch (e) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var ranges = set.reduce(function (res, val) { return res ?\n                res.concat([[res[res.length - 1][1], val]]) :\n                [[minKey, val]]; }, null);\n            ranges.push([set[set.length - 1], this.db._maxKey]);\n            return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n        };\n        WhereClause.prototype.inAnyRange = function (ranges, options) {\n            var _this = this;\n            var cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n            if (ranges.length === 0)\n                return emptyCollection(this);\n            if (!ranges.every(function (range) {\n                return range[0] !== undefined &&\n                    range[1] !== undefined &&\n                    ascending(range[0], range[1]) <= 0;\n            })) {\n                return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n            }\n            var includeLowers = !options || options.includeLowers !== false;\n            var includeUppers = options && options.includeUppers === true;\n            function addRange(ranges, newRange) {\n                var i = 0, l = ranges.length;\n                for (; i < l; ++i) {\n                    var range = ranges[i];\n                    if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                        range[0] = min(range[0], newRange[0]);\n                        range[1] = max(range[1], newRange[1]);\n                        break;\n                    }\n                }\n                if (i === l)\n                    ranges.push(newRange);\n                return ranges;\n            }\n            var sortDirection = ascending;\n            function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n            var set;\n            try {\n                set = ranges.reduce(addRange, []);\n                set.sort(rangeSorter);\n            }\n            catch (ex) {\n                return fail(this, INVALID_KEY_ARGUMENT);\n            }\n            var rangePos = 0;\n            var keyIsBeyondCurrentEntry = includeUppers ?\n                function (key) { return ascending(key, set[rangePos][1]) > 0; } :\n                function (key) { return ascending(key, set[rangePos][1]) >= 0; };\n            var keyIsBeforeCurrentEntry = includeLowers ?\n                function (key) { return descending(key, set[rangePos][0]) > 0; } :\n                function (key) { return descending(key, set[rangePos][0]) >= 0; };\n            function keyWithinCurrentRange(key) {\n                return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n            }\n            var checkKey = keyIsBeyondCurrentEntry;\n            var c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n            c._ondirectionchange = function (direction) {\n                if (direction === \"next\") {\n                    checkKey = keyIsBeyondCurrentEntry;\n                    sortDirection = ascending;\n                }\n                else {\n                    checkKey = keyIsBeforeCurrentEntry;\n                    sortDirection = descending;\n                }\n                set.sort(rangeSorter);\n            };\n            c._addAlgorithm(function (cursor, advance, resolve) {\n                var key = cursor.key;\n                while (checkKey(key)) {\n                    ++rangePos;\n                    if (rangePos === set.length) {\n                        advance(resolve);\n                        return false;\n                    }\n                }\n                if (keyWithinCurrentRange(key)) {\n                    return true;\n                }\n                else if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n                    return false;\n                }\n                else {\n                    advance(function () {\n                        if (sortDirection === ascending)\n                            cursor.continue(set[rangePos][0]);\n                        else\n                            cursor.continue(set[rangePos][1]);\n                    });\n                    return false;\n                }\n            });\n            return c;\n        };\n        WhereClause.prototype.startsWithAnyOf = function () {\n            var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n            if (!set.every(function (s) { return typeof s === 'string'; })) {\n                return fail(this, \"startsWithAnyOf() only works with strings\");\n            }\n            if (set.length === 0)\n                return emptyCollection(this);\n            return this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n        };\n        return WhereClause;\n    }());\n\n    function createWhereClauseConstructor(db) {\n        return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n            this.db = db;\n            this._ctx = {\n                table: table,\n                index: index === \":id\" ? null : index,\n                or: orCollection\n            };\n            var indexedDB = db._deps.indexedDB;\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n            this._descending = function (a, b) { return indexedDB.cmp(b, a); };\n            this._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n            this._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n            this._IDBKeyRange = db._deps.IDBKeyRange;\n        });\n    }\n\n    function eventRejectHandler(reject) {\n        return wrap(function (event) {\n            preventDefault(event);\n            reject(event.target.error);\n            return false;\n        });\n    }\n    function preventDefault(event) {\n        if (event.stopPropagation)\n            event.stopPropagation();\n        if (event.preventDefault)\n            event.preventDefault();\n    }\n\n    var DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\n    var STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\n    var globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\n    var Transaction =  (function () {\n        function Transaction() {\n        }\n        Transaction.prototype._lock = function () {\n            assert(!PSD.global);\n            ++this._reculock;\n            if (this._reculock === 1 && !PSD.global)\n                PSD.lockOwnerFor = this;\n            return this;\n        };\n        Transaction.prototype._unlock = function () {\n            assert(!PSD.global);\n            if (--this._reculock === 0) {\n                if (!PSD.global)\n                    PSD.lockOwnerFor = null;\n                while (this._blockedFuncs.length > 0 && !this._locked()) {\n                    var fnAndPSD = this._blockedFuncs.shift();\n                    try {\n                        usePSD(fnAndPSD[1], fnAndPSD[0]);\n                    }\n                    catch (e) { }\n                }\n            }\n            return this;\n        };\n        Transaction.prototype._locked = function () {\n            return this._reculock && PSD.lockOwnerFor !== this;\n        };\n        Transaction.prototype.create = function (idbtrans) {\n            var _this = this;\n            if (!this.mode)\n                return this;\n            var idbdb = this.db.idbdb;\n            var dbOpenError = this.db._state.dbOpenError;\n            assert(!this.idbtrans);\n            if (!idbtrans && !idbdb) {\n                switch (dbOpenError && dbOpenError.name) {\n                    case \"DatabaseClosedError\":\n                        throw new exceptions.DatabaseClosed(dbOpenError);\n                    case \"MissingAPIError\":\n                        throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                    default:\n                        throw new exceptions.OpenFailed(dbOpenError);\n                }\n            }\n            if (!this.active)\n                throw new exceptions.TransactionInactive();\n            assert(this._completion._state === null);\n            idbtrans = this.idbtrans = idbtrans ||\n                (this.db.core\n                    ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                    : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n            idbtrans.onerror = wrap(function (ev) {\n                preventDefault(ev);\n                _this._reject(idbtrans.error);\n            });\n            idbtrans.onabort = wrap(function (ev) {\n                preventDefault(ev);\n                _this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n                _this.active = false;\n                _this.on(\"abort\").fire(ev);\n            });\n            idbtrans.oncomplete = wrap(function () {\n                _this.active = false;\n                _this._resolve();\n                if ('mutatedParts' in idbtrans) {\n                    globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n                }\n            });\n            return this;\n        };\n        Transaction.prototype._promise = function (mode, fn, bWriteLock) {\n            var _this = this;\n            if (mode === 'readwrite' && this.mode !== 'readwrite')\n                return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n            if (!this.active)\n                return rejection(new exceptions.TransactionInactive());\n            if (this._locked()) {\n                return new DexiePromise(function (resolve, reject) {\n                    _this._blockedFuncs.push([function () {\n                            _this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                        }, PSD]);\n                });\n            }\n            else if (bWriteLock) {\n                return newScope(function () {\n                    var p = new DexiePromise(function (resolve, reject) {\n                        _this._lock();\n                        var rv = fn(resolve, reject, _this);\n                        if (rv && rv.then)\n                            rv.then(resolve, reject);\n                    });\n                    p.finally(function () { return _this._unlock(); });\n                    p._lib = true;\n                    return p;\n                });\n            }\n            else {\n                var p = new DexiePromise(function (resolve, reject) {\n                    var rv = fn(resolve, reject, _this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p._lib = true;\n                return p;\n            }\n        };\n        Transaction.prototype._root = function () {\n            return this.parent ? this.parent._root() : this;\n        };\n        Transaction.prototype.waitFor = function (promiseLike) {\n            var root = this._root();\n            var promise = DexiePromise.resolve(promiseLike);\n            if (root._waitingFor) {\n                root._waitingFor = root._waitingFor.then(function () { return promise; });\n            }\n            else {\n                root._waitingFor = promise;\n                root._waitingQueue = [];\n                var store = root.idbtrans.objectStore(root.storeNames[0]);\n                (function spin() {\n                    ++root._spinCount;\n                    while (root._waitingQueue.length)\n                        (root._waitingQueue.shift())();\n                    if (root._waitingFor)\n                        store.get(-Infinity).onsuccess = spin;\n                }());\n            }\n            var currentWaitPromise = root._waitingFor;\n            return new DexiePromise(function (resolve, reject) {\n                promise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n                    if (root._waitingFor === currentWaitPromise) {\n                        root._waitingFor = null;\n                    }\n                });\n            });\n        };\n        Transaction.prototype.abort = function () {\n            if (this.active) {\n                this.active = false;\n                if (this.idbtrans)\n                    this.idbtrans.abort();\n                this._reject(new exceptions.Abort());\n            }\n        };\n        Transaction.prototype.table = function (tableName) {\n            var memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n            if (hasOwn(memoizedTables, tableName))\n                return memoizedTables[tableName];\n            var tableSchema = this.schema[tableName];\n            if (!tableSchema) {\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            }\n            var transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n            transactionBoundTable.core = this.db.core.table(tableName);\n            memoizedTables[tableName] = transactionBoundTable;\n            return transactionBoundTable;\n        };\n        return Transaction;\n    }());\n\n    function createTransactionConstructor(db) {\n        return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n            var _this = this;\n            this.db = db;\n            this.mode = mode;\n            this.storeNames = storeNames;\n            this.schema = dbschema;\n            this.chromeTransactionDurability = chromeTransactionDurability;\n            this.idbtrans = null;\n            this.on = Events(this, \"complete\", \"error\", \"abort\");\n            this.parent = parent || null;\n            this.active = true;\n            this._reculock = 0;\n            this._blockedFuncs = [];\n            this._resolve = null;\n            this._reject = null;\n            this._waitingFor = null;\n            this._waitingQueue = null;\n            this._spinCount = 0;\n            this._completion = new DexiePromise(function (resolve, reject) {\n                _this._resolve = resolve;\n                _this._reject = reject;\n            });\n            this._completion.then(function () {\n                _this.active = false;\n                _this.on.complete.fire();\n            }, function (e) {\n                var wasActive = _this.active;\n                _this.active = false;\n                _this.on.error.fire(e);\n                _this.parent ?\n                    _this.parent._reject(e) :\n                    wasActive && _this.idbtrans && _this.idbtrans.abort();\n                return rejection(e);\n            });\n        });\n    }\n\n    function createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n        return {\n            name: name,\n            keyPath: keyPath,\n            unique: unique,\n            multi: multi,\n            auto: auto,\n            compound: compound,\n            src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n        };\n    }\n    function nameFromKeyPath(keyPath) {\n        return typeof keyPath === 'string' ?\n            keyPath :\n            keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n    }\n\n    function createTableSchema(name, primKey, indexes) {\n        return {\n            name: name,\n            primKey: primKey,\n            indexes: indexes,\n            mappedClass: null,\n            idxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n        };\n    }\n\n    function safariMultiStoreFix(storeNames) {\n        return storeNames.length === 1 ? storeNames[0] : storeNames;\n    }\n    var getMaxKey = function (IdbKeyRange) {\n        try {\n            IdbKeyRange.only([[]]);\n            getMaxKey = function () { return [[]]; };\n            return [[]];\n        }\n        catch (e) {\n            getMaxKey = function () { return maxString; };\n            return maxString;\n        }\n    };\n\n    function getKeyExtractor(keyPath) {\n        if (keyPath == null) {\n            return function () { return undefined; };\n        }\n        else if (typeof keyPath === 'string') {\n            return getSinglePathKeyExtractor(keyPath);\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n    function getSinglePathKeyExtractor(keyPath) {\n        var split = keyPath.split('.');\n        if (split.length === 1) {\n            return function (obj) { return obj[keyPath]; };\n        }\n        else {\n            return function (obj) { return getByKeyPath(obj, keyPath); };\n        }\n    }\n\n    function arrayify(arrayLike) {\n        return [].slice.call(arrayLike);\n    }\n    var _id_counter = 0;\n    function getKeyPathAlias(keyPath) {\n        return keyPath == null ?\n            \":id\" :\n            typeof keyPath === 'string' ?\n                keyPath :\n                \"[\" + keyPath.join('+') + \"]\";\n    }\n    function createDBCore(db, IdbKeyRange, tmpTrans) {\n        function extractSchema(db, trans) {\n            var tables = arrayify(db.objectStoreNames);\n            return {\n                schema: {\n                    name: db.name,\n                    tables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n                        var keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n                        var compound = isArray(keyPath);\n                        var outbound = keyPath == null;\n                        var indexByKeyPath = {};\n                        var result = {\n                            name: store.name,\n                            primaryKey: {\n                                name: null,\n                                isPrimaryKey: true,\n                                outbound: outbound,\n                                compound: compound,\n                                keyPath: keyPath,\n                                autoIncrement: autoIncrement,\n                                unique: true,\n                                extractKey: getKeyExtractor(keyPath)\n                            },\n                            indexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n                                .map(function (index) {\n                                var name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n                                var compound = isArray(keyPath);\n                                var result = {\n                                    name: name,\n                                    compound: compound,\n                                    keyPath: keyPath,\n                                    unique: unique,\n                                    multiEntry: multiEntry,\n                                    extractKey: getKeyExtractor(keyPath)\n                                };\n                                indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                                return result;\n                            }),\n                            getIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n                        };\n                        indexByKeyPath[\":id\"] = result.primaryKey;\n                        if (keyPath != null) {\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                        }\n                        return result;\n                    })\n                },\n                hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                    !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n            };\n        }\n        function makeIDBKeyRange(range) {\n            if (range.type === 3 )\n                return null;\n            if (range.type === 4 )\n                throw new Error(\"Cannot convert never type to IDBKeyRange\");\n            var lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n            var idbRange = lower === undefined ?\n                upper === undefined ?\n                    null :\n                    IdbKeyRange.upperBound(upper, !!upperOpen) :\n                upper === undefined ?\n                    IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                    IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n            return idbRange;\n        }\n        function createDbCoreTable(tableSchema) {\n            var tableName = tableSchema.name;\n            function mutate(_a) {\n                var trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var store = trans.objectStore(tableName);\n                    var outbound = store.keyPath == null;\n                    var isAddOrPut = type === \"put\" || type === \"add\";\n                    if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                        throw new Error(\"Invalid operation type: \" + type);\n                    var length = (keys || values || { length: 1 }).length;\n                    if (keys && values && keys.length !== values.length) {\n                        throw new Error(\"Given keys array must have same length as given values array.\");\n                    }\n                    if (length === 0)\n                        return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                    var req;\n                    var reqs = [];\n                    var failures = [];\n                    var numFailures = 0;\n                    var errorHandler = function (event) {\n                        ++numFailures;\n                        preventDefault(event);\n                    };\n                    if (type === 'deleteRange') {\n                        if (range.type === 4 )\n                            return resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n                        if (range.type === 3 )\n                            reqs.push(req = store.clear());\n                        else\n                            reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                    }\n                    else {\n                        var _a = isAddOrPut ?\n                            outbound ?\n                                [values, keys] :\n                                [values, null] :\n                            [keys, null], args1 = _a[0], args2 = _a[1];\n                        if (isAddOrPut) {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = (args2 && args2[i] !== undefined ?\n                                    store[type](args1[i], args2[i]) :\n                                    store[type](args1[i])));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                        else {\n                            for (var i = 0; i < length; ++i) {\n                                reqs.push(req = store[type](args1[i]));\n                                req.onerror = errorHandler;\n                            }\n                        }\n                    }\n                    var done = function (event) {\n                        var lastResult = event.target.result;\n                        reqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n                        resolve({\n                            numFailures: numFailures,\n                            failures: failures,\n                            results: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n                            lastResult: lastResult\n                        });\n                    };\n                    req.onerror = function (event) {\n                        errorHandler(event);\n                        done(event);\n                    };\n                    req.onsuccess = done;\n                });\n            }\n            function openCursor(_a) {\n                var trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n                return new Promise(function (resolve, reject) {\n                    resolve = wrap(resolve);\n                    var index = query.index, range = query.range;\n                    var store = trans.objectStore(tableName);\n                    var source = index.isPrimaryKey ?\n                        store :\n                        store.index(index.name);\n                    var direction = reverse ?\n                        unique ?\n                            \"prevunique\" :\n                            \"prev\" :\n                        unique ?\n                            \"nextunique\" :\n                            \"next\";\n                    var req = values || !('openKeyCursor' in source) ?\n                        source.openCursor(makeIDBKeyRange(range), direction) :\n                        source.openKeyCursor(makeIDBKeyRange(range), direction);\n                    req.onerror = eventRejectHandler(reject);\n                    req.onsuccess = wrap(function (ev) {\n                        var cursor = req.result;\n                        if (!cursor) {\n                            resolve(null);\n                            return;\n                        }\n                        cursor.___id = ++_id_counter;\n                        cursor.done = false;\n                        var _cursorContinue = cursor.continue.bind(cursor);\n                        var _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                        if (_cursorContinuePrimaryKey)\n                            _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                        var _cursorAdvance = cursor.advance.bind(cursor);\n                        var doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n                        var doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n                        cursor.trans = trans;\n                        cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                        cursor.fail = wrap(reject);\n                        cursor.next = function () {\n                            var _this = this;\n                            var gotOne = 1;\n                            return this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n                        };\n                        cursor.start = function (callback) {\n                            var iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n                                resolveIteration = wrap(resolveIteration);\n                                req.onerror = eventRejectHandler(rejectIteration);\n                                cursor.fail = rejectIteration;\n                                cursor.stop = function (value) {\n                                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                    resolveIteration(value);\n                                };\n                            });\n                            var guardedCallback = function () {\n                                if (req.result) {\n                                    try {\n                                        callback();\n                                    }\n                                    catch (err) {\n                                        cursor.fail(err);\n                                    }\n                                }\n                                else {\n                                    cursor.done = true;\n                                    cursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n                                    cursor.stop();\n                                }\n                            };\n                            req.onsuccess = wrap(function (ev) {\n                                req.onsuccess = guardedCallback;\n                                guardedCallback();\n                            });\n                            cursor.continue = _cursorContinue;\n                            cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                            cursor.advance = _cursorAdvance;\n                            guardedCallback();\n                            return iterationPromise;\n                        };\n                        resolve(cursor);\n                    }, reject);\n                });\n            }\n            function query(hasGetAll) {\n                return function (request) {\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n                        var nonInfinitLimit = limit === Infinity ? undefined : limit;\n                        var index = query.index, range = query.range;\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        if (limit === 0)\n                            return resolve({ result: [] });\n                        if (hasGetAll) {\n                            var req = values ?\n                                source.getAll(idbKeyRange, nonInfinitLimit) :\n                                source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                            req.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n                            req.onerror = eventRejectHandler(reject);\n                        }\n                        else {\n                            var count_1 = 0;\n                            var req_1 = values || !('openKeyCursor' in source) ?\n                                source.openCursor(idbKeyRange) :\n                                source.openKeyCursor(idbKeyRange);\n                            var result_1 = [];\n                            req_1.onsuccess = function (event) {\n                                var cursor = req_1.result;\n                                if (!cursor)\n                                    return resolve({ result: result_1 });\n                                result_1.push(values ? cursor.value : cursor.primaryKey);\n                                if (++count_1 === limit)\n                                    return resolve({ result: result_1 });\n                                cursor.continue();\n                            };\n                            req_1.onerror = eventRejectHandler(reject);\n                        }\n                    });\n                };\n            }\n            return {\n                name: tableName,\n                schema: tableSchema,\n                mutate: mutate,\n                getMany: function (_a) {\n                    var trans = _a.trans, keys = _a.keys;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var length = keys.length;\n                        var result = new Array(length);\n                        var keyCount = 0;\n                        var callbackCount = 0;\n                        var req;\n                        var successHandler = function (event) {\n                            var req = event.target;\n                            if ((result[req._pos] = req.result) != null)\n                                ;\n                            if (++callbackCount === keyCount)\n                                resolve(result);\n                        };\n                        var errorHandler = eventRejectHandler(reject);\n                        for (var i = 0; i < length; ++i) {\n                            var key = keys[i];\n                            if (key != null) {\n                                req = store.get(keys[i]);\n                                req._pos = i;\n                                req.onsuccess = successHandler;\n                                req.onerror = errorHandler;\n                                ++keyCount;\n                            }\n                        }\n                        if (keyCount === 0)\n                            resolve(result);\n                    });\n                },\n                get: function (_a) {\n                    var trans = _a.trans, key = _a.key;\n                    return new Promise(function (resolve, reject) {\n                        resolve = wrap(resolve);\n                        var store = trans.objectStore(tableName);\n                        var req = store.get(key);\n                        req.onsuccess = function (event) { return resolve(event.target.result); };\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                },\n                query: query(hasGetAll),\n                openCursor: openCursor,\n                count: function (_a) {\n                    var query = _a.query, trans = _a.trans;\n                    var index = query.index, range = query.range;\n                    return new Promise(function (resolve, reject) {\n                        var store = trans.objectStore(tableName);\n                        var source = index.isPrimaryKey ? store : store.index(index.name);\n                        var idbKeyRange = makeIDBKeyRange(range);\n                        var req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                        req.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n                        req.onerror = eventRejectHandler(reject);\n                    });\n                }\n            };\n        }\n        var _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n        var tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n        var tableMap = {};\n        tables.forEach(function (table) { return tableMap[table.name] = table; });\n        return {\n            stack: \"dbcore\",\n            transaction: db.transaction.bind(db),\n            table: function (name) {\n                var result = tableMap[name];\n                if (!result)\n                    throw new Error(\"Table '\" + name + \"' not found\");\n                return tableMap[name];\n            },\n            MIN_KEY: -Infinity,\n            MAX_KEY: getMaxKey(IdbKeyRange),\n            schema: schema\n        };\n    }\n\n    function createMiddlewareStack(stackImpl, middlewares) {\n        return middlewares.reduce(function (down, _a) {\n            var create = _a.create;\n            return (__assign(__assign({}, down), create(down)));\n        }, stackImpl);\n    }\n    function createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n        var IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n        var dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n        return {\n            dbcore: dbcore\n        };\n    }\n    function generateMiddlewareStacks(_a, tmpTrans) {\n        var db = _a._novip;\n        var idbdb = tmpTrans.db;\n        var stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n        db.core = stacks.dbcore;\n        db.tables.forEach(function (table) {\n            var tableName = table.name;\n            if (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n                table.core = db.core.table(tableName);\n                if (db[tableName] instanceof db.Table) {\n                    db[tableName].core = table.core;\n                }\n            }\n        });\n    }\n\n    function setApiOnPlace(_a, objs, tableNames, dbschema) {\n        var db = _a._novip;\n        tableNames.forEach(function (tableName) {\n            var schema = dbschema[tableName];\n            objs.forEach(function (obj) {\n                var propDesc = getPropertyDescriptor(obj, tableName);\n                if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                    if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                        setProp(obj, tableName, {\n                            get: function () { return this.table(tableName); },\n                            set: function (value) {\n                                defineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n                            }\n                        });\n                    }\n                    else {\n                        obj[tableName] = new db.Table(tableName, schema);\n                    }\n                }\n            });\n        });\n    }\n    function removeTablesApi(_a, objs) {\n        var db = _a._novip;\n        objs.forEach(function (obj) {\n            for (var key in obj) {\n                if (obj[key] instanceof db.Table)\n                    delete obj[key];\n            }\n        });\n    }\n    function lowerVersionFirst(a, b) {\n        return a._cfg.version - b._cfg.version;\n    }\n    function runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n        var globalSchema = db._dbSchema;\n        var trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n        trans.create(idbUpgradeTrans);\n        trans._completion.catch(reject);\n        var rejectTransaction = trans._reject.bind(trans);\n        var transless = PSD.transless || PSD;\n        newScope(function () {\n            PSD.trans = trans;\n            PSD.transless = transless;\n            if (oldVersion === 0) {\n                keys(globalSchema).forEach(function (tableName) {\n                    createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n                });\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                DexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n            }\n            else\n                updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n        });\n    }\n    function updateTablesAndIndexes(_a, oldVersion, trans, idbUpgradeTrans) {\n        var db = _a._novip;\n        var queue = [];\n        var versions = db._versions;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n        var anyContentUpgraderHasRun = false;\n        var versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n        versToRun.forEach(function (version) {\n            queue.push(function () {\n                var oldSchema = globalSchema;\n                var newSchema = version._cfg.dbschema;\n                adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n                adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n                globalSchema = db._dbSchema = newSchema;\n                var diff = getSchemaDiff(oldSchema, newSchema);\n                diff.add.forEach(function (tuple) {\n                    createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n                });\n                diff.change.forEach(function (change) {\n                    if (change.recreate) {\n                        throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                    }\n                    else {\n                        var store_1 = idbUpgradeTrans.objectStore(change.name);\n                        change.add.forEach(function (idx) { return addIndex(store_1, idx); });\n                        change.change.forEach(function (idx) {\n                            store_1.deleteIndex(idx.name);\n                            addIndex(store_1, idx);\n                        });\n                        change.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n                    }\n                });\n                var contentUpgrade = version._cfg.contentUpgrade;\n                if (contentUpgrade && version._cfg.version > oldVersion) {\n                    generateMiddlewareStacks(db, idbUpgradeTrans);\n                    trans._memoizedTables = {};\n                    anyContentUpgraderHasRun = true;\n                    var upgradeSchema_1 = shallowClone(newSchema);\n                    diff.del.forEach(function (table) {\n                        upgradeSchema_1[table] = oldSchema[table];\n                    });\n                    removeTablesApi(db, [db.Transaction.prototype]);\n                    setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n                    trans.schema = upgradeSchema_1;\n                    var contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n                    if (contentUpgradeIsAsync_1) {\n                        incrementExpectedAwaits();\n                    }\n                    var returnValue_1;\n                    var promiseFollowed = DexiePromise.follow(function () {\n                        returnValue_1 = contentUpgrade(trans);\n                        if (returnValue_1) {\n                            if (contentUpgradeIsAsync_1) {\n                                var decrementor = decrementExpectedAwaits.bind(null, null);\n                                returnValue_1.then(decrementor, decrementor);\n                            }\n                        }\n                    });\n                    return (returnValue_1 && typeof returnValue_1.then === 'function' ?\n                        DexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n                }\n            });\n            queue.push(function (idbtrans) {\n                if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                    var newSchema = version._cfg.dbschema;\n                    deleteRemovedTables(newSchema, idbtrans);\n                }\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n                trans.schema = db._dbSchema;\n            });\n        });\n        function runQueue() {\n            return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n                DexiePromise.resolve();\n        }\n        return runQueue().then(function () {\n            createMissingTables(globalSchema, idbUpgradeTrans);\n        });\n    }\n    function getSchemaDiff(oldSchema, newSchema) {\n        var diff = {\n            del: [],\n            add: [],\n            change: []\n        };\n        var table;\n        for (table in oldSchema) {\n            if (!newSchema[table])\n                diff.del.push(table);\n        }\n        for (table in newSchema) {\n            var oldDef = oldSchema[table], newDef = newSchema[table];\n            if (!oldDef) {\n                diff.add.push([table, newDef]);\n            }\n            else {\n                var change = {\n                    name: table,\n                    def: newDef,\n                    recreate: false,\n                    del: [],\n                    add: [],\n                    change: []\n                };\n                if ((\n                '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                    (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n                 {\n                    change.recreate = true;\n                    diff.change.push(change);\n                }\n                else {\n                    var oldIndexes = oldDef.idxByName;\n                    var newIndexes = newDef.idxByName;\n                    var idxName = void 0;\n                    for (idxName in oldIndexes) {\n                        if (!newIndexes[idxName])\n                            change.del.push(idxName);\n                    }\n                    for (idxName in newIndexes) {\n                        var oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                        if (!oldIdx)\n                            change.add.push(newIdx);\n                        else if (oldIdx.src !== newIdx.src)\n                            change.change.push(newIdx);\n                    }\n                    if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                        diff.change.push(change);\n                    }\n                }\n            }\n        }\n        return diff;\n    }\n    function createTable(idbtrans, tableName, primKey, indexes) {\n        var store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n            { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n            { autoIncrement: primKey.auto });\n        indexes.forEach(function (idx) { return addIndex(store, idx); });\n        return store;\n    }\n    function createMissingTables(newSchema, idbtrans) {\n        keys(newSchema).forEach(function (tableName) {\n            if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n                createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n            }\n        });\n    }\n    function deleteRemovedTables(newSchema, idbtrans) {\n        [].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n            return newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n        });\n    }\n    function addIndex(store, idx) {\n        store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n    }\n    function buildGlobalSchema(db, idbdb, tmpTrans) {\n        var globalSchema = {};\n        var dbStoreNames = slice(idbdb.objectStoreNames, 0);\n        dbStoreNames.forEach(function (storeName) {\n            var store = tmpTrans.objectStore(storeName);\n            var keyPath = store.keyPath;\n            var primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n            var indexes = [];\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var idbindex = store.index(store.indexNames[j]);\n                keyPath = idbindex.keyPath;\n                var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n                indexes.push(index);\n            }\n            globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n        });\n        return globalSchema;\n    }\n    function readGlobalSchema(_a, idbdb, tmpTrans) {\n        var db = _a._novip;\n        db.verno = idbdb.version / 10;\n        var globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n        db._storeNames = slice(idbdb.objectStoreNames, 0);\n        setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n    }\n    function verifyInstalledSchema(db, tmpTrans) {\n        var installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n        var diff = getSchemaDiff(installedSchema, db._dbSchema);\n        return !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n    }\n    function adjustToExistingIndexNames(_a, schema, idbtrans) {\n        var db = _a._novip;\n        var storeNames = idbtrans.db.objectStoreNames;\n        for (var i = 0; i < storeNames.length; ++i) {\n            var storeName = storeNames[i];\n            var store = idbtrans.objectStore(storeName);\n            db._hasGetAll = 'getAll' in store;\n            for (var j = 0; j < store.indexNames.length; ++j) {\n                var indexName = store.indexNames[j];\n                var keyPath = store.index(indexName).keyPath;\n                var dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n                if (schema[storeName]) {\n                    var indexSpec = schema[storeName].idxByName[dexieName];\n                    if (indexSpec) {\n                        indexSpec.name = indexName;\n                        delete schema[storeName].idxByName[dexieName];\n                        schema[storeName].idxByName[indexName] = indexSpec;\n                    }\n                }\n            }\n        }\n        if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n            !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n            _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n            [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n            db._hasGetAll = false;\n        }\n    }\n    function parseIndexSyntax(primKeyAndIndexes) {\n        return primKeyAndIndexes.split(',').map(function (index, indexNum) {\n            index = index.trim();\n            var name = index.replace(/([&*]|\\+\\+)/g, \"\");\n            var keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n            return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n        });\n    }\n\n    var Version =  (function () {\n        function Version() {\n        }\n        Version.prototype._parseStoresSpec = function (stores, outSchema) {\n            keys(stores).forEach(function (tableName) {\n                if (stores[tableName] !== null) {\n                    var indexes = parseIndexSyntax(stores[tableName]);\n                    var primKey = indexes.shift();\n                    if (primKey.multi)\n                        throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                    indexes.forEach(function (idx) {\n                        if (idx.auto)\n                            throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                        if (!idx.keyPath)\n                            throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                    });\n                    outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n                }\n            });\n        };\n        Version.prototype.stores = function (stores) {\n            var db = this.db;\n            this._cfg.storesSource = this._cfg.storesSource ?\n                extend(this._cfg.storesSource, stores) :\n                stores;\n            var versions = db._versions;\n            var storesSpec = {};\n            var dbschema = {};\n            versions.forEach(function (version) {\n                extend(storesSpec, version._cfg.storesSource);\n                dbschema = (version._cfg.dbschema = {});\n                version._parseStoresSpec(storesSpec, dbschema);\n            });\n            db._dbSchema = dbschema;\n            removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n            setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n            db._storeNames = keys(dbschema);\n            return this;\n        };\n        Version.prototype.upgrade = function (upgradeFunction) {\n            this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n            return this;\n        };\n        return Version;\n    }());\n\n    function createVersionConstructor(db) {\n        return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n            this.db = db;\n            this._cfg = {\n                version: versionNumber,\n                storesSource: null,\n                dbschema: {},\n                tables: {},\n                contentUpgrade: null\n            };\n        });\n    }\n\n    function getDbNamesTable(indexedDB, IDBKeyRange) {\n        var dbNamesDB = indexedDB[\"_dbNamesDB\"];\n        if (!dbNamesDB) {\n            dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n                addons: [],\n                indexedDB: indexedDB,\n                IDBKeyRange: IDBKeyRange,\n            });\n            dbNamesDB.version(1).stores({ dbnames: \"name\" });\n        }\n        return dbNamesDB.table(\"dbnames\");\n    }\n    function hasDatabasesNative(indexedDB) {\n        return indexedDB && typeof indexedDB.databases === \"function\";\n    }\n    function getDatabaseNames(_a) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        return hasDatabasesNative(indexedDB)\n            ? Promise.resolve(indexedDB.databases()).then(function (infos) {\n                return infos\n                    .map(function (info) { return info.name; })\n                    .filter(function (name) { return name !== DBNAMES_DB; });\n            })\n            : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n    }\n    function _onDatabaseCreated(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n    }\n    function _onDatabaseDeleted(_a, name) {\n        var indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n        !hasDatabasesNative(indexedDB) &&\n            name !== DBNAMES_DB &&\n            getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n    }\n\n    function vip(fn) {\n        return newScope(function () {\n            PSD.letThrough = true;\n            return fn();\n        });\n    }\n\n    function idbReady() {\n        var isSafari = !navigator.userAgentData &&\n            /Safari\\//.test(navigator.userAgent) &&\n            !/Chrom(e|ium)\\//.test(navigator.userAgent);\n        if (!isSafari || !indexedDB.databases)\n            return Promise.resolve();\n        var intervalId;\n        return new Promise(function (resolve) {\n            var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n            intervalId = setInterval(tryIdb, 100);\n            tryIdb();\n        }).finally(function () { return clearInterval(intervalId); });\n    }\n\n    function dexieOpen(db) {\n        var state = db._state;\n        var indexedDB = db._deps.indexedDB;\n        if (state.isBeingOpened || db.idbdb)\n            return state.dbReadyPromise.then(function () { return state.dbOpenError ?\n                rejection(state.dbOpenError) :\n                db; });\n        debug && (state.openCanceller._stackHolder = getErrorWithStack());\n        state.isBeingOpened = true;\n        state.dbOpenError = null;\n        state.openComplete = false;\n        var openCanceller = state.openCanceller;\n        function throwIfCancelled() {\n            if (state.openCanceller !== openCanceller)\n                throw new exceptions.DatabaseClosed('db.open() was cancelled');\n        }\n        var resolveDbReady = state.dbReadyResolve,\n        upgradeTransaction = null, wasCreated = false;\n        return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(function () { return new DexiePromise(function (resolve, reject) {\n                throwIfCancelled();\n                if (!indexedDB)\n                    throw new exceptions.MissingAPI();\n                var dbName = db.name;\n                var req = state.autoSchema ?\n                    indexedDB.open(dbName) :\n                    indexedDB.open(dbName, Math.round(db.verno * 10));\n                if (!req)\n                    throw new exceptions.MissingAPI();\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = wrap(db._fireOnBlocked);\n                req.onupgradeneeded = wrap(function (e) {\n                    upgradeTransaction = req.transaction;\n                    if (state.autoSchema && !db._options.allowEmptyDB) {\n                        req.onerror = preventDefault;\n                        upgradeTransaction.abort();\n                        req.result.close();\n                        var delreq = indexedDB.deleteDatabase(dbName);\n                        delreq.onsuccess = delreq.onerror = wrap(function () {\n                            reject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n                        });\n                    }\n                    else {\n                        upgradeTransaction.onerror = eventRejectHandler(reject);\n                        var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                        wasCreated = oldVer < 1;\n                        db._novip.idbdb = req.result;\n                        runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                    }\n                }, reject);\n                req.onsuccess = wrap(function () {\n                    upgradeTransaction = null;\n                    var idbdb = db._novip.idbdb = req.result;\n                    var objectStoreNames = slice(idbdb.objectStoreNames);\n                    if (objectStoreNames.length > 0)\n                        try {\n                            var tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                            if (state.autoSchema)\n                                readGlobalSchema(db, idbdb, tmpTrans);\n                            else {\n                                adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                                if (!verifyInstalledSchema(db, tmpTrans)) {\n                                    console.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n                                }\n                            }\n                            generateMiddlewareStacks(db, tmpTrans);\n                        }\n                        catch (e) {\n                        }\n                    connections.push(db);\n                    idbdb.onversionchange = wrap(function (ev) {\n                        state.vcFired = true;\n                        db.on(\"versionchange\").fire(ev);\n                    });\n                    idbdb.onclose = wrap(function (ev) {\n                        db.on(\"close\").fire(ev);\n                    });\n                    if (wasCreated)\n                        _onDatabaseCreated(db._deps, dbName);\n                    resolve();\n                }, reject);\n            }); })]).then(function () {\n            throwIfCancelled();\n            state.onReadyBeingFired = [];\n            return DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n                if (state.onReadyBeingFired.length > 0) {\n                    var remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n                    state.onReadyBeingFired = [];\n                    return DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n                }\n            });\n        }).finally(function () {\n            state.onReadyBeingFired = null;\n            state.isBeingOpened = false;\n        }).then(function () {\n            return db;\n        }).catch(function (err) {\n            state.dbOpenError = err;\n            try {\n                upgradeTransaction && upgradeTransaction.abort();\n            }\n            catch (_a) { }\n            if (openCanceller === state.openCanceller) {\n                db._close();\n            }\n            return rejection(err);\n        }).finally(function () {\n            state.openComplete = true;\n            resolveDbReady();\n        });\n    }\n\n    function awaitIterator(iterator) {\n        var callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n        function step(getNext) {\n            return function (val) {\n                var next = getNext(val), value = next.value;\n                return next.done ? value :\n                    (!value || typeof value.then !== 'function' ?\n                        isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                        value.then(onSuccess, onError));\n            };\n        }\n        return step(callNext)();\n    }\n\n    function extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n        var i = arguments.length;\n        if (i < 2)\n            throw new exceptions.InvalidArgument(\"Too few arguments\");\n        var args = new Array(i - 1);\n        while (--i)\n            args[i - 1] = arguments[i];\n        scopeFunc = args.pop();\n        var tables = flatten(args);\n        return [mode, tables, scopeFunc];\n    }\n    function enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n        return DexiePromise.resolve().then(function () {\n            var transless = PSD.transless || PSD;\n            var trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n            var zoneProps = {\n                trans: trans,\n                transless: transless\n            };\n            if (parentTransaction) {\n                trans.idbtrans = parentTransaction.idbtrans;\n            }\n            else {\n                try {\n                    trans.create();\n                    db._state.PR1398_maxLoop = 3;\n                }\n                catch (ex) {\n                    if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                        console.warn('Dexie: Need to reopen db');\n                        db._close();\n                        return db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n                    }\n                    return rejection(ex);\n                }\n            }\n            var scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            var returnValue;\n            var promiseFollowed = DexiePromise.follow(function () {\n                returnValue = scopeFunc.call(trans, trans);\n                if (returnValue) {\n                    if (scopeFuncIsAsync) {\n                        var decrementor = decrementExpectedAwaits.bind(null, null);\n                        returnValue.then(decrementor, decrementor);\n                    }\n                    else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                        returnValue = awaitIterator(returnValue);\n                    }\n                }\n            }, zoneProps);\n            return (returnValue && typeof returnValue.then === 'function' ?\n                DexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n                    x\n                    : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n                : promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n                if (parentTransaction)\n                    trans._resolve();\n                return trans._completion.then(function () { return x; });\n            }).catch(function (e) {\n                trans._reject(e);\n                return rejection(e);\n            });\n        });\n    }\n\n    function pad(a, value, count) {\n        var result = isArray(a) ? a.slice() : [a];\n        for (var i = 0; i < count; ++i)\n            result.push(value);\n        return result;\n    }\n    function createVirtualIndexMiddleware(down) {\n        return __assign(__assign({}, down), { table: function (tableName) {\n                var table = down.table(tableName);\n                var schema = table.schema;\n                var indexLookup = {};\n                var allVirtualIndexes = [];\n                function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                    var keyPathAlias = getKeyPathAlias(keyPath);\n                    var indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                    var keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                    var isVirtual = keyTail > 0;\n                    var virtualIndex = __assign(__assign({}, lowLevelIndex), { isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n                    indexList.push(virtualIndex);\n                    if (!virtualIndex.isPrimaryKey) {\n                        allVirtualIndexes.push(virtualIndex);\n                    }\n                    if (keyLength > 1) {\n                        var virtualKeyPath = keyLength === 2 ?\n                            keyPath[0] :\n                            keyPath.slice(0, keyLength - 1);\n                        addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                    }\n                    indexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n                    return virtualIndex;\n                }\n                var primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n                indexLookup[\":id\"] = [primaryKey];\n                for (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n                    var index = _a[_i];\n                    addVirtualIndexes(index.keyPath, 0, index);\n                }\n                function findBestIndex(keyPath) {\n                    var result = indexLookup[getKeyPathAlias(keyPath)];\n                    return result && result[0];\n                }\n                function translateRange(range, keyTail) {\n                    return {\n                        type: range.type === 1  ?\n                            2  :\n                            range.type,\n                        lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                        lowerOpen: true,\n                        upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                        upperOpen: true\n                    };\n                }\n                function translateRequest(req) {\n                    var index = req.query.index;\n                    return index.isVirtual ? __assign(__assign({}, req), { query: {\n                            index: index,\n                            range: translateRange(req.query.range, index.keyTail)\n                        } }) : req;\n                }\n                var result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n                        return table.count(translateRequest(req));\n                    }, query: function (req) {\n                        return table.query(translateRequest(req));\n                    }, openCursor: function (req) {\n                        var _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n                        if (!isVirtual)\n                            return table.openCursor(req);\n                        function createVirtualCursor(cursor) {\n                            function _continue(key) {\n                                key != null ?\n                                    cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                    req.unique ?\n                                        cursor.continue(cursor.key.slice(0, keyLength)\n                                            .concat(req.reverse\n                                            ? down.MIN_KEY\n                                            : down.MAX_KEY, keyTail)) :\n                                        cursor.continue();\n                            }\n                            var virtualCursor = Object.create(cursor, {\n                                continue: { value: _continue },\n                                continuePrimaryKey: {\n                                    value: function (key, primaryKey) {\n                                        cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                    }\n                                },\n                                primaryKey: {\n                                    get: function () {\n                                        return cursor.primaryKey;\n                                    }\n                                },\n                                key: {\n                                    get: function () {\n                                        var key = cursor.key;\n                                        return keyLength === 1 ?\n                                            key[0] :\n                                            key.slice(0, keyLength);\n                                    }\n                                },\n                                value: {\n                                    get: function () {\n                                        return cursor.value;\n                                    }\n                                }\n                            });\n                            return virtualCursor;\n                        }\n                        return table.openCursor(translateRequest(req))\n                            .then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n                    } });\n                return result;\n            } });\n    }\n    var virtualIndexMiddleware = {\n        stack: \"dbcore\",\n        name: \"VirtualIndexMiddleware\",\n        level: 1,\n        create: createVirtualIndexMiddleware\n    };\n\n    function getObjectDiff(a, b, rv, prfx) {\n        rv = rv || {};\n        prfx = prfx || '';\n        keys(a).forEach(function (prop) {\n            if (!hasOwn(b, prop)) {\n                rv[prfx + prop] = undefined;\n            }\n            else {\n                var ap = a[prop], bp = b[prop];\n                if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                    var apTypeName = toStringTag(ap);\n                    var bpTypeName = toStringTag(bp);\n                    if (apTypeName !== bpTypeName) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                    else if (apTypeName === 'Object') {\n                        getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                    }\n                    else if (ap !== bp) {\n                        rv[prfx + prop] = b[prop];\n                    }\n                }\n                else if (ap !== bp)\n                    rv[prfx + prop] = b[prop];\n            }\n        });\n        keys(b).forEach(function (prop) {\n            if (!hasOwn(a, prop)) {\n                rv[prfx + prop] = b[prop];\n            }\n        });\n        return rv;\n    }\n\n    function getEffectiveKeys(primaryKey, req) {\n        if (req.type === 'delete')\n            return req.keys;\n        return req.keys || req.values.map(primaryKey.extractKey);\n    }\n\n    var hooksMiddleware = {\n        stack: \"dbcore\",\n        name: \"HooksMiddleware\",\n        level: 2,\n        create: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n                var downTable = downCore.table(tableName);\n                var primaryKey = downTable.schema.primaryKey;\n                var tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n                        var dxTrans = PSD.trans;\n                        var _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n                        switch (req.type) {\n                            case 'add':\n                                if (creating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'put':\n                                if (creating.fire === nop && updating.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'delete':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n                            case 'deleteRange':\n                                if (deleting.fire === nop)\n                                    break;\n                                return dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n                        }\n                        return downTable.mutate(req);\n                        function addPutOrDelete(req) {\n                            var dxTrans = PSD.trans;\n                            var keys = req.keys || getEffectiveKeys(primaryKey, req);\n                            if (!keys)\n                                throw new Error(\"Keys missing\");\n                            req = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n                            if (req.type !== 'delete')\n                                req.values = __spreadArray([], req.values, true);\n                            if (req.keys)\n                                req.keys = __spreadArray([], req.keys, true);\n                            return getExistingValues(downTable, req, keys).then(function (existingValues) {\n                                var contexts = keys.map(function (key, i) {\n                                    var existingValue = existingValues[i];\n                                    var ctx = { onerror: null, onsuccess: null };\n                                    if (req.type === 'delete') {\n                                        deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                    }\n                                    else if (req.type === 'add' || existingValue === undefined) {\n                                        var generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                        if (key == null && generatedPrimaryKey != null) {\n                                            key = generatedPrimaryKey;\n                                            req.keys[i] = key;\n                                            if (!primaryKey.outbound) {\n                                                setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                            }\n                                        }\n                                    }\n                                    else {\n                                        var objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                        var additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                        if (additionalChanges_1) {\n                                            var requestedValue_1 = req.values[i];\n                                            Object.keys(additionalChanges_1).forEach(function (keyPath) {\n                                                if (hasOwn(requestedValue_1, keyPath)) {\n                                                    requestedValue_1[keyPath] = additionalChanges_1[keyPath];\n                                                }\n                                                else {\n                                                    setByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n                                                }\n                                            });\n                                        }\n                                    }\n                                    return ctx;\n                                });\n                                return downTable.mutate(req).then(function (_a) {\n                                    var failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n                                    for (var i = 0; i < keys.length; ++i) {\n                                        var primKey = results ? results[i] : keys[i];\n                                        var ctx = contexts[i];\n                                        if (primKey == null) {\n                                            ctx.onerror && ctx.onerror(failures[i]);\n                                        }\n                                        else {\n                                            ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                                req.values[i] :\n                                                primKey\n                                            );\n                                        }\n                                    }\n                                    return { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n                                }).catch(function (error) {\n                                    contexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n                                    return Promise.reject(error);\n                                });\n                            });\n                        }\n                        function deleteRange(req) {\n                            return deleteNextChunk(req.trans, req.range, 10000);\n                        }\n                        function deleteNextChunk(trans, range, limit) {\n                            return downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n                                .then(function (_a) {\n                                var result = _a.result;\n                                return addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n                                    if (res.numFailures > 0)\n                                        return Promise.reject(res.failures[0]);\n                                    if (result.length < limit) {\n                                        return { failures: [], numFailures: 0, lastResult: undefined };\n                                    }\n                                    else {\n                                        return deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n                                    }\n                                });\n                            });\n                        }\n                    } });\n                return tableMiddleware;\n            } })); }\n    };\n    function getExistingValues(table, req, effectiveKeys) {\n        return req.type === \"add\"\n            ? Promise.resolve([])\n            : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n    }\n\n    function getFromTransactionCache(keys, cache, clone) {\n        try {\n            if (!cache)\n                return null;\n            if (cache.keys.length < keys.length)\n                return null;\n            var result = [];\n            for (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n                if (cmp(cache.keys[i], keys[j]) !== 0)\n                    continue;\n                result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n                ++j;\n            }\n            return result.length === keys.length ? result : null;\n        }\n        catch (_a) {\n            return null;\n        }\n    }\n    var cacheExistingValuesMiddleware = {\n        stack: \"dbcore\",\n        level: -1,\n        create: function (core) {\n            return {\n                table: function (tableName) {\n                    var table = core.table(tableName);\n                    return __assign(__assign({}, table), { getMany: function (req) {\n                            if (!req.cache) {\n                                return table.getMany(req);\n                            }\n                            var cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                            if (cachedResult) {\n                                return DexiePromise.resolve(cachedResult);\n                            }\n                            return table.getMany(req).then(function (res) {\n                                req.trans[\"_cache\"] = {\n                                    keys: req.keys,\n                                    values: req.cache === \"clone\" ? deepClone(res) : res,\n                                };\n                                return res;\n                            });\n                        }, mutate: function (req) {\n                            if (req.type !== \"add\")\n                                req.trans[\"_cache\"] = null;\n                            return table.mutate(req);\n                        } });\n                },\n            };\n        },\n    };\n\n    var _a;\n    function isEmptyRange(node) {\n        return !(\"from\" in node);\n    }\n    var RangeSet = function (fromOrTree, to) {\n        if (this) {\n            extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n        }\n        else {\n            var rv = new RangeSet();\n            if (fromOrTree && (\"d\" in fromOrTree)) {\n                extend(rv, fromOrTree);\n            }\n            return rv;\n        }\n    };\n    props(RangeSet.prototype, (_a = {\n            add: function (rangeSet) {\n                mergeRanges(this, rangeSet);\n                return this;\n            },\n            addKey: function (key) {\n                addRange(this, key, key);\n                return this;\n            },\n            addKeys: function (keys) {\n                var _this = this;\n                keys.forEach(function (key) { return addRange(_this, key, key); });\n                return this;\n            }\n        },\n        _a[iteratorSymbol] = function () {\n            return getRangeSetIterator(this);\n        },\n        _a));\n    function addRange(target, from, to) {\n        var diff = cmp(from, to);\n        if (isNaN(diff))\n            return;\n        if (diff > 0)\n            throw RangeError();\n        if (isEmptyRange(target))\n            return extend(target, { from: from, to: to, d: 1 });\n        var left = target.l;\n        var right = target.r;\n        if (cmp(to, target.from) < 0) {\n            left\n                ? addRange(left, from, to)\n                : (target.l = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.to) > 0) {\n            right\n                ? addRange(right, from, to)\n                : (target.r = { from: from, to: to, d: 1, l: null, r: null });\n            return rebalance(target);\n        }\n        if (cmp(from, target.from) < 0) {\n            target.from = from;\n            target.l = null;\n            target.d = right ? right.d + 1 : 1;\n        }\n        if (cmp(to, target.to) > 0) {\n            target.to = to;\n            target.r = null;\n            target.d = target.l ? target.l.d + 1 : 1;\n        }\n        var rightWasCutOff = !target.r;\n        if (left && !target.l) {\n            mergeRanges(target, left);\n        }\n        if (right && rightWasCutOff) {\n            mergeRanges(target, right);\n        }\n    }\n    function mergeRanges(target, newSet) {\n        function _addRangeSet(target, _a) {\n            var from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n            addRange(target, from, to);\n            if (l)\n                _addRangeSet(target, l);\n            if (r)\n                _addRangeSet(target, r);\n        }\n        if (!isEmptyRange(newSet))\n            _addRangeSet(target, newSet);\n    }\n    function rangesOverlap(rangeSet1, rangeSet2) {\n        var i1 = getRangeSetIterator(rangeSet2);\n        var nextResult1 = i1.next();\n        if (nextResult1.done)\n            return false;\n        var a = nextResult1.value;\n        var i2 = getRangeSetIterator(rangeSet1);\n        var nextResult2 = i2.next(a.from);\n        var b = nextResult2.value;\n        while (!nextResult1.done && !nextResult2.done) {\n            if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n                return true;\n            cmp(a.from, b.from) < 0\n                ? (a = (nextResult1 = i1.next(b.from)).value)\n                : (b = (nextResult2 = i2.next(a.from)).value);\n        }\n        return false;\n    }\n    function getRangeSetIterator(node) {\n        var state = isEmptyRange(node) ? null : { s: 0, n: node };\n        return {\n            next: function (key) {\n                var keyProvided = arguments.length > 0;\n                while (state) {\n                    switch (state.s) {\n                        case 0:\n                            state.s = 1;\n                            if (keyProvided) {\n                                while (state.n.l && cmp(key, state.n.from) < 0)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                            else {\n                                while (state.n.l)\n                                    state = { up: state, n: state.n.l, s: 1 };\n                            }\n                        case 1:\n                            state.s = 2;\n                            if (!keyProvided || cmp(key, state.n.to) <= 0)\n                                return { value: state.n, done: false };\n                        case 2:\n                            if (state.n.r) {\n                                state.s = 3;\n                                state = { up: state, n: state.n.r, s: 0 };\n                                continue;\n                            }\n                        case 3:\n                            state = state.up;\n                    }\n                }\n                return { done: true };\n            },\n        };\n    }\n    function rebalance(target) {\n        var _a, _b;\n        var diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n        var r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n        if (r) {\n            var l = r === \"r\" ? \"l\" : \"r\";\n            var rootClone = __assign({}, target);\n            var oldRootRight = target[r];\n            target.from = oldRootRight.from;\n            target.to = oldRootRight.to;\n            target[r] = oldRootRight[r];\n            rootClone[r] = oldRootRight[l];\n            target[l] = rootClone;\n            rootClone.d = computeDepth(rootClone);\n        }\n        target.d = computeDepth(target);\n    }\n    function computeDepth(_a) {\n        var r = _a.r, l = _a.l;\n        return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n    }\n\n    var observabilityMiddleware = {\n        stack: \"dbcore\",\n        level: 0,\n        create: function (core) {\n            var dbName = core.schema.name;\n            var FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n            return __assign(__assign({}, core), { table: function (tableName) {\n                    var table = core.table(tableName);\n                    var schema = table.schema;\n                    var primaryKey = schema.primaryKey;\n                    var extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n                    var tableClone = __assign(__assign({}, table), { mutate: function (req) {\n                            var trans = req.trans;\n                            var mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                            var getRangeSet = function (indexName) {\n                                var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                return (mutatedParts[part] ||\n                                    (mutatedParts[part] = new RangeSet()));\n                            };\n                            var pkRangeSet = getRangeSet(\"\");\n                            var delsRangeSet = getRangeSet(\":dels\");\n                            var type = req.type;\n                            var _a = req.type === \"deleteRange\"\n                                ? [req.range]\n                                : req.type === \"delete\"\n                                    ? [req.keys]\n                                    : req.values.length < 50\n                                        ? [[], req.values]\n                                        : [], keys = _a[0], newObjs = _a[1];\n                            var oldCache = req.trans[\"_cache\"];\n                            return table.mutate(req).then(function (res) {\n                                if (isArray(keys)) {\n                                    if (type !== \"delete\")\n                                        keys = res.results;\n                                    pkRangeSet.addKeys(keys);\n                                    var oldObjs = getFromTransactionCache(keys, oldCache);\n                                    if (!oldObjs && type !== \"add\") {\n                                        delsRangeSet.addKeys(keys);\n                                    }\n                                    if (oldObjs || newObjs) {\n                                        trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                    }\n                                }\n                                else if (keys) {\n                                    var range = { from: keys.lower, to: keys.upper };\n                                    delsRangeSet.add(range);\n                                    pkRangeSet.add(range);\n                                }\n                                else {\n                                    pkRangeSet.add(FULL_RANGE);\n                                    delsRangeSet.add(FULL_RANGE);\n                                    schema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n                                }\n                                return res;\n                            });\n                        } });\n                    var getRange = function (_a) {\n                        var _b, _c;\n                        var _d = _a.query, index = _d.index, range = _d.range;\n                        return [\n                            index,\n                            new RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n                        ];\n                    };\n                    var readSubscribers = {\n                        get: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n                        getMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n                        count: getRange,\n                        query: getRange,\n                        openCursor: getRange,\n                    };\n                    keys(readSubscribers).forEach(function (method) {\n                        tableClone[method] = function (req) {\n                            var subscr = PSD.subscr;\n                            if (subscr) {\n                                var getRangeSet = function (indexName) {\n                                    var part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n                                    return (subscr[part] ||\n                                        (subscr[part] = new RangeSet()));\n                                };\n                                var pkRangeSet_1 = getRangeSet(\"\");\n                                var delsRangeSet_1 = getRangeSet(\":dels\");\n                                var _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n                                getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                                if (!queriedIndex.isPrimaryKey) {\n                                    if (method === \"count\") {\n                                        delsRangeSet_1.add(FULL_RANGE);\n                                    }\n                                    else {\n                                        var keysPromise_1 = method === \"query\" &&\n                                            outbound &&\n                                            req.values &&\n                                            table.query(__assign(__assign({}, req), { values: false }));\n                                        return table[method].apply(this, arguments).then(function (res) {\n                                            if (method === \"query\") {\n                                                if (outbound && req.values) {\n                                                    return keysPromise_1.then(function (_a) {\n                                                        var resultingKeys = _a.result;\n                                                        pkRangeSet_1.addKeys(resultingKeys);\n                                                        return res;\n                                                    });\n                                                }\n                                                var pKeys = req.values\n                                                    ? res.result.map(extractKey)\n                                                    : res.result;\n                                                if (req.values) {\n                                                    pkRangeSet_1.addKeys(pKeys);\n                                                }\n                                                else {\n                                                    delsRangeSet_1.addKeys(pKeys);\n                                                }\n                                            }\n                                            else if (method === \"openCursor\") {\n                                                var cursor_1 = res;\n                                                var wantValues_1 = req.values;\n                                                return (cursor_1 &&\n                                                    Object.create(cursor_1, {\n                                                        key: {\n                                                            get: function () {\n                                                                delsRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.key;\n                                                            },\n                                                        },\n                                                        primaryKey: {\n                                                            get: function () {\n                                                                var pkey = cursor_1.primaryKey;\n                                                                delsRangeSet_1.addKey(pkey);\n                                                                return pkey;\n                                                            },\n                                                        },\n                                                        value: {\n                                                            get: function () {\n                                                                wantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n                                                                return cursor_1.value;\n                                                            },\n                                                        },\n                                                    }));\n                                            }\n                                            return res;\n                                        });\n                                    }\n                                }\n                            }\n                            return table[method].apply(this, arguments);\n                        };\n                    });\n                    return tableClone;\n                } });\n        },\n    };\n    function trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n        function addAffectedIndex(ix) {\n            var rangeSet = getRangeSet(ix.name || \"\");\n            function extractKey(obj) {\n                return obj != null ? ix.extractKey(obj) : null;\n            }\n            var addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n                ? key.forEach(function (key) { return rangeSet.addKey(key); })\n                : rangeSet.addKey(key); };\n            (oldObjs || newObjs).forEach(function (_, i) {\n                var oldKey = oldObjs && extractKey(oldObjs[i]);\n                var newKey = newObjs && extractKey(newObjs[i]);\n                if (cmp(oldKey, newKey) !== 0) {\n                    if (oldKey != null)\n                        addKeyOrKeys(oldKey);\n                    if (newKey != null)\n                        addKeyOrKeys(newKey);\n                }\n            });\n        }\n        schema.indexes.forEach(addAffectedIndex);\n    }\n\n    var Dexie$1 =  (function () {\n        function Dexie(name, options) {\n            var _this = this;\n            this._middlewares = {};\n            this.verno = 0;\n            var deps = Dexie.dependencies;\n            this._options = options = __assign({\n                addons: Dexie.addons, autoOpen: true,\n                indexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n            this._deps = {\n                indexedDB: options.indexedDB,\n                IDBKeyRange: options.IDBKeyRange\n            };\n            var addons = options.addons;\n            this._dbSchema = {};\n            this._versions = [];\n            this._storeNames = [];\n            this._allTables = {};\n            this.idbdb = null;\n            this._novip = this;\n            var state = {\n                dbOpenError: null,\n                isBeingOpened: false,\n                onReadyBeingFired: null,\n                openComplete: false,\n                dbReadyResolve: nop,\n                dbReadyPromise: null,\n                cancelOpen: nop,\n                openCanceller: null,\n                autoSchema: true,\n                PR1398_maxLoop: 3\n            };\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n            this._state = state;\n            this.name = name;\n            this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n            this.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n                return function (subscriber, bSticky) {\n                    Dexie.vip(function () {\n                        var state = _this._state;\n                        if (state.openComplete) {\n                            if (!state.dbOpenError)\n                                DexiePromise.resolve().then(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else if (state.onReadyBeingFired) {\n                            state.onReadyBeingFired.push(subscriber);\n                            if (bSticky)\n                                subscribe(subscriber);\n                        }\n                        else {\n                            subscribe(subscriber);\n                            var db_1 = _this;\n                            if (!bSticky)\n                                subscribe(function unsubscribe() {\n                                    db_1.on.ready.unsubscribe(subscriber);\n                                    db_1.on.ready.unsubscribe(unsubscribe);\n                                });\n                        }\n                    });\n                };\n            });\n            this.Collection = createCollectionConstructor(this);\n            this.Table = createTableConstructor(this);\n            this.Transaction = createTransactionConstructor(this);\n            this.Version = createVersionConstructor(this);\n            this.WhereClause = createWhereClauseConstructor(this);\n            this.on(\"versionchange\", function (ev) {\n                if (ev.newVersion > 0)\n                    console.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n                else\n                    console.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n                _this.close();\n            });\n            this.on(\"blocked\", function (ev) {\n                if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                    console.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n                else\n                    console.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n            });\n            this._maxKey = getMaxKey(options.IDBKeyRange);\n            this._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n            this._fireOnBlocked = function (ev) {\n                _this.on(\"blocked\").fire(ev);\n                connections\n                    .filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n                    .map(function (c) { return c.on(\"versionchange\").fire(ev); });\n            };\n            this.use(virtualIndexMiddleware);\n            this.use(hooksMiddleware);\n            this.use(observabilityMiddleware);\n            this.use(cacheExistingValuesMiddleware);\n            this.vip = Object.create(this, { _vip: { value: true } });\n            addons.forEach(function (addon) { return addon(_this); });\n        }\n        Dexie.prototype.version = function (versionNumber) {\n            if (isNaN(versionNumber) || versionNumber < 0.1)\n                throw new exceptions.Type(\"Given version is not a positive number\");\n            versionNumber = Math.round(versionNumber * 10) / 10;\n            if (this.idbdb || this._state.isBeingOpened)\n                throw new exceptions.Schema(\"Cannot add version when database is open\");\n            this.verno = Math.max(this.verno, versionNumber);\n            var versions = this._versions;\n            var versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n            if (versionInstance)\n                return versionInstance;\n            versionInstance = new this.Version(versionNumber);\n            versions.push(versionInstance);\n            versions.sort(lowerVersionFirst);\n            versionInstance.stores({});\n            this._state.autoSchema = false;\n            return versionInstance;\n        };\n        Dexie.prototype._whenReady = function (fn) {\n            var _this = this;\n            return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n                if (_this._state.openComplete) {\n                    return reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n                }\n                if (!_this._state.isBeingOpened) {\n                    if (!_this._options.autoOpen) {\n                        reject(new exceptions.DatabaseClosed());\n                        return;\n                    }\n                    _this.open().catch(nop);\n                }\n                _this._state.dbReadyPromise.then(resolve, reject);\n            }).then(fn);\n        };\n        Dexie.prototype.use = function (_a) {\n            var stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n            if (name)\n                this.unuse({ stack: stack, name: name });\n            var middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n            middlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n            middlewares.sort(function (a, b) { return a.level - b.level; });\n            return this;\n        };\n        Dexie.prototype.unuse = function (_a) {\n            var stack = _a.stack, name = _a.name, create = _a.create;\n            if (stack && this._middlewares[stack]) {\n                this._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n                    return create ? mw.create !== create :\n                        name ? mw.name !== name :\n                            false;\n                });\n            }\n            return this;\n        };\n        Dexie.prototype.open = function () {\n            return dexieOpen(this);\n        };\n        Dexie.prototype._close = function () {\n            var state = this._state;\n            var idx = connections.indexOf(this);\n            if (idx >= 0)\n                connections.splice(idx, 1);\n            if (this.idbdb) {\n                try {\n                    this.idbdb.close();\n                }\n                catch (e) { }\n                this._novip.idbdb = null;\n            }\n            state.dbReadyPromise = new DexiePromise(function (resolve) {\n                state.dbReadyResolve = resolve;\n            });\n            state.openCanceller = new DexiePromise(function (_, reject) {\n                state.cancelOpen = reject;\n            });\n        };\n        Dexie.prototype.close = function () {\n            this._close();\n            var state = this._state;\n            this._options.autoOpen = false;\n            state.dbOpenError = new exceptions.DatabaseClosed();\n            if (state.isBeingOpened)\n                state.cancelOpen(state.dbOpenError);\n        };\n        Dexie.prototype.delete = function () {\n            var _this = this;\n            var hasArguments = arguments.length > 0;\n            var state = this._state;\n            return new DexiePromise(function (resolve, reject) {\n                var doDelete = function () {\n                    _this.close();\n                    var req = _this._deps.indexedDB.deleteDatabase(_this.name);\n                    req.onsuccess = wrap(function () {\n                        _onDatabaseDeleted(_this._deps, _this.name);\n                        resolve();\n                    });\n                    req.onerror = eventRejectHandler(reject);\n                    req.onblocked = _this._fireOnBlocked;\n                };\n                if (hasArguments)\n                    throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n                if (state.isBeingOpened) {\n                    state.dbReadyPromise.then(doDelete);\n                }\n                else {\n                    doDelete();\n                }\n            });\n        };\n        Dexie.prototype.backendDB = function () {\n            return this.idbdb;\n        };\n        Dexie.prototype.isOpen = function () {\n            return this.idbdb !== null;\n        };\n        Dexie.prototype.hasBeenClosed = function () {\n            var dbOpenError = this._state.dbOpenError;\n            return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n        };\n        Dexie.prototype.hasFailed = function () {\n            return this._state.dbOpenError !== null;\n        };\n        Dexie.prototype.dynamicallyOpened = function () {\n            return this._state.autoSchema;\n        };\n        Object.defineProperty(Dexie.prototype, \"tables\", {\n            get: function () {\n                var _this = this;\n                return keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Dexie.prototype.transaction = function () {\n            var args = extractTransactionArgs.apply(this, arguments);\n            return this._transaction.apply(this, args);\n        };\n        Dexie.prototype._transaction = function (mode, tables, scopeFunc) {\n            var _this = this;\n            var parentTransaction = PSD.trans;\n            if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n                parentTransaction = null;\n            var onlyIfCompatible = mode.indexOf('?') !== -1;\n            mode = mode.replace('!', '').replace('?', '');\n            var idbMode, storeNames;\n            try {\n                storeNames = tables.map(function (table) {\n                    var storeName = table instanceof _this.Table ? table.name : table;\n                    if (typeof storeName !== 'string')\n                        throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                    return storeName;\n                });\n                if (mode == \"r\" || mode === READONLY)\n                    idbMode = READONLY;\n                else if (mode == \"rw\" || mode == READWRITE)\n                    idbMode = READWRITE;\n                else\n                    throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n                if (parentTransaction) {\n                    if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                        if (onlyIfCompatible) {\n                            parentTransaction = null;\n                        }\n                        else\n                            throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                    }\n                    if (parentTransaction) {\n                        storeNames.forEach(function (storeName) {\n                            if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                                if (onlyIfCompatible) {\n                                    parentTransaction = null;\n                                }\n                                else\n                                    throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                        \" not included in parent transaction.\");\n                            }\n                        });\n                    }\n                    if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                        parentTransaction = null;\n                    }\n                }\n            }\n            catch (e) {\n                return parentTransaction ?\n                    parentTransaction._promise(null, function (_, reject) { reject(e); }) :\n                    rejection(e);\n            }\n            var enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n            return (parentTransaction ?\n                parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n                PSD.trans ?\n                    usePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n                    this._whenReady(enterTransaction));\n        };\n        Dexie.prototype.table = function (tableName) {\n            if (!hasOwn(this._allTables, tableName)) {\n                throw new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n            }\n            return this._allTables[tableName];\n        };\n        return Dexie;\n    }());\n\n    var symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n        ? Symbol.observable\n        : \"@@observable\";\n    var Observable =  (function () {\n        function Observable(subscribe) {\n            this._subscribe = subscribe;\n        }\n        Observable.prototype.subscribe = function (x, error, complete) {\n            return this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n        };\n        Observable.prototype[symbolObservable] = function () {\n            return this;\n        };\n        return Observable;\n    }());\n\n    function extendObservabilitySet(target, newSet) {\n        keys(newSet).forEach(function (part) {\n            var rangeSet = target[part] || (target[part] = new RangeSet());\n            mergeRanges(rangeSet, newSet[part]);\n        });\n        return target;\n    }\n\n    function liveQuery(querier) {\n        var hasValue = false;\n        var currentValue = undefined;\n        var observable = new Observable(function (observer) {\n            var scopeFuncIsAsync = isAsyncFunction(querier);\n            function execute(subscr) {\n                if (scopeFuncIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                var exec = function () { return newScope(querier, { subscr: subscr, trans: null }); };\n                var rv = PSD.trans\n                    ?\n                        usePSD(PSD.transless, exec)\n                    : exec();\n                if (scopeFuncIsAsync) {\n                    rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n                }\n                return rv;\n            }\n            var closed = false;\n            var accumMuts = {};\n            var currentObs = {};\n            var subscription = {\n                get closed() {\n                    return closed;\n                },\n                unsubscribe: function () {\n                    closed = true;\n                    globalEvents.storagemutated.unsubscribe(mutationListener);\n                },\n            };\n            observer.start && observer.start(subscription);\n            var querying = false, startedListening = false;\n            function shouldNotify() {\n                return keys(currentObs).some(function (key) {\n                    return accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]);\n                });\n            }\n            var mutationListener = function (parts) {\n                extendObservabilitySet(accumMuts, parts);\n                if (shouldNotify()) {\n                    doQuery();\n                }\n            };\n            var doQuery = function () {\n                if (querying || closed)\n                    return;\n                accumMuts = {};\n                var subscr = {};\n                var ret = execute(subscr);\n                if (!startedListening) {\n                    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                    startedListening = true;\n                }\n                querying = true;\n                Promise.resolve(ret).then(function (result) {\n                    hasValue = true;\n                    currentValue = result;\n                    querying = false;\n                    if (closed)\n                        return;\n                    if (shouldNotify()) {\n                        doQuery();\n                    }\n                    else {\n                        accumMuts = {};\n                        currentObs = subscr;\n                        observer.next && observer.next(result);\n                    }\n                }, function (err) {\n                    querying = false;\n                    hasValue = false;\n                    observer.error && observer.error(err);\n                    subscription.unsubscribe();\n                });\n            };\n            doQuery();\n            return subscription;\n        });\n        observable.hasValue = function () { return hasValue; };\n        observable.getValue = function () { return currentValue; };\n        return observable;\n    }\n\n    var domDeps;\n    try {\n        domDeps = {\n            indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n            IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n        };\n    }\n    catch (e) {\n        domDeps = { indexedDB: null, IDBKeyRange: null };\n    }\n\n    var Dexie = Dexie$1;\n    props(Dexie, __assign(__assign({}, fullNameExceptions), {\n        delete: function (databaseName) {\n            var db = new Dexie(databaseName, { addons: [] });\n            return db.delete();\n        },\n        exists: function (name) {\n            return new Dexie(name, { addons: [] }).open().then(function (db) {\n                db.close();\n                return true;\n            }).catch('NoSuchDatabaseError', function () { return false; });\n        },\n        getDatabaseNames: function (cb) {\n            try {\n                return getDatabaseNames(Dexie.dependencies).then(cb);\n            }\n            catch (_a) {\n                return rejection(new exceptions.MissingAPI());\n            }\n        },\n        defineClass: function () {\n            function Class(content) {\n                extend(this, content);\n            }\n            return Class;\n        }, ignoreTransaction: function (scopeFunc) {\n            return PSD.trans ?\n                usePSD(PSD.transless, scopeFunc) :\n                scopeFunc();\n        }, vip: vip, async: function (generatorFn) {\n            return function () {\n                try {\n                    var rv = awaitIterator(generatorFn.apply(this, arguments));\n                    if (!rv || typeof rv.then !== 'function')\n                        return DexiePromise.resolve(rv);\n                    return rv;\n                }\n                catch (e) {\n                    return rejection(e);\n                }\n            };\n        }, spawn: function (generatorFn, args, thiz) {\n            try {\n                var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        },\n        currentTransaction: {\n            get: function () { return PSD.trans || null; }\n        }, waitFor: function (promiseOrFunction, optionalTimeout) {\n            var promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n                Dexie.ignoreTransaction(promiseOrFunction) :\n                promiseOrFunction)\n                .timeout(optionalTimeout || 60000);\n            return PSD.trans ?\n                PSD.trans.waitFor(promise) :\n                promise;\n        },\n        Promise: DexiePromise,\n        debug: {\n            get: function () { return debug; },\n            set: function (value) {\n                setDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n            }\n        },\n        derive: derive, extend: extend, props: props, override: override,\n        Events: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n        getByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n        minKey: minKey,\n        addons: [],\n        connections: connections,\n        errnames: errnames,\n        dependencies: domDeps,\n        semVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n            .map(function (n) { return parseInt(n); })\n            .reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\n    Dexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\n    if (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n            if (!propagatingLocally) {\n                var event_1;\n                if (isIEOrEdge) {\n                    event_1 = document.createEvent('CustomEvent');\n                    event_1.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n                }\n                else {\n                    event_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                        detail: updatedParts\n                    });\n                }\n                propagatingLocally = true;\n                dispatchEvent(event_1);\n                propagatingLocally = false;\n            }\n        });\n        addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n            var detail = _a.detail;\n            if (!propagatingLocally) {\n                propagateLocally(detail);\n            }\n        });\n    }\n    function propagateLocally(updateParts) {\n        var wasMe = propagatingLocally;\n        try {\n            propagatingLocally = true;\n            globalEvents.storagemutated.fire(updateParts);\n        }\n        finally {\n            propagatingLocally = wasMe;\n        }\n    }\n    var propagatingLocally = false;\n\n    if (typeof BroadcastChannel !== 'undefined') {\n        var bc_1 = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n        if (typeof bc_1.unref === 'function') {\n            bc_1.unref();\n        }\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            if (!propagatingLocally) {\n                bc_1.postMessage(changedParts);\n            }\n        });\n        bc_1.onmessage = function (ev) {\n            if (ev.data)\n                propagateLocally(ev.data);\n        };\n    }\n    else if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n        globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n            try {\n                if (!propagatingLocally) {\n                    if (typeof localStorage !== 'undefined') {\n                        localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                            trig: Math.random(),\n                            changedParts: changedParts,\n                        }));\n                    }\n                    if (typeof self['clients'] === 'object') {\n                        __spreadArray([], self['clients'].matchAll({ includeUncontrolled: true }), true).forEach(function (client) {\n                            return client.postMessage({\n                                type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                                changedParts: changedParts,\n                            });\n                        });\n                    }\n                }\n            }\n            catch (_a) { }\n        });\n        if (typeof addEventListener !== 'undefined') {\n            addEventListener('storage', function (ev) {\n                if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n                    var data = JSON.parse(ev.newValue);\n                    if (data)\n                        propagateLocally(data.changedParts);\n                }\n            });\n        }\n        var swContainer = self.document && navigator.serviceWorker;\n        if (swContainer) {\n            swContainer.addEventListener('message', propagateMessageLocally);\n        }\n    }\n    function propagateMessageLocally(_a) {\n        var data = _a.data;\n        if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n            propagateLocally(data.changedParts);\n        }\n    }\n\n    DexiePromise.rejectionMapper = mapError;\n    setDebug(debug, dexieStackFrameFilter);\n\n    var namedExports = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        Dexie: Dexie$1,\n        liveQuery: liveQuery,\n        'default': Dexie$1,\n        RangeSet: RangeSet,\n        mergeRanges: mergeRanges,\n        rangesOverlap: rangesOverlap\n    });\n\n    __assign(Dexie$1, namedExports, { default: Dexie$1 });\n\n    return Dexie$1;\n\n}));\n//# sourceMappingURL=dexie.js.map\n","// Version 1.7.3\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n      (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.nobleEd25519 = {}));\n})(this, (function (exports) { 'use strict';\n\n  const _nodeResolve_empty = {};\n\n  const nodeCrypto = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    'default': _nodeResolve_empty\n  });\n\n  /*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */\n  const _0n = BigInt(0);\n  const _1n = BigInt(1);\n  const _2n = BigInt(2);\n  const _8n = BigInt(8);\n  const CU_O = BigInt('7237005577332262213973186563042994240857116359379907606001950938285454250989');\n  const CURVE = Object.freeze({\n    a: BigInt(-1),\n    d: BigInt('37095705934669439343138083508754565189542113879843219016388785533085940283555'),\n    P: BigInt('57896044618658097711785492504343953926634992332820282019728792003956564819949'),\n    l: CU_O,\n    n: CU_O,\n    h: BigInt(8),\n    Gx: BigInt('15112221349535400772501151409588531511454012693041857206046113283949847762202'),\n    Gy: BigInt('46316835694926478169428394003475163141307993866256225615783033603165251855960'),\n  });\n  const POW_2_256 = BigInt('0x10000000000000000000000000000000000000000000000000000000000000000');\n  const SQRT_M1 = BigInt('19681161376707505956807079304988542015446066515923890162744021073123829784752');\n  BigInt('6853475219497561581579357271197624642482790079785650197046958215289687604742');\n  const SQRT_AD_MINUS_ONE = BigInt('25063068953384623474111414158702152701244531502492656460079210482610430750235');\n  const INVSQRT_A_MINUS_D = BigInt('54469307008909316920995813868745141605393597292927456921205312896311721017578');\n  const ONE_MINUS_D_SQ = BigInt('1159843021668779879193775521855586647937357759715417654439879720876111806838');\n  const D_MINUS_ONE_SQ = BigInt('40440834346308536858101042469323190826248399146238708352240133220865137265952');\n  class ExtendedPoint {\n    constructor(x, y, z, t) {\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      this.t = t;\n    }\n    static fromAffine(p) {\n      if (!(p instanceof Point)) {\n        throw new TypeError('ExtendedPoint#fromAffine: expected Point');\n      }\n      if (p.equals(Point.ZERO))\n        return ExtendedPoint.ZERO;\n      return new ExtendedPoint(p.x, p.y, _1n, mod(p.x * p.y));\n    }\n    static toAffineBatch(points) {\n      const toInv = invertBatch(points.map((p) => p.z));\n      return points.map((p, i) => p.toAffine(toInv[i]));\n    }\n    static normalizeZ(points) {\n      return this.toAffineBatch(points).map(this.fromAffine);\n    }\n    equals(other) {\n      assertExtPoint(other);\n      const { x: X1, y: Y1, z: Z1 } = this;\n      const { x: X2, y: Y2, z: Z2 } = other;\n      const X1Z2 = mod(X1 * Z2);\n      const X2Z1 = mod(X2 * Z1);\n      const Y1Z2 = mod(Y1 * Z2);\n      const Y2Z1 = mod(Y2 * Z1);\n      return X1Z2 === X2Z1 && Y1Z2 === Y2Z1;\n    }\n    negate() {\n      return new ExtendedPoint(mod(-this.x), this.y, this.z, mod(-this.t));\n    }\n    double() {\n      const { x: X1, y: Y1, z: Z1 } = this;\n      const { a } = CURVE;\n      const A = mod(X1 * X1);\n      const B = mod(Y1 * Y1);\n      const C = mod(_2n * mod(Z1 * Z1));\n      const D = mod(a * A);\n      const x1y1 = X1 + Y1;\n      const E = mod(mod(x1y1 * x1y1) - A - B);\n      const G = D + B;\n      const F = G - C;\n      const H = D - B;\n      const X3 = mod(E * F);\n      const Y3 = mod(G * H);\n      const T3 = mod(E * H);\n      const Z3 = mod(F * G);\n      return new ExtendedPoint(X3, Y3, Z3, T3);\n    }\n    add(other) {\n      assertExtPoint(other);\n      const { x: X1, y: Y1, z: Z1, t: T1 } = this;\n      const { x: X2, y: Y2, z: Z2, t: T2 } = other;\n      const A = mod((Y1 - X1) * (Y2 + X2));\n      const B = mod((Y1 + X1) * (Y2 - X2));\n      const F = mod(B - A);\n      if (F === _0n)\n        return this.double();\n      const C = mod(Z1 * _2n * T2);\n      const D = mod(T1 * _2n * Z2);\n      const E = D + C;\n      const G = B + A;\n      const H = D - C;\n      const X3 = mod(E * F);\n      const Y3 = mod(G * H);\n      const T3 = mod(E * H);\n      const Z3 = mod(F * G);\n      return new ExtendedPoint(X3, Y3, Z3, T3);\n    }\n    subtract(other) {\n      return this.add(other.negate());\n    }\n    precomputeWindow(W) {\n      const windows = 1 + 256 / W;\n      const points = [];\n      let p = this;\n      let base = p;\n      for (let window = 0; window < windows; window++) {\n        base = p;\n        points.push(base);\n        for (let i = 1; i < 2 ** (W - 1); i++) {\n          base = base.add(p);\n          points.push(base);\n        }\n        p = base.double();\n      }\n      return points;\n    }\n    wNAF(n, affinePoint) {\n      if (!affinePoint && this.equals(ExtendedPoint.BASE))\n        affinePoint = Point.BASE;\n      const W = (affinePoint && affinePoint._WINDOW_SIZE) || 1;\n      if (256 % W) {\n        throw new Error('Point#wNAF: Invalid precomputation window, must be power of 2');\n      }\n      let precomputes = affinePoint && pointPrecomputes.get(affinePoint);\n      if (!precomputes) {\n        precomputes = this.precomputeWindow(W);\n        if (affinePoint && W !== 1) {\n          precomputes = ExtendedPoint.normalizeZ(precomputes);\n          pointPrecomputes.set(affinePoint, precomputes);\n        }\n      }\n      let p = ExtendedPoint.ZERO;\n      let f = ExtendedPoint.BASE;\n      const windows = 1 + 256 / W;\n      const windowSize = 2 ** (W - 1);\n      const mask = BigInt(2 ** W - 1);\n      const maxNumber = 2 ** W;\n      const shiftBy = BigInt(W);\n      for (let window = 0; window < windows; window++) {\n        const offset = window * windowSize;\n        let wbits = Number(n & mask);\n        n >>= shiftBy;\n        if (wbits > windowSize) {\n          wbits -= maxNumber;\n          n += _1n;\n        }\n        const offset1 = offset;\n        const offset2 = offset + Math.abs(wbits) - 1;\n        const cond1 = window % 2 !== 0;\n        const cond2 = wbits < 0;\n        if (wbits === 0) {\n          f = f.add(constTimeNegate(cond1, precomputes[offset1]));\n        }\n        else {\n          p = p.add(constTimeNegate(cond2, precomputes[offset2]));\n        }\n      }\n      return ExtendedPoint.normalizeZ([p, f])[0];\n    }\n    multiply(scalar, affinePoint) {\n      return this.wNAF(normalizeScalar(scalar, CURVE.l), affinePoint);\n    }\n    multiplyUnsafe(scalar) {\n      let n = normalizeScalar(scalar, CURVE.l, false);\n      const G = ExtendedPoint.BASE;\n      const P0 = ExtendedPoint.ZERO;\n      if (n === _0n)\n        return P0;\n      if (this.equals(P0) || n === _1n)\n        return this;\n      if (this.equals(G))\n        return this.wNAF(n);\n      let p = P0;\n      let d = this;\n      while (n > _0n) {\n        if (n & _1n)\n          p = p.add(d);\n        d = d.double();\n        n >>= _1n;\n      }\n      return p;\n    }\n    isSmallOrder() {\n      return this.multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO);\n    }\n    isTorsionFree() {\n      let p = this.multiplyUnsafe(CURVE.l / _2n).double();\n      if (CURVE.l % _2n)\n        p = p.add(this);\n      return p.equals(ExtendedPoint.ZERO);\n    }\n    toAffine(invZ) {\n      const { x, y, z } = this;\n      const is0 = this.equals(ExtendedPoint.ZERO);\n      if (invZ == null)\n        invZ = is0 ? _8n : invert(z);\n      const ax = mod(x * invZ);\n      const ay = mod(y * invZ);\n      const zz = mod(z * invZ);\n      if (is0)\n        return Point.ZERO;\n      if (zz !== _1n)\n        throw new Error('invZ was invalid');\n      return new Point(ax, ay);\n    }\n    fromRistrettoBytes() {\n      legacyRist();\n    }\n    toRistrettoBytes() {\n      legacyRist();\n    }\n    fromRistrettoHash() {\n      legacyRist();\n    }\n  }\n  ExtendedPoint.BASE = new ExtendedPoint(CURVE.Gx, CURVE.Gy, _1n, mod(CURVE.Gx * CURVE.Gy));\n  ExtendedPoint.ZERO = new ExtendedPoint(_0n, _1n, _1n, _0n);\n  function constTimeNegate(condition, item) {\n    const neg = item.negate();\n    return condition ? neg : item;\n  }\n  function assertExtPoint(other) {\n    if (!(other instanceof ExtendedPoint))\n      throw new TypeError('ExtendedPoint expected');\n  }\n  function assertRstPoint(other) {\n    if (!(other instanceof RistrettoPoint))\n      throw new TypeError('RistrettoPoint expected');\n  }\n  function legacyRist() {\n    throw new Error('Legacy method: switch to RistrettoPoint');\n  }\n  class RistrettoPoint {\n    constructor(ep) {\n      this.ep = ep;\n    }\n    static calcElligatorRistrettoMap(r0) {\n      const { d } = CURVE;\n      const r = mod(SQRT_M1 * r0 * r0);\n      const Ns = mod((r + _1n) * ONE_MINUS_D_SQ);\n      let c = BigInt(-1);\n      const D = mod((c - d * r) * mod(r + d));\n      let { isValid: Ns_D_is_sq, value: s } = uvRatio(Ns, D);\n      let s_ = mod(s * r0);\n      if (!edIsNegative(s_))\n        s_ = mod(-s_);\n      if (!Ns_D_is_sq)\n        s = s_;\n      if (!Ns_D_is_sq)\n        c = r;\n      const Nt = mod(c * (r - _1n) * D_MINUS_ONE_SQ - D);\n      const s2 = s * s;\n      const W0 = mod((s + s) * D);\n      const W1 = mod(Nt * SQRT_AD_MINUS_ONE);\n      const W2 = mod(_1n - s2);\n      const W3 = mod(_1n + s2);\n      return new ExtendedPoint(mod(W0 * W3), mod(W2 * W1), mod(W1 * W3), mod(W0 * W2));\n    }\n    static hashToCurve(hex) {\n      hex = ensureBytes(hex, 64);\n      const r1 = bytes255ToNumberLE(hex.slice(0, 32));\n      const R1 = this.calcElligatorRistrettoMap(r1);\n      const r2 = bytes255ToNumberLE(hex.slice(32, 64));\n      const R2 = this.calcElligatorRistrettoMap(r2);\n      return new RistrettoPoint(R1.add(R2));\n    }\n    static fromHex(hex) {\n      hex = ensureBytes(hex, 32);\n      const { a, d } = CURVE;\n      const emsg = 'RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint';\n      const s = bytes255ToNumberLE(hex);\n      if (!equalBytes(numberTo32BytesLE(s), hex) || edIsNegative(s))\n        throw new Error(emsg);\n      const s2 = mod(s * s);\n      const u1 = mod(_1n + a * s2);\n      const u2 = mod(_1n - a * s2);\n      const u1_2 = mod(u1 * u1);\n      const u2_2 = mod(u2 * u2);\n      const v = mod(a * d * u1_2 - u2_2);\n      const { isValid, value: I } = invertSqrt(mod(v * u2_2));\n      const Dx = mod(I * u2);\n      const Dy = mod(I * Dx * v);\n      let x = mod((s + s) * Dx);\n      if (edIsNegative(x))\n        x = mod(-x);\n      const y = mod(u1 * Dy);\n      const t = mod(x * y);\n      if (!isValid || edIsNegative(t) || y === _0n)\n        throw new Error(emsg);\n      return new RistrettoPoint(new ExtendedPoint(x, y, _1n, t));\n    }\n    toRawBytes() {\n      let { x, y, z, t } = this.ep;\n      const u1 = mod(mod(z + y) * mod(z - y));\n      const u2 = mod(x * y);\n      const u2sq = mod(u2 * u2);\n      const { value: invsqrt } = invertSqrt(mod(u1 * u2sq));\n      const D1 = mod(invsqrt * u1);\n      const D2 = mod(invsqrt * u2);\n      const zInv = mod(D1 * D2 * t);\n      let D;\n      if (edIsNegative(t * zInv)) {\n        let _x = mod(y * SQRT_M1);\n        let _y = mod(x * SQRT_M1);\n        x = _x;\n        y = _y;\n        D = mod(D1 * INVSQRT_A_MINUS_D);\n      }\n      else {\n        D = D2;\n      }\n      if (edIsNegative(x * zInv))\n        y = mod(-y);\n      let s = mod((z - y) * D);\n      if (edIsNegative(s))\n        s = mod(-s);\n      return numberTo32BytesLE(s);\n    }\n    toHex() {\n      return bytesToHex(this.toRawBytes());\n    }\n    toString() {\n      return this.toHex();\n    }\n    equals(other) {\n      assertRstPoint(other);\n      const a = this.ep;\n      const b = other.ep;\n      const one = mod(a.x * b.y) === mod(a.y * b.x);\n      const two = mod(a.y * b.y) === mod(a.x * b.x);\n      return one || two;\n    }\n    add(other) {\n      assertRstPoint(other);\n      return new RistrettoPoint(this.ep.add(other.ep));\n    }\n    subtract(other) {\n      assertRstPoint(other);\n      return new RistrettoPoint(this.ep.subtract(other.ep));\n    }\n    multiply(scalar) {\n      return new RistrettoPoint(this.ep.multiply(scalar));\n    }\n    multiplyUnsafe(scalar) {\n      return new RistrettoPoint(this.ep.multiplyUnsafe(scalar));\n    }\n  }\n  RistrettoPoint.BASE = new RistrettoPoint(ExtendedPoint.BASE);\n  RistrettoPoint.ZERO = new RistrettoPoint(ExtendedPoint.ZERO);\n  const pointPrecomputes = new WeakMap();\n  class Point {\n    constructor(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n    _setWindowSize(windowSize) {\n      this._WINDOW_SIZE = windowSize;\n      pointPrecomputes.delete(this);\n    }\n    static fromHex(hex, strict = true) {\n      const { d, P } = CURVE;\n      hex = ensureBytes(hex, 32);\n      const normed = hex.slice();\n      normed[31] = hex[31] & ~0x80;\n      const y = bytesToNumberLE(normed);\n      if (strict && y >= P)\n        throw new Error('Expected 0 < hex < P');\n      if (!strict && y >= POW_2_256)\n        throw new Error('Expected 0 < hex < 2**256');\n      const y2 = mod(y * y);\n      const u = mod(y2 - _1n);\n      const v = mod(d * y2 + _1n);\n      let { isValid, value: x } = uvRatio(u, v);\n      if (!isValid)\n        throw new Error('Point.fromHex: invalid y coordinate');\n      const isXOdd = (x & _1n) === _1n;\n      const isLastByteOdd = (hex[31] & 0x80) !== 0;\n      if (isLastByteOdd !== isXOdd) {\n        x = mod(-x);\n      }\n      return new Point(x, y);\n    }\n    static async fromPrivateKey(privateKey) {\n      return (await getExtendedPublicKey(privateKey)).point;\n    }\n    toRawBytes() {\n      const bytes = numberTo32BytesLE(this.y);\n      bytes[31] |= this.x & _1n ? 0x80 : 0;\n      return bytes;\n    }\n    toHex() {\n      return bytesToHex(this.toRawBytes());\n    }\n    toX25519() {\n      const { y } = this;\n      const u = mod((_1n + y) * invert(_1n - y));\n      return numberTo32BytesLE(u);\n    }\n    isTorsionFree() {\n      return ExtendedPoint.fromAffine(this).isTorsionFree();\n    }\n    equals(other) {\n      return this.x === other.x && this.y === other.y;\n    }\n    negate() {\n      return new Point(mod(-this.x), this.y);\n    }\n    add(other) {\n      return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(other)).toAffine();\n    }\n    subtract(other) {\n      return this.add(other.negate());\n    }\n    multiply(scalar) {\n      return ExtendedPoint.fromAffine(this).multiply(scalar, this).toAffine();\n    }\n  }\n  Point.BASE = new Point(CURVE.Gx, CURVE.Gy);\n  Point.ZERO = new Point(_0n, _1n);\n  class Signature {\n    constructor(r, s) {\n      this.r = r;\n      this.s = s;\n      this.assertValidity();\n    }\n    static fromHex(hex) {\n      const bytes = ensureBytes(hex, 64);\n      const r = Point.fromHex(bytes.slice(0, 32), false);\n      const s = bytesToNumberLE(bytes.slice(32, 64));\n      return new Signature(r, s);\n    }\n    assertValidity() {\n      const { r, s } = this;\n      if (!(r instanceof Point))\n        throw new Error('Expected Point instance');\n      normalizeScalar(s, CURVE.l, false);\n      return this;\n    }\n    toRawBytes() {\n      const u8 = new Uint8Array(64);\n      u8.set(this.r.toRawBytes());\n      u8.set(numberTo32BytesLE(this.s), 32);\n      return u8;\n    }\n    toHex() {\n      return bytesToHex(this.toRawBytes());\n    }\n  }\n  function concatBytes(...arrays) {\n    if (!arrays.every((a) => a instanceof Uint8Array))\n      throw new Error('Expected Uint8Array list');\n    if (arrays.length === 1)\n      return arrays[0];\n    const length = arrays.reduce((a, arr) => a + arr.length, 0);\n    const result = new Uint8Array(length);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n      const arr = arrays[i];\n      result.set(arr, pad);\n      pad += arr.length;\n    }\n    return result;\n  }\n  const hexes = Array.from({ length: 256 }, (v, i) => i.toString(16).padStart(2, '0'));\n  function bytesToHex(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n      throw new Error('Uint8Array expected');\n    let hex = '';\n    for (let i = 0; i < uint8a.length; i++) {\n      hex += hexes[uint8a[i]];\n    }\n    return hex;\n  }\n  function hexToBytes(hex) {\n    if (typeof hex !== 'string') {\n      throw new TypeError('hexToBytes: expected string, got ' + typeof hex);\n    }\n    if (hex.length % 2)\n      throw new Error('hexToBytes: received invalid unpadded hex');\n    const array = new Uint8Array(hex.length / 2);\n    for (let i = 0; i < array.length; i++) {\n      const j = i * 2;\n      const hexByte = hex.slice(j, j + 2);\n      const byte = Number.parseInt(hexByte, 16);\n      if (Number.isNaN(byte) || byte < 0)\n        throw new Error('Invalid byte sequence');\n      array[i] = byte;\n    }\n    return array;\n  }\n  function numberTo32BytesBE(num) {\n    const length = 32;\n    const hex = num.toString(16).padStart(length * 2, '0');\n    return hexToBytes(hex);\n  }\n  function numberTo32BytesLE(num) {\n    return numberTo32BytesBE(num).reverse();\n  }\n  function edIsNegative(num) {\n    return (mod(num) & _1n) === _1n;\n  }\n  function bytesToNumberLE(uint8a) {\n    if (!(uint8a instanceof Uint8Array))\n      throw new Error('Expected Uint8Array');\n    return BigInt('0x' + bytesToHex(Uint8Array.from(uint8a).reverse()));\n  }\n  const MAX_255B = BigInt('0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff');\n  function bytes255ToNumberLE(bytes) {\n    return mod(bytesToNumberLE(bytes) & MAX_255B);\n  }\n  function mod(a, b = CURVE.P) {\n    const res = a % b;\n    return res >= _0n ? res : b + res;\n  }\n  function invert(number, modulo = CURVE.P) {\n    if (number === _0n || modulo <= _0n) {\n      throw new Error(`invert: expected positive integers, got n=${number} mod=${modulo}`);\n    }\n    let a = mod(number, modulo);\n    let b = modulo;\n    let x = _0n, u = _1n;\n    while (a !== _0n) {\n      const q = b / a;\n      const r = b % a;\n      const m = x - u * q;\n      b = a, a = r, x = u, u = m;\n    }\n    const gcd = b;\n    if (gcd !== _1n)\n      throw new Error('invert: does not exist');\n    return mod(x, modulo);\n  }\n  function invertBatch(nums, p = CURVE.P) {\n    const tmp = new Array(nums.length);\n    const lastMultiplied = nums.reduce((acc, num, i) => {\n      if (num === _0n)\n        return acc;\n      tmp[i] = acc;\n      return mod(acc * num, p);\n    }, _1n);\n    const inverted = invert(lastMultiplied, p);\n    nums.reduceRight((acc, num, i) => {\n      if (num === _0n)\n        return acc;\n      tmp[i] = mod(acc * tmp[i], p);\n      return mod(acc * num, p);\n    }, inverted);\n    return tmp;\n  }\n  function pow2(x, power) {\n    const { P } = CURVE;\n    let res = x;\n    while (power-- > _0n) {\n      res *= res;\n      res %= P;\n    }\n    return res;\n  }\n  function pow_2_252_3(x) {\n    const { P } = CURVE;\n    const _5n = BigInt(5);\n    const _10n = BigInt(10);\n    const _20n = BigInt(20);\n    const _40n = BigInt(40);\n    const _80n = BigInt(80);\n    const x2 = (x * x) % P;\n    const b2 = (x2 * x) % P;\n    const b4 = (pow2(b2, _2n) * b2) % P;\n    const b5 = (pow2(b4, _1n) * x) % P;\n    const b10 = (pow2(b5, _5n) * b5) % P;\n    const b20 = (pow2(b10, _10n) * b10) % P;\n    const b40 = (pow2(b20, _20n) * b20) % P;\n    const b80 = (pow2(b40, _40n) * b40) % P;\n    const b160 = (pow2(b80, _80n) * b80) % P;\n    const b240 = (pow2(b160, _80n) * b80) % P;\n    const b250 = (pow2(b240, _10n) * b10) % P;\n    const pow_p_5_8 = (pow2(b250, _2n) * x) % P;\n    return { pow_p_5_8, b2 };\n  }\n  function uvRatio(u, v) {\n    const v3 = mod(v * v * v);\n    const v7 = mod(v3 * v3 * v);\n    const pow = pow_2_252_3(u * v7).pow_p_5_8;\n    let x = mod(u * v3 * pow);\n    const vx2 = mod(v * x * x);\n    const root1 = x;\n    const root2 = mod(x * SQRT_M1);\n    const useRoot1 = vx2 === u;\n    const useRoot2 = vx2 === mod(-u);\n    const noRoot = vx2 === mod(-u * SQRT_M1);\n    if (useRoot1)\n      x = root1;\n    if (useRoot2 || noRoot)\n      x = root2;\n    if (edIsNegative(x))\n      x = mod(-x);\n    return { isValid: useRoot1 || useRoot2, value: x };\n  }\n  function invertSqrt(number) {\n    return uvRatio(_1n, number);\n  }\n  function modlLE(hash) {\n    return mod(bytesToNumberLE(hash), CURVE.l);\n  }\n  function equalBytes(b1, b2) {\n    if (b1.length !== b2.length) {\n      return false;\n    }\n    for (let i = 0; i < b1.length; i++) {\n      if (b1[i] !== b2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function ensureBytes(hex, expectedLength) {\n    const bytes = hex instanceof Uint8Array ? Uint8Array.from(hex) : hexToBytes(hex);\n    if (typeof expectedLength === 'number' && bytes.length !== expectedLength)\n      throw new Error(`Expected ${expectedLength} bytes`);\n    return bytes;\n  }\n  function normalizeScalar(num, max, strict = true) {\n    if (!max)\n      throw new TypeError('Specify max value');\n    if (typeof num === 'number' && Number.isSafeInteger(num))\n      num = BigInt(num);\n    if (typeof num === 'bigint' && num < max) {\n      if (strict) {\n        if (_0n < num)\n          return num;\n      }\n      else {\n        if (_0n <= num)\n          return num;\n      }\n    }\n    throw new TypeError('Expected valid scalar: 0 < scalar < max');\n  }\n  function adjustBytes25519(bytes) {\n    bytes[0] &= 248;\n    bytes[31] &= 127;\n    bytes[31] |= 64;\n    return bytes;\n  }\n  function decodeScalar25519(n) {\n    return bytesToNumberLE(adjustBytes25519(ensureBytes(n, 32)));\n  }\n  function checkPrivateKey(key) {\n    key =\n      typeof key === 'bigint' || typeof key === 'number'\n        ? numberTo32BytesBE(normalizeScalar(key, POW_2_256))\n        : ensureBytes(key);\n    if (key.length !== 32)\n      throw new Error(`Expected 32 bytes`);\n    return key;\n  }\n  function getKeyFromHash(hashed) {\n    const head = adjustBytes25519(hashed.slice(0, 32));\n    const prefix = hashed.slice(32, 64);\n    const scalar = modlLE(head);\n    const point = Point.BASE.multiply(scalar);\n    const pointBytes = point.toRawBytes();\n    return { head, prefix, scalar, point, pointBytes };\n  }\n  let _sha512Sync;\n  function sha512s(...m) {\n    if (typeof _sha512Sync !== 'function')\n      throw new Error('utils.sha512Sync must be set to use sync methods');\n    return _sha512Sync(...m);\n  }\n  async function getExtendedPublicKey(key) {\n    return getKeyFromHash(await utils.sha512(checkPrivateKey(key)));\n  }\n  function getExtendedPublicKeySync(key) {\n    return getKeyFromHash(sha512s(checkPrivateKey(key)));\n  }\n  async function getPublicKey(privateKey) {\n    return (await getExtendedPublicKey(privateKey)).pointBytes;\n  }\n  function getPublicKeySync(privateKey) {\n    return getExtendedPublicKeySync(privateKey).pointBytes;\n  }\n  async function sign(message, privateKey) {\n    message = ensureBytes(message);\n    const { prefix, scalar, pointBytes } = await getExtendedPublicKey(privateKey);\n    const r = modlLE(await utils.sha512(prefix, message));\n    const R = Point.BASE.multiply(r);\n    const k = modlLE(await utils.sha512(R.toRawBytes(), pointBytes, message));\n    const s = mod(r + k * scalar, CURVE.l);\n    return new Signature(R, s).toRawBytes();\n  }\n  function signSync(message, privateKey) {\n    message = ensureBytes(message);\n    const { prefix, scalar, pointBytes } = getExtendedPublicKeySync(privateKey);\n    const r = modlLE(sha512s(prefix, message));\n    const R = Point.BASE.multiply(r);\n    const k = modlLE(sha512s(R.toRawBytes(), pointBytes, message));\n    const s = mod(r + k * scalar, CURVE.l);\n    return new Signature(R, s).toRawBytes();\n  }\n  function prepareVerification(sig, message, publicKey) {\n    message = ensureBytes(message);\n    if (!(publicKey instanceof Point))\n      publicKey = Point.fromHex(publicKey, false);\n    const { r, s } = sig instanceof Signature ? sig.assertValidity() : Signature.fromHex(sig);\n    const SB = ExtendedPoint.BASE.multiplyUnsafe(s);\n    return { r, s, SB, pub: publicKey, msg: message };\n  }\n  function finishVerification(publicKey, r, SB, hashed) {\n    const k = modlLE(hashed);\n    const kA = ExtendedPoint.fromAffine(publicKey).multiplyUnsafe(k);\n    const RkA = ExtendedPoint.fromAffine(r).add(kA);\n    return RkA.subtract(SB).multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO);\n  }\n  async function verify(sig, message, publicKey) {\n    const { r, SB, msg, pub } = prepareVerification(sig, message, publicKey);\n    const hashed = await utils.sha512(r.toRawBytes(), pub.toRawBytes(), msg);\n    return finishVerification(pub, r, SB, hashed);\n  }\n  function verifySync(sig, message, publicKey) {\n    const { r, SB, msg, pub } = prepareVerification(sig, message, publicKey);\n    const hashed = sha512s(r.toRawBytes(), pub.toRawBytes(), msg);\n    return finishVerification(pub, r, SB, hashed);\n  }\n  const sync = {\n    getExtendedPublicKey: getExtendedPublicKeySync,\n    getPublicKey: getPublicKeySync,\n    sign: signSync,\n    verify: verifySync,\n  };\n  async function getSharedSecret(privateKey, publicKey) {\n    const { head } = await getExtendedPublicKey(privateKey);\n    const u = Point.fromHex(publicKey).toX25519();\n    return curve25519.scalarMult(head, u);\n  }\n  Point.BASE._setWindowSize(8);\n  function cswap(swap, x_2, x_3) {\n    const dummy = mod(swap * (x_2 - x_3));\n    x_2 = mod(x_2 - dummy);\n    x_3 = mod(x_3 + dummy);\n    return [x_2, x_3];\n  }\n  function montgomeryLadder(pointU, scalar) {\n    const { P } = CURVE;\n    const u = normalizeScalar(pointU, P);\n    const k = normalizeScalar(scalar, P);\n    const a24 = BigInt(121665);\n    const x_1 = u;\n    let x_2 = _1n;\n    let z_2 = _0n;\n    let x_3 = u;\n    let z_3 = _1n;\n    let swap = _0n;\n    let sw;\n    for (let t = BigInt(255 - 1); t >= _0n; t--) {\n      const k_t = (k >> t) & _1n;\n      swap ^= k_t;\n      sw = cswap(swap, x_2, x_3);\n      x_2 = sw[0];\n      x_3 = sw[1];\n      sw = cswap(swap, z_2, z_3);\n      z_2 = sw[0];\n      z_3 = sw[1];\n      swap = k_t;\n      const A = x_2 + z_2;\n      const AA = mod(A * A);\n      const B = x_2 - z_2;\n      const BB = mod(B * B);\n      const E = AA - BB;\n      const C = x_3 + z_3;\n      const D = x_3 - z_3;\n      const DA = mod(D * A);\n      const CB = mod(C * B);\n      const dacb = DA + CB;\n      const da_cb = DA - CB;\n      x_3 = mod(dacb * dacb);\n      z_3 = mod(x_1 * mod(da_cb * da_cb));\n      x_2 = mod(AA * BB);\n      z_2 = mod(E * (AA + mod(a24 * E)));\n    }\n    sw = cswap(swap, x_2, x_3);\n    x_2 = sw[0];\n    x_3 = sw[1];\n    sw = cswap(swap, z_2, z_3);\n    z_2 = sw[0];\n    z_3 = sw[1];\n    const { pow_p_5_8, b2 } = pow_2_252_3(z_2);\n    const xp2 = mod(pow2(pow_p_5_8, BigInt(3)) * b2);\n    return mod(x_2 * xp2);\n  }\n  function encodeUCoordinate(u) {\n    return numberTo32BytesLE(mod(u, CURVE.P));\n  }\n  function decodeUCoordinate(uEnc) {\n    const u = ensureBytes(uEnc, 32);\n    u[31] &= 127;\n    return bytesToNumberLE(u);\n  }\n  const curve25519 = {\n    BASE_POINT_U: '0900000000000000000000000000000000000000000000000000000000000000',\n    scalarMult(privateKey, publicKey) {\n      const u = decodeUCoordinate(publicKey);\n      const p = decodeScalar25519(privateKey);\n      const pu = montgomeryLadder(u, p);\n      if (pu === _0n)\n        throw new Error('Invalid private or public key received');\n      return encodeUCoordinate(pu);\n    },\n    scalarMultBase(privateKey) {\n      return curve25519.scalarMult(privateKey, curve25519.BASE_POINT_U);\n    },\n  };\n  const crypto = {\n    node: nodeCrypto,\n    web: typeof self === 'object' && 'crypto' in self ? self.crypto : undefined,\n  };\n  const utils = {\n    bytesToHex,\n    hexToBytes,\n    concatBytes,\n    getExtendedPublicKey,\n    mod,\n    invert,\n    TORSION_SUBGROUP: [\n      '0100000000000000000000000000000000000000000000000000000000000000',\n      'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a',\n      '0000000000000000000000000000000000000000000000000000000000000080',\n      '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05',\n      'ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f',\n      '26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85',\n      '0000000000000000000000000000000000000000000000000000000000000000',\n      'c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa',\n    ],\n    hashToPrivateScalar: (hash) => {\n      hash = ensureBytes(hash);\n      if (hash.length < 40 || hash.length > 1024)\n        throw new Error('Expected 40-1024 bytes of private key as per FIPS 186');\n      return mod(bytesToNumberLE(hash), CURVE.l - _1n) + _1n;\n    },\n    randomBytes: (bytesLength = 32) => {\n      if (crypto.web) {\n        return crypto.web.getRandomValues(new Uint8Array(bytesLength));\n      }\n      else if (crypto.node) {\n        const { randomBytes } = crypto.node;\n        return new Uint8Array(randomBytes(bytesLength).buffer);\n      }\n      else {\n        throw new Error(\"The environment doesn't have randomBytes function\");\n      }\n    },\n    randomPrivateKey: () => {\n      return utils.randomBytes(32);\n    },\n    sha512: async (...messages) => {\n      const message = concatBytes(...messages);\n      if (crypto.web) {\n        const buffer = await crypto.web.subtle.digest('SHA-512', message.buffer);\n        return new Uint8Array(buffer);\n      }\n      else if (crypto.node) {\n        return Uint8Array.from(crypto.node.createHash('sha512').update(message).digest());\n      }\n      else {\n        throw new Error(\"The environment doesn't have sha512 function\");\n      }\n    },\n    precompute(windowSize = 8, point = Point.BASE) {\n      const cached = point.equals(Point.BASE) ? point : new Point(point.x, point.y);\n      cached._setWindowSize(windowSize);\n      cached.multiply(_2n);\n      return cached;\n    },\n    sha512Sync: undefined,\n  };\n  Object.defineProperties(utils, {\n    sha512Sync: {\n      configurable: false,\n      get() {\n        return _sha512Sync;\n      },\n      set(val) {\n        if (!_sha512Sync)\n          _sha512Sync = val;\n      },\n    },\n  });\n\n  exports.CURVE = CURVE;\n  exports.ExtendedPoint = ExtendedPoint;\n  exports.Point = Point;\n  exports.RistrettoPoint = RistrettoPoint;\n  exports.Signature = Signature;\n  exports.curve25519 = curve25519;\n  exports.getPublicKey = getPublicKey;\n  exports.getSharedSecret = getSharedSecret;\n  exports.sign = sign;\n  exports.sync = sync;\n  exports.utils = utils;\n  exports.verify = verify;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default class Deferred<T = void> {\n  promise: Promise<T>;\n\n  reject!: (reason?: any) => void;\n\n  resolve!: (value: T | PromiseLike<T>) => void;\n\n  constructor() {\n    this.promise = new Promise((resolve, reject) => {\n      this.reject = reject;\n      this.resolve = resolve;\n    });\n  }\n\n  static resolved(): Deferred<void>;\n  static resolved<T>(value: T): Deferred<T>;\n  static resolved<T>(value?: T): Deferred<T | void> {\n    const deferred = new Deferred<T | void>();\n    deferred.resolve(value);\n    return deferred;\n  }\n}\n","import { bigintReviver } from './bigint';\nimport generateUniqueId from './generateUniqueId';\nimport { logDebugError } from './logs';\n\nexport interface CancellableCallback {\n  (\n    ...args: any[]\n  ): void;\n\n  isCanceled?: boolean;\n  acceptsBuffer?: boolean;\n}\n\ntype InitData = {\n  channel?: string;\n  type: 'init';\n  messageId?: string;\n  name: 'init';\n  args: any;\n};\n\ntype CallMethodData = {\n  channel?: string;\n  type: 'callMethod';\n  messageId?: string;\n  name: string;\n  args: any;\n  withCallback?: boolean;\n};\n\nexport type OriginMessageData = InitData | CallMethodData | {\n  channel?: string;\n  type: 'cancelProgress';\n  messageId: string;\n};\n\nexport interface OriginMessageEvent {\n  data: OriginMessageData;\n}\n\nexport type ApiUpdate =\n  { type: string }\n  & any;\n\nexport type WorkerMessageData = {\n  channel?: string;\n  type: 'update';\n  update: ApiUpdate;\n} | {\n  channel?: string;\n  type: 'methodResponse';\n  messageId: string;\n  response?: any;\n  error?: { message: string };\n} | {\n  channel?: string;\n  type: 'methodCallback';\n  messageId: string;\n  callbackArgs: any[];\n} | {\n  channel?: string;\n  type: 'unhandledError';\n  error?: { message: string };\n};\n\nexport interface WorkerMessageEvent {\n  data: WorkerMessageData;\n}\n\ninterface RequestStates {\n  messageId: string;\n  resolve: Function;\n  reject: Function;\n  callback: AnyToVoidFunction;\n}\n\ntype InputRequestTypes = Record<string, AnyFunction>;\n\ntype Values<T> = T[keyof T];\nexport type RequestTypes<T extends InputRequestTypes> = Values<{\n  [Name in keyof (T)]: {\n    name: Name & string;\n    args: Parameters<T[Name]>;\n  }\n}>;\n\nclass ConnectorClass<T extends InputRequestTypes> {\n  private requestStates = new Map<string, RequestStates>();\n\n  private requestStatesByCallback = new Map<AnyToVoidFunction, RequestStates>();\n\n  constructor(\n    public target: Worker | Window | chrome.runtime.Port | DedicatedWorkerGlobalScope,\n    private onUpdate?: (update: ApiUpdate) => void,\n    private channel?: string,\n    private shouldUseJson?: boolean,\n    private targetOrigin = '*',\n  ) {\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  public destroy() {\n  }\n\n  init(...args: any[]) {\n    this.postMessage({\n      type: 'init',\n      args,\n    });\n  }\n\n  request(messageData: RequestTypes<T>) {\n    const { requestStates, requestStatesByCallback } = this;\n\n    const messageId = generateUniqueId();\n    const payload: CallMethodData = {\n      type: 'callMethod',\n      messageId,\n      ...messageData,\n    };\n\n    const requestState = { messageId } as RequestStates;\n\n    // Re-wrap type because of `postMessage`\n    const promise: Promise<any> = new Promise((resolve, reject) => {\n      Object.assign(requestState, { resolve, reject });\n    });\n\n    if (typeof payload.args[payload.args.length - 1] === 'function') {\n      payload.withCallback = true;\n\n      const callback = payload.args.pop() as AnyToVoidFunction;\n      requestState.callback = callback;\n      requestStatesByCallback.set(callback, requestState);\n    }\n\n    requestStates.set(messageId, requestState);\n    promise\n      .catch(() => undefined)\n      .finally(() => {\n        requestStates.delete(messageId);\n\n        if (requestState.callback) {\n          requestStatesByCallback.delete(requestState.callback);\n        }\n      });\n\n    this.postMessage(payload);\n\n    return promise;\n  }\n\n  cancelCallback(progressCallback: CancellableCallback) {\n    progressCallback.isCanceled = true;\n\n    const { messageId } = this.requestStatesByCallback.get(progressCallback) || {};\n    if (!messageId) {\n      return;\n    }\n\n    this.postMessage({\n      type: 'cancelProgress',\n      messageId,\n    });\n  }\n\n  onMessage(data: WorkerMessageData | string) {\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data, bigintReviver) as WorkerMessageData;\n      } catch (err: any) {\n        logDebugError('PostMessageConnector: Failed to parse message', err);\n        return;\n      }\n    }\n\n    const { requestStates, channel } = this;\n    if (data.channel !== channel) {\n      return;\n    }\n\n    if (data.type === 'update' && this.onUpdate) {\n      this.onUpdate(data.update);\n    }\n    if (data.type === 'methodResponse') {\n      const requestState = requestStates.get(data.messageId);\n      if (requestState) {\n        if (data.error) {\n          requestState.reject(data.error);\n        } else {\n          requestState.resolve(data.response);\n        }\n      }\n    } else if (data.type === 'methodCallback') {\n      const requestState = requestStates.get(data.messageId);\n      requestState?.callback?.(...data.callbackArgs);\n    } else if (data.type === 'unhandledError') {\n      throw new Error(data.error?.message);\n    }\n  }\n\n  private postMessage(data: AnyLiteral) {\n    data.channel = this.channel;\n\n    let rawData: AnyLiteral | string = data;\n    if (this.shouldUseJson) {\n      rawData = JSON.stringify(data);\n    }\n\n    if ('open' in this.target) { // Is Window\n      this.target.postMessage(rawData, this.targetOrigin);\n    } else {\n      this.target.postMessage(rawData);\n    }\n  }\n}\n\nexport function createConnector<T extends InputRequestTypes>(\n  worker: Worker | Window | DedicatedWorkerGlobalScope,\n  onUpdate?: (update: ApiUpdate) => void,\n  channel?: string,\n  targetOrigin?: string,\n) {\n  const connector = new ConnectorClass<T>(worker, onUpdate, channel, undefined, targetOrigin);\n\n  function handleMessage({ data }: WorkerMessageEvent | MessageEvent) {\n    connector.onMessage(data);\n  }\n\n  worker.addEventListener('message', handleMessage as any); // TS weirdly complains here\n\n  connector.destroy = () => {\n    worker.removeEventListener('message', handleMessage as any);\n  };\n\n  return connector;\n}\n\nexport function createExtensionConnector(\n  name: string,\n  onUpdate?: (update: ApiUpdate) => void,\n  getInitArgs?: () => any,\n  channel?: string,\n) {\n  const connector = new ConnectorClass(connect(), onUpdate, channel, true);\n\n  function connect() {\n    // eslint-disable-next-line no-restricted-globals\n    const port = self.chrome.runtime.connect({ name });\n\n    port.onMessage.addListener((data: string | WorkerMessageData) => {\n      connector.onMessage(data);\n    });\n\n    // For some reason port can suddenly get disconnected\n    port.onDisconnect.addListener(() => {\n      connector.target = connect();\n      connector.init(getInitArgs?.());\n    });\n\n    return port;\n  }\n\n  connector.init(getInitArgs?.());\n\n  return connector;\n}\n\nexport type Connector<T extends InputRequestTypes = InputRequestTypes> = ReturnType<typeof createConnector<T>>;\n","import type { AccountIdParsed, ApiBlockchainKey, ApiNetwork } from '../api/types';\n\nexport function parseAccountId(accountId: string): AccountIdParsed {\n  const [\n    id,\n    blockchain = 'ton', // Handle deprecated case when `accountId = '0'`\n    network = 'mainnet',\n  ] = accountId.split('-');\n  return {\n    id: Number(id),\n    blockchain: blockchain as ApiBlockchainKey,\n    network: network as ApiNetwork,\n  };\n}\n\nexport function buildAccountId(account: AccountIdParsed) {\n  const { id, network, blockchain } = account;\n  return `${id}-${blockchain}-${network}`;\n}\n","export function areDeepEqual<T extends any>(value1: T, value2: T): boolean {\n  const type1 = typeof value1;\n  const type2 = typeof value2;\n  if (type1 !== type2) {\n    return false;\n  }\n\n  // eslint-disable-next-line no-null/no-null\n  if (type1 !== 'object' || value1 === null || value2 === null) {\n    return value1 === value2;\n  }\n\n  const isArray1 = Array.isArray(value1);\n  const isArray2 = Array.isArray(value2);\n\n  if (isArray1 !== isArray2) {\n    return false;\n  }\n\n  if (isArray1) {\n    const array1 = value1 as any[];\n    const array2 = value2 as any[];\n\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    return array1.every((member1, i) => areDeepEqual(member1, array2[i]));\n  }\n\n  const object1 = value1 as AnyLiteral;\n  const object2 = value2 as AnyLiteral;\n  const keys1 = Object.keys(object1);\n\n  return keys1.every((key1) => areDeepEqual(object1[key1], object2[key1]));\n}\n","export function assert(condition: boolean, message?: string) {\n  if (!condition) {\n    throw new Error(message || 'Assertion failed');\n  }\n}\n","import { ONE_TON } from '../config';\nimport { fromDecimal } from './decimals';\nimport { randomBytes } from './random';\n\nexport const BIGINT_PREFIX = 'bigint:';\n\nexport function bigintReviver(this: any, key: string, value: any) {\n  if (typeof value === 'string' && value.startsWith(BIGINT_PREFIX)) {\n    return BigInt(value.slice(7));\n  }\n  return value;\n}\n\nexport function bigintAbs(value: bigint) {\n  return value === -0n || value < 0n ? -value : value;\n}\n\nexport function bigintDivideToNumber(value: bigint, num: number) {\n  return (value * ONE_TON) / fromDecimal(num);\n}\n\nexport function bigintMultiplyToNumber(value: bigint, num: number) {\n  return (value * fromDecimal(num)) / ONE_TON;\n}\n\nexport function bigintRandom(bytes: number) {\n  let value = BigInt(0);\n  for (const randomNumber of randomBytes(bytes)) {\n    const randomBigInt = BigInt(randomNumber);\n    // eslint-disable-next-line no-bitwise\n    value = (value << BigInt(8)) + randomBigInt;\n  }\n  return value;\n}\n\nexport function bigintCountBits(value: bigint) {\n  const binaryString = value.toString(2);\n  return binaryString.length;\n}\n","import { BIGINT_PREFIX } from './bigint';\n\n// Fixes serialization of objects containing `bigint` values.\n// Extracted to a separate file to avoid leaking into Extension Page Script.\n// @ts-ignore\nBigInt.prototype.toJSON = function toJSON() {\n  return `${BIGINT_PREFIX}${this}`;\n};\n","export function createCallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>() {\n  const callbacks = new Set<T>();\n\n  function addCallback(cb: T) {\n    callbacks.add(cb);\n\n    return () => {\n      removeCallback(cb);\n    };\n  }\n\n  function removeCallback(cb: T) {\n    callbacks.delete(cb);\n  }\n\n  function runCallbacks(...args: Parameters<T>) {\n    callbacks.forEach((callback) => {\n      callback(...args);\n    });\n  }\n\n  function hasCallbacks() {\n    return Boolean(callbacks.size);\n  }\n\n  return {\n    runCallbacks,\n    addCallback,\n    removeCallback,\n    hasCallbacks,\n  };\n}\n\nexport type CallbackManager<T extends AnyToVoidFunction = AnyToVoidFunction>\n  = ReturnType<typeof createCallbackManager<T>>;\n\nexport class EventEmitter {\n  private channels = new Map<string, CallbackManager>();\n\n  on(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).addCallback(handler);\n    return this;\n  }\n\n  removeListener(name: string, handler: AnyToVoidFunction) {\n    this.resolveChannel(name).removeCallback(handler);\n    return this;\n  }\n\n  emit(name: string, ...args: any) {\n    this.resolveChannel(name).runCallbacks(...args);\n    return this;\n  }\n\n  private resolveChannel(name: string) {\n    let channel = this.channels.get(name);\n    if (!channel) {\n      channel = createCallbackManager();\n      this.channels.set(name, channel);\n    }\n\n    return channel;\n  }\n}\n","import type { Connector } from '../PostMessageConnector';\nimport type { WindowMethodArgs, WindowMethodResponse, WindowMethods } from './types';\n\nimport { WINDOW_PROVIDER_CHANNEL } from '../../config';\nimport { logDebugError } from '../logs';\n\nimport { createConnector } from '../PostMessageConnector';\n\nlet connector: Connector;\n\nexport function initWindowConnector() {\n  if (!connector) {\n    // eslint-disable-next-line no-restricted-globals\n    connector = createConnector(self as DedicatedWorkerGlobalScope, undefined, WINDOW_PROVIDER_CHANNEL);\n    connector.init();\n  }\n}\n\nexport async function callWindow<T extends keyof WindowMethods>(methodName: T, ...args: WindowMethodArgs<T>) {\n  if (!connector) {\n    logDebugError('API is not initialized');\n    return undefined;\n  }\n\n  return (connector.request({\n    name: methodName,\n    args,\n  }) as WindowMethodResponse<T>);\n}\n","import type { ApiActivity } from '../api/types';\n\nexport function compareActivities(a: ApiActivity, b: ApiActivity, isAsc = false) {\n  let value = a.timestamp - b.timestamp;\n  if (value === 0) {\n    value = a.id > b.id ? 1 : a.id < b.id ? -1 : 0;\n  }\n  return isAsc ? value : -value;\n}\n","const zonesRegex = {\n  ton: /^([-\\da-z]+\\.){0,2}([-\\da-z]{4,126})\\.ton$/i,\n  't.me': /^([-\\da-z]+\\.){0,2}([-_\\da-z]{4,126})\\.t\\.me$/i,\n  vip: /^(?<base>([-\\da-z]+\\.){0,2}([\\da-z]{1,24}))\\.(ton\\.vip|vip\\.ton|vip)$/i,\n  gram: /^(?<base>([-\\da-z]+\\.){0,2}([\\da-z]{1,24}))\\.(gram)$/i,\n};\n\nfunction isDnsDomain(value: string) {\n  return Object.values(zonesRegex).some((zone) => zone.test(value));\n}\n\nfunction isVipDnsDomain(value: string) {\n  return zonesRegex.vip.test(value);\n}\n\nfunction isGramDnsDomain(value: string) {\n  return zonesRegex.gram.test(value);\n}\n\nfunction removeVipZone(value: string) {\n  value = value.replace(/\\.ton\\.vip$/i, '.vip').replace(/\\.vip\\.ton$/i, '.vip');\n  return value.match(zonesRegex.vip)?.groups?.base;\n}\n\nfunction removeGramZone(value: string) {\n  return value.match(zonesRegex.gram)?.groups?.base;\n}\n\nfunction removeTonZone(value: string) {\n  return value.replace(/\\.ton$/i, '');\n}\n\nexport default {\n  isDnsDomain,\n  isVipDnsDomain,\n  isGramDnsDomain,\n  removeVipZone,\n  removeGramZone,\n  removeTonZone,\n};\n","import { DEFAULT_ERROR_PAUSE, DEFAULT_RETRIES, DEFAULT_TIMEOUT } from '../config';\nimport { ApiServerError } from '../api/errors';\nimport { logDebug } from './logs';\nimport { pause } from './schedulers';\n\ntype QueryParams = Record<string, string | number | boolean | string[]>;\n\nconst MAX_TIMEOUT = 30000; // 30 sec\n\nexport async function fetchJson(url: string | URL, data?: QueryParams, init?: RequestInit) {\n  const urlObject = new URL(url);\n  if (data) {\n    Object.entries(data).forEach(([key, value]) => {\n      if (value === undefined) {\n        return;\n      }\n\n      if (Array.isArray(value)) {\n        value.forEach((item) => {\n          urlObject.searchParams.append(key, item.toString());\n        });\n      } else {\n        urlObject.searchParams.set(key, value.toString());\n      }\n    });\n  }\n\n  const response = await fetchWithRetry(urlObject, init);\n\n  return response.json();\n}\n\nexport async function fetchWithRetry(url: string | URL, init?: RequestInit, options?: {\n  retries?: number;\n  timeouts?: number | number[];\n  shouldSkipRetryFn?: (message?: string, statusCode?: number) => boolean;\n}) {\n  const {\n    retries = DEFAULT_RETRIES,\n    timeouts = DEFAULT_TIMEOUT,\n    shouldSkipRetryFn = isNotTemporaryError,\n  } = options ?? {};\n\n  let message = 'Unknown error.';\n  let statusCode: number | undefined;\n\n  for (let i = 1; i <= retries; i++) {\n    try {\n      if (i > 1) {\n        logDebug(`Retry request #${i}:`, url.toString(), statusCode);\n      }\n\n      const timeout = Array.isArray(timeouts)\n        ? timeouts[i - 1] ?? timeouts[timeouts.length - 1]\n        : Math.min(timeouts * i, MAX_TIMEOUT);\n      const response = await fetchWithTimeout(url, init, timeout);\n      statusCode = response.status;\n\n      if (statusCode >= 400) {\n        const { error } = await response.json().catch(() => undefined);\n        throw new Error(error ?? `HTTP Error ${statusCode}`);\n      }\n\n      return response;\n    } catch (err: any) {\n      message = typeof err === 'string' ? err : err.message ?? message;\n\n      const shouldSkipRetry = shouldSkipRetryFn(message, statusCode);\n\n      if (shouldSkipRetry) {\n        throw new ApiServerError(message, statusCode);\n      }\n\n      if (i < retries) {\n        await pause(DEFAULT_ERROR_PAUSE * i);\n      }\n    }\n  }\n\n  throw new ApiServerError(message);\n}\n\nexport async function fetchWithTimeout(url: string | URL, init?: RequestInit, timeout = DEFAULT_TIMEOUT) {\n  const controller = new AbortController();\n  const id = setTimeout(() => {\n    controller.abort();\n  }, timeout);\n\n  try {\n    return await fetch(url, {\n      ...init,\n      signal: controller.signal,\n      cache: 'no-cache', // TODO Remove it after a few releases\n    });\n  } finally {\n    clearTimeout(id);\n  }\n}\n\nexport async function handleFetchErrors(response: Response, ignoreHttpCodes?: number[]) {\n  if (!response.ok && (!ignoreHttpCodes?.includes(response.status))) {\n    // eslint-disable-next-line prefer-const\n    let { error, errors } = await response.json().catch(() => undefined);\n    if (!error && errors && errors.length) {\n      error = errors[0]?.msg;\n    }\n\n    throw new ApiServerError(error ?? `HTTP Error ${response.status}`, response.status);\n  }\n  return response;\n}\n\nfunction isNotTemporaryError(message?: string, statusCode?: number) {\n  return statusCode && [400, 404].includes(statusCode);\n}\n","export default function generateUniqueId() {\n  return Date.now().toString(36) + Math.random().toString(36).slice(2);\n}\n","import { APP_ENV, DEBUG_ALERT_MSG } from '../config';\nimport { throttle } from './schedulers';\n\nconst noop = () => {\n};\n\nconst throttledAlert = typeof window !== 'undefined' ? throttle(window.alert, 1000) : noop;\n\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('error', handleErrorEvent);\n// eslint-disable-next-line no-restricted-globals\nself.addEventListener('unhandledrejection', handleErrorEvent);\n\nfunction handleErrorEvent(e: ErrorEvent | PromiseRejectionEvent) {\n  // https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded\n  if (e instanceof ErrorEvent && e.message === 'ResizeObserver loop limit exceeded') {\n    return;\n  }\n\n  e.preventDefault();\n\n  handleError(e instanceof ErrorEvent ? (e.error || e.message) : e.reason);\n}\n\nexport function handleError(err: Error | string) {\n  // eslint-disable-next-line no-console\n  console.error(err);\n\n  const message = typeof err === 'string' ? err : err.message;\n  const stack = typeof err === 'object' ? err.stack : undefined;\n\n  if (message.endsWith('Failed to import rlottie-wasm.js')) {\n    return;\n  }\n\n  if (APP_ENV === 'development' || APP_ENV === 'staging') {\n    throttledAlert(`${DEBUG_ALERT_MSG}\\n\\n${(message) || err}\\n${stack}`);\n  }\n}\n","import { PRIVATE_KEY_HEX_LENGTH } from '../config';\n\nexport default function isMnemonicPrivateKey(mnemonic: string[]) {\n  return mnemonic.length === 1 && mnemonic[0].length === PRIVATE_KEY_HEX_LENGTH;\n}\n","type CollectionByKey<Member> = Record<number | string, Member>;\ntype GroupedByKey<Member> = Record<number | string, Member[]>;\n\ntype OrderDirection =\n  'asc'\n  | 'desc';\n\ninterface OrderCallback<T> {\n  (member: T): any;\n}\n\nexport function buildCollectionByKey<T extends AnyLiteral>(collection: T[], key: keyof T): CollectionByKey<T> {\n  return collection.reduce((byKey: CollectionByKey<T>, member: T) => {\n    byKey[member[key]] = member;\n\n    return byKey;\n  }, {});\n}\n\nexport function groupBy<T extends AnyLiteral>(collection: T[], key: keyof T): GroupedByKey<T> {\n  return collection.reduce((byKey: GroupedByKey<T>, member: T) => {\n    const groupKey = member[key];\n\n    if (!byKey[groupKey]) {\n      byKey[groupKey] = [member];\n    } else {\n      byKey[groupKey]!.push(member);\n    }\n\n    return byKey;\n  }, {});\n}\n\nexport function mapValues<R extends any, M extends any>(\n  byKey: CollectionByKey<M>,\n  callback: (member: M, key: string, index: number, originalByKey: CollectionByKey<M>) => R,\n): CollectionByKey<R> {\n  return Object.keys(byKey).reduce((newByKey: CollectionByKey<R>, key, index) => {\n    newByKey[key] = callback(byKey[key], key, index, byKey);\n    return newByKey;\n  }, {});\n}\n\nexport function pick<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    result[key] = object[key];\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function pickTruthy<T, K extends keyof T>(object: T, keys: K[]) {\n  return keys.reduce((result, key) => {\n    if (object[key]) {\n      result[key] = object[key];\n    }\n\n    return result;\n  }, {} as Pick<T, K>);\n}\n\nexport function omit<T extends object, K extends keyof T>(object: T, keys: K[]): Omit<T, K> {\n  const stringKeys = new Set(keys.map(String));\n  const savedKeys = Object.keys(object)\n    .filter((key) => !stringKeys.has(key)) as Array<Exclude<keyof T, K>>;\n\n  return pick(object, savedKeys);\n}\n\nexport function omitUndefined<T extends object>(object: T): T {\n  return Object.keys(object).reduce((result, stringKey) => {\n    const key = stringKey as keyof T;\n    if (object[key] !== undefined) {\n      result[key as keyof T] = object[key];\n    }\n    return result;\n  }, {} as T);\n}\n\nexport function orderBy<T>(\n  collection: T[],\n  orderRule: (keyof T) | OrderCallback<T> | ((keyof T) | OrderCallback<T>)[],\n  mode: OrderDirection | [OrderDirection, OrderDirection] = 'asc',\n): T[] {\n  function compareValues(a: T, b: T, currentOrderRule: (keyof T) | OrderCallback<T>, isAsc: boolean) {\n    const aValue = (typeof currentOrderRule === 'function' ? currentOrderRule(a) : a[currentOrderRule]) || 0;\n    const bValue = (typeof currentOrderRule === 'function' ? currentOrderRule(b) : b[currentOrderRule]) || 0;\n\n    if (aValue === bValue) return 0;\n\n    const condition = isAsc ? aValue > bValue : aValue < bValue;\n    return condition ? 1 : -1;\n  }\n\n  if (Array.isArray(orderRule)) {\n    const [mode1, mode2] = Array.isArray(mode) ? mode : [mode, mode];\n    const [orderRule1, orderRule2] = orderRule;\n    const isAsc1 = mode1 === 'asc';\n    const isAsc2 = mode2 === 'asc';\n\n    return collection.sort((a, b) => {\n      return compareValues(a, b, orderRule1, isAsc1) || compareValues(a, b, orderRule2, isAsc2);\n    });\n  }\n\n  const isAsc = mode === 'asc';\n  return collection.sort((a, b) => {\n    return compareValues(a, b, orderRule, isAsc);\n  });\n}\n\nexport function unique<T extends any>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function compact<T extends any>(array: T[]) {\n  return array.filter(Boolean);\n}\n\nexport function areSortedArraysEqual(array1: any[], array2: any[]) {\n  if (array1.length !== array2.length) {\n    return false;\n  }\n\n  return array1.every((item, i) => item === array2[i]);\n}\n\nexport function split<T extends any>(array: T[], chunkSize: number) {\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n\nexport function cloneDeep<T>(value: T): T {\n  if (!isObject(value)) {\n    return value;\n  }\n\n  if (Array.isArray(value)) {\n    return value.map(cloneDeep) as typeof value;\n  }\n\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key as keyof T] = cloneDeep(value[key as keyof T]);\n    return acc;\n  }, {} as T);\n}\n\nexport function isLiteralObject(value: any): value is AnyLiteral {\n  return isObject(value) && !Array.isArray(value);\n}\n\nfunction isObject(value: any): value is object {\n  // eslint-disable-next-line no-null/no-null\n  return typeof value === 'object' && value !== null;\n}\n\nexport function findLast<T>(array: Array<T>, predicate: (value: T, index: number, obj: T[]) => boolean): T | undefined {\n  let cursor = array.length;\n\n  while (cursor--) {\n    if (predicate(array[cursor], cursor, array)) {\n      return array[cursor];\n    }\n  }\n\n  return undefined;\n}\n\nexport function range(start: number, end: number) {\n  const arr: number[] = [];\n  for (let i = start; i < end;) {\n    arr.push(i++);\n  }\n  return arr;\n}\n\nexport function fromKeyValueArrays<T>(keys: string[], values: T[] | T) {\n  return keys.reduce((acc, key, index) => {\n    acc[key] = Array.isArray(values) ? values[index] : values;\n    return acc;\n  }, {} as Record<string, T>);\n}\n\nexport function extractKey<T, K extends keyof T>(array: T[], key: K): T[K][] {\n  return array.map((value) => value[key]);\n}\n\nexport function findDifference<T>(array1: T[], array2: T[]): T[] {\n  const set2 = new Set(array2);\n\n  return array1.filter((element) => !set2.has(element));\n}\n","import { DEBUG } from '../config';\n\nexport function logDebugError(message: string, ...args: any[]) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.error(`[DEBUG][${message}]`, ...args);\n  }\n}\n\nexport function logDebug(message: any, ...args: any[]) {\n  if (DEBUG) {\n    // eslint-disable-next-line no-console\n    console.log(`[DEBUG] ${message}`, ...args);\n  }\n}\n","import { BRILLIANT_API_BASE_URL, IS_CAPACITOR } from '../config';\n\nconst IPFS_GATEWAY_BASE_URL: string = 'https://ipfs.io/ipfs/';\n\nexport function fetchJsonMetadata(url: string) {\n  url = fixIpfsUrl(url);\n\n  const reserveUrl = `${BRILLIANT_API_BASE_URL}/utils/download-json?url=${url}`;\n\n  if (IS_CAPACITOR) {\n    return fetchJson(reserveUrl);\n  }\n\n  return fetchJson(url).catch(() => {\n    return fetchJson(reserveUrl);\n  });\n}\n\nexport function fixIpfsUrl(url: string) {\n  return url.replace('ipfs://', IPFS_GATEWAY_BASE_URL);\n}\n\nasync function fetchJson(url: string) {\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw Error(`Http error ${response.status}`);\n  }\n  return response.json();\n}\n","import { pause } from './schedulers';\n\nimport Deferred from './Deferred';\n\nconst deferreds = new Set<Deferred>();\n\nlet isFocused = true;\n\nexport function pauseOrFocus(ms: number, msWhenNotFocused = ms) {\n  const deferred = new Deferred();\n\n  deferreds.add(deferred);\n\n  deferred.promise.then(() => {\n    deferreds.delete(deferred);\n  });\n\n  pause(isFocused ? ms : msWhenNotFocused).then(deferred.resolve);\n\n  return deferred.promise;\n}\n\nexport function setIsAppFocused(_isFocused: boolean) {\n  isFocused = _isFocused;\n\n  if (_isFocused) {\n    deferreds.forEach((d) => d.resolve());\n  }\n}\n","import { DEBUG_MORE } from '../config';\nimport { handleError } from './handleError';\n\nconst SAFE_EXEC_ENABLED = !DEBUG_MORE;\n\nexport default function safeExec(cb: Function, rescue?: (err: Error) => void, always?: NoneToVoidFunction) {\n  if (!SAFE_EXEC_ENABLED) {\n    return cb();\n  }\n\n  try {\n    return cb();\n  } catch (err: any) {\n    rescue?.(err);\n    handleError(err);\n    return undefined;\n  } finally {\n    always?.();\n  }\n}\n","export type Scheduler = typeof requestAnimationFrame | typeof onTickEnd;\n\nexport function debounce<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n  shouldRunLast = true,\n) {\n  let waitingTimeout: number | undefined;\n\n  return (...args: Parameters<F>) => {\n    if (waitingTimeout) {\n      clearTimeout(waitingTimeout);\n      waitingTimeout = undefined;\n    } else if (shouldRunFirst) {\n      fn(...args);\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    waitingTimeout = self.setTimeout(() => {\n      if (shouldRunLast) {\n        fn(...args);\n      }\n\n      waitingTimeout = undefined;\n    }, ms);\n  };\n}\n\nexport function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true,\n) {\n  let interval: number | undefined;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if (!interval) {\n      if (shouldRunFirst) {\n        isPending = false;\n        fn(...args);\n      }\n\n      // eslint-disable-next-line no-restricted-globals\n      interval = self.setInterval(() => {\n        if (!isPending) {\n          // eslint-disable-next-line no-restricted-globals\n          self.clearInterval(interval!);\n          interval = undefined;\n          return;\n        }\n\n        isPending = false;\n        fn(...args);\n      }, ms);\n    }\n  };\n}\n\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWith<F extends AnyToVoidFunction>(schedulerFn: Scheduler, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if (!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        fn(...args);\n      });\n    }\n  };\n}\n\nexport function onIdle(cb: NoneToVoidFunction, timeout?: number) {\n  // eslint-disable-next-line no-restricted-globals\n  if (self.requestIdleCallback) {\n    // eslint-disable-next-line no-restricted-globals\n    self.requestIdleCallback(cb, { timeout });\n  } else {\n    onTickEnd(cb);\n  }\n}\n\nexport const pause = (ms: number) => new Promise<void>((resolve) => {\n  setTimeout(() => resolve(), ms);\n});\n\nexport function rafPromise() {\n  return new Promise<void>((resolve) => {\n    fastRaf(resolve);\n  });\n}\n\nconst FAST_RAF_TIMEOUT_FALLBACK_MS = 35; // < 30 FPS\n\nlet fastRafCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackCallbacks: Set<NoneToVoidFunction> | undefined;\nlet fastRafFallbackTimeout: number | undefined;\n\n// May result in an immediate execution if called from another RAF callback which was scheduled\n// (and therefore is executed) earlier than RAF callback scheduled by `fastRaf`\nexport function fastRaf(callback: NoneToVoidFunction, withTimeoutFallback = false) {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = new Set([callback]);\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n\n      fastRafCallbacks = undefined;\n      fastRafFallbackCallbacks = undefined;\n\n      if (fastRafFallbackTimeout) {\n        clearTimeout(fastRafFallbackTimeout);\n        fastRafFallbackTimeout = undefined;\n      }\n\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.add(callback);\n  }\n\n  if (withTimeoutFallback) {\n    if (!fastRafFallbackCallbacks) {\n      fastRafFallbackCallbacks = new Set([callback]);\n    } else {\n      fastRafFallbackCallbacks.add(callback);\n    }\n\n    if (!fastRafFallbackTimeout) {\n      fastRafFallbackTimeout = window.setTimeout(() => {\n        const currentTimeoutCallbacks = fastRafFallbackCallbacks!;\n\n        if (fastRafCallbacks) {\n          currentTimeoutCallbacks.forEach(fastRafCallbacks.delete, fastRafCallbacks);\n        }\n        fastRafFallbackCallbacks = undefined;\n\n        if (fastRafFallbackTimeout) {\n          clearTimeout(fastRafFallbackTimeout);\n          fastRafFallbackTimeout = undefined;\n        }\n\n        currentTimeoutCallbacks.forEach((cb) => cb());\n      }, FAST_RAF_TIMEOUT_FALLBACK_MS);\n    }\n  }\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onTickEnd(callback: NoneToVoidFunction) {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = [callback];\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks!;\n      onTickEndCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    onTickEndCallbacks.push(callback);\n  }\n}\n\nlet beforeUnloadCallbacks: NoneToVoidFunction[] | undefined;\n\nexport function onBeforeUnload(callback: NoneToVoidFunction, isLast = false) {\n  if (!beforeUnloadCallbacks) {\n    beforeUnloadCallbacks = [];\n    // eslint-disable-next-line no-restricted-globals\n    self.addEventListener('beforeunload', () => {\n      beforeUnloadCallbacks!.forEach((cb) => cb());\n    });\n  }\n\n  if (isLast) {\n    beforeUnloadCallbacks.push(callback);\n  } else {\n    beforeUnloadCallbacks.unshift(callback);\n  }\n\n  return () => {\n    beforeUnloadCallbacks = beforeUnloadCallbacks!.filter((cb) => cb !== callback);\n  };\n}\n\nexport async function waitFor(cb: () => boolean, interval: number, attempts: number) {\n  let i = 0;\n  let result = cb();\n\n  while (!result && i < attempts) {\n    await pause(interval);\n\n    i++;\n    result = cb();\n  }\n\n  return result;\n}\n","export function buildSwapId(backendId: string) {\n  return `swap:${backendId}`;\n}\n","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors-node_modules_ton_core_dist_dict_parseDict_js-node_modules_ton_core_dist_dict_serializ-1afbe3\",\"vendors-node_modules_ton_core_dist_boc_BitReader_js-node_modules_ton_core_dist_dict_Dictionar-9afbaa\",\"src_api_blockchains_ton_contracts_DnsItem_ts-src_api_blockchains_ton_contracts_JettonMaster_t-0a00c7\",\"src_util_createPostMessageInterface_ts-src_util_decimals_ts-src_util_random_ts\"], () => (__webpack_require__(\"./src/api/providers/worker/provider.ts\")))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"vendors-node_modules_ton_core_dist_dict_parseDict_js-node_modules_ton_core_dist_dict_serializ-1afbe3\":\"e3b1155847c2dfd0685c\",\"vendors-node_modules_ton_core_dist_boc_BitReader_js-node_modules_ton_core_dist_dict_Dictionar-9afbaa\":\"955f364579cad656bc8a\",\"src_api_blockchains_ton_contracts_DnsItem_ts-src_api_blockchains_ton_contracts_JettonMaster_t-0a00c7\":\"07b8bdbe20fdfd918f15\",\"src_util_createPostMessageInterface_ts-src_util_decimals_ts-src_util_random_ts\":\"382fb0ce2eabaeee6524\"}[chunkId] + \".js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t\"worker\": 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkmytonwallet\"] = self[\"webpackChunkmytonwallet\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn Promise.all([\"vendors-node_modules_ton_core_dist_dict_parseDict_js-node_modules_ton_core_dist_dict_serializ-1afbe3\",\"vendors-node_modules_ton_core_dist_boc_BitReader_js-node_modules_ton_core_dist_dict_Dictionar-9afbaa\",\"src_api_blockchains_ton_contracts_DnsItem_ts-src_api_blockchains_ton_contracts_JettonMaster_t-0a00c7\",\"src_util_createPostMessageInterface_ts-src_util_decimals_ts-src_util_random_ts\"].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n",""],"names":["ton","Address","dns","fetchAddressBook","dnsResolve","getTonClient","toBase64Address","getKnownAddressInfo","DnsCategory","TON_DNS_COLLECTION","VIP_DNS_COLLECTION","GRAM_DNS_COLLECTION","resolveAddress","network","address","isDomain","isDnsDomain","domain","resolvedAddress","resolveAddressByDomain","undefined","addressBook","user_friendly","normalizedAddress","normalizeAddress","known","_domain","name","base","collection","isVipDnsDomain","removeVipZone","isGramDnsDomain","removeGramZone","removeTonZone","result","Wallet","err","_err$message","message","includes","tonWebMnemonic","nacl","ApiCommonError","isMnemonicPrivateKey","logDebugError","getAccountValue","setAccountValue","bytesToHex","hexToBytes","PBKDF2_IMPORT_KEY_ARGS","PBKDF2_DERIVE_KEY_ARGS","iterations","hash","PBKDF2_DERIVE_KEY_TYPE","length","generateMnemonic","validateMnemonic","mnemonic","privateKeyHexToKeyPair","privateKeyHex","sign","keyPair","fromSeed","mnemonicToKeyPair","encryptMnemonic","password","plaintext","join","salt","crypto","getRandomValues","Uint8Array","keyMaterial","subtle","importKey","TextEncoder","encode","key","deriveKey","iv","ptUint8","ctBuffer","encrypt","ctArray","Array","from","ctBase64","btoa","String","fromCharCode","ivHex","map","b","toString","slice","saltHex","decryptMnemonic","encrypted","decryptMnemonicLegacy","encryptedData","split","match","parseInt","ctStr","atob","ctUint8","ch","charCodeAt","plainBuffer","decrypt","TextDecoder","decode","pwUtf8","pwHash","digest","byte","alg","fetchMnemonic","accountId","mnemonicEncrypted","tryMigratingMnemonicEncryption","console","error","decryptedMnemonic","catch","DebugError","Promise","all","fetchPrivateKey","secretKey","privateKey","fetchKeyPair","rawSign","dataHex","signature","detached","verifyPassword","Boolean","Workchain","TOKEN_TRANSFER_TONCOIN_AMOUNT","TOKEN_TRANSFER_TONCOIN_FORWARD_AMOUNT","NFT_TRANSFER_TONCOIN_AMOUNT","NFT_TRANSFER_TONCOIN_FORWARD_AMOUNT","STAKE_COMMENT","UNSTAKE_COMMENT","ATTEMPTS","DEFAULT_DECIMALS","DEFAULT_IS_BOUNCEABLE","WALLET_IS_BOUNCEABLE","FEE_FACTOR","ALL_WALLET_VERSIONS","WORKCHAIN","BaseChain","TRANSFER_TIMEOUT_SEC","OpCode","JettonOpCode","NftOpCode","LiquidStakingOpCode","VestingV1OpCode","SingleNominatorOpCode","DnsOpCode","OtherOpCode","ContractType","DNS_CATEGORY_HASH_MAP","dns_next_resolver","wallet","site","storage","DNS_ZONES_MAP","KnownContracts","simpleR1","type","simpleR2","simpleR3","v2R1","v2R2","v3R1","v3R2","v4R1","v4R2","W5","highloadV2","nominatorPool","Staking","multisig","multisigV2","vesting","multisigNew","dedustPool","isSwapAllowed","dedustVaultNative","dedustVaultJetton","stonPtonWallet","stonRouter","megatonWtonMaster","megatonRouter","beginCell","contractAddress","TupleReader","nominatorPoolConfigToCell","config","endCell","NominatorPool","constructor","init","createFromAddress","createFromConfig","code","workchain","arguments","data","getListNominators","provider","res","get","tupleReader","stack","readTuple","itemsArray","items","tupleItems","value","tuple","readBigNumber","padStart","parse","amount","pendingDepositAmount","withdrawRequested","readNumber","getAccountNfts","getNftUpdates","checkNftTransferDraft","submitNftTransfers","oneCellFromBoc","buildTokenSlug","checkTransactionDraft","getAccountNewestTxId","getAccountTransactionSlice","getTokenTransactionSlice","submitTransfer","waitPendingTransfer","checkMultiTransactionDraft","submitMultiTransfer","getMergedTransactionSlice","sendSignedMessage","sendSignedMessages","decryptComment","waitUntilTransactionAppears","fixTokenActivitiesAddressForm","submitTransferWithDiesel","fetchEstimateDiesel","getAccountBalance","pickAccountWallet","pickBestWallet","publicKeyToAddress","resolveWalletVersion","getWalletStateInit","getWalletBalance","getWalletSeqno","isAddressInitialized","isActiveSmartContract","getWalletInfo","pickWalletByAddress","getWalletVersions","getWalletVersionInfos","getContractInfo","checkStakeDraft","checkUnstakeDraft","submitStake","submitUnstake","getStakingState","packPayloadToBoc","checkApiAvailability","getAccountTokenBalances","getTokenBalances","getAddressTokenBalances","fetchToken","resolveTokenBySlug","resolveTokenWalletAddress","resolveTokenMinterAddress","parsePayloadBase64","validateDexSwapTransfers","Builder","BURN_ADDRESS","NFT_BATCH_SIZE","NOTCOIN_EXCHANGERS","NOTCOIN_FORWARD_TON_AMOUNT","NOTCOIN_VOUCHERS_ADDRESS","parseAccountId","compact","generateQueryId","buildNft","fetchAccountEvents","fetchAccountNfts","fetchNftItems","commentToBytes","packBytesAsSnake","fetchStoredAccount","fetchStoredAddress","checkToAddress","offset","limit","rawNfts","rawNft","fromSec","_events$0$timestamp","_events$","events","timestamp","reverse","updates","event","action","actions","to","nftAddress","isPurchase","NftPurchase","NftItemTransfer","sender","recipient","nft","rawNftAddress","buyer","push","options","nftAddresses","comment","toAddress","fromAddress","checkAddressResult","messages","payload","buildNftTransferPayload","nfts","index","isNotcoinBurn","collectionAddress","buildNotcoinVoucherExchange","nftIndex","first4Bits","readUint8","storeUint","forwardAmount","builder","TransferOwnership","storeAddress","storeBit","storeCoins","forwardPayload","bytes","freeBytes","Math","floor","availableBits","storeBuffer","Buffer","storeMaybeRef","Cell","cell","storeStringTail","asCell","toBoc","getMasterchainInfo","ApiLiquidUnstakeMode","ApiTransactionDraftError","LIQUID_JETTON","LIQUID_POOL","ONE_TON","VALIDATION_PERIOD_MS","bigintDivideToNumber","bigintMultiplyToNumber","fromDecimal","buildLiquidStakingDepositBody","buildLiquidStakingWithdrawBody","getTokenBalance","getAccountCache","getStakingCommonCache","updateAccountCache","apiDb","backendState","staked","poolAddress","nominatorsPool","InvalidAmount","body","commonData","tokenAmount","InsufficientBalance","liquid","currentRate","params","buildLiquidStakingWithdraw","Unexpected","stakedAt","Date","now","mode","instantAvailable","BestRate","Default","tokenWalletAddress","responseAddress","fillOrKill","Instant","waitTillRoundEnd","_accountCache$stakedA","_backendState$stakedA","tokenBalance","getLiquidStakingTokenBalance","unstakeAmount","where","toArray","_nft$name","billAmount","groups","loyaltyType","shouldUseNominators","accountCache","max","isInstantUnstake","liquidAvailable","available","liquidApy","apy","loyaltyApy","fullTokenAmount","unstakeRequestAmount","getPoolContract","nominators","addressObject","currentNominator","find","n","equals","balance","isUnstakeRequested","open","walletAddress","isInitialized","SWAP_FEE_ADDRESS","TON_SYMBOL","assert","findTokenByMinter","MEGATON_WTON_MINTER","MAX_NETWORK_FEE","request","transfers","mainTransfer","feeTransfer","maxAmount","fromAmount","codeHash","token","decimals","maxTonAmount","minterAddress","parsedPayload","destination","feePayload","tokenFeeAmount","feeDestination","DEFAULT_DECIMAL_PLACES","TONCOIN_SLUG","fixIpfsUrl","fetchJettonMetadata","fixBase64ImageData","parseJettonWalletMsgBody","fetchJettonBalances","buildTokenTransferBody","JettonWallet","KNOWN_TOKENS","slug","cmcSlug","symbol","knownTokens","addKnownTokens","balancesRaw","parseTokenBalance","filter","balanceRaw","jetton","wallet_address","buildTokenByMetadata","BigInt","jettonWallet","parseTokenTransaction","tx","extraData","parsedData","operation","jettonAmount","encryptedComment","isIncoming","buildTokenTransfer","tokenAddress","realTokenAddress","Error","tokenWallet","getTokenWallet","minter","Object","values","getKnownTokens","tokens","addKnownToken","quote","price","priceUsd","percentChange24h","metadata","image","image_data","imageData","Number","external","internal","SendMode","storeMessage","ApiTransactionError","DIESEL_ADDRESS","compareActivities","buildCollectionByKey","omit","pause","withCacheAsync","parseTxId","fetchLatestTxId","fetchTransactions","decryptMessageComment","encryptMessageComment","parseWalletTransactionBody","sendExternal","getTonWalletContract","getWalletPublicKey","packBytesAsSnakeForEncryptedData","parseAddress","parseBase64","callBackendGet","updateTransactionMetadata","base64ToBytes","isKnownStakingPool","ApiServerError","handleServerError","GET_TRANSACTIONS_LIMIT","GET_TRANSACTIONS_MAX_LIMIT","WAIT_TRANSFER_TIMEOUT","WAIT_TRANSFER_PAUSE","WAIT_TRANSACTION_PAUSE","MAX_BALANCE_WITH_CHECK_DIESEL","PENDING_DIESEL_TIMEOUT","pendingTransfers","checkHasTransaction","transactions","stateInit","shouldEncrypt","isBase64Data","isBounceable","isToAddressNew","InactiveContract","toPublicKey","WalletNotInitialized","account","getJettonBalance","transaction","signTransaction","realFee","calculateFee","fee","isFullTonBalance","isEnoughBalance","status","dieselStatus","dieselAmount","isAwaitingNotExpiredPrevious","estimateDiesel","resolved","addressName","isMemoRequired","isScam","DomainNotResolved","isValid","isUserFriendly","isTestOnly","InvalidToAddress","regex","isUrlSafe","test","InvalidAddressFormat","publicKey","stringToPayload","seqno","isFullBalance","client","msgHash","boc","addPendingTransfer","resolveTransactionError","_ref","IncorrectDeviceTime","statusCode","displayError","UnsuccesfulTransfer","_ref2","expireAt","round","refs","sendMode","CARRY_ALL_REMAINING_BALANCE","PAY_GAS_SEPARATELY","IGNORE_ERRORS","createTransfer","bounce","timeout","fetchNewestTxId","toTxId","fromTxId","populateTransactions","updateTransactionType","omitExtraData","transactionToActivity","Set","addressesForFixFormat","add","prevOwner","newOwner","size","nftsByAddress","lastTxIds","toncoin","lastTonTxId","tokenLastTxIds","tonTxs","txId","lastTonTxLt","lt","results","entries","_ref3","lastTxId","allTxs","flat","sort","tokenSlug","_transaction$metadata","normalizedFromAddress","normalizedToAddress","isLiquidUnstakeRequest","kind","id","withDiesel","totalAmount","isMainnet","signMultiTransaction","forEach","clearedMessages","preparedMessages","isBase64Payload","fromBase64","externalMessage","toExternalMessage","contract","storeWritable","buildPendingTransferKey","promise","retrySendBoc","_ref4","tonClient","waitUntil","sendFile","walletInfo","pendingTransfer","source_fees","fees","estimateExternalMessageFee","initCode","initData","ignoreSignature","in_fwd_fee","storage_fee","gas_fee","fwd_fee","version","base64","attempts","attempt","firstBoc","msgHashes","successNumber","buffer","latestTxId","activities","tokenAddresses","activity","pendingCreatedAt","getTime","TONHTTPAPI_V3_MAINNET_API_URL","TONHTTPAPI_V3_TESTNET_API_URL","fetchJson","omitUndefined","getEnvironment","stringifyTxId","ADDRESS_BOOK_CHUNK_SIZE","fromLt","toLt","callApiV3","start_lt","end_lt","rawTransactions","address_book","_rawTransactions$","pop","rawTx","parseRawTransaction","total_fees","description","compute_ph","exit_code","exitCode","in_msg","source","inMsgHash","msgs","out_msgs","msg","i","shouldHide","getRawBody","message_content","addresses","chunks","chunk","reduce","acc","assign","fixAddressFormat","path","apiHeaders","tonhttpapiMainnetKey","tonhttpapiTestnetKey","baseUrl","apiKey","headers","callBackendPost","DIESEL_URL","dieselSendBoc","sha256","categoryToBigInt","category","categoryBytes","categoryHashHex","parseSmartContractAddressImpl","prefix0","prefix1","asSlice","byte0","loadUint","byte1","parseSmartContractAddressRecord","parseNextResolverRecord","parseStorageBagIdRecord","loadBuffer","parseSiteRecord","parseAdnlAddressRecord","dnsResolveImpl","dnsAddress","rawDomainBytes","oneStep","len","domainCell","categoryBN","callGetMethod","resultLen","readCell","DnsNextResolver","Site","BagId","nextAddress","domainToBytes","toLowerCase","s","substring","c","arr","part","rawDomain","rootDnsAddress","loadUintBig","hashPart","ed25519","require","aesjs","hmacSha512","hmacAlgo","hmacKey","getAesCbcState","ModeOfOperation","cbc","getRandomPrefix","dataLength","minPadding","prefixLength","prefix","combineSecrets","a","encryptDataWithPrefix","sharedSecret","dataHash","msgKey","set","cbcStateSecret","encryptDataImpl","combined","encryptData","myPublicKey","theirPublicKey","getSharedSecret","prefixedEncrypted","myPrivateKey","senderAddress","commentBytes","encryptedBytes","alloc","writeUInt32BE","Encrypted","doDecrypt","decryptedData","gotMsgKey","decryptDataImpl","decryptData","decrypted","decryptedBytes","bigintRandom","bigintReviver","cloneDeep","JSON","stringify","addressPart","replace","BitReader","BitString","Slice","Dictionary","DEBUG","NFT_FRAGMENT_COLLECTIONS","pick","range","fetchJsonMetadata","checkHasScamLink","checkIsTrustedCollection","base64ToString","getDnsItemDomain","getJettonMinterData","OFFCHAIN_CONTENT_PREFIX","SNAKE_PREFIX","beginParse","opCode","queryId","Transfer","InternalTransfer","loadCoins","loadMaybeAddress","loadBit","isSeparateCell","remainingBits","remainingRefs","loadRef","forwardOpCode","Comment","readSnakeBytes","decodedData","dictSnakeBufferValue","sliceToVal","v","isFirst","concat","serialize","jettonOnChainMetadataSpec","uri","content","contentUri","fetchJettonOffchainMetadata","parseJettonOnchainMetadata","offchainMetadata","dict","loadDict","Keys","_dict$get","sha256Key","val","_transaction$extraDat","dataToSlice","parsePayloadSlice","_await$parsePayloadSl","shouldLoadItems","transactionDebug","_forwardPayload","loadAddress","responseDestination","customPayload","loadMaybeRef","storeBits","loadBits","storeRef","_nft","readForwardPayloadCell","readComment","nftName","OwnershipAssigned","Burn","addressObj","DistributedAsset","Withdrawal","Deposit","appId","AddWhitelist","addressString","toRawString","Withdraw","ChangeValidator","Vote","votingAddress","expirationDate","vote","needConfirmation","ChangeRecord","_Object$entries$find","dataSlice","endParse","dataAddress","flags","record","TokenBridgePaySwap","swapId","_opCode","debugTxString","opCodeHex","fromBoc","_forwardPayload2","previews","sale","trust","render_type","renderType","hasScamLink","text","isHidden","imageFromPreview","x","resolution","url","thumbnail","isOnSale","collectionName","isOnFragment","has","neededInit","isContractDeployed","ext","store","axios","WalletContractV1R1","WalletContractV1R2","WalletContractV1R3","WalletContractV2R1","WalletContractV2R2","WalletContractV3R1","WalletContractV3R2","WalletContractV4","WalletContractV5R1","DEFAULT_TIMEOUT","TONHTTPAPI_MAINNET_API_KEY","TONHTTPAPI_MAINNET_URL","TONHTTPAPI_TESTNET_API_KEY","TONHTTPAPI_TESTNET_URL","axiosFetchAdapter","DnsItem","JettonMinter","TonClient","defaults","adapter","TON_MAX_COMMENT_BYTES","clientByNetwork","walletClassMap","mainnet","endpoint","testnet","publicKeyHex","walletClass","create","getWalletAddress","getWalletData","bigintKey","hex","getJettonData","urlSafe","bounceable","testOnly","toRawAddress","startBuffer","maxBytes","packBytesAsSnakeCell","mainBuilder","prevBuilder","currentBuilder","_prevBuilder","_prevBuilder2","createNestedCell","maxCellSize","remainingData","ROOT_BUILDER_BYTES","MAX_CELLS_AMOUNT","rootBuilder","min","buildLiquidStakingWithdrawCustomPayload","isRaw","parseRaw","isFriendly","parseFriendly","getIsRawAddress","nftData","getNftData","zone","getTelemintDomain","getDomain","Api","HttpClient","TONAPIIO_MAINNET_URL","TONAPIIO_TESTNET_URL","fetchWithRetry","MAX_LIMIT","EVENTS_LIMIT","apiByNetwork","getApi","baseApiParams","customFetch","accounts","getAccountJettonsBalances","balances","getNftItemsByAddresses","account_ids","nft_items","getAccountNftItems","indirect_ownership","getAccountEvents","start_date","storeStateInit","DEFAULT_WALLET_VERSION","walletOrAddress","isWallet","walletVersion","buildWallet","WalletClass","account_state","accountState","last_transaction_id","getAddressInfo","state","contractInfo","info","allWallets","defaultWallet","withBiggestBalance","best","current","_best$balance","withLastTx","v4Wallet","v4JettonBalances","versions","w","publicKeyBytes","buildAccountId","MIN_ACCOUNT_NUMBER","loginResolve","loginPromise","resolve","getAccountIds","keys","getItem","getAccountIdWithMnemonic","byId","fetchStoredAccounts","ledger","getNewAccountId","ids","blockchain","fetchStoredPublicKey","updateStoredAccount","partial","_await$storage$getIte","removeAccountValue","removedValue","restData","setItem","removeNetworkAccountsValue","getCurrentNetwork","getCurrentAccountId","getCurrentAccountIdOrFail","waitLogin","RE_LINK_TEMPLATE","RE_TG_BOT_MENTION","cleanText","knownAddresses","scamMarkers","trustedSites","trustedCollections","tryUpdateKnownAddresses","RegExp","getKnownAddresses","getScamMarkers","checkIsTrustedSite","matches","matchAll","_match$groups","host","checkHasTelegramBotMention","BRILLIANT_API_BASE_URL","handleFetchErrors","BAD_REQUEST_CODE","authToken","isAllowBadRequest","method","response","fetch","json","URL","stakingCommonCache","_accountCache","setStakingCommonCache","generateUniqueId","ApiUserRejectsError","deferreds","Map","Deferred","_defineProperty","reject","createDappPromise","promiseId","deferred","resolveDappPromise","delete","rejectDappPromise","reason","rejectAllDappPromises","IS_CAPACITOR","IS_EXTENSION","MAIN_ACCOUNT_ID","areDeepEqual","capacitorStorage","idbStorage","localCounter","getNextLocalId","actualStateVersion","migrationEnsurePromise","resolveBlockchainKey","toInternalAccountId","buildInternalAccountId","buildLocalTransaction","restParams","isNftTransfer","hasScamMarkers","some","sm","shouldCheckComment","hasScamInComment","currentOnUpdate","connectUpdater","onUpdate","disconnectUpdater","isUpdaterAlive","startStorageMigration","migrateStorage","_currentOnUpdate","waitStorageMigration","idbVersion","idbData","getAll","setMany","removeItem","field","raw","oldItem","newItem","prevValue","newValue","rawData","dapps","accountDapps","dapp","connectedAt","byAccountId","internalAccountId","accountData","parsed","mainnetAccountId","testnetAccountId","publicKeys","oldAddress","newAddress","isSseSupported","_dapp$sse","sse","appClientId","_dapp$sse2","clientId","clear","isIosKeychainModeMigrated","isIosApp","iosBackupAndMigrateKeychainMode","getKeys","startsWith","backupKey","backupValue","shouldRewrite","createCallbackManager","txCallbacks","whenTxComplete","addCallback","callback","removeCallback","STAKING_POOLS","bytesToBase64","poolPart","endsWith","Dexie","Table","DB_NANE","ApiDb","stores","sseConnections","ELECTRON_TONHTTPAPI_MAINNET_API_KEY","ELECTRON_TONHTTPAPI_TESTNET_API_KEY","ELECTRON_ORIGIN","environment","setEnvironment","args","_self","isDappSupported","isElectron","isNativeBottomSheet","self","origin","ApiBaseError","ServerError","ApiUnsupportedVersionError","UnsupportedVersion","ApiHardwareBlindSigningNotEnabled","HardwareBlindSigningNotEnabled","AbortOperationError","maybeApiErrors","fn","hooks","addHooks","hook","_hooks$name","callHook","_len","_key","_hooks$name2","deactivateAccountDapp","deactivateAllDapps","onActiveDappAccountUpdated","sendUpdateTokens","setupBalanceBasedPolling","setupStakingPolling","setupVestingPolling","setupWalletVersionsPolling","activeAccountId","activateAccount","newestTxIds","prevAccountId","isFirstLogin","deactivateAllAccounts","deactivateCurrentAccount","isAccountActive","fetchAccount","getActiveAccountId","blockchains","removeAccountDapps","removeAllDapps","removeNetworkDapps","createWallet","storeAccount","importMnemonic","isPrivateKey","importLedgerWallet","driver","deviceId","deviceName","storeHardwareAccount","importNewWalletVersion","newAccountId","newAccount","removeNetworkAccounts","resetAccounts","removeAccount","nextAccountId","changePassword","oldPassword","encryptedMnemonic","activeDappByAccountId","initDapps","_onUpdate","activeDappOrigin","getActiveDapp","activateDapp","oldAccountId","findActiveDappAccount","deactivateDapp","activeOrigin","isDappActive","updateDapp","updater","getDapp","addDapp","getDappsByOrigin","deleteDapp","dontNotifyDapp","deleteAllDapps","origins","getDapps","findLastConnectedAccount","getDappsState","lastConnectedAccountId","byOrigin","getSseLastEventId","setSseLastEventId","lastEventId","loadExploreSites","startSseConnection","initWindowConnector","tonConnect","tonConnectSse","methods","onDappDisconnected","sendSseDisconnect","onDappsChanged","resetupSseConnection","initPolling","initTransactions","initStaking","initSwap","initNfts","initTonConnect","initSse","createLocalTransaction","fetchNfts","processNftUpdates","update","dbNft","convertToDbEntity","put","updateAccountNfts","dbNfts","bulkPut","_nft$collectionAddres","randomBytes","setIsAppFocused","SIGN_MESSAGE","blockchainKey","getBackendAuthToken","getClientId","fetchAccountConfigForDebugPurposesOnly","mnemonicsEncrypted","stateVersion","ping","updateAccountMemoryCache","DEFAULT_PRICE_CURRENCY","POPULAR_WALLET_VERSIONS","pauseOrFocus","resolveDataPreloadPromise","getBaseCurrency","getBackendStakingState","tryUpdateStakingCommonData","swapGetAssets","swapReplaceTransactionsByRanges","fetchVestings","SEC","BALANCE_BASED_INTERVAL","BALANCE_BASED_INTERVAL_WHEN_NOT_FOCUSED","STAKING_INTERVAL","STAKING_INTERVAL_WHEN_NOT_FOCUSED","BACKEND_INTERVAL","LONG_BACKEND_INTERVAL","NFT_FULL_INTERVAL","VERSIONS_INTERVAL","VERSIONS_INTERVAL_WHEN_NOT_FOCUSED","VESTING_INTERVAL","VESTING_INTERVAL_WHEN_NOT_FOCUSED","INCORRECT_TIME_DIFF","FIRST_TRANSACTIONS_LIMIT","DOUBLE_CHECK_TOKENS_PAUSE","prices","baseCurrency","bySlug","lastBalanceCache","_isAccountActive","tryUpdatePrices","allSettled","tryUpdateTokens","tryLoadSwapTokens","then","tryUpdateConfig","setupBackendPolling","setupLongBackendPolling","registerNewTokens","tokenBalances","areNewTokensFound","nftFromSec","nftUpdates","lastNftFullUpdate","doubleCheckTokensTime","localOnUpdate","updateBalance","cache","isToncoinBalanceChanged","balancesToUpdate","updateNfts","nftResult","logAndRescue","throwErrorIfUpdaterNotAlive","updateTokenBalances","changedTokenSlugs","cachedBalance","fromEntries","isUpdating","updateActivities","newTxIds","processNewActivities","isAlive","lastState","stakingCommonData","backendStakingState","stakingState","tokenSlugs","activeBlockchain","newestTxId","tokenBalanceByAddress","allTransactions","isFirstRun","runCallbacks","pricesData","assets","asset","_asset$contract","_prices$bySlug$asset$","_prices$bySlug$asset$2","isLimited","isCopyStorageEnabled","supportAccountsCount","serverUtc","country","countryCode","localUtc","abs","lastResult","shouldCheckV4","v4HasTokens","allWalletInfos","versionInfo","filteredInfos","currentVersion","lastVestingInfo","vestingInfo","resolvePromise","preloadPromise","waitDataPreload","setBaseCurrency","currency","fetchPriceHistory","period","_token$minterAddress","APP_ENV","APP_VERSION","CACHE_TTL","backendStakingStateByAddress","onStakingChangeExpected","localTransaction","fetchBackendStakingState","start","end","cacheItem","totalProfit","getStakingHistory","unlock","prevRound","buildSwapId","SWAP_MAX_LT","SWAP_WAITING_TIME","SWAP_WAITING_PAUSE","MAX_OLD_SWAP_ID","swapBuildTransfer","swapBuild","transferList","transfer","shouldTryDiesel","swapSubmit","historyItem","getSwapItemSlug","swap","item","cex","swapReplaceTransactions","_resolveTokenBySlug$m","fromTime","toTime","buildSwapHistoryRange","swaps","swapGetHistory","fromTimestamp","toTimestamp","replaceTransactions","isFirstLoad","waitPendingDexSwap","ranges","txs","swapGetHistoryByRanges","hiddenTxIds","skipLtRanges","_swap$txIds","txIds","swapActivity","swapItemToActivity","ltString","shortenedTxId","startLt","endLt","pendingSwaps","isCex","areAllStale","every","firstLt","lastLt","firstTimestamp","lastTimestamp","fetchSwaps","swapGetHistoryItem","swapEstimate","isMsgHashMode","swapGetTonCurrencies","swapGetPairs","symbolOrMinter","swapCexEstimate","swapCexValidateAddress","swapCexCreateTransaction","payinAddress","fetchTokenBalances","fetchTokenBalancesByAddress","fetchTokenActivitySlice","fetchAllActivitySlice","shouldCreateLocalTransaction","waitLastTransfer","sendSignedTransferMessage","sendSignedTransferMessages","_params$normalizedAdd","fetchDieselState","isTestnet","dappPromises","getMnemonic","getMnemonicWordList","wordlists","default","confirmDappRequest","confirmDappRequestConnect","cancelDappRequest","fetchAddress","isWalletInitialized","createPostMessageInterface","tonConnectApi","callWindow","chrome","local","_await$storage$get","remove","bind","getMany","idb","INDEXED_DB_NAME","INDEXED_DB_STORE_NAME","fromKeyValueArrays","createStore","del","StorageType","extensionStorage","localStorage","IndexedDb","LocalStorage","ExtensionLocal","CapacitorStorage","withPromise","CONNECT_EVENT_ERROR_CODES","TonConnectError","ManifestContentError","MANIFEST_CONTENT_ERROR","UnknownError","BadRequestError","UnknownAppError","UserRejectsError","CHAIN","SEND_TRANSACTION_ERROR_CODES","SIGN_DATA_ERROR_CODES","safeExec","apiErrors","errors","isValidString","isValidUrl","BLANK_GIF_DATA_URL","resolveInit","initPromise","onPopupUpdate","_onPopupUpdate","connect","openExtensionPopup","connectionType","isSse","dappMetadata","fetchDappMetadata","manifestUrl","validateRequest","addressItem","proofItem","proof","getCurrentAccountOrFail","sseOptions","permissions","promiseResult","reconnect","proofReplyItem","signTonProof","buildTonProofReplyItem","formatConnectError","currentDapp","buildTonAddressReplyItem","e","disconnect","sendTransaction","txPayload","dappNetworkRaw","dappNetwork","MAINNET","validUntil","valid_until","isLedger","vestingAddress","checkIsHisVestingWallet","WrongAddress","WrongNetwork","checkResult","checkTransactionMessages","transactionsForRequest","prepareTransactionForRequest","signedTransfers","submitResult","PartialTransactionFailure","successTransactions","UNKNOWN_ERROR","errorMessage","USER_REJECTS_ERROR","ownerPublicKey","_info$contractInfo","signData","METHOD_NOT_SUPPORTED","rawPayload","deactivate","TESTNET","walletStateInit","idx","crc32","timestampBuffer","allocUnsafe","writeBigInt64LE","domainBuffer","domainLengthBuffer","writeInt32LE","byteLength","addressWorkchainBuffer","writeInt32BE","workChain","addressBuffer","messageBuffer","bufferToSign","lengthBytes","iconUrl","safeIconUrl","skipConnection","lastAccountId","force","extractKey","logDebug","BRIDGE_URL","TTL_SEC","NONCE_SIZE","MAX_CONFIRM_DURATION","sseEventSource","sseDapps","delayedReturnParams","deviceInfo","isFromInAppBrowser","searchParams","ret","shouldOpenUrl","r","connectRequest","decodeURIComponent","secretKeyArray","publicKeyArray","box","lastOutputId","device","sendMessage","closeEventSource","dappsState","clientIds","close","openEventSource","onopen","onerror","onmessage","encryptedMessage","sseDapp","decryptMessage","isExternal","toId","topic","encryptMessage","sendRawMessage","EventSource","nonce","fullBuffer","subarray","jsonText","maxLength","isString","process","env","APP_NAME","APP_ENV_MARKER","DEBUG_MORE","IS_PRODUCTION","IS_TEST","IS_PERF","IS_FIREFOX_EXTENSION","IS_PACKAGED_ELECTRON","IS_ANDROID_DIRECT","ELECTRON_HOST_URL","INACTIVE_MARKER","PRODUCTION_URL","BETA_URL","APP_REPO_URL","BASE_URL","BOT_USERNAME","STRICTERDOM_ENABLED","DEBUG_ALERT_MSG","PIN_LENGTH","NATIVE_BIOMETRICS_USERNAME","NATIVE_BIOMETRICS_SERVER","MNEMONIC_COUNT","PRIVATE_KEY_HEX_LENGTH","MNEMONIC_CHECK_COUNT","MOBILE_SCREEN_MAX_WIDTH","ANIMATION_END_DELAY","ANIMATED_STICKER_TINY_SIZE_PX","ANIMATED_STICKER_SMALL_SIZE_PX","ANIMATED_STICKER_MIDDLE_SIZE_PX","ANIMATED_STICKER_DEFAULT_PX","ANIMATED_STICKER_BIG_SIZE_PX","ANIMATED_STICKER_HUGE_SIZE_PX","DEFAULT_LANDSCAPE_ACTION_TAB_ID","WHOLE_PART_DELIMITER","DEFAULT_SLIPPAGE_VALUE","GLOBAL_STATE_CACHE_DISABLED","GLOBAL_STATE_CACHE_KEY","ANIMATION_LEVEL_MIN","ANIMATION_LEVEL_MED","ANIMATION_LEVEL_MAX","ANIMATION_LEVEL_DEFAULT","THEME_DEFAULT","TONHTTPAPI_V3_MAINNET_API_KEY","TONHTTPAPI_V3_TESTNET_API_KEY","FRACTION_DIGITS","SHORT_FRACTION_DIGITS","SUPPORT_USERNAME","MY_TON_WALLET_PROMO_URL","TELEGRAM_WEB_URL","TON_EXPLORER_BASE_MAINNET_URL","TON_EXPLORER_BASE_TESTNET_URL","TON_EXPLORER_NAME","TOKEN_EXPLORER_MAINNET_URL","TOKEN_EXPLORER_TESTNET_URL","TOKEN_EXPLORER_NAME","GETGEMS_BASE_MAINNET_URL","GETGEMS_BASE_TESTNET_URL","EMPTY_HASH_VALUE","CHANGELLY_SUPPORT_EMAIL","CHANGELLY_LIVE_CHAT_URL","CHANGELLY_SECURITY_EMAIL","CHANGELLY_TERMS_OF_USE","CHANGELLY_PRIVACY_POLICY","CHANGELLY_AML_KYC","CHANGELLY_WAITING_DEADLINE","DEFAULT_SWAP_SECOND_TOKEN_SLUG","DEFAULT_CEX_SWAP_SECOND_TOKEN_SLUG","PROXY_HOSTS","TINY_TRANSFER_MAX_COST","LANG_CACHE_NAME","LANG_LIST","langCode","nativeName","rtl","STAKING_CYCLE_DURATION_MS","MIN_BALANCE_FOR_UNSTAKE","STAKING_FORWARD_AMOUNT","DEFAULT_FEE","STAKING_MIN_AMOUNT","NOMINATORS_STAKING_MIN_AMOUNT","TONCONNECT_PROTOCOL_VERSION","TONCONNECT_WALLET_JSBRIDGE_KEY","MYCOIN_TOKEN","MYCOIN_SLUG","MYCOIN_TOKEN_TESTNET","MYCOIN_SLUG_TESTNET","TOKEN_INFO","TON_BLOCKCHAIN","INIT_SWAP_ASSETS","isPopular","MULTITAB_DATA_CHANNEL_NAME","ACTIVE_TAB_STORAGE_KEY","WINDOW_PROVIDER_CHANNEL","MIN_ASSETS_TAB_VIEW","SHORT_CURRENCY_SYMBOL_MAP","USD","EUR","RUB","CNY","CURRENCY_LIST","DEFAULT_RETRIES","DEFAULT_ERROR_PAUSE","HISTORY_PERIODS","BROWSER_HISTORY_LIMIT","BURN_CHUNK_DURATION_APPROX_SEC","CLAIM_ADDRESS","CLAIM_AMOUNT","CLAIM_COMMENT","DIESEL_TOKENS","root","checkInt","checkInts","arrayish","coerceArray","arg","copy","prototype","call","isArray","createArray","copyArray","sourceArray","targetArray","targetStart","sourceStart","sourceEnd","convertUtf8","toBytes","encodeURI","substr","fromBytes","convertHex","Hex","numberOfRounds","rcon","S","Si","T1","T2","T3","T4","T5","T6","T7","T8","U1","U2","U3","U4","convertToInt32","AES","defineProperty","_prepare","rounds","_Ke","_Kd","roundKeyCount","KC","tk","rconpointer","t","tt","ciphertext","ModeOfOperationECB","_aes","block","ModeOfOperationCBC","_lastCipherblock","j","ModeOfOperationCFB","segmentSize","_shiftRegister","xorSegment","ModeOfOperationOFB","_lastPrecipher","_lastPrecipherIndex","Counter","initialValue","_counter","setValue","setBytes","MAX_SAFE_INTEGER","increment","ModeOfOperationCTR","counter","_remainingCounter","_remainingCounterIndex","pkcs7pad","padder","pkcs7strip","ecb","cfb","ofb","ctr","utils","utf8","padding","pkcs7","pad","strip","_arrayTest","exports","module","define","amd","_aesjs","characters","checkLNP","clean","alphabetMap","confusablesMap","alts","char","str","newStr","RE_SYMBOL_WITH_COMBINING_MARKS","RE_LINEBREAK_COMBINING_MARKS","RE_SPACE_CHARS","RE_FAKE_DOTS","RE_EMPTY_CHARS","checkLNPRegex","global","factory","globalThis","__assign","p","hasOwnProperty","apply","__spreadArray","pack","l","ar","_global","window","extend","obj","extension","getProto","getPrototypeOf","_hasOwn","hasOwn","prop","props","proto","Reflect","ownKeys","setProp","functionOrGetSet","configurable","writable","derive","Child","Parent","getOwnPropertyDescriptor","getPropertyDescriptor","pd","_slice","override","origFunc","overridedFactory","asap$1","setImmediate","setTimeout","arrayToObject","array","extractor","nameAndValue","tryCatch","ex","getByKeyPath","keyPath","rv","indexOf","innerObj","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","splice","delByKeyPath","kp","shallowClone","m","flatten","intrinsicTypeNames","num","intrinsicTypes","circularRefs","deepClone","any","WeakMap","innerDeepClone","toStringTag","o","iteratorSymbol","Symbol","iterator","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","next","done","isAsyncFunction","debug","location","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","getErrorWithStack","prettyStack","exception","numIgnoredFrames","frame","dexieErrorNames","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","_e","_stack","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","exceptionMap","mapError","domError","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","onsuccess","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","LONG_STACKS_CLIP_LIMIT","MAX_LONG_STACKS","ZONE_ECHO_LIMIT","_a$1","globalP","nativeP","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","document","createElement","observe","attributes","setAttribute","asap","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","ref","unhandleds","onunhandled","globalError","pgp","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","_then","handler","PromiseReject","finally","onFinally","stacks","getStack","ms","Infinity","handle","Timeout","clearTimeout","snapShot","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","run_at_end_of_this_or_next_physical_tick","possiblePromises","AggregateError","failure","shouldExecuteTick","beginMicroTickScope","propagateAllListeners","endMicroTickScope","_promise","origProp","addPossiblyUnhandledError","listeners","finalizePhysicalTick","listener","cb","callListener","markErrorAsHandled","errorName","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","finalizer","wrap","errorCatcher","outerScope","switchToZone","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise_1","targetEnv","GlobalPromise","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","warn","tempTransaction","db","storeNames","idbdb","openComplete","letThrough","_vip","dbOpenError","isBeingOpened","_options","autoOpen","dbReadyPromise","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","_completion","DEXIE_VERSION","maxString","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","first","core","reading","fire","indexOrCrit","WhereClause","keyPaths","compoundIndex","indexes","primKey","ix","compound","_maxKey","idxByName","_deps","indexedDB","cmp","_a","prevIndex","prevFilterFn","multi","filterFunction","toCollection","and","count","thenShortcut","numRows","each","Collection","orderBy","mapToClass","mappedClass","readHook","unsubscribe","defineClass","Class","auto","objToAdd","mutate","numFailures","keyOrObject","InvalidArgument","modify","bulkGet","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","fireEvent","makeClassConstructor","createTableConstructor","tableSchema","_allTables","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","isLimitFilter","curr","addMatchFilter","isMatch","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","iterate","valueMapper","set_1","union","cursor","advance","stop","fail","_iterate","cursorPromise","mappedFn","wrappedFn","continue","advancer","ta","tb","NaN","compareUint8Arrays","getUint8Array","compareArrays","al","bl","ArrayBuffer","isView","tsTag","byteOffset","_read","_ctx","table","_write","_addAlgorithm","clone","sortBy","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","_i","nextChunk","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","criteria","deleteCallback","changeSpec","coreRange","createCollectionConstructor","whereClause","keyRangeGenerator","keyRange","whereCtx","readingHook","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","emptyCollection","rangeEqual","upperFactory","toUpperCase","lowerFactory","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","enumerable","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ascending","descending","_min","_max","addRange","newRange","sortDirection","rangeSorter","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","keyWithinCurrentRange","checkKey","startsWithAnyOf","createWhereClauseConstructor","orCollection","_IDBKeyRange","IDBKeyRange","eventRejectHandler","preventDefault","target","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","OpenFailed","active","durability","chromeTransactionDurability","ev","_reject","onabort","on","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","waitFor","promiseLike","_waitingFor","_waitingQueue","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","transactionBoundTable","createTransactionConstructor","dbschema","complete","wasActive","createIndexSpec","src","nameFromKeyPath","createTableSchema","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","extractSchema","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","makeIDBKeyRange","idbRange","upperBound","lowerBound","bound","createDbCoreTable","isAddOrPut","req","reqs","errorHandler","args1","args2","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsNotStarted","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","nonInfinitLimit","idbKeyRange","getAllKeys","count_1","req_1","result_1","keyCount","callbackCount","successHandler","_pos","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStack","stackImpl","middlewares","down","createMiddlewareStacks","dbcore","generateMiddlewareStacks","_novip","_middlewares","tbl","setApiOnPlace","objs","tableNames","propDesc","removeTablesApi","lowerVersionFirst","_cfg","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","updateTablesAndIndexes","queue","_versions","buildGlobalSchema","anyContentUpgraderHasRun","versToRun","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","change","recreate","Upgrade","store_1","addIndex","deleteIndex","idxName","contentUpgrade","upgradeSchema_1","contentUpgradeIsAsync_1","returnValue_1","promiseFollowed","decrementor","deleteRemovedTables","runQueue","createMissingTables","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","contains","storeName","deleteObjectStore","createIndex","dbStoreNames","idbindex","readGlobalSchema","verno","verifyInstalledSchema","installedSchema","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","parseIndexSyntax","primKeyAndIndexes","indexNum","trim","Version","_parseStoresSpec","outSchema","storesSource","storesSpec","upgrade","upgradeFunction","createVersionConstructor","versionNumber","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","getDatabaseNames","infos","_onDatabaseCreated","_onDatabaseDeleted","vip","idbReady","isSafari","userAgentData","intervalId","tryIdb","setInterval","clearInterval","dexieOpen","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","onversionchange","vcFired","onclose","onReadyBeingFired","ready","fireRemainders","remainders_1","awaitIterator","callNext","doThrow","throw","onSuccess","step","onError","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","returnValue","PrematureCommit","createVirtualIndexMiddleware","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","virtualKeyPath","findBestIndex","translateRange","translateRequest","createVirtualCursor","_continue","virtualCursor","virtualIndexMiddleware","level","getObjectDiff","prfx","ap","bp","apTypeName","bpTypeName","getEffectiveKeys","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteRange","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deleteNextChunk","effectiveKeys","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","node","RangeSet","fromOrTree","d","rangeSet","mergeRanges","addKey","addKeys","getRangeSetIterator","left","right","rebalance","rightWasCutOff","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","nextResult1","i2","nextResult2","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","trackAffectedIndexes","getRange","_c","_d","readSubscribers","subscr","pkRangeSet_1","delsRangeSet_1","queriedIndex","queriedRanges","keysPromise_1","resultingKeys","pKeys","cursor_1","wantValues_1","pkey","addAffectedIndex","addKeyOrKeys","oldKey","newKey","deps","dependencies","cancelOpen","bSticky","db_1","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","onlyIfCompatible","idbMode","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","hasValue","currentValue","observer","execute","exec","closed","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","getValue","domDeps","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","databaseName","exists","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","semVer","maxKey","addEventListener","updatedParts","propagatingLocally","event_1","initCustomEvent","propagateLocally","updateParts","wasMe","BroadcastChannel","bc_1","unref","changedParts","postMessage","trig","random","includeUncontrolled","swContainer","serviceWorker","propagateMessageLocally","namedExports","freeze","__proto__","nobleEd25519","_nodeResolve_empty","nodeCrypto","_0n","_1n","_2n","_8n","CU_O","CURVE","P","h","Gx","Gy","POW_2_256","SQRT_M1","SQRT_AD_MINUS_ONE","INVSQRT_A_MINUS_D","ONE_MINUS_D_SQ","D_MINUS_ONE_SQ","ExtendedPoint","y","z","fromAffine","Point","ZERO","mod","toAffineBatch","points","toInv","invertBatch","toAffine","normalizeZ","other","assertExtPoint","X1","Y1","Z1","X2","Y2","Z2","X1Z2","X2Z1","Y1Z2","Y2Z1","negate","double","A","B","C","D","x1y1","E","G","F","H","X3","Y3","Z3","subtract","precomputeWindow","W","windows","wNAF","affinePoint","BASE","_WINDOW_SIZE","precomputes","pointPrecomputes","f","windowSize","mask","maxNumber","shiftBy","wbits","offset1","offset2","cond1","cond2","constTimeNegate","multiply","scalar","normalizeScalar","multiplyUnsafe","P0","isSmallOrder","isTorsionFree","invZ","is0","invert","ax","ay","zz","fromRistrettoBytes","legacyRist","toRistrettoBytes","fromRistrettoHash","condition","neg","assertRstPoint","RistrettoPoint","ep","calcElligatorRistrettoMap","r0","Ns","Ns_D_is_sq","uvRatio","s_","edIsNegative","Nt","s2","W0","W1","W2","W3","hashToCurve","ensureBytes","r1","bytes255ToNumberLE","R1","r2","R2","fromHex","emsg","equalBytes","numberTo32BytesLE","u1","u2","u1_2","u2_2","I","invertSqrt","Dx","Dy","toRawBytes","u2sq","invsqrt","D1","D2","zInv","_x","_y","toHex","one","two","_setWindowSize","strict","normed","bytesToNumberLE","y2","u","isXOdd","isLastByteOdd","fromPrivateKey","getExtendedPublicKey","point","toX25519","Signature","assertValidity","u8","concatBytes","arrays","hexes","uint8a","hexByte","numberTo32BytesBE","MAX_255B","number","modulo","q","gcd","nums","tmp","lastMultiplied","inverted","reduceRight","pow2","power","pow_2_252_3","_5n","_10n","_20n","_40n","_80n","x2","b2","b4","b5","b10","b20","b40","b80","b160","b240","b250","pow_p_5_8","v3","v7","vx2","root1","root2","useRoot1","useRoot2","noRoot","modlLE","b1","expectedLength","isSafeInteger","adjustBytes25519","decodeScalar25519","checkPrivateKey","getKeyFromHash","hashed","head","pointBytes","_sha512Sync","sha512s","sha512","getExtendedPublicKeySync","getPublicKey","getPublicKeySync","R","k","signSync","prepareVerification","sig","SB","pub","finishVerification","kA","RkA","verify","verifySync","sync","curve25519","scalarMult","cswap","x_2","x_3","dummy","montgomeryLadder","pointU","a24","x_1","z_2","z_3","sw","k_t","AA","BB","DA","CB","dacb","da_cb","xp2","encodeUCoordinate","decodeUCoordinate","uEnc","BASE_POINT_U","pu","scalarMultBase","web","TORSION_SUBGROUP","hashToPrivateScalar","bytesLength","randomPrivateKey","createHash","precompute","cached","sha512Sync","defineProperties","ConnectorClass","channel","shouldUseJson","targetOrigin","destroy","messageData","requestStates","requestStatesByCallback","messageId","requestState","withCallback","cancelCallback","progressCallback","isCanceled","onMessage","_requestState$callbac","callbackArgs","_data$error","createConnector","worker","connector","handleMessage","removeEventListener","createExtensionConnector","getInitArgs","port","runtime","addListener","onDisconnect","value1","value2","type1","type2","isArray1","isArray2","array1","array2","member1","object1","object2","keys1","key1","BIGINT_PREFIX","bigintAbs","randomNumber","randomBigInt","bigintCountBits","binaryString","toJSON","hasCallbacks","EventEmitter","resolveChannel","removeListener","emit","_len2","_key2","channels","methodName","isAsc","zonesRegex","gram","_value$match","_value$match2","MAX_TIMEOUT","urlObject","append","retries","timeouts","shouldSkipRetryFn","isNotTemporaryError","_timeouts","fetchWithTimeout","shouldSkipRetry","controller","AbortController","signal","ignoreHttpCodes","ok","_error","_errors$","throttle","noop","throttledAlert","alert","handleErrorEvent","ErrorEvent","handleError","byKey","member","groupBy","groupKey","mapValues","newByKey","object","pickTruthy","stringKeys","savedKeys","stringKey","orderRule","compareValues","currentOrderRule","aValue","bValue","mode1","mode2","orderRule1","orderRule2","isAsc1","isAsc2","areSortedArraysEqual","chunkSize","isObject","isLiteralObject","findLast","predicate","findDifference","set2","element","log","IPFS_GATEWAY_BASE_URL","reserveUrl","isFocused","msWhenNotFocused","_isFocused","SAFE_EXEC_ENABLED","rescue","always","debounce","shouldRunFirst","shouldRunLast","waitingTimeout","interval","isPending","_args","throttleWithTickEnd","throttleWith","onTickEnd","schedulerFn","waiting","_len3","_key3","onIdle","requestIdleCallback","rafPromise","fastRaf","FAST_RAF_TIMEOUT_FALLBACK_MS","fastRafCallbacks","fastRafFallbackCallbacks","fastRafFallbackTimeout","withTimeoutFallback","requestAnimationFrame","currentCallbacks","currentTimeoutCallbacks","onTickEndCallbacks","beforeUnloadCallbacks","onBeforeUnload","isLast","unshift","backendId"],"sourceRoot":""}